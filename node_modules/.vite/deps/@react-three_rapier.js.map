{
  "version": 3,
  "sources": ["../../chevrotain/src/version.ts", "../../lodash/_isPrototype.js", "../../lodash/_overArg.js", "../../lodash/_nativeKeys.js", "../../lodash/_baseKeys.js", "../../lodash/_freeGlobal.js", "../../lodash/_root.js", "../../lodash/_Symbol.js", "../../lodash/_getRawTag.js", "../../lodash/_objectToString.js", "../../lodash/_baseGetTag.js", "../../lodash/isObject.js", "../../lodash/isFunction.js", "../../lodash/_coreJsData.js", "../../lodash/_isMasked.js", "../../lodash/_toSource.js", "../../lodash/_baseIsNative.js", "../../lodash/_getValue.js", "../../lodash/_getNative.js", "../../lodash/_DataView.js", "../../lodash/_Map.js", "../../lodash/_Promise.js", "../../lodash/_Set.js", "../../lodash/_WeakMap.js", "../../lodash/_getTag.js", "../../lodash/isObjectLike.js", "../../lodash/_baseIsArguments.js", "../../lodash/isArguments.js", "../../lodash/isArray.js", "../../lodash/isLength.js", "../../lodash/isArrayLike.js", "../../lodash/stubFalse.js", "../../lodash/isBuffer.js", "../../lodash/_baseIsTypedArray.js", "../../lodash/_baseUnary.js", "../../lodash/_nodeUtil.js", "../../lodash/isTypedArray.js", "../../lodash/isEmpty.js", "../../lodash/_arrayMap.js", "../../lodash/_listCacheClear.js", "../../lodash/eq.js", "../../lodash/_assocIndexOf.js", "../../lodash/_listCacheDelete.js", "../../lodash/_listCacheGet.js", "../../lodash/_listCacheHas.js", "../../lodash/_listCacheSet.js", "../../lodash/_ListCache.js", "../../lodash/_stackClear.js", "../../lodash/_stackDelete.js", "../../lodash/_stackGet.js", "../../lodash/_stackHas.js", "../../lodash/_nativeCreate.js", "../../lodash/_hashClear.js", "../../lodash/_hashDelete.js", "../../lodash/_hashGet.js", "../../lodash/_hashHas.js", "../../lodash/_hashSet.js", "../../lodash/_Hash.js", "../../lodash/_mapCacheClear.js", "../../lodash/_isKeyable.js", "../../lodash/_getMapData.js", "../../lodash/_mapCacheDelete.js", "../../lodash/_mapCacheGet.js", "../../lodash/_mapCacheHas.js", "../../lodash/_mapCacheSet.js", "../../lodash/_MapCache.js", "../../lodash/_stackSet.js", "../../lodash/_Stack.js", "../../lodash/_setCacheAdd.js", "../../lodash/_setCacheHas.js", "../../lodash/_SetCache.js", "../../lodash/_arraySome.js", "../../lodash/_cacheHas.js", "../../lodash/_equalArrays.js", "../../lodash/_Uint8Array.js", "../../lodash/_mapToArray.js", "../../lodash/_setToArray.js", "../../lodash/_equalByTag.js", "../../lodash/_arrayPush.js", "../../lodash/_baseGetAllKeys.js", "../../lodash/_arrayFilter.js", "../../lodash/stubArray.js", "../../lodash/_getSymbols.js", "../../lodash/_baseTimes.js", "../../lodash/_isIndex.js", "../../lodash/_arrayLikeKeys.js", "../../lodash/keys.js", "../../lodash/_getAllKeys.js", "../../lodash/_equalObjects.js", "../../lodash/_baseIsEqualDeep.js", "../../lodash/_baseIsEqual.js", "../../lodash/_baseIsMatch.js", "../../lodash/_isStrictComparable.js", "../../lodash/_getMatchData.js", "../../lodash/_matchesStrictComparable.js", "../../lodash/_baseMatches.js", "../../lodash/isSymbol.js", "../../lodash/_isKey.js", "../../lodash/memoize.js", "../../lodash/_memoizeCapped.js", "../../lodash/_stringToPath.js", "../../lodash/_baseToString.js", "../../lodash/toString.js", "../../lodash/_castPath.js", "../../lodash/_toKey.js", "../../lodash/_baseGet.js", "../../lodash/get.js", "../../lodash/_baseHasIn.js", "../../lodash/_hasPath.js", "../../lodash/hasIn.js", "../../lodash/_baseMatchesProperty.js", "../../lodash/identity.js", "../../lodash/_baseProperty.js", "../../lodash/_basePropertyDeep.js", "../../lodash/property.js", "../../lodash/_baseIteratee.js", "../../lodash/_createBaseFor.js", "../../lodash/_baseFor.js", "../../lodash/_baseForOwn.js", "../../lodash/_createBaseEach.js", "../../lodash/_baseEach.js", "../../lodash/_baseMap.js", "../../lodash/map.js", "../../lodash/_arrayEach.js", "../../lodash/_castFunction.js", "../../lodash/forEach.js", "../../lodash/_baseValues.js", "../../lodash/values.js", "../../lodash/_baseHas.js", "../../lodash/has.js", "../../lodash/_defineProperty.js", "../../lodash/_baseAssignValue.js", "../../lodash/_assignValue.js", "../../lodash/_copyObject.js", "../../lodash/_baseAssign.js", "../../lodash/_nativeKeysIn.js", "../../lodash/_baseKeysIn.js", "../../lodash/keysIn.js", "../../lodash/_baseAssignIn.js", "../../lodash/_cloneBuffer.js", "../../lodash/_copyArray.js", "../../lodash/_copySymbols.js", "../../lodash/_getPrototype.js", "../../lodash/_getSymbolsIn.js", "../../lodash/_copySymbolsIn.js", "../../lodash/_getAllKeysIn.js", "../../lodash/_initCloneArray.js", "../../lodash/_cloneArrayBuffer.js", "../../lodash/_cloneDataView.js", "../../lodash/_cloneRegExp.js", "../../lodash/_cloneSymbol.js", "../../lodash/_cloneTypedArray.js", "../../lodash/_initCloneByTag.js", "../../lodash/_baseCreate.js", "../../lodash/_initCloneObject.js", "../../lodash/_baseIsMap.js", "../../lodash/isMap.js", "../../lodash/_baseIsSet.js", "../../lodash/isSet.js", "../../lodash/_baseClone.js", "../../lodash/clone.js", "../../@chevrotain/utils/src/print.ts", "../../@chevrotain/utils/src/timer.ts", "../../@chevrotain/utils/src/to-fast-properties.ts", "../../@chevrotain/utils/src/api.ts", "../../lodash/_baseSlice.js", "../../lodash/_trimmedEndIndex.js", "../../lodash/_baseTrim.js", "../../lodash/toNumber.js", "../../lodash/toFinite.js", "../../lodash/toInteger.js", "../../lodash/drop.js", "../../lodash/isString.js", "../../lodash/_baseIsRegExp.js", "../../lodash/isRegExp.js", "../../lodash/_baseSet.js", "../../lodash/_basePickBy.js", "../../lodash/pickBy.js", "../../lodash/_apply.js", "../../lodash/_overRest.js", "../../lodash/constant.js", "../../lodash/_baseSetToString.js", "../../lodash/_shortOut.js", "../../lodash/_setToString.js", "../../lodash/_baseRest.js", "../../lodash/_isIterateeCall.js", "../../lodash/_createAssigner.js", "../../lodash/assign.js", "../../@chevrotain/gast/src/model.ts", "../../@chevrotain/gast/src/visitor.ts", "../../lodash/_baseSome.js", "../../lodash/some.js", "../../lodash/_arrayEvery.js", "../../lodash/_baseEvery.js", "../../lodash/every.js", "../../lodash/_baseFindIndex.js", "../../lodash/_baseIsNaN.js", "../../lodash/_strictIndexOf.js", "../../lodash/_baseIndexOf.js", "../../lodash/includes.js", "../../@chevrotain/gast/src/helpers.ts", "../../@chevrotain/gast/src/api.ts", "../../chevrotain/src/parse/grammar/rest.ts", "../../lodash/_isFlattenable.js", "../../lodash/_baseFlatten.js", "../../lodash/flatten.js", "../../lodash/_arrayIncludes.js", "../../lodash/_arrayIncludesWith.js", "../../lodash/noop.js", "../../lodash/_createSet.js", "../../lodash/_baseUniq.js", "../../lodash/uniq.js", "../../chevrotain/src/parse/grammar/first.ts", "../../chevrotain/src/parse/constants.ts", "../../chevrotain/src/parse/grammar/follow.ts", "../../lodash/isUndefined.js", "../../regexp-to-ast/lib/regexp-to-ast.js", "../../lodash/head.js", "../../lodash/first.js", "../../lodash/compact.js", "../../lodash/_baseFilter.js", "../../lodash/negate.js", "../../lodash/reject.js", "../../lodash/_baseDifference.js", "../../lodash/isArrayLikeObject.js", "../../lodash/difference.js", "../../lodash/indexOf.js", "../../lodash/_createFind.js", "../../lodash/findIndex.js", "../../lodash/find.js", "../../lodash/filter.js", "../../lodash/defaults.js", "../../lodash/_arrayReduce.js", "../../lodash/_baseReduce.js", "../../lodash/reduce.js", "../../chevrotain/src/scan/reg_exp_parser.ts", "../../chevrotain/src/scan/reg_exp.ts", "../../chevrotain/src/scan/lexer.ts", "../../lodash/last.js", "../../chevrotain/src/scan/tokens.ts", "../../chevrotain/src/scan/lexer_errors_public.ts", "../../chevrotain/src/scan/lexer_public.ts", "../../chevrotain/src/scan/tokens_public.ts", "../../chevrotain/src/parse/errors_public.ts", "../../chevrotain/src/parse/grammar/resolver.ts", "../../lodash/_arrayAggregator.js", "../../lodash/_baseAggregator.js", "../../lodash/_createAggregator.js", "../../lodash/groupBy.js", "../../lodash/flatMap.js", "../../lodash/dropRight.js", "../../chevrotain/src/parse/grammar/interpreter.ts", "../../chevrotain/src/parse/grammar/lookahead.ts", "../../chevrotain/src/parse/grammar/checks.ts", "../../chevrotain/src/parse/grammar/gast/gast_resolver_public.ts", "../../chevrotain/src/parse/exceptions_public.ts", "../../chevrotain/src/parse/parser/traits/recoverable.ts", "../../chevrotain/src/parse/grammar/keys.ts", "../../chevrotain/src/parse/grammar/llk_lookahead.ts", "../../chevrotain/src/parse/parser/traits/looksahead.ts", "../../chevrotain/src/parse/cst/cst.ts", "../../chevrotain/src/lang/lang_extensions.ts", "../../chevrotain/src/parse/cst/cst_visitor.ts", "../../chevrotain/src/parse/parser/traits/tree_builder.ts", "../../chevrotain/src/parse/parser/traits/lexer_adapter.ts", "../../chevrotain/src/parse/parser/traits/recognizer_api.ts", "../../chevrotain/src/parse/parser/traits/recognizer_engine.ts", "../../chevrotain/src/parse/parser/traits/error_handler.ts", "../../chevrotain/src/parse/parser/traits/context_assist.ts", "../../chevrotain/src/parse/parser/traits/gast_recorder.ts", "../../chevrotain/src/parse/parser/traits/perf_tracer.ts", "../../chevrotain/src/parse/parser/utils/apply_mixins.ts", "../../chevrotain/src/parse/parser/parser.ts", "../../@chevrotain/cst-dts-gen/src/model.ts", "../../lodash/_castSlice.js", "../../lodash/_hasUnicode.js", "../../lodash/_asciiToArray.js", "../../lodash/_unicodeToArray.js", "../../lodash/_stringToArray.js", "../../lodash/_createCaseFirst.js", "../../lodash/upperFirst.js", "../../@chevrotain/cst-dts-gen/src/generate.ts", "../../@chevrotain/cst-dts-gen/src/api.ts", "../../chevrotain/src/diagrams/render_public.ts", "../../chevrotain/src/api.ts", "browser-external:fs", "../../@react-three/rapier/dist/react-three-rapier.esm.js", "../../@react-three/rapier/node_modules/three-stdlib/math/ConvexHull.js", "../../@react-three/rapier/node_modules/three-stdlib/misc/ConvexObjectBreaker.js", "../../@react-three/rapier/node_modules/three-stdlib/misc/Gyroscope.js", "../../@react-three/rapier/node_modules/three-stdlib/renderers/CSS2DRenderer.js", "../../@react-three/rapier/node_modules/three-stdlib/renderers/CSS3DRenderer.js", "../../@react-three/rapier/node_modules/three-stdlib/modifiers/CurveModifier.js", "../../@react-three/rapier/node_modules/three-stdlib/utils/BufferGeometryUtils.js", "../../@react-three/rapier/node_modules/three-stdlib/modifiers/SimplifyModifier.js", "../../@react-three/rapier/node_modules/three-stdlib/exporters/GLTFExporter.js", "../../@react-three/rapier/node_modules/fflate/esm/browser.js", "../../@react-three/rapier/node_modules/three-stdlib/exporters/DRACOExporter.js", "../../mmd-parser/build/mmdparser.module.js", "../../@react-three/rapier/node_modules/three-stdlib/animation/CCDIKSolver.js", "../../@react-three/rapier/node_modules/three-stdlib/animation/MMDPhysics.js", "../../@react-three/rapier/node_modules/three-stdlib/animation/MMDAnimationHelper.js", "../../@react-three/rapier/node_modules/three-stdlib/objects/Reflector.js", "../../@react-three/rapier/node_modules/three-stdlib/objects/Refractor.js", "../../@react-three/rapier/node_modules/three-stdlib/objects/ShadowMesh.js", "../../@react-three/rapier/node_modules/three-stdlib/objects/Lensflare.js", "../../@react-three/rapier/node_modules/three-stdlib/objects/MarchingCubes.js", "../../@react-three/rapier/node_modules/three-stdlib/math/SimplexNoise.js", "../../@react-three/rapier/node_modules/three-stdlib/geometries/LightningStrike.js", "../../@react-three/rapier/node_modules/three-stdlib/objects/ReflectorForSSRPass.js", "../../@react-three/rapier/node_modules/three-stdlib/objects/Sky.js", "../../@react-three/rapier/node_modules/three-stdlib/objects/Water2.js", "../../@react-three/rapier/node_modules/three-stdlib/utils/RoughnessMipmapper.js", "../../@react-three/rapier/node_modules/three-stdlib/shaders/UnpackDepthRGBAShader.js", "../../@react-three/rapier/node_modules/three-stdlib/shaders/BokehShader2.js", "../../@react-three/rapier/node_modules/three-stdlib/math/MeshSurfaceSampler.js", "../../@react-three/rapier/node_modules/three-stdlib/math/OBB.js", "../../@react-three/rapier/node_modules/three-stdlib/math/Capsule.js", "../../@react-three/rapier/node_modules/three-stdlib/math/ImprovedNoise.js", "../../@react-three/rapier/node_modules/three-stdlib/math/Octree.js", "../../@react-three/rapier/node_modules/three-stdlib/controls/experimental/CameraControls.js", "../../@react-three/rapier/node_modules/three-stdlib/controls/FirstPersonControls.js", "../../@react-three/rapier/node_modules/three-stdlib/controls/PointerLockControls.js", "../../@react-three/rapier/node_modules/three-stdlib/controls/ArcballControls.js", "../../@react-three/rapier/node_modules/three-stdlib/postprocessing/Pass.js", "../../@react-three/rapier/node_modules/three-stdlib/shaders/HalftoneShader.js", "../../@react-three/rapier/node_modules/three-stdlib/shaders/SMAAShader.js", "../../@react-three/rapier/node_modules/three-stdlib/shaders/FilmShader.js", "../../@react-three/rapier/node_modules/three-stdlib/shaders/CopyShader.js", "../../@react-three/rapier/node_modules/three-stdlib/shaders/SSAOShader.js", "../../@react-three/rapier/node_modules/three-stdlib/postprocessing/SSAOPass.js", "../../@react-three/rapier/node_modules/three-stdlib/shaders/BokehShader.js", "../../@react-three/rapier/node_modules/three-stdlib/shaders/LuminosityShader.js", "../../@react-three/rapier/node_modules/three-stdlib/shaders/ToneMapShader.js", "../../@react-three/rapier/node_modules/three-stdlib/shaders/LuminosityHighPassShader.js", "../../@react-three/rapier/node_modules/three-stdlib/postprocessing/UnrealBloomPass.js", "../../@react-three/rapier/node_modules/three-stdlib/shaders/SAOShader.js", "../../@react-three/rapier/node_modules/three-stdlib/shaders/DepthLimitedBlurShader.js", "../../@react-three/rapier/node_modules/three-stdlib/postprocessing/SAOPass.js", "../../@react-three/rapier/node_modules/three-stdlib/shaders/AfterimageShader.js", "../../@react-three/rapier/node_modules/three-stdlib/shaders/DotScreenShader.js", "../../@react-three/rapier/node_modules/three-stdlib/shaders/SSRShader.js", "../../@react-three/rapier/node_modules/three-stdlib/postprocessing/SSRPass.js", "../../@react-three/rapier/node_modules/three-stdlib/shaders/ConvolutionShader.js", "../../@react-three/rapier/node_modules/three-stdlib/loaders/GLTFLoader.js", "../../@react-three/rapier/node_modules/three-stdlib/webxr/OculusHandPointerModel.js", "../../@react-three/rapier/node_modules/three-stdlib/webxr/VRButton.js", "../../@react-three/rapier/node_modules/three-stdlib/libs/MotionControllers.js", "../../@react-three/rapier/node_modules/three-stdlib/webxr/XRHandPrimitiveModel.js", "../../@react-three/rapier/node_modules/three-stdlib/geometries/RoundedBoxGeometry.js", "../../@react-three/rapier/node_modules/three-stdlib/csm/CSMFrustum.js", "../../@react-three/rapier/node_modules/three-stdlib/csm/CSM.js", "../../@react-three/rapier/node_modules/three-stdlib/shaders/ACESFilmicToneMappingShader.js", "../../@react-three/rapier/node_modules/three-stdlib/shaders/BasicShader.js", "../../@react-three/rapier/node_modules/three-stdlib/shaders/BleachBypassShader.js", "../../@react-three/rapier/node_modules/three-stdlib/shaders/BlendShader.js", "../../@react-three/rapier/node_modules/three-stdlib/shaders/BrightnessContrastShader.js", "../../@react-three/rapier/node_modules/three-stdlib/shaders/ColorCorrectionShader.js", "../../@react-three/rapier/node_modules/three-stdlib/shaders/ColorifyShader.js", "../../@react-three/rapier/node_modules/three-stdlib/shaders/DOFMipMapShader.js", "../../@react-three/rapier/node_modules/three-stdlib/shaders/FXAAShader.js", "../../@react-three/rapier/node_modules/three-stdlib/shaders/FocusShader.js", "../../@react-three/rapier/node_modules/three-stdlib/shaders/FreiChenShader.js", "../../@react-three/rapier/node_modules/three-stdlib/shaders/FresnelShader.js", "../../@react-three/rapier/node_modules/three-stdlib/shaders/GammaCorrectionShader.js", "../../@react-three/rapier/node_modules/three-stdlib/shaders/GodRaysShader.js", "../../@react-three/rapier/node_modules/three-stdlib/shaders/HorizontalBlurShader.js", "../../@react-three/rapier/node_modules/three-stdlib/shaders/HorizontalTiltShiftShader.js", "../../@react-three/rapier/node_modules/three-stdlib/shaders/HueSaturationShader.js", "../../@react-three/rapier/node_modules/three-stdlib/shaders/KaleidoShader.js", "../../@react-three/rapier/node_modules/three-stdlib/shaders/MirrorShader.js", "../../@react-three/rapier/node_modules/three-stdlib/shaders/NormalMapShader.js", "../../@react-three/rapier/node_modules/three-stdlib/shaders/ParallaxShader.js", "../../@react-three/rapier/node_modules/three-stdlib/shaders/PixelShader.js", "../../@react-three/rapier/node_modules/three-stdlib/shaders/RGBShiftShader.js", "../../@react-three/rapier/node_modules/three-stdlib/shaders/SepiaShader.js", "../../@react-three/rapier/node_modules/three-stdlib/shaders/SobelOperatorShader.js", "../../@react-three/rapier/node_modules/three-stdlib/shaders/TechnicolorShader.js", "../../@react-three/rapier/node_modules/three-stdlib/shaders/ToonShader.js", "../../@react-three/rapier/node_modules/three-stdlib/shaders/TriangleBlurShader.js", "../../@react-three/rapier/node_modules/three-stdlib/shaders/VerticalBlurShader.js", "../../@react-three/rapier/node_modules/three-stdlib/shaders/VerticalTiltShiftShader.js", "../../@react-three/rapier/node_modules/three-stdlib/shaders/VignetteShader.js", "../../@react-three/rapier/node_modules/three-stdlib/shaders/VolumeShader.js", "../../@react-three/rapier/node_modules/three-stdlib/shaders/WaterRefractionShader.js", "../../@react-three/rapier/node_modules/three-stdlib/interactive/InteractiveGroup.js", "../../@react-three/rapier/node_modules/three-stdlib/interactive/SelectionBox.js", "../../@react-three/rapier/node_modules/three-stdlib/loaders/FBXLoader.js", "../../@react-three/rapier/node_modules/three-stdlib/loaders/FontLoader.js", "../../@react-three/rapier/node_modules/three-stdlib/_polyfill/Data3DTexture.js", "../../@react-three/rapier/node_modules/three-stdlib/loaders/XLoader.js", "../../chevrotain/lib_esm/api_esm.mjs", "../../@react-three/rapier/node_modules/three-stdlib/utils/WorkerPool.js", "../../ktx-parse/src/constants.ts", "../../ktx-parse/src/container.ts", "../../ktx-parse/src/buffer-reader.ts", "../../ktx-parse/src/constants-internal.ts", "../../ktx-parse/src/util.ts", "../../ktx-parse/src/read.ts", "../../ktx-parse/src/write.ts", "../../zstddec/zstddec.ts", "../../@react-three/rapier/node_modules/three-stdlib/_polyfill/CompressedArrayTexture.js", "../../@react-three/rapier/node_modules/three-stdlib/loaders/KTX2Loader.js", "../../opentype.js/node_modules/string.prototype.codepointat/codepointat.js", "../../opentype.js/node_modules/tiny-inflate/index.js", "../../opentype.js/src/bbox.js", "../../opentype.js/src/path.js", "../../opentype.js/src/check.js", "../../opentype.js/src/types.js", "../../opentype.js/src/table.js", "../../opentype.js/src/parse.js", "../../opentype.js/src/tables/cmap.js", "../../opentype.js/src/encoding.js", "../../opentype.js/src/draw.js", "../../opentype.js/src/glyph.js", "../../opentype.js/src/glyphset.js", "../../opentype.js/src/tables/cff.js", "../../opentype.js/src/tables/head.js", "../../opentype.js/src/tables/hhea.js", "../../opentype.js/src/tables/hmtx.js", "../../opentype.js/src/tables/ltag.js", "../../opentype.js/src/tables/maxp.js", "../../opentype.js/src/tables/name.js", "../../opentype.js/src/tables/os2.js", "../../opentype.js/src/tables/post.js", "../../opentype.js/src/tables/gsub.js", "../../opentype.js/src/tables/meta.js", "../../opentype.js/src/tables/sfnt.js", "../../opentype.js/src/layout.js", "../../opentype.js/src/position.js", "../../opentype.js/src/substitution.js", "../../opentype.js/src/util.js", "../../opentype.js/src/tables/glyf.js", "../../opentype.js/src/hintingtt.js", "../../opentype.js/src/tokenizer.js", "../../opentype.js/src/char.js", "../../opentype.js/src/features/featureQuery.js", "../../opentype.js/src/features/arab/contextCheck/arabicWord.js", "../../opentype.js/src/features/arab/contextCheck/arabicSentence.js", "../../opentype.js/src/features/applySubstitution.js", "../../opentype.js/src/features/arab/arabicPresentationForms.js", "../../opentype.js/src/features/arab/arabicRequiredLigatures.js", "../../opentype.js/src/features/latn/contextCheck/latinWord.js", "../../opentype.js/src/features/latn/latinLigatures.js", "../../opentype.js/src/bidi.js", "../../opentype.js/src/font.js", "../../opentype.js/src/tables/fvar.js", "../../opentype.js/src/tables/gdef.js", "../../opentype.js/src/tables/gpos.js", "../../opentype.js/src/tables/kern.js", "../../opentype.js/src/tables/loca.js", "../../opentype.js/src/opentype.js", "../../@react-three/rapier/node_modules/three-stdlib/loaders/EXRLoader.js", "../../@react-three/rapier/node_modules/three-stdlib/loaders/BasisTextureLoader.js", "../../@react-three/rapier/node_modules/three-stdlib/loaders/LDrawLoader.js", "../../@react-three/rapier/node_modules/three-stdlib/loaders/OBJLoader.js", "../../@react-three/rapier/node_modules/three-stdlib/loaders/KTXLoader.js", "../../@react-three/rapier/node_modules/three-stdlib/lines/LineSegmentsGeometry.js", "../../@react-three/rapier/node_modules/three-stdlib/lines/Wireframe.js", "../../@react-three/rapier/node_modules/three-stdlib/lines/LineSegments2.js", "../../@react-three/rapier/node_modules/three-stdlib/helpers/VertexTangentsHelper.js", "../../@react-three/rapier/node_modules/three-stdlib/helpers/VertexNormalsHelper.js", "../../@react-three/rapier/node_modules/three-stdlib/deprecated/Geometry.js"],
  "sourcesContent": ["// needs a separate module as this is required inside chevrotain productive code\r\n// and also in the entry point for webpack(api.ts).\r\n// A separate file avoids cyclic dependencies and webpack errors.\r\nexport const VERSION = \"10.5.0\"\r\n", "/** Used for built-in method references. */\r\nvar objectProto = Object.prototype;\r\n\r\n/**\r\n * Checks if `value` is likely a prototype object.\r\n *\r\n * @private\r\n * @param {*} value The value to check.\r\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\r\n */\r\nfunction isPrototype(value) {\r\n  var Ctor = value && value.constructor,\r\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\r\n\r\n  return value === proto;\r\n}\r\n\r\nmodule.exports = isPrototype;\r\n", "/**\r\n * Creates a unary function that invokes `func` with its argument transformed.\r\n *\r\n * @private\r\n * @param {Function} func The function to wrap.\r\n * @param {Function} transform The argument transform.\r\n * @returns {Function} Returns the new function.\r\n */\r\nfunction overArg(func, transform) {\r\n  return function(arg) {\r\n    return func(transform(arg));\r\n  };\r\n}\r\n\r\nmodule.exports = overArg;\r\n", "var overArg = require('./_overArg');\r\n\r\n/* Built-in method references for those with the same name as other `lodash` methods. */\r\nvar nativeKeys = overArg(Object.keys, Object);\r\n\r\nmodule.exports = nativeKeys;\r\n", "var isPrototype = require('./_isPrototype'),\r\n    nativeKeys = require('./_nativeKeys');\r\n\r\n/** Used for built-in method references. */\r\nvar objectProto = Object.prototype;\r\n\r\n/** Used to check objects for own properties. */\r\nvar hasOwnProperty = objectProto.hasOwnProperty;\r\n\r\n/**\r\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\r\n *\r\n * @private\r\n * @param {Object} object The object to query.\r\n * @returns {Array} Returns the array of property names.\r\n */\r\nfunction baseKeys(object) {\r\n  if (!isPrototype(object)) {\r\n    return nativeKeys(object);\r\n  }\r\n  var result = [];\r\n  for (var key in Object(object)) {\r\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\r\n      result.push(key);\r\n    }\r\n  }\r\n  return result;\r\n}\r\n\r\nmodule.exports = baseKeys;\r\n", "/** Detect free variable `global` from Node.js. */\r\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\r\n\r\nmodule.exports = freeGlobal;\r\n", "var freeGlobal = require('./_freeGlobal');\r\n\r\n/** Detect free variable `self`. */\r\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\r\n\r\n/** Used as a reference to the global object. */\r\nvar root = freeGlobal || freeSelf || Function('return this')();\r\n\r\nmodule.exports = root;\r\n", "var root = require('./_root');\r\n\r\n/** Built-in value references. */\r\nvar Symbol = root.Symbol;\r\n\r\nmodule.exports = Symbol;\r\n", "var Symbol = require('./_Symbol');\r\n\r\n/** Used for built-in method references. */\r\nvar objectProto = Object.prototype;\r\n\r\n/** Used to check objects for own properties. */\r\nvar hasOwnProperty = objectProto.hasOwnProperty;\r\n\r\n/**\r\n * Used to resolve the\r\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\r\n * of values.\r\n */\r\nvar nativeObjectToString = objectProto.toString;\r\n\r\n/** Built-in value references. */\r\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\r\n\r\n/**\r\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\r\n *\r\n * @private\r\n * @param {*} value The value to query.\r\n * @returns {string} Returns the raw `toStringTag`.\r\n */\r\nfunction getRawTag(value) {\r\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\r\n      tag = value[symToStringTag];\r\n\r\n  try {\r\n    value[symToStringTag] = undefined;\r\n    var unmasked = true;\r\n  } catch (e) {}\r\n\r\n  var result = nativeObjectToString.call(value);\r\n  if (unmasked) {\r\n    if (isOwn) {\r\n      value[symToStringTag] = tag;\r\n    } else {\r\n      delete value[symToStringTag];\r\n    }\r\n  }\r\n  return result;\r\n}\r\n\r\nmodule.exports = getRawTag;\r\n", "/** Used for built-in method references. */\r\nvar objectProto = Object.prototype;\r\n\r\n/**\r\n * Used to resolve the\r\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\r\n * of values.\r\n */\r\nvar nativeObjectToString = objectProto.toString;\r\n\r\n/**\r\n * Converts `value` to a string using `Object.prototype.toString`.\r\n *\r\n * @private\r\n * @param {*} value The value to convert.\r\n * @returns {string} Returns the converted string.\r\n */\r\nfunction objectToString(value) {\r\n  return nativeObjectToString.call(value);\r\n}\r\n\r\nmodule.exports = objectToString;\r\n", "var Symbol = require('./_Symbol'),\r\n    getRawTag = require('./_getRawTag'),\r\n    objectToString = require('./_objectToString');\r\n\r\n/** `Object#toString` result references. */\r\nvar nullTag = '[object Null]',\r\n    undefinedTag = '[object Undefined]';\r\n\r\n/** Built-in value references. */\r\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\r\n\r\n/**\r\n * The base implementation of `getTag` without fallbacks for buggy environments.\r\n *\r\n * @private\r\n * @param {*} value The value to query.\r\n * @returns {string} Returns the `toStringTag`.\r\n */\r\nfunction baseGetTag(value) {\r\n  if (value == null) {\r\n    return value === undefined ? undefinedTag : nullTag;\r\n  }\r\n  return (symToStringTag && symToStringTag in Object(value))\r\n    ? getRawTag(value)\r\n    : objectToString(value);\r\n}\r\n\r\nmodule.exports = baseGetTag;\r\n", "/**\r\n * Checks if `value` is the\r\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\r\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\r\n *\r\n * @static\r\n * @memberOf _\r\n * @since 0.1.0\r\n * @category Lang\r\n * @param {*} value The value to check.\r\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\r\n * @example\r\n *\r\n * _.isObject({});\r\n * // => true\r\n *\r\n * _.isObject([1, 2, 3]);\r\n * // => true\r\n *\r\n * _.isObject(_.noop);\r\n * // => true\r\n *\r\n * _.isObject(null);\r\n * // => false\r\n */\r\nfunction isObject(value) {\r\n  var type = typeof value;\r\n  return value != null && (type == 'object' || type == 'function');\r\n}\r\n\r\nmodule.exports = isObject;\r\n", "var baseGetTag = require('./_baseGetTag'),\r\n    isObject = require('./isObject');\r\n\r\n/** `Object#toString` result references. */\r\nvar asyncTag = '[object AsyncFunction]',\r\n    funcTag = '[object Function]',\r\n    genTag = '[object GeneratorFunction]',\r\n    proxyTag = '[object Proxy]';\r\n\r\n/**\r\n * Checks if `value` is classified as a `Function` object.\r\n *\r\n * @static\r\n * @memberOf _\r\n * @since 0.1.0\r\n * @category Lang\r\n * @param {*} value The value to check.\r\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\r\n * @example\r\n *\r\n * _.isFunction(_);\r\n * // => true\r\n *\r\n * _.isFunction(/abc/);\r\n * // => false\r\n */\r\nfunction isFunction(value) {\r\n  if (!isObject(value)) {\r\n    return false;\r\n  }\r\n  // The use of `Object#toString` avoids issues with the `typeof` operator\r\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\r\n  var tag = baseGetTag(value);\r\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\r\n}\r\n\r\nmodule.exports = isFunction;\r\n", "var root = require('./_root');\r\n\r\n/** Used to detect overreaching core-js shims. */\r\nvar coreJsData = root['__core-js_shared__'];\r\n\r\nmodule.exports = coreJsData;\r\n", "var coreJsData = require('./_coreJsData');\r\n\r\n/** Used to detect methods masquerading as native. */\r\nvar maskSrcKey = (function() {\r\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\r\n  return uid ? ('Symbol(src)_1.' + uid) : '';\r\n}());\r\n\r\n/**\r\n * Checks if `func` has its source masked.\r\n *\r\n * @private\r\n * @param {Function} func The function to check.\r\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\r\n */\r\nfunction isMasked(func) {\r\n  return !!maskSrcKey && (maskSrcKey in func);\r\n}\r\n\r\nmodule.exports = isMasked;\r\n", "/** Used for built-in method references. */\r\nvar funcProto = Function.prototype;\r\n\r\n/** Used to resolve the decompiled source of functions. */\r\nvar funcToString = funcProto.toString;\r\n\r\n/**\r\n * Converts `func` to its source code.\r\n *\r\n * @private\r\n * @param {Function} func The function to convert.\r\n * @returns {string} Returns the source code.\r\n */\r\nfunction toSource(func) {\r\n  if (func != null) {\r\n    try {\r\n      return funcToString.call(func);\r\n    } catch (e) {}\r\n    try {\r\n      return (func + '');\r\n    } catch (e) {}\r\n  }\r\n  return '';\r\n}\r\n\r\nmodule.exports = toSource;\r\n", "var isFunction = require('./isFunction'),\r\n    isMasked = require('./_isMasked'),\r\n    isObject = require('./isObject'),\r\n    toSource = require('./_toSource');\r\n\r\n/**\r\n * Used to match `RegExp`\r\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\r\n */\r\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\r\n\r\n/** Used to detect host constructors (Safari). */\r\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\r\n\r\n/** Used for built-in method references. */\r\nvar funcProto = Function.prototype,\r\n    objectProto = Object.prototype;\r\n\r\n/** Used to resolve the decompiled source of functions. */\r\nvar funcToString = funcProto.toString;\r\n\r\n/** Used to check objects for own properties. */\r\nvar hasOwnProperty = objectProto.hasOwnProperty;\r\n\r\n/** Used to detect if a method is native. */\r\nvar reIsNative = RegExp('^' +\r\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\r\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\r\n);\r\n\r\n/**\r\n * The base implementation of `_.isNative` without bad shim checks.\r\n *\r\n * @private\r\n * @param {*} value The value to check.\r\n * @returns {boolean} Returns `true` if `value` is a native function,\r\n *  else `false`.\r\n */\r\nfunction baseIsNative(value) {\r\n  if (!isObject(value) || isMasked(value)) {\r\n    return false;\r\n  }\r\n  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\r\n  return pattern.test(toSource(value));\r\n}\r\n\r\nmodule.exports = baseIsNative;\r\n", "/**\r\n * Gets the value at `key` of `object`.\r\n *\r\n * @private\r\n * @param {Object} [object] The object to query.\r\n * @param {string} key The key of the property to get.\r\n * @returns {*} Returns the property value.\r\n */\r\nfunction getValue(object, key) {\r\n  return object == null ? undefined : object[key];\r\n}\r\n\r\nmodule.exports = getValue;\r\n", "var baseIsNative = require('./_baseIsNative'),\r\n    getValue = require('./_getValue');\r\n\r\n/**\r\n * Gets the native function at `key` of `object`.\r\n *\r\n * @private\r\n * @param {Object} object The object to query.\r\n * @param {string} key The key of the method to get.\r\n * @returns {*} Returns the function if it's native, else `undefined`.\r\n */\r\nfunction getNative(object, key) {\r\n  var value = getValue(object, key);\r\n  return baseIsNative(value) ? value : undefined;\r\n}\r\n\r\nmodule.exports = getNative;\r\n", "var getNative = require('./_getNative'),\r\n    root = require('./_root');\r\n\r\n/* Built-in method references that are verified to be native. */\r\nvar DataView = getNative(root, 'DataView');\r\n\r\nmodule.exports = DataView;\r\n", "var getNative = require('./_getNative'),\r\n    root = require('./_root');\r\n\r\n/* Built-in method references that are verified to be native. */\r\nvar Map = getNative(root, 'Map');\r\n\r\nmodule.exports = Map;\r\n", "var getNative = require('./_getNative'),\r\n    root = require('./_root');\r\n\r\n/* Built-in method references that are verified to be native. */\r\nvar Promise = getNative(root, 'Promise');\r\n\r\nmodule.exports = Promise;\r\n", "var getNative = require('./_getNative'),\r\n    root = require('./_root');\r\n\r\n/* Built-in method references that are verified to be native. */\r\nvar Set = getNative(root, 'Set');\r\n\r\nmodule.exports = Set;\r\n", "var getNative = require('./_getNative'),\r\n    root = require('./_root');\r\n\r\n/* Built-in method references that are verified to be native. */\r\nvar WeakMap = getNative(root, 'WeakMap');\r\n\r\nmodule.exports = WeakMap;\r\n", "var DataView = require('./_DataView'),\r\n    Map = require('./_Map'),\r\n    Promise = require('./_Promise'),\r\n    Set = require('./_Set'),\r\n    WeakMap = require('./_WeakMap'),\r\n    baseGetTag = require('./_baseGetTag'),\r\n    toSource = require('./_toSource');\r\n\r\n/** `Object#toString` result references. */\r\nvar mapTag = '[object Map]',\r\n    objectTag = '[object Object]',\r\n    promiseTag = '[object Promise]',\r\n    setTag = '[object Set]',\r\n    weakMapTag = '[object WeakMap]';\r\n\r\nvar dataViewTag = '[object DataView]';\r\n\r\n/** Used to detect maps, sets, and weakmaps. */\r\nvar dataViewCtorString = toSource(DataView),\r\n    mapCtorString = toSource(Map),\r\n    promiseCtorString = toSource(Promise),\r\n    setCtorString = toSource(Set),\r\n    weakMapCtorString = toSource(WeakMap);\r\n\r\n/**\r\n * Gets the `toStringTag` of `value`.\r\n *\r\n * @private\r\n * @param {*} value The value to query.\r\n * @returns {string} Returns the `toStringTag`.\r\n */\r\nvar getTag = baseGetTag;\r\n\r\n// Fallback for data views, maps, sets, and weak maps in IE 11 and promises in Node.js < 6.\r\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\r\n    (Map && getTag(new Map) != mapTag) ||\r\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\r\n    (Set && getTag(new Set) != setTag) ||\r\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\r\n  getTag = function(value) {\r\n    var result = baseGetTag(value),\r\n        Ctor = result == objectTag ? value.constructor : undefined,\r\n        ctorString = Ctor ? toSource(Ctor) : '';\r\n\r\n    if (ctorString) {\r\n      switch (ctorString) {\r\n        case dataViewCtorString: return dataViewTag;\r\n        case mapCtorString: return mapTag;\r\n        case promiseCtorString: return promiseTag;\r\n        case setCtorString: return setTag;\r\n        case weakMapCtorString: return weakMapTag;\r\n      }\r\n    }\r\n    return result;\r\n  };\r\n}\r\n\r\nmodule.exports = getTag;\r\n", "/**\r\n * Checks if `value` is object-like. A value is object-like if it's not `null`\r\n * and has a `typeof` result of \"object\".\r\n *\r\n * @static\r\n * @memberOf _\r\n * @since 4.0.0\r\n * @category Lang\r\n * @param {*} value The value to check.\r\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\r\n * @example\r\n *\r\n * _.isObjectLike({});\r\n * // => true\r\n *\r\n * _.isObjectLike([1, 2, 3]);\r\n * // => true\r\n *\r\n * _.isObjectLike(_.noop);\r\n * // => false\r\n *\r\n * _.isObjectLike(null);\r\n * // => false\r\n */\r\nfunction isObjectLike(value) {\r\n  return value != null && typeof value == 'object';\r\n}\r\n\r\nmodule.exports = isObjectLike;\r\n", "var baseGetTag = require('./_baseGetTag'),\r\n    isObjectLike = require('./isObjectLike');\r\n\r\n/** `Object#toString` result references. */\r\nvar argsTag = '[object Arguments]';\r\n\r\n/**\r\n * The base implementation of `_.isArguments`.\r\n *\r\n * @private\r\n * @param {*} value The value to check.\r\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\r\n */\r\nfunction baseIsArguments(value) {\r\n  return isObjectLike(value) && baseGetTag(value) == argsTag;\r\n}\r\n\r\nmodule.exports = baseIsArguments;\r\n", "var baseIsArguments = require('./_baseIsArguments'),\r\n    isObjectLike = require('./isObjectLike');\r\n\r\n/** Used for built-in method references. */\r\nvar objectProto = Object.prototype;\r\n\r\n/** Used to check objects for own properties. */\r\nvar hasOwnProperty = objectProto.hasOwnProperty;\r\n\r\n/** Built-in value references. */\r\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\r\n\r\n/**\r\n * Checks if `value` is likely an `arguments` object.\r\n *\r\n * @static\r\n * @memberOf _\r\n * @since 0.1.0\r\n * @category Lang\r\n * @param {*} value The value to check.\r\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\r\n *  else `false`.\r\n * @example\r\n *\r\n * _.isArguments(function() { return arguments; }());\r\n * // => true\r\n *\r\n * _.isArguments([1, 2, 3]);\r\n * // => false\r\n */\r\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\r\n  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\r\n    !propertyIsEnumerable.call(value, 'callee');\r\n};\r\n\r\nmodule.exports = isArguments;\r\n", "/**\r\n * Checks if `value` is classified as an `Array` object.\r\n *\r\n * @static\r\n * @memberOf _\r\n * @since 0.1.0\r\n * @category Lang\r\n * @param {*} value The value to check.\r\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\r\n * @example\r\n *\r\n * _.isArray([1, 2, 3]);\r\n * // => true\r\n *\r\n * _.isArray(document.body.children);\r\n * // => false\r\n *\r\n * _.isArray('abc');\r\n * // => false\r\n *\r\n * _.isArray(_.noop);\r\n * // => false\r\n */\r\nvar isArray = Array.isArray;\r\n\r\nmodule.exports = isArray;\r\n", "/** Used as references for various `Number` constants. */\r\nvar MAX_SAFE_INTEGER = 9007199254740991;\r\n\r\n/**\r\n * Checks if `value` is a valid array-like length.\r\n *\r\n * **Note:** This method is loosely based on\r\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\r\n *\r\n * @static\r\n * @memberOf _\r\n * @since 4.0.0\r\n * @category Lang\r\n * @param {*} value The value to check.\r\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\r\n * @example\r\n *\r\n * _.isLength(3);\r\n * // => true\r\n *\r\n * _.isLength(Number.MIN_VALUE);\r\n * // => false\r\n *\r\n * _.isLength(Infinity);\r\n * // => false\r\n *\r\n * _.isLength('3');\r\n * // => false\r\n */\r\nfunction isLength(value) {\r\n  return typeof value == 'number' &&\r\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\r\n}\r\n\r\nmodule.exports = isLength;\r\n", "var isFunction = require('./isFunction'),\r\n    isLength = require('./isLength');\r\n\r\n/**\r\n * Checks if `value` is array-like. A value is considered array-like if it's\r\n * not a function and has a `value.length` that's an integer greater than or\r\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\r\n *\r\n * @static\r\n * @memberOf _\r\n * @since 4.0.0\r\n * @category Lang\r\n * @param {*} value The value to check.\r\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\r\n * @example\r\n *\r\n * _.isArrayLike([1, 2, 3]);\r\n * // => true\r\n *\r\n * _.isArrayLike(document.body.children);\r\n * // => true\r\n *\r\n * _.isArrayLike('abc');\r\n * // => true\r\n *\r\n * _.isArrayLike(_.noop);\r\n * // => false\r\n */\r\nfunction isArrayLike(value) {\r\n  return value != null && isLength(value.length) && !isFunction(value);\r\n}\r\n\r\nmodule.exports = isArrayLike;\r\n", "/**\r\n * This method returns `false`.\r\n *\r\n * @static\r\n * @memberOf _\r\n * @since 4.13.0\r\n * @category Util\r\n * @returns {boolean} Returns `false`.\r\n * @example\r\n *\r\n * _.times(2, _.stubFalse);\r\n * // => [false, false]\r\n */\r\nfunction stubFalse() {\r\n  return false;\r\n}\r\n\r\nmodule.exports = stubFalse;\r\n", "var root = require('./_root'),\r\n    stubFalse = require('./stubFalse');\r\n\r\n/** Detect free variable `exports`. */\r\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\r\n\r\n/** Detect free variable `module`. */\r\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\r\n\r\n/** Detect the popular CommonJS extension `module.exports`. */\r\nvar moduleExports = freeModule && freeModule.exports === freeExports;\r\n\r\n/** Built-in value references. */\r\nvar Buffer = moduleExports ? root.Buffer : undefined;\r\n\r\n/* Built-in method references for those with the same name as other `lodash` methods. */\r\nvar nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined;\r\n\r\n/**\r\n * Checks if `value` is a buffer.\r\n *\r\n * @static\r\n * @memberOf _\r\n * @since 4.3.0\r\n * @category Lang\r\n * @param {*} value The value to check.\r\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\r\n * @example\r\n *\r\n * _.isBuffer(new Buffer(2));\r\n * // => true\r\n *\r\n * _.isBuffer(new Uint8Array(2));\r\n * // => false\r\n */\r\nvar isBuffer = nativeIsBuffer || stubFalse;\r\n\r\nmodule.exports = isBuffer;\r\n", "var baseGetTag = require('./_baseGetTag'),\r\n    isLength = require('./isLength'),\r\n    isObjectLike = require('./isObjectLike');\r\n\r\n/** `Object#toString` result references. */\r\nvar argsTag = '[object Arguments]',\r\n    arrayTag = '[object Array]',\r\n    boolTag = '[object Boolean]',\r\n    dateTag = '[object Date]',\r\n    errorTag = '[object Error]',\r\n    funcTag = '[object Function]',\r\n    mapTag = '[object Map]',\r\n    numberTag = '[object Number]',\r\n    objectTag = '[object Object]',\r\n    regexpTag = '[object RegExp]',\r\n    setTag = '[object Set]',\r\n    stringTag = '[object String]',\r\n    weakMapTag = '[object WeakMap]';\r\n\r\nvar arrayBufferTag = '[object ArrayBuffer]',\r\n    dataViewTag = '[object DataView]',\r\n    float32Tag = '[object Float32Array]',\r\n    float64Tag = '[object Float64Array]',\r\n    int8Tag = '[object Int8Array]',\r\n    int16Tag = '[object Int16Array]',\r\n    int32Tag = '[object Int32Array]',\r\n    uint8Tag = '[object Uint8Array]',\r\n    uint8ClampedTag = '[object Uint8ClampedArray]',\r\n    uint16Tag = '[object Uint16Array]',\r\n    uint32Tag = '[object Uint32Array]';\r\n\r\n/** Used to identify `toStringTag` values of typed arrays. */\r\nvar typedArrayTags = {};\r\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\r\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\r\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\r\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\r\ntypedArrayTags[uint32Tag] = true;\r\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\r\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\r\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\r\ntypedArrayTags[errorTag] = typedArrayTags[funcTag] =\r\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\r\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\r\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\r\ntypedArrayTags[weakMapTag] = false;\r\n\r\n/**\r\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\r\n *\r\n * @private\r\n * @param {*} value The value to check.\r\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\r\n */\r\nfunction baseIsTypedArray(value) {\r\n  return isObjectLike(value) &&\r\n    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\r\n}\r\n\r\nmodule.exports = baseIsTypedArray;\r\n", "/**\r\n * The base implementation of `_.unary` without support for storing metadata.\r\n *\r\n * @private\r\n * @param {Function} func The function to cap arguments for.\r\n * @returns {Function} Returns the new capped function.\r\n */\r\nfunction baseUnary(func) {\r\n  return function(value) {\r\n    return func(value);\r\n  };\r\n}\r\n\r\nmodule.exports = baseUnary;\r\n", "var freeGlobal = require('./_freeGlobal');\r\n\r\n/** Detect free variable `exports`. */\r\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\r\n\r\n/** Detect free variable `module`. */\r\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\r\n\r\n/** Detect the popular CommonJS extension `module.exports`. */\r\nvar moduleExports = freeModule && freeModule.exports === freeExports;\r\n\r\n/** Detect free variable `process` from Node.js. */\r\nvar freeProcess = moduleExports && freeGlobal.process;\r\n\r\n/** Used to access faster Node.js helpers. */\r\nvar nodeUtil = (function() {\r\n  try {\r\n    // Use `util.types` for Node.js 10+.\r\n    var types = freeModule && freeModule.require && freeModule.require('util').types;\r\n\r\n    if (types) {\r\n      return types;\r\n    }\r\n\r\n    // Legacy `process.binding('util')` for Node.js < 10.\r\n    return freeProcess && freeProcess.binding && freeProcess.binding('util');\r\n  } catch (e) {}\r\n}());\r\n\r\nmodule.exports = nodeUtil;\r\n", "var baseIsTypedArray = require('./_baseIsTypedArray'),\r\n    baseUnary = require('./_baseUnary'),\r\n    nodeUtil = require('./_nodeUtil');\r\n\r\n/* Node.js helper references. */\r\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\r\n\r\n/**\r\n * Checks if `value` is classified as a typed array.\r\n *\r\n * @static\r\n * @memberOf _\r\n * @since 3.0.0\r\n * @category Lang\r\n * @param {*} value The value to check.\r\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\r\n * @example\r\n *\r\n * _.isTypedArray(new Uint8Array);\r\n * // => true\r\n *\r\n * _.isTypedArray([]);\r\n * // => false\r\n */\r\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\r\n\r\nmodule.exports = isTypedArray;\r\n", "var baseKeys = require('./_baseKeys'),\r\n    getTag = require('./_getTag'),\r\n    isArguments = require('./isArguments'),\r\n    isArray = require('./isArray'),\r\n    isArrayLike = require('./isArrayLike'),\r\n    isBuffer = require('./isBuffer'),\r\n    isPrototype = require('./_isPrototype'),\r\n    isTypedArray = require('./isTypedArray');\r\n\r\n/** `Object#toString` result references. */\r\nvar mapTag = '[object Map]',\r\n    setTag = '[object Set]';\r\n\r\n/** Used for built-in method references. */\r\nvar objectProto = Object.prototype;\r\n\r\n/** Used to check objects for own properties. */\r\nvar hasOwnProperty = objectProto.hasOwnProperty;\r\n\r\n/**\r\n * Checks if `value` is an empty object, collection, map, or set.\r\n *\r\n * Objects are considered empty if they have no own enumerable string keyed\r\n * properties.\r\n *\r\n * Array-like values such as `arguments` objects, arrays, buffers, strings, or\r\n * jQuery-like collections are considered empty if they have a `length` of `0`.\r\n * Similarly, maps and sets are considered empty if they have a `size` of `0`.\r\n *\r\n * @static\r\n * @memberOf _\r\n * @since 0.1.0\r\n * @category Lang\r\n * @param {*} value The value to check.\r\n * @returns {boolean} Returns `true` if `value` is empty, else `false`.\r\n * @example\r\n *\r\n * _.isEmpty(null);\r\n * // => true\r\n *\r\n * _.isEmpty(true);\r\n * // => true\r\n *\r\n * _.isEmpty(1);\r\n * // => true\r\n *\r\n * _.isEmpty([1, 2, 3]);\r\n * // => false\r\n *\r\n * _.isEmpty({ 'a': 1 });\r\n * // => false\r\n */\r\nfunction isEmpty(value) {\r\n  if (value == null) {\r\n    return true;\r\n  }\r\n  if (isArrayLike(value) &&\r\n      (isArray(value) || typeof value == 'string' || typeof value.splice == 'function' ||\r\n        isBuffer(value) || isTypedArray(value) || isArguments(value))) {\r\n    return !value.length;\r\n  }\r\n  var tag = getTag(value);\r\n  if (tag == mapTag || tag == setTag) {\r\n    return !value.size;\r\n  }\r\n  if (isPrototype(value)) {\r\n    return !baseKeys(value).length;\r\n  }\r\n  for (var key in value) {\r\n    if (hasOwnProperty.call(value, key)) {\r\n      return false;\r\n    }\r\n  }\r\n  return true;\r\n}\r\n\r\nmodule.exports = isEmpty;\r\n", "/**\r\n * A specialized version of `_.map` for arrays without support for iteratee\r\n * shorthands.\r\n *\r\n * @private\r\n * @param {Array} [array] The array to iterate over.\r\n * @param {Function} iteratee The function invoked per iteration.\r\n * @returns {Array} Returns the new mapped array.\r\n */\r\nfunction arrayMap(array, iteratee) {\r\n  var index = -1,\r\n      length = array == null ? 0 : array.length,\r\n      result = Array(length);\r\n\r\n  while (++index < length) {\r\n    result[index] = iteratee(array[index], index, array);\r\n  }\r\n  return result;\r\n}\r\n\r\nmodule.exports = arrayMap;\r\n", "/**\r\n * Removes all key-value entries from the list cache.\r\n *\r\n * @private\r\n * @name clear\r\n * @memberOf ListCache\r\n */\r\nfunction listCacheClear() {\r\n  this.__data__ = [];\r\n  this.size = 0;\r\n}\r\n\r\nmodule.exports = listCacheClear;\r\n", "/**\r\n * Performs a\r\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\r\n * comparison between two values to determine if they are equivalent.\r\n *\r\n * @static\r\n * @memberOf _\r\n * @since 4.0.0\r\n * @category Lang\r\n * @param {*} value The value to compare.\r\n * @param {*} other The other value to compare.\r\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\r\n * @example\r\n *\r\n * var object = { 'a': 1 };\r\n * var other = { 'a': 1 };\r\n *\r\n * _.eq(object, object);\r\n * // => true\r\n *\r\n * _.eq(object, other);\r\n * // => false\r\n *\r\n * _.eq('a', 'a');\r\n * // => true\r\n *\r\n * _.eq('a', Object('a'));\r\n * // => false\r\n *\r\n * _.eq(NaN, NaN);\r\n * // => true\r\n */\r\nfunction eq(value, other) {\r\n  return value === other || (value !== value && other !== other);\r\n}\r\n\r\nmodule.exports = eq;\r\n", "var eq = require('./eq');\r\n\r\n/**\r\n * Gets the index at which the `key` is found in `array` of key-value pairs.\r\n *\r\n * @private\r\n * @param {Array} array The array to inspect.\r\n * @param {*} key The key to search for.\r\n * @returns {number} Returns the index of the matched value, else `-1`.\r\n */\r\nfunction assocIndexOf(array, key) {\r\n  var length = array.length;\r\n  while (length--) {\r\n    if (eq(array[length][0], key)) {\r\n      return length;\r\n    }\r\n  }\r\n  return -1;\r\n}\r\n\r\nmodule.exports = assocIndexOf;\r\n", "var assocIndexOf = require('./_assocIndexOf');\r\n\r\n/** Used for built-in method references. */\r\nvar arrayProto = Array.prototype;\r\n\r\n/** Built-in value references. */\r\nvar splice = arrayProto.splice;\r\n\r\n/**\r\n * Removes `key` and its value from the list cache.\r\n *\r\n * @private\r\n * @name delete\r\n * @memberOf ListCache\r\n * @param {string} key The key of the value to remove.\r\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\r\n */\r\nfunction listCacheDelete(key) {\r\n  var data = this.__data__,\r\n      index = assocIndexOf(data, key);\r\n\r\n  if (index < 0) {\r\n    return false;\r\n  }\r\n  var lastIndex = data.length - 1;\r\n  if (index == lastIndex) {\r\n    data.pop();\r\n  } else {\r\n    splice.call(data, index, 1);\r\n  }\r\n  --this.size;\r\n  return true;\r\n}\r\n\r\nmodule.exports = listCacheDelete;\r\n", "var assocIndexOf = require('./_assocIndexOf');\r\n\r\n/**\r\n * Gets the list cache value for `key`.\r\n *\r\n * @private\r\n * @name get\r\n * @memberOf ListCache\r\n * @param {string} key The key of the value to get.\r\n * @returns {*} Returns the entry value.\r\n */\r\nfunction listCacheGet(key) {\r\n  var data = this.__data__,\r\n      index = assocIndexOf(data, key);\r\n\r\n  return index < 0 ? undefined : data[index][1];\r\n}\r\n\r\nmodule.exports = listCacheGet;\r\n", "var assocIndexOf = require('./_assocIndexOf');\r\n\r\n/**\r\n * Checks if a list cache value for `key` exists.\r\n *\r\n * @private\r\n * @name has\r\n * @memberOf ListCache\r\n * @param {string} key The key of the entry to check.\r\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\r\n */\r\nfunction listCacheHas(key) {\r\n  return assocIndexOf(this.__data__, key) > -1;\r\n}\r\n\r\nmodule.exports = listCacheHas;\r\n", "var assocIndexOf = require('./_assocIndexOf');\r\n\r\n/**\r\n * Sets the list cache `key` to `value`.\r\n *\r\n * @private\r\n * @name set\r\n * @memberOf ListCache\r\n * @param {string} key The key of the value to set.\r\n * @param {*} value The value to set.\r\n * @returns {Object} Returns the list cache instance.\r\n */\r\nfunction listCacheSet(key, value) {\r\n  var data = this.__data__,\r\n      index = assocIndexOf(data, key);\r\n\r\n  if (index < 0) {\r\n    ++this.size;\r\n    data.push([key, value]);\r\n  } else {\r\n    data[index][1] = value;\r\n  }\r\n  return this;\r\n}\r\n\r\nmodule.exports = listCacheSet;\r\n", "var listCacheClear = require('./_listCacheClear'),\r\n    listCacheDelete = require('./_listCacheDelete'),\r\n    listCacheGet = require('./_listCacheGet'),\r\n    listCacheHas = require('./_listCacheHas'),\r\n    listCacheSet = require('./_listCacheSet');\r\n\r\n/**\r\n * Creates an list cache object.\r\n *\r\n * @private\r\n * @constructor\r\n * @param {Array} [entries] The key-value pairs to cache.\r\n */\r\nfunction ListCache(entries) {\r\n  var index = -1,\r\n      length = entries == null ? 0 : entries.length;\r\n\r\n  this.clear();\r\n  while (++index < length) {\r\n    var entry = entries[index];\r\n    this.set(entry[0], entry[1]);\r\n  }\r\n}\r\n\r\n// Add methods to `ListCache`.\r\nListCache.prototype.clear = listCacheClear;\r\nListCache.prototype['delete'] = listCacheDelete;\r\nListCache.prototype.get = listCacheGet;\r\nListCache.prototype.has = listCacheHas;\r\nListCache.prototype.set = listCacheSet;\r\n\r\nmodule.exports = ListCache;\r\n", "var ListCache = require('./_ListCache');\r\n\r\n/**\r\n * Removes all key-value entries from the stack.\r\n *\r\n * @private\r\n * @name clear\r\n * @memberOf Stack\r\n */\r\nfunction stackClear() {\r\n  this.__data__ = new ListCache;\r\n  this.size = 0;\r\n}\r\n\r\nmodule.exports = stackClear;\r\n", "/**\r\n * Removes `key` and its value from the stack.\r\n *\r\n * @private\r\n * @name delete\r\n * @memberOf Stack\r\n * @param {string} key The key of the value to remove.\r\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\r\n */\r\nfunction stackDelete(key) {\r\n  var data = this.__data__,\r\n      result = data['delete'](key);\r\n\r\n  this.size = data.size;\r\n  return result;\r\n}\r\n\r\nmodule.exports = stackDelete;\r\n", "/**\r\n * Gets the stack value for `key`.\r\n *\r\n * @private\r\n * @name get\r\n * @memberOf Stack\r\n * @param {string} key The key of the value to get.\r\n * @returns {*} Returns the entry value.\r\n */\r\nfunction stackGet(key) {\r\n  return this.__data__.get(key);\r\n}\r\n\r\nmodule.exports = stackGet;\r\n", "/**\r\n * Checks if a stack value for `key` exists.\r\n *\r\n * @private\r\n * @name has\r\n * @memberOf Stack\r\n * @param {string} key The key of the entry to check.\r\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\r\n */\r\nfunction stackHas(key) {\r\n  return this.__data__.has(key);\r\n}\r\n\r\nmodule.exports = stackHas;\r\n", "var getNative = require('./_getNative');\r\n\r\n/* Built-in method references that are verified to be native. */\r\nvar nativeCreate = getNative(Object, 'create');\r\n\r\nmodule.exports = nativeCreate;\r\n", "var nativeCreate = require('./_nativeCreate');\r\n\r\n/**\r\n * Removes all key-value entries from the hash.\r\n *\r\n * @private\r\n * @name clear\r\n * @memberOf Hash\r\n */\r\nfunction hashClear() {\r\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\r\n  this.size = 0;\r\n}\r\n\r\nmodule.exports = hashClear;\r\n", "/**\r\n * Removes `key` and its value from the hash.\r\n *\r\n * @private\r\n * @name delete\r\n * @memberOf Hash\r\n * @param {Object} hash The hash to modify.\r\n * @param {string} key The key of the value to remove.\r\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\r\n */\r\nfunction hashDelete(key) {\r\n  var result = this.has(key) && delete this.__data__[key];\r\n  this.size -= result ? 1 : 0;\r\n  return result;\r\n}\r\n\r\nmodule.exports = hashDelete;\r\n", "var nativeCreate = require('./_nativeCreate');\r\n\r\n/** Used to stand-in for `undefined` hash values. */\r\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\r\n\r\n/** Used for built-in method references. */\r\nvar objectProto = Object.prototype;\r\n\r\n/** Used to check objects for own properties. */\r\nvar hasOwnProperty = objectProto.hasOwnProperty;\r\n\r\n/**\r\n * Gets the hash value for `key`.\r\n *\r\n * @private\r\n * @name get\r\n * @memberOf Hash\r\n * @param {string} key The key of the value to get.\r\n * @returns {*} Returns the entry value.\r\n */\r\nfunction hashGet(key) {\r\n  var data = this.__data__;\r\n  if (nativeCreate) {\r\n    var result = data[key];\r\n    return result === HASH_UNDEFINED ? undefined : result;\r\n  }\r\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\r\n}\r\n\r\nmodule.exports = hashGet;\r\n", "var nativeCreate = require('./_nativeCreate');\r\n\r\n/** Used for built-in method references. */\r\nvar objectProto = Object.prototype;\r\n\r\n/** Used to check objects for own properties. */\r\nvar hasOwnProperty = objectProto.hasOwnProperty;\r\n\r\n/**\r\n * Checks if a hash value for `key` exists.\r\n *\r\n * @private\r\n * @name has\r\n * @memberOf Hash\r\n * @param {string} key The key of the entry to check.\r\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\r\n */\r\nfunction hashHas(key) {\r\n  var data = this.__data__;\r\n  return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);\r\n}\r\n\r\nmodule.exports = hashHas;\r\n", "var nativeCreate = require('./_nativeCreate');\r\n\r\n/** Used to stand-in for `undefined` hash values. */\r\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\r\n\r\n/**\r\n * Sets the hash `key` to `value`.\r\n *\r\n * @private\r\n * @name set\r\n * @memberOf Hash\r\n * @param {string} key The key of the value to set.\r\n * @param {*} value The value to set.\r\n * @returns {Object} Returns the hash instance.\r\n */\r\nfunction hashSet(key, value) {\r\n  var data = this.__data__;\r\n  this.size += this.has(key) ? 0 : 1;\r\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\r\n  return this;\r\n}\r\n\r\nmodule.exports = hashSet;\r\n", "var hashClear = require('./_hashClear'),\r\n    hashDelete = require('./_hashDelete'),\r\n    hashGet = require('./_hashGet'),\r\n    hashHas = require('./_hashHas'),\r\n    hashSet = require('./_hashSet');\r\n\r\n/**\r\n * Creates a hash object.\r\n *\r\n * @private\r\n * @constructor\r\n * @param {Array} [entries] The key-value pairs to cache.\r\n */\r\nfunction Hash(entries) {\r\n  var index = -1,\r\n      length = entries == null ? 0 : entries.length;\r\n\r\n  this.clear();\r\n  while (++index < length) {\r\n    var entry = entries[index];\r\n    this.set(entry[0], entry[1]);\r\n  }\r\n}\r\n\r\n// Add methods to `Hash`.\r\nHash.prototype.clear = hashClear;\r\nHash.prototype['delete'] = hashDelete;\r\nHash.prototype.get = hashGet;\r\nHash.prototype.has = hashHas;\r\nHash.prototype.set = hashSet;\r\n\r\nmodule.exports = Hash;\r\n", "var Hash = require('./_Hash'),\r\n    ListCache = require('./_ListCache'),\r\n    Map = require('./_Map');\r\n\r\n/**\r\n * Removes all key-value entries from the map.\r\n *\r\n * @private\r\n * @name clear\r\n * @memberOf MapCache\r\n */\r\nfunction mapCacheClear() {\r\n  this.size = 0;\r\n  this.__data__ = {\r\n    'hash': new Hash,\r\n    'map': new (Map || ListCache),\r\n    'string': new Hash\r\n  };\r\n}\r\n\r\nmodule.exports = mapCacheClear;\r\n", "/**\r\n * Checks if `value` is suitable for use as unique object key.\r\n *\r\n * @private\r\n * @param {*} value The value to check.\r\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\r\n */\r\nfunction isKeyable(value) {\r\n  var type = typeof value;\r\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\r\n    ? (value !== '__proto__')\r\n    : (value === null);\r\n}\r\n\r\nmodule.exports = isKeyable;\r\n", "var isKeyable = require('./_isKeyable');\r\n\r\n/**\r\n * Gets the data for `map`.\r\n *\r\n * @private\r\n * @param {Object} map The map to query.\r\n * @param {string} key The reference key.\r\n * @returns {*} Returns the map data.\r\n */\r\nfunction getMapData(map, key) {\r\n  var data = map.__data__;\r\n  return isKeyable(key)\r\n    ? data[typeof key == 'string' ? 'string' : 'hash']\r\n    : data.map;\r\n}\r\n\r\nmodule.exports = getMapData;\r\n", "var getMapData = require('./_getMapData');\r\n\r\n/**\r\n * Removes `key` and its value from the map.\r\n *\r\n * @private\r\n * @name delete\r\n * @memberOf MapCache\r\n * @param {string} key The key of the value to remove.\r\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\r\n */\r\nfunction mapCacheDelete(key) {\r\n  var result = getMapData(this, key)['delete'](key);\r\n  this.size -= result ? 1 : 0;\r\n  return result;\r\n}\r\n\r\nmodule.exports = mapCacheDelete;\r\n", "var getMapData = require('./_getMapData');\r\n\r\n/**\r\n * Gets the map value for `key`.\r\n *\r\n * @private\r\n * @name get\r\n * @memberOf MapCache\r\n * @param {string} key The key of the value to get.\r\n * @returns {*} Returns the entry value.\r\n */\r\nfunction mapCacheGet(key) {\r\n  return getMapData(this, key).get(key);\r\n}\r\n\r\nmodule.exports = mapCacheGet;\r\n", "var getMapData = require('./_getMapData');\r\n\r\n/**\r\n * Checks if a map value for `key` exists.\r\n *\r\n * @private\r\n * @name has\r\n * @memberOf MapCache\r\n * @param {string} key The key of the entry to check.\r\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\r\n */\r\nfunction mapCacheHas(key) {\r\n  return getMapData(this, key).has(key);\r\n}\r\n\r\nmodule.exports = mapCacheHas;\r\n", "var getMapData = require('./_getMapData');\r\n\r\n/**\r\n * Sets the map `key` to `value`.\r\n *\r\n * @private\r\n * @name set\r\n * @memberOf MapCache\r\n * @param {string} key The key of the value to set.\r\n * @param {*} value The value to set.\r\n * @returns {Object} Returns the map cache instance.\r\n */\r\nfunction mapCacheSet(key, value) {\r\n  var data = getMapData(this, key),\r\n      size = data.size;\r\n\r\n  data.set(key, value);\r\n  this.size += data.size == size ? 0 : 1;\r\n  return this;\r\n}\r\n\r\nmodule.exports = mapCacheSet;\r\n", "var mapCacheClear = require('./_mapCacheClear'),\r\n    mapCacheDelete = require('./_mapCacheDelete'),\r\n    mapCacheGet = require('./_mapCacheGet'),\r\n    mapCacheHas = require('./_mapCacheHas'),\r\n    mapCacheSet = require('./_mapCacheSet');\r\n\r\n/**\r\n * Creates a map cache object to store key-value pairs.\r\n *\r\n * @private\r\n * @constructor\r\n * @param {Array} [entries] The key-value pairs to cache.\r\n */\r\nfunction MapCache(entries) {\r\n  var index = -1,\r\n      length = entries == null ? 0 : entries.length;\r\n\r\n  this.clear();\r\n  while (++index < length) {\r\n    var entry = entries[index];\r\n    this.set(entry[0], entry[1]);\r\n  }\r\n}\r\n\r\n// Add methods to `MapCache`.\r\nMapCache.prototype.clear = mapCacheClear;\r\nMapCache.prototype['delete'] = mapCacheDelete;\r\nMapCache.prototype.get = mapCacheGet;\r\nMapCache.prototype.has = mapCacheHas;\r\nMapCache.prototype.set = mapCacheSet;\r\n\r\nmodule.exports = MapCache;\r\n", "var ListCache = require('./_ListCache'),\r\n    Map = require('./_Map'),\r\n    MapCache = require('./_MapCache');\r\n\r\n/** Used as the size to enable large array optimizations. */\r\nvar LARGE_ARRAY_SIZE = 200;\r\n\r\n/**\r\n * Sets the stack `key` to `value`.\r\n *\r\n * @private\r\n * @name set\r\n * @memberOf Stack\r\n * @param {string} key The key of the value to set.\r\n * @param {*} value The value to set.\r\n * @returns {Object} Returns the stack cache instance.\r\n */\r\nfunction stackSet(key, value) {\r\n  var data = this.__data__;\r\n  if (data instanceof ListCache) {\r\n    var pairs = data.__data__;\r\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\r\n      pairs.push([key, value]);\r\n      this.size = ++data.size;\r\n      return this;\r\n    }\r\n    data = this.__data__ = new MapCache(pairs);\r\n  }\r\n  data.set(key, value);\r\n  this.size = data.size;\r\n  return this;\r\n}\r\n\r\nmodule.exports = stackSet;\r\n", "var ListCache = require('./_ListCache'),\r\n    stackClear = require('./_stackClear'),\r\n    stackDelete = require('./_stackDelete'),\r\n    stackGet = require('./_stackGet'),\r\n    stackHas = require('./_stackHas'),\r\n    stackSet = require('./_stackSet');\r\n\r\n/**\r\n * Creates a stack cache object to store key-value pairs.\r\n *\r\n * @private\r\n * @constructor\r\n * @param {Array} [entries] The key-value pairs to cache.\r\n */\r\nfunction Stack(entries) {\r\n  var data = this.__data__ = new ListCache(entries);\r\n  this.size = data.size;\r\n}\r\n\r\n// Add methods to `Stack`.\r\nStack.prototype.clear = stackClear;\r\nStack.prototype['delete'] = stackDelete;\r\nStack.prototype.get = stackGet;\r\nStack.prototype.has = stackHas;\r\nStack.prototype.set = stackSet;\r\n\r\nmodule.exports = Stack;\r\n", "/** Used to stand-in for `undefined` hash values. */\r\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\r\n\r\n/**\r\n * Adds `value` to the array cache.\r\n *\r\n * @private\r\n * @name add\r\n * @memberOf SetCache\r\n * @alias push\r\n * @param {*} value The value to cache.\r\n * @returns {Object} Returns the cache instance.\r\n */\r\nfunction setCacheAdd(value) {\r\n  this.__data__.set(value, HASH_UNDEFINED);\r\n  return this;\r\n}\r\n\r\nmodule.exports = setCacheAdd;\r\n", "/**\r\n * Checks if `value` is in the array cache.\r\n *\r\n * @private\r\n * @name has\r\n * @memberOf SetCache\r\n * @param {*} value The value to search for.\r\n * @returns {number} Returns `true` if `value` is found, else `false`.\r\n */\r\nfunction setCacheHas(value) {\r\n  return this.__data__.has(value);\r\n}\r\n\r\nmodule.exports = setCacheHas;\r\n", "var MapCache = require('./_MapCache'),\r\n    setCacheAdd = require('./_setCacheAdd'),\r\n    setCacheHas = require('./_setCacheHas');\r\n\r\n/**\r\n *\r\n * Creates an array cache object to store unique values.\r\n *\r\n * @private\r\n * @constructor\r\n * @param {Array} [values] The values to cache.\r\n */\r\nfunction SetCache(values) {\r\n  var index = -1,\r\n      length = values == null ? 0 : values.length;\r\n\r\n  this.__data__ = new MapCache;\r\n  while (++index < length) {\r\n    this.add(values[index]);\r\n  }\r\n}\r\n\r\n// Add methods to `SetCache`.\r\nSetCache.prototype.add = SetCache.prototype.push = setCacheAdd;\r\nSetCache.prototype.has = setCacheHas;\r\n\r\nmodule.exports = SetCache;\r\n", "/**\r\n * A specialized version of `_.some` for arrays without support for iteratee\r\n * shorthands.\r\n *\r\n * @private\r\n * @param {Array} [array] The array to iterate over.\r\n * @param {Function} predicate The function invoked per iteration.\r\n * @returns {boolean} Returns `true` if any element passes the predicate check,\r\n *  else `false`.\r\n */\r\nfunction arraySome(array, predicate) {\r\n  var index = -1,\r\n      length = array == null ? 0 : array.length;\r\n\r\n  while (++index < length) {\r\n    if (predicate(array[index], index, array)) {\r\n      return true;\r\n    }\r\n  }\r\n  return false;\r\n}\r\n\r\nmodule.exports = arraySome;\r\n", "/**\r\n * Checks if a `cache` value for `key` exists.\r\n *\r\n * @private\r\n * @param {Object} cache The cache to query.\r\n * @param {string} key The key of the entry to check.\r\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\r\n */\r\nfunction cacheHas(cache, key) {\r\n  return cache.has(key);\r\n}\r\n\r\nmodule.exports = cacheHas;\r\n", "var SetCache = require('./_SetCache'),\r\n    arraySome = require('./_arraySome'),\r\n    cacheHas = require('./_cacheHas');\r\n\r\n/** Used to compose bitmasks for value comparisons. */\r\nvar COMPARE_PARTIAL_FLAG = 1,\r\n    COMPARE_UNORDERED_FLAG = 2;\r\n\r\n/**\r\n * A specialized version of `baseIsEqualDeep` for arrays with support for\r\n * partial deep comparisons.\r\n *\r\n * @private\r\n * @param {Array} array The array to compare.\r\n * @param {Array} other The other array to compare.\r\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\r\n * @param {Function} customizer The function to customize comparisons.\r\n * @param {Function} equalFunc The function to determine equivalents of values.\r\n * @param {Object} stack Tracks traversed `array` and `other` objects.\r\n * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.\r\n */\r\nfunction equalArrays(array, other, bitmask, customizer, equalFunc, stack) {\r\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\r\n      arrLength = array.length,\r\n      othLength = other.length;\r\n\r\n  if (arrLength != othLength && !(isPartial && othLength > arrLength)) {\r\n    return false;\r\n  }\r\n  // Check that cyclic values are equal.\r\n  var arrStacked = stack.get(array);\r\n  var othStacked = stack.get(other);\r\n  if (arrStacked && othStacked) {\r\n    return arrStacked == other && othStacked == array;\r\n  }\r\n  var index = -1,\r\n      result = true,\r\n      seen = (bitmask & COMPARE_UNORDERED_FLAG) ? new SetCache : undefined;\r\n\r\n  stack.set(array, other);\r\n  stack.set(other, array);\r\n\r\n  // Ignore non-index properties.\r\n  while (++index < arrLength) {\r\n    var arrValue = array[index],\r\n        othValue = other[index];\r\n\r\n    if (customizer) {\r\n      var compared = isPartial\r\n        ? customizer(othValue, arrValue, index, other, array, stack)\r\n        : customizer(arrValue, othValue, index, array, other, stack);\r\n    }\r\n    if (compared !== undefined) {\r\n      if (compared) {\r\n        continue;\r\n      }\r\n      result = false;\r\n      break;\r\n    }\r\n    // Recursively compare arrays (susceptible to call stack limits).\r\n    if (seen) {\r\n      if (!arraySome(other, function(othValue, othIndex) {\r\n            if (!cacheHas(seen, othIndex) &&\r\n                (arrValue === othValue || equalFunc(arrValue, othValue, bitmask, customizer, stack))) {\r\n              return seen.push(othIndex);\r\n            }\r\n          })) {\r\n        result = false;\r\n        break;\r\n      }\r\n    } else if (!(\r\n          arrValue === othValue ||\r\n            equalFunc(arrValue, othValue, bitmask, customizer, stack)\r\n        )) {\r\n      result = false;\r\n      break;\r\n    }\r\n  }\r\n  stack['delete'](array);\r\n  stack['delete'](other);\r\n  return result;\r\n}\r\n\r\nmodule.exports = equalArrays;\r\n", "var root = require('./_root');\r\n\r\n/** Built-in value references. */\r\nvar Uint8Array = root.Uint8Array;\r\n\r\nmodule.exports = Uint8Array;\r\n", "/**\r\n * Converts `map` to its key-value pairs.\r\n *\r\n * @private\r\n * @param {Object} map The map to convert.\r\n * @returns {Array} Returns the key-value pairs.\r\n */\r\nfunction mapToArray(map) {\r\n  var index = -1,\r\n      result = Array(map.size);\r\n\r\n  map.forEach(function(value, key) {\r\n    result[++index] = [key, value];\r\n  });\r\n  return result;\r\n}\r\n\r\nmodule.exports = mapToArray;\r\n", "/**\r\n * Converts `set` to an array of its values.\r\n *\r\n * @private\r\n * @param {Object} set The set to convert.\r\n * @returns {Array} Returns the values.\r\n */\r\nfunction setToArray(set) {\r\n  var index = -1,\r\n      result = Array(set.size);\r\n\r\n  set.forEach(function(value) {\r\n    result[++index] = value;\r\n  });\r\n  return result;\r\n}\r\n\r\nmodule.exports = setToArray;\r\n", "var Symbol = require('./_Symbol'),\r\n    Uint8Array = require('./_Uint8Array'),\r\n    eq = require('./eq'),\r\n    equalArrays = require('./_equalArrays'),\r\n    mapToArray = require('./_mapToArray'),\r\n    setToArray = require('./_setToArray');\r\n\r\n/** Used to compose bitmasks for value comparisons. */\r\nvar COMPARE_PARTIAL_FLAG = 1,\r\n    COMPARE_UNORDERED_FLAG = 2;\r\n\r\n/** `Object#toString` result references. */\r\nvar boolTag = '[object Boolean]',\r\n    dateTag = '[object Date]',\r\n    errorTag = '[object Error]',\r\n    mapTag = '[object Map]',\r\n    numberTag = '[object Number]',\r\n    regexpTag = '[object RegExp]',\r\n    setTag = '[object Set]',\r\n    stringTag = '[object String]',\r\n    symbolTag = '[object Symbol]';\r\n\r\nvar arrayBufferTag = '[object ArrayBuffer]',\r\n    dataViewTag = '[object DataView]';\r\n\r\n/** Used to convert symbols to primitives and strings. */\r\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\r\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\r\n\r\n/**\r\n * A specialized version of `baseIsEqualDeep` for comparing objects of\r\n * the same `toStringTag`.\r\n *\r\n * **Note:** This function only supports comparing values with tags of\r\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\r\n *\r\n * @private\r\n * @param {Object} object The object to compare.\r\n * @param {Object} other The other object to compare.\r\n * @param {string} tag The `toStringTag` of the objects to compare.\r\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\r\n * @param {Function} customizer The function to customize comparisons.\r\n * @param {Function} equalFunc The function to determine equivalents of values.\r\n * @param {Object} stack Tracks traversed `object` and `other` objects.\r\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\r\n */\r\nfunction equalByTag(object, other, tag, bitmask, customizer, equalFunc, stack) {\r\n  switch (tag) {\r\n    case dataViewTag:\r\n      if ((object.byteLength != other.byteLength) ||\r\n          (object.byteOffset != other.byteOffset)) {\r\n        return false;\r\n      }\r\n      object = object.buffer;\r\n      other = other.buffer;\r\n\r\n    case arrayBufferTag:\r\n      if ((object.byteLength != other.byteLength) ||\r\n          !equalFunc(new Uint8Array(object), new Uint8Array(other))) {\r\n        return false;\r\n      }\r\n      return true;\r\n\r\n    case boolTag:\r\n    case dateTag:\r\n    case numberTag:\r\n      // Coerce booleans to `1` or `0` and dates to milliseconds.\r\n      // Invalid dates are coerced to `NaN`.\r\n      return eq(+object, +other);\r\n\r\n    case errorTag:\r\n      return object.name == other.name && object.message == other.message;\r\n\r\n    case regexpTag:\r\n    case stringTag:\r\n      // Coerce regexes to strings and treat strings, primitives and objects,\r\n      // as equal. See http://www.ecma-international.org/ecma-262/7.0/#sec-regexp.prototype.tostring\r\n      // for more details.\r\n      return object == (other + '');\r\n\r\n    case mapTag:\r\n      var convert = mapToArray;\r\n\r\n    case setTag:\r\n      var isPartial = bitmask & COMPARE_PARTIAL_FLAG;\r\n      convert || (convert = setToArray);\r\n\r\n      if (object.size != other.size && !isPartial) {\r\n        return false;\r\n      }\r\n      // Assume cyclic values are equal.\r\n      var stacked = stack.get(object);\r\n      if (stacked) {\r\n        return stacked == other;\r\n      }\r\n      bitmask |= COMPARE_UNORDERED_FLAG;\r\n\r\n      // Recursively compare objects (susceptible to call stack limits).\r\n      stack.set(object, other);\r\n      var result = equalArrays(convert(object), convert(other), bitmask, customizer, equalFunc, stack);\r\n      stack['delete'](object);\r\n      return result;\r\n\r\n    case symbolTag:\r\n      if (symbolValueOf) {\r\n        return symbolValueOf.call(object) == symbolValueOf.call(other);\r\n      }\r\n  }\r\n  return false;\r\n}\r\n\r\nmodule.exports = equalByTag;\r\n", "/**\r\n * Appends the elements of `values` to `array`.\r\n *\r\n * @private\r\n * @param {Array} array The array to modify.\r\n * @param {Array} values The values to append.\r\n * @returns {Array} Returns `array`.\r\n */\r\nfunction arrayPush(array, values) {\r\n  var index = -1,\r\n      length = values.length,\r\n      offset = array.length;\r\n\r\n  while (++index < length) {\r\n    array[offset + index] = values[index];\r\n  }\r\n  return array;\r\n}\r\n\r\nmodule.exports = arrayPush;\r\n", "var arrayPush = require('./_arrayPush'),\r\n    isArray = require('./isArray');\r\n\r\n/**\r\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\r\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\r\n * symbols of `object`.\r\n *\r\n * @private\r\n * @param {Object} object The object to query.\r\n * @param {Function} keysFunc The function to get the keys of `object`.\r\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\r\n * @returns {Array} Returns the array of property names and symbols.\r\n */\r\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\r\n  var result = keysFunc(object);\r\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\r\n}\r\n\r\nmodule.exports = baseGetAllKeys;\r\n", "/**\r\n * A specialized version of `_.filter` for arrays without support for\r\n * iteratee shorthands.\r\n *\r\n * @private\r\n * @param {Array} [array] The array to iterate over.\r\n * @param {Function} predicate The function invoked per iteration.\r\n * @returns {Array} Returns the new filtered array.\r\n */\r\nfunction arrayFilter(array, predicate) {\r\n  var index = -1,\r\n      length = array == null ? 0 : array.length,\r\n      resIndex = 0,\r\n      result = [];\r\n\r\n  while (++index < length) {\r\n    var value = array[index];\r\n    if (predicate(value, index, array)) {\r\n      result[resIndex++] = value;\r\n    }\r\n  }\r\n  return result;\r\n}\r\n\r\nmodule.exports = arrayFilter;\r\n", "/**\r\n * This method returns a new empty array.\r\n *\r\n * @static\r\n * @memberOf _\r\n * @since 4.13.0\r\n * @category Util\r\n * @returns {Array} Returns the new empty array.\r\n * @example\r\n *\r\n * var arrays = _.times(2, _.stubArray);\r\n *\r\n * console.log(arrays);\r\n * // => [[], []]\r\n *\r\n * console.log(arrays[0] === arrays[1]);\r\n * // => false\r\n */\r\nfunction stubArray() {\r\n  return [];\r\n}\r\n\r\nmodule.exports = stubArray;\r\n", "var arrayFilter = require('./_arrayFilter'),\r\n    stubArray = require('./stubArray');\r\n\r\n/** Used for built-in method references. */\r\nvar objectProto = Object.prototype;\r\n\r\n/** Built-in value references. */\r\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\r\n\r\n/* Built-in method references for those with the same name as other `lodash` methods. */\r\nvar nativeGetSymbols = Object.getOwnPropertySymbols;\r\n\r\n/**\r\n * Creates an array of the own enumerable symbols of `object`.\r\n *\r\n * @private\r\n * @param {Object} object The object to query.\r\n * @returns {Array} Returns the array of symbols.\r\n */\r\nvar getSymbols = !nativeGetSymbols ? stubArray : function(object) {\r\n  if (object == null) {\r\n    return [];\r\n  }\r\n  object = Object(object);\r\n  return arrayFilter(nativeGetSymbols(object), function(symbol) {\r\n    return propertyIsEnumerable.call(object, symbol);\r\n  });\r\n};\r\n\r\nmodule.exports = getSymbols;\r\n", "/**\r\n * The base implementation of `_.times` without support for iteratee shorthands\r\n * or max array length checks.\r\n *\r\n * @private\r\n * @param {number} n The number of times to invoke `iteratee`.\r\n * @param {Function} iteratee The function invoked per iteration.\r\n * @returns {Array} Returns the array of results.\r\n */\r\nfunction baseTimes(n, iteratee) {\r\n  var index = -1,\r\n      result = Array(n);\r\n\r\n  while (++index < n) {\r\n    result[index] = iteratee(index);\r\n  }\r\n  return result;\r\n}\r\n\r\nmodule.exports = baseTimes;\r\n", "/** Used as references for various `Number` constants. */\r\nvar MAX_SAFE_INTEGER = 9007199254740991;\r\n\r\n/** Used to detect unsigned integer values. */\r\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\r\n\r\n/**\r\n * Checks if `value` is a valid array-like index.\r\n *\r\n * @private\r\n * @param {*} value The value to check.\r\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\r\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\r\n */\r\nfunction isIndex(value, length) {\r\n  var type = typeof value;\r\n  length = length == null ? MAX_SAFE_INTEGER : length;\r\n\r\n  return !!length &&\r\n    (type == 'number' ||\r\n      (type != 'symbol' && reIsUint.test(value))) &&\r\n        (value > -1 && value % 1 == 0 && value < length);\r\n}\r\n\r\nmodule.exports = isIndex;\r\n", "var baseTimes = require('./_baseTimes'),\r\n    isArguments = require('./isArguments'),\r\n    isArray = require('./isArray'),\r\n    isBuffer = require('./isBuffer'),\r\n    isIndex = require('./_isIndex'),\r\n    isTypedArray = require('./isTypedArray');\r\n\r\n/** Used for built-in method references. */\r\nvar objectProto = Object.prototype;\r\n\r\n/** Used to check objects for own properties. */\r\nvar hasOwnProperty = objectProto.hasOwnProperty;\r\n\r\n/**\r\n * Creates an array of the enumerable property names of the array-like `value`.\r\n *\r\n * @private\r\n * @param {*} value The value to query.\r\n * @param {boolean} inherited Specify returning inherited property names.\r\n * @returns {Array} Returns the array of property names.\r\n */\r\nfunction arrayLikeKeys(value, inherited) {\r\n  var isArr = isArray(value),\r\n      isArg = !isArr && isArguments(value),\r\n      isBuff = !isArr && !isArg && isBuffer(value),\r\n      isType = !isArr && !isArg && !isBuff && isTypedArray(value),\r\n      skipIndexes = isArr || isArg || isBuff || isType,\r\n      result = skipIndexes ? baseTimes(value.length, String) : [],\r\n      length = result.length;\r\n\r\n  for (var key in value) {\r\n    if ((inherited || hasOwnProperty.call(value, key)) &&\r\n        !(skipIndexes && (\r\n           // Safari 9 has enumerable `arguments.length` in strict mode.\r\n           key == 'length' ||\r\n           // Node.js 0.10 has enumerable non-index properties on buffers.\r\n           (isBuff && (key == 'offset' || key == 'parent')) ||\r\n           // PhantomJS 2 has enumerable non-index properties on typed arrays.\r\n           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\r\n           // Skip index properties.\r\n           isIndex(key, length)\r\n        ))) {\r\n      result.push(key);\r\n    }\r\n  }\r\n  return result;\r\n}\r\n\r\nmodule.exports = arrayLikeKeys;\r\n", "var arrayLikeKeys = require('./_arrayLikeKeys'),\r\n    baseKeys = require('./_baseKeys'),\r\n    isArrayLike = require('./isArrayLike');\r\n\r\n/**\r\n * Creates an array of the own enumerable property names of `object`.\r\n *\r\n * **Note:** Non-object values are coerced to objects. See the\r\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\r\n * for more details.\r\n *\r\n * @static\r\n * @since 0.1.0\r\n * @memberOf _\r\n * @category Object\r\n * @param {Object} object The object to query.\r\n * @returns {Array} Returns the array of property names.\r\n * @example\r\n *\r\n * function Foo() {\r\n *   this.a = 1;\r\n *   this.b = 2;\r\n * }\r\n *\r\n * Foo.prototype.c = 3;\r\n *\r\n * _.keys(new Foo);\r\n * // => ['a', 'b'] (iteration order is not guaranteed)\r\n *\r\n * _.keys('hi');\r\n * // => ['0', '1']\r\n */\r\nfunction keys(object) {\r\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\r\n}\r\n\r\nmodule.exports = keys;\r\n", "var baseGetAllKeys = require('./_baseGetAllKeys'),\r\n    getSymbols = require('./_getSymbols'),\r\n    keys = require('./keys');\r\n\r\n/**\r\n * Creates an array of own enumerable property names and symbols of `object`.\r\n *\r\n * @private\r\n * @param {Object} object The object to query.\r\n * @returns {Array} Returns the array of property names and symbols.\r\n */\r\nfunction getAllKeys(object) {\r\n  return baseGetAllKeys(object, keys, getSymbols);\r\n}\r\n\r\nmodule.exports = getAllKeys;\r\n", "var getAllKeys = require('./_getAllKeys');\r\n\r\n/** Used to compose bitmasks for value comparisons. */\r\nvar COMPARE_PARTIAL_FLAG = 1;\r\n\r\n/** Used for built-in method references. */\r\nvar objectProto = Object.prototype;\r\n\r\n/** Used to check objects for own properties. */\r\nvar hasOwnProperty = objectProto.hasOwnProperty;\r\n\r\n/**\r\n * A specialized version of `baseIsEqualDeep` for objects with support for\r\n * partial deep comparisons.\r\n *\r\n * @private\r\n * @param {Object} object The object to compare.\r\n * @param {Object} other The other object to compare.\r\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\r\n * @param {Function} customizer The function to customize comparisons.\r\n * @param {Function} equalFunc The function to determine equivalents of values.\r\n * @param {Object} stack Tracks traversed `object` and `other` objects.\r\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\r\n */\r\nfunction equalObjects(object, other, bitmask, customizer, equalFunc, stack) {\r\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\r\n      objProps = getAllKeys(object),\r\n      objLength = objProps.length,\r\n      othProps = getAllKeys(other),\r\n      othLength = othProps.length;\r\n\r\n  if (objLength != othLength && !isPartial) {\r\n    return false;\r\n  }\r\n  var index = objLength;\r\n  while (index--) {\r\n    var key = objProps[index];\r\n    if (!(isPartial ? key in other : hasOwnProperty.call(other, key))) {\r\n      return false;\r\n    }\r\n  }\r\n  // Check that cyclic values are equal.\r\n  var objStacked = stack.get(object);\r\n  var othStacked = stack.get(other);\r\n  if (objStacked && othStacked) {\r\n    return objStacked == other && othStacked == object;\r\n  }\r\n  var result = true;\r\n  stack.set(object, other);\r\n  stack.set(other, object);\r\n\r\n  var skipCtor = isPartial;\r\n  while (++index < objLength) {\r\n    key = objProps[index];\r\n    var objValue = object[key],\r\n        othValue = other[key];\r\n\r\n    if (customizer) {\r\n      var compared = isPartial\r\n        ? customizer(othValue, objValue, key, other, object, stack)\r\n        : customizer(objValue, othValue, key, object, other, stack);\r\n    }\r\n    // Recursively compare objects (susceptible to call stack limits).\r\n    if (!(compared === undefined\r\n          ? (objValue === othValue || equalFunc(objValue, othValue, bitmask, customizer, stack))\r\n          : compared\r\n        )) {\r\n      result = false;\r\n      break;\r\n    }\r\n    skipCtor || (skipCtor = key == 'constructor');\r\n  }\r\n  if (result && !skipCtor) {\r\n    var objCtor = object.constructor,\r\n        othCtor = other.constructor;\r\n\r\n    // Non `Object` object instances with different constructors are not equal.\r\n    if (objCtor != othCtor &&\r\n        ('constructor' in object && 'constructor' in other) &&\r\n        !(typeof objCtor == 'function' && objCtor instanceof objCtor &&\r\n          typeof othCtor == 'function' && othCtor instanceof othCtor)) {\r\n      result = false;\r\n    }\r\n  }\r\n  stack['delete'](object);\r\n  stack['delete'](other);\r\n  return result;\r\n}\r\n\r\nmodule.exports = equalObjects;\r\n", "var Stack = require('./_Stack'),\r\n    equalArrays = require('./_equalArrays'),\r\n    equalByTag = require('./_equalByTag'),\r\n    equalObjects = require('./_equalObjects'),\r\n    getTag = require('./_getTag'),\r\n    isArray = require('./isArray'),\r\n    isBuffer = require('./isBuffer'),\r\n    isTypedArray = require('./isTypedArray');\r\n\r\n/** Used to compose bitmasks for value comparisons. */\r\nvar COMPARE_PARTIAL_FLAG = 1;\r\n\r\n/** `Object#toString` result references. */\r\nvar argsTag = '[object Arguments]',\r\n    arrayTag = '[object Array]',\r\n    objectTag = '[object Object]';\r\n\r\n/** Used for built-in method references. */\r\nvar objectProto = Object.prototype;\r\n\r\n/** Used to check objects for own properties. */\r\nvar hasOwnProperty = objectProto.hasOwnProperty;\r\n\r\n/**\r\n * A specialized version of `baseIsEqual` for arrays and objects which performs\r\n * deep comparisons and tracks traversed objects enabling objects with circular\r\n * references to be compared.\r\n *\r\n * @private\r\n * @param {Object} object The object to compare.\r\n * @param {Object} other The other object to compare.\r\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\r\n * @param {Function} customizer The function to customize comparisons.\r\n * @param {Function} equalFunc The function to determine equivalents of values.\r\n * @param {Object} [stack] Tracks traversed `object` and `other` objects.\r\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\r\n */\r\nfunction baseIsEqualDeep(object, other, bitmask, customizer, equalFunc, stack) {\r\n  var objIsArr = isArray(object),\r\n      othIsArr = isArray(other),\r\n      objTag = objIsArr ? arrayTag : getTag(object),\r\n      othTag = othIsArr ? arrayTag : getTag(other);\r\n\r\n  objTag = objTag == argsTag ? objectTag : objTag;\r\n  othTag = othTag == argsTag ? objectTag : othTag;\r\n\r\n  var objIsObj = objTag == objectTag,\r\n      othIsObj = othTag == objectTag,\r\n      isSameTag = objTag == othTag;\r\n\r\n  if (isSameTag && isBuffer(object)) {\r\n    if (!isBuffer(other)) {\r\n      return false;\r\n    }\r\n    objIsArr = true;\r\n    objIsObj = false;\r\n  }\r\n  if (isSameTag && !objIsObj) {\r\n    stack || (stack = new Stack);\r\n    return (objIsArr || isTypedArray(object))\r\n      ? equalArrays(object, other, bitmask, customizer, equalFunc, stack)\r\n      : equalByTag(object, other, objTag, bitmask, customizer, equalFunc, stack);\r\n  }\r\n  if (!(bitmask & COMPARE_PARTIAL_FLAG)) {\r\n    var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),\r\n        othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');\r\n\r\n    if (objIsWrapped || othIsWrapped) {\r\n      var objUnwrapped = objIsWrapped ? object.value() : object,\r\n          othUnwrapped = othIsWrapped ? other.value() : other;\r\n\r\n      stack || (stack = new Stack);\r\n      return equalFunc(objUnwrapped, othUnwrapped, bitmask, customizer, stack);\r\n    }\r\n  }\r\n  if (!isSameTag) {\r\n    return false;\r\n  }\r\n  stack || (stack = new Stack);\r\n  return equalObjects(object, other, bitmask, customizer, equalFunc, stack);\r\n}\r\n\r\nmodule.exports = baseIsEqualDeep;\r\n", "var baseIsEqualDeep = require('./_baseIsEqualDeep'),\r\n    isObjectLike = require('./isObjectLike');\r\n\r\n/**\r\n * The base implementation of `_.isEqual` which supports partial comparisons\r\n * and tracks traversed objects.\r\n *\r\n * @private\r\n * @param {*} value The value to compare.\r\n * @param {*} other The other value to compare.\r\n * @param {boolean} bitmask The bitmask flags.\r\n *  1 - Unordered comparison\r\n *  2 - Partial comparison\r\n * @param {Function} [customizer] The function to customize comparisons.\r\n * @param {Object} [stack] Tracks traversed `value` and `other` objects.\r\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\r\n */\r\nfunction baseIsEqual(value, other, bitmask, customizer, stack) {\r\n  if (value === other) {\r\n    return true;\r\n  }\r\n  if (value == null || other == null || (!isObjectLike(value) && !isObjectLike(other))) {\r\n    return value !== value && other !== other;\r\n  }\r\n  return baseIsEqualDeep(value, other, bitmask, customizer, baseIsEqual, stack);\r\n}\r\n\r\nmodule.exports = baseIsEqual;\r\n", "var Stack = require('./_Stack'),\r\n    baseIsEqual = require('./_baseIsEqual');\r\n\r\n/** Used to compose bitmasks for value comparisons. */\r\nvar COMPARE_PARTIAL_FLAG = 1,\r\n    COMPARE_UNORDERED_FLAG = 2;\r\n\r\n/**\r\n * The base implementation of `_.isMatch` without support for iteratee shorthands.\r\n *\r\n * @private\r\n * @param {Object} object The object to inspect.\r\n * @param {Object} source The object of property values to match.\r\n * @param {Array} matchData The property names, values, and compare flags to match.\r\n * @param {Function} [customizer] The function to customize comparisons.\r\n * @returns {boolean} Returns `true` if `object` is a match, else `false`.\r\n */\r\nfunction baseIsMatch(object, source, matchData, customizer) {\r\n  var index = matchData.length,\r\n      length = index,\r\n      noCustomizer = !customizer;\r\n\r\n  if (object == null) {\r\n    return !length;\r\n  }\r\n  object = Object(object);\r\n  while (index--) {\r\n    var data = matchData[index];\r\n    if ((noCustomizer && data[2])\r\n          ? data[1] !== object[data[0]]\r\n          : !(data[0] in object)\r\n        ) {\r\n      return false;\r\n    }\r\n  }\r\n  while (++index < length) {\r\n    data = matchData[index];\r\n    var key = data[0],\r\n        objValue = object[key],\r\n        srcValue = data[1];\r\n\r\n    if (noCustomizer && data[2]) {\r\n      if (objValue === undefined && !(key in object)) {\r\n        return false;\r\n      }\r\n    } else {\r\n      var stack = new Stack;\r\n      if (customizer) {\r\n        var result = customizer(objValue, srcValue, key, object, source, stack);\r\n      }\r\n      if (!(result === undefined\r\n            ? baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG, customizer, stack)\r\n            : result\r\n          )) {\r\n        return false;\r\n      }\r\n    }\r\n  }\r\n  return true;\r\n}\r\n\r\nmodule.exports = baseIsMatch;\r\n", "var isObject = require('./isObject');\r\n\r\n/**\r\n * Checks if `value` is suitable for strict equality comparisons, i.e. `===`.\r\n *\r\n * @private\r\n * @param {*} value The value to check.\r\n * @returns {boolean} Returns `true` if `value` if suitable for strict\r\n *  equality comparisons, else `false`.\r\n */\r\nfunction isStrictComparable(value) {\r\n  return value === value && !isObject(value);\r\n}\r\n\r\nmodule.exports = isStrictComparable;\r\n", "var isStrictComparable = require('./_isStrictComparable'),\r\n    keys = require('./keys');\r\n\r\n/**\r\n * Gets the property names, values, and compare flags of `object`.\r\n *\r\n * @private\r\n * @param {Object} object The object to query.\r\n * @returns {Array} Returns the match data of `object`.\r\n */\r\nfunction getMatchData(object) {\r\n  var result = keys(object),\r\n      length = result.length;\r\n\r\n  while (length--) {\r\n    var key = result[length],\r\n        value = object[key];\r\n\r\n    result[length] = [key, value, isStrictComparable(value)];\r\n  }\r\n  return result;\r\n}\r\n\r\nmodule.exports = getMatchData;\r\n", "/**\r\n * A specialized version of `matchesProperty` for source values suitable\r\n * for strict equality comparisons, i.e. `===`.\r\n *\r\n * @private\r\n * @param {string} key The key of the property to get.\r\n * @param {*} srcValue The value to match.\r\n * @returns {Function} Returns the new spec function.\r\n */\r\nfunction matchesStrictComparable(key, srcValue) {\r\n  return function(object) {\r\n    if (object == null) {\r\n      return false;\r\n    }\r\n    return object[key] === srcValue &&\r\n      (srcValue !== undefined || (key in Object(object)));\r\n  };\r\n}\r\n\r\nmodule.exports = matchesStrictComparable;\r\n", "var baseIsMatch = require('./_baseIsMatch'),\r\n    getMatchData = require('./_getMatchData'),\r\n    matchesStrictComparable = require('./_matchesStrictComparable');\r\n\r\n/**\r\n * The base implementation of `_.matches` which doesn't clone `source`.\r\n *\r\n * @private\r\n * @param {Object} source The object of property values to match.\r\n * @returns {Function} Returns the new spec function.\r\n */\r\nfunction baseMatches(source) {\r\n  var matchData = getMatchData(source);\r\n  if (matchData.length == 1 && matchData[0][2]) {\r\n    return matchesStrictComparable(matchData[0][0], matchData[0][1]);\r\n  }\r\n  return function(object) {\r\n    return object === source || baseIsMatch(object, source, matchData);\r\n  };\r\n}\r\n\r\nmodule.exports = baseMatches;\r\n", "var baseGetTag = require('./_baseGetTag'),\r\n    isObjectLike = require('./isObjectLike');\r\n\r\n/** `Object#toString` result references. */\r\nvar symbolTag = '[object Symbol]';\r\n\r\n/**\r\n * Checks if `value` is classified as a `Symbol` primitive or object.\r\n *\r\n * @static\r\n * @memberOf _\r\n * @since 4.0.0\r\n * @category Lang\r\n * @param {*} value The value to check.\r\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\r\n * @example\r\n *\r\n * _.isSymbol(Symbol.iterator);\r\n * // => true\r\n *\r\n * _.isSymbol('abc');\r\n * // => false\r\n */\r\nfunction isSymbol(value) {\r\n  return typeof value == 'symbol' ||\r\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\r\n}\r\n\r\nmodule.exports = isSymbol;\r\n", "var isArray = require('./isArray'),\r\n    isSymbol = require('./isSymbol');\r\n\r\n/** Used to match property names within property paths. */\r\nvar reIsDeepProp = /\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,\r\n    reIsPlainProp = /^\\w*$/;\r\n\r\n/**\r\n * Checks if `value` is a property name and not a property path.\r\n *\r\n * @private\r\n * @param {*} value The value to check.\r\n * @param {Object} [object] The object to query keys on.\r\n * @returns {boolean} Returns `true` if `value` is a property name, else `false`.\r\n */\r\nfunction isKey(value, object) {\r\n  if (isArray(value)) {\r\n    return false;\r\n  }\r\n  var type = typeof value;\r\n  if (type == 'number' || type == 'symbol' || type == 'boolean' ||\r\n      value == null || isSymbol(value)) {\r\n    return true;\r\n  }\r\n  return reIsPlainProp.test(value) || !reIsDeepProp.test(value) ||\r\n    (object != null && value in Object(object));\r\n}\r\n\r\nmodule.exports = isKey;\r\n", "var MapCache = require('./_MapCache');\r\n\r\n/** Error message constants. */\r\nvar FUNC_ERROR_TEXT = 'Expected a function';\r\n\r\n/**\r\n * Creates a function that memoizes the result of `func`. If `resolver` is\r\n * provided, it determines the cache key for storing the result based on the\r\n * arguments provided to the memoized function. By default, the first argument\r\n * provided to the memoized function is used as the map cache key. The `func`\r\n * is invoked with the `this` binding of the memoized function.\r\n *\r\n * **Note:** The cache is exposed as the `cache` property on the memoized\r\n * function. Its creation may be customized by replacing the `_.memoize.Cache`\r\n * constructor with one whose instances implement the\r\n * [`Map`](http://ecma-international.org/ecma-262/7.0/#sec-properties-of-the-map-prototype-object)\r\n * method interface of `clear`, `delete`, `get`, `has`, and `set`.\r\n *\r\n * @static\r\n * @memberOf _\r\n * @since 0.1.0\r\n * @category Function\r\n * @param {Function} func The function to have its output memoized.\r\n * @param {Function} [resolver] The function to resolve the cache key.\r\n * @returns {Function} Returns the new memoized function.\r\n * @example\r\n *\r\n * var object = { 'a': 1, 'b': 2 };\r\n * var other = { 'c': 3, 'd': 4 };\r\n *\r\n * var values = _.memoize(_.values);\r\n * values(object);\r\n * // => [1, 2]\r\n *\r\n * values(other);\r\n * // => [3, 4]\r\n *\r\n * object.a = 2;\r\n * values(object);\r\n * // => [1, 2]\r\n *\r\n * // Modify the result cache.\r\n * values.cache.set(object, ['a', 'b']);\r\n * values(object);\r\n * // => ['a', 'b']\r\n *\r\n * // Replace `_.memoize.Cache`.\r\n * _.memoize.Cache = WeakMap;\r\n */\r\nfunction memoize(func, resolver) {\r\n  if (typeof func != 'function' || (resolver != null && typeof resolver != 'function')) {\r\n    throw new TypeError(FUNC_ERROR_TEXT);\r\n  }\r\n  var memoized = function() {\r\n    var args = arguments,\r\n        key = resolver ? resolver.apply(this, args) : args[0],\r\n        cache = memoized.cache;\r\n\r\n    if (cache.has(key)) {\r\n      return cache.get(key);\r\n    }\r\n    var result = func.apply(this, args);\r\n    memoized.cache = cache.set(key, result) || cache;\r\n    return result;\r\n  };\r\n  memoized.cache = new (memoize.Cache || MapCache);\r\n  return memoized;\r\n}\r\n\r\n// Expose `MapCache`.\r\nmemoize.Cache = MapCache;\r\n\r\nmodule.exports = memoize;\r\n", "var memoize = require('./memoize');\r\n\r\n/** Used as the maximum memoize cache size. */\r\nvar MAX_MEMOIZE_SIZE = 500;\r\n\r\n/**\r\n * A specialized version of `_.memoize` which clears the memoized function's\r\n * cache when it exceeds `MAX_MEMOIZE_SIZE`.\r\n *\r\n * @private\r\n * @param {Function} func The function to have its output memoized.\r\n * @returns {Function} Returns the new memoized function.\r\n */\r\nfunction memoizeCapped(func) {\r\n  var result = memoize(func, function(key) {\r\n    if (cache.size === MAX_MEMOIZE_SIZE) {\r\n      cache.clear();\r\n    }\r\n    return key;\r\n  });\r\n\r\n  var cache = result.cache;\r\n  return result;\r\n}\r\n\r\nmodule.exports = memoizeCapped;\r\n", "var memoizeCapped = require('./_memoizeCapped');\r\n\r\n/** Used to match property names within property paths. */\r\nvar rePropName = /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g;\r\n\r\n/** Used to match backslashes in property paths. */\r\nvar reEscapeChar = /\\\\(\\\\)?/g;\r\n\r\n/**\r\n * Converts `string` to a property path array.\r\n *\r\n * @private\r\n * @param {string} string The string to convert.\r\n * @returns {Array} Returns the property path array.\r\n */\r\nvar stringToPath = memoizeCapped(function(string) {\r\n  var result = [];\r\n  if (string.charCodeAt(0) === 46 /* . */) {\r\n    result.push('');\r\n  }\r\n  string.replace(rePropName, function(match, number, quote, subString) {\r\n    result.push(quote ? subString.replace(reEscapeChar, '$1') : (number || match));\r\n  });\r\n  return result;\r\n});\r\n\r\nmodule.exports = stringToPath;\r\n", "var Symbol = require('./_Symbol'),\r\n    arrayMap = require('./_arrayMap'),\r\n    isArray = require('./isArray'),\r\n    isSymbol = require('./isSymbol');\r\n\r\n/** Used as references for various `Number` constants. */\r\nvar INFINITY = 1 / 0;\r\n\r\n/** Used to convert symbols to primitives and strings. */\r\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\r\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\r\n\r\n/**\r\n * The base implementation of `_.toString` which doesn't convert nullish\r\n * values to empty strings.\r\n *\r\n * @private\r\n * @param {*} value The value to process.\r\n * @returns {string} Returns the string.\r\n */\r\nfunction baseToString(value) {\r\n  // Exit early for strings to avoid a performance hit in some environments.\r\n  if (typeof value == 'string') {\r\n    return value;\r\n  }\r\n  if (isArray(value)) {\r\n    // Recursively convert values (susceptible to call stack limits).\r\n    return arrayMap(value, baseToString) + '';\r\n  }\r\n  if (isSymbol(value)) {\r\n    return symbolToString ? symbolToString.call(value) : '';\r\n  }\r\n  var result = (value + '');\r\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\r\n}\r\n\r\nmodule.exports = baseToString;\r\n", "var baseToString = require('./_baseToString');\r\n\r\n/**\r\n * Converts `value` to a string. An empty string is returned for `null`\r\n * and `undefined` values. The sign of `-0` is preserved.\r\n *\r\n * @static\r\n * @memberOf _\r\n * @since 4.0.0\r\n * @category Lang\r\n * @param {*} value The value to convert.\r\n * @returns {string} Returns the converted string.\r\n * @example\r\n *\r\n * _.toString(null);\r\n * // => ''\r\n *\r\n * _.toString(-0);\r\n * // => '-0'\r\n *\r\n * _.toString([1, 2, 3]);\r\n * // => '1,2,3'\r\n */\r\nfunction toString(value) {\r\n  return value == null ? '' : baseToString(value);\r\n}\r\n\r\nmodule.exports = toString;\r\n", "var isArray = require('./isArray'),\r\n    isKey = require('./_isKey'),\r\n    stringToPath = require('./_stringToPath'),\r\n    toString = require('./toString');\r\n\r\n/**\r\n * Casts `value` to a path array if it's not one.\r\n *\r\n * @private\r\n * @param {*} value The value to inspect.\r\n * @param {Object} [object] The object to query keys on.\r\n * @returns {Array} Returns the cast property path array.\r\n */\r\nfunction castPath(value, object) {\r\n  if (isArray(value)) {\r\n    return value;\r\n  }\r\n  return isKey(value, object) ? [value] : stringToPath(toString(value));\r\n}\r\n\r\nmodule.exports = castPath;\r\n", "var isSymbol = require('./isSymbol');\r\n\r\n/** Used as references for various `Number` constants. */\r\nvar INFINITY = 1 / 0;\r\n\r\n/**\r\n * Converts `value` to a string key if it's not a string or symbol.\r\n *\r\n * @private\r\n * @param {*} value The value to inspect.\r\n * @returns {string|symbol} Returns the key.\r\n */\r\nfunction toKey(value) {\r\n  if (typeof value == 'string' || isSymbol(value)) {\r\n    return value;\r\n  }\r\n  var result = (value + '');\r\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\r\n}\r\n\r\nmodule.exports = toKey;\r\n", "var castPath = require('./_castPath'),\r\n    toKey = require('./_toKey');\r\n\r\n/**\r\n * The base implementation of `_.get` without support for default values.\r\n *\r\n * @private\r\n * @param {Object} object The object to query.\r\n * @param {Array|string} path The path of the property to get.\r\n * @returns {*} Returns the resolved value.\r\n */\r\nfunction baseGet(object, path) {\r\n  path = castPath(path, object);\r\n\r\n  var index = 0,\r\n      length = path.length;\r\n\r\n  while (object != null && index < length) {\r\n    object = object[toKey(path[index++])];\r\n  }\r\n  return (index && index == length) ? object : undefined;\r\n}\r\n\r\nmodule.exports = baseGet;\r\n", "var baseGet = require('./_baseGet');\r\n\r\n/**\r\n * Gets the value at `path` of `object`. If the resolved value is\r\n * `undefined`, the `defaultValue` is returned in its place.\r\n *\r\n * @static\r\n * @memberOf _\r\n * @since 3.7.0\r\n * @category Object\r\n * @param {Object} object The object to query.\r\n * @param {Array|string} path The path of the property to get.\r\n * @param {*} [defaultValue] The value returned for `undefined` resolved values.\r\n * @returns {*} Returns the resolved value.\r\n * @example\r\n *\r\n * var object = { 'a': [{ 'b': { 'c': 3 } }] };\r\n *\r\n * _.get(object, 'a[0].b.c');\r\n * // => 3\r\n *\r\n * _.get(object, ['a', '0', 'b', 'c']);\r\n * // => 3\r\n *\r\n * _.get(object, 'a.b.c', 'default');\r\n * // => 'default'\r\n */\r\nfunction get(object, path, defaultValue) {\r\n  var result = object == null ? undefined : baseGet(object, path);\r\n  return result === undefined ? defaultValue : result;\r\n}\r\n\r\nmodule.exports = get;\r\n", "/**\r\n * The base implementation of `_.hasIn` without support for deep paths.\r\n *\r\n * @private\r\n * @param {Object} [object] The object to query.\r\n * @param {Array|string} key The key to check.\r\n * @returns {boolean} Returns `true` if `key` exists, else `false`.\r\n */\r\nfunction baseHasIn(object, key) {\r\n  return object != null && key in Object(object);\r\n}\r\n\r\nmodule.exports = baseHasIn;\r\n", "var castPath = require('./_castPath'),\r\n    isArguments = require('./isArguments'),\r\n    isArray = require('./isArray'),\r\n    isIndex = require('./_isIndex'),\r\n    isLength = require('./isLength'),\r\n    toKey = require('./_toKey');\r\n\r\n/**\r\n * Checks if `path` exists on `object`.\r\n *\r\n * @private\r\n * @param {Object} object The object to query.\r\n * @param {Array|string} path The path to check.\r\n * @param {Function} hasFunc The function to check properties.\r\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\r\n */\r\nfunction hasPath(object, path, hasFunc) {\r\n  path = castPath(path, object);\r\n\r\n  var index = -1,\r\n      length = path.length,\r\n      result = false;\r\n\r\n  while (++index < length) {\r\n    var key = toKey(path[index]);\r\n    if (!(result = object != null && hasFunc(object, key))) {\r\n      break;\r\n    }\r\n    object = object[key];\r\n  }\r\n  if (result || ++index != length) {\r\n    return result;\r\n  }\r\n  length = object == null ? 0 : object.length;\r\n  return !!length && isLength(length) && isIndex(key, length) &&\r\n    (isArray(object) || isArguments(object));\r\n}\r\n\r\nmodule.exports = hasPath;\r\n", "var baseHasIn = require('./_baseHasIn'),\r\n    hasPath = require('./_hasPath');\r\n\r\n/**\r\n * Checks if `path` is a direct or inherited property of `object`.\r\n *\r\n * @static\r\n * @memberOf _\r\n * @since 4.0.0\r\n * @category Object\r\n * @param {Object} object The object to query.\r\n * @param {Array|string} path The path to check.\r\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\r\n * @example\r\n *\r\n * var object = _.create({ 'a': _.create({ 'b': 2 }) });\r\n *\r\n * _.hasIn(object, 'a');\r\n * // => true\r\n *\r\n * _.hasIn(object, 'a.b');\r\n * // => true\r\n *\r\n * _.hasIn(object, ['a', 'b']);\r\n * // => true\r\n *\r\n * _.hasIn(object, 'b');\r\n * // => false\r\n */\r\nfunction hasIn(object, path) {\r\n  return object != null && hasPath(object, path, baseHasIn);\r\n}\r\n\r\nmodule.exports = hasIn;\r\n", "var baseIsEqual = require('./_baseIsEqual'),\r\n    get = require('./get'),\r\n    hasIn = require('./hasIn'),\r\n    isKey = require('./_isKey'),\r\n    isStrictComparable = require('./_isStrictComparable'),\r\n    matchesStrictComparable = require('./_matchesStrictComparable'),\r\n    toKey = require('./_toKey');\r\n\r\n/** Used to compose bitmasks for value comparisons. */\r\nvar COMPARE_PARTIAL_FLAG = 1,\r\n    COMPARE_UNORDERED_FLAG = 2;\r\n\r\n/**\r\n * The base implementation of `_.matchesProperty` which doesn't clone `srcValue`.\r\n *\r\n * @private\r\n * @param {string} path The path of the property to get.\r\n * @param {*} srcValue The value to match.\r\n * @returns {Function} Returns the new spec function.\r\n */\r\nfunction baseMatchesProperty(path, srcValue) {\r\n  if (isKey(path) && isStrictComparable(srcValue)) {\r\n    return matchesStrictComparable(toKey(path), srcValue);\r\n  }\r\n  return function(object) {\r\n    var objValue = get(object, path);\r\n    return (objValue === undefined && objValue === srcValue)\r\n      ? hasIn(object, path)\r\n      : baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG);\r\n  };\r\n}\r\n\r\nmodule.exports = baseMatchesProperty;\r\n", "/**\r\n * This method returns the first argument it receives.\r\n *\r\n * @static\r\n * @since 0.1.0\r\n * @memberOf _\r\n * @category Util\r\n * @param {*} value Any value.\r\n * @returns {*} Returns `value`.\r\n * @example\r\n *\r\n * var object = { 'a': 1 };\r\n *\r\n * console.log(_.identity(object) === object);\r\n * // => true\r\n */\r\nfunction identity(value) {\r\n  return value;\r\n}\r\n\r\nmodule.exports = identity;\r\n", "/**\r\n * The base implementation of `_.property` without support for deep paths.\r\n *\r\n * @private\r\n * @param {string} key The key of the property to get.\r\n * @returns {Function} Returns the new accessor function.\r\n */\r\nfunction baseProperty(key) {\r\n  return function(object) {\r\n    return object == null ? undefined : object[key];\r\n  };\r\n}\r\n\r\nmodule.exports = baseProperty;\r\n", "var baseGet = require('./_baseGet');\r\n\r\n/**\r\n * A specialized version of `baseProperty` which supports deep paths.\r\n *\r\n * @private\r\n * @param {Array|string} path The path of the property to get.\r\n * @returns {Function} Returns the new accessor function.\r\n */\r\nfunction basePropertyDeep(path) {\r\n  return function(object) {\r\n    return baseGet(object, path);\r\n  };\r\n}\r\n\r\nmodule.exports = basePropertyDeep;\r\n", "var baseProperty = require('./_baseProperty'),\r\n    basePropertyDeep = require('./_basePropertyDeep'),\r\n    isKey = require('./_isKey'),\r\n    toKey = require('./_toKey');\r\n\r\n/**\r\n * Creates a function that returns the value at `path` of a given object.\r\n *\r\n * @static\r\n * @memberOf _\r\n * @since 2.4.0\r\n * @category Util\r\n * @param {Array|string} path The path of the property to get.\r\n * @returns {Function} Returns the new accessor function.\r\n * @example\r\n *\r\n * var objects = [\r\n *   { 'a': { 'b': 2 } },\r\n *   { 'a': { 'b': 1 } }\r\n * ];\r\n *\r\n * _.map(objects, _.property('a.b'));\r\n * // => [2, 1]\r\n *\r\n * _.map(_.sortBy(objects, _.property(['a', 'b'])), 'a.b');\r\n * // => [1, 2]\r\n */\r\nfunction property(path) {\r\n  return isKey(path) ? baseProperty(toKey(path)) : basePropertyDeep(path);\r\n}\r\n\r\nmodule.exports = property;\r\n", "var baseMatches = require('./_baseMatches'),\r\n    baseMatchesProperty = require('./_baseMatchesProperty'),\r\n    identity = require('./identity'),\r\n    isArray = require('./isArray'),\r\n    property = require('./property');\r\n\r\n/**\r\n * The base implementation of `_.iteratee`.\r\n *\r\n * @private\r\n * @param {*} [value=_.identity] The value to convert to an iteratee.\r\n * @returns {Function} Returns the iteratee.\r\n */\r\nfunction baseIteratee(value) {\r\n  // Don't store the `typeof` result in a variable to avoid a JIT bug in Safari 9.\r\n  // See https://bugs.webkit.org/show_bug.cgi?id=156034 for more details.\r\n  if (typeof value == 'function') {\r\n    return value;\r\n  }\r\n  if (value == null) {\r\n    return identity;\r\n  }\r\n  if (typeof value == 'object') {\r\n    return isArray(value)\r\n      ? baseMatchesProperty(value[0], value[1])\r\n      : baseMatches(value);\r\n  }\r\n  return property(value);\r\n}\r\n\r\nmodule.exports = baseIteratee;\r\n", "/**\r\n * Creates a base function for methods like `_.forIn` and `_.forOwn`.\r\n *\r\n * @private\r\n * @param {boolean} [fromRight] Specify iterating from right to left.\r\n * @returns {Function} Returns the new base function.\r\n */\r\nfunction createBaseFor(fromRight) {\r\n  return function(object, iteratee, keysFunc) {\r\n    var index = -1,\r\n        iterable = Object(object),\r\n        props = keysFunc(object),\r\n        length = props.length;\r\n\r\n    while (length--) {\r\n      var key = props[fromRight ? length : ++index];\r\n      if (iteratee(iterable[key], key, iterable) === false) {\r\n        break;\r\n      }\r\n    }\r\n    return object;\r\n  };\r\n}\r\n\r\nmodule.exports = createBaseFor;\r\n", "var createBaseFor = require('./_createBaseFor');\r\n\r\n/**\r\n * The base implementation of `baseForOwn` which iterates over `object`\r\n * properties returned by `keysFunc` and invokes `iteratee` for each property.\r\n * Iteratee functions may exit iteration early by explicitly returning `false`.\r\n *\r\n * @private\r\n * @param {Object} object The object to iterate over.\r\n * @param {Function} iteratee The function invoked per iteration.\r\n * @param {Function} keysFunc The function to get the keys of `object`.\r\n * @returns {Object} Returns `object`.\r\n */\r\nvar baseFor = createBaseFor();\r\n\r\nmodule.exports = baseFor;\r\n", "var baseFor = require('./_baseFor'),\r\n    keys = require('./keys');\r\n\r\n/**\r\n * The base implementation of `_.forOwn` without support for iteratee shorthands.\r\n *\r\n * @private\r\n * @param {Object} object The object to iterate over.\r\n * @param {Function} iteratee The function invoked per iteration.\r\n * @returns {Object} Returns `object`.\r\n */\r\nfunction baseForOwn(object, iteratee) {\r\n  return object && baseFor(object, iteratee, keys);\r\n}\r\n\r\nmodule.exports = baseForOwn;\r\n", "var isArrayLike = require('./isArrayLike');\r\n\r\n/**\r\n * Creates a `baseEach` or `baseEachRight` function.\r\n *\r\n * @private\r\n * @param {Function} eachFunc The function to iterate over a collection.\r\n * @param {boolean} [fromRight] Specify iterating from right to left.\r\n * @returns {Function} Returns the new base function.\r\n */\r\nfunction createBaseEach(eachFunc, fromRight) {\r\n  return function(collection, iteratee) {\r\n    if (collection == null) {\r\n      return collection;\r\n    }\r\n    if (!isArrayLike(collection)) {\r\n      return eachFunc(collection, iteratee);\r\n    }\r\n    var length = collection.length,\r\n        index = fromRight ? length : -1,\r\n        iterable = Object(collection);\r\n\r\n    while ((fromRight ? index-- : ++index < length)) {\r\n      if (iteratee(iterable[index], index, iterable) === false) {\r\n        break;\r\n      }\r\n    }\r\n    return collection;\r\n  };\r\n}\r\n\r\nmodule.exports = createBaseEach;\r\n", "var baseForOwn = require('./_baseForOwn'),\r\n    createBaseEach = require('./_createBaseEach');\r\n\r\n/**\r\n * The base implementation of `_.forEach` without support for iteratee shorthands.\r\n *\r\n * @private\r\n * @param {Array|Object} collection The collection to iterate over.\r\n * @param {Function} iteratee The function invoked per iteration.\r\n * @returns {Array|Object} Returns `collection`.\r\n */\r\nvar baseEach = createBaseEach(baseForOwn);\r\n\r\nmodule.exports = baseEach;\r\n", "var baseEach = require('./_baseEach'),\r\n    isArrayLike = require('./isArrayLike');\r\n\r\n/**\r\n * The base implementation of `_.map` without support for iteratee shorthands.\r\n *\r\n * @private\r\n * @param {Array|Object} collection The collection to iterate over.\r\n * @param {Function} iteratee The function invoked per iteration.\r\n * @returns {Array} Returns the new mapped array.\r\n */\r\nfunction baseMap(collection, iteratee) {\r\n  var index = -1,\r\n      result = isArrayLike(collection) ? Array(collection.length) : [];\r\n\r\n  baseEach(collection, function(value, key, collection) {\r\n    result[++index] = iteratee(value, key, collection);\r\n  });\r\n  return result;\r\n}\r\n\r\nmodule.exports = baseMap;\r\n", "var arrayMap = require('./_arrayMap'),\r\n    baseIteratee = require('./_baseIteratee'),\r\n    baseMap = require('./_baseMap'),\r\n    isArray = require('./isArray');\r\n\r\n/**\r\n * Creates an array of values by running each element in `collection` thru\r\n * `iteratee`. The iteratee is invoked with three arguments:\r\n * (value, index|key, collection).\r\n *\r\n * Many lodash methods are guarded to work as iteratees for methods like\r\n * `_.every`, `_.filter`, `_.map`, `_.mapValues`, `_.reject`, and `_.some`.\r\n *\r\n * The guarded methods are:\r\n * `ary`, `chunk`, `curry`, `curryRight`, `drop`, `dropRight`, `every`,\r\n * `fill`, `invert`, `parseInt`, `random`, `range`, `rangeRight`, `repeat`,\r\n * `sampleSize`, `slice`, `some`, `sortBy`, `split`, `take`, `takeRight`,\r\n * `template`, `trim`, `trimEnd`, `trimStart`, and `words`\r\n *\r\n * @static\r\n * @memberOf _\r\n * @since 0.1.0\r\n * @category Collection\r\n * @param {Array|Object} collection The collection to iterate over.\r\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\r\n * @returns {Array} Returns the new mapped array.\r\n * @example\r\n *\r\n * function square(n) {\r\n *   return n * n;\r\n * }\r\n *\r\n * _.map([4, 8], square);\r\n * // => [16, 64]\r\n *\r\n * _.map({ 'a': 4, 'b': 8 }, square);\r\n * // => [16, 64] (iteration order is not guaranteed)\r\n *\r\n * var users = [\r\n *   { 'user': 'barney' },\r\n *   { 'user': 'fred' }\r\n * ];\r\n *\r\n * // The `_.property` iteratee shorthand.\r\n * _.map(users, 'user');\r\n * // => ['barney', 'fred']\r\n */\r\nfunction map(collection, iteratee) {\r\n  var func = isArray(collection) ? arrayMap : baseMap;\r\n  return func(collection, baseIteratee(iteratee, 3));\r\n}\r\n\r\nmodule.exports = map;\r\n", "/**\r\n * A specialized version of `_.forEach` for arrays without support for\r\n * iteratee shorthands.\r\n *\r\n * @private\r\n * @param {Array} [array] The array to iterate over.\r\n * @param {Function} iteratee The function invoked per iteration.\r\n * @returns {Array} Returns `array`.\r\n */\r\nfunction arrayEach(array, iteratee) {\r\n  var index = -1,\r\n      length = array == null ? 0 : array.length;\r\n\r\n  while (++index < length) {\r\n    if (iteratee(array[index], index, array) === false) {\r\n      break;\r\n    }\r\n  }\r\n  return array;\r\n}\r\n\r\nmodule.exports = arrayEach;\r\n", "var identity = require('./identity');\r\n\r\n/**\r\n * Casts `value` to `identity` if it's not a function.\r\n *\r\n * @private\r\n * @param {*} value The value to inspect.\r\n * @returns {Function} Returns cast function.\r\n */\r\nfunction castFunction(value) {\r\n  return typeof value == 'function' ? value : identity;\r\n}\r\n\r\nmodule.exports = castFunction;\r\n", "var arrayEach = require('./_arrayEach'),\r\n    baseEach = require('./_baseEach'),\r\n    castFunction = require('./_castFunction'),\r\n    isArray = require('./isArray');\r\n\r\n/**\r\n * Iterates over elements of `collection` and invokes `iteratee` for each element.\r\n * The iteratee is invoked with three arguments: (value, index|key, collection).\r\n * Iteratee functions may exit iteration early by explicitly returning `false`.\r\n *\r\n * **Note:** As with other \"Collections\" methods, objects with a \"length\"\r\n * property are iterated like arrays. To avoid this behavior use `_.forIn`\r\n * or `_.forOwn` for object iteration.\r\n *\r\n * @static\r\n * @memberOf _\r\n * @since 0.1.0\r\n * @alias each\r\n * @category Collection\r\n * @param {Array|Object} collection The collection to iterate over.\r\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\r\n * @returns {Array|Object} Returns `collection`.\r\n * @see _.forEachRight\r\n * @example\r\n *\r\n * _.forEach([1, 2], function(value) {\r\n *   console.log(value);\r\n * });\r\n * // => Logs `1` then `2`.\r\n *\r\n * _.forEach({ 'a': 1, 'b': 2 }, function(value, key) {\r\n *   console.log(key);\r\n * });\r\n * // => Logs 'a' then 'b' (iteration order is not guaranteed).\r\n */\r\nfunction forEach(collection, iteratee) {\r\n  var func = isArray(collection) ? arrayEach : baseEach;\r\n  return func(collection, castFunction(iteratee));\r\n}\r\n\r\nmodule.exports = forEach;\r\n", "var arrayMap = require('./_arrayMap');\r\n\r\n/**\r\n * The base implementation of `_.values` and `_.valuesIn` which creates an\r\n * array of `object` property values corresponding to the property names\r\n * of `props`.\r\n *\r\n * @private\r\n * @param {Object} object The object to query.\r\n * @param {Array} props The property names to get values for.\r\n * @returns {Object} Returns the array of property values.\r\n */\r\nfunction baseValues(object, props) {\r\n  return arrayMap(props, function(key) {\r\n    return object[key];\r\n  });\r\n}\r\n\r\nmodule.exports = baseValues;\r\n", "var baseValues = require('./_baseValues'),\r\n    keys = require('./keys');\r\n\r\n/**\r\n * Creates an array of the own enumerable string keyed property values of `object`.\r\n *\r\n * **Note:** Non-object values are coerced to objects.\r\n *\r\n * @static\r\n * @since 0.1.0\r\n * @memberOf _\r\n * @category Object\r\n * @param {Object} object The object to query.\r\n * @returns {Array} Returns the array of property values.\r\n * @example\r\n *\r\n * function Foo() {\r\n *   this.a = 1;\r\n *   this.b = 2;\r\n * }\r\n *\r\n * Foo.prototype.c = 3;\r\n *\r\n * _.values(new Foo);\r\n * // => [1, 2] (iteration order is not guaranteed)\r\n *\r\n * _.values('hi');\r\n * // => ['h', 'i']\r\n */\r\nfunction values(object) {\r\n  return object == null ? [] : baseValues(object, keys(object));\r\n}\r\n\r\nmodule.exports = values;\r\n", "/** Used for built-in method references. */\r\nvar objectProto = Object.prototype;\r\n\r\n/** Used to check objects for own properties. */\r\nvar hasOwnProperty = objectProto.hasOwnProperty;\r\n\r\n/**\r\n * The base implementation of `_.has` without support for deep paths.\r\n *\r\n * @private\r\n * @param {Object} [object] The object to query.\r\n * @param {Array|string} key The key to check.\r\n * @returns {boolean} Returns `true` if `key` exists, else `false`.\r\n */\r\nfunction baseHas(object, key) {\r\n  return object != null && hasOwnProperty.call(object, key);\r\n}\r\n\r\nmodule.exports = baseHas;\r\n", "var baseHas = require('./_baseHas'),\r\n    hasPath = require('./_hasPath');\r\n\r\n/**\r\n * Checks if `path` is a direct property of `object`.\r\n *\r\n * @static\r\n * @since 0.1.0\r\n * @memberOf _\r\n * @category Object\r\n * @param {Object} object The object to query.\r\n * @param {Array|string} path The path to check.\r\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\r\n * @example\r\n *\r\n * var object = { 'a': { 'b': 2 } };\r\n * var other = _.create({ 'a': _.create({ 'b': 2 }) });\r\n *\r\n * _.has(object, 'a');\r\n * // => true\r\n *\r\n * _.has(object, 'a.b');\r\n * // => true\r\n *\r\n * _.has(object, ['a', 'b']);\r\n * // => true\r\n *\r\n * _.has(other, 'a');\r\n * // => false\r\n */\r\nfunction has(object, path) {\r\n  return object != null && hasPath(object, path, baseHas);\r\n}\r\n\r\nmodule.exports = has;\r\n", "var getNative = require('./_getNative');\r\n\r\nvar defineProperty = (function() {\r\n  try {\r\n    var func = getNative(Object, 'defineProperty');\r\n    func({}, '', {});\r\n    return func;\r\n  } catch (e) {}\r\n}());\r\n\r\nmodule.exports = defineProperty;\r\n", "var defineProperty = require('./_defineProperty');\r\n\r\n/**\r\n * The base implementation of `assignValue` and `assignMergeValue` without\r\n * value checks.\r\n *\r\n * @private\r\n * @param {Object} object The object to modify.\r\n * @param {string} key The key of the property to assign.\r\n * @param {*} value The value to assign.\r\n */\r\nfunction baseAssignValue(object, key, value) {\r\n  if (key == '__proto__' && defineProperty) {\r\n    defineProperty(object, key, {\r\n      'configurable': true,\r\n      'enumerable': true,\r\n      'value': value,\r\n      'writable': true\r\n    });\r\n  } else {\r\n    object[key] = value;\r\n  }\r\n}\r\n\r\nmodule.exports = baseAssignValue;\r\n", "var baseAssignValue = require('./_baseAssignValue'),\r\n    eq = require('./eq');\r\n\r\n/** Used for built-in method references. */\r\nvar objectProto = Object.prototype;\r\n\r\n/** Used to check objects for own properties. */\r\nvar hasOwnProperty = objectProto.hasOwnProperty;\r\n\r\n/**\r\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\r\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\r\n * for equality comparisons.\r\n *\r\n * @private\r\n * @param {Object} object The object to modify.\r\n * @param {string} key The key of the property to assign.\r\n * @param {*} value The value to assign.\r\n */\r\nfunction assignValue(object, key, value) {\r\n  var objValue = object[key];\r\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\r\n      (value === undefined && !(key in object))) {\r\n    baseAssignValue(object, key, value);\r\n  }\r\n}\r\n\r\nmodule.exports = assignValue;\r\n", "var assignValue = require('./_assignValue'),\r\n    baseAssignValue = require('./_baseAssignValue');\r\n\r\n/**\r\n * Copies properties of `source` to `object`.\r\n *\r\n * @private\r\n * @param {Object} source The object to copy properties from.\r\n * @param {Array} props The property identifiers to copy.\r\n * @param {Object} [object={}] The object to copy properties to.\r\n * @param {Function} [customizer] The function to customize copied values.\r\n * @returns {Object} Returns `object`.\r\n */\r\nfunction copyObject(source, props, object, customizer) {\r\n  var isNew = !object;\r\n  object || (object = {});\r\n\r\n  var index = -1,\r\n      length = props.length;\r\n\r\n  while (++index < length) {\r\n    var key = props[index];\r\n\r\n    var newValue = customizer\r\n      ? customizer(object[key], source[key], key, object, source)\r\n      : undefined;\r\n\r\n    if (newValue === undefined) {\r\n      newValue = source[key];\r\n    }\r\n    if (isNew) {\r\n      baseAssignValue(object, key, newValue);\r\n    } else {\r\n      assignValue(object, key, newValue);\r\n    }\r\n  }\r\n  return object;\r\n}\r\n\r\nmodule.exports = copyObject;\r\n", "var copyObject = require('./_copyObject'),\r\n    keys = require('./keys');\r\n\r\n/**\r\n * The base implementation of `_.assign` without support for multiple sources\r\n * or `customizer` functions.\r\n *\r\n * @private\r\n * @param {Object} object The destination object.\r\n * @param {Object} source The source object.\r\n * @returns {Object} Returns `object`.\r\n */\r\nfunction baseAssign(object, source) {\r\n  return object && copyObject(source, keys(source), object);\r\n}\r\n\r\nmodule.exports = baseAssign;\r\n", "/**\r\n * This function is like\r\n * [`Object.keys`](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\r\n * except that it includes inherited enumerable properties.\r\n *\r\n * @private\r\n * @param {Object} object The object to query.\r\n * @returns {Array} Returns the array of property names.\r\n */\r\nfunction nativeKeysIn(object) {\r\n  var result = [];\r\n  if (object != null) {\r\n    for (var key in Object(object)) {\r\n      result.push(key);\r\n    }\r\n  }\r\n  return result;\r\n}\r\n\r\nmodule.exports = nativeKeysIn;\r\n", "var isObject = require('./isObject'),\r\n    isPrototype = require('./_isPrototype'),\r\n    nativeKeysIn = require('./_nativeKeysIn');\r\n\r\n/** Used for built-in method references. */\r\nvar objectProto = Object.prototype;\r\n\r\n/** Used to check objects for own properties. */\r\nvar hasOwnProperty = objectProto.hasOwnProperty;\r\n\r\n/**\r\n * The base implementation of `_.keysIn` which doesn't treat sparse arrays as dense.\r\n *\r\n * @private\r\n * @param {Object} object The object to query.\r\n * @returns {Array} Returns the array of property names.\r\n */\r\nfunction baseKeysIn(object) {\r\n  if (!isObject(object)) {\r\n    return nativeKeysIn(object);\r\n  }\r\n  var isProto = isPrototype(object),\r\n      result = [];\r\n\r\n  for (var key in object) {\r\n    if (!(key == 'constructor' && (isProto || !hasOwnProperty.call(object, key)))) {\r\n      result.push(key);\r\n    }\r\n  }\r\n  return result;\r\n}\r\n\r\nmodule.exports = baseKeysIn;\r\n", "var arrayLikeKeys = require('./_arrayLikeKeys'),\r\n    baseKeysIn = require('./_baseKeysIn'),\r\n    isArrayLike = require('./isArrayLike');\r\n\r\n/**\r\n * Creates an array of the own and inherited enumerable property names of `object`.\r\n *\r\n * **Note:** Non-object values are coerced to objects.\r\n *\r\n * @static\r\n * @memberOf _\r\n * @since 3.0.0\r\n * @category Object\r\n * @param {Object} object The object to query.\r\n * @returns {Array} Returns the array of property names.\r\n * @example\r\n *\r\n * function Foo() {\r\n *   this.a = 1;\r\n *   this.b = 2;\r\n * }\r\n *\r\n * Foo.prototype.c = 3;\r\n *\r\n * _.keysIn(new Foo);\r\n * // => ['a', 'b', 'c'] (iteration order is not guaranteed)\r\n */\r\nfunction keysIn(object) {\r\n  return isArrayLike(object) ? arrayLikeKeys(object, true) : baseKeysIn(object);\r\n}\r\n\r\nmodule.exports = keysIn;\r\n", "var copyObject = require('./_copyObject'),\r\n    keysIn = require('./keysIn');\r\n\r\n/**\r\n * The base implementation of `_.assignIn` without support for multiple sources\r\n * or `customizer` functions.\r\n *\r\n * @private\r\n * @param {Object} object The destination object.\r\n * @param {Object} source The source object.\r\n * @returns {Object} Returns `object`.\r\n */\r\nfunction baseAssignIn(object, source) {\r\n  return object && copyObject(source, keysIn(source), object);\r\n}\r\n\r\nmodule.exports = baseAssignIn;\r\n", "var root = require('./_root');\r\n\r\n/** Detect free variable `exports`. */\r\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\r\n\r\n/** Detect free variable `module`. */\r\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\r\n\r\n/** Detect the popular CommonJS extension `module.exports`. */\r\nvar moduleExports = freeModule && freeModule.exports === freeExports;\r\n\r\n/** Built-in value references. */\r\nvar Buffer = moduleExports ? root.Buffer : undefined,\r\n    allocUnsafe = Buffer ? Buffer.allocUnsafe : undefined;\r\n\r\n/**\r\n * Creates a clone of  `buffer`.\r\n *\r\n * @private\r\n * @param {Buffer} buffer The buffer to clone.\r\n * @param {boolean} [isDeep] Specify a deep clone.\r\n * @returns {Buffer} Returns the cloned buffer.\r\n */\r\nfunction cloneBuffer(buffer, isDeep) {\r\n  if (isDeep) {\r\n    return buffer.slice();\r\n  }\r\n  var length = buffer.length,\r\n      result = allocUnsafe ? allocUnsafe(length) : new buffer.constructor(length);\r\n\r\n  buffer.copy(result);\r\n  return result;\r\n}\r\n\r\nmodule.exports = cloneBuffer;\r\n", "/**\r\n * Copies the values of `source` to `array`.\r\n *\r\n * @private\r\n * @param {Array} source The array to copy values from.\r\n * @param {Array} [array=[]] The array to copy values to.\r\n * @returns {Array} Returns `array`.\r\n */\r\nfunction copyArray(source, array) {\r\n  var index = -1,\r\n      length = source.length;\r\n\r\n  array || (array = Array(length));\r\n  while (++index < length) {\r\n    array[index] = source[index];\r\n  }\r\n  return array;\r\n}\r\n\r\nmodule.exports = copyArray;\r\n", "var copyObject = require('./_copyObject'),\r\n    getSymbols = require('./_getSymbols');\r\n\r\n/**\r\n * Copies own symbols of `source` to `object`.\r\n *\r\n * @private\r\n * @param {Object} source The object to copy symbols from.\r\n * @param {Object} [object={}] The object to copy symbols to.\r\n * @returns {Object} Returns `object`.\r\n */\r\nfunction copySymbols(source, object) {\r\n  return copyObject(source, getSymbols(source), object);\r\n}\r\n\r\nmodule.exports = copySymbols;\r\n", "var overArg = require('./_overArg');\r\n\r\n/** Built-in value references. */\r\nvar getPrototype = overArg(Object.getPrototypeOf, Object);\r\n\r\nmodule.exports = getPrototype;\r\n", "var arrayPush = require('./_arrayPush'),\r\n    getPrototype = require('./_getPrototype'),\r\n    getSymbols = require('./_getSymbols'),\r\n    stubArray = require('./stubArray');\r\n\r\n/* Built-in method references for those with the same name as other `lodash` methods. */\r\nvar nativeGetSymbols = Object.getOwnPropertySymbols;\r\n\r\n/**\r\n * Creates an array of the own and inherited enumerable symbols of `object`.\r\n *\r\n * @private\r\n * @param {Object} object The object to query.\r\n * @returns {Array} Returns the array of symbols.\r\n */\r\nvar getSymbolsIn = !nativeGetSymbols ? stubArray : function(object) {\r\n  var result = [];\r\n  while (object) {\r\n    arrayPush(result, getSymbols(object));\r\n    object = getPrototype(object);\r\n  }\r\n  return result;\r\n};\r\n\r\nmodule.exports = getSymbolsIn;\r\n", "var copyObject = require('./_copyObject'),\r\n    getSymbolsIn = require('./_getSymbolsIn');\r\n\r\n/**\r\n * Copies own and inherited symbols of `source` to `object`.\r\n *\r\n * @private\r\n * @param {Object} source The object to copy symbols from.\r\n * @param {Object} [object={}] The object to copy symbols to.\r\n * @returns {Object} Returns `object`.\r\n */\r\nfunction copySymbolsIn(source, object) {\r\n  return copyObject(source, getSymbolsIn(source), object);\r\n}\r\n\r\nmodule.exports = copySymbolsIn;\r\n", "var baseGetAllKeys = require('./_baseGetAllKeys'),\r\n    getSymbolsIn = require('./_getSymbolsIn'),\r\n    keysIn = require('./keysIn');\r\n\r\n/**\r\n * Creates an array of own and inherited enumerable property names and\r\n * symbols of `object`.\r\n *\r\n * @private\r\n * @param {Object} object The object to query.\r\n * @returns {Array} Returns the array of property names and symbols.\r\n */\r\nfunction getAllKeysIn(object) {\r\n  return baseGetAllKeys(object, keysIn, getSymbolsIn);\r\n}\r\n\r\nmodule.exports = getAllKeysIn;\r\n", "/** Used for built-in method references. */\r\nvar objectProto = Object.prototype;\r\n\r\n/** Used to check objects for own properties. */\r\nvar hasOwnProperty = objectProto.hasOwnProperty;\r\n\r\n/**\r\n * Initializes an array clone.\r\n *\r\n * @private\r\n * @param {Array} array The array to clone.\r\n * @returns {Array} Returns the initialized clone.\r\n */\r\nfunction initCloneArray(array) {\r\n  var length = array.length,\r\n      result = new array.constructor(length);\r\n\r\n  // Add properties assigned by `RegExp#exec`.\r\n  if (length && typeof array[0] == 'string' && hasOwnProperty.call(array, 'index')) {\r\n    result.index = array.index;\r\n    result.input = array.input;\r\n  }\r\n  return result;\r\n}\r\n\r\nmodule.exports = initCloneArray;\r\n", "var Uint8Array = require('./_Uint8Array');\r\n\r\n/**\r\n * Creates a clone of `arrayBuffer`.\r\n *\r\n * @private\r\n * @param {ArrayBuffer} arrayBuffer The array buffer to clone.\r\n * @returns {ArrayBuffer} Returns the cloned array buffer.\r\n */\r\nfunction cloneArrayBuffer(arrayBuffer) {\r\n  var result = new arrayBuffer.constructor(arrayBuffer.byteLength);\r\n  new Uint8Array(result).set(new Uint8Array(arrayBuffer));\r\n  return result;\r\n}\r\n\r\nmodule.exports = cloneArrayBuffer;\r\n", "var cloneArrayBuffer = require('./_cloneArrayBuffer');\r\n\r\n/**\r\n * Creates a clone of `dataView`.\r\n *\r\n * @private\r\n * @param {Object} dataView The data view to clone.\r\n * @param {boolean} [isDeep] Specify a deep clone.\r\n * @returns {Object} Returns the cloned data view.\r\n */\r\nfunction cloneDataView(dataView, isDeep) {\r\n  var buffer = isDeep ? cloneArrayBuffer(dataView.buffer) : dataView.buffer;\r\n  return new dataView.constructor(buffer, dataView.byteOffset, dataView.byteLength);\r\n}\r\n\r\nmodule.exports = cloneDataView;\r\n", "/** Used to match `RegExp` flags from their coerced string values. */\r\nvar reFlags = /\\w*$/;\r\n\r\n/**\r\n * Creates a clone of `regexp`.\r\n *\r\n * @private\r\n * @param {Object} regexp The regexp to clone.\r\n * @returns {Object} Returns the cloned regexp.\r\n */\r\nfunction cloneRegExp(regexp) {\r\n  var result = new regexp.constructor(regexp.source, reFlags.exec(regexp));\r\n  result.lastIndex = regexp.lastIndex;\r\n  return result;\r\n}\r\n\r\nmodule.exports = cloneRegExp;\r\n", "var Symbol = require('./_Symbol');\r\n\r\n/** Used to convert symbols to primitives and strings. */\r\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\r\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\r\n\r\n/**\r\n * Creates a clone of the `symbol` object.\r\n *\r\n * @private\r\n * @param {Object} symbol The symbol object to clone.\r\n * @returns {Object} Returns the cloned symbol object.\r\n */\r\nfunction cloneSymbol(symbol) {\r\n  return symbolValueOf ? Object(symbolValueOf.call(symbol)) : {};\r\n}\r\n\r\nmodule.exports = cloneSymbol;\r\n", "var cloneArrayBuffer = require('./_cloneArrayBuffer');\r\n\r\n/**\r\n * Creates a clone of `typedArray`.\r\n *\r\n * @private\r\n * @param {Object} typedArray The typed array to clone.\r\n * @param {boolean} [isDeep] Specify a deep clone.\r\n * @returns {Object} Returns the cloned typed array.\r\n */\r\nfunction cloneTypedArray(typedArray, isDeep) {\r\n  var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;\r\n  return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);\r\n}\r\n\r\nmodule.exports = cloneTypedArray;\r\n", "var cloneArrayBuffer = require('./_cloneArrayBuffer'),\r\n    cloneDataView = require('./_cloneDataView'),\r\n    cloneRegExp = require('./_cloneRegExp'),\r\n    cloneSymbol = require('./_cloneSymbol'),\r\n    cloneTypedArray = require('./_cloneTypedArray');\r\n\r\n/** `Object#toString` result references. */\r\nvar boolTag = '[object Boolean]',\r\n    dateTag = '[object Date]',\r\n    mapTag = '[object Map]',\r\n    numberTag = '[object Number]',\r\n    regexpTag = '[object RegExp]',\r\n    setTag = '[object Set]',\r\n    stringTag = '[object String]',\r\n    symbolTag = '[object Symbol]';\r\n\r\nvar arrayBufferTag = '[object ArrayBuffer]',\r\n    dataViewTag = '[object DataView]',\r\n    float32Tag = '[object Float32Array]',\r\n    float64Tag = '[object Float64Array]',\r\n    int8Tag = '[object Int8Array]',\r\n    int16Tag = '[object Int16Array]',\r\n    int32Tag = '[object Int32Array]',\r\n    uint8Tag = '[object Uint8Array]',\r\n    uint8ClampedTag = '[object Uint8ClampedArray]',\r\n    uint16Tag = '[object Uint16Array]',\r\n    uint32Tag = '[object Uint32Array]';\r\n\r\n/**\r\n * Initializes an object clone based on its `toStringTag`.\r\n *\r\n * **Note:** This function only supports cloning values with tags of\r\n * `Boolean`, `Date`, `Error`, `Map`, `Number`, `RegExp`, `Set`, or `String`.\r\n *\r\n * @private\r\n * @param {Object} object The object to clone.\r\n * @param {string} tag The `toStringTag` of the object to clone.\r\n * @param {boolean} [isDeep] Specify a deep clone.\r\n * @returns {Object} Returns the initialized clone.\r\n */\r\nfunction initCloneByTag(object, tag, isDeep) {\r\n  var Ctor = object.constructor;\r\n  switch (tag) {\r\n    case arrayBufferTag:\r\n      return cloneArrayBuffer(object);\r\n\r\n    case boolTag:\r\n    case dateTag:\r\n      return new Ctor(+object);\r\n\r\n    case dataViewTag:\r\n      return cloneDataView(object, isDeep);\r\n\r\n    case float32Tag: case float64Tag:\r\n    case int8Tag: case int16Tag: case int32Tag:\r\n    case uint8Tag: case uint8ClampedTag: case uint16Tag: case uint32Tag:\r\n      return cloneTypedArray(object, isDeep);\r\n\r\n    case mapTag:\r\n      return new Ctor;\r\n\r\n    case numberTag:\r\n    case stringTag:\r\n      return new Ctor(object);\r\n\r\n    case regexpTag:\r\n      return cloneRegExp(object);\r\n\r\n    case setTag:\r\n      return new Ctor;\r\n\r\n    case symbolTag:\r\n      return cloneSymbol(object);\r\n  }\r\n}\r\n\r\nmodule.exports = initCloneByTag;\r\n", "var isObject = require('./isObject');\r\n\r\n/** Built-in value references. */\r\nvar objectCreate = Object.create;\r\n\r\n/**\r\n * The base implementation of `_.create` without support for assigning\r\n * properties to the created object.\r\n *\r\n * @private\r\n * @param {Object} proto The object to inherit from.\r\n * @returns {Object} Returns the new object.\r\n */\r\nvar baseCreate = (function() {\r\n  function object() {}\r\n  return function(proto) {\r\n    if (!isObject(proto)) {\r\n      return {};\r\n    }\r\n    if (objectCreate) {\r\n      return objectCreate(proto);\r\n    }\r\n    object.prototype = proto;\r\n    var result = new object;\r\n    object.prototype = undefined;\r\n    return result;\r\n  };\r\n}());\r\n\r\nmodule.exports = baseCreate;\r\n", "var baseCreate = require('./_baseCreate'),\r\n    getPrototype = require('./_getPrototype'),\r\n    isPrototype = require('./_isPrototype');\r\n\r\n/**\r\n * Initializes an object clone.\r\n *\r\n * @private\r\n * @param {Object} object The object to clone.\r\n * @returns {Object} Returns the initialized clone.\r\n */\r\nfunction initCloneObject(object) {\r\n  return (typeof object.constructor == 'function' && !isPrototype(object))\r\n    ? baseCreate(getPrototype(object))\r\n    : {};\r\n}\r\n\r\nmodule.exports = initCloneObject;\r\n", "var getTag = require('./_getTag'),\r\n    isObjectLike = require('./isObjectLike');\r\n\r\n/** `Object#toString` result references. */\r\nvar mapTag = '[object Map]';\r\n\r\n/**\r\n * The base implementation of `_.isMap` without Node.js optimizations.\r\n *\r\n * @private\r\n * @param {*} value The value to check.\r\n * @returns {boolean} Returns `true` if `value` is a map, else `false`.\r\n */\r\nfunction baseIsMap(value) {\r\n  return isObjectLike(value) && getTag(value) == mapTag;\r\n}\r\n\r\nmodule.exports = baseIsMap;\r\n", "var baseIsMap = require('./_baseIsMap'),\r\n    baseUnary = require('./_baseUnary'),\r\n    nodeUtil = require('./_nodeUtil');\r\n\r\n/* Node.js helper references. */\r\nvar nodeIsMap = nodeUtil && nodeUtil.isMap;\r\n\r\n/**\r\n * Checks if `value` is classified as a `Map` object.\r\n *\r\n * @static\r\n * @memberOf _\r\n * @since 4.3.0\r\n * @category Lang\r\n * @param {*} value The value to check.\r\n * @returns {boolean} Returns `true` if `value` is a map, else `false`.\r\n * @example\r\n *\r\n * _.isMap(new Map);\r\n * // => true\r\n *\r\n * _.isMap(new WeakMap);\r\n * // => false\r\n */\r\nvar isMap = nodeIsMap ? baseUnary(nodeIsMap) : baseIsMap;\r\n\r\nmodule.exports = isMap;\r\n", "var getTag = require('./_getTag'),\r\n    isObjectLike = require('./isObjectLike');\r\n\r\n/** `Object#toString` result references. */\r\nvar setTag = '[object Set]';\r\n\r\n/**\r\n * The base implementation of `_.isSet` without Node.js optimizations.\r\n *\r\n * @private\r\n * @param {*} value The value to check.\r\n * @returns {boolean} Returns `true` if `value` is a set, else `false`.\r\n */\r\nfunction baseIsSet(value) {\r\n  return isObjectLike(value) && getTag(value) == setTag;\r\n}\r\n\r\nmodule.exports = baseIsSet;\r\n", "var baseIsSet = require('./_baseIsSet'),\r\n    baseUnary = require('./_baseUnary'),\r\n    nodeUtil = require('./_nodeUtil');\r\n\r\n/* Node.js helper references. */\r\nvar nodeIsSet = nodeUtil && nodeUtil.isSet;\r\n\r\n/**\r\n * Checks if `value` is classified as a `Set` object.\r\n *\r\n * @static\r\n * @memberOf _\r\n * @since 4.3.0\r\n * @category Lang\r\n * @param {*} value The value to check.\r\n * @returns {boolean} Returns `true` if `value` is a set, else `false`.\r\n * @example\r\n *\r\n * _.isSet(new Set);\r\n * // => true\r\n *\r\n * _.isSet(new WeakSet);\r\n * // => false\r\n */\r\nvar isSet = nodeIsSet ? baseUnary(nodeIsSet) : baseIsSet;\r\n\r\nmodule.exports = isSet;\r\n", "var Stack = require('./_Stack'),\r\n    arrayEach = require('./_arrayEach'),\r\n    assignValue = require('./_assignValue'),\r\n    baseAssign = require('./_baseAssign'),\r\n    baseAssignIn = require('./_baseAssignIn'),\r\n    cloneBuffer = require('./_cloneBuffer'),\r\n    copyArray = require('./_copyArray'),\r\n    copySymbols = require('./_copySymbols'),\r\n    copySymbolsIn = require('./_copySymbolsIn'),\r\n    getAllKeys = require('./_getAllKeys'),\r\n    getAllKeysIn = require('./_getAllKeysIn'),\r\n    getTag = require('./_getTag'),\r\n    initCloneArray = require('./_initCloneArray'),\r\n    initCloneByTag = require('./_initCloneByTag'),\r\n    initCloneObject = require('./_initCloneObject'),\r\n    isArray = require('./isArray'),\r\n    isBuffer = require('./isBuffer'),\r\n    isMap = require('./isMap'),\r\n    isObject = require('./isObject'),\r\n    isSet = require('./isSet'),\r\n    keys = require('./keys'),\r\n    keysIn = require('./keysIn');\r\n\r\n/** Used to compose bitmasks for cloning. */\r\nvar CLONE_DEEP_FLAG = 1,\r\n    CLONE_FLAT_FLAG = 2,\r\n    CLONE_SYMBOLS_FLAG = 4;\r\n\r\n/** `Object#toString` result references. */\r\nvar argsTag = '[object Arguments]',\r\n    arrayTag = '[object Array]',\r\n    boolTag = '[object Boolean]',\r\n    dateTag = '[object Date]',\r\n    errorTag = '[object Error]',\r\n    funcTag = '[object Function]',\r\n    genTag = '[object GeneratorFunction]',\r\n    mapTag = '[object Map]',\r\n    numberTag = '[object Number]',\r\n    objectTag = '[object Object]',\r\n    regexpTag = '[object RegExp]',\r\n    setTag = '[object Set]',\r\n    stringTag = '[object String]',\r\n    symbolTag = '[object Symbol]',\r\n    weakMapTag = '[object WeakMap]';\r\n\r\nvar arrayBufferTag = '[object ArrayBuffer]',\r\n    dataViewTag = '[object DataView]',\r\n    float32Tag = '[object Float32Array]',\r\n    float64Tag = '[object Float64Array]',\r\n    int8Tag = '[object Int8Array]',\r\n    int16Tag = '[object Int16Array]',\r\n    int32Tag = '[object Int32Array]',\r\n    uint8Tag = '[object Uint8Array]',\r\n    uint8ClampedTag = '[object Uint8ClampedArray]',\r\n    uint16Tag = '[object Uint16Array]',\r\n    uint32Tag = '[object Uint32Array]';\r\n\r\n/** Used to identify `toStringTag` values supported by `_.clone`. */\r\nvar cloneableTags = {};\r\ncloneableTags[argsTag] = cloneableTags[arrayTag] =\r\ncloneableTags[arrayBufferTag] = cloneableTags[dataViewTag] =\r\ncloneableTags[boolTag] = cloneableTags[dateTag] =\r\ncloneableTags[float32Tag] = cloneableTags[float64Tag] =\r\ncloneableTags[int8Tag] = cloneableTags[int16Tag] =\r\ncloneableTags[int32Tag] = cloneableTags[mapTag] =\r\ncloneableTags[numberTag] = cloneableTags[objectTag] =\r\ncloneableTags[regexpTag] = cloneableTags[setTag] =\r\ncloneableTags[stringTag] = cloneableTags[symbolTag] =\r\ncloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] =\r\ncloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;\r\ncloneableTags[errorTag] = cloneableTags[funcTag] =\r\ncloneableTags[weakMapTag] = false;\r\n\r\n/**\r\n * The base implementation of `_.clone` and `_.cloneDeep` which tracks\r\n * traversed objects.\r\n *\r\n * @private\r\n * @param {*} value The value to clone.\r\n * @param {boolean} bitmask The bitmask flags.\r\n *  1 - Deep clone\r\n *  2 - Flatten inherited properties\r\n *  4 - Clone symbols\r\n * @param {Function} [customizer] The function to customize cloning.\r\n * @param {string} [key] The key of `value`.\r\n * @param {Object} [object] The parent object of `value`.\r\n * @param {Object} [stack] Tracks traversed objects and their clone counterparts.\r\n * @returns {*} Returns the cloned value.\r\n */\r\nfunction baseClone(value, bitmask, customizer, key, object, stack) {\r\n  var result,\r\n      isDeep = bitmask & CLONE_DEEP_FLAG,\r\n      isFlat = bitmask & CLONE_FLAT_FLAG,\r\n      isFull = bitmask & CLONE_SYMBOLS_FLAG;\r\n\r\n  if (customizer) {\r\n    result = object ? customizer(value, key, object, stack) : customizer(value);\r\n  }\r\n  if (result !== undefined) {\r\n    return result;\r\n  }\r\n  if (!isObject(value)) {\r\n    return value;\r\n  }\r\n  var isArr = isArray(value);\r\n  if (isArr) {\r\n    result = initCloneArray(value);\r\n    if (!isDeep) {\r\n      return copyArray(value, result);\r\n    }\r\n  } else {\r\n    var tag = getTag(value),\r\n        isFunc = tag == funcTag || tag == genTag;\r\n\r\n    if (isBuffer(value)) {\r\n      return cloneBuffer(value, isDeep);\r\n    }\r\n    if (tag == objectTag || tag == argsTag || (isFunc && !object)) {\r\n      result = (isFlat || isFunc) ? {} : initCloneObject(value);\r\n      if (!isDeep) {\r\n        return isFlat\r\n          ? copySymbolsIn(value, baseAssignIn(result, value))\r\n          : copySymbols(value, baseAssign(result, value));\r\n      }\r\n    } else {\r\n      if (!cloneableTags[tag]) {\r\n        return object ? value : {};\r\n      }\r\n      result = initCloneByTag(value, tag, isDeep);\r\n    }\r\n  }\r\n  // Check for circular references and return its corresponding clone.\r\n  stack || (stack = new Stack);\r\n  var stacked = stack.get(value);\r\n  if (stacked) {\r\n    return stacked;\r\n  }\r\n  stack.set(value, result);\r\n\r\n  if (isSet(value)) {\r\n    value.forEach(function(subValue) {\r\n      result.add(baseClone(subValue, bitmask, customizer, subValue, value, stack));\r\n    });\r\n  } else if (isMap(value)) {\r\n    value.forEach(function(subValue, key) {\r\n      result.set(key, baseClone(subValue, bitmask, customizer, key, value, stack));\r\n    });\r\n  }\r\n\r\n  var keysFunc = isFull\r\n    ? (isFlat ? getAllKeysIn : getAllKeys)\r\n    : (isFlat ? keysIn : keys);\r\n\r\n  var props = isArr ? undefined : keysFunc(value);\r\n  arrayEach(props || value, function(subValue, key) {\r\n    if (props) {\r\n      key = subValue;\r\n      subValue = value[key];\r\n    }\r\n    // Recursively populate clone (susceptible to call stack limits).\r\n    assignValue(result, key, baseClone(subValue, bitmask, customizer, key, value, stack));\r\n  });\r\n  return result;\r\n}\r\n\r\nmodule.exports = baseClone;\r\n", "var baseClone = require('./_baseClone');\r\n\r\n/** Used to compose bitmasks for cloning. */\r\nvar CLONE_SYMBOLS_FLAG = 4;\r\n\r\n/**\r\n * Creates a shallow clone of `value`.\r\n *\r\n * **Note:** This method is loosely based on the\r\n * [structured clone algorithm](https://mdn.io/Structured_clone_algorithm)\r\n * and supports cloning arrays, array buffers, booleans, date objects, maps,\r\n * numbers, `Object` objects, regexes, sets, strings, symbols, and typed\r\n * arrays. The own enumerable properties of `arguments` objects are cloned\r\n * as plain objects. An empty object is returned for uncloneable values such\r\n * as error objects, functions, DOM nodes, and WeakMaps.\r\n *\r\n * @static\r\n * @memberOf _\r\n * @since 0.1.0\r\n * @category Lang\r\n * @param {*} value The value to clone.\r\n * @returns {*} Returns the cloned value.\r\n * @see _.cloneDeep\r\n * @example\r\n *\r\n * var objects = [{ 'a': 1 }, { 'b': 2 }];\r\n *\r\n * var shallow = _.clone(objects);\r\n * console.log(shallow[0] === objects[0]);\r\n * // => true\r\n */\r\nfunction clone(value) {\r\n  return baseClone(value, CLONE_SYMBOLS_FLAG);\r\n}\r\n\r\nmodule.exports = clone;\r\n", "export function PRINT_ERROR(msg: string) {\r\n  /* istanbul ignore else - can't override global.console in node.js */\r\n  if (console && console.error) {\r\n    console.error(`Error: ${msg}`)\r\n  }\r\n}\r\n\r\nexport function PRINT_WARNING(msg: string) {\r\n  /* istanbul ignore else - can't override global.console in node.js*/\r\n  if (console && console.warn) {\r\n    // TODO: modify docs accordingly\r\n    console.warn(`Warning: ${msg}`)\r\n  }\r\n}\r\n", "export function timer<T>(func: () => T): { time: number; value: T } {\r\n  const start = new Date().getTime()\r\n  const val = func()\r\n  const end = new Date().getTime()\r\n  const total = end - start\r\n  return { time: total, value: val }\r\n}\r\n", "// based on: https://github.com/petkaantonov/bluebird/blob/b97c0d2d487e8c5076e8bd897e0dcd4622d31846/src/util.js#L201-L216\r\nexport function toFastProperties(toBecomeFast: any) {\r\n  function FakeConstructor() {}\r\n\r\n  // If our object is used as a constructor it would receive\r\n  FakeConstructor.prototype = toBecomeFast\r\n  const fakeInstance = new (FakeConstructor as any)()\r\n\r\n  function fakeAccess() {\r\n    return typeof fakeInstance.bar\r\n  }\r\n\r\n  // help V8 understand this is a \"real\" prototype by actually using\r\n  // the fake instance.\r\n  fakeAccess()\r\n  fakeAccess()\r\n\r\n  // Always true condition to suppress the Firefox warning of unreachable\r\n  // code after a return statement.\r\n  if (1) return toBecomeFast\r\n\r\n  // Eval prevents optimization of this method (even though this is dead code)\r\n  /* istanbul ignore next */\r\n  // tslint:disable-next-line\r\n  eval(toBecomeFast)\r\n}\r\n", "export { PRINT_WARNING, PRINT_ERROR } from \"./print\"\r\nexport { timer } from \"./timer\"\r\nexport { toFastProperties } from \"./to-fast-properties\"\r\n", "/**\r\n * The base implementation of `_.slice` without an iteratee call guard.\r\n *\r\n * @private\r\n * @param {Array} array The array to slice.\r\n * @param {number} [start=0] The start position.\r\n * @param {number} [end=array.length] The end position.\r\n * @returns {Array} Returns the slice of `array`.\r\n */\r\nfunction baseSlice(array, start, end) {\r\n  var index = -1,\r\n      length = array.length;\r\n\r\n  if (start < 0) {\r\n    start = -start > length ? 0 : (length + start);\r\n  }\r\n  end = end > length ? length : end;\r\n  if (end < 0) {\r\n    end += length;\r\n  }\r\n  length = start > end ? 0 : ((end - start) >>> 0);\r\n  start >>>= 0;\r\n\r\n  var result = Array(length);\r\n  while (++index < length) {\r\n    result[index] = array[index + start];\r\n  }\r\n  return result;\r\n}\r\n\r\nmodule.exports = baseSlice;\r\n", "/** Used to match a single whitespace character. */\r\nvar reWhitespace = /\\s/;\r\n\r\n/**\r\n * Used by `_.trim` and `_.trimEnd` to get the index of the last non-whitespace\r\n * character of `string`.\r\n *\r\n * @private\r\n * @param {string} string The string to inspect.\r\n * @returns {number} Returns the index of the last non-whitespace character.\r\n */\r\nfunction trimmedEndIndex(string) {\r\n  var index = string.length;\r\n\r\n  while (index-- && reWhitespace.test(string.charAt(index))) {}\r\n  return index;\r\n}\r\n\r\nmodule.exports = trimmedEndIndex;\r\n", "var trimmedEndIndex = require('./_trimmedEndIndex');\r\n\r\n/** Used to match leading whitespace. */\r\nvar reTrimStart = /^\\s+/;\r\n\r\n/**\r\n * The base implementation of `_.trim`.\r\n *\r\n * @private\r\n * @param {string} string The string to trim.\r\n * @returns {string} Returns the trimmed string.\r\n */\r\nfunction baseTrim(string) {\r\n  return string\r\n    ? string.slice(0, trimmedEndIndex(string) + 1).replace(reTrimStart, '')\r\n    : string;\r\n}\r\n\r\nmodule.exports = baseTrim;\r\n", "var baseTrim = require('./_baseTrim'),\r\n    isObject = require('./isObject'),\r\n    isSymbol = require('./isSymbol');\r\n\r\n/** Used as references for various `Number` constants. */\r\nvar NAN = 0 / 0;\r\n\r\n/** Used to detect bad signed hexadecimal string values. */\r\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\r\n\r\n/** Used to detect binary string values. */\r\nvar reIsBinary = /^0b[01]+$/i;\r\n\r\n/** Used to detect octal string values. */\r\nvar reIsOctal = /^0o[0-7]+$/i;\r\n\r\n/** Built-in method references without a dependency on `root`. */\r\nvar freeParseInt = parseInt;\r\n\r\n/**\r\n * Converts `value` to a number.\r\n *\r\n * @static\r\n * @memberOf _\r\n * @since 4.0.0\r\n * @category Lang\r\n * @param {*} value The value to process.\r\n * @returns {number} Returns the number.\r\n * @example\r\n *\r\n * _.toNumber(3.2);\r\n * // => 3.2\r\n *\r\n * _.toNumber(Number.MIN_VALUE);\r\n * // => 5e-324\r\n *\r\n * _.toNumber(Infinity);\r\n * // => Infinity\r\n *\r\n * _.toNumber('3.2');\r\n * // => 3.2\r\n */\r\nfunction toNumber(value) {\r\n  if (typeof value == 'number') {\r\n    return value;\r\n  }\r\n  if (isSymbol(value)) {\r\n    return NAN;\r\n  }\r\n  if (isObject(value)) {\r\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\r\n    value = isObject(other) ? (other + '') : other;\r\n  }\r\n  if (typeof value != 'string') {\r\n    return value === 0 ? value : +value;\r\n  }\r\n  value = baseTrim(value);\r\n  var isBinary = reIsBinary.test(value);\r\n  return (isBinary || reIsOctal.test(value))\r\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\r\n    : (reIsBadHex.test(value) ? NAN : +value);\r\n}\r\n\r\nmodule.exports = toNumber;\r\n", "var toNumber = require('./toNumber');\r\n\r\n/** Used as references for various `Number` constants. */\r\nvar INFINITY = 1 / 0,\r\n    MAX_INTEGER = 1.7976931348623157e+308;\r\n\r\n/**\r\n * Converts `value` to a finite number.\r\n *\r\n * @static\r\n * @memberOf _\r\n * @since 4.12.0\r\n * @category Lang\r\n * @param {*} value The value to convert.\r\n * @returns {number} Returns the converted number.\r\n * @example\r\n *\r\n * _.toFinite(3.2);\r\n * // => 3.2\r\n *\r\n * _.toFinite(Number.MIN_VALUE);\r\n * // => 5e-324\r\n *\r\n * _.toFinite(Infinity);\r\n * // => 1.7976931348623157e+308\r\n *\r\n * _.toFinite('3.2');\r\n * // => 3.2\r\n */\r\nfunction toFinite(value) {\r\n  if (!value) {\r\n    return value === 0 ? value : 0;\r\n  }\r\n  value = toNumber(value);\r\n  if (value === INFINITY || value === -INFINITY) {\r\n    var sign = (value < 0 ? -1 : 1);\r\n    return sign * MAX_INTEGER;\r\n  }\r\n  return value === value ? value : 0;\r\n}\r\n\r\nmodule.exports = toFinite;\r\n", "var toFinite = require('./toFinite');\r\n\r\n/**\r\n * Converts `value` to an integer.\r\n *\r\n * **Note:** This method is loosely based on\r\n * [`ToInteger`](http://www.ecma-international.org/ecma-262/7.0/#sec-tointeger).\r\n *\r\n * @static\r\n * @memberOf _\r\n * @since 4.0.0\r\n * @category Lang\r\n * @param {*} value The value to convert.\r\n * @returns {number} Returns the converted integer.\r\n * @example\r\n *\r\n * _.toInteger(3.2);\r\n * // => 3\r\n *\r\n * _.toInteger(Number.MIN_VALUE);\r\n * // => 0\r\n *\r\n * _.toInteger(Infinity);\r\n * // => 1.7976931348623157e+308\r\n *\r\n * _.toInteger('3.2');\r\n * // => 3\r\n */\r\nfunction toInteger(value) {\r\n  var result = toFinite(value),\r\n      remainder = result % 1;\r\n\r\n  return result === result ? (remainder ? result - remainder : result) : 0;\r\n}\r\n\r\nmodule.exports = toInteger;\r\n", "var baseSlice = require('./_baseSlice'),\r\n    toInteger = require('./toInteger');\r\n\r\n/**\r\n * Creates a slice of `array` with `n` elements dropped from the beginning.\r\n *\r\n * @static\r\n * @memberOf _\r\n * @since 0.5.0\r\n * @category Array\r\n * @param {Array} array The array to query.\r\n * @param {number} [n=1] The number of elements to drop.\r\n * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\r\n * @returns {Array} Returns the slice of `array`.\r\n * @example\r\n *\r\n * _.drop([1, 2, 3]);\r\n * // => [2, 3]\r\n *\r\n * _.drop([1, 2, 3], 2);\r\n * // => [3]\r\n *\r\n * _.drop([1, 2, 3], 5);\r\n * // => []\r\n *\r\n * _.drop([1, 2, 3], 0);\r\n * // => [1, 2, 3]\r\n */\r\nfunction drop(array, n, guard) {\r\n  var length = array == null ? 0 : array.length;\r\n  if (!length) {\r\n    return [];\r\n  }\r\n  n = (guard || n === undefined) ? 1 : toInteger(n);\r\n  return baseSlice(array, n < 0 ? 0 : n, length);\r\n}\r\n\r\nmodule.exports = drop;\r\n", "var baseGetTag = require('./_baseGetTag'),\r\n    isArray = require('./isArray'),\r\n    isObjectLike = require('./isObjectLike');\r\n\r\n/** `Object#toString` result references. */\r\nvar stringTag = '[object String]';\r\n\r\n/**\r\n * Checks if `value` is classified as a `String` primitive or object.\r\n *\r\n * @static\r\n * @since 0.1.0\r\n * @memberOf _\r\n * @category Lang\r\n * @param {*} value The value to check.\r\n * @returns {boolean} Returns `true` if `value` is a string, else `false`.\r\n * @example\r\n *\r\n * _.isString('abc');\r\n * // => true\r\n *\r\n * _.isString(1);\r\n * // => false\r\n */\r\nfunction isString(value) {\r\n  return typeof value == 'string' ||\r\n    (!isArray(value) && isObjectLike(value) && baseGetTag(value) == stringTag);\r\n}\r\n\r\nmodule.exports = isString;\r\n", "var baseGetTag = require('./_baseGetTag'),\r\n    isObjectLike = require('./isObjectLike');\r\n\r\n/** `Object#toString` result references. */\r\nvar regexpTag = '[object RegExp]';\r\n\r\n/**\r\n * The base implementation of `_.isRegExp` without Node.js optimizations.\r\n *\r\n * @private\r\n * @param {*} value The value to check.\r\n * @returns {boolean} Returns `true` if `value` is a regexp, else `false`.\r\n */\r\nfunction baseIsRegExp(value) {\r\n  return isObjectLike(value) && baseGetTag(value) == regexpTag;\r\n}\r\n\r\nmodule.exports = baseIsRegExp;\r\n", "var baseIsRegExp = require('./_baseIsRegExp'),\r\n    baseUnary = require('./_baseUnary'),\r\n    nodeUtil = require('./_nodeUtil');\r\n\r\n/* Node.js helper references. */\r\nvar nodeIsRegExp = nodeUtil && nodeUtil.isRegExp;\r\n\r\n/**\r\n * Checks if `value` is classified as a `RegExp` object.\r\n *\r\n * @static\r\n * @memberOf _\r\n * @since 0.1.0\r\n * @category Lang\r\n * @param {*} value The value to check.\r\n * @returns {boolean} Returns `true` if `value` is a regexp, else `false`.\r\n * @example\r\n *\r\n * _.isRegExp(/abc/);\r\n * // => true\r\n *\r\n * _.isRegExp('/abc/');\r\n * // => false\r\n */\r\nvar isRegExp = nodeIsRegExp ? baseUnary(nodeIsRegExp) : baseIsRegExp;\r\n\r\nmodule.exports = isRegExp;\r\n", "var assignValue = require('./_assignValue'),\r\n    castPath = require('./_castPath'),\r\n    isIndex = require('./_isIndex'),\r\n    isObject = require('./isObject'),\r\n    toKey = require('./_toKey');\r\n\r\n/**\r\n * The base implementation of `_.set`.\r\n *\r\n * @private\r\n * @param {Object} object The object to modify.\r\n * @param {Array|string} path The path of the property to set.\r\n * @param {*} value The value to set.\r\n * @param {Function} [customizer] The function to customize path creation.\r\n * @returns {Object} Returns `object`.\r\n */\r\nfunction baseSet(object, path, value, customizer) {\r\n  if (!isObject(object)) {\r\n    return object;\r\n  }\r\n  path = castPath(path, object);\r\n\r\n  var index = -1,\r\n      length = path.length,\r\n      lastIndex = length - 1,\r\n      nested = object;\r\n\r\n  while (nested != null && ++index < length) {\r\n    var key = toKey(path[index]),\r\n        newValue = value;\r\n\r\n    if (key === '__proto__' || key === 'constructor' || key === 'prototype') {\r\n      return object;\r\n    }\r\n\r\n    if (index != lastIndex) {\r\n      var objValue = nested[key];\r\n      newValue = customizer ? customizer(objValue, key, nested) : undefined;\r\n      if (newValue === undefined) {\r\n        newValue = isObject(objValue)\r\n          ? objValue\r\n          : (isIndex(path[index + 1]) ? [] : {});\r\n      }\r\n    }\r\n    assignValue(nested, key, newValue);\r\n    nested = nested[key];\r\n  }\r\n  return object;\r\n}\r\n\r\nmodule.exports = baseSet;\r\n", "var baseGet = require('./_baseGet'),\r\n    baseSet = require('./_baseSet'),\r\n    castPath = require('./_castPath');\r\n\r\n/**\r\n * The base implementation of  `_.pickBy` without support for iteratee shorthands.\r\n *\r\n * @private\r\n * @param {Object} object The source object.\r\n * @param {string[]} paths The property paths to pick.\r\n * @param {Function} predicate The function invoked per property.\r\n * @returns {Object} Returns the new object.\r\n */\r\nfunction basePickBy(object, paths, predicate) {\r\n  var index = -1,\r\n      length = paths.length,\r\n      result = {};\r\n\r\n  while (++index < length) {\r\n    var path = paths[index],\r\n        value = baseGet(object, path);\r\n\r\n    if (predicate(value, path)) {\r\n      baseSet(result, castPath(path, object), value);\r\n    }\r\n  }\r\n  return result;\r\n}\r\n\r\nmodule.exports = basePickBy;\r\n", "var arrayMap = require('./_arrayMap'),\r\n    baseIteratee = require('./_baseIteratee'),\r\n    basePickBy = require('./_basePickBy'),\r\n    getAllKeysIn = require('./_getAllKeysIn');\r\n\r\n/**\r\n * Creates an object composed of the `object` properties `predicate` returns\r\n * truthy for. The predicate is invoked with two arguments: (value, key).\r\n *\r\n * @static\r\n * @memberOf _\r\n * @since 4.0.0\r\n * @category Object\r\n * @param {Object} object The source object.\r\n * @param {Function} [predicate=_.identity] The function invoked per property.\r\n * @returns {Object} Returns the new object.\r\n * @example\r\n *\r\n * var object = { 'a': 1, 'b': '2', 'c': 3 };\r\n *\r\n * _.pickBy(object, _.isNumber);\r\n * // => { 'a': 1, 'c': 3 }\r\n */\r\nfunction pickBy(object, predicate) {\r\n  if (object == null) {\r\n    return {};\r\n  }\r\n  var props = arrayMap(getAllKeysIn(object), function(prop) {\r\n    return [prop];\r\n  });\r\n  predicate = baseIteratee(predicate);\r\n  return basePickBy(object, props, function(value, path) {\r\n    return predicate(value, path[0]);\r\n  });\r\n}\r\n\r\nmodule.exports = pickBy;\r\n", "/**\r\n * A faster alternative to `Function#apply`, this function invokes `func`\r\n * with the `this` binding of `thisArg` and the arguments of `args`.\r\n *\r\n * @private\r\n * @param {Function} func The function to invoke.\r\n * @param {*} thisArg The `this` binding of `func`.\r\n * @param {Array} args The arguments to invoke `func` with.\r\n * @returns {*} Returns the result of `func`.\r\n */\r\nfunction apply(func, thisArg, args) {\r\n  switch (args.length) {\r\n    case 0: return func.call(thisArg);\r\n    case 1: return func.call(thisArg, args[0]);\r\n    case 2: return func.call(thisArg, args[0], args[1]);\r\n    case 3: return func.call(thisArg, args[0], args[1], args[2]);\r\n  }\r\n  return func.apply(thisArg, args);\r\n}\r\n\r\nmodule.exports = apply;\r\n", "var apply = require('./_apply');\r\n\r\n/* Built-in method references for those with the same name as other `lodash` methods. */\r\nvar nativeMax = Math.max;\r\n\r\n/**\r\n * A specialized version of `baseRest` which transforms the rest array.\r\n *\r\n * @private\r\n * @param {Function} func The function to apply a rest parameter to.\r\n * @param {number} [start=func.length-1] The start position of the rest parameter.\r\n * @param {Function} transform The rest array transform.\r\n * @returns {Function} Returns the new function.\r\n */\r\nfunction overRest(func, start, transform) {\r\n  start = nativeMax(start === undefined ? (func.length - 1) : start, 0);\r\n  return function() {\r\n    var args = arguments,\r\n        index = -1,\r\n        length = nativeMax(args.length - start, 0),\r\n        array = Array(length);\r\n\r\n    while (++index < length) {\r\n      array[index] = args[start + index];\r\n    }\r\n    index = -1;\r\n    var otherArgs = Array(start + 1);\r\n    while (++index < start) {\r\n      otherArgs[index] = args[index];\r\n    }\r\n    otherArgs[start] = transform(array);\r\n    return apply(func, this, otherArgs);\r\n  };\r\n}\r\n\r\nmodule.exports = overRest;\r\n", "/**\r\n * Creates a function that returns `value`.\r\n *\r\n * @static\r\n * @memberOf _\r\n * @since 2.4.0\r\n * @category Util\r\n * @param {*} value The value to return from the new function.\r\n * @returns {Function} Returns the new constant function.\r\n * @example\r\n *\r\n * var objects = _.times(2, _.constant({ 'a': 1 }));\r\n *\r\n * console.log(objects);\r\n * // => [{ 'a': 1 }, { 'a': 1 }]\r\n *\r\n * console.log(objects[0] === objects[1]);\r\n * // => true\r\n */\r\nfunction constant(value) {\r\n  return function() {\r\n    return value;\r\n  };\r\n}\r\n\r\nmodule.exports = constant;\r\n", "var constant = require('./constant'),\r\n    defineProperty = require('./_defineProperty'),\r\n    identity = require('./identity');\r\n\r\n/**\r\n * The base implementation of `setToString` without support for hot loop shorting.\r\n *\r\n * @private\r\n * @param {Function} func The function to modify.\r\n * @param {Function} string The `toString` result.\r\n * @returns {Function} Returns `func`.\r\n */\r\nvar baseSetToString = !defineProperty ? identity : function(func, string) {\r\n  return defineProperty(func, 'toString', {\r\n    'configurable': true,\r\n    'enumerable': false,\r\n    'value': constant(string),\r\n    'writable': true\r\n  });\r\n};\r\n\r\nmodule.exports = baseSetToString;\r\n", "/** Used to detect hot functions by number of calls within a span of milliseconds. */\r\nvar HOT_COUNT = 800,\r\n    HOT_SPAN = 16;\r\n\r\n/* Built-in method references for those with the same name as other `lodash` methods. */\r\nvar nativeNow = Date.now;\r\n\r\n/**\r\n * Creates a function that'll short out and invoke `identity` instead\r\n * of `func` when it's called `HOT_COUNT` or more times in `HOT_SPAN`\r\n * milliseconds.\r\n *\r\n * @private\r\n * @param {Function} func The function to restrict.\r\n * @returns {Function} Returns the new shortable function.\r\n */\r\nfunction shortOut(func) {\r\n  var count = 0,\r\n      lastCalled = 0;\r\n\r\n  return function() {\r\n    var stamp = nativeNow(),\r\n        remaining = HOT_SPAN - (stamp - lastCalled);\r\n\r\n    lastCalled = stamp;\r\n    if (remaining > 0) {\r\n      if (++count >= HOT_COUNT) {\r\n        return arguments[0];\r\n      }\r\n    } else {\r\n      count = 0;\r\n    }\r\n    return func.apply(undefined, arguments);\r\n  };\r\n}\r\n\r\nmodule.exports = shortOut;\r\n", "var baseSetToString = require('./_baseSetToString'),\r\n    shortOut = require('./_shortOut');\r\n\r\n/**\r\n * Sets the `toString` method of `func` to return `string`.\r\n *\r\n * @private\r\n * @param {Function} func The function to modify.\r\n * @param {Function} string The `toString` result.\r\n * @returns {Function} Returns `func`.\r\n */\r\nvar setToString = shortOut(baseSetToString);\r\n\r\nmodule.exports = setToString;\r\n", "var identity = require('./identity'),\r\n    overRest = require('./_overRest'),\r\n    setToString = require('./_setToString');\r\n\r\n/**\r\n * The base implementation of `_.rest` which doesn't validate or coerce arguments.\r\n *\r\n * @private\r\n * @param {Function} func The function to apply a rest parameter to.\r\n * @param {number} [start=func.length-1] The start position of the rest parameter.\r\n * @returns {Function} Returns the new function.\r\n */\r\nfunction baseRest(func, start) {\r\n  return setToString(overRest(func, start, identity), func + '');\r\n}\r\n\r\nmodule.exports = baseRest;\r\n", "var eq = require('./eq'),\r\n    isArrayLike = require('./isArrayLike'),\r\n    isIndex = require('./_isIndex'),\r\n    isObject = require('./isObject');\r\n\r\n/**\r\n * Checks if the given arguments are from an iteratee call.\r\n *\r\n * @private\r\n * @param {*} value The potential iteratee value argument.\r\n * @param {*} index The potential iteratee index or key argument.\r\n * @param {*} object The potential iteratee object argument.\r\n * @returns {boolean} Returns `true` if the arguments are from an iteratee call,\r\n *  else `false`.\r\n */\r\nfunction isIterateeCall(value, index, object) {\r\n  if (!isObject(object)) {\r\n    return false;\r\n  }\r\n  var type = typeof index;\r\n  if (type == 'number'\r\n        ? (isArrayLike(object) && isIndex(index, object.length))\r\n        : (type == 'string' && index in object)\r\n      ) {\r\n    return eq(object[index], value);\r\n  }\r\n  return false;\r\n}\r\n\r\nmodule.exports = isIterateeCall;\r\n", "var baseRest = require('./_baseRest'),\r\n    isIterateeCall = require('./_isIterateeCall');\r\n\r\n/**\r\n * Creates a function like `_.assign`.\r\n *\r\n * @private\r\n * @param {Function} assigner The function to assign values.\r\n * @returns {Function} Returns the new assigner function.\r\n */\r\nfunction createAssigner(assigner) {\r\n  return baseRest(function(object, sources) {\r\n    var index = -1,\r\n        length = sources.length,\r\n        customizer = length > 1 ? sources[length - 1] : undefined,\r\n        guard = length > 2 ? sources[2] : undefined;\r\n\r\n    customizer = (assigner.length > 3 && typeof customizer == 'function')\r\n      ? (length--, customizer)\r\n      : undefined;\r\n\r\n    if (guard && isIterateeCall(sources[0], sources[1], guard)) {\r\n      customizer = length < 3 ? undefined : customizer;\r\n      length = 1;\r\n    }\r\n    object = Object(object);\r\n    while (++index < length) {\r\n      var source = sources[index];\r\n      if (source) {\r\n        assigner(object, source, index, customizer);\r\n      }\r\n    }\r\n    return object;\r\n  });\r\n}\r\n\r\nmodule.exports = createAssigner;\r\n", "var assignValue = require('./_assignValue'),\r\n    copyObject = require('./_copyObject'),\r\n    createAssigner = require('./_createAssigner'),\r\n    isArrayLike = require('./isArrayLike'),\r\n    isPrototype = require('./_isPrototype'),\r\n    keys = require('./keys');\r\n\r\n/** Used for built-in method references. */\r\nvar objectProto = Object.prototype;\r\n\r\n/** Used to check objects for own properties. */\r\nvar hasOwnProperty = objectProto.hasOwnProperty;\r\n\r\n/**\r\n * Assigns own enumerable string keyed properties of source objects to the\r\n * destination object. Source objects are applied from left to right.\r\n * Subsequent sources overwrite property assignments of previous sources.\r\n *\r\n * **Note:** This method mutates `object` and is loosely based on\r\n * [`Object.assign`](https://mdn.io/Object/assign).\r\n *\r\n * @static\r\n * @memberOf _\r\n * @since 0.10.0\r\n * @category Object\r\n * @param {Object} object The destination object.\r\n * @param {...Object} [sources] The source objects.\r\n * @returns {Object} Returns `object`.\r\n * @see _.assignIn\r\n * @example\r\n *\r\n * function Foo() {\r\n *   this.a = 1;\r\n * }\r\n *\r\n * function Bar() {\r\n *   this.c = 3;\r\n * }\r\n *\r\n * Foo.prototype.b = 2;\r\n * Bar.prototype.d = 4;\r\n *\r\n * _.assign({ 'a': 0 }, new Foo, new Bar);\r\n * // => { 'a': 1, 'c': 3 }\r\n */\r\nvar assign = createAssigner(function(object, source) {\r\n  if (isPrototype(source) || isArrayLike(source)) {\r\n    copyObject(source, keys(source), object);\r\n    return;\r\n  }\r\n  for (var key in source) {\r\n    if (hasOwnProperty.call(source, key)) {\r\n      assignValue(object, key, source[key]);\r\n    }\r\n  }\r\n});\r\n\r\nmodule.exports = assign;\r\n", "import map from \"lodash/map\"\r\nimport forEach from \"lodash/forEach\"\r\nimport isString from \"lodash/isString\"\r\nimport isRegExp from \"lodash/isRegExp\"\r\nimport pickBy from \"lodash/pickBy\"\r\nimport assign from \"lodash/assign\"\r\nimport {\r\n  IGASTVisitor,\r\n  IProduction,\r\n  IProductionWithOccurrence,\r\n  ISerializedGast,\r\n  TokenType\r\n} from \"@chevrotain/types\"\r\n\r\n// TODO: duplicated code to avoid extracting another sub-package -- how to avoid?\r\nfunction tokenLabel(tokType: TokenType): string {\r\n  if (hasTokenLabel(tokType)) {\r\n    return tokType.LABEL\r\n  } else {\r\n    return tokType.name\r\n  }\r\n}\r\n\r\n// TODO: duplicated code to avoid extracting another sub-package -- how to avoid?\r\nfunction hasTokenLabel(\r\n  obj: TokenType\r\n): obj is TokenType & Pick<Required<TokenType>, \"LABEL\"> {\r\n  return isString(obj.LABEL) && obj.LABEL !== \"\"\r\n}\r\n\r\nexport abstract class AbstractProduction<T extends IProduction = IProduction>\r\n  implements IProduction\r\n{\r\n  public get definition(): T[] {\r\n    return this._definition\r\n  }\r\n  public set definition(value: T[]) {\r\n    this._definition = value\r\n  }\r\n\r\n  constructor(protected _definition: T[]) {}\r\n\r\n  accept(visitor: IGASTVisitor): void {\r\n    visitor.visit(this)\r\n    forEach(this.definition, (prod) => {\r\n      prod.accept(visitor)\r\n    })\r\n  }\r\n}\r\n\r\nexport class NonTerminal\r\n  extends AbstractProduction\r\n  implements IProductionWithOccurrence\r\n{\r\n  public nonTerminalName!: string\r\n  public label?: string\r\n  public referencedRule!: Rule\r\n  public idx: number = 1\r\n\r\n  constructor(options: {\r\n    nonTerminalName: string\r\n    label?: string\r\n    referencedRule?: Rule\r\n    idx?: number\r\n  }) {\r\n    super([])\r\n    assign(\r\n      this,\r\n      pickBy(options, (v) => v !== undefined)\r\n    )\r\n  }\r\n\r\n  set definition(definition: IProduction[]) {\r\n    // immutable\r\n  }\r\n\r\n  get definition(): IProduction[] {\r\n    if (this.referencedRule !== undefined) {\r\n      return this.referencedRule.definition\r\n    }\r\n    return []\r\n  }\r\n\r\n  accept(visitor: IGASTVisitor): void {\r\n    visitor.visit(this)\r\n    // don't visit children of a reference, we will get cyclic infinite loops if we do so\r\n  }\r\n}\r\n\r\nexport class Rule extends AbstractProduction {\r\n  public name!: string\r\n  public orgText: string = \"\"\r\n\r\n  constructor(options: {\r\n    name: string\r\n    definition: IProduction[]\r\n    orgText?: string\r\n  }) {\r\n    super(options.definition)\r\n    assign(\r\n      this,\r\n      pickBy(options, (v) => v !== undefined)\r\n    )\r\n  }\r\n}\r\n\r\nexport class Alternative extends AbstractProduction {\r\n  public ignoreAmbiguities: boolean = false\r\n\r\n  constructor(options: {\r\n    definition: IProduction[]\r\n    ignoreAmbiguities?: boolean\r\n  }) {\r\n    super(options.definition)\r\n    assign(\r\n      this,\r\n      pickBy(options, (v) => v !== undefined)\r\n    )\r\n  }\r\n}\r\n\r\nexport class Option\r\n  extends AbstractProduction\r\n  implements IProductionWithOccurrence\r\n{\r\n  public idx: number = 1\r\n  public maxLookahead?: number\r\n\r\n  constructor(options: {\r\n    definition: IProduction[]\r\n    idx?: number\r\n    maxLookahead?: number\r\n  }) {\r\n    super(options.definition)\r\n    assign(\r\n      this,\r\n      pickBy(options, (v) => v !== undefined)\r\n    )\r\n  }\r\n}\r\n\r\nexport class RepetitionMandatory\r\n  extends AbstractProduction\r\n  implements IProductionWithOccurrence\r\n{\r\n  public idx: number = 1\r\n  public maxLookahead?: number\r\n\r\n  constructor(options: {\r\n    definition: IProduction[]\r\n    idx?: number\r\n    maxLookahead?: number\r\n  }) {\r\n    super(options.definition)\r\n    assign(\r\n      this,\r\n      pickBy(options, (v) => v !== undefined)\r\n    )\r\n  }\r\n}\r\n\r\nexport class RepetitionMandatoryWithSeparator\r\n  extends AbstractProduction\r\n  implements IProductionWithOccurrence\r\n{\r\n  public separator!: TokenType\r\n  public idx: number = 1\r\n  public maxLookahead?: number\r\n\r\n  constructor(options: {\r\n    definition: IProduction[]\r\n    separator: TokenType\r\n    idx?: number\r\n  }) {\r\n    super(options.definition)\r\n    assign(\r\n      this,\r\n      pickBy(options, (v) => v !== undefined)\r\n    )\r\n  }\r\n}\r\n\r\nexport class Repetition\r\n  extends AbstractProduction\r\n  implements IProductionWithOccurrence\r\n{\r\n  public separator!: TokenType\r\n  public idx: number = 1\r\n  public maxLookahead?: number\r\n\r\n  constructor(options: {\r\n    definition: IProduction[]\r\n    idx?: number\r\n    maxLookahead?: number\r\n  }) {\r\n    super(options.definition)\r\n    assign(\r\n      this,\r\n      pickBy(options, (v) => v !== undefined)\r\n    )\r\n  }\r\n}\r\n\r\nexport class RepetitionWithSeparator\r\n  extends AbstractProduction\r\n  implements IProductionWithOccurrence\r\n{\r\n  public separator!: TokenType\r\n  public idx: number = 1\r\n  public maxLookahead?: number\r\n\r\n  constructor(options: {\r\n    definition: IProduction[]\r\n    separator: TokenType\r\n    idx?: number\r\n  }) {\r\n    super(options.definition)\r\n    assign(\r\n      this,\r\n      pickBy(options, (v) => v !== undefined)\r\n    )\r\n  }\r\n}\r\n\r\nexport class Alternation\r\n  extends AbstractProduction<Alternative>\r\n  implements IProductionWithOccurrence\r\n{\r\n  public idx: number = 1\r\n  public ignoreAmbiguities: boolean = false\r\n  public hasPredicates: boolean = false\r\n  public maxLookahead?: number\r\n\r\n  public get definition(): Alternative[] {\r\n    return this._definition\r\n  }\r\n  public set definition(value: Alternative[]) {\r\n    this._definition = value\r\n  }\r\n\r\n  constructor(options: {\r\n    definition: Alternative[]\r\n    idx?: number\r\n    ignoreAmbiguities?: boolean\r\n    hasPredicates?: boolean\r\n    maxLookahead?: number\r\n  }) {\r\n    super(options.definition)\r\n    assign(\r\n      this,\r\n      pickBy(options, (v) => v !== undefined)\r\n    )\r\n  }\r\n}\r\n\r\nexport class Terminal implements IProductionWithOccurrence {\r\n  public terminalType!: TokenType\r\n  public label?: string\r\n  public idx: number = 1\r\n\r\n  constructor(options: {\r\n    terminalType: TokenType\r\n    label?: string\r\n    idx?: number\r\n  }) {\r\n    assign(\r\n      this,\r\n      pickBy(options, (v) => v !== undefined)\r\n    )\r\n  }\r\n\r\n  accept(visitor: IGASTVisitor): void {\r\n    visitor.visit(this)\r\n  }\r\n}\r\n\r\nexport interface ISerializedBasic extends ISerializedGast {\r\n  type:\r\n    | \"Alternative\"\r\n    | \"Option\"\r\n    | \"RepetitionMandatory\"\r\n    | \"Repetition\"\r\n    | \"Alternation\"\r\n  idx?: number\r\n}\r\n\r\nexport interface ISerializedGastRule extends ISerializedGast {\r\n  type: \"Rule\"\r\n  name: string\r\n  orgText: string\r\n}\r\n\r\nexport interface ISerializedNonTerminal extends ISerializedGast {\r\n  type: \"NonTerminal\"\r\n  name: string\r\n  label?: string\r\n  idx: number\r\n}\r\n\r\nexport interface ISerializedTerminal extends ISerializedGast {\r\n  type: \"Terminal\"\r\n  name: string\r\n  terminalLabel?: string\r\n  label?: string\r\n  pattern?: string\r\n  idx: number\r\n}\r\n\r\nexport interface ISerializedTerminalWithSeparator extends ISerializedGast {\r\n  type: \"RepetitionMandatoryWithSeparator\" | \"RepetitionWithSeparator\"\r\n  idx: number\r\n  separator: ISerializedTerminal\r\n}\r\n\r\nexport type ISerializedGastAny =\r\n  | ISerializedBasic\r\n  | ISerializedGastRule\r\n  | ISerializedNonTerminal\r\n  | ISerializedTerminal\r\n  | ISerializedTerminalWithSeparator\r\n\r\nexport function serializeGrammar(topRules: Rule[]): ISerializedGast[] {\r\n  return map(topRules, serializeProduction)\r\n}\r\n\r\nexport function serializeProduction(node: IProduction): ISerializedGast {\r\n  function convertDefinition(definition: IProduction[]): ISerializedGast[] {\r\n    return map(definition, serializeProduction)\r\n  }\r\n  /* istanbul ignore else */\r\n  if (node instanceof NonTerminal) {\r\n    const serializedNonTerminal: ISerializedNonTerminal = {\r\n      type: \"NonTerminal\",\r\n      name: node.nonTerminalName,\r\n      idx: node.idx\r\n    }\r\n\r\n    if (isString(node.label)) {\r\n      serializedNonTerminal.label = node.label\r\n    }\r\n\r\n    return serializedNonTerminal\r\n  } else if (node instanceof Alternative) {\r\n    return <ISerializedBasic>{\r\n      type: \"Alternative\",\r\n      definition: convertDefinition(node.definition)\r\n    }\r\n  } else if (node instanceof Option) {\r\n    return <ISerializedBasic>{\r\n      type: \"Option\",\r\n      idx: node.idx,\r\n      definition: convertDefinition(node.definition)\r\n    }\r\n  } else if (node instanceof RepetitionMandatory) {\r\n    return <ISerializedBasic>{\r\n      type: \"RepetitionMandatory\",\r\n      idx: node.idx,\r\n      definition: convertDefinition(node.definition)\r\n    }\r\n  } else if (node instanceof RepetitionMandatoryWithSeparator) {\r\n    return <ISerializedTerminalWithSeparator>{\r\n      type: \"RepetitionMandatoryWithSeparator\",\r\n      idx: node.idx,\r\n      separator: <ISerializedTerminal>(\r\n        serializeProduction(new Terminal({ terminalType: node.separator }))\r\n      ),\r\n      definition: convertDefinition(node.definition)\r\n    }\r\n  } else if (node instanceof RepetitionWithSeparator) {\r\n    return <ISerializedTerminalWithSeparator>{\r\n      type: \"RepetitionWithSeparator\",\r\n      idx: node.idx,\r\n      separator: <ISerializedTerminal>(\r\n        serializeProduction(new Terminal({ terminalType: node.separator }))\r\n      ),\r\n      definition: convertDefinition(node.definition)\r\n    }\r\n  } else if (node instanceof Repetition) {\r\n    return <ISerializedBasic>{\r\n      type: \"Repetition\",\r\n      idx: node.idx,\r\n      definition: convertDefinition(node.definition)\r\n    }\r\n  } else if (node instanceof Alternation) {\r\n    return <ISerializedBasic>{\r\n      type: \"Alternation\",\r\n      idx: node.idx,\r\n      definition: convertDefinition(node.definition)\r\n    }\r\n  } else if (node instanceof Terminal) {\r\n    const serializedTerminal = <ISerializedTerminal>{\r\n      type: \"Terminal\",\r\n      name: node.terminalType.name,\r\n      label: tokenLabel(node.terminalType),\r\n      idx: node.idx\r\n    }\r\n\r\n    if (isString(node.label)) {\r\n      serializedTerminal.terminalLabel = node.label\r\n    }\r\n\r\n    const pattern = node.terminalType.PATTERN\r\n    if (node.terminalType.PATTERN) {\r\n      serializedTerminal.pattern = isRegExp(pattern)\r\n        ? (<any>pattern).source\r\n        : pattern\r\n    }\r\n\r\n    return serializedTerminal\r\n  } else if (node instanceof Rule) {\r\n    return <ISerializedGastRule>{\r\n      type: \"Rule\",\r\n      name: node.name,\r\n      orgText: node.orgText,\r\n      definition: convertDefinition(node.definition)\r\n    }\r\n  } else {\r\n    throw Error(\"non exhaustive match\")\r\n  }\r\n}\r\n", "import {\r\n  Alternation,\r\n  Alternative,\r\n  NonTerminal,\r\n  Option,\r\n  Repetition,\r\n  RepetitionMandatory,\r\n  RepetitionMandatoryWithSeparator,\r\n  RepetitionWithSeparator,\r\n  Rule,\r\n  Terminal\r\n} from \"./model\"\r\nimport { IProduction } from \"@chevrotain/types\"\r\n\r\nexport abstract class GAstVisitor {\r\n  public visit(node: IProduction): any {\r\n    const nodeAny: any = node\r\n    switch (nodeAny.constructor) {\r\n      case NonTerminal:\r\n        return this.visitNonTerminal(nodeAny)\r\n      case Alternative:\r\n        return this.visitAlternative(nodeAny)\r\n      case Option:\r\n        return this.visitOption(nodeAny)\r\n      case RepetitionMandatory:\r\n        return this.visitRepetitionMandatory(nodeAny)\r\n      case RepetitionMandatoryWithSeparator:\r\n        return this.visitRepetitionMandatoryWithSeparator(nodeAny)\r\n      case RepetitionWithSeparator:\r\n        return this.visitRepetitionWithSeparator(nodeAny)\r\n      case Repetition:\r\n        return this.visitRepetition(nodeAny)\r\n      case Alternation:\r\n        return this.visitAlternation(nodeAny)\r\n      case Terminal:\r\n        return this.visitTerminal(nodeAny)\r\n      case Rule:\r\n        return this.visitRule(nodeAny)\r\n      /* istanbul ignore next */\r\n      default:\r\n        throw Error(\"non exhaustive match\")\r\n    }\r\n  }\r\n\r\n  /* istanbul ignore next - testing the fact a NOOP function exists is non-trivial  */\r\n  public visitNonTerminal(node: NonTerminal): any {}\r\n\r\n  /* istanbul ignore next - testing the fact a NOOP function exists is non-trivial  */\r\n  public visitAlternative(node: Alternative): any {}\r\n\r\n  /* istanbul ignore next - testing the fact a NOOP function exists is non-trivial  */\r\n  public visitOption(node: Option): any {}\r\n\r\n  /* istanbul ignore next - testing the fact a NOOP function exists is non-trivial  */\r\n  public visitRepetition(node: Repetition): any {}\r\n\r\n  /* istanbul ignore next - testing the fact a NOOP function exists is non-trivial  */\r\n  public visitRepetitionMandatory(node: RepetitionMandatory): any {}\r\n\r\n  /* istanbul ignore next - testing the fact a NOOP function exists is non-trivial  */\r\n  public visitRepetitionMandatoryWithSeparator(\r\n    node: RepetitionMandatoryWithSeparator\r\n  ): any {}\r\n\r\n  /* istanbul ignore next - testing the fact a NOOP function exists is non-trivial  */\r\n  public visitRepetitionWithSeparator(node: RepetitionWithSeparator): any {}\r\n\r\n  /* istanbul ignore next - testing the fact a NOOP function exists is non-trivial  */\r\n  public visitAlternation(node: Alternation): any {}\r\n\r\n  /* istanbul ignore next - testing the fact a NOOP function exists is non-trivial  */\r\n  public visitTerminal(node: Terminal): any {}\r\n\r\n  /* istanbul ignore next - testing the fact a NOOP function exists is non-trivial  */\r\n  public visitRule(node: Rule): any {}\r\n}\r\n", "var baseEach = require('./_baseEach');\r\n\r\n/**\r\n * The base implementation of `_.some` without support for iteratee shorthands.\r\n *\r\n * @private\r\n * @param {Array|Object} collection The collection to iterate over.\r\n * @param {Function} predicate The function invoked per iteration.\r\n * @returns {boolean} Returns `true` if any element passes the predicate check,\r\n *  else `false`.\r\n */\r\nfunction baseSome(collection, predicate) {\r\n  var result;\r\n\r\n  baseEach(collection, function(value, index, collection) {\r\n    result = predicate(value, index, collection);\r\n    return !result;\r\n  });\r\n  return !!result;\r\n}\r\n\r\nmodule.exports = baseSome;\r\n", "var arraySome = require('./_arraySome'),\r\n    baseIteratee = require('./_baseIteratee'),\r\n    baseSome = require('./_baseSome'),\r\n    isArray = require('./isArray'),\r\n    isIterateeCall = require('./_isIterateeCall');\r\n\r\n/**\r\n * Checks if `predicate` returns truthy for **any** element of `collection`.\r\n * Iteration is stopped once `predicate` returns truthy. The predicate is\r\n * invoked with three arguments: (value, index|key, collection).\r\n *\r\n * @static\r\n * @memberOf _\r\n * @since 0.1.0\r\n * @category Collection\r\n * @param {Array|Object} collection The collection to iterate over.\r\n * @param {Function} [predicate=_.identity] The function invoked per iteration.\r\n * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\r\n * @returns {boolean} Returns `true` if any element passes the predicate check,\r\n *  else `false`.\r\n * @example\r\n *\r\n * _.some([null, 0, 'yes', false], Boolean);\r\n * // => true\r\n *\r\n * var users = [\r\n *   { 'user': 'barney', 'active': true },\r\n *   { 'user': 'fred',   'active': false }\r\n * ];\r\n *\r\n * // The `_.matches` iteratee shorthand.\r\n * _.some(users, { 'user': 'barney', 'active': false });\r\n * // => false\r\n *\r\n * // The `_.matchesProperty` iteratee shorthand.\r\n * _.some(users, ['active', false]);\r\n * // => true\r\n *\r\n * // The `_.property` iteratee shorthand.\r\n * _.some(users, 'active');\r\n * // => true\r\n */\r\nfunction some(collection, predicate, guard) {\r\n  var func = isArray(collection) ? arraySome : baseSome;\r\n  if (guard && isIterateeCall(collection, predicate, guard)) {\r\n    predicate = undefined;\r\n  }\r\n  return func(collection, baseIteratee(predicate, 3));\r\n}\r\n\r\nmodule.exports = some;\r\n", "/**\r\n * A specialized version of `_.every` for arrays without support for\r\n * iteratee shorthands.\r\n *\r\n * @private\r\n * @param {Array} [array] The array to iterate over.\r\n * @param {Function} predicate The function invoked per iteration.\r\n * @returns {boolean} Returns `true` if all elements pass the predicate check,\r\n *  else `false`.\r\n */\r\nfunction arrayEvery(array, predicate) {\r\n  var index = -1,\r\n      length = array == null ? 0 : array.length;\r\n\r\n  while (++index < length) {\r\n    if (!predicate(array[index], index, array)) {\r\n      return false;\r\n    }\r\n  }\r\n  return true;\r\n}\r\n\r\nmodule.exports = arrayEvery;\r\n", "var baseEach = require('./_baseEach');\r\n\r\n/**\r\n * The base implementation of `_.every` without support for iteratee shorthands.\r\n *\r\n * @private\r\n * @param {Array|Object} collection The collection to iterate over.\r\n * @param {Function} predicate The function invoked per iteration.\r\n * @returns {boolean} Returns `true` if all elements pass the predicate check,\r\n *  else `false`\r\n */\r\nfunction baseEvery(collection, predicate) {\r\n  var result = true;\r\n  baseEach(collection, function(value, index, collection) {\r\n    result = !!predicate(value, index, collection);\r\n    return result;\r\n  });\r\n  return result;\r\n}\r\n\r\nmodule.exports = baseEvery;\r\n", "var arrayEvery = require('./_arrayEvery'),\r\n    baseEvery = require('./_baseEvery'),\r\n    baseIteratee = require('./_baseIteratee'),\r\n    isArray = require('./isArray'),\r\n    isIterateeCall = require('./_isIterateeCall');\r\n\r\n/**\r\n * Checks if `predicate` returns truthy for **all** elements of `collection`.\r\n * Iteration is stopped once `predicate` returns falsey. The predicate is\r\n * invoked with three arguments: (value, index|key, collection).\r\n *\r\n * **Note:** This method returns `true` for\r\n * [empty collections](https://en.wikipedia.org/wiki/Empty_set) because\r\n * [everything is true](https://en.wikipedia.org/wiki/Vacuous_truth) of\r\n * elements of empty collections.\r\n *\r\n * @static\r\n * @memberOf _\r\n * @since 0.1.0\r\n * @category Collection\r\n * @param {Array|Object} collection The collection to iterate over.\r\n * @param {Function} [predicate=_.identity] The function invoked per iteration.\r\n * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\r\n * @returns {boolean} Returns `true` if all elements pass the predicate check,\r\n *  else `false`.\r\n * @example\r\n *\r\n * _.every([true, 1, null, 'yes'], Boolean);\r\n * // => false\r\n *\r\n * var users = [\r\n *   { 'user': 'barney', 'age': 36, 'active': false },\r\n *   { 'user': 'fred',   'age': 40, 'active': false }\r\n * ];\r\n *\r\n * // The `_.matches` iteratee shorthand.\r\n * _.every(users, { 'user': 'barney', 'active': false });\r\n * // => false\r\n *\r\n * // The `_.matchesProperty` iteratee shorthand.\r\n * _.every(users, ['active', false]);\r\n * // => true\r\n *\r\n * // The `_.property` iteratee shorthand.\r\n * _.every(users, 'active');\r\n * // => false\r\n */\r\nfunction every(collection, predicate, guard) {\r\n  var func = isArray(collection) ? arrayEvery : baseEvery;\r\n  if (guard && isIterateeCall(collection, predicate, guard)) {\r\n    predicate = undefined;\r\n  }\r\n  return func(collection, baseIteratee(predicate, 3));\r\n}\r\n\r\nmodule.exports = every;\r\n", "/**\r\n * The base implementation of `_.findIndex` and `_.findLastIndex` without\r\n * support for iteratee shorthands.\r\n *\r\n * @private\r\n * @param {Array} array The array to inspect.\r\n * @param {Function} predicate The function invoked per iteration.\r\n * @param {number} fromIndex The index to search from.\r\n * @param {boolean} [fromRight] Specify iterating from right to left.\r\n * @returns {number} Returns the index of the matched value, else `-1`.\r\n */\r\nfunction baseFindIndex(array, predicate, fromIndex, fromRight) {\r\n  var length = array.length,\r\n      index = fromIndex + (fromRight ? 1 : -1);\r\n\r\n  while ((fromRight ? index-- : ++index < length)) {\r\n    if (predicate(array[index], index, array)) {\r\n      return index;\r\n    }\r\n  }\r\n  return -1;\r\n}\r\n\r\nmodule.exports = baseFindIndex;\r\n", "/**\r\n * The base implementation of `_.isNaN` without support for number objects.\r\n *\r\n * @private\r\n * @param {*} value The value to check.\r\n * @returns {boolean} Returns `true` if `value` is `NaN`, else `false`.\r\n */\r\nfunction baseIsNaN(value) {\r\n  return value !== value;\r\n}\r\n\r\nmodule.exports = baseIsNaN;\r\n", "/**\r\n * A specialized version of `_.indexOf` which performs strict equality\r\n * comparisons of values, i.e. `===`.\r\n *\r\n * @private\r\n * @param {Array} array The array to inspect.\r\n * @param {*} value The value to search for.\r\n * @param {number} fromIndex The index to search from.\r\n * @returns {number} Returns the index of the matched value, else `-1`.\r\n */\r\nfunction strictIndexOf(array, value, fromIndex) {\r\n  var index = fromIndex - 1,\r\n      length = array.length;\r\n\r\n  while (++index < length) {\r\n    if (array[index] === value) {\r\n      return index;\r\n    }\r\n  }\r\n  return -1;\r\n}\r\n\r\nmodule.exports = strictIndexOf;\r\n", "var baseFindIndex = require('./_baseFindIndex'),\r\n    baseIsNaN = require('./_baseIsNaN'),\r\n    strictIndexOf = require('./_strictIndexOf');\r\n\r\n/**\r\n * The base implementation of `_.indexOf` without `fromIndex` bounds checks.\r\n *\r\n * @private\r\n * @param {Array} array The array to inspect.\r\n * @param {*} value The value to search for.\r\n * @param {number} fromIndex The index to search from.\r\n * @returns {number} Returns the index of the matched value, else `-1`.\r\n */\r\nfunction baseIndexOf(array, value, fromIndex) {\r\n  return value === value\r\n    ? strictIndexOf(array, value, fromIndex)\r\n    : baseFindIndex(array, baseIsNaN, fromIndex);\r\n}\r\n\r\nmodule.exports = baseIndexOf;\r\n", "var baseIndexOf = require('./_baseIndexOf'),\r\n    isArrayLike = require('./isArrayLike'),\r\n    isString = require('./isString'),\r\n    toInteger = require('./toInteger'),\r\n    values = require('./values');\r\n\r\n/* Built-in method references for those with the same name as other `lodash` methods. */\r\nvar nativeMax = Math.max;\r\n\r\n/**\r\n * Checks if `value` is in `collection`. If `collection` is a string, it's\r\n * checked for a substring of `value`, otherwise\r\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\r\n * is used for equality comparisons. If `fromIndex` is negative, it's used as\r\n * the offset from the end of `collection`.\r\n *\r\n * @static\r\n * @memberOf _\r\n * @since 0.1.0\r\n * @category Collection\r\n * @param {Array|Object|string} collection The collection to inspect.\r\n * @param {*} value The value to search for.\r\n * @param {number} [fromIndex=0] The index to search from.\r\n * @param- {Object} [guard] Enables use as an iteratee for methods like `_.reduce`.\r\n * @returns {boolean} Returns `true` if `value` is found, else `false`.\r\n * @example\r\n *\r\n * _.includes([1, 2, 3], 1);\r\n * // => true\r\n *\r\n * _.includes([1, 2, 3], 1, 2);\r\n * // => false\r\n *\r\n * _.includes({ 'a': 1, 'b': 2 }, 1);\r\n * // => true\r\n *\r\n * _.includes('abcd', 'bc');\r\n * // => true\r\n */\r\nfunction includes(collection, value, fromIndex, guard) {\r\n  collection = isArrayLike(collection) ? collection : values(collection);\r\n  fromIndex = (fromIndex && !guard) ? toInteger(fromIndex) : 0;\r\n\r\n  var length = collection.length;\r\n  if (fromIndex < 0) {\r\n    fromIndex = nativeMax(length + fromIndex, 0);\r\n  }\r\n  return isString(collection)\r\n    ? (fromIndex <= length && collection.indexOf(value, fromIndex) > -1)\r\n    : (!!length && baseIndexOf(collection, value, fromIndex) > -1);\r\n}\r\n\r\nmodule.exports = includes;\r\n", "import some from \"lodash/some\"\r\nimport every from \"lodash/every\"\r\nimport has from \"lodash/has\"\r\nimport includes from \"lodash/includes\"\r\nimport {\r\n  AbstractProduction,\r\n  Alternation,\r\n  Alternative,\r\n  NonTerminal,\r\n  Option,\r\n  Repetition,\r\n  RepetitionMandatory,\r\n  RepetitionMandatoryWithSeparator,\r\n  RepetitionWithSeparator,\r\n  Rule,\r\n  Terminal\r\n} from \"./model\"\r\nimport { GAstVisitor } from \"./visitor\"\r\nimport { IProduction, IProductionWithOccurrence } from \"@chevrotain/types\"\r\n\r\nexport function isSequenceProd(\r\n  prod: IProduction\r\n): prod is { definition: IProduction[] } & IProduction {\r\n  return (\r\n    prod instanceof Alternative ||\r\n    prod instanceof Option ||\r\n    prod instanceof Repetition ||\r\n    prod instanceof RepetitionMandatory ||\r\n    prod instanceof RepetitionMandatoryWithSeparator ||\r\n    prod instanceof RepetitionWithSeparator ||\r\n    prod instanceof Terminal ||\r\n    prod instanceof Rule\r\n  )\r\n}\r\n\r\nexport function isOptionalProd(\r\n  prod: IProduction,\r\n  alreadyVisited: NonTerminal[] = []\r\n): boolean {\r\n  const isDirectlyOptional =\r\n    prod instanceof Option ||\r\n    prod instanceof Repetition ||\r\n    prod instanceof RepetitionWithSeparator\r\n  if (isDirectlyOptional) {\r\n    return true\r\n  }\r\n\r\n  // note that this can cause infinite loop if one optional empty TOP production has a cyclic dependency with another\r\n  // empty optional top rule\r\n  // may be indirectly optional ((A?B?C?) | (D?E?F?))\r\n  if (prod instanceof Alternation) {\r\n    // for OR its enough for just one of the alternatives to be optional\r\n    return some((<Alternation>prod).definition, (subProd: IProduction) => {\r\n      return isOptionalProd(subProd, alreadyVisited)\r\n    })\r\n  } else if (prod instanceof NonTerminal && includes(alreadyVisited, prod)) {\r\n    // avoiding stack overflow due to infinite recursion\r\n    return false\r\n  } else if (prod instanceof AbstractProduction) {\r\n    if (prod instanceof NonTerminal) {\r\n      alreadyVisited.push(prod)\r\n    }\r\n    return every(\r\n      (<AbstractProduction>prod).definition,\r\n      (subProd: IProduction) => {\r\n        return isOptionalProd(subProd, alreadyVisited)\r\n      }\r\n    )\r\n  } else {\r\n    return false\r\n  }\r\n}\r\n\r\nexport function isBranchingProd(\r\n  prod: IProduction\r\n): prod is { definition: IProduction[] } & IProduction {\r\n  return prod instanceof Alternation\r\n}\r\n\r\nexport function getProductionDslName(prod: IProductionWithOccurrence): string {\r\n  /* istanbul ignore else */\r\n  if (prod instanceof NonTerminal) {\r\n    return \"SUBRULE\"\r\n  } else if (prod instanceof Option) {\r\n    return \"OPTION\"\r\n  } else if (prod instanceof Alternation) {\r\n    return \"OR\"\r\n  } else if (prod instanceof RepetitionMandatory) {\r\n    return \"AT_LEAST_ONE\"\r\n  } else if (prod instanceof RepetitionMandatoryWithSeparator) {\r\n    return \"AT_LEAST_ONE_SEP\"\r\n  } else if (prod instanceof RepetitionWithSeparator) {\r\n    return \"MANY_SEP\"\r\n  } else if (prod instanceof Repetition) {\r\n    return \"MANY\"\r\n  } else if (prod instanceof Terminal) {\r\n    return \"CONSUME\"\r\n  } else {\r\n    throw Error(\"non exhaustive match\")\r\n  }\r\n}\r\n", "export {\r\n  Rule,\r\n  Terminal,\r\n  NonTerminal,\r\n  Option,\r\n  Repetition,\r\n  RepetitionMandatory,\r\n  RepetitionMandatoryWithSeparator,\r\n  RepetitionWithSeparator,\r\n  Alternation,\r\n  Alternative,\r\n  serializeGrammar,\r\n  serializeProduction\r\n} from \"./model\"\r\n\r\nexport { GAstVisitor } from \"./visitor\"\r\n\r\nexport {\r\n  getProductionDslName,\r\n  isOptionalProd,\r\n  isBranchingProd,\r\n  isSequenceProd\r\n} from \"./helpers\"\r\n", "import drop from \"lodash/drop\"\r\nimport forEach from \"lodash/forEach\"\r\nimport {\r\n  Alternation,\r\n  Alternative,\r\n  NonTerminal,\r\n  Option,\r\n  Repetition,\r\n  RepetitionMandatory,\r\n  RepetitionMandatoryWithSeparator,\r\n  RepetitionWithSeparator,\r\n  Terminal\r\n} from \"@chevrotain/gast\"\r\nimport { IProduction } from \"@chevrotain/types\"\r\n\r\n/**\r\n *  A Grammar Walker that computes the \"remaining\" grammar \"after\" a productions in the grammar.\r\n */\r\nexport abstract class RestWalker {\r\n  walk(prod: { definition: IProduction[] }, prevRest: any[] = []): void {\r\n    forEach(prod.definition, (subProd: IProduction, index) => {\r\n      const currRest = drop(prod.definition, index + 1)\r\n      /* istanbul ignore else */\r\n      if (subProd instanceof NonTerminal) {\r\n        this.walkProdRef(subProd, currRest, prevRest)\r\n      } else if (subProd instanceof Terminal) {\r\n        this.walkTerminal(subProd, currRest, prevRest)\r\n      } else if (subProd instanceof Alternative) {\r\n        this.walkFlat(subProd, currRest, prevRest)\r\n      } else if (subProd instanceof Option) {\r\n        this.walkOption(subProd, currRest, prevRest)\r\n      } else if (subProd instanceof RepetitionMandatory) {\r\n        this.walkAtLeastOne(subProd, currRest, prevRest)\r\n      } else if (subProd instanceof RepetitionMandatoryWithSeparator) {\r\n        this.walkAtLeastOneSep(subProd, currRest, prevRest)\r\n      } else if (subProd instanceof RepetitionWithSeparator) {\r\n        this.walkManySep(subProd, currRest, prevRest)\r\n      } else if (subProd instanceof Repetition) {\r\n        this.walkMany(subProd, currRest, prevRest)\r\n      } else if (subProd instanceof Alternation) {\r\n        this.walkOr(subProd, currRest, prevRest)\r\n      } else {\r\n        throw Error(\"non exhaustive match\")\r\n      }\r\n    })\r\n  }\r\n\r\n  walkTerminal(\r\n    terminal: Terminal,\r\n    currRest: IProduction[],\r\n    prevRest: IProduction[]\r\n  ): void {}\r\n\r\n  walkProdRef(\r\n    refProd: NonTerminal,\r\n    currRest: IProduction[],\r\n    prevRest: IProduction[]\r\n  ): void {}\r\n\r\n  walkFlat(\r\n    flatProd: Alternative,\r\n    currRest: IProduction[],\r\n    prevRest: IProduction[]\r\n  ): void {\r\n    // ABCDEF => after the D the rest is EF\r\n    const fullOrRest = currRest.concat(prevRest)\r\n    this.walk(flatProd, <any>fullOrRest)\r\n  }\r\n\r\n  walkOption(\r\n    optionProd: Option,\r\n    currRest: IProduction[],\r\n    prevRest: IProduction[]\r\n  ): void {\r\n    // ABC(DE)?F => after the (DE)? the rest is F\r\n    const fullOrRest = currRest.concat(prevRest)\r\n    this.walk(optionProd, <any>fullOrRest)\r\n  }\r\n\r\n  walkAtLeastOne(\r\n    atLeastOneProd: RepetitionMandatory,\r\n    currRest: IProduction[],\r\n    prevRest: IProduction[]\r\n  ): void {\r\n    // ABC(DE)+F => after the (DE)+ the rest is (DE)?F\r\n    const fullAtLeastOneRest: IProduction[] = [\r\n      new Option({ definition: atLeastOneProd.definition })\r\n    ].concat(<any>currRest, <any>prevRest)\r\n    this.walk(atLeastOneProd, fullAtLeastOneRest)\r\n  }\r\n\r\n  walkAtLeastOneSep(\r\n    atLeastOneSepProd: RepetitionMandatoryWithSeparator,\r\n    currRest: IProduction[],\r\n    prevRest: IProduction[]\r\n  ): void {\r\n    // ABC DE(,DE)* F => after the (,DE)+ the rest is (,DE)?F\r\n    const fullAtLeastOneSepRest = restForRepetitionWithSeparator(\r\n      atLeastOneSepProd,\r\n      currRest,\r\n      prevRest\r\n    )\r\n    this.walk(atLeastOneSepProd, fullAtLeastOneSepRest)\r\n  }\r\n\r\n  walkMany(\r\n    manyProd: Repetition,\r\n    currRest: IProduction[],\r\n    prevRest: IProduction[]\r\n  ): void {\r\n    // ABC(DE)*F => after the (DE)* the rest is (DE)?F\r\n    const fullManyRest: IProduction[] = [\r\n      new Option({ definition: manyProd.definition })\r\n    ].concat(<any>currRest, <any>prevRest)\r\n    this.walk(manyProd, fullManyRest)\r\n  }\r\n\r\n  walkManySep(\r\n    manySepProd: RepetitionWithSeparator,\r\n    currRest: IProduction[],\r\n    prevRest: IProduction[]\r\n  ): void {\r\n    // ABC (DE(,DE)*)? F => after the (,DE)* the rest is (,DE)?F\r\n    const fullManySepRest = restForRepetitionWithSeparator(\r\n      manySepProd,\r\n      currRest,\r\n      prevRest\r\n    )\r\n    this.walk(manySepProd, fullManySepRest)\r\n  }\r\n\r\n  walkOr(\r\n    orProd: Alternation,\r\n    currRest: IProduction[],\r\n    prevRest: IProduction[]\r\n  ): void {\r\n    // ABC(D|E|F)G => when finding the (D|E|F) the rest is G\r\n    const fullOrRest = currRest.concat(prevRest)\r\n    // walk all different alternatives\r\n    forEach(orProd.definition, (alt) => {\r\n      // wrapping each alternative in a single definition wrapper\r\n      // to avoid errors in computing the rest of that alternative in the invocation to computeInProdFollows\r\n      // (otherwise for OR([alt1,alt2]) alt2 will be considered in 'rest' of alt1\r\n      const prodWrapper = new Alternative({ definition: [alt] })\r\n      this.walk(prodWrapper, <any>fullOrRest)\r\n    })\r\n  }\r\n}\r\n\r\nfunction restForRepetitionWithSeparator(\r\n  repSepProd: RepetitionWithSeparator,\r\n  currRest: IProduction[],\r\n  prevRest: IProduction[]\r\n) {\r\n  const repSepRest = [\r\n    new Option({\r\n      definition: [\r\n        new Terminal({ terminalType: repSepProd.separator }) as IProduction\r\n      ].concat(repSepProd.definition)\r\n    }) as IProduction\r\n  ]\r\n  const fullRepSepRest: IProduction[] = repSepRest.concat(currRest, prevRest)\r\n  return fullRepSepRest\r\n}\r\n", "var Symbol = require('./_Symbol'),\r\n    isArguments = require('./isArguments'),\r\n    isArray = require('./isArray');\r\n\r\n/** Built-in value references. */\r\nvar spreadableSymbol = Symbol ? Symbol.isConcatSpreadable : undefined;\r\n\r\n/**\r\n * Checks if `value` is a flattenable `arguments` object or array.\r\n *\r\n * @private\r\n * @param {*} value The value to check.\r\n * @returns {boolean} Returns `true` if `value` is flattenable, else `false`.\r\n */\r\nfunction isFlattenable(value) {\r\n  return isArray(value) || isArguments(value) ||\r\n    !!(spreadableSymbol && value && value[spreadableSymbol]);\r\n}\r\n\r\nmodule.exports = isFlattenable;\r\n", "var arrayPush = require('./_arrayPush'),\r\n    isFlattenable = require('./_isFlattenable');\r\n\r\n/**\r\n * The base implementation of `_.flatten` with support for restricting flattening.\r\n *\r\n * @private\r\n * @param {Array} array The array to flatten.\r\n * @param {number} depth The maximum recursion depth.\r\n * @param {boolean} [predicate=isFlattenable] The function invoked per iteration.\r\n * @param {boolean} [isStrict] Restrict to values that pass `predicate` checks.\r\n * @param {Array} [result=[]] The initial result value.\r\n * @returns {Array} Returns the new flattened array.\r\n */\r\nfunction baseFlatten(array, depth, predicate, isStrict, result) {\r\n  var index = -1,\r\n      length = array.length;\r\n\r\n  predicate || (predicate = isFlattenable);\r\n  result || (result = []);\r\n\r\n  while (++index < length) {\r\n    var value = array[index];\r\n    if (depth > 0 && predicate(value)) {\r\n      if (depth > 1) {\r\n        // Recursively flatten arrays (susceptible to call stack limits).\r\n        baseFlatten(value, depth - 1, predicate, isStrict, result);\r\n      } else {\r\n        arrayPush(result, value);\r\n      }\r\n    } else if (!isStrict) {\r\n      result[result.length] = value;\r\n    }\r\n  }\r\n  return result;\r\n}\r\n\r\nmodule.exports = baseFlatten;\r\n", "var baseFlatten = require('./_baseFlatten');\r\n\r\n/**\r\n * Flattens `array` a single level deep.\r\n *\r\n * @static\r\n * @memberOf _\r\n * @since 0.1.0\r\n * @category Array\r\n * @param {Array} array The array to flatten.\r\n * @returns {Array} Returns the new flattened array.\r\n * @example\r\n *\r\n * _.flatten([1, [2, [3, [4]], 5]]);\r\n * // => [1, 2, [3, [4]], 5]\r\n */\r\nfunction flatten(array) {\r\n  var length = array == null ? 0 : array.length;\r\n  return length ? baseFlatten(array, 1) : [];\r\n}\r\n\r\nmodule.exports = flatten;\r\n", "var baseIndexOf = require('./_baseIndexOf');\r\n\r\n/**\r\n * A specialized version of `_.includes` for arrays without support for\r\n * specifying an index to search from.\r\n *\r\n * @private\r\n * @param {Array} [array] The array to inspect.\r\n * @param {*} target The value to search for.\r\n * @returns {boolean} Returns `true` if `target` is found, else `false`.\r\n */\r\nfunction arrayIncludes(array, value) {\r\n  var length = array == null ? 0 : array.length;\r\n  return !!length && baseIndexOf(array, value, 0) > -1;\r\n}\r\n\r\nmodule.exports = arrayIncludes;\r\n", "/**\r\n * This function is like `arrayIncludes` except that it accepts a comparator.\r\n *\r\n * @private\r\n * @param {Array} [array] The array to inspect.\r\n * @param {*} target The value to search for.\r\n * @param {Function} comparator The comparator invoked per element.\r\n * @returns {boolean} Returns `true` if `target` is found, else `false`.\r\n */\r\nfunction arrayIncludesWith(array, value, comparator) {\r\n  var index = -1,\r\n      length = array == null ? 0 : array.length;\r\n\r\n  while (++index < length) {\r\n    if (comparator(value, array[index])) {\r\n      return true;\r\n    }\r\n  }\r\n  return false;\r\n}\r\n\r\nmodule.exports = arrayIncludesWith;\r\n", "/**\r\n * This method returns `undefined`.\r\n *\r\n * @static\r\n * @memberOf _\r\n * @since 2.3.0\r\n * @category Util\r\n * @example\r\n *\r\n * _.times(2, _.noop);\r\n * // => [undefined, undefined]\r\n */\r\nfunction noop() {\r\n  // No operation performed.\r\n}\r\n\r\nmodule.exports = noop;\r\n", "var Set = require('./_Set'),\r\n    noop = require('./noop'),\r\n    setToArray = require('./_setToArray');\r\n\r\n/** Used as references for various `Number` constants. */\r\nvar INFINITY = 1 / 0;\r\n\r\n/**\r\n * Creates a set object of `values`.\r\n *\r\n * @private\r\n * @param {Array} values The values to add to the set.\r\n * @returns {Object} Returns the new set.\r\n */\r\nvar createSet = !(Set && (1 / setToArray(new Set([,-0]))[1]) == INFINITY) ? noop : function(values) {\r\n  return new Set(values);\r\n};\r\n\r\nmodule.exports = createSet;\r\n", "var SetCache = require('./_SetCache'),\r\n    arrayIncludes = require('./_arrayIncludes'),\r\n    arrayIncludesWith = require('./_arrayIncludesWith'),\r\n    cacheHas = require('./_cacheHas'),\r\n    createSet = require('./_createSet'),\r\n    setToArray = require('./_setToArray');\r\n\r\n/** Used as the size to enable large array optimizations. */\r\nvar LARGE_ARRAY_SIZE = 200;\r\n\r\n/**\r\n * The base implementation of `_.uniqBy` without support for iteratee shorthands.\r\n *\r\n * @private\r\n * @param {Array} array The array to inspect.\r\n * @param {Function} [iteratee] The iteratee invoked per element.\r\n * @param {Function} [comparator] The comparator invoked per element.\r\n * @returns {Array} Returns the new duplicate free array.\r\n */\r\nfunction baseUniq(array, iteratee, comparator) {\r\n  var index = -1,\r\n      includes = arrayIncludes,\r\n      length = array.length,\r\n      isCommon = true,\r\n      result = [],\r\n      seen = result;\r\n\r\n  if (comparator) {\r\n    isCommon = false;\r\n    includes = arrayIncludesWith;\r\n  }\r\n  else if (length >= LARGE_ARRAY_SIZE) {\r\n    var set = iteratee ? null : createSet(array);\r\n    if (set) {\r\n      return setToArray(set);\r\n    }\r\n    isCommon = false;\r\n    includes = cacheHas;\r\n    seen = new SetCache;\r\n  }\r\n  else {\r\n    seen = iteratee ? [] : result;\r\n  }\r\n  outer:\r\n  while (++index < length) {\r\n    var value = array[index],\r\n        computed = iteratee ? iteratee(value) : value;\r\n\r\n    value = (comparator || value !== 0) ? value : 0;\r\n    if (isCommon && computed === computed) {\r\n      var seenIndex = seen.length;\r\n      while (seenIndex--) {\r\n        if (seen[seenIndex] === computed) {\r\n          continue outer;\r\n        }\r\n      }\r\n      if (iteratee) {\r\n        seen.push(computed);\r\n      }\r\n      result.push(value);\r\n    }\r\n    else if (!includes(seen, computed, comparator)) {\r\n      if (seen !== result) {\r\n        seen.push(computed);\r\n      }\r\n      result.push(value);\r\n    }\r\n  }\r\n  return result;\r\n}\r\n\r\nmodule.exports = baseUniq;\r\n", "var baseUniq = require('./_baseUniq');\r\n\r\n/**\r\n * Creates a duplicate-free version of an array, using\r\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\r\n * for equality comparisons, in which only the first occurrence of each element\r\n * is kept. The order of result values is determined by the order they occur\r\n * in the array.\r\n *\r\n * @static\r\n * @memberOf _\r\n * @since 0.1.0\r\n * @category Array\r\n * @param {Array} array The array to inspect.\r\n * @returns {Array} Returns the new duplicate free array.\r\n * @example\r\n *\r\n * _.uniq([2, 1, 2]);\r\n * // => [2, 1]\r\n */\r\nfunction uniq(array) {\r\n  return (array && array.length) ? baseUniq(array) : [];\r\n}\r\n\r\nmodule.exports = uniq;\r\n", "import flatten from \"lodash/flatten\"\r\nimport uniq from \"lodash/uniq\"\r\nimport map from \"lodash/map\"\r\nimport { NonTerminal, Terminal } from \"@chevrotain/gast\"\r\nimport {\r\n  isBranchingProd,\r\n  isOptionalProd,\r\n  isSequenceProd\r\n} from \"@chevrotain/gast\"\r\nimport { IProduction, TokenType } from \"@chevrotain/types\"\r\n\r\nexport function first(prod: IProduction): TokenType[] {\r\n  /* istanbul ignore else */\r\n  if (prod instanceof NonTerminal) {\r\n    // this could in theory cause infinite loops if\r\n    // (1) prod A refs prod B.\r\n    // (2) prod B refs prod A\r\n    // (3) AB can match the empty set\r\n    // in other words a cycle where everything is optional so the first will keep\r\n    // looking ahead for the next optional part and will never exit\r\n    // currently there is no safeguard for this unique edge case because\r\n    // (1) not sure a grammar in which this can happen is useful for anything (productive)\r\n    return first((<NonTerminal>prod).referencedRule)\r\n  } else if (prod instanceof Terminal) {\r\n    return firstForTerminal(<Terminal>prod)\r\n  } else if (isSequenceProd(prod)) {\r\n    return firstForSequence(prod)\r\n  } else if (isBranchingProd(prod)) {\r\n    return firstForBranching(prod)\r\n  } else {\r\n    throw Error(\"non exhaustive match\")\r\n  }\r\n}\r\n\r\nexport function firstForSequence(prod: {\r\n  definition: IProduction[]\r\n}): TokenType[] {\r\n  let firstSet: TokenType[] = []\r\n  const seq = prod.definition\r\n  let nextSubProdIdx = 0\r\n  let hasInnerProdsRemaining = seq.length > nextSubProdIdx\r\n  let currSubProd\r\n  // so we enter the loop at least once (if the definition is not empty\r\n  let isLastInnerProdOptional = true\r\n  // scan a sequence until it's end or until we have found a NONE optional production in it\r\n  while (hasInnerProdsRemaining && isLastInnerProdOptional) {\r\n    currSubProd = seq[nextSubProdIdx]\r\n    isLastInnerProdOptional = isOptionalProd(currSubProd)\r\n    firstSet = firstSet.concat(first(currSubProd))\r\n    nextSubProdIdx = nextSubProdIdx + 1\r\n    hasInnerProdsRemaining = seq.length > nextSubProdIdx\r\n  }\r\n\r\n  return uniq(firstSet)\r\n}\r\n\r\nexport function firstForBranching(prod: {\r\n  definition: IProduction[]\r\n}): TokenType[] {\r\n  const allAlternativesFirsts: TokenType[][] = map(\r\n    prod.definition,\r\n    (innerProd) => {\r\n      return first(innerProd)\r\n    }\r\n  )\r\n  return uniq(flatten<TokenType>(allAlternativesFirsts))\r\n}\r\n\r\nexport function firstForTerminal(terminal: Terminal): TokenType[] {\r\n  return [terminal.terminalType]\r\n}\r\n", "// TODO: can this be removed? where is it used?\r\nexport const IN = \"_~IN~_\"\r\n", "import { RestWalker } from \"./rest\"\r\nimport { first } from \"./first\"\r\nimport forEach from \"lodash/forEach\"\r\nimport assign from \"lodash/assign\"\r\nimport { IN } from \"../constants\"\r\nimport { Alternative, NonTerminal, Rule, Terminal } from \"@chevrotain/gast\"\r\nimport { IProduction, TokenType } from \"@chevrotain/types\"\r\n\r\n// This ResyncFollowsWalker computes all of the follows required for RESYNC\r\n// (skipping reference production).\r\nexport class ResyncFollowsWalker extends RestWalker {\r\n  public follows: Record<string, TokenType[]> = {}\r\n\r\n  constructor(private topProd: Rule) {\r\n    super()\r\n  }\r\n\r\n  startWalking(): Record<string, TokenType[]> {\r\n    this.walk(this.topProd)\r\n    return this.follows\r\n  }\r\n\r\n  walkTerminal(\r\n    terminal: Terminal,\r\n    currRest: IProduction[],\r\n    prevRest: IProduction[]\r\n  ): void {\r\n    // do nothing! just like in the public sector after 13:00\r\n  }\r\n\r\n  walkProdRef(\r\n    refProd: NonTerminal,\r\n    currRest: IProduction[],\r\n    prevRest: IProduction[]\r\n  ): void {\r\n    const followName =\r\n      buildBetweenProdsFollowPrefix(refProd.referencedRule, refProd.idx) +\r\n      this.topProd.name\r\n    const fullRest: IProduction[] = currRest.concat(prevRest)\r\n    const restProd = new Alternative({ definition: fullRest })\r\n    const t_in_topProd_follows = first(restProd)\r\n    this.follows[followName] = t_in_topProd_follows\r\n  }\r\n}\r\n\r\nexport function computeAllProdsFollows(\r\n  topProductions: Rule[]\r\n): Record<string, TokenType[]> {\r\n  const reSyncFollows = {}\r\n\r\n  forEach(topProductions, (topProd) => {\r\n    const currRefsFollow = new ResyncFollowsWalker(topProd).startWalking()\r\n    assign(reSyncFollows, currRefsFollow)\r\n  })\r\n  return reSyncFollows\r\n}\r\n\r\nexport function buildBetweenProdsFollowPrefix(\r\n  inner: Rule,\r\n  occurenceInParent: number\r\n): string {\r\n  return inner.name + occurenceInParent + IN\r\n}\r\n\r\nexport function buildInProdFollowPrefix(terminal: Terminal): string {\r\n  const terminalName = terminal.terminalType.name\r\n  return terminalName + terminal.idx + IN\r\n}\r\n", "/**\r\n * Checks if `value` is `undefined`.\r\n *\r\n * @static\r\n * @since 0.1.0\r\n * @memberOf _\r\n * @category Lang\r\n * @param {*} value The value to check.\r\n * @returns {boolean} Returns `true` if `value` is `undefined`, else `false`.\r\n * @example\r\n *\r\n * _.isUndefined(void 0);\r\n * // => true\r\n *\r\n * _.isUndefined(null);\r\n * // => false\r\n */\r\nfunction isUndefined(value) {\r\n  return value === undefined;\r\n}\r\n\r\nmodule.exports = isUndefined;\r\n", ";(function(root, factory) {\r\n    // istanbul ignore next\r\n    if (typeof define === \"function\" && define.amd) {\r\n        // istanbul ignore next\r\n        define([], factory)\r\n    } else if (typeof module === \"object\" && module.exports) {\r\n        module.exports = factory()\r\n    } else {\r\n        // istanbul ignore next\r\n        root.regexpToAst = factory()\r\n    }\r\n})(\r\n    typeof self !== \"undefined\"\r\n        ? // istanbul ignore next\r\n          self\r\n        : this,\r\n    function() {\r\n        // references\r\n        // https://hackernoon.com/the-madness-of-parsing-real-world-javascript-regexps-d9ee336df983\r\n        // https://www.ecma-international.org/ecma-262/8.0/index.html#prod-Pattern\r\n        function RegExpParser() {}\r\n\r\n        RegExpParser.prototype.saveState = function() {\r\n            return {\r\n                idx: this.idx,\r\n                input: this.input,\r\n                groupIdx: this.groupIdx\r\n            }\r\n        }\r\n\r\n        RegExpParser.prototype.restoreState = function(newState) {\r\n            this.idx = newState.idx\r\n            this.input = newState.input\r\n            this.groupIdx = newState.groupIdx\r\n        }\r\n\r\n        RegExpParser.prototype.pattern = function(input) {\r\n            // parser state\r\n            this.idx = 0\r\n            this.input = input\r\n            this.groupIdx = 0\r\n\r\n            this.consumeChar(\"/\")\r\n            var value = this.disjunction()\r\n            this.consumeChar(\"/\")\r\n\r\n            var flags = {\r\n                type: \"Flags\",\r\n                loc: { begin: this.idx, end: input.length },\r\n                global: false,\r\n                ignoreCase: false,\r\n                multiLine: false,\r\n                unicode: false,\r\n                sticky: false\r\n            }\r\n\r\n            while (this.isRegExpFlag()) {\r\n                switch (this.popChar()) {\r\n                    case \"g\":\r\n                        addFlag(flags, \"global\")\r\n                        break\r\n                    case \"i\":\r\n                        addFlag(flags, \"ignoreCase\")\r\n                        break\r\n                    case \"m\":\r\n                        addFlag(flags, \"multiLine\")\r\n                        break\r\n                    case \"u\":\r\n                        addFlag(flags, \"unicode\")\r\n                        break\r\n                    case \"y\":\r\n                        addFlag(flags, \"sticky\")\r\n                        break\r\n                }\r\n            }\r\n\r\n            if (this.idx !== this.input.length) {\r\n                throw Error(\r\n                    \"Redundant input: \" + this.input.substring(this.idx)\r\n                )\r\n            }\r\n            return {\r\n                type: \"Pattern\",\r\n                flags: flags,\r\n                value: value,\r\n                loc: this.loc(0)\r\n            }\r\n        }\r\n\r\n        RegExpParser.prototype.disjunction = function() {\r\n            var alts = []\r\n            var begin = this.idx\r\n\r\n            alts.push(this.alternative())\r\n\r\n            while (this.peekChar() === \"|\") {\r\n                this.consumeChar(\"|\")\r\n                alts.push(this.alternative())\r\n            }\r\n\r\n            return { type: \"Disjunction\", value: alts, loc: this.loc(begin) }\r\n        }\r\n\r\n        RegExpParser.prototype.alternative = function() {\r\n            var terms = []\r\n            var begin = this.idx\r\n\r\n            while (this.isTerm()) {\r\n                terms.push(this.term())\r\n            }\r\n\r\n            return { type: \"Alternative\", value: terms, loc: this.loc(begin) }\r\n        }\r\n\r\n        RegExpParser.prototype.term = function() {\r\n            if (this.isAssertion()) {\r\n                return this.assertion()\r\n            } else {\r\n                return this.atom()\r\n            }\r\n        }\r\n\r\n        RegExpParser.prototype.assertion = function() {\r\n            var begin = this.idx\r\n            switch (this.popChar()) {\r\n                case \"^\":\r\n                    return {\r\n                        type: \"StartAnchor\",\r\n                        loc: this.loc(begin)\r\n                    }\r\n                case \"$\":\r\n                    return { type: \"EndAnchor\", loc: this.loc(begin) }\r\n                // '\\b' or '\\B'\r\n                case \"\\\\\":\r\n                    switch (this.popChar()) {\r\n                        case \"b\":\r\n                            return {\r\n                                type: \"WordBoundary\",\r\n                                loc: this.loc(begin)\r\n                            }\r\n                        case \"B\":\r\n                            return {\r\n                                type: \"NonWordBoundary\",\r\n                                loc: this.loc(begin)\r\n                            }\r\n                    }\r\n                    // istanbul ignore next\r\n                    throw Error(\"Invalid Assertion Escape\")\r\n                // '(?=' or '(?!'\r\n                case \"(\":\r\n                    this.consumeChar(\"?\")\r\n\r\n                    var type\r\n                    switch (this.popChar()) {\r\n                        case \"=\":\r\n                            type = \"Lookahead\"\r\n                            break\r\n                        case \"!\":\r\n                            type = \"NegativeLookahead\"\r\n                            break\r\n                    }\r\n                    ASSERT_EXISTS(type)\r\n\r\n                    var disjunction = this.disjunction()\r\n\r\n                    this.consumeChar(\")\")\r\n\r\n                    return {\r\n                        type: type,\r\n                        value: disjunction,\r\n                        loc: this.loc(begin)\r\n                    }\r\n            }\r\n            // istanbul ignore next\r\n            ASSERT_NEVER_REACH_HERE()\r\n        }\r\n\r\n        RegExpParser.prototype.quantifier = function(isBacktracking) {\r\n            var range\r\n            var begin = this.idx\r\n            switch (this.popChar()) {\r\n                case \"*\":\r\n                    range = {\r\n                        atLeast: 0,\r\n                        atMost: Infinity\r\n                    }\r\n                    break\r\n                case \"+\":\r\n                    range = {\r\n                        atLeast: 1,\r\n                        atMost: Infinity\r\n                    }\r\n                    break\r\n                case \"?\":\r\n                    range = {\r\n                        atLeast: 0,\r\n                        atMost: 1\r\n                    }\r\n                    break\r\n                case \"{\":\r\n                    var atLeast = this.integerIncludingZero()\r\n                    switch (this.popChar()) {\r\n                        case \"}\":\r\n                            range = {\r\n                                atLeast: atLeast,\r\n                                atMost: atLeast\r\n                            }\r\n                            break\r\n                        case \",\":\r\n                            var atMost\r\n                            if (this.isDigit()) {\r\n                                atMost = this.integerIncludingZero()\r\n                                range = {\r\n                                    atLeast: atLeast,\r\n                                    atMost: atMost\r\n                                }\r\n                            } else {\r\n                                range = {\r\n                                    atLeast: atLeast,\r\n                                    atMost: Infinity\r\n                                }\r\n                            }\r\n                            this.consumeChar(\"}\")\r\n                            break\r\n                    }\r\n                    // throwing exceptions from \"ASSERT_EXISTS\" during backtracking\r\n                    // causes severe performance degradations\r\n                    if (isBacktracking === true && range === undefined) {\r\n                        return undefined\r\n                    }\r\n                    ASSERT_EXISTS(range)\r\n                    break\r\n            }\r\n\r\n            // throwing exceptions from \"ASSERT_EXISTS\" during backtracking\r\n            // causes severe performance degradations\r\n            if (isBacktracking === true && range === undefined) {\r\n                return undefined\r\n            }\r\n\r\n            ASSERT_EXISTS(range)\r\n\r\n            if (this.peekChar(0) === \"?\") {\r\n                this.consumeChar(\"?\")\r\n                range.greedy = false\r\n            } else {\r\n                range.greedy = true\r\n            }\r\n\r\n            range.type = \"Quantifier\"\r\n            range.loc = this.loc(begin)\r\n            return range\r\n        }\r\n\r\n        RegExpParser.prototype.atom = function() {\r\n            var atom\r\n            var begin = this.idx\r\n            switch (this.peekChar()) {\r\n                case \".\":\r\n                    atom = this.dotAll()\r\n                    break\r\n                case \"\\\\\":\r\n                    atom = this.atomEscape()\r\n                    break\r\n                case \"[\":\r\n                    atom = this.characterClass()\r\n                    break\r\n                case \"(\":\r\n                    atom = this.group()\r\n                    break\r\n            }\r\n\r\n            if (atom === undefined && this.isPatternCharacter()) {\r\n                atom = this.patternCharacter()\r\n            }\r\n\r\n            ASSERT_EXISTS(atom)\r\n\r\n            atom.loc = this.loc(begin)\r\n\r\n            if (this.isQuantifier()) {\r\n                atom.quantifier = this.quantifier()\r\n            }\r\n\r\n            return atom\r\n        }\r\n\r\n        RegExpParser.prototype.dotAll = function() {\r\n            this.consumeChar(\".\")\r\n            return {\r\n                type: \"Set\",\r\n                complement: true,\r\n                value: [cc(\"\\n\"), cc(\"\\r\"), cc(\"\\u2028\"), cc(\"\\u2029\")]\r\n            }\r\n        }\r\n\r\n        RegExpParser.prototype.atomEscape = function() {\r\n            this.consumeChar(\"\\\\\")\r\n\r\n            switch (this.peekChar()) {\r\n                case \"1\":\r\n                case \"2\":\r\n                case \"3\":\r\n                case \"4\":\r\n                case \"5\":\r\n                case \"6\":\r\n                case \"7\":\r\n                case \"8\":\r\n                case \"9\":\r\n                    return this.decimalEscapeAtom()\r\n                case \"d\":\r\n                case \"D\":\r\n                case \"s\":\r\n                case \"S\":\r\n                case \"w\":\r\n                case \"W\":\r\n                    return this.characterClassEscape()\r\n                case \"f\":\r\n                case \"n\":\r\n                case \"r\":\r\n                case \"t\":\r\n                case \"v\":\r\n                    return this.controlEscapeAtom()\r\n                case \"c\":\r\n                    return this.controlLetterEscapeAtom()\r\n                case \"0\":\r\n                    return this.nulCharacterAtom()\r\n                case \"x\":\r\n                    return this.hexEscapeSequenceAtom()\r\n                case \"u\":\r\n                    return this.regExpUnicodeEscapeSequenceAtom()\r\n                default:\r\n                    return this.identityEscapeAtom()\r\n            }\r\n        }\r\n\r\n        RegExpParser.prototype.decimalEscapeAtom = function() {\r\n            var value = this.positiveInteger()\r\n\r\n            return { type: \"GroupBackReference\", value: value }\r\n        }\r\n\r\n        RegExpParser.prototype.characterClassEscape = function() {\r\n            var set\r\n            var complement = false\r\n            switch (this.popChar()) {\r\n                case \"d\":\r\n                    set = digitsCharCodes\r\n                    break\r\n                case \"D\":\r\n                    set = digitsCharCodes\r\n                    complement = true\r\n                    break\r\n                case \"s\":\r\n                    set = whitespaceCodes\r\n                    break\r\n                case \"S\":\r\n                    set = whitespaceCodes\r\n                    complement = true\r\n                    break\r\n                case \"w\":\r\n                    set = wordCharCodes\r\n                    break\r\n                case \"W\":\r\n                    set = wordCharCodes\r\n                    complement = true\r\n                    break\r\n            }\r\n\r\n            ASSERT_EXISTS(set)\r\n\r\n            return { type: \"Set\", value: set, complement: complement }\r\n        }\r\n\r\n        RegExpParser.prototype.controlEscapeAtom = function() {\r\n            var escapeCode\r\n            switch (this.popChar()) {\r\n                case \"f\":\r\n                    escapeCode = cc(\"\\f\")\r\n                    break\r\n                case \"n\":\r\n                    escapeCode = cc(\"\\n\")\r\n                    break\r\n                case \"r\":\r\n                    escapeCode = cc(\"\\r\")\r\n                    break\r\n                case \"t\":\r\n                    escapeCode = cc(\"\\t\")\r\n                    break\r\n                case \"v\":\r\n                    escapeCode = cc(\"\\v\")\r\n                    break\r\n            }\r\n            ASSERT_EXISTS(escapeCode)\r\n\r\n            return { type: \"Character\", value: escapeCode }\r\n        }\r\n\r\n        RegExpParser.prototype.controlLetterEscapeAtom = function() {\r\n            this.consumeChar(\"c\")\r\n            var letter = this.popChar()\r\n            if (/[a-zA-Z]/.test(letter) === false) {\r\n                throw Error(\"Invalid \")\r\n            }\r\n\r\n            var letterCode = letter.toUpperCase().charCodeAt(0) - 64\r\n            return { type: \"Character\", value: letterCode }\r\n        }\r\n\r\n        RegExpParser.prototype.nulCharacterAtom = function() {\r\n            // TODO implement '[lookahead ∉ DecimalDigit]'\r\n            // TODO: for the deprecated octal escape sequence\r\n            this.consumeChar(\"0\")\r\n            return { type: \"Character\", value: cc(\"\\0\") }\r\n        }\r\n\r\n        RegExpParser.prototype.hexEscapeSequenceAtom = function() {\r\n            this.consumeChar(\"x\")\r\n            return this.parseHexDigits(2)\r\n        }\r\n\r\n        RegExpParser.prototype.regExpUnicodeEscapeSequenceAtom = function() {\r\n            this.consumeChar(\"u\")\r\n            return this.parseHexDigits(4)\r\n        }\r\n\r\n        RegExpParser.prototype.identityEscapeAtom = function() {\r\n            // TODO: implement \"SourceCharacter but not UnicodeIDContinue\"\r\n            // // http://unicode.org/reports/tr31/#Specific_Character_Adjustments\r\n            var escapedChar = this.popChar()\r\n            return { type: \"Character\", value: cc(escapedChar) }\r\n        }\r\n\r\n        RegExpParser.prototype.classPatternCharacterAtom = function() {\r\n            switch (this.peekChar()) {\r\n                // istanbul ignore next\r\n                case \"\\n\":\r\n                // istanbul ignore next\r\n                case \"\\r\":\r\n                // istanbul ignore next\r\n                case \"\\u2028\":\r\n                // istanbul ignore next\r\n                case \"\\u2029\":\r\n                // istanbul ignore next\r\n                case \"\\\\\":\r\n                // istanbul ignore next\r\n                case \"]\":\r\n                    throw Error(\"TBD\")\r\n                default:\r\n                    var nextChar = this.popChar()\r\n                    return { type: \"Character\", value: cc(nextChar) }\r\n            }\r\n        }\r\n\r\n        RegExpParser.prototype.characterClass = function() {\r\n            var set = []\r\n            var complement = false\r\n            this.consumeChar(\"[\")\r\n            if (this.peekChar(0) === \"^\") {\r\n                this.consumeChar(\"^\")\r\n                complement = true\r\n            }\r\n\r\n            while (this.isClassAtom()) {\r\n                var from = this.classAtom()\r\n                var isFromSingleChar = from.type === \"Character\"\r\n                if (isFromSingleChar && this.isRangeDash()) {\r\n                    this.consumeChar(\"-\")\r\n                    var to = this.classAtom()\r\n                    var isToSingleChar = to.type === \"Character\"\r\n\r\n                    // a range can only be used when both sides are single characters\r\n                    if (isToSingleChar) {\r\n                        if (to.value < from.value) {\r\n                            throw Error(\"Range out of order in character class\")\r\n                        }\r\n                        set.push({ from: from.value, to: to.value })\r\n                    } else {\r\n                        // literal dash\r\n                        insertToSet(from.value, set)\r\n                        set.push(cc(\"-\"))\r\n                        insertToSet(to.value, set)\r\n                    }\r\n                } else {\r\n                    insertToSet(from.value, set)\r\n                }\r\n            }\r\n\r\n            this.consumeChar(\"]\")\r\n\r\n            return { type: \"Set\", complement: complement, value: set }\r\n        }\r\n\r\n        RegExpParser.prototype.classAtom = function() {\r\n            switch (this.peekChar()) {\r\n                // istanbul ignore next\r\n                case \"]\":\r\n                // istanbul ignore next\r\n                case \"\\n\":\r\n                // istanbul ignore next\r\n                case \"\\r\":\r\n                // istanbul ignore next\r\n                case \"\\u2028\":\r\n                // istanbul ignore next\r\n                case \"\\u2029\":\r\n                    throw Error(\"TBD\")\r\n                case \"\\\\\":\r\n                    return this.classEscape()\r\n                default:\r\n                    return this.classPatternCharacterAtom()\r\n            }\r\n        }\r\n\r\n        RegExpParser.prototype.classEscape = function() {\r\n            this.consumeChar(\"\\\\\")\r\n            switch (this.peekChar()) {\r\n                // Matches a backspace.\r\n                // (Not to be confused with \\b word boundary outside characterClass)\r\n                case \"b\":\r\n                    this.consumeChar(\"b\")\r\n                    return { type: \"Character\", value: cc(\"\\u0008\") }\r\n                case \"d\":\r\n                case \"D\":\r\n                case \"s\":\r\n                case \"S\":\r\n                case \"w\":\r\n                case \"W\":\r\n                    return this.characterClassEscape()\r\n                case \"f\":\r\n                case \"n\":\r\n                case \"r\":\r\n                case \"t\":\r\n                case \"v\":\r\n                    return this.controlEscapeAtom()\r\n                case \"c\":\r\n                    return this.controlLetterEscapeAtom()\r\n                case \"0\":\r\n                    return this.nulCharacterAtom()\r\n                case \"x\":\r\n                    return this.hexEscapeSequenceAtom()\r\n                case \"u\":\r\n                    return this.regExpUnicodeEscapeSequenceAtom()\r\n                default:\r\n                    return this.identityEscapeAtom()\r\n            }\r\n        }\r\n\r\n        RegExpParser.prototype.group = function() {\r\n            var capturing = true\r\n            this.consumeChar(\"(\")\r\n            switch (this.peekChar(0)) {\r\n                case \"?\":\r\n                    this.consumeChar(\"?\")\r\n                    this.consumeChar(\":\")\r\n                    capturing = false\r\n                    break\r\n                default:\r\n                    this.groupIdx++\r\n                    break\r\n            }\r\n            var value = this.disjunction()\r\n            this.consumeChar(\")\")\r\n\r\n            var groupAst = {\r\n                type: \"Group\",\r\n                capturing: capturing,\r\n                value: value\r\n            }\r\n\r\n            if (capturing) {\r\n                groupAst.idx = this.groupIdx\r\n            }\r\n\r\n            return groupAst\r\n        }\r\n\r\n        RegExpParser.prototype.positiveInteger = function() {\r\n            var number = this.popChar()\r\n\r\n            // istanbul ignore next - can't ever get here due to previous lookahead checks\r\n            // still implementing this error checking in case this ever changes.\r\n            if (decimalPatternNoZero.test(number) === false) {\r\n                throw Error(\"Expecting a positive integer\")\r\n            }\r\n\r\n            while (decimalPattern.test(this.peekChar(0))) {\r\n                number += this.popChar()\r\n            }\r\n\r\n            return parseInt(number, 10)\r\n        }\r\n\r\n        RegExpParser.prototype.integerIncludingZero = function() {\r\n            var number = this.popChar()\r\n            if (decimalPattern.test(number) === false) {\r\n                throw Error(\"Expecting an integer\")\r\n            }\r\n\r\n            while (decimalPattern.test(this.peekChar(0))) {\r\n                number += this.popChar()\r\n            }\r\n\r\n            return parseInt(number, 10)\r\n        }\r\n\r\n        RegExpParser.prototype.patternCharacter = function() {\r\n            var nextChar = this.popChar()\r\n            switch (nextChar) {\r\n                // istanbul ignore next\r\n                case \"\\n\":\r\n                // istanbul ignore next\r\n                case \"\\r\":\r\n                // istanbul ignore next\r\n                case \"\\u2028\":\r\n                // istanbul ignore next\r\n                case \"\\u2029\":\r\n                // istanbul ignore next\r\n                case \"^\":\r\n                // istanbul ignore next\r\n                case \"$\":\r\n                // istanbul ignore next\r\n                case \"\\\\\":\r\n                // istanbul ignore next\r\n                case \".\":\r\n                // istanbul ignore next\r\n                case \"*\":\r\n                // istanbul ignore next\r\n                case \"+\":\r\n                // istanbul ignore next\r\n                case \"?\":\r\n                // istanbul ignore next\r\n                case \"(\":\r\n                // istanbul ignore next\r\n                case \")\":\r\n                // istanbul ignore next\r\n                case \"[\":\r\n                // istanbul ignore next\r\n                case \"|\":\r\n                    // istanbul ignore next\r\n                    throw Error(\"TBD\")\r\n                default:\r\n                    return { type: \"Character\", value: cc(nextChar) }\r\n            }\r\n        }\r\n        RegExpParser.prototype.isRegExpFlag = function() {\r\n            switch (this.peekChar(0)) {\r\n                case \"g\":\r\n                case \"i\":\r\n                case \"m\":\r\n                case \"u\":\r\n                case \"y\":\r\n                    return true\r\n                default:\r\n                    return false\r\n            }\r\n        }\r\n\r\n        RegExpParser.prototype.isRangeDash = function() {\r\n            return this.peekChar() === \"-\" && this.isClassAtom(1)\r\n        }\r\n\r\n        RegExpParser.prototype.isDigit = function() {\r\n            return decimalPattern.test(this.peekChar(0))\r\n        }\r\n\r\n        RegExpParser.prototype.isClassAtom = function(howMuch) {\r\n            if (howMuch === undefined) {\r\n                howMuch = 0\r\n            }\r\n\r\n            switch (this.peekChar(howMuch)) {\r\n                case \"]\":\r\n                case \"\\n\":\r\n                case \"\\r\":\r\n                case \"\\u2028\":\r\n                case \"\\u2029\":\r\n                    return false\r\n                default:\r\n                    return true\r\n            }\r\n        }\r\n\r\n        RegExpParser.prototype.isTerm = function() {\r\n            return this.isAtom() || this.isAssertion()\r\n        }\r\n\r\n        RegExpParser.prototype.isAtom = function() {\r\n            if (this.isPatternCharacter()) {\r\n                return true\r\n            }\r\n\r\n            switch (this.peekChar(0)) {\r\n                case \".\":\r\n                case \"\\\\\": // atomEscape\r\n                case \"[\": // characterClass\r\n                // TODO: isAtom must be called before isAssertion - disambiguate\r\n                case \"(\": // group\r\n                    return true\r\n                default:\r\n                    return false\r\n            }\r\n        }\r\n\r\n        RegExpParser.prototype.isAssertion = function() {\r\n            switch (this.peekChar(0)) {\r\n                case \"^\":\r\n                case \"$\":\r\n                    return true\r\n                // '\\b' or '\\B'\r\n                case \"\\\\\":\r\n                    switch (this.peekChar(1)) {\r\n                        case \"b\":\r\n                        case \"B\":\r\n                            return true\r\n                        default:\r\n                            return false\r\n                    }\r\n                // '(?=' or '(?!'\r\n                case \"(\":\r\n                    return (\r\n                        this.peekChar(1) === \"?\" &&\r\n                        (this.peekChar(2) === \"=\" || this.peekChar(2) === \"!\")\r\n                    )\r\n                default:\r\n                    return false\r\n            }\r\n        }\r\n\r\n        RegExpParser.prototype.isQuantifier = function() {\r\n            var prevState = this.saveState()\r\n            try {\r\n                return this.quantifier(true) !== undefined\r\n            } catch (e) {\r\n                return false\r\n            } finally {\r\n                this.restoreState(prevState)\r\n            }\r\n        }\r\n\r\n        RegExpParser.prototype.isPatternCharacter = function() {\r\n            switch (this.peekChar()) {\r\n                case \"^\":\r\n                case \"$\":\r\n                case \"\\\\\":\r\n                case \".\":\r\n                case \"*\":\r\n                case \"+\":\r\n                case \"?\":\r\n                case \"(\":\r\n                case \")\":\r\n                case \"[\":\r\n                case \"|\":\r\n                case \"/\":\r\n                case \"\\n\":\r\n                case \"\\r\":\r\n                case \"\\u2028\":\r\n                case \"\\u2029\":\r\n                    return false\r\n                default:\r\n                    return true\r\n            }\r\n        }\r\n\r\n        RegExpParser.prototype.parseHexDigits = function(howMany) {\r\n            var hexString = \"\"\r\n            for (var i = 0; i < howMany; i++) {\r\n                var hexChar = this.popChar()\r\n                if (hexDigitPattern.test(hexChar) === false) {\r\n                    throw Error(\"Expecting a HexDecimal digits\")\r\n                }\r\n                hexString += hexChar\r\n            }\r\n            var charCode = parseInt(hexString, 16)\r\n            return { type: \"Character\", value: charCode }\r\n        }\r\n\r\n        RegExpParser.prototype.peekChar = function(howMuch) {\r\n            if (howMuch === undefined) {\r\n                howMuch = 0\r\n            }\r\n            return this.input[this.idx + howMuch]\r\n        }\r\n\r\n        RegExpParser.prototype.popChar = function() {\r\n            var nextChar = this.peekChar(0)\r\n            this.consumeChar()\r\n            return nextChar\r\n        }\r\n\r\n        RegExpParser.prototype.consumeChar = function(char) {\r\n            if (char !== undefined && this.input[this.idx] !== char) {\r\n                throw Error(\r\n                    \"Expected: '\" +\r\n                        char +\r\n                        \"' but found: '\" +\r\n                        this.input[this.idx] +\r\n                        \"' at offset: \" +\r\n                        this.idx\r\n                )\r\n            }\r\n\r\n            if (this.idx >= this.input.length) {\r\n                throw Error(\"Unexpected end of input\")\r\n            }\r\n            this.idx++\r\n        }\r\n\r\n        RegExpParser.prototype.loc = function(begin) {\r\n            return { begin: begin, end: this.idx }\r\n        }\r\n\r\n        // consts and utilities\r\n        var hexDigitPattern = /[0-9a-fA-F]/\r\n        var decimalPattern = /[0-9]/\r\n        var decimalPatternNoZero = /[1-9]/\r\n\r\n        function cc(char) {\r\n            return char.charCodeAt(0)\r\n        }\r\n\r\n        function insertToSet(item, set) {\r\n            if (item.length !== undefined) {\r\n                item.forEach(function(subItem) {\r\n                    set.push(subItem)\r\n                })\r\n            } else {\r\n                set.push(item)\r\n            }\r\n        }\r\n\r\n        function addFlag(flagObj, flagKey) {\r\n            if (flagObj[flagKey] === true) {\r\n                throw \"duplicate flag \" + flagKey\r\n            }\r\n\r\n            flagObj[flagKey] = true\r\n        }\r\n\r\n        function ASSERT_EXISTS(obj) {\r\n            // istanbul ignore next\r\n            if (obj === undefined) {\r\n                throw Error(\"Internal Error - Should never get here!\")\r\n            }\r\n        }\r\n\r\n        // istanbul ignore next\r\n        function ASSERT_NEVER_REACH_HERE() {\r\n            throw Error(\"Internal Error - Should never get here!\")\r\n        }\r\n\r\n        var i\r\n        var digitsCharCodes = []\r\n        for (i = cc(\"0\"); i <= cc(\"9\"); i++) {\r\n            digitsCharCodes.push(i)\r\n        }\r\n\r\n        var wordCharCodes = [cc(\"_\")].concat(digitsCharCodes)\r\n        for (i = cc(\"a\"); i <= cc(\"z\"); i++) {\r\n            wordCharCodes.push(i)\r\n        }\r\n\r\n        for (i = cc(\"A\"); i <= cc(\"Z\"); i++) {\r\n            wordCharCodes.push(i)\r\n        }\r\n\r\n        // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp#character-classes\r\n        var whitespaceCodes = [\r\n            cc(\" \"),\r\n            cc(\"\\f\"),\r\n            cc(\"\\n\"),\r\n            cc(\"\\r\"),\r\n            cc(\"\\t\"),\r\n            cc(\"\\v\"),\r\n            cc(\"\\t\"),\r\n            cc(\"\\u00a0\"),\r\n            cc(\"\\u1680\"),\r\n            cc(\"\\u2000\"),\r\n            cc(\"\\u2001\"),\r\n            cc(\"\\u2002\"),\r\n            cc(\"\\u2003\"),\r\n            cc(\"\\u2004\"),\r\n            cc(\"\\u2005\"),\r\n            cc(\"\\u2006\"),\r\n            cc(\"\\u2007\"),\r\n            cc(\"\\u2008\"),\r\n            cc(\"\\u2009\"),\r\n            cc(\"\\u200a\"),\r\n            cc(\"\\u2028\"),\r\n            cc(\"\\u2029\"),\r\n            cc(\"\\u202f\"),\r\n            cc(\"\\u205f\"),\r\n            cc(\"\\u3000\"),\r\n            cc(\"\\ufeff\")\r\n        ]\r\n\r\n        function BaseRegExpVisitor() {}\r\n\r\n        BaseRegExpVisitor.prototype.visitChildren = function(node) {\r\n            for (var key in node) {\r\n                var child = node[key]\r\n                /* istanbul ignore else */\r\n                if (node.hasOwnProperty(key)) {\r\n                    if (child.type !== undefined) {\r\n                        this.visit(child)\r\n                    } else if (Array.isArray(child)) {\r\n                        child.forEach(function(subChild) {\r\n                            this.visit(subChild)\r\n                        }, this)\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        BaseRegExpVisitor.prototype.visit = function(node) {\r\n            switch (node.type) {\r\n                case \"Pattern\":\r\n                    this.visitPattern(node)\r\n                    break\r\n                case \"Flags\":\r\n                    this.visitFlags(node)\r\n                    break\r\n                case \"Disjunction\":\r\n                    this.visitDisjunction(node)\r\n                    break\r\n                case \"Alternative\":\r\n                    this.visitAlternative(node)\r\n                    break\r\n                case \"StartAnchor\":\r\n                    this.visitStartAnchor(node)\r\n                    break\r\n                case \"EndAnchor\":\r\n                    this.visitEndAnchor(node)\r\n                    break\r\n                case \"WordBoundary\":\r\n                    this.visitWordBoundary(node)\r\n                    break\r\n                case \"NonWordBoundary\":\r\n                    this.visitNonWordBoundary(node)\r\n                    break\r\n                case \"Lookahead\":\r\n                    this.visitLookahead(node)\r\n                    break\r\n                case \"NegativeLookahead\":\r\n                    this.visitNegativeLookahead(node)\r\n                    break\r\n                case \"Character\":\r\n                    this.visitCharacter(node)\r\n                    break\r\n                case \"Set\":\r\n                    this.visitSet(node)\r\n                    break\r\n                case \"Group\":\r\n                    this.visitGroup(node)\r\n                    break\r\n                case \"GroupBackReference\":\r\n                    this.visitGroupBackReference(node)\r\n                    break\r\n                case \"Quantifier\":\r\n                    this.visitQuantifier(node)\r\n                    break\r\n            }\r\n\r\n            this.visitChildren(node)\r\n        }\r\n\r\n        BaseRegExpVisitor.prototype.visitPattern = function(node) {}\r\n\r\n        BaseRegExpVisitor.prototype.visitFlags = function(node) {}\r\n\r\n        BaseRegExpVisitor.prototype.visitDisjunction = function(node) {}\r\n\r\n        BaseRegExpVisitor.prototype.visitAlternative = function(node) {}\r\n\r\n        // Assertion\r\n        BaseRegExpVisitor.prototype.visitStartAnchor = function(node) {}\r\n\r\n        BaseRegExpVisitor.prototype.visitEndAnchor = function(node) {}\r\n\r\n        BaseRegExpVisitor.prototype.visitWordBoundary = function(node) {}\r\n\r\n        BaseRegExpVisitor.prototype.visitNonWordBoundary = function(node) {}\r\n\r\n        BaseRegExpVisitor.prototype.visitLookahead = function(node) {}\r\n\r\n        BaseRegExpVisitor.prototype.visitNegativeLookahead = function(node) {}\r\n\r\n        // atoms\r\n        BaseRegExpVisitor.prototype.visitCharacter = function(node) {}\r\n\r\n        BaseRegExpVisitor.prototype.visitSet = function(node) {}\r\n\r\n        BaseRegExpVisitor.prototype.visitGroup = function(node) {}\r\n\r\n        BaseRegExpVisitor.prototype.visitGroupBackReference = function(node) {}\r\n\r\n        BaseRegExpVisitor.prototype.visitQuantifier = function(node) {}\r\n\r\n        return {\r\n            RegExpParser: RegExpParser,\r\n            BaseRegExpVisitor: BaseRegExpVisitor,\r\n            VERSION: \"0.5.0\"\r\n        }\r\n    }\r\n)\r\n", "/**\r\n * Gets the first element of `array`.\r\n *\r\n * @static\r\n * @memberOf _\r\n * @since 0.1.0\r\n * @alias first\r\n * @category Array\r\n * @param {Array} array The array to query.\r\n * @returns {*} Returns the first element of `array`.\r\n * @example\r\n *\r\n * _.head([1, 2, 3]);\r\n * // => 1\r\n *\r\n * _.head([]);\r\n * // => undefined\r\n */\r\nfunction head(array) {\r\n  return (array && array.length) ? array[0] : undefined;\r\n}\r\n\r\nmodule.exports = head;\r\n", "module.exports = require('./head');\r\n", "/**\r\n * Creates an array with all falsey values removed. The values `false`, `null`,\r\n * `0`, `\"\"`, `undefined`, and `NaN` are falsey.\r\n *\r\n * @static\r\n * @memberOf _\r\n * @since 0.1.0\r\n * @category Array\r\n * @param {Array} array The array to compact.\r\n * @returns {Array} Returns the new array of filtered values.\r\n * @example\r\n *\r\n * _.compact([0, 1, false, 2, '', 3]);\r\n * // => [1, 2, 3]\r\n */\r\nfunction compact(array) {\r\n  var index = -1,\r\n      length = array == null ? 0 : array.length,\r\n      resIndex = 0,\r\n      result = [];\r\n\r\n  while (++index < length) {\r\n    var value = array[index];\r\n    if (value) {\r\n      result[resIndex++] = value;\r\n    }\r\n  }\r\n  return result;\r\n}\r\n\r\nmodule.exports = compact;\r\n", "var baseEach = require('./_baseEach');\r\n\r\n/**\r\n * The base implementation of `_.filter` without support for iteratee shorthands.\r\n *\r\n * @private\r\n * @param {Array|Object} collection The collection to iterate over.\r\n * @param {Function} predicate The function invoked per iteration.\r\n * @returns {Array} Returns the new filtered array.\r\n */\r\nfunction baseFilter(collection, predicate) {\r\n  var result = [];\r\n  baseEach(collection, function(value, index, collection) {\r\n    if (predicate(value, index, collection)) {\r\n      result.push(value);\r\n    }\r\n  });\r\n  return result;\r\n}\r\n\r\nmodule.exports = baseFilter;\r\n", "/** Error message constants. */\r\nvar FUNC_ERROR_TEXT = 'Expected a function';\r\n\r\n/**\r\n * Creates a function that negates the result of the predicate `func`. The\r\n * `func` predicate is invoked with the `this` binding and arguments of the\r\n * created function.\r\n *\r\n * @static\r\n * @memberOf _\r\n * @since 3.0.0\r\n * @category Function\r\n * @param {Function} predicate The predicate to negate.\r\n * @returns {Function} Returns the new negated function.\r\n * @example\r\n *\r\n * function isEven(n) {\r\n *   return n % 2 == 0;\r\n * }\r\n *\r\n * _.filter([1, 2, 3, 4, 5, 6], _.negate(isEven));\r\n * // => [1, 3, 5]\r\n */\r\nfunction negate(predicate) {\r\n  if (typeof predicate != 'function') {\r\n    throw new TypeError(FUNC_ERROR_TEXT);\r\n  }\r\n  return function() {\r\n    var args = arguments;\r\n    switch (args.length) {\r\n      case 0: return !predicate.call(this);\r\n      case 1: return !predicate.call(this, args[0]);\r\n      case 2: return !predicate.call(this, args[0], args[1]);\r\n      case 3: return !predicate.call(this, args[0], args[1], args[2]);\r\n    }\r\n    return !predicate.apply(this, args);\r\n  };\r\n}\r\n\r\nmodule.exports = negate;\r\n", "var arrayFilter = require('./_arrayFilter'),\r\n    baseFilter = require('./_baseFilter'),\r\n    baseIteratee = require('./_baseIteratee'),\r\n    isArray = require('./isArray'),\r\n    negate = require('./negate');\r\n\r\n/**\r\n * The opposite of `_.filter`; this method returns the elements of `collection`\r\n * that `predicate` does **not** return truthy for.\r\n *\r\n * @static\r\n * @memberOf _\r\n * @since 0.1.0\r\n * @category Collection\r\n * @param {Array|Object} collection The collection to iterate over.\r\n * @param {Function} [predicate=_.identity] The function invoked per iteration.\r\n * @returns {Array} Returns the new filtered array.\r\n * @see _.filter\r\n * @example\r\n *\r\n * var users = [\r\n *   { 'user': 'barney', 'age': 36, 'active': false },\r\n *   { 'user': 'fred',   'age': 40, 'active': true }\r\n * ];\r\n *\r\n * _.reject(users, function(o) { return !o.active; });\r\n * // => objects for ['fred']\r\n *\r\n * // The `_.matches` iteratee shorthand.\r\n * _.reject(users, { 'age': 40, 'active': true });\r\n * // => objects for ['barney']\r\n *\r\n * // The `_.matchesProperty` iteratee shorthand.\r\n * _.reject(users, ['active', false]);\r\n * // => objects for ['fred']\r\n *\r\n * // The `_.property` iteratee shorthand.\r\n * _.reject(users, 'active');\r\n * // => objects for ['barney']\r\n */\r\nfunction reject(collection, predicate) {\r\n  var func = isArray(collection) ? arrayFilter : baseFilter;\r\n  return func(collection, negate(baseIteratee(predicate, 3)));\r\n}\r\n\r\nmodule.exports = reject;\r\n", "var SetCache = require('./_SetCache'),\r\n    arrayIncludes = require('./_arrayIncludes'),\r\n    arrayIncludesWith = require('./_arrayIncludesWith'),\r\n    arrayMap = require('./_arrayMap'),\r\n    baseUnary = require('./_baseUnary'),\r\n    cacheHas = require('./_cacheHas');\r\n\r\n/** Used as the size to enable large array optimizations. */\r\nvar LARGE_ARRAY_SIZE = 200;\r\n\r\n/**\r\n * The base implementation of methods like `_.difference` without support\r\n * for excluding multiple arrays or iteratee shorthands.\r\n *\r\n * @private\r\n * @param {Array} array The array to inspect.\r\n * @param {Array} values The values to exclude.\r\n * @param {Function} [iteratee] The iteratee invoked per element.\r\n * @param {Function} [comparator] The comparator invoked per element.\r\n * @returns {Array} Returns the new array of filtered values.\r\n */\r\nfunction baseDifference(array, values, iteratee, comparator) {\r\n  var index = -1,\r\n      includes = arrayIncludes,\r\n      isCommon = true,\r\n      length = array.length,\r\n      result = [],\r\n      valuesLength = values.length;\r\n\r\n  if (!length) {\r\n    return result;\r\n  }\r\n  if (iteratee) {\r\n    values = arrayMap(values, baseUnary(iteratee));\r\n  }\r\n  if (comparator) {\r\n    includes = arrayIncludesWith;\r\n    isCommon = false;\r\n  }\r\n  else if (values.length >= LARGE_ARRAY_SIZE) {\r\n    includes = cacheHas;\r\n    isCommon = false;\r\n    values = new SetCache(values);\r\n  }\r\n  outer:\r\n  while (++index < length) {\r\n    var value = array[index],\r\n        computed = iteratee == null ? value : iteratee(value);\r\n\r\n    value = (comparator || value !== 0) ? value : 0;\r\n    if (isCommon && computed === computed) {\r\n      var valuesIndex = valuesLength;\r\n      while (valuesIndex--) {\r\n        if (values[valuesIndex] === computed) {\r\n          continue outer;\r\n        }\r\n      }\r\n      result.push(value);\r\n    }\r\n    else if (!includes(values, computed, comparator)) {\r\n      result.push(value);\r\n    }\r\n  }\r\n  return result;\r\n}\r\n\r\nmodule.exports = baseDifference;\r\n", "var isArrayLike = require('./isArrayLike'),\r\n    isObjectLike = require('./isObjectLike');\r\n\r\n/**\r\n * This method is like `_.isArrayLike` except that it also checks if `value`\r\n * is an object.\r\n *\r\n * @static\r\n * @memberOf _\r\n * @since 4.0.0\r\n * @category Lang\r\n * @param {*} value The value to check.\r\n * @returns {boolean} Returns `true` if `value` is an array-like object,\r\n *  else `false`.\r\n * @example\r\n *\r\n * _.isArrayLikeObject([1, 2, 3]);\r\n * // => true\r\n *\r\n * _.isArrayLikeObject(document.body.children);\r\n * // => true\r\n *\r\n * _.isArrayLikeObject('abc');\r\n * // => false\r\n *\r\n * _.isArrayLikeObject(_.noop);\r\n * // => false\r\n */\r\nfunction isArrayLikeObject(value) {\r\n  return isObjectLike(value) && isArrayLike(value);\r\n}\r\n\r\nmodule.exports = isArrayLikeObject;\r\n", "var baseDifference = require('./_baseDifference'),\r\n    baseFlatten = require('./_baseFlatten'),\r\n    baseRest = require('./_baseRest'),\r\n    isArrayLikeObject = require('./isArrayLikeObject');\r\n\r\n/**\r\n * Creates an array of `array` values not included in the other given arrays\r\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\r\n * for equality comparisons. The order and references of result values are\r\n * determined by the first array.\r\n *\r\n * **Note:** Unlike `_.pullAll`, this method returns a new array.\r\n *\r\n * @static\r\n * @memberOf _\r\n * @since 0.1.0\r\n * @category Array\r\n * @param {Array} array The array to inspect.\r\n * @param {...Array} [values] The values to exclude.\r\n * @returns {Array} Returns the new array of filtered values.\r\n * @see _.without, _.xor\r\n * @example\r\n *\r\n * _.difference([2, 1], [2, 3]);\r\n * // => [1]\r\n */\r\nvar difference = baseRest(function(array, values) {\r\n  return isArrayLikeObject(array)\r\n    ? baseDifference(array, baseFlatten(values, 1, isArrayLikeObject, true))\r\n    : [];\r\n});\r\n\r\nmodule.exports = difference;\r\n", "var baseIndexOf = require('./_baseIndexOf'),\r\n    toInteger = require('./toInteger');\r\n\r\n/* Built-in method references for those with the same name as other `lodash` methods. */\r\nvar nativeMax = Math.max;\r\n\r\n/**\r\n * Gets the index at which the first occurrence of `value` is found in `array`\r\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\r\n * for equality comparisons. If `fromIndex` is negative, it's used as the\r\n * offset from the end of `array`.\r\n *\r\n * @static\r\n * @memberOf _\r\n * @since 0.1.0\r\n * @category Array\r\n * @param {Array} array The array to inspect.\r\n * @param {*} value The value to search for.\r\n * @param {number} [fromIndex=0] The index to search from.\r\n * @returns {number} Returns the index of the matched value, else `-1`.\r\n * @example\r\n *\r\n * _.indexOf([1, 2, 1, 2], 2);\r\n * // => 1\r\n *\r\n * // Search from the `fromIndex`.\r\n * _.indexOf([1, 2, 1, 2], 2, 2);\r\n * // => 3\r\n */\r\nfunction indexOf(array, value, fromIndex) {\r\n  var length = array == null ? 0 : array.length;\r\n  if (!length) {\r\n    return -1;\r\n  }\r\n  var index = fromIndex == null ? 0 : toInteger(fromIndex);\r\n  if (index < 0) {\r\n    index = nativeMax(length + index, 0);\r\n  }\r\n  return baseIndexOf(array, value, index);\r\n}\r\n\r\nmodule.exports = indexOf;\r\n", "var baseIteratee = require('./_baseIteratee'),\r\n    isArrayLike = require('./isArrayLike'),\r\n    keys = require('./keys');\r\n\r\n/**\r\n * Creates a `_.find` or `_.findLast` function.\r\n *\r\n * @private\r\n * @param {Function} findIndexFunc The function to find the collection index.\r\n * @returns {Function} Returns the new find function.\r\n */\r\nfunction createFind(findIndexFunc) {\r\n  return function(collection, predicate, fromIndex) {\r\n    var iterable = Object(collection);\r\n    if (!isArrayLike(collection)) {\r\n      var iteratee = baseIteratee(predicate, 3);\r\n      collection = keys(collection);\r\n      predicate = function(key) { return iteratee(iterable[key], key, iterable); };\r\n    }\r\n    var index = findIndexFunc(collection, predicate, fromIndex);\r\n    return index > -1 ? iterable[iteratee ? collection[index] : index] : undefined;\r\n  };\r\n}\r\n\r\nmodule.exports = createFind;\r\n", "var baseFindIndex = require('./_baseFindIndex'),\r\n    baseIteratee = require('./_baseIteratee'),\r\n    toInteger = require('./toInteger');\r\n\r\n/* Built-in method references for those with the same name as other `lodash` methods. */\r\nvar nativeMax = Math.max;\r\n\r\n/**\r\n * This method is like `_.find` except that it returns the index of the first\r\n * element `predicate` returns truthy for instead of the element itself.\r\n *\r\n * @static\r\n * @memberOf _\r\n * @since 1.1.0\r\n * @category Array\r\n * @param {Array} array The array to inspect.\r\n * @param {Function} [predicate=_.identity] The function invoked per iteration.\r\n * @param {number} [fromIndex=0] The index to search from.\r\n * @returns {number} Returns the index of the found element, else `-1`.\r\n * @example\r\n *\r\n * var users = [\r\n *   { 'user': 'barney',  'active': false },\r\n *   { 'user': 'fred',    'active': false },\r\n *   { 'user': 'pebbles', 'active': true }\r\n * ];\r\n *\r\n * _.findIndex(users, function(o) { return o.user == 'barney'; });\r\n * // => 0\r\n *\r\n * // The `_.matches` iteratee shorthand.\r\n * _.findIndex(users, { 'user': 'fred', 'active': false });\r\n * // => 1\r\n *\r\n * // The `_.matchesProperty` iteratee shorthand.\r\n * _.findIndex(users, ['active', false]);\r\n * // => 0\r\n *\r\n * // The `_.property` iteratee shorthand.\r\n * _.findIndex(users, 'active');\r\n * // => 2\r\n */\r\nfunction findIndex(array, predicate, fromIndex) {\r\n  var length = array == null ? 0 : array.length;\r\n  if (!length) {\r\n    return -1;\r\n  }\r\n  var index = fromIndex == null ? 0 : toInteger(fromIndex);\r\n  if (index < 0) {\r\n    index = nativeMax(length + index, 0);\r\n  }\r\n  return baseFindIndex(array, baseIteratee(predicate, 3), index);\r\n}\r\n\r\nmodule.exports = findIndex;\r\n", "var createFind = require('./_createFind'),\r\n    findIndex = require('./findIndex');\r\n\r\n/**\r\n * Iterates over elements of `collection`, returning the first element\r\n * `predicate` returns truthy for. The predicate is invoked with three\r\n * arguments: (value, index|key, collection).\r\n *\r\n * @static\r\n * @memberOf _\r\n * @since 0.1.0\r\n * @category Collection\r\n * @param {Array|Object} collection The collection to inspect.\r\n * @param {Function} [predicate=_.identity] The function invoked per iteration.\r\n * @param {number} [fromIndex=0] The index to search from.\r\n * @returns {*} Returns the matched element, else `undefined`.\r\n * @example\r\n *\r\n * var users = [\r\n *   { 'user': 'barney',  'age': 36, 'active': true },\r\n *   { 'user': 'fred',    'age': 40, 'active': false },\r\n *   { 'user': 'pebbles', 'age': 1,  'active': true }\r\n * ];\r\n *\r\n * _.find(users, function(o) { return o.age < 40; });\r\n * // => object for 'barney'\r\n *\r\n * // The `_.matches` iteratee shorthand.\r\n * _.find(users, { 'age': 1, 'active': true });\r\n * // => object for 'pebbles'\r\n *\r\n * // The `_.matchesProperty` iteratee shorthand.\r\n * _.find(users, ['active', false]);\r\n * // => object for 'fred'\r\n *\r\n * // The `_.property` iteratee shorthand.\r\n * _.find(users, 'active');\r\n * // => object for 'barney'\r\n */\r\nvar find = createFind(findIndex);\r\n\r\nmodule.exports = find;\r\n", "var arrayFilter = require('./_arrayFilter'),\r\n    baseFilter = require('./_baseFilter'),\r\n    baseIteratee = require('./_baseIteratee'),\r\n    isArray = require('./isArray');\r\n\r\n/**\r\n * Iterates over elements of `collection`, returning an array of all elements\r\n * `predicate` returns truthy for. The predicate is invoked with three\r\n * arguments: (value, index|key, collection).\r\n *\r\n * **Note:** Unlike `_.remove`, this method returns a new array.\r\n *\r\n * @static\r\n * @memberOf _\r\n * @since 0.1.0\r\n * @category Collection\r\n * @param {Array|Object} collection The collection to iterate over.\r\n * @param {Function} [predicate=_.identity] The function invoked per iteration.\r\n * @returns {Array} Returns the new filtered array.\r\n * @see _.reject\r\n * @example\r\n *\r\n * var users = [\r\n *   { 'user': 'barney', 'age': 36, 'active': true },\r\n *   { 'user': 'fred',   'age': 40, 'active': false }\r\n * ];\r\n *\r\n * _.filter(users, function(o) { return !o.active; });\r\n * // => objects for ['fred']\r\n *\r\n * // The `_.matches` iteratee shorthand.\r\n * _.filter(users, { 'age': 36, 'active': true });\r\n * // => objects for ['barney']\r\n *\r\n * // The `_.matchesProperty` iteratee shorthand.\r\n * _.filter(users, ['active', false]);\r\n * // => objects for ['fred']\r\n *\r\n * // The `_.property` iteratee shorthand.\r\n * _.filter(users, 'active');\r\n * // => objects for ['barney']\r\n *\r\n * // Combining several predicates using `_.overEvery` or `_.overSome`.\r\n * _.filter(users, _.overSome([{ 'age': 36 }, ['age', 40]]));\r\n * // => objects for ['fred', 'barney']\r\n */\r\nfunction filter(collection, predicate) {\r\n  var func = isArray(collection) ? arrayFilter : baseFilter;\r\n  return func(collection, baseIteratee(predicate, 3));\r\n}\r\n\r\nmodule.exports = filter;\r\n", "var baseRest = require('./_baseRest'),\r\n    eq = require('./eq'),\r\n    isIterateeCall = require('./_isIterateeCall'),\r\n    keysIn = require('./keysIn');\r\n\r\n/** Used for built-in method references. */\r\nvar objectProto = Object.prototype;\r\n\r\n/** Used to check objects for own properties. */\r\nvar hasOwnProperty = objectProto.hasOwnProperty;\r\n\r\n/**\r\n * Assigns own and inherited enumerable string keyed properties of source\r\n * objects to the destination object for all destination properties that\r\n * resolve to `undefined`. Source objects are applied from left to right.\r\n * Once a property is set, additional values of the same property are ignored.\r\n *\r\n * **Note:** This method mutates `object`.\r\n *\r\n * @static\r\n * @since 0.1.0\r\n * @memberOf _\r\n * @category Object\r\n * @param {Object} object The destination object.\r\n * @param {...Object} [sources] The source objects.\r\n * @returns {Object} Returns `object`.\r\n * @see _.defaultsDeep\r\n * @example\r\n *\r\n * _.defaults({ 'a': 1 }, { 'b': 2 }, { 'a': 3 });\r\n * // => { 'a': 1, 'b': 2 }\r\n */\r\nvar defaults = baseRest(function(object, sources) {\r\n  object = Object(object);\r\n\r\n  var index = -1;\r\n  var length = sources.length;\r\n  var guard = length > 2 ? sources[2] : undefined;\r\n\r\n  if (guard && isIterateeCall(sources[0], sources[1], guard)) {\r\n    length = 1;\r\n  }\r\n\r\n  while (++index < length) {\r\n    var source = sources[index];\r\n    var props = keysIn(source);\r\n    var propsIndex = -1;\r\n    var propsLength = props.length;\r\n\r\n    while (++propsIndex < propsLength) {\r\n      var key = props[propsIndex];\r\n      var value = object[key];\r\n\r\n      if (value === undefined ||\r\n          (eq(value, objectProto[key]) && !hasOwnProperty.call(object, key))) {\r\n        object[key] = source[key];\r\n      }\r\n    }\r\n  }\r\n\r\n  return object;\r\n});\r\n\r\nmodule.exports = defaults;\r\n", "/**\r\n * A specialized version of `_.reduce` for arrays without support for\r\n * iteratee shorthands.\r\n *\r\n * @private\r\n * @param {Array} [array] The array to iterate over.\r\n * @param {Function} iteratee The function invoked per iteration.\r\n * @param {*} [accumulator] The initial value.\r\n * @param {boolean} [initAccum] Specify using the first element of `array` as\r\n *  the initial value.\r\n * @returns {*} Returns the accumulated value.\r\n */\r\nfunction arrayReduce(array, iteratee, accumulator, initAccum) {\r\n  var index = -1,\r\n      length = array == null ? 0 : array.length;\r\n\r\n  if (initAccum && length) {\r\n    accumulator = array[++index];\r\n  }\r\n  while (++index < length) {\r\n    accumulator = iteratee(accumulator, array[index], index, array);\r\n  }\r\n  return accumulator;\r\n}\r\n\r\nmodule.exports = arrayReduce;\r\n", "/**\r\n * The base implementation of `_.reduce` and `_.reduceRight`, without support\r\n * for iteratee shorthands, which iterates over `collection` using `eachFunc`.\r\n *\r\n * @private\r\n * @param {Array|Object} collection The collection to iterate over.\r\n * @param {Function} iteratee The function invoked per iteration.\r\n * @param {*} accumulator The initial value.\r\n * @param {boolean} initAccum Specify using the first or last element of\r\n *  `collection` as the initial value.\r\n * @param {Function} eachFunc The function to iterate over `collection`.\r\n * @returns {*} Returns the accumulated value.\r\n */\r\nfunction baseReduce(collection, iteratee, accumulator, initAccum, eachFunc) {\r\n  eachFunc(collection, function(value, index, collection) {\r\n    accumulator = initAccum\r\n      ? (initAccum = false, value)\r\n      : iteratee(accumulator, value, index, collection);\r\n  });\r\n  return accumulator;\r\n}\r\n\r\nmodule.exports = baseReduce;\r\n", "var arrayReduce = require('./_arrayReduce'),\r\n    baseEach = require('./_baseEach'),\r\n    baseIteratee = require('./_baseIteratee'),\r\n    baseReduce = require('./_baseReduce'),\r\n    isArray = require('./isArray');\r\n\r\n/**\r\n * Reduces `collection` to a value which is the accumulated result of running\r\n * each element in `collection` thru `iteratee`, where each successive\r\n * invocation is supplied the return value of the previous. If `accumulator`\r\n * is not given, the first element of `collection` is used as the initial\r\n * value. The iteratee is invoked with four arguments:\r\n * (accumulator, value, index|key, collection).\r\n *\r\n * Many lodash methods are guarded to work as iteratees for methods like\r\n * `_.reduce`, `_.reduceRight`, and `_.transform`.\r\n *\r\n * The guarded methods are:\r\n * `assign`, `defaults`, `defaultsDeep`, `includes`, `merge`, `orderBy`,\r\n * and `sortBy`\r\n *\r\n * @static\r\n * @memberOf _\r\n * @since 0.1.0\r\n * @category Collection\r\n * @param {Array|Object} collection The collection to iterate over.\r\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\r\n * @param {*} [accumulator] The initial value.\r\n * @returns {*} Returns the accumulated value.\r\n * @see _.reduceRight\r\n * @example\r\n *\r\n * _.reduce([1, 2], function(sum, n) {\r\n *   return sum + n;\r\n * }, 0);\r\n * // => 3\r\n *\r\n * _.reduce({ 'a': 1, 'b': 2, 'c': 1 }, function(result, value, key) {\r\n *   (result[value] || (result[value] = [])).push(key);\r\n *   return result;\r\n * }, {});\r\n * // => { '1': ['a', 'c'], '2': ['b'] } (iteration order is not guaranteed)\r\n */\r\nfunction reduce(collection, iteratee, accumulator) {\r\n  var func = isArray(collection) ? arrayReduce : baseReduce,\r\n      initAccum = arguments.length < 3;\r\n\r\n  return func(collection, baseIteratee(iteratee, 4), accumulator, initAccum, baseEach);\r\n}\r\n\r\nmodule.exports = reduce;\r\n", "import {\r\n  Alternative,\r\n  Assertion,\r\n  Atom,\r\n  Disjunction,\r\n  RegExpParser,\r\n  RegExpPattern\r\n} from \"regexp-to-ast\"\r\n\r\nlet regExpAstCache: { [regex: string]: RegExpPattern } = {}\r\nconst regExpParser = new RegExpParser()\r\n\r\n// this should be moved to regexp-to-ast\r\nexport type ASTNode =\r\n  | RegExpPattern\r\n  | Disjunction\r\n  | Alternative\r\n  | Assertion\r\n  | Atom\r\n\r\nexport function getRegExpAst(regExp: RegExp): RegExpPattern {\r\n  const regExpStr = regExp.toString()\r\n  if (regExpAstCache.hasOwnProperty(regExpStr)) {\r\n    return regExpAstCache[regExpStr]\r\n  } else {\r\n    const regExpAst = regExpParser.pattern(regExpStr)\r\n    regExpAstCache[regExpStr] = regExpAst\r\n    return regExpAst\r\n  }\r\n}\r\n\r\nexport function clearRegExpParserCache() {\r\n  regExpAstCache = {}\r\n}\r\n", "import {\r\n  Alternative,\r\n  Atom,\r\n  BaseRegExpVisitor,\r\n  Character,\r\n  Disjunction,\r\n  Group,\r\n  Set,\r\n  Term,\r\n  VERSION\r\n} from \"regexp-to-ast\"\r\nimport isArray from \"lodash/isArray\"\r\nimport every from \"lodash/every\"\r\nimport forEach from \"lodash/forEach\"\r\nimport find from \"lodash/find\"\r\nimport values from \"lodash/values\"\r\nimport includes from \"lodash/includes\"\r\nimport { PRINT_ERROR, PRINT_WARNING } from \"@chevrotain/utils\"\r\nimport { ASTNode, getRegExpAst } from \"./reg_exp_parser\"\r\nimport { charCodeToOptimizedIndex, minOptimizationVal } from \"./lexer\"\r\n\r\nconst complementErrorMessage =\r\n  \"Complement Sets are not supported for first char optimization\"\r\nexport const failedOptimizationPrefixMsg =\r\n  'Unable to use \"first char\" lexer optimizations:\\n'\r\n\r\nexport function getOptimizedStartCodesIndices(\r\n  regExp: RegExp,\r\n  ensureOptimizations = false\r\n): number[] {\r\n  try {\r\n    const ast = getRegExpAst(regExp)\r\n    const firstChars = firstCharOptimizedIndices(\r\n      ast.value,\r\n      {},\r\n      ast.flags.ignoreCase\r\n    )\r\n    return firstChars\r\n  } catch (e) {\r\n    /* istanbul ignore next */\r\n    // Testing this relies on the regexp-to-ast library having a bug... */\r\n    // TODO: only the else branch needs to be ignored, try to fix with newer prettier / tsc\r\n    if (e.message === complementErrorMessage) {\r\n      if (ensureOptimizations) {\r\n        PRINT_WARNING(\r\n          `${failedOptimizationPrefixMsg}` +\r\n            `\\tUnable to optimize: < ${regExp.toString()} >\\n` +\r\n            \"\\tComplement Sets cannot be automatically optimized.\\n\" +\r\n            \"\\tThis will disable the lexer's first char optimizations.\\n\" +\r\n            \"\\tSee: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#COMPLEMENT for details.\"\r\n        )\r\n      }\r\n    } else {\r\n      let msgSuffix = \"\"\r\n      if (ensureOptimizations) {\r\n        msgSuffix =\r\n          \"\\n\\tThis will disable the lexer's first char optimizations.\\n\" +\r\n          \"\\tSee: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#REGEXP_PARSING for details.\"\r\n      }\r\n      PRINT_ERROR(\r\n        `${failedOptimizationPrefixMsg}\\n` +\r\n          `\\tFailed parsing: < ${regExp.toString()} >\\n` +\r\n          `\\tUsing the regexp-to-ast library version: ${VERSION}\\n` +\r\n          \"\\tPlease open an issue at: https://github.com/bd82/regexp-to-ast/issues\" +\r\n          msgSuffix\r\n      )\r\n    }\r\n  }\r\n\r\n  return []\r\n}\r\n\r\nexport function firstCharOptimizedIndices(\r\n  ast: ASTNode,\r\n  result: { [charCode: number]: number },\r\n  ignoreCase: boolean\r\n): number[] {\r\n  switch (ast.type) {\r\n    case \"Disjunction\":\r\n      for (let i = 0; i < ast.value.length; i++) {\r\n        firstCharOptimizedIndices(ast.value[i], result, ignoreCase)\r\n      }\r\n      break\r\n    case \"Alternative\":\r\n      const terms = ast.value\r\n      for (let i = 0; i < terms.length; i++) {\r\n        const term = terms[i]\r\n\r\n        // skip terms that cannot effect the first char results\r\n        switch (term.type) {\r\n          case \"EndAnchor\":\r\n          // A group back reference cannot affect potential starting char.\r\n          // because if a back reference is the first production than automatically\r\n          // the group being referenced has had to come BEFORE so its codes have already been added\r\n          case \"GroupBackReference\":\r\n          // assertions do not affect potential starting codes\r\n          case \"Lookahead\":\r\n          case \"NegativeLookahead\":\r\n          case \"StartAnchor\":\r\n          case \"WordBoundary\":\r\n          case \"NonWordBoundary\":\r\n            continue\r\n        }\r\n\r\n        const atom = term\r\n        switch (atom.type) {\r\n          case \"Character\":\r\n            addOptimizedIdxToResult(atom.value, result, ignoreCase)\r\n            break\r\n          case \"Set\":\r\n            if (atom.complement === true) {\r\n              throw Error(complementErrorMessage)\r\n            }\r\n            forEach(atom.value, (code) => {\r\n              if (typeof code === \"number\") {\r\n                addOptimizedIdxToResult(code, result, ignoreCase)\r\n              } else {\r\n                // range\r\n                const range = code as any\r\n                // cannot optimize when ignoreCase is\r\n                if (ignoreCase === true) {\r\n                  for (\r\n                    let rangeCode = range.from;\r\n                    rangeCode <= range.to;\r\n                    rangeCode++\r\n                  ) {\r\n                    addOptimizedIdxToResult(rangeCode, result, ignoreCase)\r\n                  }\r\n                }\r\n                // Optimization (2 orders of magnitude less work for very large ranges)\r\n                else {\r\n                  // handle unoptimized values\r\n                  for (\r\n                    let rangeCode = range.from;\r\n                    rangeCode <= range.to && rangeCode < minOptimizationVal;\r\n                    rangeCode++\r\n                  ) {\r\n                    addOptimizedIdxToResult(rangeCode, result, ignoreCase)\r\n                  }\r\n\r\n                  // Less common charCode where we optimize for faster init time, by using larger \"buckets\"\r\n                  if (range.to >= minOptimizationVal) {\r\n                    const minUnOptVal =\r\n                      range.from >= minOptimizationVal\r\n                        ? range.from\r\n                        : minOptimizationVal\r\n                    const maxUnOptVal = range.to\r\n                    const minOptIdx = charCodeToOptimizedIndex(minUnOptVal)\r\n                    const maxOptIdx = charCodeToOptimizedIndex(maxUnOptVal)\r\n\r\n                    for (\r\n                      let currOptIdx = minOptIdx;\r\n                      currOptIdx <= maxOptIdx;\r\n                      currOptIdx++\r\n                    ) {\r\n                      result[currOptIdx] = currOptIdx\r\n                    }\r\n                  }\r\n                }\r\n              }\r\n            })\r\n            break\r\n          case \"Group\":\r\n            firstCharOptimizedIndices(atom.value, result, ignoreCase)\r\n            break\r\n          /* istanbul ignore next */\r\n          default:\r\n            throw Error(\"Non Exhaustive Match\")\r\n        }\r\n\r\n        // reached a mandatory production, no more **start** codes can be found on this alternative\r\n        const isOptionalQuantifier =\r\n          atom.quantifier !== undefined && atom.quantifier.atLeast === 0\r\n        if (\r\n          // A group may be optional due to empty contents /(?:)/\r\n          // or if everything inside it is optional /((a)?)/\r\n          (atom.type === \"Group\" && isWholeOptional(atom) === false) ||\r\n          // If this term is not a group it may only be optional if it has an optional quantifier\r\n          (atom.type !== \"Group\" && isOptionalQuantifier === false)\r\n        ) {\r\n          break\r\n        }\r\n      }\r\n      break\r\n    /* istanbul ignore next */\r\n    default:\r\n      throw Error(\"non exhaustive match!\")\r\n  }\r\n\r\n  // console.log(Object.keys(result).length)\r\n  return values(result)\r\n}\r\n\r\nfunction addOptimizedIdxToResult(\r\n  code: number,\r\n  result: { [charCode: number]: number },\r\n  ignoreCase: boolean\r\n) {\r\n  const optimizedCharIdx = charCodeToOptimizedIndex(code)\r\n  result[optimizedCharIdx] = optimizedCharIdx\r\n\r\n  if (ignoreCase === true) {\r\n    handleIgnoreCase(code, result)\r\n  }\r\n}\r\n\r\nfunction handleIgnoreCase(\r\n  code: number,\r\n  result: { [charCode: number]: number }\r\n) {\r\n  const char = String.fromCharCode(code)\r\n  const upperChar = char.toUpperCase()\r\n  /* istanbul ignore else */\r\n  if (upperChar !== char) {\r\n    const optimizedCharIdx = charCodeToOptimizedIndex(upperChar.charCodeAt(0))\r\n    result[optimizedCharIdx] = optimizedCharIdx\r\n  } else {\r\n    const lowerChar = char.toLowerCase()\r\n    if (lowerChar !== char) {\r\n      const optimizedCharIdx = charCodeToOptimizedIndex(lowerChar.charCodeAt(0))\r\n      result[optimizedCharIdx] = optimizedCharIdx\r\n    }\r\n  }\r\n}\r\n\r\nfunction findCode(setNode: Set, targetCharCodes: number[]) {\r\n  return find(setNode.value, (codeOrRange) => {\r\n    if (typeof codeOrRange === \"number\") {\r\n      return includes(targetCharCodes, codeOrRange)\r\n    } else {\r\n      // range\r\n      const range = <any>codeOrRange\r\n      return (\r\n        find(\r\n          targetCharCodes,\r\n          (targetCode) => range.from <= targetCode && targetCode <= range.to\r\n        ) !== undefined\r\n      )\r\n    }\r\n  })\r\n}\r\n\r\nfunction isWholeOptional(ast: any): boolean {\r\n  const quantifier = (ast as Atom).quantifier\r\n  if (quantifier && quantifier.atLeast === 0) {\r\n    return true\r\n  }\r\n\r\n  if (!ast.value) {\r\n    return false\r\n  }\r\n\r\n  return isArray(ast.value)\r\n    ? every(ast.value, isWholeOptional)\r\n    : isWholeOptional(ast.value)\r\n}\r\n\r\nclass CharCodeFinder extends BaseRegExpVisitor {\r\n  found: boolean = false\r\n\r\n  constructor(private targetCharCodes: number[]) {\r\n    super()\r\n  }\r\n\r\n  visitChildren(node: ASTNode) {\r\n    // No need to keep looking...\r\n    if (this.found === true) {\r\n      return\r\n    }\r\n\r\n    // switch lookaheads as they do not actually consume any characters thus\r\n    // finding a charCode at lookahead context does not mean that regexp can actually contain it in a match.\r\n    switch (node.type) {\r\n      case \"Lookahead\":\r\n        this.visitLookahead(node)\r\n        return\r\n      case \"NegativeLookahead\":\r\n        this.visitNegativeLookahead(node)\r\n        return\r\n    }\r\n\r\n    super.visitChildren(node)\r\n  }\r\n\r\n  visitCharacter(node: Character) {\r\n    if (includes(this.targetCharCodes, node.value)) {\r\n      this.found = true\r\n    }\r\n  }\r\n\r\n  visitSet(node: Set) {\r\n    if (node.complement) {\r\n      if (findCode(node, this.targetCharCodes) === undefined) {\r\n        this.found = true\r\n      }\r\n    } else {\r\n      if (findCode(node, this.targetCharCodes) !== undefined) {\r\n        this.found = true\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport function canMatchCharCode(\r\n  charCodes: number[],\r\n  pattern: RegExp | string\r\n) {\r\n  if (pattern instanceof RegExp) {\r\n    const ast = getRegExpAst(pattern)\r\n    const charCodeFinder = new CharCodeFinder(charCodes)\r\n    charCodeFinder.visit(ast)\r\n    return charCodeFinder.found\r\n  } else {\r\n    return (\r\n      find(<any>pattern, (char) => {\r\n        return includes(charCodes, (<string>char).charCodeAt(0))\r\n      }) !== undefined\r\n    )\r\n  }\r\n}\r\n", "import { BaseRegExpVisitor } from \"regexp-to-ast\"\r\nimport { IRegExpExec, Lexer, LexerDefinitionErrorType } from \"./lexer_public\"\r\nimport first from \"lodash/first\"\r\nimport isEmpty from \"lodash/isEmpty\"\r\nimport compact from \"lodash/compact\"\r\nimport isArray from \"lodash/isArray\"\r\nimport values from \"lodash/values\"\r\nimport flatten from \"lodash/flatten\"\r\nimport reject from \"lodash/reject\"\r\nimport difference from \"lodash/difference\"\r\nimport indexOf from \"lodash/indexOf\"\r\nimport map from \"lodash/map\"\r\nimport forEach from \"lodash/forEach\"\r\nimport isString from \"lodash/isString\"\r\nimport isFunction from \"lodash/isFunction\"\r\nimport isUndefined from \"lodash/isUndefined\"\r\nimport find from \"lodash/find\"\r\nimport has from \"lodash/has\"\r\nimport keys from \"lodash/keys\"\r\nimport isRegExp from \"lodash/isRegExp\"\r\nimport filter from \"lodash/filter\"\r\nimport defaults from \"lodash/defaults\"\r\nimport reduce from \"lodash/reduce\"\r\nimport includes from \"lodash/includes\"\r\nimport { PRINT_ERROR } from \"@chevrotain/utils\"\r\nimport {\r\n  canMatchCharCode,\r\n  failedOptimizationPrefixMsg,\r\n  getOptimizedStartCodesIndices\r\n} from \"./reg_exp\"\r\nimport {\r\n  ILexerDefinitionError,\r\n  ILineTerminatorsTester,\r\n  IMultiModeLexerDefinition,\r\n  IToken,\r\n  TokenType\r\n} from \"@chevrotain/types\"\r\nimport { getRegExpAst } from \"./reg_exp_parser\"\r\n\r\nconst PATTERN = \"PATTERN\"\r\nexport const DEFAULT_MODE = \"defaultMode\"\r\nexport const MODES = \"modes\"\r\n\r\nexport interface IPatternConfig {\r\n  pattern: IRegExpExec | string\r\n  longerAlt: number[] | undefined\r\n  canLineTerminator: boolean\r\n  isCustom: boolean\r\n  short: number | false\r\n  group: string | undefined | false\r\n  push: string | undefined\r\n  pop: boolean\r\n  tokenType: TokenType\r\n  tokenTypeIdx: number\r\n}\r\n\r\nexport interface IAnalyzeResult {\r\n  patternIdxToConfig: IPatternConfig[]\r\n  charCodeToPatternIdxToConfig: { [charCode: number]: IPatternConfig[] }\r\n  emptyGroups: { [groupName: string]: IToken[] }\r\n  hasCustom: boolean\r\n  canBeOptimized: boolean\r\n}\r\n\r\nexport let SUPPORT_STICKY =\r\n  typeof (<any>new RegExp(\"(?:)\")).sticky === \"boolean\"\r\n\r\nexport function disableSticky() {\r\n  SUPPORT_STICKY = false\r\n}\r\n\r\nexport function enableSticky() {\r\n  SUPPORT_STICKY = true\r\n}\r\n\r\nexport function analyzeTokenTypes(\r\n  tokenTypes: TokenType[],\r\n  options: {\r\n    positionTracking?: \"full\" | \"onlyStart\" | \"onlyOffset\"\r\n    ensureOptimizations?: boolean\r\n    lineTerminatorCharacters?: (number | string)[]\r\n    // TODO: should `useSticky` be an argument here?\r\n    useSticky?: boolean\r\n    safeMode?: boolean\r\n    tracer?: (msg: string, action: () => void) => void\r\n  }\r\n): IAnalyzeResult {\r\n  options = defaults(options, {\r\n    useSticky: SUPPORT_STICKY,\r\n    debug: false as boolean,\r\n    safeMode: false as boolean,\r\n    positionTracking: \"full\",\r\n    lineTerminatorCharacters: [\"\\r\", \"\\n\"],\r\n    tracer: (msg: string, action: Function) => action()\r\n  })\r\n\r\n  const tracer = options.tracer!\r\n\r\n  tracer(\"initCharCodeToOptimizedIndexMap\", () => {\r\n    initCharCodeToOptimizedIndexMap()\r\n  })\r\n\r\n  let onlyRelevantTypes: TokenType[]\r\n  tracer(\"Reject Lexer.NA\", () => {\r\n    onlyRelevantTypes = reject(tokenTypes, (currType) => {\r\n      return currType[PATTERN] === Lexer.NA\r\n    })\r\n  })\r\n\r\n  let hasCustom = false\r\n  let allTransformedPatterns: (IRegExpExec | string)[]\r\n  tracer(\"Transform Patterns\", () => {\r\n    hasCustom = false\r\n    allTransformedPatterns = map(\r\n      onlyRelevantTypes,\r\n      (currType): IRegExpExec | string => {\r\n        const currPattern = currType[PATTERN]\r\n\r\n        /* istanbul ignore else */\r\n        if (isRegExp(currPattern)) {\r\n          const regExpSource = currPattern.source\r\n          if (\r\n            regExpSource.length === 1 &&\r\n            // only these regExp meta characters which can appear in a length one regExp\r\n            regExpSource !== \"^\" &&\r\n            regExpSource !== \"$\" &&\r\n            regExpSource !== \".\" &&\r\n            !currPattern.ignoreCase\r\n          ) {\r\n            return regExpSource\r\n          } else if (\r\n            regExpSource.length === 2 &&\r\n            regExpSource[0] === \"\\\\\" &&\r\n            // not a meta character\r\n            !includes(\r\n              [\r\n                \"d\",\r\n                \"D\",\r\n                \"s\",\r\n                \"S\",\r\n                \"t\",\r\n                \"r\",\r\n                \"n\",\r\n                \"t\",\r\n                \"0\",\r\n                \"c\",\r\n                \"b\",\r\n                \"B\",\r\n                \"f\",\r\n                \"v\",\r\n                \"w\",\r\n                \"W\"\r\n              ],\r\n              regExpSource[1]\r\n            )\r\n          ) {\r\n            // escaped meta Characters: /\\+/ /\\[/\r\n            // or redundant escaping: /\\a/\r\n            // without the escaping \"\\\"\r\n            return regExpSource[1]\r\n          } else {\r\n            return options.useSticky\r\n              ? addStickyFlag(currPattern)\r\n              : addStartOfInput(currPattern)\r\n          }\r\n        } else if (isFunction(currPattern)) {\r\n          hasCustom = true\r\n          // CustomPatternMatcherFunc - custom patterns do not require any transformations, only wrapping in a RegExp Like object\r\n          return { exec: currPattern }\r\n        } else if (typeof currPattern === \"object\") {\r\n          hasCustom = true\r\n          // ICustomPattern\r\n          return currPattern\r\n        } else if (typeof currPattern === \"string\") {\r\n          if (currPattern.length === 1) {\r\n            return currPattern\r\n          } else {\r\n            const escapedRegExpString = currPattern.replace(\r\n              /[\\\\^$.*+?()[\\]{}|]/g,\r\n              \"\\\\$&\"\r\n            )\r\n            const wrappedRegExp = new RegExp(escapedRegExpString)\r\n            return options.useSticky\r\n              ? addStickyFlag(wrappedRegExp)\r\n              : addStartOfInput(wrappedRegExp)\r\n          }\r\n        } else {\r\n          throw Error(\"non exhaustive match\")\r\n        }\r\n      }\r\n    )\r\n  })\r\n\r\n  let patternIdxToType: number[]\r\n  let patternIdxToGroup: (string | undefined | false)[]\r\n  let patternIdxToLongerAltIdxArr: (number[] | undefined)[]\r\n  let patternIdxToPushMode: (string | undefined)[]\r\n  let patternIdxToPopMode: boolean[]\r\n  tracer(\"misc mapping\", () => {\r\n    patternIdxToType = map(\r\n      onlyRelevantTypes,\r\n      (currType) => currType.tokenTypeIdx!\r\n    )\r\n\r\n    patternIdxToGroup = map(onlyRelevantTypes, (clazz: any) => {\r\n      const groupName = clazz.GROUP\r\n      /* istanbul ignore next */\r\n      if (groupName === Lexer.SKIPPED) {\r\n        return undefined\r\n      } else if (isString(groupName)) {\r\n        return groupName\r\n      } else if (isUndefined(groupName)) {\r\n        return false\r\n      } else {\r\n        throw Error(\"non exhaustive match\")\r\n      }\r\n    })\r\n\r\n    patternIdxToLongerAltIdxArr = map(onlyRelevantTypes, (clazz: any) => {\r\n      const longerAltType = clazz.LONGER_ALT\r\n\r\n      if (longerAltType) {\r\n        const longerAltIdxArr = isArray(longerAltType)\r\n          ? map(longerAltType, (type: any) => indexOf(onlyRelevantTypes, type))\r\n          : [indexOf(onlyRelevantTypes, longerAltType)]\r\n        return longerAltIdxArr\r\n      }\r\n    })\r\n\r\n    patternIdxToPushMode = map(\r\n      onlyRelevantTypes,\r\n      (clazz: any) => clazz.PUSH_MODE\r\n    )\r\n\r\n    patternIdxToPopMode = map(onlyRelevantTypes, (clazz: any) =>\r\n      has(clazz, \"POP_MODE\")\r\n    )\r\n  })\r\n\r\n  let patternIdxToCanLineTerminator: boolean[]\r\n  tracer(\"Line Terminator Handling\", () => {\r\n    const lineTerminatorCharCodes = getCharCodes(\r\n      options.lineTerminatorCharacters!\r\n    )\r\n    patternIdxToCanLineTerminator = map(onlyRelevantTypes, (tokType) => false)\r\n    if (options.positionTracking !== \"onlyOffset\") {\r\n      patternIdxToCanLineTerminator = map(onlyRelevantTypes, (tokType) => {\r\n        if (has(tokType, \"LINE_BREAKS\")) {\r\n          return !!tokType.LINE_BREAKS\r\n        } else {\r\n          return (\r\n            checkLineBreaksIssues(tokType, lineTerminatorCharCodes) === false &&\r\n            canMatchCharCode(\r\n              lineTerminatorCharCodes,\r\n              tokType.PATTERN as RegExp | string\r\n            )\r\n          )\r\n        }\r\n      })\r\n    }\r\n  })\r\n\r\n  let patternIdxToIsCustom: boolean[]\r\n  let patternIdxToShort: (number | false)[]\r\n  let emptyGroups!: { [groupName: string]: IToken[] }\r\n  let patternIdxToConfig!: IPatternConfig[]\r\n  tracer(\"Misc Mapping #2\", () => {\r\n    patternIdxToIsCustom = map(onlyRelevantTypes, isCustomPattern)\r\n    patternIdxToShort = map(allTransformedPatterns, isShortPattern)\r\n\r\n    emptyGroups = reduce(\r\n      onlyRelevantTypes,\r\n      (acc, clazz: any) => {\r\n        const groupName = clazz.GROUP\r\n        if (isString(groupName) && !(groupName === Lexer.SKIPPED)) {\r\n          acc[groupName] = []\r\n        }\r\n        return acc\r\n      },\r\n      {} as { [groupName: string]: IToken[] }\r\n    )\r\n\r\n    patternIdxToConfig = map(\r\n      allTransformedPatterns,\r\n      (x, idx): IPatternConfig => {\r\n        return {\r\n          pattern: allTransformedPatterns[idx],\r\n          longerAlt: patternIdxToLongerAltIdxArr[idx],\r\n          canLineTerminator: patternIdxToCanLineTerminator[idx],\r\n          isCustom: patternIdxToIsCustom[idx],\r\n          short: patternIdxToShort[idx],\r\n          group: patternIdxToGroup[idx],\r\n          push: patternIdxToPushMode[idx],\r\n          pop: patternIdxToPopMode[idx],\r\n          tokenTypeIdx: patternIdxToType[idx],\r\n          tokenType: onlyRelevantTypes[idx]\r\n        }\r\n      }\r\n    )\r\n  })\r\n\r\n  let canBeOptimized = true\r\n  let charCodeToPatternIdxToConfig: { [charCode: number]: IPatternConfig[] } =\r\n    []\r\n\r\n  if (!options.safeMode) {\r\n    tracer(\"First Char Optimization\", () => {\r\n      charCodeToPatternIdxToConfig = reduce(\r\n        onlyRelevantTypes,\r\n        (result, currTokType, idx) => {\r\n          if (typeof currTokType.PATTERN === \"string\") {\r\n            const charCode = currTokType.PATTERN.charCodeAt(0)\r\n            const optimizedIdx = charCodeToOptimizedIndex(charCode)\r\n            addToMapOfArrays(result, optimizedIdx, patternIdxToConfig[idx])\r\n          } else if (isArray(currTokType.START_CHARS_HINT)) {\r\n            let lastOptimizedIdx: number\r\n            forEach(currTokType.START_CHARS_HINT, (charOrInt) => {\r\n              const charCode =\r\n                typeof charOrInt === \"string\"\r\n                  ? charOrInt.charCodeAt(0)\r\n                  : charOrInt\r\n              const currOptimizedIdx = charCodeToOptimizedIndex(charCode)\r\n              // Avoid adding the config multiple times\r\n              /* istanbul ignore else */\r\n              // - Difficult to check this scenario effects as it is only a performance\r\n              //   optimization that does not change correctness\r\n              if (lastOptimizedIdx !== currOptimizedIdx) {\r\n                lastOptimizedIdx = currOptimizedIdx\r\n                addToMapOfArrays(\r\n                  result,\r\n                  currOptimizedIdx,\r\n                  patternIdxToConfig[idx]\r\n                )\r\n              }\r\n            })\r\n          } else if (isRegExp(currTokType.PATTERN)) {\r\n            if (currTokType.PATTERN.unicode) {\r\n              canBeOptimized = false\r\n              if (options.ensureOptimizations) {\r\n                PRINT_ERROR(\r\n                  `${failedOptimizationPrefixMsg}` +\r\n                    `\\tUnable to analyze < ${currTokType.PATTERN.toString()} > pattern.\\n` +\r\n                    \"\\tThe regexp unicode flag is not currently supported by the regexp-to-ast library.\\n\" +\r\n                    \"\\tThis will disable the lexer's first char optimizations.\\n\" +\r\n                    \"\\tFor details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNICODE_OPTIMIZE\"\r\n                )\r\n              }\r\n            } else {\r\n              const optimizedCodes = getOptimizedStartCodesIndices(\r\n                currTokType.PATTERN,\r\n                options.ensureOptimizations\r\n              )\r\n              /* istanbul ignore if */\r\n              // start code will only be empty given an empty regExp or failure of regexp-to-ast library\r\n              // the first should be a different validation and the second cannot be tested.\r\n              if (isEmpty(optimizedCodes)) {\r\n                // we cannot understand what codes may start possible matches\r\n                // The optimization correctness requires knowing start codes for ALL patterns.\r\n                // Not actually sure this is an error, no debug message\r\n                canBeOptimized = false\r\n              }\r\n              forEach(optimizedCodes, (code) => {\r\n                addToMapOfArrays(result, code, patternIdxToConfig[idx])\r\n              })\r\n            }\r\n          } else {\r\n            if (options.ensureOptimizations) {\r\n              PRINT_ERROR(\r\n                `${failedOptimizationPrefixMsg}` +\r\n                  `\\tTokenType: <${currTokType.name}> is using a custom token pattern without providing <start_chars_hint> parameter.\\n` +\r\n                  \"\\tThis will disable the lexer's first char optimizations.\\n\" +\r\n                  \"\\tFor details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_OPTIMIZE\"\r\n              )\r\n            }\r\n            canBeOptimized = false\r\n          }\r\n\r\n          return result\r\n        },\r\n        [] as { [charCode: number]: IPatternConfig[] }\r\n      )\r\n    })\r\n  }\r\n\r\n  return {\r\n    emptyGroups: emptyGroups,\r\n    patternIdxToConfig: patternIdxToConfig,\r\n    charCodeToPatternIdxToConfig: charCodeToPatternIdxToConfig,\r\n    hasCustom: hasCustom,\r\n    canBeOptimized: canBeOptimized\r\n  }\r\n}\r\n\r\nexport function validatePatterns(\r\n  tokenTypes: TokenType[],\r\n  validModesNames: string[]\r\n): ILexerDefinitionError[] {\r\n  let errors: ILexerDefinitionError[] = []\r\n\r\n  const missingResult = findMissingPatterns(tokenTypes)\r\n  errors = errors.concat(missingResult.errors)\r\n\r\n  const invalidResult = findInvalidPatterns(missingResult.valid)\r\n  const validTokenTypes = invalidResult.valid\r\n  errors = errors.concat(invalidResult.errors)\r\n\r\n  errors = errors.concat(validateRegExpPattern(validTokenTypes))\r\n\r\n  errors = errors.concat(findInvalidGroupType(validTokenTypes))\r\n\r\n  errors = errors.concat(\r\n    findModesThatDoNotExist(validTokenTypes, validModesNames)\r\n  )\r\n\r\n  errors = errors.concat(findUnreachablePatterns(validTokenTypes))\r\n\r\n  return errors\r\n}\r\n\r\nfunction validateRegExpPattern(\r\n  tokenTypes: TokenType[]\r\n): ILexerDefinitionError[] {\r\n  let errors: ILexerDefinitionError[] = []\r\n  const withRegExpPatterns = filter(tokenTypes, (currTokType) =>\r\n    isRegExp(currTokType[PATTERN])\r\n  )\r\n\r\n  errors = errors.concat(findEndOfInputAnchor(withRegExpPatterns))\r\n\r\n  errors = errors.concat(findStartOfInputAnchor(withRegExpPatterns))\r\n\r\n  errors = errors.concat(findUnsupportedFlags(withRegExpPatterns))\r\n\r\n  errors = errors.concat(findDuplicatePatterns(withRegExpPatterns))\r\n\r\n  errors = errors.concat(findEmptyMatchRegExps(withRegExpPatterns))\r\n\r\n  return errors\r\n}\r\n\r\nexport interface ILexerFilterResult {\r\n  errors: ILexerDefinitionError[]\r\n  valid: TokenType[]\r\n}\r\n\r\nexport function findMissingPatterns(\r\n  tokenTypes: TokenType[]\r\n): ILexerFilterResult {\r\n  const tokenTypesWithMissingPattern = filter(tokenTypes, (currType) => {\r\n    return !has(currType, PATTERN)\r\n  })\r\n\r\n  const errors = map(tokenTypesWithMissingPattern, (currType) => {\r\n    return {\r\n      message:\r\n        \"Token Type: ->\" +\r\n        currType.name +\r\n        \"<- missing static 'PATTERN' property\",\r\n      type: LexerDefinitionErrorType.MISSING_PATTERN,\r\n      tokenTypes: [currType]\r\n    }\r\n  })\r\n\r\n  const valid = difference(tokenTypes, tokenTypesWithMissingPattern)\r\n  return { errors, valid }\r\n}\r\n\r\nexport function findInvalidPatterns(\r\n  tokenTypes: TokenType[]\r\n): ILexerFilterResult {\r\n  const tokenTypesWithInvalidPattern = filter(tokenTypes, (currType) => {\r\n    const pattern = currType[PATTERN]\r\n    return (\r\n      !isRegExp(pattern) &&\r\n      !isFunction(pattern) &&\r\n      !has(pattern, \"exec\") &&\r\n      !isString(pattern)\r\n    )\r\n  })\r\n\r\n  const errors = map(tokenTypesWithInvalidPattern, (currType) => {\r\n    return {\r\n      message:\r\n        \"Token Type: ->\" +\r\n        currType.name +\r\n        \"<- static 'PATTERN' can only be a RegExp, a\" +\r\n        \" Function matching the {CustomPatternMatcherFunc} type or an Object matching the {ICustomPattern} interface.\",\r\n      type: LexerDefinitionErrorType.INVALID_PATTERN,\r\n      tokenTypes: [currType]\r\n    }\r\n  })\r\n\r\n  const valid = difference(tokenTypes, tokenTypesWithInvalidPattern)\r\n  return { errors, valid }\r\n}\r\n\r\nconst end_of_input = /[^\\\\][$]/\r\n\r\nexport function findEndOfInputAnchor(\r\n  tokenTypes: TokenType[]\r\n): ILexerDefinitionError[] {\r\n  class EndAnchorFinder extends BaseRegExpVisitor {\r\n    found = false\r\n\r\n    visitEndAnchor(node: unknown) {\r\n      this.found = true\r\n    }\r\n  }\r\n\r\n  const invalidRegex = filter(tokenTypes, (currType) => {\r\n    const pattern = currType.PATTERN\r\n\r\n    try {\r\n      const regexpAst = getRegExpAst(pattern as RegExp)\r\n      const endAnchorVisitor = new EndAnchorFinder()\r\n      endAnchorVisitor.visit(regexpAst)\r\n\r\n      return endAnchorVisitor.found\r\n    } catch (e) {\r\n      // old behavior in case of runtime exceptions with regexp-to-ast.\r\n      /* istanbul ignore next - cannot ensure an error in regexp-to-ast*/\r\n      return end_of_input.test((pattern as RegExp).source)\r\n    }\r\n  })\r\n\r\n  const errors = map(invalidRegex, (currType) => {\r\n    return {\r\n      message:\r\n        \"Unexpected RegExp Anchor Error:\\n\" +\r\n        \"\\tToken Type: ->\" +\r\n        currType.name +\r\n        \"<- static 'PATTERN' cannot contain end of input anchor '$'\\n\" +\r\n        \"\\tSee chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS\" +\r\n        \"\\tfor details.\",\r\n      type: LexerDefinitionErrorType.EOI_ANCHOR_FOUND,\r\n      tokenTypes: [currType]\r\n    }\r\n  })\r\n\r\n  return errors\r\n}\r\n\r\nexport function findEmptyMatchRegExps(\r\n  tokenTypes: TokenType[]\r\n): ILexerDefinitionError[] {\r\n  const matchesEmptyString = filter(tokenTypes, (currType) => {\r\n    const pattern = currType.PATTERN as RegExp\r\n    return pattern.test(\"\")\r\n  })\r\n\r\n  const errors = map(matchesEmptyString, (currType) => {\r\n    return {\r\n      message:\r\n        \"Token Type: ->\" +\r\n        currType.name +\r\n        \"<- static 'PATTERN' must not match an empty string\",\r\n      type: LexerDefinitionErrorType.EMPTY_MATCH_PATTERN,\r\n      tokenTypes: [currType]\r\n    }\r\n  })\r\n\r\n  return errors\r\n}\r\n\r\nconst start_of_input = /[^\\\\[][\\^]|^\\^/\r\n\r\nexport function findStartOfInputAnchor(\r\n  tokenTypes: TokenType[]\r\n): ILexerDefinitionError[] {\r\n  class StartAnchorFinder extends BaseRegExpVisitor {\r\n    found = false\r\n\r\n    visitStartAnchor(node: unknown) {\r\n      this.found = true\r\n    }\r\n  }\r\n\r\n  const invalidRegex = filter(tokenTypes, (currType) => {\r\n    const pattern = currType.PATTERN as RegExp\r\n    try {\r\n      const regexpAst = getRegExpAst(pattern)\r\n      const startAnchorVisitor = new StartAnchorFinder()\r\n      startAnchorVisitor.visit(regexpAst)\r\n\r\n      return startAnchorVisitor.found\r\n    } catch (e) {\r\n      // old behavior in case of runtime exceptions with regexp-to-ast.\r\n      /* istanbul ignore next - cannot ensure an error in regexp-to-ast*/\r\n      return start_of_input.test(pattern.source)\r\n    }\r\n  })\r\n\r\n  const errors = map(invalidRegex, (currType) => {\r\n    return {\r\n      message:\r\n        \"Unexpected RegExp Anchor Error:\\n\" +\r\n        \"\\tToken Type: ->\" +\r\n        currType.name +\r\n        \"<- static 'PATTERN' cannot contain start of input anchor '^'\\n\" +\r\n        \"\\tSee https://chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS\" +\r\n        \"\\tfor details.\",\r\n      type: LexerDefinitionErrorType.SOI_ANCHOR_FOUND,\r\n      tokenTypes: [currType]\r\n    }\r\n  })\r\n\r\n  return errors\r\n}\r\n\r\nexport function findUnsupportedFlags(\r\n  tokenTypes: TokenType[]\r\n): ILexerDefinitionError[] {\r\n  const invalidFlags = filter(tokenTypes, (currType) => {\r\n    const pattern = currType[PATTERN]\r\n    return pattern instanceof RegExp && (pattern.multiline || pattern.global)\r\n  })\r\n\r\n  const errors = map(invalidFlags, (currType) => {\r\n    return {\r\n      message:\r\n        \"Token Type: ->\" +\r\n        currType.name +\r\n        \"<- static 'PATTERN' may NOT contain global('g') or multiline('m')\",\r\n      type: LexerDefinitionErrorType.UNSUPPORTED_FLAGS_FOUND,\r\n      tokenTypes: [currType]\r\n    }\r\n  })\r\n\r\n  return errors\r\n}\r\n\r\n// This can only test for identical duplicate RegExps, not semantically equivalent ones.\r\nexport function findDuplicatePatterns(\r\n  tokenTypes: TokenType[]\r\n): ILexerDefinitionError[] {\r\n  const found: TokenType[] = []\r\n  let identicalPatterns = map(tokenTypes, (outerType: any) => {\r\n    return reduce(\r\n      tokenTypes,\r\n      (result, innerType) => {\r\n        if (\r\n          outerType.PATTERN.source === (innerType.PATTERN as RegExp).source &&\r\n          !includes(found, innerType) &&\r\n          innerType.PATTERN !== Lexer.NA\r\n        ) {\r\n          // this avoids duplicates in the result, each Token Type may only appear in one \"set\"\r\n          // in essence we are creating Equivalence classes on equality relation.\r\n          found.push(innerType)\r\n          result.push(innerType)\r\n          return result\r\n        }\r\n        return result\r\n      },\r\n      [] as TokenType[]\r\n    )\r\n  })\r\n\r\n  identicalPatterns = compact(identicalPatterns)\r\n\r\n  const duplicatePatterns = filter(identicalPatterns, (currIdenticalSet) => {\r\n    return currIdenticalSet.length > 1\r\n  })\r\n\r\n  const errors = map(duplicatePatterns, (setOfIdentical: any) => {\r\n    const tokenTypeNames = map(setOfIdentical, (currType: any) => {\r\n      return currType.name\r\n    })\r\n\r\n    const dupPatternSrc = (<any>first(setOfIdentical)).PATTERN\r\n    return {\r\n      message:\r\n        `The same RegExp pattern ->${dupPatternSrc}<-` +\r\n        `has been used in all of the following Token Types: ${tokenTypeNames.join(\r\n          \", \"\r\n        )} <-`,\r\n      type: LexerDefinitionErrorType.DUPLICATE_PATTERNS_FOUND,\r\n      tokenTypes: setOfIdentical\r\n    }\r\n  })\r\n\r\n  return errors\r\n}\r\n\r\nexport function findInvalidGroupType(\r\n  tokenTypes: TokenType[]\r\n): ILexerDefinitionError[] {\r\n  const invalidTypes = filter(tokenTypes, (clazz: any) => {\r\n    if (!has(clazz, \"GROUP\")) {\r\n      return false\r\n    }\r\n    const group = clazz.GROUP\r\n\r\n    return group !== Lexer.SKIPPED && group !== Lexer.NA && !isString(group)\r\n  })\r\n\r\n  const errors = map(invalidTypes, (currType) => {\r\n    return {\r\n      message:\r\n        \"Token Type: ->\" +\r\n        currType.name +\r\n        \"<- static 'GROUP' can only be Lexer.SKIPPED/Lexer.NA/A String\",\r\n      type: LexerDefinitionErrorType.INVALID_GROUP_TYPE_FOUND,\r\n      tokenTypes: [currType]\r\n    }\r\n  })\r\n\r\n  return errors\r\n}\r\n\r\nexport function findModesThatDoNotExist(\r\n  tokenTypes: TokenType[],\r\n  validModes: string[]\r\n): ILexerDefinitionError[] {\r\n  const invalidModes = filter(tokenTypes, (clazz: any) => {\r\n    return (\r\n      clazz.PUSH_MODE !== undefined && !includes(validModes, clazz.PUSH_MODE)\r\n    )\r\n  })\r\n\r\n  const errors = map(invalidModes, (tokType) => {\r\n    const msg =\r\n      `Token Type: ->${tokType.name}<- static 'PUSH_MODE' value cannot refer to a Lexer Mode ->${tokType.PUSH_MODE}<-` +\r\n      `which does not exist`\r\n    return {\r\n      message: msg,\r\n      type: LexerDefinitionErrorType.PUSH_MODE_DOES_NOT_EXIST,\r\n      tokenTypes: [tokType]\r\n    }\r\n  })\r\n\r\n  return errors\r\n}\r\n\r\nexport function findUnreachablePatterns(\r\n  tokenTypes: TokenType[]\r\n): ILexerDefinitionError[] {\r\n  const errors: ILexerDefinitionError[] = []\r\n\r\n  const canBeTested = reduce(\r\n    tokenTypes,\r\n    (result, tokType, idx) => {\r\n      const pattern = tokType.PATTERN\r\n\r\n      if (pattern === Lexer.NA) {\r\n        return result\r\n      }\r\n\r\n      // a more comprehensive validation for all forms of regExps would require\r\n      // deeper regExp analysis capabilities\r\n      if (isString(pattern)) {\r\n        result.push({ str: pattern, idx, tokenType: tokType })\r\n      } else if (isRegExp(pattern) && noMetaChar(pattern)) {\r\n        result.push({ str: pattern.source, idx, tokenType: tokType })\r\n      }\r\n      return result\r\n    },\r\n    [] as { str: string; idx: number; tokenType: TokenType }[]\r\n  )\r\n\r\n  forEach(tokenTypes, (tokType, testIdx) => {\r\n    forEach(canBeTested, ({ str, idx, tokenType }) => {\r\n      if (testIdx < idx && testTokenType(str, tokType.PATTERN)) {\r\n        const msg =\r\n          `Token: ->${tokenType.name}<- can never be matched.\\n` +\r\n          `Because it appears AFTER the Token Type ->${tokType.name}<-` +\r\n          `in the lexer's definition.\\n` +\r\n          `See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNREACHABLE`\r\n        errors.push({\r\n          message: msg,\r\n          type: LexerDefinitionErrorType.UNREACHABLE_PATTERN,\r\n          tokenTypes: [tokType, tokenType]\r\n        })\r\n      }\r\n    })\r\n  })\r\n\r\n  return errors\r\n}\r\n\r\nfunction testTokenType(str: string, pattern: any): boolean {\r\n  /* istanbul ignore else */\r\n  if (isRegExp(pattern)) {\r\n    const regExpArray = pattern.exec(str)\r\n    return regExpArray !== null && regExpArray.index === 0\r\n  } else if (isFunction(pattern)) {\r\n    // maintain the API of custom patterns\r\n    return pattern(str, 0, [], {})\r\n  } else if (has(pattern, \"exec\")) {\r\n    // maintain the API of custom patterns\r\n    return pattern.exec(str, 0, [], {})\r\n  } else if (typeof pattern === \"string\") {\r\n    return pattern === str\r\n  } else {\r\n    throw Error(\"non exhaustive match\")\r\n  }\r\n}\r\n\r\nfunction noMetaChar(regExp: RegExp): boolean {\r\n  //https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp\r\n  const metaChars = [\r\n    \".\",\r\n    \"\\\\\",\r\n    \"[\",\r\n    \"]\",\r\n    \"|\",\r\n    \"^\",\r\n    \"$\",\r\n    \"(\",\r\n    \")\",\r\n    \"?\",\r\n    \"*\",\r\n    \"+\",\r\n    \"{\"\r\n  ]\r\n  return (\r\n    find(metaChars, (char) => regExp.source.indexOf(char) !== -1) === undefined\r\n  )\r\n}\r\n\r\nexport function addStartOfInput(pattern: RegExp): RegExp {\r\n  const flags = pattern.ignoreCase ? \"i\" : \"\"\r\n  // always wrapping in a none capturing group preceded by '^' to make sure matching can only work on start of input.\r\n  // duplicate/redundant start of input markers have no meaning (/^^^^A/ === /^A/)\r\n  return new RegExp(`^(?:${pattern.source})`, flags)\r\n}\r\n\r\nexport function addStickyFlag(pattern: RegExp): RegExp {\r\n  const flags = pattern.ignoreCase ? \"iy\" : \"y\"\r\n  // always wrapping in a none capturing group preceded by '^' to make sure matching can only work on start of input.\r\n  // duplicate/redundant start of input markers have no meaning (/^^^^A/ === /^A/)\r\n  return new RegExp(`${pattern.source}`, flags)\r\n}\r\n\r\nexport function performRuntimeChecks(\r\n  lexerDefinition: IMultiModeLexerDefinition,\r\n  trackLines: boolean,\r\n  lineTerminatorCharacters: (number | string)[]\r\n): ILexerDefinitionError[] {\r\n  const errors: ILexerDefinitionError[] = []\r\n\r\n  // some run time checks to help the end users.\r\n  if (!has(lexerDefinition, DEFAULT_MODE)) {\r\n    errors.push({\r\n      message:\r\n        \"A MultiMode Lexer cannot be initialized without a <\" +\r\n        DEFAULT_MODE +\r\n        \"> property in its definition\\n\",\r\n      type: LexerDefinitionErrorType.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE\r\n    })\r\n  }\r\n  if (!has(lexerDefinition, MODES)) {\r\n    errors.push({\r\n      message:\r\n        \"A MultiMode Lexer cannot be initialized without a <\" +\r\n        MODES +\r\n        \"> property in its definition\\n\",\r\n      type: LexerDefinitionErrorType.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY\r\n    })\r\n  }\r\n\r\n  if (\r\n    has(lexerDefinition, MODES) &&\r\n    has(lexerDefinition, DEFAULT_MODE) &&\r\n    !has(lexerDefinition.modes, lexerDefinition.defaultMode)\r\n  ) {\r\n    errors.push({\r\n      message:\r\n        `A MultiMode Lexer cannot be initialized with a ${DEFAULT_MODE}: <${lexerDefinition.defaultMode}>` +\r\n        `which does not exist\\n`,\r\n      type: LexerDefinitionErrorType.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST\r\n    })\r\n  }\r\n\r\n  if (has(lexerDefinition, MODES)) {\r\n    forEach(lexerDefinition.modes, (currModeValue, currModeName) => {\r\n      forEach(currModeValue, (currTokType, currIdx) => {\r\n        if (isUndefined(currTokType)) {\r\n          errors.push({\r\n            message:\r\n              `A Lexer cannot be initialized using an undefined Token Type. Mode:` +\r\n              `<${currModeName}> at index: <${currIdx}>\\n`,\r\n            type: LexerDefinitionErrorType.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED\r\n          })\r\n        } else if (has(currTokType, \"LONGER_ALT\")) {\r\n          const longerAlt = isArray(currTokType.LONGER_ALT)\r\n            ? currTokType.LONGER_ALT\r\n            : [currTokType.LONGER_ALT]\r\n          forEach(longerAlt, (currLongerAlt) => {\r\n            if (\r\n              !isUndefined(currLongerAlt) &&\r\n              !includes(currModeValue, currLongerAlt)\r\n            ) {\r\n              errors.push({\r\n                message: `A MultiMode Lexer cannot be initialized with a longer_alt <${currLongerAlt.name}> on token <${currTokType.name}> outside of mode <${currModeName}>\\n`,\r\n                type: LexerDefinitionErrorType.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE\r\n              })\r\n            }\r\n          })\r\n        }\r\n      })\r\n    })\r\n  }\r\n\r\n  return errors\r\n}\r\n\r\nexport function performWarningRuntimeChecks(\r\n  lexerDefinition: IMultiModeLexerDefinition,\r\n  trackLines: boolean,\r\n  lineTerminatorCharacters: (number | string)[]\r\n): ILexerDefinitionError[] {\r\n  const warnings = []\r\n  let hasAnyLineBreak = false\r\n  const allTokenTypes = compact(flatten(values(lexerDefinition.modes)))\r\n\r\n  const concreteTokenTypes = reject(\r\n    allTokenTypes,\r\n    (currType) => currType[PATTERN] === Lexer.NA\r\n  )\r\n  const terminatorCharCodes = getCharCodes(lineTerminatorCharacters)\r\n  if (trackLines) {\r\n    forEach(concreteTokenTypes, (tokType) => {\r\n      const currIssue = checkLineBreaksIssues(tokType, terminatorCharCodes)\r\n      if (currIssue !== false) {\r\n        const message = buildLineBreakIssueMessage(tokType, currIssue)\r\n        const warningDescriptor = {\r\n          message,\r\n          type: currIssue.issue,\r\n          tokenType: tokType\r\n        }\r\n        warnings.push(warningDescriptor)\r\n      } else {\r\n        // we don't want to attempt to scan if the user explicitly specified the line_breaks option.\r\n        if (has(tokType, \"LINE_BREAKS\")) {\r\n          if (tokType.LINE_BREAKS === true) {\r\n            hasAnyLineBreak = true\r\n          }\r\n        } else {\r\n          if (\r\n            canMatchCharCode(terminatorCharCodes, tokType.PATTERN as RegExp)\r\n          ) {\r\n            hasAnyLineBreak = true\r\n          }\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\n  if (trackLines && !hasAnyLineBreak) {\r\n    warnings.push({\r\n      message:\r\n        \"Warning: No LINE_BREAKS Found.\\n\" +\r\n        \"\\tThis Lexer has been defined to track line and column information,\\n\" +\r\n        \"\\tBut none of the Token Types can be identified as matching a line terminator.\\n\" +\r\n        \"\\tSee https://chevrotain.io/docs/guide/resolving_lexer_errors.html#LINE_BREAKS \\n\" +\r\n        \"\\tfor details.\",\r\n      type: LexerDefinitionErrorType.NO_LINE_BREAKS_FLAGS\r\n    })\r\n  }\r\n  return warnings\r\n}\r\n\r\nexport function cloneEmptyGroups(emptyGroups: {\r\n  [groupName: string]: IToken\r\n}): { [groupName: string]: IToken } {\r\n  const clonedResult: any = {}\r\n  const groupKeys = keys(emptyGroups)\r\n\r\n  forEach(groupKeys, (currKey) => {\r\n    const currGroupValue = emptyGroups[currKey]\r\n\r\n    /* istanbul ignore else */\r\n    if (isArray(currGroupValue)) {\r\n      clonedResult[currKey] = []\r\n    } else {\r\n      throw Error(\"non exhaustive match\")\r\n    }\r\n  })\r\n\r\n  return clonedResult\r\n}\r\n\r\n// TODO: refactor to avoid duplication\r\nexport function isCustomPattern(tokenType: TokenType): boolean {\r\n  const pattern = tokenType.PATTERN\r\n  /* istanbul ignore else */\r\n  if (isRegExp(pattern)) {\r\n    return false\r\n  } else if (isFunction(pattern)) {\r\n    // CustomPatternMatcherFunc - custom patterns do not require any transformations, only wrapping in a RegExp Like object\r\n    return true\r\n  } else if (has(pattern, \"exec\")) {\r\n    // ICustomPattern\r\n    return true\r\n  } else if (isString(pattern)) {\r\n    return false\r\n  } else {\r\n    throw Error(\"non exhaustive match\")\r\n  }\r\n}\r\n\r\nexport function isShortPattern(pattern: any): number | false {\r\n  if (isString(pattern) && pattern.length === 1) {\r\n    return pattern.charCodeAt(0)\r\n  } else {\r\n    return false\r\n  }\r\n}\r\n\r\n/**\r\n * Faster than using a RegExp for default newline detection during lexing.\r\n */\r\nexport const LineTerminatorOptimizedTester: ILineTerminatorsTester = {\r\n  // implements /\\n|\\r\\n?/g.test\r\n  test: function (text) {\r\n    const len = text.length\r\n    for (let i = this.lastIndex; i < len; i++) {\r\n      const c = text.charCodeAt(i)\r\n      if (c === 10) {\r\n        this.lastIndex = i + 1\r\n        return true\r\n      } else if (c === 13) {\r\n        if (text.charCodeAt(i + 1) === 10) {\r\n          this.lastIndex = i + 2\r\n        } else {\r\n          this.lastIndex = i + 1\r\n        }\r\n        return true\r\n      }\r\n    }\r\n    return false\r\n  },\r\n\r\n  lastIndex: 0\r\n}\r\n\r\nfunction checkLineBreaksIssues(\r\n  tokType: TokenType,\r\n  lineTerminatorCharCodes: number[]\r\n):\r\n  | {\r\n      issue:\r\n        | LexerDefinitionErrorType.IDENTIFY_TERMINATOR\r\n        | LexerDefinitionErrorType.CUSTOM_LINE_BREAK\r\n      errMsg?: string\r\n    }\r\n  | false {\r\n  if (has(tokType, \"LINE_BREAKS\")) {\r\n    // if the user explicitly declared the line_breaks option we will respect their choice\r\n    // and assume it is correct.\r\n    return false\r\n  } else {\r\n    /* istanbul ignore else */\r\n    if (isRegExp(tokType.PATTERN)) {\r\n      try {\r\n        // TODO: why is the casting suddenly needed?\r\n        canMatchCharCode(lineTerminatorCharCodes, tokType.PATTERN as RegExp)\r\n      } catch (e) {\r\n        /* istanbul ignore next - to test this we would have to mock <canMatchCharCode> to throw an error */\r\n        return {\r\n          issue: LexerDefinitionErrorType.IDENTIFY_TERMINATOR,\r\n          errMsg: (e as Error).message\r\n        }\r\n      }\r\n      return false\r\n    } else if (isString(tokType.PATTERN)) {\r\n      // string literal patterns can always be analyzed to detect line terminator usage\r\n      return false\r\n    } else if (isCustomPattern(tokType)) {\r\n      // custom token types\r\n      return { issue: LexerDefinitionErrorType.CUSTOM_LINE_BREAK }\r\n    } else {\r\n      throw Error(\"non exhaustive match\")\r\n    }\r\n  }\r\n}\r\n\r\nexport function buildLineBreakIssueMessage(\r\n  tokType: TokenType,\r\n  details: {\r\n    issue:\r\n      | LexerDefinitionErrorType.IDENTIFY_TERMINATOR\r\n      | LexerDefinitionErrorType.CUSTOM_LINE_BREAK\r\n    errMsg?: string\r\n  }\r\n): string {\r\n  /* istanbul ignore else */\r\n  if (details.issue === LexerDefinitionErrorType.IDENTIFY_TERMINATOR) {\r\n    return (\r\n      \"Warning: unable to identify line terminator usage in pattern.\\n\" +\r\n      `\\tThe problem is in the <${tokType.name}> Token Type\\n` +\r\n      `\\t Root cause: ${details.errMsg}.\\n` +\r\n      \"\\tFor details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#IDENTIFY_TERMINATOR\"\r\n    )\r\n  } else if (details.issue === LexerDefinitionErrorType.CUSTOM_LINE_BREAK) {\r\n    return (\r\n      \"Warning: A Custom Token Pattern should specify the <line_breaks> option.\\n\" +\r\n      `\\tThe problem is in the <${tokType.name}> Token Type\\n` +\r\n      \"\\tFor details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_LINE_BREAK\"\r\n    )\r\n  } else {\r\n    throw Error(\"non exhaustive match\")\r\n  }\r\n}\r\n\r\nfunction getCharCodes(charsOrCodes: (number | string)[]): number[] {\r\n  const charCodes = map(charsOrCodes, (numOrString) => {\r\n    if (isString(numOrString)) {\r\n      return numOrString.charCodeAt(0)\r\n    } else {\r\n      return numOrString\r\n    }\r\n  })\r\n\r\n  return charCodes\r\n}\r\n\r\nfunction addToMapOfArrays<T>(\r\n  map: Record<number, T[]>,\r\n  key: number,\r\n  value: T\r\n): void {\r\n  if (map[key] === undefined) {\r\n    map[key] = [value]\r\n  } else {\r\n    map[key].push(value)\r\n  }\r\n}\r\n\r\nexport const minOptimizationVal = 256\r\n\r\n/**\r\n * We are mapping charCode above ASCI (256) into buckets each in the size of 256.\r\n * This is because ASCI are the most common start chars so each one of those will get its own\r\n * possible token configs vector.\r\n *\r\n * Tokens starting with charCodes \"above\" ASCI are uncommon, so we can \"afford\"\r\n * to place these into buckets of possible token configs, What we gain from\r\n * this is avoiding the case of creating an optimization 'charCodeToPatternIdxToConfig'\r\n * which would contain 10,000+ arrays of small size (e.g unicode Identifiers scenario).\r\n * Our 'charCodeToPatternIdxToConfig' max size will now be:\r\n * 256 + (2^16 / 2^8) - 1 === 511\r\n *\r\n * note the hack for fast division integer part extraction\r\n * See: https://stackoverflow.com/a/4228528\r\n */\r\nlet charCodeToOptimizedIdxMap: number[] = []\r\nexport function charCodeToOptimizedIndex(charCode: number): number {\r\n  return charCode < minOptimizationVal\r\n    ? charCode\r\n    : charCodeToOptimizedIdxMap[charCode]\r\n}\r\n\r\n/**\r\n * This is a compromise between cold start / hot running performance\r\n * Creating this array takes ~3ms on a modern machine,\r\n * But if we perform the computation at runtime as needed the CSS Lexer benchmark\r\n * performance degrades by ~10%\r\n *\r\n * TODO: Perhaps it should be lazy initialized only if a charCode > 255 is used.\r\n */\r\nfunction initCharCodeToOptimizedIndexMap() {\r\n  if (isEmpty(charCodeToOptimizedIdxMap)) {\r\n    charCodeToOptimizedIdxMap = new Array(65536)\r\n    for (let i = 0; i < 65536; i++) {\r\n      charCodeToOptimizedIdxMap[i] = i > 255 ? 255 + ~~(i / 255) : i\r\n    }\r\n  }\r\n}\r\n", "/**\r\n * Gets the last element of `array`.\r\n *\r\n * @static\r\n * @memberOf _\r\n * @since 0.1.0\r\n * @category Array\r\n * @param {Array} array The array to query.\r\n * @returns {*} Returns the last element of `array`.\r\n * @example\r\n *\r\n * _.last([1, 2, 3]);\r\n * // => 3\r\n */\r\nfunction last(array) {\r\n  var length = array == null ? 0 : array.length;\r\n  return length ? array[length - 1] : undefined;\r\n}\r\n\r\nmodule.exports = last;\r\n", "import isEmpty from \"lodash/isEmpty\"\r\nimport compact from \"lodash/compact\"\r\nimport isArray from \"lodash/isArray\"\r\nimport flatten from \"lodash/flatten\"\r\nimport difference from \"lodash/difference\"\r\nimport map from \"lodash/map\"\r\nimport forEach from \"lodash/forEach\"\r\nimport has from \"lodash/has\"\r\nimport includes from \"lodash/includes\"\r\nimport clone from \"lodash/clone\"\r\nimport { IToken, TokenType } from \"@chevrotain/types\"\r\n\r\nexport function tokenStructuredMatcher(\r\n  tokInstance: IToken,\r\n  tokConstructor: TokenType\r\n) {\r\n  const instanceType = tokInstance.tokenTypeIdx\r\n  if (instanceType === tokConstructor.tokenTypeIdx) {\r\n    return true\r\n  } else {\r\n    return (\r\n      tokConstructor.isParent === true &&\r\n      tokConstructor.categoryMatchesMap![instanceType] === true\r\n    )\r\n  }\r\n}\r\n\r\n// Optimized tokenMatcher in case our grammar does not use token categories\r\n// Being so tiny it is much more likely to be in-lined and this avoid the function call overhead\r\nexport function tokenStructuredMatcherNoCategories(\r\n  token: IToken,\r\n  tokType: TokenType\r\n) {\r\n  return token.tokenTypeIdx === tokType.tokenTypeIdx\r\n}\r\n\r\nexport let tokenShortNameIdx = 1\r\nexport const tokenIdxToClass: { [tokenIdx: number]: TokenType } = {}\r\n\r\nexport function augmentTokenTypes(tokenTypes: TokenType[]): void {\r\n  // collect the parent Token Types as well.\r\n  const tokenTypesAndParents = expandCategories(tokenTypes)\r\n\r\n  // add required tokenType and categoryMatches properties\r\n  assignTokenDefaultProps(tokenTypesAndParents)\r\n\r\n  // fill up the categoryMatches\r\n  assignCategoriesMapProp(tokenTypesAndParents)\r\n  assignCategoriesTokensProp(tokenTypesAndParents)\r\n\r\n  forEach(tokenTypesAndParents, (tokType) => {\r\n    tokType.isParent = tokType.categoryMatches!.length > 0\r\n  })\r\n}\r\n\r\nexport function expandCategories(tokenTypes: TokenType[]): TokenType[] {\r\n  let result = clone(tokenTypes)\r\n\r\n  let categories = tokenTypes\r\n  let searching = true\r\n  while (searching) {\r\n    categories = compact(\r\n      flatten(map(categories, (currTokType) => currTokType.CATEGORIES))\r\n    )\r\n\r\n    const newCategories = difference(categories, result)\r\n\r\n    result = result.concat(newCategories)\r\n\r\n    if (isEmpty(newCategories)) {\r\n      searching = false\r\n    } else {\r\n      categories = newCategories\r\n    }\r\n  }\r\n  return result\r\n}\r\n\r\nexport function assignTokenDefaultProps(tokenTypes: TokenType[]): void {\r\n  forEach(tokenTypes, (currTokType) => {\r\n    if (!hasShortKeyProperty(currTokType)) {\r\n      tokenIdxToClass[tokenShortNameIdx] = currTokType\r\n      ;(<any>currTokType).tokenTypeIdx = tokenShortNameIdx++\r\n    }\r\n\r\n    // CATEGORIES? : TokenType | TokenType[]\r\n    if (\r\n      hasCategoriesProperty(currTokType) &&\r\n      !isArray(currTokType.CATEGORIES)\r\n      // &&\r\n      // !isUndefined(currTokType.CATEGORIES.PATTERN)\r\n    ) {\r\n      currTokType.CATEGORIES = [currTokType.CATEGORIES as unknown as TokenType]\r\n    }\r\n\r\n    if (!hasCategoriesProperty(currTokType)) {\r\n      currTokType.CATEGORIES = []\r\n    }\r\n\r\n    if (!hasExtendingTokensTypesProperty(currTokType)) {\r\n      currTokType.categoryMatches = []\r\n    }\r\n\r\n    if (!hasExtendingTokensTypesMapProperty(currTokType)) {\r\n      currTokType.categoryMatchesMap = {}\r\n    }\r\n  })\r\n}\r\n\r\nexport function assignCategoriesTokensProp(tokenTypes: TokenType[]): void {\r\n  forEach(tokenTypes, (currTokType) => {\r\n    // avoid duplications\r\n    currTokType.categoryMatches = []\r\n    forEach(currTokType.categoryMatchesMap!, (val, key) => {\r\n      currTokType.categoryMatches!.push(\r\n        tokenIdxToClass[key as unknown as number].tokenTypeIdx!\r\n      )\r\n    })\r\n  })\r\n}\r\n\r\nexport function assignCategoriesMapProp(tokenTypes: TokenType[]): void {\r\n  forEach(tokenTypes, (currTokType) => {\r\n    singleAssignCategoriesToksMap([], currTokType)\r\n  })\r\n}\r\n\r\nexport function singleAssignCategoriesToksMap(\r\n  path: TokenType[],\r\n  nextNode: TokenType\r\n): void {\r\n  forEach(path, (pathNode) => {\r\n    nextNode.categoryMatchesMap![pathNode.tokenTypeIdx!] = true\r\n  })\r\n\r\n  forEach(nextNode.CATEGORIES, (nextCategory) => {\r\n    const newPath = path.concat(nextNode)\r\n    // avoids infinite loops due to cyclic categories.\r\n    if (!includes(newPath, nextCategory)) {\r\n      singleAssignCategoriesToksMap(newPath, nextCategory)\r\n    }\r\n  })\r\n}\r\n\r\nexport function hasShortKeyProperty(tokType: TokenType): boolean {\r\n  return has(tokType, \"tokenTypeIdx\")\r\n}\r\n\r\nexport function hasCategoriesProperty(tokType: TokenType): boolean {\r\n  return has(tokType, \"CATEGORIES\")\r\n}\r\n\r\nexport function hasExtendingTokensTypesProperty(tokType: TokenType): boolean {\r\n  return has(tokType, \"categoryMatches\")\r\n}\r\n\r\nexport function hasExtendingTokensTypesMapProperty(\r\n  tokType: TokenType\r\n): boolean {\r\n  return has(tokType, \"categoryMatchesMap\")\r\n}\r\n\r\nexport function isTokenType(tokType: TokenType): boolean {\r\n  return has(tokType, \"tokenTypeIdx\")\r\n}\r\n", "import { ILexerErrorMessageProvider, IToken } from \"@chevrotain/types\"\r\n\r\nexport const defaultLexerErrorProvider: ILexerErrorMessageProvider = {\r\n  buildUnableToPopLexerModeMessage(token: IToken): string {\r\n    return `Unable to pop Lexer Mode after encountering Token ->${token.image}<- The Mode Stack is empty`\r\n  },\r\n\r\n  buildUnexpectedCharactersMessage(\r\n    fullText: string,\r\n    startOffset: number,\r\n    length: number,\r\n    line?: number,\r\n    column?: number\r\n  ): string {\r\n    return (\r\n      `unexpected character: ->${fullText.charAt(\r\n        startOffset\r\n      )}<- at offset: ${startOffset},` + ` skipped ${length} characters.`\r\n    )\r\n  }\r\n}\r\n", "import {\r\n  analyzeTokenTypes,\r\n  charCodeToOptimizedIndex,\r\n  cloneEmptyGroups,\r\n  DEFAULT_MODE,\r\n  IAnalyzeResult,\r\n  IPatternConfig,\r\n  LineTerminatorOptimizedTester,\r\n  performRuntimeChecks,\r\n  performWarningRuntimeChecks,\r\n  SUPPORT_STICKY,\r\n  validatePatterns\r\n} from \"./lexer\"\r\nimport noop from \"lodash/noop\"\r\nimport isEmpty from \"lodash/isEmpty\"\r\nimport isArray from \"lodash/isArray\"\r\nimport last from \"lodash/last\"\r\nimport reject from \"lodash/reject\"\r\nimport map from \"lodash/map\"\r\nimport forEach from \"lodash/forEach\"\r\nimport keys from \"lodash/keys\"\r\nimport isUndefined from \"lodash/isUndefined\"\r\nimport identity from \"lodash/identity\"\r\nimport assign from \"lodash/assign\"\r\nimport reduce from \"lodash/reduce\"\r\nimport clone from \"lodash/clone\"\r\nimport { PRINT_WARNING, timer, toFastProperties } from \"@chevrotain/utils\"\r\nimport { augmentTokenTypes } from \"./tokens\"\r\nimport {\r\n  CustomPatternMatcherFunc,\r\n  CustomPatternMatcherReturn,\r\n  ILexerConfig,\r\n  ILexerDefinitionError,\r\n  ILexingError,\r\n  IMultiModeLexerDefinition,\r\n  IToken,\r\n  TokenType\r\n} from \"@chevrotain/types\"\r\nimport { defaultLexerErrorProvider } from \"./lexer_errors_public\"\r\nimport { clearRegExpParserCache } from \"./reg_exp_parser\"\r\n\r\nexport interface ILexingResult {\r\n  tokens: IToken[]\r\n  groups: { [groupName: string]: IToken[] }\r\n  errors: ILexingError[]\r\n}\r\n\r\nexport enum LexerDefinitionErrorType {\r\n  MISSING_PATTERN,\r\n  INVALID_PATTERN,\r\n  EOI_ANCHOR_FOUND,\r\n  UNSUPPORTED_FLAGS_FOUND,\r\n  DUPLICATE_PATTERNS_FOUND,\r\n  INVALID_GROUP_TYPE_FOUND,\r\n  PUSH_MODE_DOES_NOT_EXIST,\r\n  MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE,\r\n  MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY,\r\n  MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST,\r\n  LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED,\r\n  SOI_ANCHOR_FOUND,\r\n  EMPTY_MATCH_PATTERN,\r\n  NO_LINE_BREAKS_FLAGS,\r\n  UNREACHABLE_PATTERN,\r\n  IDENTIFY_TERMINATOR,\r\n  CUSTOM_LINE_BREAK,\r\n  MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE\r\n}\r\n\r\nexport interface IRegExpExec {\r\n  exec: CustomPatternMatcherFunc\r\n}\r\n\r\nconst DEFAULT_LEXER_CONFIG: Required<ILexerConfig> = {\r\n  deferDefinitionErrorsHandling: false,\r\n  positionTracking: \"full\",\r\n  lineTerminatorsPattern: /\\n|\\r\\n?/g,\r\n  lineTerminatorCharacters: [\"\\n\", \"\\r\"],\r\n  ensureOptimizations: false,\r\n  safeMode: false,\r\n  errorMessageProvider: defaultLexerErrorProvider,\r\n  traceInitPerf: false,\r\n  skipValidations: false,\r\n  recoveryEnabled: true\r\n}\r\n\r\nObject.freeze(DEFAULT_LEXER_CONFIG)\r\n\r\nexport class Lexer {\r\n  public static SKIPPED =\r\n    \"This marks a skipped Token pattern, this means each token identified by it will\" +\r\n    \"be consumed and then thrown into oblivion, this can be used to for example to completely ignore whitespace.\"\r\n\r\n  public static NA = /NOT_APPLICABLE/\r\n  public lexerDefinitionErrors: ILexerDefinitionError[] = []\r\n  public lexerDefinitionWarning: ILexerDefinitionError[] = []\r\n\r\n  protected patternIdxToConfig: Record<string, IPatternConfig[]> = {}\r\n  protected charCodeToPatternIdxToConfig: {\r\n    [modeName: string]: { [charCode: number]: IPatternConfig[] }\r\n  } = {}\r\n\r\n  protected modes: string[] = []\r\n  protected defaultMode!: string\r\n  protected emptyGroups: { [groupName: string]: IToken } = {}\r\n\r\n  private config: Required<ILexerConfig>\r\n  private trackStartLines: boolean = true\r\n  private trackEndLines: boolean = true\r\n  private hasCustom: boolean = false\r\n  private canModeBeOptimized: Record<string, boolean> = {}\r\n\r\n  private traceInitPerf!: boolean | number\r\n  private traceInitMaxIdent!: number\r\n  private traceInitIndent: number\r\n\r\n  constructor(\r\n    protected lexerDefinition: TokenType[] | IMultiModeLexerDefinition,\r\n    config: ILexerConfig = DEFAULT_LEXER_CONFIG\r\n  ) {\r\n    if (typeof config === \"boolean\") {\r\n      throw Error(\r\n        \"The second argument to the Lexer constructor is now an ILexerConfig Object.\\n\" +\r\n          \"a boolean 2nd argument is no longer supported\"\r\n      )\r\n    }\r\n\r\n    // todo: defaults func?\r\n    this.config = assign({}, DEFAULT_LEXER_CONFIG, config) as any\r\n\r\n    const traceInitVal = this.config.traceInitPerf\r\n    if (traceInitVal === true) {\r\n      this.traceInitMaxIdent = Infinity\r\n      this.traceInitPerf = true\r\n    } else if (typeof traceInitVal === \"number\") {\r\n      this.traceInitMaxIdent = traceInitVal\r\n      this.traceInitPerf = true\r\n    }\r\n    this.traceInitIndent = -1\r\n\r\n    this.TRACE_INIT(\"Lexer Constructor\", () => {\r\n      let actualDefinition!: IMultiModeLexerDefinition\r\n      let hasOnlySingleMode = true\r\n      this.TRACE_INIT(\"Lexer Config handling\", () => {\r\n        if (\r\n          this.config.lineTerminatorsPattern ===\r\n          DEFAULT_LEXER_CONFIG.lineTerminatorsPattern\r\n        ) {\r\n          // optimized built-in implementation for the defaults definition of lineTerminators\r\n          this.config.lineTerminatorsPattern = LineTerminatorOptimizedTester\r\n        } else {\r\n          if (\r\n            this.config.lineTerminatorCharacters ===\r\n            DEFAULT_LEXER_CONFIG.lineTerminatorCharacters\r\n          ) {\r\n            throw Error(\r\n              \"Error: Missing <lineTerminatorCharacters> property on the Lexer config.\\n\" +\r\n                \"\\tFor details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#MISSING_LINE_TERM_CHARS\"\r\n            )\r\n          }\r\n        }\r\n\r\n        if (config.safeMode && config.ensureOptimizations) {\r\n          throw Error(\r\n            '\"safeMode\" and \"ensureOptimizations\" flags are mutually exclusive.'\r\n          )\r\n        }\r\n\r\n        this.trackStartLines = /full|onlyStart/i.test(\r\n          this.config.positionTracking\r\n        )\r\n        this.trackEndLines = /full/i.test(this.config.positionTracking)\r\n\r\n        // Convert SingleModeLexerDefinition into a IMultiModeLexerDefinition.\r\n        if (isArray(lexerDefinition)) {\r\n          actualDefinition = {\r\n            modes: { defaultMode: clone(lexerDefinition) },\r\n            defaultMode: DEFAULT_MODE\r\n          }\r\n        } else {\r\n          // no conversion needed, input should already be a IMultiModeLexerDefinition\r\n          hasOnlySingleMode = false\r\n          actualDefinition = clone(<IMultiModeLexerDefinition>lexerDefinition)\r\n        }\r\n      })\r\n\r\n      if (this.config.skipValidations === false) {\r\n        this.TRACE_INIT(\"performRuntimeChecks\", () => {\r\n          this.lexerDefinitionErrors = this.lexerDefinitionErrors.concat(\r\n            performRuntimeChecks(\r\n              actualDefinition,\r\n              this.trackStartLines,\r\n              this.config.lineTerminatorCharacters\r\n            )\r\n          )\r\n        })\r\n\r\n        this.TRACE_INIT(\"performWarningRuntimeChecks\", () => {\r\n          this.lexerDefinitionWarning = this.lexerDefinitionWarning.concat(\r\n            performWarningRuntimeChecks(\r\n              actualDefinition,\r\n              this.trackStartLines,\r\n              this.config.lineTerminatorCharacters\r\n            )\r\n          )\r\n        })\r\n      }\r\n\r\n      // for extra robustness to avoid throwing an none informative error message\r\n      actualDefinition.modes = actualDefinition.modes\r\n        ? actualDefinition.modes\r\n        : {}\r\n\r\n      // an error of undefined TokenTypes will be detected in \"performRuntimeChecks\" above.\r\n      // this transformation is to increase robustness in the case of partially invalid lexer definition.\r\n      forEach(actualDefinition.modes, (currModeValue, currModeName) => {\r\n        actualDefinition.modes[currModeName] = reject<TokenType>(\r\n          currModeValue,\r\n          (currTokType) => isUndefined(currTokType)\r\n        )\r\n      })\r\n\r\n      const allModeNames = keys(actualDefinition.modes)\r\n\r\n      forEach(\r\n        actualDefinition.modes,\r\n        (currModDef: TokenType[], currModName) => {\r\n          this.TRACE_INIT(`Mode: <${currModName}> processing`, () => {\r\n            this.modes.push(currModName)\r\n\r\n            if (this.config.skipValidations === false) {\r\n              this.TRACE_INIT(`validatePatterns`, () => {\r\n                this.lexerDefinitionErrors = this.lexerDefinitionErrors.concat(\r\n                  validatePatterns(currModDef, allModeNames)\r\n                )\r\n              })\r\n            }\r\n\r\n            // If definition errors were encountered, the analysis phase may fail unexpectedly/\r\n            // Considering a lexer with definition errors may never be used, there is no point\r\n            // to performing the analysis anyhow...\r\n            if (isEmpty(this.lexerDefinitionErrors)) {\r\n              augmentTokenTypes(currModDef)\r\n\r\n              let currAnalyzeResult!: IAnalyzeResult\r\n              this.TRACE_INIT(`analyzeTokenTypes`, () => {\r\n                currAnalyzeResult = analyzeTokenTypes(currModDef, {\r\n                  lineTerminatorCharacters:\r\n                    this.config.lineTerminatorCharacters,\r\n                  positionTracking: config.positionTracking,\r\n                  ensureOptimizations: config.ensureOptimizations,\r\n                  safeMode: config.safeMode,\r\n                  tracer: this.TRACE_INIT\r\n                })\r\n              })\r\n\r\n              this.patternIdxToConfig[currModName] =\r\n                currAnalyzeResult.patternIdxToConfig\r\n\r\n              this.charCodeToPatternIdxToConfig[currModName] =\r\n                currAnalyzeResult.charCodeToPatternIdxToConfig\r\n\r\n              this.emptyGroups = assign(\r\n                {},\r\n                this.emptyGroups,\r\n                currAnalyzeResult.emptyGroups\r\n              ) as any\r\n\r\n              this.hasCustom = currAnalyzeResult.hasCustom || this.hasCustom\r\n\r\n              this.canModeBeOptimized[currModName] =\r\n                currAnalyzeResult.canBeOptimized\r\n            }\r\n          })\r\n        }\r\n      )\r\n\r\n      this.defaultMode = actualDefinition.defaultMode\r\n\r\n      if (\r\n        !isEmpty(this.lexerDefinitionErrors) &&\r\n        !this.config.deferDefinitionErrorsHandling\r\n      ) {\r\n        const allErrMessages = map(this.lexerDefinitionErrors, (error) => {\r\n          return error.message\r\n        })\r\n        const allErrMessagesString = allErrMessages.join(\r\n          \"-----------------------\\n\"\r\n        )\r\n        throw new Error(\r\n          \"Errors detected in definition of Lexer:\\n\" + allErrMessagesString\r\n        )\r\n      }\r\n\r\n      // Only print warning if there are no errors, This will avoid pl\r\n      forEach(this.lexerDefinitionWarning, (warningDescriptor) => {\r\n        PRINT_WARNING(warningDescriptor.message)\r\n      })\r\n\r\n      this.TRACE_INIT(\"Choosing sub-methods implementations\", () => {\r\n        // Choose the relevant internal implementations for this specific parser.\r\n        // These implementations should be in-lined by the JavaScript engine\r\n        // to provide optimal performance in each scenario.\r\n        if (SUPPORT_STICKY) {\r\n          this.chopInput = <any>identity\r\n          this.match = this.matchWithTest\r\n        } else {\r\n          this.updateLastIndex = noop\r\n          this.match = this.matchWithExec\r\n        }\r\n\r\n        if (hasOnlySingleMode) {\r\n          this.handleModes = noop\r\n        }\r\n\r\n        if (this.trackStartLines === false) {\r\n          this.computeNewColumn = identity\r\n        }\r\n\r\n        if (this.trackEndLines === false) {\r\n          this.updateTokenEndLineColumnLocation = noop\r\n        }\r\n\r\n        if (/full/i.test(this.config.positionTracking)) {\r\n          this.createTokenInstance = this.createFullToken\r\n        } else if (/onlyStart/i.test(this.config.positionTracking)) {\r\n          this.createTokenInstance = this.createStartOnlyToken\r\n        } else if (/onlyOffset/i.test(this.config.positionTracking)) {\r\n          this.createTokenInstance = this.createOffsetOnlyToken\r\n        } else {\r\n          throw Error(\r\n            `Invalid <positionTracking> config option: \"${this.config.positionTracking}\"`\r\n          )\r\n        }\r\n\r\n        if (this.hasCustom) {\r\n          this.addToken = this.addTokenUsingPush\r\n          this.handlePayload = this.handlePayloadWithCustom\r\n        } else {\r\n          this.addToken = this.addTokenUsingMemberAccess\r\n          this.handlePayload = this.handlePayloadNoCustom\r\n        }\r\n      })\r\n\r\n      this.TRACE_INIT(\"Failed Optimization Warnings\", () => {\r\n        const unOptimizedModes = reduce(\r\n          this.canModeBeOptimized,\r\n          (cannotBeOptimized, canBeOptimized, modeName) => {\r\n            if (canBeOptimized === false) {\r\n              cannotBeOptimized.push(modeName)\r\n            }\r\n            return cannotBeOptimized\r\n          },\r\n          [] as string[]\r\n        )\r\n\r\n        if (config.ensureOptimizations && !isEmpty(unOptimizedModes)) {\r\n          throw Error(\r\n            `Lexer Modes: < ${unOptimizedModes.join(\r\n              \", \"\r\n            )} > cannot be optimized.\\n` +\r\n              '\\t Disable the \"ensureOptimizations\" lexer config flag to silently ignore this and run the lexer in an un-optimized mode.\\n' +\r\n              \"\\t Or inspect the console log for details on how to resolve these issues.\"\r\n          )\r\n        }\r\n      })\r\n\r\n      this.TRACE_INIT(\"clearRegExpParserCache\", () => {\r\n        clearRegExpParserCache()\r\n      })\r\n\r\n      this.TRACE_INIT(\"toFastProperties\", () => {\r\n        toFastProperties(this)\r\n      })\r\n    })\r\n  }\r\n\r\n  public tokenize(\r\n    text: string,\r\n    initialMode: string = this.defaultMode\r\n  ): ILexingResult {\r\n    if (!isEmpty(this.lexerDefinitionErrors)) {\r\n      const allErrMessages = map(this.lexerDefinitionErrors, (error) => {\r\n        return error.message\r\n      })\r\n      const allErrMessagesString = allErrMessages.join(\r\n        \"-----------------------\\n\"\r\n      )\r\n      throw new Error(\r\n        \"Unable to Tokenize because Errors detected in definition of Lexer:\\n\" +\r\n          allErrMessagesString\r\n      )\r\n    }\r\n\r\n    return this.tokenizeInternal(text, initialMode)\r\n  }\r\n\r\n  // There is quite a bit of duplication between this and \"tokenizeInternalLazy\"\r\n  // This is intentional due to performance considerations.\r\n  // this method also used quite a bit of `!` none null assertions because it is too optimized\r\n  // for `tsc` to always understand it is \"safe\"\r\n  private tokenizeInternal(text: string, initialMode: string): ILexingResult {\r\n    let i,\r\n      j,\r\n      k,\r\n      matchAltImage,\r\n      longerAlt,\r\n      matchedImage: string | null,\r\n      payload,\r\n      altPayload,\r\n      imageLength,\r\n      group,\r\n      tokType,\r\n      newToken: IToken,\r\n      errLength,\r\n      droppedChar,\r\n      msg,\r\n      match\r\n    const orgText = text\r\n    const orgLength = orgText.length\r\n    let offset = 0\r\n    let matchedTokensIndex = 0\r\n    // initializing the tokensArray to the \"guessed\" size.\r\n    // guessing too little will still reduce the number of array re-sizes on pushes.\r\n    // guessing too large (Tested by guessing x4 too large) may cost a bit more of memory\r\n    // but would still have a faster runtime by avoiding (All but one) array resizing.\r\n    const guessedNumberOfTokens = this.hasCustom\r\n      ? 0 // will break custom token pattern APIs the matchedTokens array will contain undefined elements.\r\n      : Math.floor(text.length / 10)\r\n    const matchedTokens = new Array(guessedNumberOfTokens)\r\n    const errors: ILexingError[] = []\r\n    let line = this.trackStartLines ? 1 : undefined\r\n    let column = this.trackStartLines ? 1 : undefined\r\n    const groups: any = cloneEmptyGroups(this.emptyGroups)\r\n    const trackLines = this.trackStartLines\r\n    const lineTerminatorPattern = this.config.lineTerminatorsPattern\r\n\r\n    let currModePatternsLength = 0\r\n    let patternIdxToConfig: IPatternConfig[] = []\r\n    let currCharCodeToPatternIdxToConfig: {\r\n      [charCode: number]: IPatternConfig[]\r\n    } = []\r\n\r\n    const modeStack: string[] = []\r\n\r\n    const emptyArray: IPatternConfig[] = []\r\n    Object.freeze(emptyArray)\r\n    let getPossiblePatterns!: (charCode: number) => IPatternConfig[]\r\n\r\n    function getPossiblePatternsSlow() {\r\n      return patternIdxToConfig\r\n    }\r\n\r\n    function getPossiblePatternsOptimized(charCode: number): IPatternConfig[] {\r\n      const optimizedCharIdx = charCodeToOptimizedIndex(charCode)\r\n      const possiblePatterns =\r\n        currCharCodeToPatternIdxToConfig[optimizedCharIdx]\r\n      if (possiblePatterns === undefined) {\r\n        return emptyArray\r\n      } else {\r\n        return possiblePatterns\r\n      }\r\n    }\r\n\r\n    const pop_mode = (popToken: IToken) => {\r\n      // TODO: perhaps avoid this error in the edge case there is no more input?\r\n      if (\r\n        modeStack.length === 1 &&\r\n        // if we have both a POP_MODE and a PUSH_MODE this is in-fact a \"transition\"\r\n        // So no error should occur.\r\n        popToken.tokenType.PUSH_MODE === undefined\r\n      ) {\r\n        // if we try to pop the last mode there lexer will no longer have ANY mode.\r\n        // thus the pop is ignored, an error will be created and the lexer will continue parsing in the previous mode.\r\n        const msg =\r\n          this.config.errorMessageProvider.buildUnableToPopLexerModeMessage(\r\n            popToken\r\n          )\r\n\r\n        errors.push({\r\n          offset: popToken.startOffset,\r\n          line: popToken.startLine,\r\n          column: popToken.startColumn,\r\n          length: popToken.image.length,\r\n          message: msg\r\n        })\r\n      } else {\r\n        modeStack.pop()\r\n        const newMode = last(modeStack)!\r\n        patternIdxToConfig = this.patternIdxToConfig[newMode]\r\n        currCharCodeToPatternIdxToConfig =\r\n          this.charCodeToPatternIdxToConfig[newMode]\r\n        currModePatternsLength = patternIdxToConfig.length\r\n        const modeCanBeOptimized =\r\n          this.canModeBeOptimized[newMode] && this.config.safeMode === false\r\n\r\n        if (currCharCodeToPatternIdxToConfig && modeCanBeOptimized) {\r\n          getPossiblePatterns = getPossiblePatternsOptimized\r\n        } else {\r\n          getPossiblePatterns = getPossiblePatternsSlow\r\n        }\r\n      }\r\n    }\r\n\r\n    function push_mode(this: Lexer, newMode: string) {\r\n      modeStack.push(newMode)\r\n      currCharCodeToPatternIdxToConfig =\r\n        this.charCodeToPatternIdxToConfig[newMode]\r\n\r\n      patternIdxToConfig = this.patternIdxToConfig[newMode]\r\n      currModePatternsLength = patternIdxToConfig.length\r\n\r\n      currModePatternsLength = patternIdxToConfig.length\r\n      const modeCanBeOptimized =\r\n        this.canModeBeOptimized[newMode] && this.config.safeMode === false\r\n\r\n      if (currCharCodeToPatternIdxToConfig && modeCanBeOptimized) {\r\n        getPossiblePatterns = getPossiblePatternsOptimized\r\n      } else {\r\n        getPossiblePatterns = getPossiblePatternsSlow\r\n      }\r\n    }\r\n\r\n    // this pattern seems to avoid a V8 de-optimization, although that de-optimization does not\r\n    // seem to matter performance wise.\r\n    push_mode.call(this, initialMode)\r\n\r\n    let currConfig!: IPatternConfig\r\n\r\n    const recoveryEnabled = this.config.recoveryEnabled\r\n\r\n    while (offset < orgLength) {\r\n      matchedImage = null\r\n\r\n      const nextCharCode = orgText.charCodeAt(offset)\r\n      const chosenPatternIdxToConfig = getPossiblePatterns(nextCharCode)\r\n      const chosenPatternsLength = chosenPatternIdxToConfig.length\r\n\r\n      for (i = 0; i < chosenPatternsLength; i++) {\r\n        currConfig = chosenPatternIdxToConfig[i]\r\n        const currPattern = currConfig.pattern\r\n        payload = null\r\n\r\n        // manually in-lined because > 600 chars won't be in-lined in V8\r\n        const singleCharCode = currConfig.short\r\n        if (singleCharCode !== false) {\r\n          if (nextCharCode === singleCharCode) {\r\n            // single character string\r\n            matchedImage = currPattern as string\r\n          }\r\n        } else if (currConfig.isCustom === true) {\r\n          match = (currPattern as IRegExpExec).exec(\r\n            orgText,\r\n            offset,\r\n            matchedTokens,\r\n            groups\r\n          )\r\n          if (match !== null) {\r\n            matchedImage = match[0]\r\n            if ((match as CustomPatternMatcherReturn).payload !== undefined) {\r\n              payload = (match as CustomPatternMatcherReturn).payload\r\n            }\r\n          } else {\r\n            matchedImage = null\r\n          }\r\n        } else {\r\n          this.updateLastIndex(currPattern as RegExp, offset)\r\n          matchedImage = this.match(currPattern as RegExp, text, offset)\r\n        }\r\n\r\n        if (matchedImage !== null) {\r\n          // even though this pattern matched we must try a another longer alternative.\r\n          // this can be used to prioritize keywords over identifiers\r\n          longerAlt = currConfig.longerAlt\r\n          if (longerAlt !== undefined) {\r\n            // TODO: micro optimize, avoid extra prop access\r\n            // by saving/linking longerAlt on the original config?\r\n            const longerAltLength = longerAlt.length\r\n            for (k = 0; k < longerAltLength; k++) {\r\n              const longerAltConfig = patternIdxToConfig[longerAlt[k]]\r\n              const longerAltPattern = longerAltConfig.pattern\r\n              altPayload = null\r\n\r\n              // single Char can never be a longer alt so no need to test it.\r\n              // manually in-lined because > 600 chars won't be in-lined in V8\r\n              if (longerAltConfig.isCustom === true) {\r\n                match = (longerAltPattern as IRegExpExec).exec(\r\n                  orgText,\r\n                  offset,\r\n                  matchedTokens,\r\n                  groups\r\n                )\r\n                if (match !== null) {\r\n                  matchAltImage = match[0]\r\n                  if (\r\n                    (match as CustomPatternMatcherReturn).payload !== undefined\r\n                  ) {\r\n                    altPayload = (match as CustomPatternMatcherReturn).payload\r\n                  }\r\n                } else {\r\n                  matchAltImage = null\r\n                }\r\n              } else {\r\n                this.updateLastIndex(longerAltPattern as RegExp, offset)\r\n                matchAltImage = this.match(\r\n                  longerAltPattern as RegExp,\r\n                  text,\r\n                  offset\r\n                )\r\n              }\r\n\r\n              if (matchAltImage && matchAltImage.length > matchedImage.length) {\r\n                matchedImage = matchAltImage\r\n                payload = altPayload\r\n                currConfig = longerAltConfig\r\n                // Exit the loop early after matching one of the longer alternatives\r\n                // The first matched alternative takes precedence\r\n                break\r\n              }\r\n            }\r\n          }\r\n          break\r\n        }\r\n      }\r\n\r\n      // successful match\r\n      if (matchedImage !== null) {\r\n        imageLength = matchedImage.length\r\n        group = currConfig.group\r\n        if (group !== undefined) {\r\n          tokType = currConfig.tokenTypeIdx\r\n          // TODO: \"offset + imageLength\" and the new column may be computed twice in case of \"full\" location information inside\r\n          // createFullToken method\r\n          newToken = this.createTokenInstance(\r\n            matchedImage,\r\n            offset,\r\n            tokType,\r\n            currConfig.tokenType,\r\n            line,\r\n            column,\r\n            imageLength\r\n          )\r\n\r\n          this.handlePayload(newToken, payload)\r\n\r\n          // TODO: optimize NOOP in case there are no special groups?\r\n          if (group === false) {\r\n            matchedTokensIndex = this.addToken(\r\n              matchedTokens,\r\n              matchedTokensIndex,\r\n              newToken\r\n            )\r\n          } else {\r\n            groups[group].push(newToken)\r\n          }\r\n        }\r\n        text = this.chopInput(text, imageLength)\r\n        offset = offset + imageLength\r\n\r\n        // TODO: with newlines the column may be assigned twice\r\n        column = this.computeNewColumn(column!, imageLength)\r\n\r\n        if (trackLines === true && currConfig.canLineTerminator === true) {\r\n          let numOfLTsInMatch = 0\r\n          let foundTerminator\r\n          let lastLTEndOffset: number\r\n          lineTerminatorPattern.lastIndex = 0\r\n          do {\r\n            foundTerminator = lineTerminatorPattern.test(matchedImage)\r\n            if (foundTerminator === true) {\r\n              lastLTEndOffset = lineTerminatorPattern.lastIndex - 1\r\n              numOfLTsInMatch++\r\n            }\r\n          } while (foundTerminator === true)\r\n\r\n          if (numOfLTsInMatch !== 0) {\r\n            line = line! + numOfLTsInMatch\r\n            column = imageLength - lastLTEndOffset!\r\n            this.updateTokenEndLineColumnLocation(\r\n              newToken!,\r\n              group!,\r\n              lastLTEndOffset!,\r\n              numOfLTsInMatch,\r\n              line,\r\n              column,\r\n              imageLength\r\n            )\r\n          }\r\n        }\r\n        // will be NOOP if no modes present\r\n        this.handleModes(currConfig, pop_mode, push_mode, newToken!)\r\n      } else {\r\n        // error recovery, drop characters until we identify a valid token's start point\r\n        const errorStartOffset = offset\r\n        const errorLine = line\r\n        const errorColumn = column\r\n        let foundResyncPoint = recoveryEnabled === false\r\n\r\n        while (foundResyncPoint === false && offset < orgLength) {\r\n          // Identity Func (when sticky flag is enabled)\r\n          text = this.chopInput(text, 1)\r\n          offset++\r\n          for (j = 0; j < currModePatternsLength; j++) {\r\n            const currConfig = patternIdxToConfig[j]\r\n            const currPattern = currConfig.pattern\r\n\r\n            // manually in-lined because > 600 chars won't be in-lined in V8\r\n            const singleCharCode = currConfig.short\r\n            if (singleCharCode !== false) {\r\n              if (orgText.charCodeAt(offset) === singleCharCode) {\r\n                // single character string\r\n                foundResyncPoint = true\r\n              }\r\n            } else if (currConfig.isCustom === true) {\r\n              foundResyncPoint =\r\n                (currPattern as IRegExpExec).exec(\r\n                  orgText,\r\n                  offset,\r\n                  matchedTokens,\r\n                  groups\r\n                ) !== null\r\n            } else {\r\n              this.updateLastIndex(currPattern as RegExp, offset)\r\n              foundResyncPoint = (currPattern as RegExp).exec(text) !== null\r\n            }\r\n\r\n            if (foundResyncPoint === true) {\r\n              break\r\n            }\r\n          }\r\n        }\r\n\r\n        errLength = offset - errorStartOffset\r\n        // at this point we either re-synced or reached the end of the input text\r\n        msg = this.config.errorMessageProvider.buildUnexpectedCharactersMessage(\r\n          orgText,\r\n          errorStartOffset,\r\n          errLength,\r\n          errorLine,\r\n          errorColumn\r\n        )\r\n        errors.push({\r\n          offset: errorStartOffset,\r\n          line: errorLine,\r\n          column: errorColumn,\r\n          length: errLength,\r\n          message: msg\r\n        })\r\n\r\n        if (recoveryEnabled === false) {\r\n          break\r\n        }\r\n      }\r\n    }\r\n\r\n    // if we do have custom patterns which push directly into the\r\n    // TODO: custom tokens should not push directly??\r\n    if (!this.hasCustom) {\r\n      // if we guessed a too large size for the tokens array this will shrink it to the right size.\r\n      matchedTokens.length = matchedTokensIndex\r\n    }\r\n\r\n    return {\r\n      tokens: matchedTokens,\r\n      groups: groups,\r\n      errors: errors\r\n    }\r\n  }\r\n\r\n  private handleModes(\r\n    config: IPatternConfig,\r\n    pop_mode: (tok: IToken) => void,\r\n    push_mode: (this: Lexer, pushMode: string) => void,\r\n    newToken: IToken\r\n  ) {\r\n    if (config.pop === true) {\r\n      // need to save the PUSH_MODE property as if the mode is popped\r\n      // patternIdxToPopMode is updated to reflect the new mode after popping the stack\r\n      const pushMode = config.push\r\n      pop_mode(newToken)\r\n      if (pushMode !== undefined) {\r\n        push_mode.call(this, pushMode)\r\n      }\r\n    } else if (config.push !== undefined) {\r\n      push_mode.call(this, config.push)\r\n    }\r\n  }\r\n\r\n  private chopInput(text: string, length: number): string {\r\n    return text.substring(length)\r\n  }\r\n\r\n  private updateLastIndex(regExp: RegExp, newLastIndex: number): void {\r\n    regExp.lastIndex = newLastIndex\r\n  }\r\n\r\n  // TODO: decrease this under 600 characters? inspect stripping comments option in TSC compiler\r\n  private updateTokenEndLineColumnLocation(\r\n    newToken: IToken,\r\n    group: string | false,\r\n    lastLTIdx: number,\r\n    numOfLTsInMatch: number,\r\n    line: number,\r\n    column: number,\r\n    imageLength: number\r\n  ): void {\r\n    let lastCharIsLT, fixForEndingInLT\r\n    if (group !== undefined) {\r\n      // a none skipped multi line Token, need to update endLine/endColumn\r\n      lastCharIsLT = lastLTIdx === imageLength - 1\r\n      fixForEndingInLT = lastCharIsLT ? -1 : 0\r\n      if (!(numOfLTsInMatch === 1 && lastCharIsLT === true)) {\r\n        // if a token ends in a LT that last LT only affects the line numbering of following Tokens\r\n        newToken.endLine = line + fixForEndingInLT\r\n        // the last LT in a token does not affect the endColumn either as the [columnStart ... columnEnd)\r\n        // inclusive to exclusive range.\r\n        newToken.endColumn = column - 1 + -fixForEndingInLT\r\n      }\r\n      // else single LT in the last character of a token, no need to modify the endLine/EndColumn\r\n    }\r\n  }\r\n\r\n  private computeNewColumn(oldColumn: number, imageLength: number) {\r\n    return oldColumn + imageLength\r\n  }\r\n\r\n  // Place holder, will be replaced by the correct variant according to the locationTracking option at runtime.\r\n  /* istanbul ignore next - place holder */\r\n  private createTokenInstance!: (...args: any[]) => IToken\r\n\r\n  private createOffsetOnlyToken(\r\n    image: string,\r\n    startOffset: number,\r\n    tokenTypeIdx: number,\r\n    tokenType: TokenType\r\n  ) {\r\n    return {\r\n      image,\r\n      startOffset,\r\n      tokenTypeIdx,\r\n      tokenType\r\n    }\r\n  }\r\n\r\n  private createStartOnlyToken(\r\n    image: string,\r\n    startOffset: number,\r\n    tokenTypeIdx: number,\r\n    tokenType: TokenType,\r\n    startLine: number,\r\n    startColumn: number\r\n  ) {\r\n    return {\r\n      image,\r\n      startOffset,\r\n      startLine,\r\n      startColumn,\r\n      tokenTypeIdx,\r\n      tokenType\r\n    }\r\n  }\r\n\r\n  private createFullToken(\r\n    image: string,\r\n    startOffset: number,\r\n    tokenTypeIdx: number,\r\n    tokenType: TokenType,\r\n    startLine: number,\r\n    startColumn: number,\r\n    imageLength: number\r\n  ): IToken {\r\n    return {\r\n      image,\r\n      startOffset,\r\n      endOffset: startOffset + imageLength - 1,\r\n      startLine,\r\n      endLine: startLine,\r\n      startColumn,\r\n      endColumn: startColumn + imageLength - 1,\r\n      tokenTypeIdx,\r\n      tokenType\r\n    }\r\n  }\r\n\r\n  // Place holder, will be replaced by the correct variant according to the locationTracking option at runtime.\r\n  /* istanbul ignore next - place holder */\r\n  private addToken!: (\r\n    tokenVector: IToken[],\r\n    index: number,\r\n    tokenToAdd: IToken\r\n  ) => number\r\n\r\n  private addTokenUsingPush(\r\n    tokenVector: IToken[],\r\n    index: number,\r\n    tokenToAdd: IToken\r\n  ): number {\r\n    tokenVector.push(tokenToAdd)\r\n    return index\r\n  }\r\n\r\n  private addTokenUsingMemberAccess(\r\n    tokenVector: IToken[],\r\n    index: number,\r\n    tokenToAdd: IToken\r\n  ): number {\r\n    tokenVector[index] = tokenToAdd\r\n    index++\r\n    return index\r\n  }\r\n\r\n  // Place holder, will be replaced by the correct variant according to the hasCustom flag option at runtime.\r\n  private handlePayload: (token: IToken, payload: any) => void\r\n\r\n  private handlePayloadNoCustom(token: IToken, payload: any): void {}\r\n\r\n  private handlePayloadWithCustom(token: IToken, payload: any): void {\r\n    if (payload !== null) {\r\n      token.payload = payload\r\n    }\r\n  }\r\n\r\n  // place holder to be replaced with chosen alternative at runtime\r\n  private match!: (\r\n    pattern: RegExp,\r\n    text: string,\r\n    offset: number\r\n  ) => string | null\r\n\r\n  private matchWithTest(\r\n    pattern: RegExp,\r\n    text: string,\r\n    offset: number\r\n  ): string | null {\r\n    const found = pattern.test(text)\r\n    if (found === true) {\r\n      return text.substring(offset, pattern.lastIndex)\r\n    }\r\n    return null\r\n  }\r\n\r\n  private matchWithExec(pattern: RegExp, text: string): string | null {\r\n    const regExpArray = pattern.exec(text)\r\n    return regExpArray !== null ? regExpArray[0] : null\r\n  }\r\n\r\n  // Duplicated from the parser's perf trace trait to allow future extraction\r\n  // of the lexer to a separate package.\r\n  TRACE_INIT = <T>(phaseDesc: string, phaseImpl: () => T): T => {\r\n    // No need to optimize this using NOOP pattern because\r\n    // It is not called in a hot spot...\r\n    if (this.traceInitPerf === true) {\r\n      this.traceInitIndent++\r\n      const indent = new Array(this.traceInitIndent + 1).join(\"\\t\")\r\n      if (this.traceInitIndent < this.traceInitMaxIdent) {\r\n        console.log(`${indent}--> <${phaseDesc}>`)\r\n      }\r\n      const { time, value } = timer(phaseImpl)\r\n      /* istanbul ignore next - Difficult to reproduce specific performance behavior (>10ms) in tests */\r\n      const traceMethod = time > 10 ? console.warn : console.log\r\n      if (this.traceInitIndent < this.traceInitMaxIdent) {\r\n        traceMethod(`${indent}<-- <${phaseDesc}> time: ${time}ms`)\r\n      }\r\n      this.traceInitIndent--\r\n      return value\r\n    } else {\r\n      return phaseImpl()\r\n    }\r\n  }\r\n}\r\n", "import isString from \"lodash/isString\"\r\nimport has from \"lodash/has\"\r\nimport isUndefined from \"lodash/isUndefined\"\r\nimport { Lexer } from \"./lexer_public\"\r\nimport { augmentTokenTypes, tokenStructuredMatcher } from \"./tokens\"\r\nimport { IToken, ITokenConfig, TokenType } from \"@chevrotain/types\"\r\n\r\nexport function tokenLabel(tokType: TokenType): string {\r\n  if (hasTokenLabel(tokType)) {\r\n    return tokType.LABEL\r\n  } else {\r\n    return tokType.name\r\n  }\r\n}\r\n\r\nexport function tokenName(tokType: TokenType): string {\r\n  return tokType.name\r\n}\r\n\r\nexport function hasTokenLabel(\r\n  obj: TokenType\r\n): obj is TokenType & Pick<Required<TokenType>, \"LABEL\"> {\r\n  return isString(obj.LABEL) && obj.LABEL !== \"\"\r\n}\r\n\r\nconst PARENT = \"parent\"\r\nconst CATEGORIES = \"categories\"\r\nconst LABEL = \"label\"\r\nconst GROUP = \"group\"\r\nconst PUSH_MODE = \"push_mode\"\r\nconst POP_MODE = \"pop_mode\"\r\nconst LONGER_ALT = \"longer_alt\"\r\nconst LINE_BREAKS = \"line_breaks\"\r\nconst START_CHARS_HINT = \"start_chars_hint\"\r\n\r\nexport function createToken(config: ITokenConfig): TokenType {\r\n  return createTokenInternal(config)\r\n}\r\n\r\nfunction createTokenInternal(config: ITokenConfig): TokenType {\r\n  const pattern = config.pattern\r\n\r\n  const tokenType: TokenType = <any>{}\r\n  tokenType.name = config.name\r\n\r\n  if (!isUndefined(pattern)) {\r\n    tokenType.PATTERN = pattern\r\n  }\r\n\r\n  if (has(config, PARENT)) {\r\n    throw (\r\n      \"The parent property is no longer supported.\\n\" +\r\n      \"See: https://github.com/chevrotain/chevrotain/issues/564#issuecomment-349062346 for details.\"\r\n    )\r\n  }\r\n\r\n  if (has(config, CATEGORIES)) {\r\n    // casting to ANY as this will be fixed inside `augmentTokenTypes``\r\n    tokenType.CATEGORIES = <any>config[CATEGORIES]\r\n  }\r\n\r\n  augmentTokenTypes([tokenType])\r\n\r\n  if (has(config, LABEL)) {\r\n    tokenType.LABEL = config[LABEL]\r\n  }\r\n\r\n  if (has(config, GROUP)) {\r\n    tokenType.GROUP = config[GROUP]\r\n  }\r\n\r\n  if (has(config, POP_MODE)) {\r\n    tokenType.POP_MODE = config[POP_MODE]\r\n  }\r\n\r\n  if (has(config, PUSH_MODE)) {\r\n    tokenType.PUSH_MODE = config[PUSH_MODE]\r\n  }\r\n\r\n  if (has(config, LONGER_ALT)) {\r\n    tokenType.LONGER_ALT = config[LONGER_ALT]\r\n  }\r\n\r\n  if (has(config, LINE_BREAKS)) {\r\n    tokenType.LINE_BREAKS = config[LINE_BREAKS]\r\n  }\r\n\r\n  if (has(config, START_CHARS_HINT)) {\r\n    tokenType.START_CHARS_HINT = config[START_CHARS_HINT]\r\n  }\r\n\r\n  return tokenType\r\n}\r\n\r\nexport const EOF = createToken({ name: \"EOF\", pattern: Lexer.NA })\r\naugmentTokenTypes([EOF])\r\n\r\nexport function createTokenInstance(\r\n  tokType: TokenType,\r\n  image: string,\r\n  startOffset: number,\r\n  endOffset: number,\r\n  startLine: number,\r\n  endLine: number,\r\n  startColumn: number,\r\n  endColumn: number\r\n): IToken {\r\n  return {\r\n    image,\r\n    startOffset,\r\n    endOffset,\r\n    startLine,\r\n    endLine,\r\n    startColumn,\r\n    endColumn,\r\n    tokenTypeIdx: (<any>tokType).tokenTypeIdx,\r\n    tokenType: tokType\r\n  }\r\n}\r\n\r\nexport function tokenMatcher(token: IToken, tokType: TokenType): boolean {\r\n  return tokenStructuredMatcher(token, tokType)\r\n}\r\n", "import { hasTokenLabel, tokenLabel } from \"../scan/tokens_public\"\r\nimport first from \"lodash/first\"\r\nimport map from \"lodash/map\"\r\nimport reduce from \"lodash/reduce\"\r\nimport { Alternation, NonTerminal, Rule, Terminal } from \"@chevrotain/gast\"\r\nimport { getProductionDslName } from \"@chevrotain/gast\"\r\nimport {\r\n  IParserErrorMessageProvider,\r\n  IProductionWithOccurrence,\r\n  TokenType\r\n} from \"@chevrotain/types\"\r\nimport {\r\n  IGrammarResolverErrorMessageProvider,\r\n  IGrammarValidatorErrorMessageProvider\r\n} from \"./grammar/types\"\r\n\r\nexport const defaultParserErrorProvider: IParserErrorMessageProvider = {\r\n  buildMismatchTokenMessage({ expected, actual, previous, ruleName }): string {\r\n    const hasLabel = hasTokenLabel(expected)\r\n    const expectedMsg = hasLabel\r\n      ? `--> ${tokenLabel(expected)} <--`\r\n      : `token of type --> ${expected.name} <--`\r\n\r\n    const msg = `Expecting ${expectedMsg} but found --> '${actual.image}' <--`\r\n\r\n    return msg\r\n  },\r\n\r\n  buildNotAllInputParsedMessage({ firstRedundant, ruleName }): string {\r\n    return \"Redundant input, expecting EOF but found: \" + firstRedundant.image\r\n  },\r\n\r\n  buildNoViableAltMessage({\r\n    expectedPathsPerAlt,\r\n    actual,\r\n    previous,\r\n    customUserDescription,\r\n    ruleName\r\n  }): string {\r\n    const errPrefix = \"Expecting: \"\r\n    // TODO: issue: No Viable Alternative Error may have incomplete details. #502\r\n    const actualText = first(actual)!.image\r\n    const errSuffix = \"\\nbut found: '\" + actualText + \"'\"\r\n\r\n    if (customUserDescription) {\r\n      return errPrefix + customUserDescription + errSuffix\r\n    } else {\r\n      const allLookAheadPaths = reduce(\r\n        expectedPathsPerAlt,\r\n        (result, currAltPaths) => result.concat(currAltPaths),\r\n        [] as TokenType[][]\r\n      )\r\n      const nextValidTokenSequences = map(\r\n        allLookAheadPaths,\r\n        (currPath) =>\r\n          `[${map(currPath, (currTokenType) => tokenLabel(currTokenType)).join(\r\n            \", \"\r\n          )}]`\r\n      )\r\n      const nextValidSequenceItems = map(\r\n        nextValidTokenSequences,\r\n        (itemMsg, idx) => `  ${idx + 1}. ${itemMsg}`\r\n      )\r\n      const calculatedDescription = `one of these possible Token sequences:\\n${nextValidSequenceItems.join(\r\n        \"\\n\"\r\n      )}`\r\n\r\n      return errPrefix + calculatedDescription + errSuffix\r\n    }\r\n  },\r\n\r\n  buildEarlyExitMessage({\r\n    expectedIterationPaths,\r\n    actual,\r\n    customUserDescription,\r\n    ruleName\r\n  }): string {\r\n    const errPrefix = \"Expecting: \"\r\n    // TODO: issue: No Viable Alternative Error may have incomplete details. #502\r\n    const actualText = first(actual)!.image\r\n    const errSuffix = \"\\nbut found: '\" + actualText + \"'\"\r\n\r\n    if (customUserDescription) {\r\n      return errPrefix + customUserDescription + errSuffix\r\n    } else {\r\n      const nextValidTokenSequences = map(\r\n        expectedIterationPaths,\r\n        (currPath) =>\r\n          `[${map(currPath, (currTokenType) => tokenLabel(currTokenType)).join(\r\n            \",\"\r\n          )}]`\r\n      )\r\n      const calculatedDescription =\r\n        `expecting at least one iteration which starts with one of these possible Token sequences::\\n  ` +\r\n        `<${nextValidTokenSequences.join(\" ,\")}>`\r\n\r\n      return errPrefix + calculatedDescription + errSuffix\r\n    }\r\n  }\r\n}\r\n\r\nObject.freeze(defaultParserErrorProvider)\r\n\r\nexport const defaultGrammarResolverErrorProvider: IGrammarResolverErrorMessageProvider =\r\n  {\r\n    buildRuleNotFoundError(\r\n      topLevelRule: Rule,\r\n      undefinedRule: NonTerminal\r\n    ): string {\r\n      const msg =\r\n        \"Invalid grammar, reference to a rule which is not defined: ->\" +\r\n        undefinedRule.nonTerminalName +\r\n        \"<-\\n\" +\r\n        \"inside top level rule: ->\" +\r\n        topLevelRule.name +\r\n        \"<-\"\r\n      return msg\r\n    }\r\n  }\r\n\r\nexport const defaultGrammarValidatorErrorProvider: IGrammarValidatorErrorMessageProvider =\r\n  {\r\n    buildDuplicateFoundError(\r\n      topLevelRule: Rule,\r\n      duplicateProds: IProductionWithOccurrence[]\r\n    ): string {\r\n      function getExtraProductionArgument(\r\n        prod: IProductionWithOccurrence\r\n      ): string {\r\n        if (prod instanceof Terminal) {\r\n          return prod.terminalType.name\r\n        } else if (prod instanceof NonTerminal) {\r\n          return prod.nonTerminalName\r\n        } else {\r\n          return \"\"\r\n        }\r\n      }\r\n\r\n      const topLevelName = topLevelRule.name\r\n      const duplicateProd = first(duplicateProds)!\r\n      const index = duplicateProd.idx\r\n      const dslName = getProductionDslName(duplicateProd)\r\n      const extraArgument = getExtraProductionArgument(duplicateProd)\r\n\r\n      const hasExplicitIndex = index > 0\r\n      let msg = `->${dslName}${hasExplicitIndex ? index : \"\"}<- ${\r\n        extraArgument ? `with argument: ->${extraArgument}<-` : \"\"\r\n      }\r\n                  appears more than once (${\r\n                    duplicateProds.length\r\n                  } times) in the top level rule: ->${topLevelName}<-.                  \r\n                  For further details see: https://chevrotain.io/docs/FAQ.html#NUMERICAL_SUFFIXES \r\n                  `\r\n\r\n      // white space trimming time! better to trim afterwards as it allows to use WELL formatted multi line template strings...\r\n      msg = msg.replace(/[ \\t]+/g, \" \")\r\n      msg = msg.replace(/\\s\\s+/g, \"\\n\")\r\n\r\n      return msg\r\n    },\r\n\r\n    buildNamespaceConflictError(rule: Rule): string {\r\n      const errMsg =\r\n        `Namespace conflict found in grammar.\\n` +\r\n        `The grammar has both a Terminal(Token) and a Non-Terminal(Rule) named: <${rule.name}>.\\n` +\r\n        `To resolve this make sure each Terminal and Non-Terminal names are unique\\n` +\r\n        `This is easy to accomplish by using the convention that Terminal names start with an uppercase letter\\n` +\r\n        `and Non-Terminal names start with a lower case letter.`\r\n\r\n      return errMsg\r\n    },\r\n\r\n    buildAlternationPrefixAmbiguityError(options: {\r\n      topLevelRule: Rule\r\n      prefixPath: TokenType[]\r\n      ambiguityIndices: number[]\r\n      alternation: Alternation\r\n    }): string {\r\n      const pathMsg = map(options.prefixPath, (currTok) =>\r\n        tokenLabel(currTok)\r\n      ).join(\", \")\r\n      const occurrence =\r\n        options.alternation.idx === 0 ? \"\" : options.alternation.idx\r\n      const errMsg =\r\n        `Ambiguous alternatives: <${options.ambiguityIndices.join(\r\n          \" ,\"\r\n        )}> due to common lookahead prefix\\n` +\r\n        `in <OR${occurrence}> inside <${options.topLevelRule.name}> Rule,\\n` +\r\n        `<${pathMsg}> may appears as a prefix path in all these alternatives.\\n` +\r\n        `See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#COMMON_PREFIX\\n` +\r\n        `For Further details.`\r\n\r\n      return errMsg\r\n    },\r\n\r\n    buildAlternationAmbiguityError(options: {\r\n      topLevelRule: Rule\r\n      prefixPath: TokenType[]\r\n      ambiguityIndices: number[]\r\n      alternation: Alternation\r\n    }): string {\r\n      const pathMsg = map(options.prefixPath, (currtok) =>\r\n        tokenLabel(currtok)\r\n      ).join(\", \")\r\n      const occurrence =\r\n        options.alternation.idx === 0 ? \"\" : options.alternation.idx\r\n      let currMessage =\r\n        `Ambiguous Alternatives Detected: <${options.ambiguityIndices.join(\r\n          \" ,\"\r\n        )}> in <OR${occurrence}>` +\r\n        ` inside <${options.topLevelRule.name}> Rule,\\n` +\r\n        `<${pathMsg}> may appears as a prefix path in all these alternatives.\\n`\r\n\r\n      currMessage =\r\n        currMessage +\r\n        `See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#AMBIGUOUS_ALTERNATIVES\\n` +\r\n        `For Further details.`\r\n      return currMessage\r\n    },\r\n\r\n    buildEmptyRepetitionError(options: {\r\n      topLevelRule: Rule\r\n      repetition: IProductionWithOccurrence\r\n    }): string {\r\n      let dslName = getProductionDslName(options.repetition)\r\n      if (options.repetition.idx !== 0) {\r\n        dslName += options.repetition.idx\r\n      }\r\n\r\n      const errMsg =\r\n        `The repetition <${dslName}> within Rule <${options.topLevelRule.name}> can never consume any tokens.\\n` +\r\n        `This could lead to an infinite loop.`\r\n\r\n      return errMsg\r\n    },\r\n\r\n    // TODO: remove - `errors_public` from nyc.config.js exclude\r\n    //       once this method is fully removed from this file\r\n    buildTokenNameError(options: {\r\n      tokenType: TokenType\r\n      expectedPattern: RegExp\r\n    }): string {\r\n      /* istanbul ignore next */\r\n      return \"deprecated\"\r\n    },\r\n\r\n    buildEmptyAlternationError(options: {\r\n      topLevelRule: Rule\r\n      alternation: Alternation\r\n      emptyChoiceIdx: number\r\n    }): string {\r\n      const errMsg =\r\n        `Ambiguous empty alternative: <${options.emptyChoiceIdx + 1}>` +\r\n        ` in <OR${options.alternation.idx}> inside <${options.topLevelRule.name}> Rule.\\n` +\r\n        `Only the last alternative may be an empty alternative.`\r\n\r\n      return errMsg\r\n    },\r\n\r\n    buildTooManyAlternativesError(options: {\r\n      topLevelRule: Rule\r\n      alternation: Alternation\r\n    }): string {\r\n      const errMsg =\r\n        `An Alternation cannot have more than 256 alternatives:\\n` +\r\n        `<OR${options.alternation.idx}> inside <${\r\n          options.topLevelRule.name\r\n        }> Rule.\\n has ${\r\n          options.alternation.definition.length + 1\r\n        } alternatives.`\r\n\r\n      return errMsg\r\n    },\r\n\r\n    buildLeftRecursionError(options: {\r\n      topLevelRule: Rule\r\n      leftRecursionPath: Rule[]\r\n    }): string {\r\n      const ruleName = options.topLevelRule.name\r\n      const pathNames = map(\r\n        options.leftRecursionPath,\r\n        (currRule) => currRule.name\r\n      )\r\n      const leftRecursivePath = `${ruleName} --> ${pathNames\r\n        .concat([ruleName])\r\n        .join(\" --> \")}`\r\n      const errMsg =\r\n        `Left Recursion found in grammar.\\n` +\r\n        `rule: <${ruleName}> can be invoked from itself (directly or indirectly)\\n` +\r\n        `without consuming any Tokens. The grammar path that causes this is: \\n ${leftRecursivePath}\\n` +\r\n        ` To fix this refactor your grammar to remove the left recursion.\\n` +\r\n        `see: https://en.wikipedia.org/wiki/LL_parser#Left_factoring.`\r\n\r\n      return errMsg\r\n    },\r\n\r\n    // TODO: remove - `errors_public` from nyc.config.js exclude\r\n    //       once this method is fully removed from this file\r\n    buildInvalidRuleNameError(options: {\r\n      topLevelRule: Rule\r\n      expectedPattern: RegExp\r\n    }): string {\r\n      /* istanbul ignore next */\r\n      return \"deprecated\"\r\n    },\r\n\r\n    buildDuplicateRuleNameError(options: {\r\n      topLevelRule: Rule | string\r\n      grammarName: string\r\n    }): string {\r\n      let ruleName\r\n      if (options.topLevelRule instanceof Rule) {\r\n        ruleName = options.topLevelRule.name\r\n      } else {\r\n        ruleName = options.topLevelRule\r\n      }\r\n\r\n      const errMsg = `Duplicate definition, rule: ->${ruleName}<- is already defined in the grammar: ->${options.grammarName}<-`\r\n\r\n      return errMsg\r\n    }\r\n  }\r\n", "import {\r\n  IParserUnresolvedRefDefinitionError,\r\n  ParserDefinitionErrorType\r\n} from \"../parser/parser\"\r\nimport forEach from \"lodash/forEach\"\r\nimport values from \"lodash/values\"\r\nimport { NonTerminal, Rule } from \"@chevrotain/gast\"\r\nimport { GAstVisitor } from \"@chevrotain/gast\"\r\nimport {\r\n  IGrammarResolverErrorMessageProvider,\r\n  IParserDefinitionError\r\n} from \"./types\"\r\n\r\nexport function resolveGrammar(\r\n  topLevels: Record<string, Rule>,\r\n  errMsgProvider: IGrammarResolverErrorMessageProvider\r\n): IParserDefinitionError[] {\r\n  const refResolver = new GastRefResolverVisitor(topLevels, errMsgProvider)\r\n  refResolver.resolveRefs()\r\n  return refResolver.errors\r\n}\r\n\r\nexport class GastRefResolverVisitor extends GAstVisitor {\r\n  public errors: IParserUnresolvedRefDefinitionError[] = []\r\n  private currTopLevel: Rule\r\n\r\n  constructor(\r\n    private nameToTopRule: Record<string, Rule>,\r\n    private errMsgProvider: IGrammarResolverErrorMessageProvider\r\n  ) {\r\n    super()\r\n  }\r\n\r\n  public resolveRefs(): void {\r\n    forEach(values(this.nameToTopRule), (prod) => {\r\n      this.currTopLevel = prod\r\n      prod.accept(this)\r\n    })\r\n  }\r\n\r\n  public visitNonTerminal(node: NonTerminal): void {\r\n    const ref = this.nameToTopRule[node.nonTerminalName]\r\n\r\n    if (!ref) {\r\n      const msg = this.errMsgProvider.buildRuleNotFoundError(\r\n        this.currTopLevel,\r\n        node\r\n      )\r\n      this.errors.push({\r\n        message: msg,\r\n        type: ParserDefinitionErrorType.UNRESOLVED_SUBRULE_REF,\r\n        ruleName: this.currTopLevel.name,\r\n        unresolvedRefName: node.nonTerminalName\r\n      })\r\n    } else {\r\n      node.referencedRule = ref\r\n    }\r\n  }\r\n}\r\n", "/**\r\n * A specialized version of `baseAggregator` for arrays.\r\n *\r\n * @private\r\n * @param {Array} [array] The array to iterate over.\r\n * @param {Function} setter The function to set `accumulator` values.\r\n * @param {Function} iteratee The iteratee to transform keys.\r\n * @param {Object} accumulator The initial aggregated object.\r\n * @returns {Function} Returns `accumulator`.\r\n */\r\nfunction arrayAggregator(array, setter, iteratee, accumulator) {\r\n  var index = -1,\r\n      length = array == null ? 0 : array.length;\r\n\r\n  while (++index < length) {\r\n    var value = array[index];\r\n    setter(accumulator, value, iteratee(value), array);\r\n  }\r\n  return accumulator;\r\n}\r\n\r\nmodule.exports = arrayAggregator;\r\n", "var baseEach = require('./_baseEach');\r\n\r\n/**\r\n * Aggregates elements of `collection` on `accumulator` with keys transformed\r\n * by `iteratee` and values set by `setter`.\r\n *\r\n * @private\r\n * @param {Array|Object} collection The collection to iterate over.\r\n * @param {Function} setter The function to set `accumulator` values.\r\n * @param {Function} iteratee The iteratee to transform keys.\r\n * @param {Object} accumulator The initial aggregated object.\r\n * @returns {Function} Returns `accumulator`.\r\n */\r\nfunction baseAggregator(collection, setter, iteratee, accumulator) {\r\n  baseEach(collection, function(value, key, collection) {\r\n    setter(accumulator, value, iteratee(value), collection);\r\n  });\r\n  return accumulator;\r\n}\r\n\r\nmodule.exports = baseAggregator;\r\n", "var arrayAggregator = require('./_arrayAggregator'),\r\n    baseAggregator = require('./_baseAggregator'),\r\n    baseIteratee = require('./_baseIteratee'),\r\n    isArray = require('./isArray');\r\n\r\n/**\r\n * Creates a function like `_.groupBy`.\r\n *\r\n * @private\r\n * @param {Function} setter The function to set accumulator values.\r\n * @param {Function} [initializer] The accumulator object initializer.\r\n * @returns {Function} Returns the new aggregator function.\r\n */\r\nfunction createAggregator(setter, initializer) {\r\n  return function(collection, iteratee) {\r\n    var func = isArray(collection) ? arrayAggregator : baseAggregator,\r\n        accumulator = initializer ? initializer() : {};\r\n\r\n    return func(collection, setter, baseIteratee(iteratee, 2), accumulator);\r\n  };\r\n}\r\n\r\nmodule.exports = createAggregator;\r\n", "var baseAssignValue = require('./_baseAssignValue'),\r\n    createAggregator = require('./_createAggregator');\r\n\r\n/** Used for built-in method references. */\r\nvar objectProto = Object.prototype;\r\n\r\n/** Used to check objects for own properties. */\r\nvar hasOwnProperty = objectProto.hasOwnProperty;\r\n\r\n/**\r\n * Creates an object composed of keys generated from the results of running\r\n * each element of `collection` thru `iteratee`. The order of grouped values\r\n * is determined by the order they occur in `collection`. The corresponding\r\n * value of each key is an array of elements responsible for generating the\r\n * key. The iteratee is invoked with one argument: (value).\r\n *\r\n * @static\r\n * @memberOf _\r\n * @since 0.1.0\r\n * @category Collection\r\n * @param {Array|Object} collection The collection to iterate over.\r\n * @param {Function} [iteratee=_.identity] The iteratee to transform keys.\r\n * @returns {Object} Returns the composed aggregate object.\r\n * @example\r\n *\r\n * _.groupBy([6.1, 4.2, 6.3], Math.floor);\r\n * // => { '4': [4.2], '6': [6.1, 6.3] }\r\n *\r\n * // The `_.property` iteratee shorthand.\r\n * _.groupBy(['one', 'two', 'three'], 'length');\r\n * // => { '3': ['one', 'two'], '5': ['three'] }\r\n */\r\nvar groupBy = createAggregator(function(result, value, key) {\r\n  if (hasOwnProperty.call(result, key)) {\r\n    result[key].push(value);\r\n  } else {\r\n    baseAssignValue(result, key, [value]);\r\n  }\r\n});\r\n\r\nmodule.exports = groupBy;\r\n", "var baseFlatten = require('./_baseFlatten'),\r\n    map = require('./map');\r\n\r\n/**\r\n * Creates a flattened array of values by running each element in `collection`\r\n * thru `iteratee` and flattening the mapped results. The iteratee is invoked\r\n * with three arguments: (value, index|key, collection).\r\n *\r\n * @static\r\n * @memberOf _\r\n * @since 4.0.0\r\n * @category Collection\r\n * @param {Array|Object} collection The collection to iterate over.\r\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\r\n * @returns {Array} Returns the new flattened array.\r\n * @example\r\n *\r\n * function duplicate(n) {\r\n *   return [n, n];\r\n * }\r\n *\r\n * _.flatMap([1, 2], duplicate);\r\n * // => [1, 1, 2, 2]\r\n */\r\nfunction flatMap(collection, iteratee) {\r\n  return baseFlatten(map(collection, iteratee), 1);\r\n}\r\n\r\nmodule.exports = flatMap;\r\n", "var baseSlice = require('./_baseSlice'),\r\n    toInteger = require('./toInteger');\r\n\r\n/**\r\n * Creates a slice of `array` with `n` elements dropped from the end.\r\n *\r\n * @static\r\n * @memberOf _\r\n * @since 3.0.0\r\n * @category Array\r\n * @param {Array} array The array to query.\r\n * @param {number} [n=1] The number of elements to drop.\r\n * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\r\n * @returns {Array} Returns the slice of `array`.\r\n * @example\r\n *\r\n * _.dropRight([1, 2, 3]);\r\n * // => [1, 2]\r\n *\r\n * _.dropRight([1, 2, 3], 2);\r\n * // => [1]\r\n *\r\n * _.dropRight([1, 2, 3], 5);\r\n * // => []\r\n *\r\n * _.dropRight([1, 2, 3], 0);\r\n * // => [1, 2, 3]\r\n */\r\nfunction dropRight(array, n, guard) {\r\n  var length = array == null ? 0 : array.length;\r\n  if (!length) {\r\n    return [];\r\n  }\r\n  n = (guard || n === undefined) ? 1 : toInteger(n);\r\n  n = length - n;\r\n  return baseSlice(array, 0, n < 0 ? 0 : n);\r\n}\r\n\r\nmodule.exports = dropRight;\r\n", "import { RestWalker } from \"./rest\"\r\nimport _first from \"lodash/first\"\r\nimport isEmpty from \"lodash/isEmpty\"\r\nimport dropRight from \"lodash/dropRight\"\r\nimport drop from \"lodash/drop\"\r\nimport last from \"lodash/last\"\r\nimport forEach from \"lodash/forEach\"\r\nimport clone from \"lodash/clone\"\r\nimport { first } from \"./first\"\r\nimport { TokenMatcher } from \"../parser/parser\"\r\nimport {\r\n  Alternation,\r\n  Alternative,\r\n  NonTerminal,\r\n  Option,\r\n  Repetition,\r\n  RepetitionMandatory,\r\n  RepetitionMandatoryWithSeparator,\r\n  RepetitionWithSeparator,\r\n  Rule,\r\n  Terminal\r\n} from \"@chevrotain/gast\"\r\nimport {\r\n  IGrammarPath,\r\n  IProduction,\r\n  ISyntacticContentAssistPath,\r\n  IToken,\r\n  ITokenGrammarPath,\r\n  TokenType\r\n} from \"@chevrotain/types\"\r\n\r\nexport abstract class AbstractNextPossibleTokensWalker extends RestWalker {\r\n  protected possibleTokTypes: TokenType[] = []\r\n  protected ruleStack: string[]\r\n  protected occurrenceStack: number[]\r\n\r\n  protected nextProductionName = \"\"\r\n  protected nextProductionOccurrence = 0\r\n  protected found = false\r\n  protected isAtEndOfPath = false\r\n\r\n  constructor(protected topProd: Rule, protected path: IGrammarPath) {\r\n    super()\r\n  }\r\n\r\n  startWalking(): TokenType[] {\r\n    this.found = false\r\n\r\n    if (this.path.ruleStack[0] !== this.topProd.name) {\r\n      throw Error(\"The path does not start with the walker's top Rule!\")\r\n    }\r\n\r\n    // immutable for the win\r\n    this.ruleStack = clone(this.path.ruleStack).reverse() // intelij bug requires assertion\r\n    this.occurrenceStack = clone(this.path.occurrenceStack).reverse() // intelij bug requires assertion\r\n\r\n    // already verified that the first production is valid, we now seek the 2nd production\r\n    this.ruleStack.pop()\r\n    this.occurrenceStack.pop()\r\n\r\n    this.updateExpectedNext()\r\n    this.walk(this.topProd)\r\n\r\n    return this.possibleTokTypes\r\n  }\r\n\r\n  walk(\r\n    prod: { definition: IProduction[] },\r\n    prevRest: IProduction[] = []\r\n  ): void {\r\n    // stop scanning once we found the path\r\n    if (!this.found) {\r\n      super.walk(prod, prevRest)\r\n    }\r\n  }\r\n\r\n  walkProdRef(\r\n    refProd: NonTerminal,\r\n    currRest: IProduction[],\r\n    prevRest: IProduction[]\r\n  ): void {\r\n    // found the next production, need to keep walking in it\r\n    if (\r\n      refProd.referencedRule.name === this.nextProductionName &&\r\n      refProd.idx === this.nextProductionOccurrence\r\n    ) {\r\n      const fullRest = currRest.concat(prevRest)\r\n      this.updateExpectedNext()\r\n      this.walk(refProd.referencedRule, <any>fullRest)\r\n    }\r\n  }\r\n\r\n  updateExpectedNext(): void {\r\n    // need to consume the Terminal\r\n    if (isEmpty(this.ruleStack)) {\r\n      // must reset nextProductionXXX to avoid walking down another Top Level production while what we are\r\n      // really seeking is the last Terminal...\r\n      this.nextProductionName = \"\"\r\n      this.nextProductionOccurrence = 0\r\n      this.isAtEndOfPath = true\r\n    } else {\r\n      this.nextProductionName = this.ruleStack.pop()!\r\n      this.nextProductionOccurrence = this.occurrenceStack.pop()!\r\n    }\r\n  }\r\n}\r\n\r\nexport class NextAfterTokenWalker extends AbstractNextPossibleTokensWalker {\r\n  private nextTerminalName = \"\"\r\n  private nextTerminalOccurrence = 0\r\n\r\n  constructor(topProd: Rule, protected path: ITokenGrammarPath) {\r\n    super(topProd, path)\r\n    this.nextTerminalName = this.path.lastTok.name\r\n    this.nextTerminalOccurrence = this.path.lastTokOccurrence\r\n  }\r\n\r\n  walkTerminal(\r\n    terminal: Terminal,\r\n    currRest: IProduction[],\r\n    prevRest: IProduction[]\r\n  ): void {\r\n    if (\r\n      this.isAtEndOfPath &&\r\n      terminal.terminalType.name === this.nextTerminalName &&\r\n      terminal.idx === this.nextTerminalOccurrence &&\r\n      !this.found\r\n    ) {\r\n      const fullRest = currRest.concat(prevRest)\r\n      const restProd = new Alternative({ definition: fullRest })\r\n      this.possibleTokTypes = first(restProd)\r\n      this.found = true\r\n    }\r\n  }\r\n}\r\n\r\nexport type AlternativesFirstTokens = TokenType[][]\r\n\r\nexport interface IFirstAfterRepetition {\r\n  token: TokenType | undefined\r\n  occurrence: number | undefined\r\n  isEndOfRule: boolean | undefined\r\n}\r\n\r\n/**\r\n * This walker only \"walks\" a single \"TOP\" level in the Grammar Ast, this means\r\n * it never \"follows\" production refs\r\n */\r\nexport class AbstractNextTerminalAfterProductionWalker extends RestWalker {\r\n  protected result: IFirstAfterRepetition = {\r\n    token: undefined,\r\n    occurrence: undefined,\r\n    isEndOfRule: undefined\r\n  }\r\n\r\n  constructor(protected topRule: Rule, protected occurrence: number) {\r\n    super()\r\n  }\r\n\r\n  startWalking(): IFirstAfterRepetition {\r\n    this.walk(this.topRule)\r\n    return this.result\r\n  }\r\n}\r\n\r\nexport class NextTerminalAfterManyWalker extends AbstractNextTerminalAfterProductionWalker {\r\n  walkMany(\r\n    manyProd: Repetition,\r\n    currRest: IProduction[],\r\n    prevRest: IProduction[]\r\n  ): void {\r\n    if (manyProd.idx === this.occurrence) {\r\n      const firstAfterMany = _first(currRest.concat(prevRest))\r\n      this.result.isEndOfRule = firstAfterMany === undefined\r\n      if (firstAfterMany instanceof Terminal) {\r\n        this.result.token = firstAfterMany.terminalType\r\n        this.result.occurrence = firstAfterMany.idx\r\n      }\r\n    } else {\r\n      super.walkMany(manyProd, currRest, prevRest)\r\n    }\r\n  }\r\n}\r\n\r\nexport class NextTerminalAfterManySepWalker extends AbstractNextTerminalAfterProductionWalker {\r\n  walkManySep(\r\n    manySepProd: RepetitionWithSeparator,\r\n    currRest: IProduction[],\r\n    prevRest: IProduction[]\r\n  ): void {\r\n    if (manySepProd.idx === this.occurrence) {\r\n      const firstAfterManySep = _first(currRest.concat(prevRest))\r\n      this.result.isEndOfRule = firstAfterManySep === undefined\r\n      if (firstAfterManySep instanceof Terminal) {\r\n        this.result.token = firstAfterManySep.terminalType\r\n        this.result.occurrence = firstAfterManySep.idx\r\n      }\r\n    } else {\r\n      super.walkManySep(manySepProd, currRest, prevRest)\r\n    }\r\n  }\r\n}\r\n\r\nexport class NextTerminalAfterAtLeastOneWalker extends AbstractNextTerminalAfterProductionWalker {\r\n  walkAtLeastOne(\r\n    atLeastOneProd: RepetitionMandatory,\r\n    currRest: IProduction[],\r\n    prevRest: IProduction[]\r\n  ): void {\r\n    if (atLeastOneProd.idx === this.occurrence) {\r\n      const firstAfterAtLeastOne = _first(currRest.concat(prevRest))\r\n      this.result.isEndOfRule = firstAfterAtLeastOne === undefined\r\n      if (firstAfterAtLeastOne instanceof Terminal) {\r\n        this.result.token = firstAfterAtLeastOne.terminalType\r\n        this.result.occurrence = firstAfterAtLeastOne.idx\r\n      }\r\n    } else {\r\n      super.walkAtLeastOne(atLeastOneProd, currRest, prevRest)\r\n    }\r\n  }\r\n}\r\n\r\n// TODO: reduce code duplication in the AfterWalkers\r\nexport class NextTerminalAfterAtLeastOneSepWalker extends AbstractNextTerminalAfterProductionWalker {\r\n  walkAtLeastOneSep(\r\n    atleastOneSepProd: RepetitionMandatoryWithSeparator,\r\n    currRest: IProduction[],\r\n    prevRest: IProduction[]\r\n  ): void {\r\n    if (atleastOneSepProd.idx === this.occurrence) {\r\n      const firstAfterfirstAfterAtLeastOneSep = _first(\r\n        currRest.concat(prevRest)\r\n      )\r\n      this.result.isEndOfRule = firstAfterfirstAfterAtLeastOneSep === undefined\r\n      if (firstAfterfirstAfterAtLeastOneSep instanceof Terminal) {\r\n        this.result.token = firstAfterfirstAfterAtLeastOneSep.terminalType\r\n        this.result.occurrence = firstAfterfirstAfterAtLeastOneSep.idx\r\n      }\r\n    } else {\r\n      super.walkAtLeastOneSep(atleastOneSepProd, currRest, prevRest)\r\n    }\r\n  }\r\n}\r\n\r\nexport interface PartialPathAndSuffixes {\r\n  partialPath: TokenType[]\r\n  suffixDef: IProduction[]\r\n}\r\n\r\nexport function possiblePathsFrom(\r\n  targetDef: IProduction[],\r\n  maxLength: number,\r\n  currPath: TokenType[] = []\r\n): PartialPathAndSuffixes[] {\r\n  // avoid side effects\r\n  currPath = clone(currPath)\r\n  let result: PartialPathAndSuffixes[] = []\r\n  let i = 0\r\n\r\n  // TODO: avoid inner funcs\r\n  function remainingPathWith(nextDef: IProduction[]) {\r\n    return nextDef.concat(drop(targetDef, i + 1))\r\n  }\r\n\r\n  // TODO: avoid inner funcs\r\n  function getAlternativesForProd(definition: IProduction[]) {\r\n    const alternatives = possiblePathsFrom(\r\n      remainingPathWith(definition),\r\n      maxLength,\r\n      currPath\r\n    )\r\n    return result.concat(alternatives)\r\n  }\r\n\r\n  /**\r\n   * Mandatory productions will halt the loop as the paths computed from their recursive calls will already contain the\r\n   * following (rest) of the targetDef.\r\n   *\r\n   * For optional productions (Option/Repetition/...) the loop will continue to represent the paths that do not include the\r\n   * the optional production.\r\n   */\r\n  while (currPath.length < maxLength && i < targetDef.length) {\r\n    const prod = targetDef[i]\r\n\r\n    /* istanbul ignore else */\r\n    if (prod instanceof Alternative) {\r\n      return getAlternativesForProd(prod.definition)\r\n    } else if (prod instanceof NonTerminal) {\r\n      return getAlternativesForProd(prod.definition)\r\n    } else if (prod instanceof Option) {\r\n      result = getAlternativesForProd(prod.definition)\r\n    } else if (prod instanceof RepetitionMandatory) {\r\n      const newDef = prod.definition.concat([\r\n        new Repetition({\r\n          definition: prod.definition\r\n        })\r\n      ])\r\n      return getAlternativesForProd(newDef)\r\n    } else if (prod instanceof RepetitionMandatoryWithSeparator) {\r\n      const newDef = [\r\n        new Alternative({ definition: prod.definition }),\r\n        new Repetition({\r\n          definition: [new Terminal({ terminalType: prod.separator })].concat(\r\n            <any>prod.definition\r\n          )\r\n        })\r\n      ]\r\n      return getAlternativesForProd(newDef)\r\n    } else if (prod instanceof RepetitionWithSeparator) {\r\n      const newDef = prod.definition.concat([\r\n        new Repetition({\r\n          definition: [new Terminal({ terminalType: prod.separator })].concat(\r\n            <any>prod.definition\r\n          )\r\n        })\r\n      ])\r\n      result = getAlternativesForProd(newDef)\r\n    } else if (prod instanceof Repetition) {\r\n      const newDef = prod.definition.concat([\r\n        new Repetition({\r\n          definition: prod.definition\r\n        })\r\n      ])\r\n      result = getAlternativesForProd(newDef)\r\n    } else if (prod instanceof Alternation) {\r\n      forEach(prod.definition, (currAlt) => {\r\n        // TODO: this is a limited check for empty alternatives\r\n        //   It would prevent a common case of infinite loops during parser initialization.\r\n        //   However **in-directly** empty alternatives may still cause issues.\r\n        if (isEmpty(currAlt.definition) === false) {\r\n          result = getAlternativesForProd(currAlt.definition)\r\n        }\r\n      })\r\n      return result\r\n    } else if (prod instanceof Terminal) {\r\n      currPath.push(prod.terminalType)\r\n    } else {\r\n      throw Error(\"non exhaustive match\")\r\n    }\r\n\r\n    i++\r\n  }\r\n  result.push({\r\n    partialPath: currPath,\r\n    suffixDef: drop(targetDef, i)\r\n  })\r\n\r\n  return result\r\n}\r\n\r\ninterface IPathToExamine {\r\n  idx: number\r\n  def: IProduction[]\r\n  ruleStack: string[]\r\n  occurrenceStack: number[]\r\n}\r\n\r\nexport function nextPossibleTokensAfter(\r\n  initialDef: IProduction[],\r\n  tokenVector: IToken[],\r\n  tokMatcher: TokenMatcher,\r\n  maxLookAhead: number\r\n): ISyntacticContentAssistPath[] {\r\n  const EXIT_NON_TERMINAL: any = \"EXIT_NONE_TERMINAL\"\r\n  // to avoid creating a new Array each time.\r\n  const EXIT_NON_TERMINAL_ARR = [EXIT_NON_TERMINAL]\r\n  const EXIT_ALTERNATIVE: any = \"EXIT_ALTERNATIVE\"\r\n  let foundCompletePath = false\r\n\r\n  const tokenVectorLength = tokenVector.length\r\n  const minimalAlternativesIndex = tokenVectorLength - maxLookAhead - 1\r\n\r\n  const result: ISyntacticContentAssistPath[] = []\r\n\r\n  const possiblePaths: IPathToExamine[] = []\r\n  possiblePaths.push({\r\n    idx: -1,\r\n    def: initialDef,\r\n    ruleStack: [],\r\n    occurrenceStack: []\r\n  })\r\n\r\n  while (!isEmpty(possiblePaths)) {\r\n    const currPath = possiblePaths.pop()!\r\n\r\n    // skip alternatives if no more results can be found (assuming deterministic grammar with fixed lookahead)\r\n    if (currPath === EXIT_ALTERNATIVE) {\r\n      if (\r\n        foundCompletePath &&\r\n        last(possiblePaths)!.idx <= minimalAlternativesIndex\r\n      ) {\r\n        // remove irrelevant alternative\r\n        possiblePaths.pop()\r\n      }\r\n      continue\r\n    }\r\n\r\n    const currDef = currPath.def\r\n    const currIdx = currPath.idx\r\n    const currRuleStack = currPath.ruleStack\r\n    const currOccurrenceStack = currPath.occurrenceStack\r\n\r\n    // For Example: an empty path could exist in a valid grammar in the case of an EMPTY_ALT\r\n    if (isEmpty(currDef)) {\r\n      continue\r\n    }\r\n\r\n    const prod = currDef[0]\r\n    /* istanbul ignore else */\r\n    if (prod === EXIT_NON_TERMINAL) {\r\n      const nextPath = {\r\n        idx: currIdx,\r\n        def: drop(currDef),\r\n        ruleStack: dropRight(currRuleStack),\r\n        occurrenceStack: dropRight(currOccurrenceStack)\r\n      }\r\n      possiblePaths.push(nextPath)\r\n    } else if (prod instanceof Terminal) {\r\n      /* istanbul ignore else */\r\n      if (currIdx < tokenVectorLength - 1) {\r\n        const nextIdx = currIdx + 1\r\n        const actualToken = tokenVector[nextIdx]\r\n        if (tokMatcher!(actualToken, prod.terminalType)) {\r\n          const nextPath = {\r\n            idx: nextIdx,\r\n            def: drop(currDef),\r\n            ruleStack: currRuleStack,\r\n            occurrenceStack: currOccurrenceStack\r\n          }\r\n          possiblePaths.push(nextPath)\r\n        }\r\n        // end of the line\r\n      } else if (currIdx === tokenVectorLength - 1) {\r\n        // IGNORE ABOVE ELSE\r\n        result.push({\r\n          nextTokenType: prod.terminalType,\r\n          nextTokenOccurrence: prod.idx,\r\n          ruleStack: currRuleStack,\r\n          occurrenceStack: currOccurrenceStack\r\n        })\r\n        foundCompletePath = true\r\n      } else {\r\n        throw Error(\"non exhaustive match\")\r\n      }\r\n    } else if (prod instanceof NonTerminal) {\r\n      const newRuleStack = clone(currRuleStack)\r\n      newRuleStack.push(prod.nonTerminalName)\r\n\r\n      const newOccurrenceStack = clone(currOccurrenceStack)\r\n      newOccurrenceStack.push(prod.idx)\r\n\r\n      const nextPath = {\r\n        idx: currIdx,\r\n        def: prod.definition.concat(EXIT_NON_TERMINAL_ARR, drop(currDef)),\r\n        ruleStack: newRuleStack,\r\n        occurrenceStack: newOccurrenceStack\r\n      }\r\n      possiblePaths.push(nextPath)\r\n    } else if (prod instanceof Option) {\r\n      // the order of alternatives is meaningful, FILO (Last path will be traversed first).\r\n      const nextPathWithout = {\r\n        idx: currIdx,\r\n        def: drop(currDef),\r\n        ruleStack: currRuleStack,\r\n        occurrenceStack: currOccurrenceStack\r\n      }\r\n      possiblePaths.push(nextPathWithout)\r\n      // required marker to avoid backtracking paths whose higher priority alternatives already matched\r\n      possiblePaths.push(EXIT_ALTERNATIVE)\r\n\r\n      const nextPathWith = {\r\n        idx: currIdx,\r\n        def: prod.definition.concat(drop(currDef)),\r\n        ruleStack: currRuleStack,\r\n        occurrenceStack: currOccurrenceStack\r\n      }\r\n      possiblePaths.push(nextPathWith)\r\n    } else if (prod instanceof RepetitionMandatory) {\r\n      // TODO:(THE NEW operators here take a while...) (convert once?)\r\n      const secondIteration = new Repetition({\r\n        definition: prod.definition,\r\n        idx: prod.idx\r\n      })\r\n      const nextDef = prod.definition.concat([secondIteration], drop(currDef))\r\n      const nextPath = {\r\n        idx: currIdx,\r\n        def: nextDef,\r\n        ruleStack: currRuleStack,\r\n        occurrenceStack: currOccurrenceStack\r\n      }\r\n      possiblePaths.push(nextPath)\r\n    } else if (prod instanceof RepetitionMandatoryWithSeparator) {\r\n      // TODO:(THE NEW operators here take a while...) (convert once?)\r\n      const separatorGast = new Terminal({\r\n        terminalType: prod.separator\r\n      })\r\n      const secondIteration = new Repetition({\r\n        definition: [<any>separatorGast].concat(prod.definition),\r\n        idx: prod.idx\r\n      })\r\n      const nextDef = prod.definition.concat([secondIteration], drop(currDef))\r\n      const nextPath = {\r\n        idx: currIdx,\r\n        def: nextDef,\r\n        ruleStack: currRuleStack,\r\n        occurrenceStack: currOccurrenceStack\r\n      }\r\n      possiblePaths.push(nextPath)\r\n    } else if (prod instanceof RepetitionWithSeparator) {\r\n      // the order of alternatives is meaningful, FILO (Last path will be traversed first).\r\n      const nextPathWithout = {\r\n        idx: currIdx,\r\n        def: drop(currDef),\r\n        ruleStack: currRuleStack,\r\n        occurrenceStack: currOccurrenceStack\r\n      }\r\n      possiblePaths.push(nextPathWithout)\r\n      // required marker to avoid backtracking paths whose higher priority alternatives already matched\r\n      possiblePaths.push(EXIT_ALTERNATIVE)\r\n\r\n      const separatorGast = new Terminal({\r\n        terminalType: prod.separator\r\n      })\r\n      const nthRepetition = new Repetition({\r\n        definition: [<any>separatorGast].concat(prod.definition),\r\n        idx: prod.idx\r\n      })\r\n      const nextDef = prod.definition.concat([nthRepetition], drop(currDef))\r\n      const nextPathWith = {\r\n        idx: currIdx,\r\n        def: nextDef,\r\n        ruleStack: currRuleStack,\r\n        occurrenceStack: currOccurrenceStack\r\n      }\r\n      possiblePaths.push(nextPathWith)\r\n    } else if (prod instanceof Repetition) {\r\n      // the order of alternatives is meaningful, FILO (Last path will be traversed first).\r\n      const nextPathWithout = {\r\n        idx: currIdx,\r\n        def: drop(currDef),\r\n        ruleStack: currRuleStack,\r\n        occurrenceStack: currOccurrenceStack\r\n      }\r\n      possiblePaths.push(nextPathWithout)\r\n      // required marker to avoid backtracking paths whose higher priority alternatives already matched\r\n      possiblePaths.push(EXIT_ALTERNATIVE)\r\n\r\n      // TODO: an empty repetition will cause infinite loops here, will the parser detect this in selfAnalysis?\r\n      const nthRepetition = new Repetition({\r\n        definition: prod.definition,\r\n        idx: prod.idx\r\n      })\r\n      const nextDef = prod.definition.concat([nthRepetition], drop(currDef))\r\n      const nextPathWith = {\r\n        idx: currIdx,\r\n        def: nextDef,\r\n        ruleStack: currRuleStack,\r\n        occurrenceStack: currOccurrenceStack\r\n      }\r\n      possiblePaths.push(nextPathWith)\r\n    } else if (prod instanceof Alternation) {\r\n      // the order of alternatives is meaningful, FILO (Last path will be traversed first).\r\n      for (let i = prod.definition.length - 1; i >= 0; i--) {\r\n        const currAlt: any = prod.definition[i]\r\n        const currAltPath = {\r\n          idx: currIdx,\r\n          def: currAlt.definition.concat(drop(currDef)),\r\n          ruleStack: currRuleStack,\r\n          occurrenceStack: currOccurrenceStack\r\n        }\r\n        possiblePaths.push(currAltPath)\r\n        possiblePaths.push(EXIT_ALTERNATIVE)\r\n      }\r\n    } else if (prod instanceof Alternative) {\r\n      possiblePaths.push({\r\n        idx: currIdx,\r\n        def: prod.definition.concat(drop(currDef)),\r\n        ruleStack: currRuleStack,\r\n        occurrenceStack: currOccurrenceStack\r\n      })\r\n    } else if (prod instanceof Rule) {\r\n      // last because we should only encounter at most a single one of these per invocation.\r\n      possiblePaths.push(\r\n        expandTopLevelRule(prod, currIdx, currRuleStack, currOccurrenceStack)\r\n      )\r\n    } else {\r\n      throw Error(\"non exhaustive match\")\r\n    }\r\n  }\r\n  return result\r\n}\r\n\r\nfunction expandTopLevelRule(\r\n  topRule: Rule,\r\n  currIdx: number,\r\n  currRuleStack: string[],\r\n  currOccurrenceStack: number[]\r\n): IPathToExamine {\r\n  const newRuleStack = clone(currRuleStack)\r\n  newRuleStack.push(topRule.name)\r\n\r\n  const newCurrOccurrenceStack = clone(currOccurrenceStack)\r\n  // top rule is always assumed to have been called with occurrence index 1\r\n  newCurrOccurrenceStack.push(1)\r\n\r\n  return {\r\n    idx: currIdx,\r\n    def: topRule.definition,\r\n    ruleStack: newRuleStack,\r\n    occurrenceStack: newCurrOccurrenceStack\r\n  }\r\n}\r\n", "import isEmpty from \"lodash/isEmpty\"\r\nimport flatten from \"lodash/flatten\"\r\nimport every from \"lodash/every\"\r\nimport map from \"lodash/map\"\r\nimport forEach from \"lodash/forEach\"\r\nimport has from \"lodash/has\"\r\nimport reduce from \"lodash/reduce\"\r\nimport { possiblePathsFrom } from \"./interpreter\"\r\nimport { RestWalker } from \"./rest\"\r\nimport { Predicate, TokenMatcher } from \"../parser/parser\"\r\nimport {\r\n  tokenStructuredMatcher,\r\n  tokenStructuredMatcherNoCategories\r\n} from \"../../scan/tokens\"\r\nimport {\r\n  Alternation,\r\n  Alternative as AlternativeGAST,\r\n  Option,\r\n  Repetition,\r\n  RepetitionMandatory,\r\n  RepetitionMandatoryWithSeparator,\r\n  RepetitionWithSeparator\r\n} from \"@chevrotain/gast\"\r\nimport { GAstVisitor } from \"@chevrotain/gast\"\r\nimport {\r\n  IOrAlt,\r\n  IProduction,\r\n  IProductionWithOccurrence,\r\n  LookaheadSequence,\r\n  LookaheadProductionType,\r\n  Rule,\r\n  TokenType,\r\n  BaseParser\r\n} from \"@chevrotain/types\"\r\n\r\nexport enum PROD_TYPE {\r\n  OPTION,\r\n  REPETITION,\r\n  REPETITION_MANDATORY,\r\n  REPETITION_MANDATORY_WITH_SEPARATOR,\r\n  REPETITION_WITH_SEPARATOR,\r\n  ALTERNATION\r\n}\r\n\r\nexport function getProdType(\r\n  prod: IProduction | LookaheadProductionType\r\n): PROD_TYPE {\r\n  /* istanbul ignore else */\r\n  if (prod instanceof Option || prod === \"Option\") {\r\n    return PROD_TYPE.OPTION\r\n  } else if (prod instanceof Repetition || prod === \"Repetition\") {\r\n    return PROD_TYPE.REPETITION\r\n  } else if (\r\n    prod instanceof RepetitionMandatory ||\r\n    prod === \"RepetitionMandatory\"\r\n  ) {\r\n    return PROD_TYPE.REPETITION_MANDATORY\r\n  } else if (\r\n    prod instanceof RepetitionMandatoryWithSeparator ||\r\n    prod === \"RepetitionMandatoryWithSeparator\"\r\n  ) {\r\n    return PROD_TYPE.REPETITION_MANDATORY_WITH_SEPARATOR\r\n  } else if (\r\n    prod instanceof RepetitionWithSeparator ||\r\n    prod === \"RepetitionWithSeparator\"\r\n  ) {\r\n    return PROD_TYPE.REPETITION_WITH_SEPARATOR\r\n  } else if (prod instanceof Alternation || prod === \"Alternation\") {\r\n    return PROD_TYPE.ALTERNATION\r\n  } else {\r\n    throw Error(\"non exhaustive match\")\r\n  }\r\n}\r\n\r\nexport function getLookaheadPaths(options: {\r\n  occurrence: number\r\n  rule: Rule\r\n  prodType: LookaheadProductionType\r\n  maxLookahead: number\r\n}): LookaheadSequence[] {\r\n  const { occurrence, rule, prodType, maxLookahead } = options\r\n  const type = getProdType(prodType)\r\n  if (type === PROD_TYPE.ALTERNATION) {\r\n    return getLookaheadPathsForOr(occurrence, rule, maxLookahead)\r\n  } else {\r\n    return getLookaheadPathsForOptionalProd(\r\n      occurrence,\r\n      rule,\r\n      type,\r\n      maxLookahead\r\n    )\r\n  }\r\n}\r\n\r\nexport function buildLookaheadFuncForOr(\r\n  occurrence: number,\r\n  ruleGrammar: Rule,\r\n  maxLookahead: number,\r\n  hasPredicates: boolean,\r\n  dynamicTokensEnabled: boolean,\r\n  laFuncBuilder: Function\r\n): (orAlts?: IOrAlt<any>[]) => number | undefined {\r\n  const lookAheadPaths = getLookaheadPathsForOr(\r\n    occurrence,\r\n    ruleGrammar,\r\n    maxLookahead\r\n  )\r\n\r\n  const tokenMatcher = areTokenCategoriesNotUsed(lookAheadPaths)\r\n    ? tokenStructuredMatcherNoCategories\r\n    : tokenStructuredMatcher\r\n\r\n  return laFuncBuilder(\r\n    lookAheadPaths,\r\n    hasPredicates,\r\n    tokenMatcher,\r\n    dynamicTokensEnabled\r\n  )\r\n}\r\n\r\n/**\r\n *  When dealing with an Optional production (OPTION/MANY/2nd iteration of AT_LEAST_ONE/...) we need to compare\r\n *  the lookahead \"inside\" the production and the lookahead immediately \"after\" it in the same top level rule (context free).\r\n *\r\n *  Example: given a production:\r\n *  ABC(DE)?DF\r\n *\r\n *  The optional '(DE)?' should only be entered if we see 'DE'. a single Token 'D' is not sufficient to distinguish between the two\r\n *  alternatives.\r\n *\r\n *  @returns A Lookahead function which will return true IFF the parser should parse the Optional production.\r\n */\r\nexport function buildLookaheadFuncForOptionalProd(\r\n  occurrence: number,\r\n  ruleGrammar: Rule,\r\n  k: number,\r\n  dynamicTokensEnabled: boolean,\r\n  prodType: PROD_TYPE,\r\n  lookaheadBuilder: (\r\n    lookAheadSequence: LookaheadSequence,\r\n    tokenMatcher: TokenMatcher,\r\n    dynamicTokensEnabled: boolean\r\n  ) => () => boolean\r\n): () => boolean {\r\n  const lookAheadPaths = getLookaheadPathsForOptionalProd(\r\n    occurrence,\r\n    ruleGrammar,\r\n    prodType,\r\n    k\r\n  )\r\n\r\n  const tokenMatcher = areTokenCategoriesNotUsed(lookAheadPaths)\r\n    ? tokenStructuredMatcherNoCategories\r\n    : tokenStructuredMatcher\r\n\r\n  return lookaheadBuilder(lookAheadPaths[0], tokenMatcher, dynamicTokensEnabled)\r\n}\r\n\r\nexport type Alternative = TokenType[][]\r\n\r\nexport function buildAlternativesLookAheadFunc(\r\n  alts: LookaheadSequence[],\r\n  hasPredicates: boolean,\r\n  tokenMatcher: TokenMatcher,\r\n  dynamicTokensEnabled: boolean\r\n): (orAlts: IOrAlt<any>[]) => number | undefined {\r\n  const numOfAlts = alts.length\r\n  const areAllOneTokenLookahead = every(alts, (currAlt) => {\r\n    return every(currAlt, (currPath) => {\r\n      return currPath.length === 1\r\n    })\r\n  })\r\n\r\n  // This version takes into account the predicates as well.\r\n  if (hasPredicates) {\r\n    /**\r\n     * @returns {number} - The chosen alternative index\r\n     */\r\n    return function (\r\n      this: BaseParser,\r\n      orAlts: IOrAlt<any>[]\r\n    ): number | undefined {\r\n      // unfortunately the predicates must be extracted every single time\r\n      // as they cannot be cached due to references to parameters(vars) which are no longer valid.\r\n      // note that in the common case of no predicates, no cpu time will be wasted on this (see else block)\r\n      const predicates: (Predicate | undefined)[] = map(\r\n        orAlts,\r\n        (currAlt) => currAlt.GATE\r\n      )\r\n\r\n      for (let t = 0; t < numOfAlts; t++) {\r\n        const currAlt = alts[t]\r\n        const currNumOfPaths = currAlt.length\r\n\r\n        const currPredicate = predicates[t]\r\n        if (currPredicate !== undefined && currPredicate.call(this) === false) {\r\n          // if the predicate does not match there is no point in checking the paths\r\n          continue\r\n        }\r\n        nextPath: for (let j = 0; j < currNumOfPaths; j++) {\r\n          const currPath = currAlt[j]\r\n          const currPathLength = currPath.length\r\n          for (let i = 0; i < currPathLength; i++) {\r\n            const nextToken = this.LA(i + 1)\r\n            if (tokenMatcher(nextToken, currPath[i]) === false) {\r\n              // mismatch in current path\r\n              // try the next pth\r\n              continue nextPath\r\n            }\r\n          }\r\n          // found a full path that matches.\r\n          // this will also work for an empty ALT as the loop will be skipped\r\n          return t\r\n        }\r\n        // none of the paths for the current alternative matched\r\n        // try the next alternative\r\n      }\r\n      // none of the alternatives could be matched\r\n      return undefined\r\n    }\r\n  } else if (areAllOneTokenLookahead && !dynamicTokensEnabled) {\r\n    // optimized (common) case of all the lookaheads paths requiring only\r\n    // a single token lookahead. These Optimizations cannot work if dynamically defined Tokens are used.\r\n    const singleTokenAlts = map(alts, (currAlt) => {\r\n      return flatten(currAlt)\r\n    })\r\n\r\n    const choiceToAlt = reduce(\r\n      singleTokenAlts,\r\n      (result, currAlt, idx) => {\r\n        forEach(currAlt, (currTokType) => {\r\n          if (!has(result, currTokType.tokenTypeIdx!)) {\r\n            result[currTokType.tokenTypeIdx!] = idx\r\n          }\r\n          forEach(currTokType.categoryMatches!, (currExtendingType) => {\r\n            if (!has(result, currExtendingType)) {\r\n              result[currExtendingType] = idx\r\n            }\r\n          })\r\n        })\r\n        return result\r\n      },\r\n      {} as Record<number, number>\r\n    )\r\n\r\n    /**\r\n     * @returns {number} - The chosen alternative index\r\n     */\r\n    return function (this: BaseParser): number {\r\n      const nextToken = this.LA(1)\r\n      return choiceToAlt[nextToken.tokenTypeIdx]\r\n    }\r\n  } else {\r\n    // optimized lookahead without needing to check the predicates at all.\r\n    // this causes code duplication which is intentional to improve performance.\r\n    /**\r\n     * @returns {number} - The chosen alternative index\r\n     */\r\n    return function (this: BaseParser): number | undefined {\r\n      for (let t = 0; t < numOfAlts; t++) {\r\n        const currAlt = alts[t]\r\n        const currNumOfPaths = currAlt.length\r\n        nextPath: for (let j = 0; j < currNumOfPaths; j++) {\r\n          const currPath = currAlt[j]\r\n          const currPathLength = currPath.length\r\n          for (let i = 0; i < currPathLength; i++) {\r\n            const nextToken = this.LA(i + 1)\r\n            if (tokenMatcher(nextToken, currPath[i]) === false) {\r\n              // mismatch in current path\r\n              // try the next pth\r\n              continue nextPath\r\n            }\r\n          }\r\n          // found a full path that matches.\r\n          // this will also work for an empty ALT as the loop will be skipped\r\n          return t\r\n        }\r\n        // none of the paths for the current alternative matched\r\n        // try the next alternative\r\n      }\r\n      // none of the alternatives could be matched\r\n      return undefined\r\n    }\r\n  }\r\n}\r\n\r\nexport function buildSingleAlternativeLookaheadFunction(\r\n  alt: LookaheadSequence,\r\n  tokenMatcher: TokenMatcher,\r\n  dynamicTokensEnabled: boolean\r\n): () => boolean {\r\n  const areAllOneTokenLookahead = every(alt, (currPath) => {\r\n    return currPath.length === 1\r\n  })\r\n\r\n  const numOfPaths = alt.length\r\n\r\n  // optimized (common) case of all the lookaheads paths requiring only\r\n  // a single token lookahead.\r\n  if (areAllOneTokenLookahead && !dynamicTokensEnabled) {\r\n    const singleTokensTypes = flatten(alt)\r\n\r\n    if (\r\n      singleTokensTypes.length === 1 &&\r\n      isEmpty((<any>singleTokensTypes[0]).categoryMatches)\r\n    ) {\r\n      const expectedTokenType = singleTokensTypes[0]\r\n      const expectedTokenUniqueKey = (<any>expectedTokenType).tokenTypeIdx\r\n\r\n      return function (this: BaseParser): boolean {\r\n        return this.LA(1).tokenTypeIdx === expectedTokenUniqueKey\r\n      }\r\n    } else {\r\n      const choiceToAlt = reduce(\r\n        singleTokensTypes,\r\n        (result, currTokType, idx) => {\r\n          result[currTokType.tokenTypeIdx!] = true\r\n          forEach(currTokType.categoryMatches!, (currExtendingType) => {\r\n            result[currExtendingType] = true\r\n          })\r\n          return result\r\n        },\r\n        [] as boolean[]\r\n      )\r\n\r\n      return function (this: BaseParser): boolean {\r\n        const nextToken = this.LA(1)\r\n        return choiceToAlt[nextToken.tokenTypeIdx] === true\r\n      }\r\n    }\r\n  } else {\r\n    return function (this: BaseParser): boolean {\r\n      nextPath: for (let j = 0; j < numOfPaths; j++) {\r\n        const currPath = alt[j]\r\n        const currPathLength = currPath.length\r\n        for (let i = 0; i < currPathLength; i++) {\r\n          const nextToken = this.LA(i + 1)\r\n          if (tokenMatcher(nextToken, currPath[i]) === false) {\r\n            // mismatch in current path\r\n            // try the next pth\r\n            continue nextPath\r\n          }\r\n        }\r\n        // found a full path that matches.\r\n        return true\r\n      }\r\n\r\n      // none of the paths matched\r\n      return false\r\n    }\r\n  }\r\n}\r\n\r\nclass RestDefinitionFinderWalker extends RestWalker {\r\n  private restDef: IProduction[]\r\n\r\n  constructor(\r\n    private topProd: Rule,\r\n    private targetOccurrence: number,\r\n    private targetProdType: PROD_TYPE\r\n  ) {\r\n    super()\r\n  }\r\n\r\n  startWalking(): IProduction[] {\r\n    this.walk(this.topProd)\r\n    return this.restDef\r\n  }\r\n\r\n  private checkIsTarget(\r\n    node: IProductionWithOccurrence,\r\n    expectedProdType: PROD_TYPE,\r\n    currRest: IProduction[],\r\n    prevRest: IProduction[]\r\n  ): boolean {\r\n    if (\r\n      node.idx === this.targetOccurrence &&\r\n      this.targetProdType === expectedProdType\r\n    ) {\r\n      this.restDef = currRest.concat(prevRest)\r\n      return true\r\n    }\r\n    // performance optimization, do not iterate over the entire Grammar ast after we have found the target\r\n    return false\r\n  }\r\n\r\n  walkOption(\r\n    optionProd: Option,\r\n    currRest: IProduction[],\r\n    prevRest: IProduction[]\r\n  ): void {\r\n    if (!this.checkIsTarget(optionProd, PROD_TYPE.OPTION, currRest, prevRest)) {\r\n      super.walkOption(optionProd, currRest, prevRest)\r\n    }\r\n  }\r\n\r\n  walkAtLeastOne(\r\n    atLeastOneProd: RepetitionMandatory,\r\n    currRest: IProduction[],\r\n    prevRest: IProduction[]\r\n  ): void {\r\n    if (\r\n      !this.checkIsTarget(\r\n        atLeastOneProd,\r\n        PROD_TYPE.REPETITION_MANDATORY,\r\n        currRest,\r\n        prevRest\r\n      )\r\n    ) {\r\n      super.walkOption(atLeastOneProd, currRest, prevRest)\r\n    }\r\n  }\r\n\r\n  walkAtLeastOneSep(\r\n    atLeastOneSepProd: RepetitionMandatoryWithSeparator,\r\n    currRest: IProduction[],\r\n    prevRest: IProduction[]\r\n  ): void {\r\n    if (\r\n      !this.checkIsTarget(\r\n        atLeastOneSepProd,\r\n        PROD_TYPE.REPETITION_MANDATORY_WITH_SEPARATOR,\r\n        currRest,\r\n        prevRest\r\n      )\r\n    ) {\r\n      super.walkOption(atLeastOneSepProd, currRest, prevRest)\r\n    }\r\n  }\r\n\r\n  walkMany(\r\n    manyProd: Repetition,\r\n    currRest: IProduction[],\r\n    prevRest: IProduction[]\r\n  ): void {\r\n    if (\r\n      !this.checkIsTarget(manyProd, PROD_TYPE.REPETITION, currRest, prevRest)\r\n    ) {\r\n      super.walkOption(manyProd, currRest, prevRest)\r\n    }\r\n  }\r\n\r\n  walkManySep(\r\n    manySepProd: RepetitionWithSeparator,\r\n    currRest: IProduction[],\r\n    prevRest: IProduction[]\r\n  ): void {\r\n    if (\r\n      !this.checkIsTarget(\r\n        manySepProd,\r\n        PROD_TYPE.REPETITION_WITH_SEPARATOR,\r\n        currRest,\r\n        prevRest\r\n      )\r\n    ) {\r\n      super.walkOption(manySepProd, currRest, prevRest)\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Returns the definition of a target production in a top level level rule.\r\n */\r\nclass InsideDefinitionFinderVisitor extends GAstVisitor {\r\n  public result: IProduction[] = []\r\n\r\n  constructor(\r\n    private targetOccurrence: number,\r\n    private targetProdType: PROD_TYPE,\r\n    private targetRef?: any\r\n  ) {\r\n    super()\r\n  }\r\n\r\n  private checkIsTarget(\r\n    node: { definition: IProduction[] } & IProductionWithOccurrence,\r\n    expectedProdName: PROD_TYPE\r\n  ): void {\r\n    if (\r\n      node.idx === this.targetOccurrence &&\r\n      this.targetProdType === expectedProdName &&\r\n      (this.targetRef === undefined || node === this.targetRef)\r\n    ) {\r\n      this.result = node.definition\r\n    }\r\n  }\r\n\r\n  public visitOption(node: Option): void {\r\n    this.checkIsTarget(node, PROD_TYPE.OPTION)\r\n  }\r\n\r\n  public visitRepetition(node: Repetition): void {\r\n    this.checkIsTarget(node, PROD_TYPE.REPETITION)\r\n  }\r\n\r\n  public visitRepetitionMandatory(node: RepetitionMandatory): void {\r\n    this.checkIsTarget(node, PROD_TYPE.REPETITION_MANDATORY)\r\n  }\r\n\r\n  public visitRepetitionMandatoryWithSeparator(\r\n    node: RepetitionMandatoryWithSeparator\r\n  ): void {\r\n    this.checkIsTarget(node, PROD_TYPE.REPETITION_MANDATORY_WITH_SEPARATOR)\r\n  }\r\n\r\n  public visitRepetitionWithSeparator(node: RepetitionWithSeparator): void {\r\n    this.checkIsTarget(node, PROD_TYPE.REPETITION_WITH_SEPARATOR)\r\n  }\r\n\r\n  public visitAlternation(node: Alternation): void {\r\n    this.checkIsTarget(node, PROD_TYPE.ALTERNATION)\r\n  }\r\n}\r\n\r\nfunction initializeArrayOfArrays(size: number): any[][] {\r\n  const result = new Array(size)\r\n  for (let i = 0; i < size; i++) {\r\n    result[i] = []\r\n  }\r\n  return result\r\n}\r\n\r\n/**\r\n * A sort of hash function between a Path in the grammar and a string.\r\n * Note that this returns multiple \"hashes\" to support the scenario of token categories.\r\n * -  A single path with categories may match multiple **actual** paths.\r\n */\r\nfunction pathToHashKeys(path: TokenType[]): string[] {\r\n  let keys = [\"\"]\r\n  for (let i = 0; i < path.length; i++) {\r\n    const tokType = path[i]\r\n    const longerKeys = []\r\n    for (let j = 0; j < keys.length; j++) {\r\n      const currShorterKey = keys[j]\r\n      longerKeys.push(currShorterKey + \"_\" + tokType.tokenTypeIdx)\r\n      for (let t = 0; t < tokType.categoryMatches!.length; t++) {\r\n        const categoriesKeySuffix = \"_\" + tokType.categoryMatches![t]\r\n        longerKeys.push(currShorterKey + categoriesKeySuffix)\r\n      }\r\n    }\r\n    keys = longerKeys\r\n  }\r\n  return keys\r\n}\r\n\r\n/**\r\n * Imperative style due to being called from a hot spot\r\n */\r\nfunction isUniquePrefixHash(\r\n  altKnownPathsKeys: Record<string, boolean>[],\r\n  searchPathKeys: string[],\r\n  idx: number\r\n): boolean {\r\n  for (\r\n    let currAltIdx = 0;\r\n    currAltIdx < altKnownPathsKeys.length;\r\n    currAltIdx++\r\n  ) {\r\n    // We only want to test vs the other alternatives\r\n    if (currAltIdx === idx) {\r\n      continue\r\n    }\r\n    const otherAltKnownPathsKeys = altKnownPathsKeys[currAltIdx]\r\n    for (let searchIdx = 0; searchIdx < searchPathKeys.length; searchIdx++) {\r\n      const searchKey = searchPathKeys[searchIdx]\r\n      if (otherAltKnownPathsKeys[searchKey] === true) {\r\n        return false\r\n      }\r\n    }\r\n  }\r\n  // None of the SearchPathKeys were found in any of the other alternatives\r\n  return true\r\n}\r\n\r\nexport function lookAheadSequenceFromAlternatives(\r\n  altsDefs: IProduction[],\r\n  k: number\r\n): LookaheadSequence[] {\r\n  const partialAlts = map(altsDefs, (currAlt) =>\r\n    possiblePathsFrom([currAlt], 1)\r\n  )\r\n  const finalResult = initializeArrayOfArrays(partialAlts.length)\r\n  const altsHashes = map(partialAlts, (currAltPaths) => {\r\n    const dict: { [key: string]: boolean } = {}\r\n    forEach(currAltPaths, (item) => {\r\n      const keys = pathToHashKeys(item.partialPath)\r\n      forEach(keys, (currKey) => {\r\n        dict[currKey] = true\r\n      })\r\n    })\r\n    return dict\r\n  })\r\n  let newData = partialAlts\r\n\r\n  // maxLookahead loop\r\n  for (let pathLength = 1; pathLength <= k; pathLength++) {\r\n    const currDataset = newData\r\n    newData = initializeArrayOfArrays(currDataset.length)\r\n\r\n    // alternatives loop\r\n    for (let altIdx = 0; altIdx < currDataset.length; altIdx++) {\r\n      const currAltPathsAndSuffixes = currDataset[altIdx]\r\n      // paths in current alternative loop\r\n      for (\r\n        let currPathIdx = 0;\r\n        currPathIdx < currAltPathsAndSuffixes.length;\r\n        currPathIdx++\r\n      ) {\r\n        const currPathPrefix = currAltPathsAndSuffixes[currPathIdx].partialPath\r\n        const suffixDef = currAltPathsAndSuffixes[currPathIdx].suffixDef\r\n        const prefixKeys = pathToHashKeys(currPathPrefix)\r\n        const isUnique = isUniquePrefixHash(altsHashes, prefixKeys, altIdx)\r\n        // End of the line for this path.\r\n        if (isUnique || isEmpty(suffixDef) || currPathPrefix.length === k) {\r\n          const currAltResult = finalResult[altIdx]\r\n          // TODO: Can we implement a containsPath using Maps/Dictionaries?\r\n          if (containsPath(currAltResult, currPathPrefix) === false) {\r\n            currAltResult.push(currPathPrefix)\r\n            // Update all new  keys for the current path.\r\n            for (let j = 0; j < prefixKeys.length; j++) {\r\n              const currKey = prefixKeys[j]\r\n              altsHashes[altIdx][currKey] = true\r\n            }\r\n          }\r\n        }\r\n        // Expand longer paths\r\n        else {\r\n          const newPartialPathsAndSuffixes = possiblePathsFrom(\r\n            suffixDef,\r\n            pathLength + 1,\r\n            currPathPrefix\r\n          )\r\n          newData[altIdx] = newData[altIdx].concat(newPartialPathsAndSuffixes)\r\n\r\n          // Update keys for new known paths\r\n          forEach(newPartialPathsAndSuffixes, (item) => {\r\n            const prefixKeys = pathToHashKeys(item.partialPath)\r\n            forEach(prefixKeys, (key) => {\r\n              altsHashes[altIdx][key] = true\r\n            })\r\n          })\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  return finalResult\r\n}\r\n\r\nexport function getLookaheadPathsForOr(\r\n  occurrence: number,\r\n  ruleGrammar: Rule,\r\n  k: number,\r\n  orProd?: Alternation\r\n): LookaheadSequence[] {\r\n  const visitor = new InsideDefinitionFinderVisitor(\r\n    occurrence,\r\n    PROD_TYPE.ALTERNATION,\r\n    orProd\r\n  )\r\n  ruleGrammar.accept(visitor)\r\n  return lookAheadSequenceFromAlternatives(visitor.result, k)\r\n}\r\n\r\nexport function getLookaheadPathsForOptionalProd(\r\n  occurrence: number,\r\n  ruleGrammar: Rule,\r\n  prodType: PROD_TYPE,\r\n  k: number\r\n): LookaheadSequence[] {\r\n  const insideDefVisitor = new InsideDefinitionFinderVisitor(\r\n    occurrence,\r\n    prodType\r\n  )\r\n  ruleGrammar.accept(insideDefVisitor)\r\n  const insideDef = insideDefVisitor.result\r\n\r\n  const afterDefWalker = new RestDefinitionFinderWalker(\r\n    ruleGrammar,\r\n    occurrence,\r\n    prodType\r\n  )\r\n  const afterDef = afterDefWalker.startWalking()\r\n\r\n  const insideFlat = new AlternativeGAST({ definition: insideDef })\r\n  const afterFlat = new AlternativeGAST({ definition: afterDef })\r\n\r\n  return lookAheadSequenceFromAlternatives([insideFlat, afterFlat], k)\r\n}\r\n\r\nexport function containsPath(\r\n  alternative: Alternative,\r\n  searchPath: TokenType[]\r\n): boolean {\r\n  compareOtherPath: for (let i = 0; i < alternative.length; i++) {\r\n    const otherPath = alternative[i]\r\n    if (otherPath.length !== searchPath.length) {\r\n      continue\r\n    }\r\n    for (let j = 0; j < otherPath.length; j++) {\r\n      const searchTok = searchPath[j]\r\n      const otherTok = otherPath[j]\r\n\r\n      const matchingTokens =\r\n        searchTok === otherTok ||\r\n        otherTok.categoryMatchesMap![searchTok.tokenTypeIdx!] !== undefined\r\n      if (matchingTokens === false) {\r\n        continue compareOtherPath\r\n      }\r\n    }\r\n    return true\r\n  }\r\n\r\n  return false\r\n}\r\n\r\nexport function isStrictPrefixOfPath(\r\n  prefix: TokenType[],\r\n  other: TokenType[]\r\n): boolean {\r\n  return (\r\n    prefix.length < other.length &&\r\n    every(prefix, (tokType, idx) => {\r\n      const otherTokType = other[idx]\r\n      return (\r\n        tokType === otherTokType ||\r\n        otherTokType.categoryMatchesMap![tokType.tokenTypeIdx!]\r\n      )\r\n    })\r\n  )\r\n}\r\n\r\nexport function areTokenCategoriesNotUsed(\r\n  lookAheadPaths: LookaheadSequence[]\r\n): boolean {\r\n  return every(lookAheadPaths, (singleAltPaths) =>\r\n    every(singleAltPaths, (singlePath) =>\r\n      every(singlePath, (token) => isEmpty(token.categoryMatches!))\r\n    )\r\n  )\r\n}\r\n", "import first from \"lodash/first\"\r\nimport isEmpty from \"lodash/isEmpty\"\r\nimport drop from \"lodash/drop\"\r\nimport flatten from \"lodash/flatten\"\r\nimport filter from \"lodash/filter\"\r\nimport reject from \"lodash/reject\"\r\nimport difference from \"lodash/difference\"\r\nimport map from \"lodash/map\"\r\nimport forEach from \"lodash/forEach\"\r\nimport groupBy from \"lodash/groupBy\"\r\nimport reduce from \"lodash/reduce\"\r\nimport pickBy from \"lodash/pickBy\"\r\nimport values from \"lodash/values\"\r\nimport includes from \"lodash/includes\"\r\nimport flatMap from \"lodash/flatMap\"\r\nimport clone from \"lodash/clone\"\r\nimport {\r\n  IParserAmbiguousAlternativesDefinitionError,\r\n  IParserDuplicatesDefinitionError,\r\n  IParserEmptyAlternativeDefinitionError,\r\n  ParserDefinitionErrorType\r\n} from \"../parser/parser\"\r\nimport { getProductionDslName, isOptionalProd } from \"@chevrotain/gast\"\r\nimport {\r\n  Alternative,\r\n  containsPath,\r\n  getLookaheadPathsForOptionalProd,\r\n  getLookaheadPathsForOr,\r\n  getProdType,\r\n  isStrictPrefixOfPath\r\n} from \"./lookahead\"\r\nimport { nextPossibleTokensAfter } from \"./interpreter\"\r\nimport {\r\n  Alternation,\r\n  Alternative as AlternativeGAST,\r\n  NonTerminal,\r\n  Option,\r\n  Repetition,\r\n  RepetitionMandatory,\r\n  RepetitionMandatoryWithSeparator,\r\n  RepetitionWithSeparator,\r\n  Terminal\r\n} from \"@chevrotain/gast\"\r\nimport { GAstVisitor } from \"@chevrotain/gast\"\r\nimport {\r\n  ILookaheadStrategy,\r\n  IProduction,\r\n  IProductionWithOccurrence,\r\n  TokenType,\r\n  Rule\r\n} from \"@chevrotain/types\"\r\nimport {\r\n  IGrammarValidatorErrorMessageProvider,\r\n  IParserDefinitionError\r\n} from \"./types\"\r\nimport dropRight from \"lodash/dropRight\"\r\nimport compact from \"lodash/compact\"\r\nimport { tokenStructuredMatcher } from \"../../scan/tokens\"\r\n\r\nexport function validateLookahead(options: {\r\n  lookaheadStrategy: ILookaheadStrategy\r\n  rules: Rule[]\r\n  tokenTypes: TokenType[]\r\n  grammarName: string\r\n}): IParserDefinitionError[] {\r\n  const lookaheadValidationErrorMessages = options.lookaheadStrategy.validate({\r\n    rules: options.rules,\r\n    tokenTypes: options.tokenTypes,\r\n    grammarName: options.grammarName\r\n  })\r\n  return map(lookaheadValidationErrorMessages, (errorMessage) => ({\r\n    type: ParserDefinitionErrorType.CUSTOM_LOOKAHEAD_VALIDATION,\r\n    ...errorMessage\r\n  }))\r\n}\r\n\r\nexport function validateGrammar(\r\n  topLevels: Rule[],\r\n  tokenTypes: TokenType[],\r\n  errMsgProvider: IGrammarValidatorErrorMessageProvider,\r\n  grammarName: string\r\n): IParserDefinitionError[] {\r\n  const duplicateErrors: IParserDefinitionError[] = flatMap(\r\n    topLevels,\r\n    (currTopLevel) => validateDuplicateProductions(currTopLevel, errMsgProvider)\r\n  )\r\n\r\n  const termsNamespaceConflictErrors = checkTerminalAndNoneTerminalsNameSpace(\r\n    topLevels,\r\n    tokenTypes,\r\n    errMsgProvider\r\n  )\r\n\r\n  const tooManyAltsErrors = flatMap(topLevels, (curRule) =>\r\n    validateTooManyAlts(curRule, errMsgProvider)\r\n  )\r\n\r\n  const duplicateRulesError = flatMap(topLevels, (curRule) =>\r\n    validateRuleDoesNotAlreadyExist(\r\n      curRule,\r\n      topLevels,\r\n      grammarName,\r\n      errMsgProvider\r\n    )\r\n  )\r\n\r\n  return duplicateErrors.concat(\r\n    termsNamespaceConflictErrors,\r\n    tooManyAltsErrors,\r\n    duplicateRulesError\r\n  )\r\n}\r\n\r\nfunction validateDuplicateProductions(\r\n  topLevelRule: Rule,\r\n  errMsgProvider: IGrammarValidatorErrorMessageProvider\r\n): IParserDuplicatesDefinitionError[] {\r\n  const collectorVisitor = new OccurrenceValidationCollector()\r\n  topLevelRule.accept(collectorVisitor)\r\n  const allRuleProductions = collectorVisitor.allProductions\r\n\r\n  const productionGroups = groupBy(\r\n    allRuleProductions,\r\n    identifyProductionForDuplicates\r\n  )\r\n\r\n  const duplicates: any = pickBy(productionGroups, (currGroup) => {\r\n    return currGroup.length > 1\r\n  })\r\n\r\n  const errors = map(values(duplicates), (currDuplicates: any) => {\r\n    const firstProd: any = first(currDuplicates)\r\n    const msg = errMsgProvider.buildDuplicateFoundError(\r\n      topLevelRule,\r\n      currDuplicates\r\n    )\r\n    const dslName = getProductionDslName(firstProd)\r\n    const defError: IParserDuplicatesDefinitionError = {\r\n      message: msg,\r\n      type: ParserDefinitionErrorType.DUPLICATE_PRODUCTIONS,\r\n      ruleName: topLevelRule.name,\r\n      dslName: dslName,\r\n      occurrence: firstProd.idx\r\n    }\r\n\r\n    const param = getExtraProductionArgument(firstProd)\r\n    if (param) {\r\n      defError.parameter = param\r\n    }\r\n\r\n    return defError\r\n  })\r\n  return errors\r\n}\r\n\r\nexport function identifyProductionForDuplicates(\r\n  prod: IProductionWithOccurrence\r\n): string {\r\n  return `${getProductionDslName(prod)}_#_${\r\n    prod.idx\r\n  }_#_${getExtraProductionArgument(prod)}`\r\n}\r\n\r\nfunction getExtraProductionArgument(prod: IProductionWithOccurrence): string {\r\n  if (prod instanceof Terminal) {\r\n    return prod.terminalType.name\r\n  } else if (prod instanceof NonTerminal) {\r\n    return prod.nonTerminalName\r\n  } else {\r\n    return \"\"\r\n  }\r\n}\r\n\r\nexport class OccurrenceValidationCollector extends GAstVisitor {\r\n  public allProductions: IProductionWithOccurrence[] = []\r\n\r\n  public visitNonTerminal(subrule: NonTerminal): void {\r\n    this.allProductions.push(subrule)\r\n  }\r\n\r\n  public visitOption(option: Option): void {\r\n    this.allProductions.push(option)\r\n  }\r\n\r\n  public visitRepetitionWithSeparator(manySep: RepetitionWithSeparator): void {\r\n    this.allProductions.push(manySep)\r\n  }\r\n\r\n  public visitRepetitionMandatory(atLeastOne: RepetitionMandatory): void {\r\n    this.allProductions.push(atLeastOne)\r\n  }\r\n\r\n  public visitRepetitionMandatoryWithSeparator(\r\n    atLeastOneSep: RepetitionMandatoryWithSeparator\r\n  ): void {\r\n    this.allProductions.push(atLeastOneSep)\r\n  }\r\n\r\n  public visitRepetition(many: Repetition): void {\r\n    this.allProductions.push(many)\r\n  }\r\n\r\n  public visitAlternation(or: Alternation): void {\r\n    this.allProductions.push(or)\r\n  }\r\n\r\n  public visitTerminal(terminal: Terminal): void {\r\n    this.allProductions.push(terminal)\r\n  }\r\n}\r\n\r\nexport function validateRuleDoesNotAlreadyExist(\r\n  rule: Rule,\r\n  allRules: Rule[],\r\n  className: string,\r\n  errMsgProvider: IGrammarValidatorErrorMessageProvider\r\n): IParserDefinitionError[] {\r\n  const errors = []\r\n  const occurrences = reduce(\r\n    allRules,\r\n    (result, curRule) => {\r\n      if (curRule.name === rule.name) {\r\n        return result + 1\r\n      }\r\n      return result\r\n    },\r\n    0\r\n  )\r\n  if (occurrences > 1) {\r\n    const errMsg = errMsgProvider.buildDuplicateRuleNameError({\r\n      topLevelRule: rule,\r\n      grammarName: className\r\n    })\r\n    errors.push({\r\n      message: errMsg,\r\n      type: ParserDefinitionErrorType.DUPLICATE_RULE_NAME,\r\n      ruleName: rule.name\r\n    })\r\n  }\r\n\r\n  return errors\r\n}\r\n\r\n// TODO: is there anyway to get only the rule names of rules inherited from the super grammars?\r\n// This is not part of the IGrammarErrorProvider because the validation cannot be performed on\r\n// The grammar structure, only at runtime.\r\nexport function validateRuleIsOverridden(\r\n  ruleName: string,\r\n  definedRulesNames: string[],\r\n  className: string\r\n): IParserDefinitionError[] {\r\n  const errors = []\r\n  let errMsg\r\n\r\n  if (!includes(definedRulesNames, ruleName)) {\r\n    errMsg =\r\n      `Invalid rule override, rule: ->${ruleName}<- cannot be overridden in the grammar: ->${className}<-` +\r\n      `as it is not defined in any of the super grammars `\r\n    errors.push({\r\n      message: errMsg,\r\n      type: ParserDefinitionErrorType.INVALID_RULE_OVERRIDE,\r\n      ruleName: ruleName\r\n    })\r\n  }\r\n\r\n  return errors\r\n}\r\n\r\nexport function validateNoLeftRecursion(\r\n  topRule: Rule,\r\n  currRule: Rule,\r\n  errMsgProvider: IGrammarValidatorErrorMessageProvider,\r\n  path: Rule[] = []\r\n): IParserDefinitionError[] {\r\n  const errors: IParserDefinitionError[] = []\r\n  const nextNonTerminals = getFirstNoneTerminal(currRule.definition)\r\n  if (isEmpty(nextNonTerminals)) {\r\n    return []\r\n  } else {\r\n    const ruleName = topRule.name\r\n    const foundLeftRecursion = includes(nextNonTerminals, topRule)\r\n    if (foundLeftRecursion) {\r\n      errors.push({\r\n        message: errMsgProvider.buildLeftRecursionError({\r\n          topLevelRule: topRule,\r\n          leftRecursionPath: path\r\n        }),\r\n        type: ParserDefinitionErrorType.LEFT_RECURSION,\r\n        ruleName: ruleName\r\n      })\r\n    }\r\n\r\n    // we are only looking for cyclic paths leading back to the specific topRule\r\n    // other cyclic paths are ignored, we still need this difference to avoid infinite loops...\r\n    const validNextSteps = difference(nextNonTerminals, path.concat([topRule]))\r\n    const errorsFromNextSteps = flatMap(validNextSteps, (currRefRule) => {\r\n      const newPath = clone(path)\r\n      newPath.push(currRefRule)\r\n      return validateNoLeftRecursion(\r\n        topRule,\r\n        currRefRule,\r\n        errMsgProvider,\r\n        newPath\r\n      )\r\n    })\r\n\r\n    return errors.concat(errorsFromNextSteps)\r\n  }\r\n}\r\n\r\nexport function getFirstNoneTerminal(definition: IProduction[]): Rule[] {\r\n  let result: Rule[] = []\r\n  if (isEmpty(definition)) {\r\n    return result\r\n  }\r\n  const firstProd = first(definition)\r\n\r\n  /* istanbul ignore else */\r\n  if (firstProd instanceof NonTerminal) {\r\n    result.push(firstProd.referencedRule)\r\n  } else if (\r\n    firstProd instanceof AlternativeGAST ||\r\n    firstProd instanceof Option ||\r\n    firstProd instanceof RepetitionMandatory ||\r\n    firstProd instanceof RepetitionMandatoryWithSeparator ||\r\n    firstProd instanceof RepetitionWithSeparator ||\r\n    firstProd instanceof Repetition\r\n  ) {\r\n    result = result.concat(\r\n      getFirstNoneTerminal(<IProduction[]>firstProd.definition)\r\n    )\r\n  } else if (firstProd instanceof Alternation) {\r\n    // each sub definition in alternation is a FLAT\r\n    result = flatten(\r\n      map(firstProd.definition, (currSubDef) =>\r\n        getFirstNoneTerminal((<AlternativeGAST>currSubDef).definition)\r\n      )\r\n    )\r\n  } else if (firstProd instanceof Terminal) {\r\n    // nothing to see, move along\r\n  } else {\r\n    throw Error(\"non exhaustive match\")\r\n  }\r\n\r\n  const isFirstOptional = isOptionalProd(firstProd)\r\n  const hasMore = definition.length > 1\r\n  if (isFirstOptional && hasMore) {\r\n    const rest = drop(definition)\r\n    return result.concat(getFirstNoneTerminal(rest))\r\n  } else {\r\n    return result\r\n  }\r\n}\r\n\r\nclass OrCollector extends GAstVisitor {\r\n  public alternations: Alternation[] = []\r\n\r\n  public visitAlternation(node: Alternation): void {\r\n    this.alternations.push(node)\r\n  }\r\n}\r\n\r\nexport function validateEmptyOrAlternative(\r\n  topLevelRule: Rule,\r\n  errMsgProvider: IGrammarValidatorErrorMessageProvider\r\n): IParserEmptyAlternativeDefinitionError[] {\r\n  const orCollector = new OrCollector()\r\n  topLevelRule.accept(orCollector)\r\n  const ors = orCollector.alternations\r\n\r\n  const errors = flatMap<Alternation, IParserEmptyAlternativeDefinitionError>(\r\n    ors,\r\n    (currOr) => {\r\n      const exceptLast = dropRight(currOr.definition)\r\n      return flatMap(exceptLast, (currAlternative, currAltIdx) => {\r\n        const possibleFirstInAlt = nextPossibleTokensAfter(\r\n          [currAlternative],\r\n          [],\r\n          tokenStructuredMatcher,\r\n          1\r\n        )\r\n        if (isEmpty(possibleFirstInAlt)) {\r\n          return [\r\n            {\r\n              message: errMsgProvider.buildEmptyAlternationError({\r\n                topLevelRule: topLevelRule,\r\n                alternation: currOr,\r\n                emptyChoiceIdx: currAltIdx\r\n              }),\r\n              type: ParserDefinitionErrorType.NONE_LAST_EMPTY_ALT,\r\n              ruleName: topLevelRule.name,\r\n              occurrence: currOr.idx,\r\n              alternative: currAltIdx + 1\r\n            }\r\n          ]\r\n        } else {\r\n          return []\r\n        }\r\n      })\r\n    }\r\n  )\r\n\r\n  return errors\r\n}\r\n\r\nexport function validateAmbiguousAlternationAlternatives(\r\n  topLevelRule: Rule,\r\n  globalMaxLookahead: number,\r\n  errMsgProvider: IGrammarValidatorErrorMessageProvider\r\n): IParserAmbiguousAlternativesDefinitionError[] {\r\n  const orCollector = new OrCollector()\r\n  topLevelRule.accept(orCollector)\r\n  let ors = orCollector.alternations\r\n\r\n  // New Handling of ignoring ambiguities\r\n  // - https://github.com/chevrotain/chevrotain/issues/869\r\n  ors = reject(ors, (currOr) => currOr.ignoreAmbiguities === true)\r\n\r\n  const errors = flatMap(ors, (currOr: Alternation) => {\r\n    const currOccurrence = currOr.idx\r\n    const actualMaxLookahead = currOr.maxLookahead || globalMaxLookahead\r\n    const alternatives = getLookaheadPathsForOr(\r\n      currOccurrence,\r\n      topLevelRule,\r\n      actualMaxLookahead,\r\n      currOr\r\n    )\r\n    const altsAmbiguityErrors = checkAlternativesAmbiguities(\r\n      alternatives,\r\n      currOr,\r\n      topLevelRule,\r\n      errMsgProvider\r\n    )\r\n    const altsPrefixAmbiguityErrors = checkPrefixAlternativesAmbiguities(\r\n      alternatives,\r\n      currOr,\r\n      topLevelRule,\r\n      errMsgProvider\r\n    )\r\n\r\n    return altsAmbiguityErrors.concat(altsPrefixAmbiguityErrors)\r\n  })\r\n\r\n  return errors\r\n}\r\n\r\nexport class RepetitionCollector extends GAstVisitor {\r\n  public allProductions: (IProductionWithOccurrence & {\r\n    maxLookahead?: number\r\n  })[] = []\r\n\r\n  public visitRepetitionWithSeparator(manySep: RepetitionWithSeparator): void {\r\n    this.allProductions.push(manySep)\r\n  }\r\n\r\n  public visitRepetitionMandatory(atLeastOne: RepetitionMandatory): void {\r\n    this.allProductions.push(atLeastOne)\r\n  }\r\n\r\n  public visitRepetitionMandatoryWithSeparator(\r\n    atLeastOneSep: RepetitionMandatoryWithSeparator\r\n  ): void {\r\n    this.allProductions.push(atLeastOneSep)\r\n  }\r\n\r\n  public visitRepetition(many: Repetition): void {\r\n    this.allProductions.push(many)\r\n  }\r\n}\r\n\r\nexport function validateTooManyAlts(\r\n  topLevelRule: Rule,\r\n  errMsgProvider: IGrammarValidatorErrorMessageProvider\r\n): IParserDefinitionError[] {\r\n  const orCollector = new OrCollector()\r\n  topLevelRule.accept(orCollector)\r\n  const ors = orCollector.alternations\r\n\r\n  const errors = flatMap(ors, (currOr) => {\r\n    if (currOr.definition.length > 255) {\r\n      return [\r\n        {\r\n          message: errMsgProvider.buildTooManyAlternativesError({\r\n            topLevelRule: topLevelRule,\r\n            alternation: currOr\r\n          }),\r\n          type: ParserDefinitionErrorType.TOO_MANY_ALTS,\r\n          ruleName: topLevelRule.name,\r\n          occurrence: currOr.idx\r\n        }\r\n      ]\r\n    } else {\r\n      return []\r\n    }\r\n  })\r\n\r\n  return errors\r\n}\r\n\r\nexport function validateSomeNonEmptyLookaheadPath(\r\n  topLevelRules: Rule[],\r\n  maxLookahead: number,\r\n  errMsgProvider: IGrammarValidatorErrorMessageProvider\r\n): IParserDefinitionError[] {\r\n  const errors: IParserDefinitionError[] = []\r\n  forEach(topLevelRules, (currTopRule) => {\r\n    const collectorVisitor = new RepetitionCollector()\r\n    currTopRule.accept(collectorVisitor)\r\n    const allRuleProductions = collectorVisitor.allProductions\r\n    forEach(allRuleProductions, (currProd) => {\r\n      const prodType = getProdType(currProd)\r\n      const actualMaxLookahead = currProd.maxLookahead || maxLookahead\r\n      const currOccurrence = currProd.idx\r\n      const paths = getLookaheadPathsForOptionalProd(\r\n        currOccurrence,\r\n        currTopRule,\r\n        prodType,\r\n        actualMaxLookahead\r\n      )\r\n      const pathsInsideProduction = paths[0]\r\n      if (isEmpty(flatten(pathsInsideProduction))) {\r\n        const errMsg = errMsgProvider.buildEmptyRepetitionError({\r\n          topLevelRule: currTopRule,\r\n          repetition: currProd\r\n        })\r\n        errors.push({\r\n          message: errMsg,\r\n          type: ParserDefinitionErrorType.NO_NON_EMPTY_LOOKAHEAD,\r\n          ruleName: currTopRule.name\r\n        })\r\n      }\r\n    })\r\n  })\r\n\r\n  return errors\r\n}\r\n\r\nexport interface IAmbiguityDescriptor {\r\n  alts: number[]\r\n  path: TokenType[]\r\n}\r\n\r\nfunction checkAlternativesAmbiguities(\r\n  alternatives: Alternative[],\r\n  alternation: Alternation,\r\n  rule: Rule,\r\n  errMsgProvider: IGrammarValidatorErrorMessageProvider\r\n): IParserAmbiguousAlternativesDefinitionError[] {\r\n  const foundAmbiguousPaths: Alternative = []\r\n  const identicalAmbiguities = reduce(\r\n    alternatives,\r\n    (result, currAlt, currAltIdx) => {\r\n      // ignore (skip) ambiguities with this alternative\r\n      if (alternation.definition[currAltIdx].ignoreAmbiguities === true) {\r\n        return result\r\n      }\r\n\r\n      forEach(currAlt, (currPath) => {\r\n        const altsCurrPathAppearsIn = [currAltIdx]\r\n        forEach(alternatives, (currOtherAlt, currOtherAltIdx) => {\r\n          if (\r\n            currAltIdx !== currOtherAltIdx &&\r\n            containsPath(currOtherAlt, currPath) &&\r\n            // ignore (skip) ambiguities with this \"other\" alternative\r\n            alternation.definition[currOtherAltIdx].ignoreAmbiguities !== true\r\n          ) {\r\n            altsCurrPathAppearsIn.push(currOtherAltIdx)\r\n          }\r\n        })\r\n\r\n        if (\r\n          altsCurrPathAppearsIn.length > 1 &&\r\n          !containsPath(foundAmbiguousPaths, currPath)\r\n        ) {\r\n          foundAmbiguousPaths.push(currPath)\r\n          result.push({\r\n            alts: altsCurrPathAppearsIn,\r\n            path: currPath\r\n          })\r\n        }\r\n      })\r\n      return result\r\n    },\r\n    [] as { alts: number[]; path: TokenType[] }[]\r\n  )\r\n\r\n  const currErrors = map(identicalAmbiguities, (currAmbDescriptor) => {\r\n    const ambgIndices = map(\r\n      currAmbDescriptor.alts,\r\n      (currAltIdx) => currAltIdx + 1\r\n    )\r\n\r\n    const currMessage = errMsgProvider.buildAlternationAmbiguityError({\r\n      topLevelRule: rule,\r\n      alternation: alternation,\r\n      ambiguityIndices: ambgIndices,\r\n      prefixPath: currAmbDescriptor.path\r\n    })\r\n\r\n    return {\r\n      message: currMessage,\r\n      type: ParserDefinitionErrorType.AMBIGUOUS_ALTS,\r\n      ruleName: rule.name,\r\n      occurrence: alternation.idx,\r\n      alternatives: currAmbDescriptor.alts\r\n    }\r\n  })\r\n\r\n  return currErrors\r\n}\r\n\r\nexport function checkPrefixAlternativesAmbiguities(\r\n  alternatives: Alternative[],\r\n  alternation: Alternation,\r\n  rule: Rule,\r\n  errMsgProvider: IGrammarValidatorErrorMessageProvider\r\n): IParserAmbiguousAlternativesDefinitionError[] {\r\n  // flatten\r\n  const pathsAndIndices = reduce(\r\n    alternatives,\r\n    (result, currAlt, idx) => {\r\n      const currPathsAndIdx = map(currAlt, (currPath) => {\r\n        return { idx: idx, path: currPath }\r\n      })\r\n      return result.concat(currPathsAndIdx)\r\n    },\r\n    [] as { idx: number; path: TokenType[] }[]\r\n  )\r\n\r\n  const errors = compact(\r\n    flatMap(pathsAndIndices, (currPathAndIdx) => {\r\n      const alternativeGast = alternation.definition[currPathAndIdx.idx]\r\n      // ignore (skip) ambiguities with this alternative\r\n      if (alternativeGast.ignoreAmbiguities === true) {\r\n        return []\r\n      }\r\n      const targetIdx = currPathAndIdx.idx\r\n      const targetPath = currPathAndIdx.path\r\n\r\n      const prefixAmbiguitiesPathsAndIndices = filter(\r\n        pathsAndIndices,\r\n        (searchPathAndIdx) => {\r\n          // prefix ambiguity can only be created from lower idx (higher priority) path\r\n          return (\r\n            // ignore (skip) ambiguities with this \"other\" alternative\r\n            alternation.definition[searchPathAndIdx.idx].ignoreAmbiguities !==\r\n              true &&\r\n            searchPathAndIdx.idx < targetIdx &&\r\n            // checking for strict prefix because identical lookaheads\r\n            // will be be detected using a different validation.\r\n            isStrictPrefixOfPath(searchPathAndIdx.path, targetPath)\r\n          )\r\n        }\r\n      )\r\n\r\n      const currPathPrefixErrors = map(\r\n        prefixAmbiguitiesPathsAndIndices,\r\n        (currAmbPathAndIdx): IParserAmbiguousAlternativesDefinitionError => {\r\n          const ambgIndices = [currAmbPathAndIdx.idx + 1, targetIdx + 1]\r\n          const occurrence = alternation.idx === 0 ? \"\" : alternation.idx\r\n\r\n          const message = errMsgProvider.buildAlternationPrefixAmbiguityError({\r\n            topLevelRule: rule,\r\n            alternation: alternation,\r\n            ambiguityIndices: ambgIndices,\r\n            prefixPath: currAmbPathAndIdx.path\r\n          })\r\n          return {\r\n            message: message,\r\n            type: ParserDefinitionErrorType.AMBIGUOUS_PREFIX_ALTS,\r\n            ruleName: rule.name,\r\n            occurrence: occurrence,\r\n            alternatives: ambgIndices\r\n          }\r\n        }\r\n      )\r\n\r\n      return currPathPrefixErrors\r\n    })\r\n  )\r\n\r\n  return errors\r\n}\r\n\r\nfunction checkTerminalAndNoneTerminalsNameSpace(\r\n  topLevels: Rule[],\r\n  tokenTypes: TokenType[],\r\n  errMsgProvider: IGrammarValidatorErrorMessageProvider\r\n): IParserDefinitionError[] {\r\n  const errors: IParserDefinitionError[] = []\r\n\r\n  const tokenNames = map(tokenTypes, (currToken) => currToken.name)\r\n\r\n  forEach(topLevels, (currRule) => {\r\n    const currRuleName = currRule.name\r\n    if (includes(tokenNames, currRuleName)) {\r\n      const errMsg = errMsgProvider.buildNamespaceConflictError(currRule)\r\n\r\n      errors.push({\r\n        message: errMsg,\r\n        type: ParserDefinitionErrorType.CONFLICT_TOKENS_RULES_NAMESPACE,\r\n        ruleName: currRuleName\r\n      })\r\n    }\r\n  })\r\n\r\n  return errors\r\n}\r\n", "import { Rule } from \"@chevrotain/gast\"\r\nimport forEach from \"lodash/forEach\"\r\nimport defaults from \"lodash/defaults\"\r\nimport { resolveGrammar as orgResolveGrammar } from \"../resolver\"\r\nimport { validateGrammar as orgValidateGrammar } from \"../checks\"\r\nimport {\r\n  defaultGrammarResolverErrorProvider,\r\n  defaultGrammarValidatorErrorProvider\r\n} from \"../../errors_public\"\r\nimport { TokenType } from \"@chevrotain/types\"\r\nimport {\r\n  IGrammarResolverErrorMessageProvider,\r\n  IGrammarValidatorErrorMessageProvider,\r\n  IParserDefinitionError\r\n} from \"../types\"\r\n\r\ntype ResolveGrammarOpts = {\r\n  rules: Rule[]\r\n  errMsgProvider?: IGrammarResolverErrorMessageProvider\r\n}\r\nexport function resolveGrammar(\r\n  options: ResolveGrammarOpts\r\n): IParserDefinitionError[] {\r\n  const actualOptions: Required<ResolveGrammarOpts> = defaults(options, {\r\n    errMsgProvider: defaultGrammarResolverErrorProvider\r\n  })\r\n\r\n  const topRulesTable: { [ruleName: string]: Rule } = {}\r\n  forEach(options.rules, (rule) => {\r\n    topRulesTable[rule.name] = rule\r\n  })\r\n  return orgResolveGrammar(topRulesTable, actualOptions.errMsgProvider)\r\n}\r\n\r\nexport function validateGrammar(options: {\r\n  rules: Rule[]\r\n  tokenTypes: TokenType[]\r\n  grammarName: string\r\n  errMsgProvider: IGrammarValidatorErrorMessageProvider\r\n}): IParserDefinitionError[] {\r\n  options = defaults(options, {\r\n    errMsgProvider: defaultGrammarValidatorErrorProvider\r\n  })\r\n\r\n  return orgValidateGrammar(\r\n    options.rules,\r\n    options.tokenTypes,\r\n    options.errMsgProvider,\r\n    options.grammarName\r\n  )\r\n}\r\n", "import includes from \"lodash/includes\"\r\nimport {\r\n  IToken,\r\n  IRecognitionException,\r\n  IRecognizerContext\r\n} from \"@chevrotain/types\"\r\n\r\nconst MISMATCHED_TOKEN_EXCEPTION = \"MismatchedTokenException\"\r\nconst NO_VIABLE_ALT_EXCEPTION = \"NoViableAltException\"\r\nconst EARLY_EXIT_EXCEPTION = \"EarlyExitException\"\r\nconst NOT_ALL_INPUT_PARSED_EXCEPTION = \"NotAllInputParsedException\"\r\n\r\nconst RECOGNITION_EXCEPTION_NAMES = [\r\n  MISMATCHED_TOKEN_EXCEPTION,\r\n  NO_VIABLE_ALT_EXCEPTION,\r\n  EARLY_EXIT_EXCEPTION,\r\n  NOT_ALL_INPUT_PARSED_EXCEPTION\r\n]\r\n\r\nObject.freeze(RECOGNITION_EXCEPTION_NAMES)\r\n\r\n// hacks to bypass no support for custom Errors in javascript/typescript\r\nexport function isRecognitionException(error: Error) {\r\n  // can't do instanceof on hacked custom js exceptions\r\n  return includes(RECOGNITION_EXCEPTION_NAMES, error.name)\r\n}\r\n\r\nabstract class RecognitionException\r\n  extends Error\r\n  implements IRecognitionException\r\n{\r\n  context: IRecognizerContext\r\n  resyncedTokens: IToken[] = []\r\n\r\n  protected constructor(message: string, public token: IToken) {\r\n    super(message)\r\n\r\n    // fix prototype chain when typescript target is ES5\r\n    Object.setPrototypeOf(this, new.target.prototype)\r\n\r\n    /* istanbul ignore next - V8 workaround to remove constructor from stacktrace when typescript target is ES5 */\r\n    if (Error.captureStackTrace) {\r\n      Error.captureStackTrace(this, this.constructor)\r\n    }\r\n  }\r\n}\r\n\r\nexport class MismatchedTokenException extends RecognitionException {\r\n  constructor(message: string, token: IToken, public previousToken: IToken) {\r\n    super(message, token)\r\n    this.name = MISMATCHED_TOKEN_EXCEPTION\r\n  }\r\n}\r\n\r\nexport class NoViableAltException extends RecognitionException {\r\n  constructor(message: string, token: IToken, public previousToken: IToken) {\r\n    super(message, token)\r\n    this.name = NO_VIABLE_ALT_EXCEPTION\r\n  }\r\n}\r\n\r\nexport class NotAllInputParsedException extends RecognitionException {\r\n  constructor(message: string, token: IToken) {\r\n    super(message, token)\r\n    this.name = NOT_ALL_INPUT_PARSED_EXCEPTION\r\n  }\r\n}\r\n\r\nexport class EarlyExitException extends RecognitionException {\r\n  constructor(message: string, token: IToken, public previousToken: IToken) {\r\n    super(message, token)\r\n    this.name = EARLY_EXIT_EXCEPTION\r\n  }\r\n}\r\n", "import {\r\n  createTokenInstance,\r\n  EOF,\r\n  tokenMatcher\r\n} from \"../../../scan/tokens_public\"\r\nimport {\r\n  AbstractNextTerminalAfterProductionWalker,\r\n  IFirstAfterRepetition\r\n} from \"../../grammar/interpreter\"\r\nimport isEmpty from \"lodash/isEmpty\"\r\nimport dropRight from \"lodash/dropRight\"\r\nimport flatten from \"lodash/flatten\"\r\nimport map from \"lodash/map\"\r\nimport find from \"lodash/find\"\r\nimport has from \"lodash/has\"\r\nimport includes from \"lodash/includes\"\r\nimport clone from \"lodash/clone\"\r\nimport {\r\n  IParserConfig,\r\n  IToken,\r\n  ITokenGrammarPath,\r\n  TokenType\r\n} from \"@chevrotain/types\"\r\nimport { MismatchedTokenException } from \"../../exceptions_public\"\r\nimport { IN } from \"../../constants\"\r\nimport { MixedInParser } from \"./parser_traits\"\r\nimport { DEFAULT_PARSER_CONFIG } from \"../parser\"\r\n\r\nexport const EOF_FOLLOW_KEY: any = {}\r\n\r\nexport interface IFollowKey {\r\n  ruleName: string\r\n  idxInCallingRule: number\r\n  inRule: string\r\n}\r\n\r\nexport const IN_RULE_RECOVERY_EXCEPTION = \"InRuleRecoveryException\"\r\n\r\nexport class InRuleRecoveryException extends Error {\r\n  constructor(message: string) {\r\n    super(message)\r\n    this.name = IN_RULE_RECOVERY_EXCEPTION\r\n  }\r\n}\r\n\r\n/**\r\n * This trait is responsible for the error recovery and fault tolerant logic\r\n */\r\nexport class Recoverable {\r\n  recoveryEnabled: boolean\r\n  firstAfterRepMap: Record<string, IFirstAfterRepetition>\r\n  resyncFollows: Record<string, TokenType[]>\r\n\r\n  initRecoverable(config: IParserConfig) {\r\n    this.firstAfterRepMap = {}\r\n    this.resyncFollows = {}\r\n\r\n    this.recoveryEnabled = has(config, \"recoveryEnabled\")\r\n      ? (config.recoveryEnabled as boolean) // assumes end user provides the correct config value/type\r\n      : DEFAULT_PARSER_CONFIG.recoveryEnabled\r\n\r\n    // performance optimization, NOOP will be inlined which\r\n    // effectively means that this optional feature does not exist\r\n    // when not used.\r\n    if (this.recoveryEnabled) {\r\n      this.attemptInRepetitionRecovery = attemptInRepetitionRecovery\r\n    }\r\n  }\r\n\r\n  public getTokenToInsert(tokType: TokenType): IToken {\r\n    const tokToInsert = createTokenInstance(\r\n      tokType,\r\n      \"\",\r\n      NaN,\r\n      NaN,\r\n      NaN,\r\n      NaN,\r\n      NaN,\r\n      NaN\r\n    )\r\n    tokToInsert.isInsertedInRecovery = true\r\n    return tokToInsert\r\n  }\r\n\r\n  public canTokenTypeBeInsertedInRecovery(tokType: TokenType): boolean {\r\n    return true\r\n  }\r\n\r\n  public canTokenTypeBeDeletedInRecovery(tokType: TokenType): boolean {\r\n    return true\r\n  }\r\n\r\n  tryInRepetitionRecovery(\r\n    this: MixedInParser,\r\n    grammarRule: Function,\r\n    grammarRuleArgs: any[],\r\n    lookAheadFunc: () => boolean,\r\n    expectedTokType: TokenType\r\n  ): void {\r\n    // TODO: can the resyncTokenType be cached?\r\n    const reSyncTokType = this.findReSyncTokenType()\r\n    const savedLexerState = this.exportLexerState()\r\n    const resyncedTokens: IToken[] = []\r\n    let passedResyncPoint = false\r\n\r\n    const nextTokenWithoutResync = this.LA(1)\r\n    let currToken = this.LA(1)\r\n\r\n    const generateErrorMessage = () => {\r\n      const previousToken = this.LA(0)\r\n      // we are preemptively re-syncing before an error has been detected, therefor we must reproduce\r\n      // the error that would have been thrown\r\n      const msg = this.errorMessageProvider.buildMismatchTokenMessage({\r\n        expected: expectedTokType,\r\n        actual: nextTokenWithoutResync,\r\n        previous: previousToken,\r\n        ruleName: this.getCurrRuleFullName()\r\n      })\r\n      const error = new MismatchedTokenException(\r\n        msg,\r\n        nextTokenWithoutResync,\r\n        this.LA(0)\r\n      )\r\n      // the first token here will be the original cause of the error, this is not part of the resyncedTokens property.\r\n      error.resyncedTokens = dropRight(resyncedTokens)\r\n      this.SAVE_ERROR(error)\r\n    }\r\n\r\n    while (!passedResyncPoint) {\r\n      // re-synced to a point where we can safely exit the repetition/\r\n      if (this.tokenMatcher(currToken, expectedTokType)) {\r\n        generateErrorMessage()\r\n        return // must return here to avoid reverting the inputIdx\r\n      } else if (lookAheadFunc.call(this)) {\r\n        // we skipped enough tokens so we can resync right back into another iteration of the repetition grammar rule\r\n        generateErrorMessage()\r\n        // recursive invocation in other to support multiple re-syncs in the same top level repetition grammar rule\r\n        grammarRule.apply(this, grammarRuleArgs)\r\n        return // must return here to avoid reverting the inputIdx\r\n      } else if (this.tokenMatcher(currToken, reSyncTokType)) {\r\n        passedResyncPoint = true\r\n      } else {\r\n        currToken = this.SKIP_TOKEN()\r\n        this.addToResyncTokens(currToken, resyncedTokens)\r\n      }\r\n    }\r\n\r\n    // we were unable to find a CLOSER point to resync inside the Repetition, reset the state.\r\n    // The parsing exception we were trying to prevent will happen in the NEXT parsing step. it may be handled by\r\n    // \"between rules\" resync recovery later in the flow.\r\n    this.importLexerState(savedLexerState)\r\n  }\r\n\r\n  shouldInRepetitionRecoveryBeTried(\r\n    this: MixedInParser,\r\n    expectTokAfterLastMatch: TokenType,\r\n    nextTokIdx: number,\r\n    notStuck: boolean | undefined\r\n  ): boolean {\r\n    // Edge case of arriving from a MANY repetition which is stuck\r\n    // Attempting recovery in this case could cause an infinite loop\r\n    if (notStuck === false) {\r\n      return false\r\n    }\r\n\r\n    // no need to recover, next token is what we expect...\r\n    if (this.tokenMatcher(this.LA(1), expectTokAfterLastMatch)) {\r\n      return false\r\n    }\r\n\r\n    // error recovery is disabled during backtracking as it can make the parser ignore a valid grammar path\r\n    // and prefer some backtracking path that includes recovered errors.\r\n    if (this.isBackTracking()) {\r\n      return false\r\n    }\r\n\r\n    // if we can perform inRule recovery (single token insertion or deletion) we always prefer that recovery algorithm\r\n    // because if it works, it makes the least amount of changes to the input stream (greedy algorithm)\r\n    //noinspection RedundantIfStatementJS\r\n    if (\r\n      this.canPerformInRuleRecovery(\r\n        expectTokAfterLastMatch,\r\n        this.getFollowsForInRuleRecovery(expectTokAfterLastMatch, nextTokIdx)\r\n      )\r\n    ) {\r\n      return false\r\n    }\r\n\r\n    return true\r\n  }\r\n\r\n  // Error Recovery functionality\r\n  getFollowsForInRuleRecovery(\r\n    this: MixedInParser,\r\n    tokType: TokenType,\r\n    tokIdxInRule: number\r\n  ): TokenType[] {\r\n    const grammarPath = this.getCurrentGrammarPath(tokType, tokIdxInRule)\r\n    const follows = this.getNextPossibleTokenTypes(grammarPath)\r\n    return follows\r\n  }\r\n\r\n  tryInRuleRecovery(\r\n    this: MixedInParser,\r\n    expectedTokType: TokenType,\r\n    follows: TokenType[]\r\n  ): IToken {\r\n    if (this.canRecoverWithSingleTokenInsertion(expectedTokType, follows)) {\r\n      const tokToInsert = this.getTokenToInsert(expectedTokType)\r\n      return tokToInsert\r\n    }\r\n\r\n    if (this.canRecoverWithSingleTokenDeletion(expectedTokType)) {\r\n      const nextTok = this.SKIP_TOKEN()\r\n      this.consumeToken()\r\n      return nextTok\r\n    }\r\n\r\n    throw new InRuleRecoveryException(\"sad sad panda\")\r\n  }\r\n\r\n  canPerformInRuleRecovery(\r\n    this: MixedInParser,\r\n    expectedToken: TokenType,\r\n    follows: TokenType[]\r\n  ): boolean {\r\n    return (\r\n      this.canRecoverWithSingleTokenInsertion(expectedToken, follows) ||\r\n      this.canRecoverWithSingleTokenDeletion(expectedToken)\r\n    )\r\n  }\r\n\r\n  canRecoverWithSingleTokenInsertion(\r\n    this: MixedInParser,\r\n    expectedTokType: TokenType,\r\n    follows: TokenType[]\r\n  ): boolean {\r\n    if (!this.canTokenTypeBeInsertedInRecovery(expectedTokType)) {\r\n      return false\r\n    }\r\n\r\n    // must know the possible following tokens to perform single token insertion\r\n    if (isEmpty(follows)) {\r\n      return false\r\n    }\r\n\r\n    const mismatchedTok = this.LA(1)\r\n    const isMisMatchedTokInFollows =\r\n      find(follows, (possibleFollowsTokType: TokenType) => {\r\n        return this.tokenMatcher(mismatchedTok, possibleFollowsTokType)\r\n      }) !== undefined\r\n\r\n    return isMisMatchedTokInFollows\r\n  }\r\n\r\n  canRecoverWithSingleTokenDeletion(\r\n    this: MixedInParser,\r\n    expectedTokType: TokenType\r\n  ): boolean {\r\n    if (!this.canTokenTypeBeDeletedInRecovery(expectedTokType)) {\r\n      return false\r\n    }\r\n\r\n    const isNextTokenWhatIsExpected = this.tokenMatcher(\r\n      this.LA(2),\r\n      expectedTokType\r\n    )\r\n    return isNextTokenWhatIsExpected\r\n  }\r\n\r\n  isInCurrentRuleReSyncSet(\r\n    this: MixedInParser,\r\n    tokenTypeIdx: TokenType\r\n  ): boolean {\r\n    const followKey = this.getCurrFollowKey()\r\n    const currentRuleReSyncSet = this.getFollowSetFromFollowKey(followKey)\r\n    return includes(currentRuleReSyncSet, tokenTypeIdx)\r\n  }\r\n\r\n  findReSyncTokenType(this: MixedInParser): TokenType {\r\n    const allPossibleReSyncTokTypes = this.flattenFollowSet()\r\n    // this loop will always terminate as EOF is always in the follow stack and also always (virtually) in the input\r\n    let nextToken = this.LA(1)\r\n    let k = 2\r\n    while (true) {\r\n      const foundMatch = find(allPossibleReSyncTokTypes, (resyncTokType) => {\r\n        const canMatch = tokenMatcher(nextToken, resyncTokType)\r\n        return canMatch\r\n      })\r\n      if (foundMatch !== undefined) {\r\n        return foundMatch\r\n      }\r\n      nextToken = this.LA(k)\r\n      k++\r\n    }\r\n  }\r\n\r\n  getCurrFollowKey(this: MixedInParser): IFollowKey {\r\n    // the length is at least one as we always add the ruleName to the stack before invoking the rule.\r\n    if (this.RULE_STACK.length === 1) {\r\n      return EOF_FOLLOW_KEY\r\n    }\r\n    const currRuleShortName = this.getLastExplicitRuleShortName()\r\n    const currRuleIdx = this.getLastExplicitRuleOccurrenceIndex()\r\n    const prevRuleShortName = this.getPreviousExplicitRuleShortName()\r\n\r\n    return {\r\n      ruleName: this.shortRuleNameToFullName(currRuleShortName),\r\n      idxInCallingRule: currRuleIdx,\r\n      inRule: this.shortRuleNameToFullName(prevRuleShortName)\r\n    }\r\n  }\r\n\r\n  buildFullFollowKeyStack(this: MixedInParser): IFollowKey[] {\r\n    const explicitRuleStack = this.RULE_STACK\r\n    const explicitOccurrenceStack = this.RULE_OCCURRENCE_STACK\r\n\r\n    return map(explicitRuleStack, (ruleName, idx) => {\r\n      if (idx === 0) {\r\n        return EOF_FOLLOW_KEY\r\n      }\r\n      return {\r\n        ruleName: this.shortRuleNameToFullName(ruleName),\r\n        idxInCallingRule: explicitOccurrenceStack[idx],\r\n        inRule: this.shortRuleNameToFullName(explicitRuleStack[idx - 1])\r\n      }\r\n    })\r\n  }\r\n\r\n  flattenFollowSet(this: MixedInParser): TokenType[] {\r\n    const followStack = map(this.buildFullFollowKeyStack(), (currKey) => {\r\n      return this.getFollowSetFromFollowKey(currKey)\r\n    })\r\n    return <any>flatten(followStack)\r\n  }\r\n\r\n  getFollowSetFromFollowKey(\r\n    this: MixedInParser,\r\n    followKey: IFollowKey\r\n  ): TokenType[] {\r\n    if (followKey === EOF_FOLLOW_KEY) {\r\n      return [EOF]\r\n    }\r\n\r\n    const followName =\r\n      followKey.ruleName + followKey.idxInCallingRule + IN + followKey.inRule\r\n\r\n    return this.resyncFollows[followName]\r\n  }\r\n\r\n  // It does not make any sense to include a virtual EOF token in the list of resynced tokens\r\n  // as EOF does not really exist and thus does not contain any useful information (line/column numbers)\r\n  addToResyncTokens(\r\n    this: MixedInParser,\r\n    token: IToken,\r\n    resyncTokens: IToken[]\r\n  ): IToken[] {\r\n    if (!this.tokenMatcher(token, EOF)) {\r\n      resyncTokens.push(token)\r\n    }\r\n    return resyncTokens\r\n  }\r\n\r\n  reSyncTo(this: MixedInParser, tokType: TokenType): IToken[] {\r\n    const resyncedTokens: IToken[] = []\r\n    let nextTok = this.LA(1)\r\n    while (this.tokenMatcher(nextTok, tokType) === false) {\r\n      nextTok = this.SKIP_TOKEN()\r\n      this.addToResyncTokens(nextTok, resyncedTokens)\r\n    }\r\n    // the last token is not part of the error.\r\n    return dropRight(resyncedTokens)\r\n  }\r\n\r\n  attemptInRepetitionRecovery(\r\n    this: MixedInParser,\r\n    prodFunc: Function,\r\n    args: any[],\r\n    lookaheadFunc: () => boolean,\r\n    dslMethodIdx: number,\r\n    prodOccurrence: number,\r\n    nextToksWalker: typeof AbstractNextTerminalAfterProductionWalker,\r\n    notStuck?: boolean\r\n  ): void {\r\n    // by default this is a NO-OP\r\n    // The actual implementation is with the function(not method) below\r\n  }\r\n\r\n  getCurrentGrammarPath(\r\n    this: MixedInParser,\r\n    tokType: TokenType,\r\n    tokIdxInRule: number\r\n  ): ITokenGrammarPath {\r\n    const pathRuleStack: string[] = this.getHumanReadableRuleStack()\r\n    const pathOccurrenceStack: number[] = clone(this.RULE_OCCURRENCE_STACK)\r\n    const grammarPath: any = {\r\n      ruleStack: pathRuleStack,\r\n      occurrenceStack: pathOccurrenceStack,\r\n      lastTok: tokType,\r\n      lastTokOccurrence: tokIdxInRule\r\n    }\r\n\r\n    return grammarPath\r\n  }\r\n  getHumanReadableRuleStack(this: MixedInParser): string[] {\r\n    return map(this.RULE_STACK, (currShortName) =>\r\n      this.shortRuleNameToFullName(currShortName)\r\n    )\r\n  }\r\n}\r\n\r\nexport function attemptInRepetitionRecovery(\r\n  this: MixedInParser,\r\n  prodFunc: Function,\r\n  args: any[],\r\n  lookaheadFunc: () => boolean,\r\n  dslMethodIdx: number,\r\n  prodOccurrence: number,\r\n  nextToksWalker: typeof AbstractNextTerminalAfterProductionWalker,\r\n  notStuck?: boolean\r\n): void {\r\n  const key = this.getKeyForAutomaticLookahead(dslMethodIdx, prodOccurrence)\r\n  let firstAfterRepInfo = this.firstAfterRepMap[key]\r\n  if (firstAfterRepInfo === undefined) {\r\n    const currRuleName = this.getCurrRuleFullName()\r\n    const ruleGrammar = this.getGAstProductions()[currRuleName]\r\n    const walker: AbstractNextTerminalAfterProductionWalker =\r\n      new nextToksWalker(ruleGrammar, prodOccurrence)\r\n    firstAfterRepInfo = walker.startWalking()\r\n    this.firstAfterRepMap[key] = firstAfterRepInfo\r\n  }\r\n\r\n  let expectTokAfterLastMatch = firstAfterRepInfo.token\r\n  let nextTokIdx = firstAfterRepInfo.occurrence\r\n  const isEndOfRule = firstAfterRepInfo.isEndOfRule\r\n\r\n  // special edge case of a TOP most repetition after which the input should END.\r\n  // this will force an attempt for inRule recovery in that scenario.\r\n  if (\r\n    this.RULE_STACK.length === 1 &&\r\n    isEndOfRule &&\r\n    expectTokAfterLastMatch === undefined\r\n  ) {\r\n    expectTokAfterLastMatch = EOF\r\n    nextTokIdx = 1\r\n  }\r\n\r\n  // We don't have anything to re-sync to...\r\n  // this condition was extracted from `shouldInRepetitionRecoveryBeTried` to act as a type-guard\r\n  if (expectTokAfterLastMatch === undefined || nextTokIdx === undefined) {\r\n    return\r\n  }\r\n\r\n  if (\r\n    this.shouldInRepetitionRecoveryBeTried(\r\n      expectTokAfterLastMatch,\r\n      nextTokIdx,\r\n      notStuck\r\n    )\r\n  ) {\r\n    // TODO: performance optimization: instead of passing the original args here, we modify\r\n    // the args param (or create a new one) and make sure the lookahead func is explicitly provided\r\n    // to avoid searching the cache for it once more.\r\n    this.tryInRepetitionRecovery(\r\n      prodFunc,\r\n      args,\r\n      lookaheadFunc,\r\n      expectTokAfterLastMatch\r\n    )\r\n  }\r\n}\r\n", "// Lookahead keys are 32Bit integers in the form\r\n// TTTTTTTT-ZZZZZZZZZZZZ-YYYY-XXXXXXXX\r\n// XXXX -> Occurrence Index bitmap.\r\n// YYYY -> DSL Method Type bitmap.\r\n// ZZZZZZZZZZZZZZZ -> Rule short Index bitmap.\r\n// TTTTTTTTT -> alternation alternative index bitmap\r\n\r\nexport const BITS_FOR_METHOD_TYPE = 4\r\nexport const BITS_FOR_OCCURRENCE_IDX = 8\r\nexport const BITS_FOR_RULE_IDX = 12\r\n// TODO: validation, this means that there may at most 2^8 --> 256 alternatives for an alternation.\r\nexport const BITS_FOR_ALT_IDX = 8\r\n\r\n// short string used as part of mapping keys.\r\n// being short improves the performance when composing KEYS for maps out of these\r\n// The 5 - 8 bits (16 possible values, are reserved for the DSL method indices)\r\nexport const OR_IDX = 1 << BITS_FOR_OCCURRENCE_IDX\r\nexport const OPTION_IDX = 2 << BITS_FOR_OCCURRENCE_IDX\r\nexport const MANY_IDX = 3 << BITS_FOR_OCCURRENCE_IDX\r\nexport const AT_LEAST_ONE_IDX = 4 << BITS_FOR_OCCURRENCE_IDX\r\nexport const MANY_SEP_IDX = 5 << BITS_FOR_OCCURRENCE_IDX\r\nexport const AT_LEAST_ONE_SEP_IDX = 6 << BITS_FOR_OCCURRENCE_IDX\r\n\r\n// this actually returns a number, but it is always used as a string (object prop key)\r\nexport function getKeyForAutomaticLookahead(\r\n  ruleIdx: number,\r\n  dslMethodIdx: number,\r\n  occurrence: number\r\n): number {\r\n  return occurrence | dslMethodIdx | ruleIdx\r\n}\r\n\r\nconst BITS_START_FOR_ALT_IDX = 32 - BITS_FOR_ALT_IDX\r\n", "import {\r\n  ILookaheadStrategy,\r\n  ILookaheadValidationError,\r\n  IOrAlt,\r\n  Rule,\r\n  TokenType,\r\n  OptionalProductionType\r\n} from \"@chevrotain/types\"\r\nimport flatMap from \"lodash/flatMap\"\r\nimport isEmpty from \"lodash/isEmpty\"\r\nimport { defaultGrammarValidatorErrorProvider } from \"../errors_public\"\r\nimport { DEFAULT_PARSER_CONFIG } from \"../parser/parser\"\r\nimport {\r\n  validateAmbiguousAlternationAlternatives,\r\n  validateEmptyOrAlternative,\r\n  validateNoLeftRecursion,\r\n  validateSomeNonEmptyLookaheadPath\r\n} from \"./checks\"\r\nimport {\r\n  buildAlternativesLookAheadFunc,\r\n  buildLookaheadFuncForOptionalProd,\r\n  buildLookaheadFuncForOr,\r\n  buildSingleAlternativeLookaheadFunction,\r\n  getProdType\r\n} from \"./lookahead\"\r\nimport { IParserDefinitionError } from \"./types\"\r\n\r\nexport class LLkLookaheadStrategy implements ILookaheadStrategy {\r\n  readonly maxLookahead: number\r\n\r\n  constructor(options?: { maxLookahead?: number }) {\r\n    this.maxLookahead =\r\n      options?.maxLookahead ?? DEFAULT_PARSER_CONFIG.maxLookahead\r\n  }\r\n\r\n  validate(options: {\r\n    rules: Rule[]\r\n    tokenTypes: TokenType[]\r\n    grammarName: string\r\n  }): ILookaheadValidationError[] {\r\n    const leftRecursionErrors = this.validateNoLeftRecursion(options.rules)\r\n\r\n    if (isEmpty(leftRecursionErrors)) {\r\n      const emptyAltErrors = this.validateEmptyOrAlternatives(options.rules)\r\n      const ambiguousAltsErrors = this.validateAmbiguousAlternationAlternatives(\r\n        options.rules,\r\n        this.maxLookahead\r\n      )\r\n      const emptyRepetitionErrors = this.validateSomeNonEmptyLookaheadPath(\r\n        options.rules,\r\n        this.maxLookahead\r\n      )\r\n      const allErrors = [\r\n        ...leftRecursionErrors,\r\n        ...emptyAltErrors,\r\n        ...ambiguousAltsErrors,\r\n        ...emptyRepetitionErrors\r\n      ]\r\n      return allErrors\r\n    }\r\n    return leftRecursionErrors\r\n  }\r\n\r\n  validateNoLeftRecursion(rules: Rule[]): IParserDefinitionError[] {\r\n    return flatMap(rules, (currTopRule) =>\r\n      validateNoLeftRecursion(\r\n        currTopRule,\r\n        currTopRule,\r\n        defaultGrammarValidatorErrorProvider\r\n      )\r\n    )\r\n  }\r\n\r\n  validateEmptyOrAlternatives(rules: Rule[]): IParserDefinitionError[] {\r\n    return flatMap(rules, (currTopRule) =>\r\n      validateEmptyOrAlternative(\r\n        currTopRule,\r\n        defaultGrammarValidatorErrorProvider\r\n      )\r\n    )\r\n  }\r\n\r\n  validateAmbiguousAlternationAlternatives(\r\n    rules: Rule[],\r\n    maxLookahead: number\r\n  ): IParserDefinitionError[] {\r\n    return flatMap(rules, (currTopRule) =>\r\n      validateAmbiguousAlternationAlternatives(\r\n        currTopRule,\r\n        maxLookahead,\r\n        defaultGrammarValidatorErrorProvider\r\n      )\r\n    )\r\n  }\r\n\r\n  validateSomeNonEmptyLookaheadPath(\r\n    rules: Rule[],\r\n    maxLookahead: number\r\n  ): IParserDefinitionError[] {\r\n    return validateSomeNonEmptyLookaheadPath(\r\n      rules,\r\n      maxLookahead,\r\n      defaultGrammarValidatorErrorProvider\r\n    )\r\n  }\r\n\r\n  buildLookaheadForAlternation(options: {\r\n    prodOccurrence: number\r\n    rule: Rule\r\n    maxLookahead: number\r\n    hasPredicates: boolean\r\n    dynamicTokensEnabled: boolean\r\n  }): (orAlts?: IOrAlt<any>[] | undefined) => number | undefined {\r\n    return buildLookaheadFuncForOr(\r\n      options.prodOccurrence,\r\n      options.rule,\r\n      options.maxLookahead,\r\n      options.hasPredicates,\r\n      options.dynamicTokensEnabled,\r\n      buildAlternativesLookAheadFunc\r\n    )\r\n  }\r\n\r\n  buildLookaheadForOptional(options: {\r\n    prodOccurrence: number\r\n    prodType: OptionalProductionType\r\n    rule: Rule\r\n    maxLookahead: number\r\n    dynamicTokensEnabled: boolean\r\n  }): () => boolean {\r\n    return buildLookaheadFuncForOptionalProd(\r\n      options.prodOccurrence,\r\n      options.rule,\r\n      options.maxLookahead,\r\n      options.dynamicTokensEnabled,\r\n      getProdType(options.prodType),\r\n      buildSingleAlternativeLookaheadFunction\r\n    )\r\n  }\r\n}\r\n", "import forEach from \"lodash/forEach\"\r\nimport has from \"lodash/has\"\r\nimport { DEFAULT_PARSER_CONFIG } from \"../parser\"\r\nimport {\r\n  ILookaheadStrategy,\r\n  IParserConfig,\r\n  OptionalProductionType\r\n} from \"@chevrotain/types\"\r\nimport {\r\n  AT_LEAST_ONE_IDX,\r\n  AT_LEAST_ONE_SEP_IDX,\r\n  getKeyForAutomaticLookahead,\r\n  MANY_IDX,\r\n  MANY_SEP_IDX,\r\n  OPTION_IDX,\r\n  OR_IDX\r\n} from \"../../grammar/keys\"\r\nimport { MixedInParser } from \"./parser_traits\"\r\nimport {\r\n  Alternation,\r\n  GAstVisitor,\r\n  Option,\r\n  Repetition,\r\n  RepetitionMandatory,\r\n  RepetitionMandatoryWithSeparator,\r\n  RepetitionWithSeparator,\r\n  Rule\r\n} from \"@chevrotain/gast\"\r\nimport { getProductionDslName } from \"@chevrotain/gast\"\r\nimport { LLkLookaheadStrategy } from \"../../grammar/llk_lookahead\"\r\n\r\n/**\r\n * Trait responsible for the lookahead related utilities and optimizations.\r\n */\r\nexport class LooksAhead {\r\n  maxLookahead: number\r\n  lookAheadFuncsCache: any\r\n  dynamicTokensEnabled: boolean\r\n  lookaheadStrategy: ILookaheadStrategy\r\n\r\n  initLooksAhead(config: IParserConfig) {\r\n    this.dynamicTokensEnabled = has(config, \"dynamicTokensEnabled\")\r\n      ? (config.dynamicTokensEnabled as boolean) // assumes end user provides the correct config value/type\r\n      : DEFAULT_PARSER_CONFIG.dynamicTokensEnabled\r\n\r\n    this.maxLookahead = has(config, \"maxLookahead\")\r\n      ? (config.maxLookahead as number) // assumes end user provides the correct config value/type\r\n      : DEFAULT_PARSER_CONFIG.maxLookahead\r\n\r\n    this.lookaheadStrategy = has(config, \"lookaheadStrategy\")\r\n      ? (config.lookaheadStrategy as ILookaheadStrategy) // assumes end user provides the correct config value/type\r\n      : new LLkLookaheadStrategy({ maxLookahead: this.maxLookahead })\r\n\r\n    this.lookAheadFuncsCache = new Map()\r\n  }\r\n\r\n  preComputeLookaheadFunctions(this: MixedInParser, rules: Rule[]): void {\r\n    forEach(rules, (currRule) => {\r\n      this.TRACE_INIT(`${currRule.name} Rule Lookahead`, () => {\r\n        const {\r\n          alternation,\r\n          repetition,\r\n          option,\r\n          repetitionMandatory,\r\n          repetitionMandatoryWithSeparator,\r\n          repetitionWithSeparator\r\n        } = collectMethods(currRule)\r\n\r\n        forEach(alternation, (currProd) => {\r\n          const prodIdx = currProd.idx === 0 ? \"\" : currProd.idx\r\n          this.TRACE_INIT(`${getProductionDslName(currProd)}${prodIdx}`, () => {\r\n            const laFunc = this.lookaheadStrategy.buildLookaheadForAlternation({\r\n              prodOccurrence: currProd.idx,\r\n              rule: currRule,\r\n              maxLookahead: currProd.maxLookahead || this.maxLookahead,\r\n              hasPredicates: currProd.hasPredicates,\r\n              dynamicTokensEnabled: this.dynamicTokensEnabled\r\n            })\r\n\r\n            const key = getKeyForAutomaticLookahead(\r\n              this.fullRuleNameToShort[currRule.name],\r\n              OR_IDX,\r\n              currProd.idx\r\n            )\r\n            this.setLaFuncCache(key, laFunc)\r\n          })\r\n        })\r\n\r\n        forEach(repetition, (currProd) => {\r\n          this.computeLookaheadFunc(\r\n            currRule,\r\n            currProd.idx,\r\n            MANY_IDX,\r\n            \"Repetition\",\r\n            currProd.maxLookahead,\r\n            getProductionDslName(currProd)\r\n          )\r\n        })\r\n\r\n        forEach(option, (currProd) => {\r\n          this.computeLookaheadFunc(\r\n            currRule,\r\n            currProd.idx,\r\n            OPTION_IDX,\r\n            \"Option\",\r\n            currProd.maxLookahead,\r\n            getProductionDslName(currProd)\r\n          )\r\n        })\r\n\r\n        forEach(repetitionMandatory, (currProd) => {\r\n          this.computeLookaheadFunc(\r\n            currRule,\r\n            currProd.idx,\r\n            AT_LEAST_ONE_IDX,\r\n            \"RepetitionMandatory\",\r\n            currProd.maxLookahead,\r\n            getProductionDslName(currProd)\r\n          )\r\n        })\r\n\r\n        forEach(repetitionMandatoryWithSeparator, (currProd) => {\r\n          this.computeLookaheadFunc(\r\n            currRule,\r\n            currProd.idx,\r\n            AT_LEAST_ONE_SEP_IDX,\r\n            \"RepetitionMandatoryWithSeparator\",\r\n            currProd.maxLookahead,\r\n            getProductionDslName(currProd)\r\n          )\r\n        })\r\n\r\n        forEach(repetitionWithSeparator, (currProd) => {\r\n          this.computeLookaheadFunc(\r\n            currRule,\r\n            currProd.idx,\r\n            MANY_SEP_IDX,\r\n            \"RepetitionWithSeparator\",\r\n            currProd.maxLookahead,\r\n            getProductionDslName(currProd)\r\n          )\r\n        })\r\n      })\r\n    })\r\n  }\r\n\r\n  computeLookaheadFunc(\r\n    this: MixedInParser,\r\n    rule: Rule,\r\n    prodOccurrence: number,\r\n    prodKey: number,\r\n    prodType: OptionalProductionType,\r\n    prodMaxLookahead: number | undefined,\r\n    dslMethodName: string\r\n  ): void {\r\n    this.TRACE_INIT(\r\n      `${dslMethodName}${prodOccurrence === 0 ? \"\" : prodOccurrence}`,\r\n      () => {\r\n        const laFunc = this.lookaheadStrategy.buildLookaheadForOptional({\r\n          prodOccurrence,\r\n          rule,\r\n          maxLookahead: prodMaxLookahead || this.maxLookahead,\r\n          dynamicTokensEnabled: this.dynamicTokensEnabled,\r\n          prodType\r\n        })\r\n        const key = getKeyForAutomaticLookahead(\r\n          this.fullRuleNameToShort[rule.name],\r\n          prodKey,\r\n          prodOccurrence\r\n        )\r\n        this.setLaFuncCache(key, laFunc)\r\n      }\r\n    )\r\n  }\r\n\r\n  // this actually returns a number, but it is always used as a string (object prop key)\r\n  getKeyForAutomaticLookahead(\r\n    this: MixedInParser,\r\n    dslMethodIdx: number,\r\n    occurrence: number\r\n  ): number {\r\n    const currRuleShortName: any = this.getLastExplicitRuleShortName()\r\n    return getKeyForAutomaticLookahead(\r\n      currRuleShortName,\r\n      dslMethodIdx,\r\n      occurrence\r\n    )\r\n  }\r\n\r\n  getLaFuncFromCache(this: MixedInParser, key: number): Function {\r\n    return this.lookAheadFuncsCache.get(key)\r\n  }\r\n\r\n  /* istanbul ignore next */\r\n  setLaFuncCache(this: MixedInParser, key: number, value: Function): void {\r\n    this.lookAheadFuncsCache.set(key, value)\r\n  }\r\n}\r\n\r\nclass DslMethodsCollectorVisitor extends GAstVisitor {\r\n  public dslMethods: {\r\n    option: Option[]\r\n    alternation: Alternation[]\r\n    repetition: Repetition[]\r\n    repetitionWithSeparator: RepetitionWithSeparator[]\r\n    repetitionMandatory: RepetitionMandatory[]\r\n    repetitionMandatoryWithSeparator: RepetitionMandatoryWithSeparator[]\r\n  } = {\r\n    option: [],\r\n    alternation: [],\r\n    repetition: [],\r\n    repetitionWithSeparator: [],\r\n    repetitionMandatory: [],\r\n    repetitionMandatoryWithSeparator: []\r\n  }\r\n\r\n  reset() {\r\n    this.dslMethods = {\r\n      option: [],\r\n      alternation: [],\r\n      repetition: [],\r\n      repetitionWithSeparator: [],\r\n      repetitionMandatory: [],\r\n      repetitionMandatoryWithSeparator: []\r\n    }\r\n  }\r\n\r\n  public visitOption(option: Option): void {\r\n    this.dslMethods.option.push(option)\r\n  }\r\n\r\n  public visitRepetitionWithSeparator(manySep: RepetitionWithSeparator): void {\r\n    this.dslMethods.repetitionWithSeparator.push(manySep)\r\n  }\r\n\r\n  public visitRepetitionMandatory(atLeastOne: RepetitionMandatory): void {\r\n    this.dslMethods.repetitionMandatory.push(atLeastOne)\r\n  }\r\n\r\n  public visitRepetitionMandatoryWithSeparator(\r\n    atLeastOneSep: RepetitionMandatoryWithSeparator\r\n  ): void {\r\n    this.dslMethods.repetitionMandatoryWithSeparator.push(atLeastOneSep)\r\n  }\r\n\r\n  public visitRepetition(many: Repetition): void {\r\n    this.dslMethods.repetition.push(many)\r\n  }\r\n\r\n  public visitAlternation(or: Alternation): void {\r\n    this.dslMethods.alternation.push(or)\r\n  }\r\n}\r\n\r\nconst collectorVisitor = new DslMethodsCollectorVisitor()\r\nexport function collectMethods(rule: Rule): {\r\n  option: Option[]\r\n  alternation: Alternation[]\r\n  repetition: Repetition[]\r\n  repetitionWithSeparator: RepetitionWithSeparator[]\r\n  repetitionMandatory: RepetitionMandatory[]\r\n  repetitionMandatoryWithSeparator: RepetitionMandatoryWithSeparator[]\r\n} {\r\n  collectorVisitor.reset()\r\n  rule.accept(collectorVisitor)\r\n  const dslMethods = collectorVisitor.dslMethods\r\n  // avoid uncleaned references\r\n  collectorVisitor.reset()\r\n  return <any>dslMethods\r\n}\r\n", "import { CstNode, CstNodeLocation, IToken } from \"@chevrotain/types\"\r\n\r\n/**\r\n * This nodeLocation tracking is not efficient and should only be used\r\n * when error recovery is enabled or the Token Vector contains virtual Tokens\r\n * (e.g, Python Indent/Outdent)\r\n * As it executes the calculation for every single terminal/nonTerminal\r\n * and does not rely on the fact the token vector is **sorted**\r\n */\r\nexport function setNodeLocationOnlyOffset(\r\n  currNodeLocation: CstNodeLocation,\r\n  newLocationInfo: Required<Pick<IToken, \"startOffset\" | \"endOffset\">>\r\n): void {\r\n  // First (valid) update for this cst node\r\n  if (isNaN(currNodeLocation.startOffset) === true) {\r\n    // assumption1: Token location information is either NaN or a valid number\r\n    // assumption2: Token location information is fully valid if it exist\r\n    // (both start/end offsets exist and are numbers).\r\n    currNodeLocation.startOffset = newLocationInfo.startOffset\r\n    currNodeLocation.endOffset = newLocationInfo.endOffset\r\n  }\r\n  // Once the startOffset has been updated with a valid number it should never receive\r\n  // any farther updates as the Token vector is sorted.\r\n  // We still have to check this this condition for every new possible location info\r\n  // because with error recovery enabled we may encounter invalid tokens (NaN location props)\r\n  else if (currNodeLocation.endOffset! < newLocationInfo.endOffset === true) {\r\n    currNodeLocation.endOffset = newLocationInfo.endOffset\r\n  }\r\n}\r\n\r\n/**\r\n * This nodeLocation tracking is not efficient and should only be used\r\n * when error recovery is enabled or the Token Vector contains virtual Tokens\r\n * (e.g, Python Indent/Outdent)\r\n * As it executes the calculation for every single terminal/nonTerminal\r\n * and does not rely on the fact the token vector is **sorted**\r\n */\r\nexport function setNodeLocationFull(\r\n  currNodeLocation: CstNodeLocation,\r\n  newLocationInfo: CstNodeLocation\r\n): void {\r\n  // First (valid) update for this cst node\r\n  if (isNaN(currNodeLocation.startOffset) === true) {\r\n    // assumption1: Token location information is either NaN or a valid number\r\n    // assumption2: Token location information is fully valid if it exist\r\n    // (all start/end props exist and are numbers).\r\n    currNodeLocation.startOffset = newLocationInfo.startOffset\r\n    currNodeLocation.startColumn = newLocationInfo.startColumn\r\n    currNodeLocation.startLine = newLocationInfo.startLine\r\n    currNodeLocation.endOffset = newLocationInfo.endOffset\r\n    currNodeLocation.endColumn = newLocationInfo.endColumn\r\n    currNodeLocation.endLine = newLocationInfo.endLine\r\n  }\r\n  // Once the start props has been updated with a valid number it should never receive\r\n  // any farther updates as the Token vector is sorted.\r\n  // We still have to check this this condition for every new possible location info\r\n  // because with error recovery enabled we may encounter invalid tokens (NaN location props)\r\n  else if (currNodeLocation.endOffset! < newLocationInfo.endOffset! === true) {\r\n    currNodeLocation.endOffset = newLocationInfo.endOffset\r\n    currNodeLocation.endColumn = newLocationInfo.endColumn\r\n    currNodeLocation.endLine = newLocationInfo.endLine\r\n  }\r\n}\r\n\r\nexport function addTerminalToCst(\r\n  node: CstNode,\r\n  token: IToken,\r\n  tokenTypeName: string\r\n): void {\r\n  if (node.children[tokenTypeName] === undefined) {\r\n    node.children[tokenTypeName] = [token]\r\n  } else {\r\n    node.children[tokenTypeName].push(token)\r\n  }\r\n}\r\n\r\nexport function addNoneTerminalToCst(\r\n  node: CstNode,\r\n  ruleName: string,\r\n  ruleResult: any\r\n): void {\r\n  if (node.children[ruleName] === undefined) {\r\n    node.children[ruleName] = [ruleResult]\r\n  } else {\r\n    node.children[ruleName].push(ruleResult)\r\n  }\r\n}\r\n", "const NAME = \"name\"\r\n\r\nexport function defineNameProp(obj: {}, nameValue: string): void {\r\n  Object.defineProperty(obj, NAME, {\r\n    enumerable: false,\r\n    configurable: true,\r\n    writable: false,\r\n    value: nameValue\r\n  })\r\n}\r\n", "import isEmpty from \"lodash/isEmpty\"\r\nimport compact from \"lodash/compact\"\r\nimport isArray from \"lodash/isArray\"\r\nimport map from \"lodash/map\"\r\nimport forEach from \"lodash/forEach\"\r\nimport filter from \"lodash/filter\"\r\nimport keys from \"lodash/keys\"\r\nimport isFunction from \"lodash/isFunction\"\r\nimport isUndefined from \"lodash/isUndefined\"\r\nimport { defineNameProp } from \"../../lang/lang_extensions\"\r\nimport { CstNode, ICstVisitor } from \"@chevrotain/types\"\r\n\r\nexport function defaultVisit<IN>(ctx: any, param: IN): void {\r\n  const childrenNames = keys(ctx)\r\n  const childrenNamesLength = childrenNames.length\r\n  for (let i = 0; i < childrenNamesLength; i++) {\r\n    const currChildName = childrenNames[i]\r\n    const currChildArray = ctx[currChildName]\r\n    const currChildArrayLength = currChildArray.length\r\n    for (let j = 0; j < currChildArrayLength; j++) {\r\n      const currChild: any = currChildArray[j]\r\n      // distinction between Tokens Children and CstNode children\r\n      if (currChild.tokenTypeIdx === undefined) {\r\n        this[currChild.name](currChild.children, param)\r\n      }\r\n    }\r\n  }\r\n  // defaultVisit does not support generic out param\r\n}\r\n\r\nexport function createBaseSemanticVisitorConstructor(\r\n  grammarName: string,\r\n  ruleNames: string[]\r\n): {\r\n  new (...args: any[]): ICstVisitor<any, any>\r\n} {\r\n  const derivedConstructor: any = function () {}\r\n\r\n  // can be overwritten according to:\r\n  // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/\r\n  // name?redirectlocale=en-US&redirectslug=JavaScript%2FReference%2FGlobal_Objects%2FFunction%2Fname\r\n  defineNameProp(derivedConstructor, grammarName + \"BaseSemantics\")\r\n\r\n  const semanticProto = {\r\n    visit: function (cstNode: CstNode | CstNode[], param: any) {\r\n      // enables writing more concise visitor methods when CstNode has only a single child\r\n      if (isArray(cstNode)) {\r\n        // A CST Node's children dictionary can never have empty arrays as values\r\n        // If a key is defined there will be at least one element in the corresponding value array.\r\n        cstNode = cstNode[0]\r\n      }\r\n\r\n      // enables passing optional CstNodes concisely.\r\n      if (isUndefined(cstNode)) {\r\n        return undefined\r\n      }\r\n\r\n      return this[cstNode.name](cstNode.children, param)\r\n    },\r\n\r\n    validateVisitor: function () {\r\n      const semanticDefinitionErrors = validateVisitor(this, ruleNames)\r\n      if (!isEmpty(semanticDefinitionErrors)) {\r\n        const errorMessages = map(\r\n          semanticDefinitionErrors,\r\n          (currDefError) => currDefError.msg\r\n        )\r\n        throw Error(\r\n          `Errors Detected in CST Visitor <${this.constructor.name}>:\\n\\t` +\r\n            `${errorMessages.join(\"\\n\\n\").replace(/\\n/g, \"\\n\\t\")}`\r\n        )\r\n      }\r\n    }\r\n  }\r\n\r\n  derivedConstructor.prototype = semanticProto\r\n  derivedConstructor.prototype.constructor = derivedConstructor\r\n\r\n  derivedConstructor._RULE_NAMES = ruleNames\r\n\r\n  return derivedConstructor\r\n}\r\n\r\nexport function createBaseVisitorConstructorWithDefaults(\r\n  grammarName: string,\r\n  ruleNames: string[],\r\n  baseConstructor: Function\r\n): {\r\n  new (...args: any[]): ICstVisitor<any, any>\r\n} {\r\n  const derivedConstructor: any = function () {}\r\n\r\n  // can be overwritten according to:\r\n  // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/\r\n  // name?redirectlocale=en-US&redirectslug=JavaScript%2FReference%2FGlobal_Objects%2FFunction%2Fname\r\n  defineNameProp(derivedConstructor, grammarName + \"BaseSemanticsWithDefaults\")\r\n\r\n  const withDefaultsProto = Object.create(baseConstructor.prototype)\r\n  forEach(ruleNames, (ruleName) => {\r\n    withDefaultsProto[ruleName] = defaultVisit\r\n  })\r\n\r\n  derivedConstructor.prototype = withDefaultsProto\r\n  derivedConstructor.prototype.constructor = derivedConstructor\r\n\r\n  return derivedConstructor\r\n}\r\n\r\nexport enum CstVisitorDefinitionError {\r\n  REDUNDANT_METHOD,\r\n  MISSING_METHOD\r\n}\r\n\r\nexport interface IVisitorDefinitionError {\r\n  msg: string\r\n  type: CstVisitorDefinitionError\r\n  methodName: string\r\n}\r\n\r\nexport function validateVisitor(\r\n  visitorInstance: ICstVisitor<unknown, unknown>,\r\n  ruleNames: string[]\r\n): IVisitorDefinitionError[] {\r\n  const missingErrors = validateMissingCstMethods(visitorInstance, ruleNames)\r\n\r\n  return missingErrors\r\n}\r\n\r\nexport function validateMissingCstMethods(\r\n  visitorInstance: ICstVisitor<unknown, unknown>,\r\n  ruleNames: string[]\r\n): IVisitorDefinitionError[] {\r\n  const missingRuleNames = filter(ruleNames, (currRuleName) => {\r\n    return isFunction((visitorInstance as any)[currRuleName]) === false\r\n  })\r\n\r\n  const errors: IVisitorDefinitionError[] = map(\r\n    missingRuleNames,\r\n    (currRuleName) => {\r\n      return {\r\n        msg: `Missing visitor method: <${currRuleName}> on ${<any>(\r\n          visitorInstance.constructor.name\r\n        )} CST Visitor.`,\r\n        type: CstVisitorDefinitionError.MISSING_METHOD,\r\n        methodName: currRuleName\r\n      }\r\n    }\r\n  )\r\n\r\n  return compact<IVisitorDefinitionError>(errors)\r\n}\r\n", "import {\r\n  addNoneTerminalToCst,\r\n  addTerminalToCst,\r\n  setNodeLocationFull,\r\n  setNodeLocationOnlyOffset\r\n} from \"../../cst/cst\"\r\nimport noop from \"lodash/noop\"\r\nimport has from \"lodash/has\"\r\nimport keys from \"lodash/keys\"\r\nimport isUndefined from \"lodash/isUndefined\"\r\nimport {\r\n  createBaseSemanticVisitorConstructor,\r\n  createBaseVisitorConstructorWithDefaults\r\n} from \"../../cst/cst_visitor\"\r\nimport {\r\n  CstNode,\r\n  CstNodeLocation,\r\n  ICstVisitor,\r\n  IParserConfig,\r\n  IToken,\r\n  nodeLocationTrackingOptions\r\n} from \"@chevrotain/types\"\r\nimport { MixedInParser } from \"./parser_traits\"\r\nimport { DEFAULT_PARSER_CONFIG } from \"../parser\"\r\n\r\n/**\r\n * This trait is responsible for the CST building logic.\r\n */\r\nexport class TreeBuilder {\r\n  outputCst: boolean\r\n  CST_STACK: CstNode[]\r\n  baseCstVisitorConstructor: Function\r\n  baseCstVisitorWithDefaultsConstructor: Function\r\n\r\n  // dynamically assigned Methods\r\n  setNodeLocationFromNode: (\r\n    nodeLocation: CstNodeLocation,\r\n    locationInformation: CstNodeLocation\r\n  ) => void\r\n  setNodeLocationFromToken: (\r\n    nodeLocation: CstNodeLocation,\r\n    locationInformation: CstNodeLocation\r\n  ) => void\r\n  cstPostRule: (this: MixedInParser, ruleCstNode: CstNode) => void\r\n\r\n  setInitialNodeLocation: (cstNode: CstNode) => void\r\n  nodeLocationTracking: nodeLocationTrackingOptions\r\n\r\n  initTreeBuilder(this: MixedInParser, config: IParserConfig) {\r\n    this.CST_STACK = []\r\n\r\n    // outputCst is no longer exposed/defined in the pubic API\r\n    this.outputCst = (config as any).outputCst\r\n\r\n    this.nodeLocationTracking = has(config, \"nodeLocationTracking\")\r\n      ? (config.nodeLocationTracking as nodeLocationTrackingOptions) // assumes end user provides the correct config value/type\r\n      : DEFAULT_PARSER_CONFIG.nodeLocationTracking\r\n\r\n    if (!this.outputCst) {\r\n      this.cstInvocationStateUpdate = noop\r\n      this.cstFinallyStateUpdate = noop\r\n      this.cstPostTerminal = noop\r\n      this.cstPostNonTerminal = noop\r\n      this.cstPostRule = noop\r\n    } else {\r\n      if (/full/i.test(this.nodeLocationTracking)) {\r\n        if (this.recoveryEnabled) {\r\n          this.setNodeLocationFromToken = setNodeLocationFull\r\n          this.setNodeLocationFromNode = setNodeLocationFull\r\n          this.cstPostRule = noop\r\n          this.setInitialNodeLocation = this.setInitialNodeLocationFullRecovery\r\n        } else {\r\n          this.setNodeLocationFromToken = noop\r\n          this.setNodeLocationFromNode = noop\r\n          this.cstPostRule = this.cstPostRuleFull\r\n          this.setInitialNodeLocation = this.setInitialNodeLocationFullRegular\r\n        }\r\n      } else if (/onlyOffset/i.test(this.nodeLocationTracking)) {\r\n        if (this.recoveryEnabled) {\r\n          this.setNodeLocationFromToken = <any>setNodeLocationOnlyOffset\r\n          this.setNodeLocationFromNode = <any>setNodeLocationOnlyOffset\r\n          this.cstPostRule = noop\r\n          this.setInitialNodeLocation =\r\n            this.setInitialNodeLocationOnlyOffsetRecovery\r\n        } else {\r\n          this.setNodeLocationFromToken = noop\r\n          this.setNodeLocationFromNode = noop\r\n          this.cstPostRule = this.cstPostRuleOnlyOffset\r\n          this.setInitialNodeLocation =\r\n            this.setInitialNodeLocationOnlyOffsetRegular\r\n        }\r\n      } else if (/none/i.test(this.nodeLocationTracking)) {\r\n        this.setNodeLocationFromToken = noop\r\n        this.setNodeLocationFromNode = noop\r\n        this.cstPostRule = noop\r\n        this.setInitialNodeLocation = noop\r\n      } else {\r\n        throw Error(\r\n          `Invalid <nodeLocationTracking> config option: \"${config.nodeLocationTracking}\"`\r\n        )\r\n      }\r\n    }\r\n  }\r\n\r\n  setInitialNodeLocationOnlyOffsetRecovery(\r\n    this: MixedInParser,\r\n    cstNode: any\r\n  ): void {\r\n    cstNode.location = {\r\n      startOffset: NaN,\r\n      endOffset: NaN\r\n    }\r\n  }\r\n\r\n  setInitialNodeLocationOnlyOffsetRegular(\r\n    this: MixedInParser,\r\n    cstNode: any\r\n  ): void {\r\n    cstNode.location = {\r\n      // without error recovery the starting Location of a new CstNode is guaranteed\r\n      // To be the next Token's startOffset (for valid inputs).\r\n      // For invalid inputs there won't be any CSTOutput so this potential\r\n      // inaccuracy does not matter\r\n      startOffset: this.LA(1).startOffset,\r\n      endOffset: NaN\r\n    }\r\n  }\r\n\r\n  setInitialNodeLocationFullRecovery(this: MixedInParser, cstNode: any): void {\r\n    cstNode.location = {\r\n      startOffset: NaN,\r\n      startLine: NaN,\r\n      startColumn: NaN,\r\n      endOffset: NaN,\r\n      endLine: NaN,\r\n      endColumn: NaN\r\n    }\r\n  }\r\n\r\n  /**\r\n     *  @see setInitialNodeLocationOnlyOffsetRegular for explanation why this work\r\n\r\n     * @param cstNode\r\n     */\r\n  setInitialNodeLocationFullRegular(this: MixedInParser, cstNode: any): void {\r\n    const nextToken = this.LA(1)\r\n    cstNode.location = {\r\n      startOffset: nextToken.startOffset,\r\n      startLine: nextToken.startLine,\r\n      startColumn: nextToken.startColumn,\r\n      endOffset: NaN,\r\n      endLine: NaN,\r\n      endColumn: NaN\r\n    }\r\n  }\r\n\r\n  cstInvocationStateUpdate(this: MixedInParser, fullRuleName: string): void {\r\n    const cstNode: CstNode = {\r\n      name: fullRuleName,\r\n      children: Object.create(null)\r\n    }\r\n\r\n    this.setInitialNodeLocation(cstNode)\r\n    this.CST_STACK.push(cstNode)\r\n  }\r\n\r\n  cstFinallyStateUpdate(this: MixedInParser): void {\r\n    this.CST_STACK.pop()\r\n  }\r\n\r\n  cstPostRuleFull(this: MixedInParser, ruleCstNode: CstNode): void {\r\n    // casts to `required<CstNodeLocation>` are safe because `cstPostRuleFull` should only be invoked when full location is enabled\r\n    const prevToken = this.LA(0) as Required<CstNodeLocation>\r\n    const loc = ruleCstNode.location as Required<CstNodeLocation>\r\n\r\n    // If this condition is true it means we consumed at least one Token\r\n    // In this CstNode.\r\n    if (loc.startOffset <= prevToken.startOffset === true) {\r\n      loc.endOffset = prevToken.endOffset\r\n      loc.endLine = prevToken.endLine\r\n      loc.endColumn = prevToken.endColumn\r\n    }\r\n    // \"empty\" CstNode edge case\r\n    else {\r\n      loc.startOffset = NaN\r\n      loc.startLine = NaN\r\n      loc.startColumn = NaN\r\n    }\r\n  }\r\n\r\n  cstPostRuleOnlyOffset(this: MixedInParser, ruleCstNode: CstNode): void {\r\n    const prevToken = this.LA(0)\r\n    // `location' is not null because `cstPostRuleOnlyOffset` will only be invoked when location tracking is enabled.\r\n    const loc = ruleCstNode.location!\r\n\r\n    // If this condition is true it means we consumed at least one Token\r\n    // In this CstNode.\r\n    if (loc.startOffset <= prevToken.startOffset === true) {\r\n      loc.endOffset = prevToken.endOffset\r\n    }\r\n    // \"empty\" CstNode edge case\r\n    else {\r\n      loc.startOffset = NaN\r\n    }\r\n  }\r\n\r\n  cstPostTerminal(\r\n    this: MixedInParser,\r\n    key: string,\r\n    consumedToken: IToken\r\n  ): void {\r\n    const rootCst = this.CST_STACK[this.CST_STACK.length - 1]\r\n    addTerminalToCst(rootCst, consumedToken, key)\r\n    // This is only used when **both** error recovery and CST Output are enabled.\r\n    this.setNodeLocationFromToken(rootCst.location!, <any>consumedToken)\r\n  }\r\n\r\n  cstPostNonTerminal(\r\n    this: MixedInParser,\r\n    ruleCstResult: CstNode,\r\n    ruleName: string\r\n  ): void {\r\n    const preCstNode = this.CST_STACK[this.CST_STACK.length - 1]\r\n    addNoneTerminalToCst(preCstNode, ruleName, ruleCstResult)\r\n    // This is only used when **both** error recovery and CST Output are enabled.\r\n    this.setNodeLocationFromNode(preCstNode.location!, ruleCstResult.location!)\r\n  }\r\n\r\n  getBaseCstVisitorConstructor<IN = any, OUT = any>(\r\n    this: MixedInParser\r\n  ): {\r\n    new (...args: any[]): ICstVisitor<IN, OUT>\r\n  } {\r\n    if (isUndefined(this.baseCstVisitorConstructor)) {\r\n      const newBaseCstVisitorConstructor = createBaseSemanticVisitorConstructor(\r\n        this.className,\r\n        keys(this.gastProductionsCache)\r\n      )\r\n      this.baseCstVisitorConstructor = newBaseCstVisitorConstructor\r\n      return newBaseCstVisitorConstructor\r\n    }\r\n\r\n    return <any>this.baseCstVisitorConstructor\r\n  }\r\n\r\n  getBaseCstVisitorConstructorWithDefaults<IN = any, OUT = any>(\r\n    this: MixedInParser\r\n  ): {\r\n    new (...args: any[]): ICstVisitor<IN, OUT>\r\n  } {\r\n    if (isUndefined(this.baseCstVisitorWithDefaultsConstructor)) {\r\n      const newConstructor = createBaseVisitorConstructorWithDefaults(\r\n        this.className,\r\n        keys(this.gastProductionsCache),\r\n        this.getBaseCstVisitorConstructor()\r\n      )\r\n      this.baseCstVisitorWithDefaultsConstructor = newConstructor\r\n      return newConstructor\r\n    }\r\n\r\n    return <any>this.baseCstVisitorWithDefaultsConstructor\r\n  }\r\n\r\n  getLastExplicitRuleShortName(this: MixedInParser): number {\r\n    const ruleStack = this.RULE_STACK\r\n    return ruleStack[ruleStack.length - 1]\r\n  }\r\n\r\n  getPreviousExplicitRuleShortName(this: MixedInParser): number {\r\n    const ruleStack = this.RULE_STACK\r\n    return ruleStack[ruleStack.length - 2]\r\n  }\r\n\r\n  getLastExplicitRuleOccurrenceIndex(this: MixedInParser): number {\r\n    const occurrenceStack = this.RULE_OCCURRENCE_STACK\r\n    return occurrenceStack[occurrenceStack.length - 1]\r\n  }\r\n}\r\n", "import { END_OF_FILE } from \"../parser\"\r\nimport { IToken } from \"@chevrotain/types\"\r\nimport { MixedInParser } from \"./parser_traits\"\r\n\r\n/**\r\n * Trait responsible abstracting over the interaction with Lexer output (Token vector).\r\n *\r\n * This could be generalized to support other kinds of lexers, e.g.\r\n * - Just in Time Lexing / Lexer-Less parsing.\r\n * - Streaming Lexer.\r\n */\r\nexport class LexerAdapter {\r\n  tokVector: IToken[]\r\n  tokVectorLength: number\r\n  currIdx: number\r\n\r\n  initLexerAdapter() {\r\n    this.tokVector = []\r\n    this.tokVectorLength = 0\r\n    this.currIdx = -1\r\n  }\r\n\r\n  set input(newInput: IToken[]) {\r\n    // @ts-ignore - `this parameter` not supported in setters/getters\r\n    //   - https://www.typescriptlang.org/docs/handbook/functions.html#this-parameters\r\n    if (this.selfAnalysisDone !== true) {\r\n      throw Error(\r\n        `Missing <performSelfAnalysis> invocation at the end of the Parser's constructor.`\r\n      )\r\n    }\r\n    // @ts-ignore - `this parameter` not supported in setters/getters\r\n    //   - https://www.typescriptlang.org/docs/handbook/functions.html#this-parameters\r\n    this.reset()\r\n    this.tokVector = newInput\r\n    this.tokVectorLength = newInput.length\r\n  }\r\n\r\n  get input(): IToken[] {\r\n    return this.tokVector\r\n  }\r\n\r\n  // skips a token and returns the next token\r\n  SKIP_TOKEN(this: MixedInParser): IToken {\r\n    if (this.currIdx <= this.tokVector.length - 2) {\r\n      this.consumeToken()\r\n      return this.LA(1)\r\n    } else {\r\n      return END_OF_FILE\r\n    }\r\n  }\r\n\r\n  // Lexer (accessing Token vector) related methods which can be overridden to implement lazy lexers\r\n  // or lexers dependent on parser context.\r\n  LA(this: MixedInParser, howMuch: number): IToken {\r\n    const soughtIdx = this.currIdx + howMuch\r\n    if (soughtIdx < 0 || this.tokVectorLength <= soughtIdx) {\r\n      return END_OF_FILE\r\n    } else {\r\n      return this.tokVector[soughtIdx]\r\n    }\r\n  }\r\n\r\n  consumeToken(this: MixedInParser) {\r\n    this.currIdx++\r\n  }\r\n\r\n  exportLexerState(this: MixedInParser): number {\r\n    return this.currIdx\r\n  }\r\n\r\n  importLexerState(this: MixedInParser, newState: number) {\r\n    this.currIdx = newState\r\n  }\r\n\r\n  resetLexerState(this: MixedInParser): void {\r\n    this.currIdx = -1\r\n  }\r\n\r\n  moveToTerminatedState(this: MixedInParser): void {\r\n    this.currIdx = this.tokVector.length - 1\r\n  }\r\n\r\n  getLexerPosition(this: MixedInParser): number {\r\n    return this.exportLexerState()\r\n  }\r\n}\r\n", "import {\r\n  AtLeastOneSepMethodOpts,\r\n  ConsumeMethodOpts,\r\n  DSLMethodOpts,\r\n  DSLMethodOptsWithErr,\r\n  GrammarAction,\r\n  IOrAlt,\r\n  IRuleConfig,\r\n  ISerializedGast,\r\n  IToken,\r\n  ManySepMethodOpts,\r\n  OrMethodOpts,\r\n  SubruleMethodOpts,\r\n  TokenType\r\n} from \"@chevrotain/types\"\r\nimport values from \"lodash/values\"\r\nimport includes from \"lodash/includes\"\r\nimport { isRecognitionException } from \"../../exceptions_public\"\r\nimport { DEFAULT_RULE_CONFIG, ParserDefinitionErrorType } from \"../parser\"\r\nimport { defaultGrammarValidatorErrorProvider } from \"../../errors_public\"\r\nimport { validateRuleIsOverridden } from \"../../grammar/checks\"\r\nimport { MixedInParser } from \"./parser_traits\"\r\nimport { Rule, serializeGrammar } from \"@chevrotain/gast\"\r\nimport { IParserDefinitionError } from \"../../grammar/types\"\r\nimport { ParserMethodInternal } from \"../types\"\r\n\r\n/**\r\n * This trait is responsible for implementing the public API\r\n * for defining Chevrotain parsers, i.e:\r\n * - CONSUME\r\n * - RULE\r\n * - OPTION\r\n * - ...\r\n */\r\nexport class RecognizerApi {\r\n  ACTION<T>(this: MixedInParser, impl: () => T): T {\r\n    return impl.call(this)\r\n  }\r\n\r\n  consume(\r\n    this: MixedInParser,\r\n    idx: number,\r\n    tokType: TokenType,\r\n    options?: ConsumeMethodOpts\r\n  ): IToken {\r\n    return this.consumeInternal(tokType, idx, options)\r\n  }\r\n\r\n  subrule<ARGS extends unknown[], R>(\r\n    this: MixedInParser,\r\n    idx: number,\r\n    ruleToCall: ParserMethodInternal<ARGS, R>,\r\n    options?: SubruleMethodOpts<ARGS>\r\n  ): R {\r\n    return this.subruleInternal(ruleToCall, idx, options)\r\n  }\r\n\r\n  option<OUT>(\r\n    this: MixedInParser,\r\n    idx: number,\r\n    actionORMethodDef: GrammarAction<OUT> | DSLMethodOpts<OUT>\r\n  ): OUT | undefined {\r\n    return this.optionInternal(actionORMethodDef, idx)\r\n  }\r\n\r\n  or(\r\n    this: MixedInParser,\r\n    idx: number,\r\n    altsOrOpts: IOrAlt<any>[] | OrMethodOpts<any>\r\n  ): any {\r\n    return this.orInternal(altsOrOpts, idx)\r\n  }\r\n\r\n  many(\r\n    this: MixedInParser,\r\n    idx: number,\r\n    actionORMethodDef: GrammarAction<any> | DSLMethodOpts<any>\r\n  ): void {\r\n    return this.manyInternal(idx, actionORMethodDef)\r\n  }\r\n\r\n  atLeastOne(\r\n    this: MixedInParser,\r\n    idx: number,\r\n    actionORMethodDef: GrammarAction<any> | DSLMethodOptsWithErr<any>\r\n  ): void {\r\n    return this.atLeastOneInternal(idx, actionORMethodDef)\r\n  }\r\n\r\n  CONSUME(\r\n    this: MixedInParser,\r\n    tokType: TokenType,\r\n    options?: ConsumeMethodOpts\r\n  ): IToken {\r\n    return this.consumeInternal(tokType, 0, options)\r\n  }\r\n\r\n  CONSUME1(\r\n    this: MixedInParser,\r\n    tokType: TokenType,\r\n    options?: ConsumeMethodOpts\r\n  ): IToken {\r\n    return this.consumeInternal(tokType, 1, options)\r\n  }\r\n\r\n  CONSUME2(\r\n    this: MixedInParser,\r\n    tokType: TokenType,\r\n    options?: ConsumeMethodOpts\r\n  ): IToken {\r\n    return this.consumeInternal(tokType, 2, options)\r\n  }\r\n\r\n  CONSUME3(\r\n    this: MixedInParser,\r\n    tokType: TokenType,\r\n    options?: ConsumeMethodOpts\r\n  ): IToken {\r\n    return this.consumeInternal(tokType, 3, options)\r\n  }\r\n\r\n  CONSUME4(\r\n    this: MixedInParser,\r\n    tokType: TokenType,\r\n    options?: ConsumeMethodOpts\r\n  ): IToken {\r\n    return this.consumeInternal(tokType, 4, options)\r\n  }\r\n\r\n  CONSUME5(\r\n    this: MixedInParser,\r\n    tokType: TokenType,\r\n    options?: ConsumeMethodOpts\r\n  ): IToken {\r\n    return this.consumeInternal(tokType, 5, options)\r\n  }\r\n\r\n  CONSUME6(\r\n    this: MixedInParser,\r\n    tokType: TokenType,\r\n    options?: ConsumeMethodOpts\r\n  ): IToken {\r\n    return this.consumeInternal(tokType, 6, options)\r\n  }\r\n\r\n  CONSUME7(\r\n    this: MixedInParser,\r\n    tokType: TokenType,\r\n    options?: ConsumeMethodOpts\r\n  ): IToken {\r\n    return this.consumeInternal(tokType, 7, options)\r\n  }\r\n\r\n  CONSUME8(\r\n    this: MixedInParser,\r\n    tokType: TokenType,\r\n    options?: ConsumeMethodOpts\r\n  ): IToken {\r\n    return this.consumeInternal(tokType, 8, options)\r\n  }\r\n\r\n  CONSUME9(\r\n    this: MixedInParser,\r\n    tokType: TokenType,\r\n    options?: ConsumeMethodOpts\r\n  ): IToken {\r\n    return this.consumeInternal(tokType, 9, options)\r\n  }\r\n\r\n  SUBRULE<ARGS extends unknown[], R>(\r\n    this: MixedInParser,\r\n    ruleToCall: ParserMethodInternal<ARGS, R>,\r\n    options?: SubruleMethodOpts<ARGS>\r\n  ): R {\r\n    return this.subruleInternal(ruleToCall, 0, options)\r\n  }\r\n\r\n  SUBRULE1<ARGS extends unknown[], R>(\r\n    this: MixedInParser,\r\n    ruleToCall: ParserMethodInternal<ARGS, R>,\r\n    options?: SubruleMethodOpts<ARGS>\r\n  ): R {\r\n    return this.subruleInternal(ruleToCall, 1, options)\r\n  }\r\n\r\n  SUBRULE2<ARGS extends unknown[], R>(\r\n    this: MixedInParser,\r\n    ruleToCall: ParserMethodInternal<ARGS, R>,\r\n    options?: SubruleMethodOpts<ARGS>\r\n  ): R {\r\n    return this.subruleInternal(ruleToCall, 2, options)\r\n  }\r\n\r\n  SUBRULE3<ARGS extends unknown[], R>(\r\n    this: MixedInParser,\r\n    ruleToCall: ParserMethodInternal<ARGS, R>,\r\n    options?: SubruleMethodOpts<ARGS>\r\n  ): R {\r\n    return this.subruleInternal(ruleToCall, 3, options)\r\n  }\r\n\r\n  SUBRULE4<ARGS extends unknown[], R>(\r\n    this: MixedInParser,\r\n    ruleToCall: ParserMethodInternal<ARGS, R>,\r\n    options?: SubruleMethodOpts<ARGS>\r\n  ): R {\r\n    return this.subruleInternal(ruleToCall, 4, options)\r\n  }\r\n\r\n  SUBRULE5<ARGS extends unknown[], R>(\r\n    this: MixedInParser,\r\n    ruleToCall: ParserMethodInternal<ARGS, R>,\r\n    options?: SubruleMethodOpts<ARGS>\r\n  ): R {\r\n    return this.subruleInternal(ruleToCall, 5, options)\r\n  }\r\n\r\n  SUBRULE6<ARGS extends unknown[], R>(\r\n    this: MixedInParser,\r\n    ruleToCall: ParserMethodInternal<ARGS, R>,\r\n    options?: SubruleMethodOpts<ARGS>\r\n  ): R {\r\n    return this.subruleInternal(ruleToCall, 6, options)\r\n  }\r\n\r\n  SUBRULE7<ARGS extends unknown[], R>(\r\n    this: MixedInParser,\r\n    ruleToCall: ParserMethodInternal<ARGS, R>,\r\n    options?: SubruleMethodOpts<ARGS>\r\n  ): R {\r\n    return this.subruleInternal(ruleToCall, 7, options)\r\n  }\r\n\r\n  SUBRULE8<ARGS extends unknown[], R>(\r\n    this: MixedInParser,\r\n    ruleToCall: ParserMethodInternal<ARGS, R>,\r\n    options?: SubruleMethodOpts<ARGS>\r\n  ): R {\r\n    return this.subruleInternal(ruleToCall, 8, options)\r\n  }\r\n\r\n  SUBRULE9<ARGS extends unknown[], R>(\r\n    this: MixedInParser,\r\n    ruleToCall: ParserMethodInternal<ARGS, R>,\r\n    options?: SubruleMethodOpts<ARGS>\r\n  ): R {\r\n    return this.subruleInternal(ruleToCall, 9, options)\r\n  }\r\n\r\n  OPTION<OUT>(\r\n    this: MixedInParser,\r\n    actionORMethodDef: GrammarAction<OUT> | DSLMethodOpts<OUT>\r\n  ): OUT | undefined {\r\n    return this.optionInternal(actionORMethodDef, 0)\r\n  }\r\n\r\n  OPTION1<OUT>(\r\n    this: MixedInParser,\r\n    actionORMethodDef: GrammarAction<OUT> | DSLMethodOpts<OUT>\r\n  ): OUT | undefined {\r\n    return this.optionInternal(actionORMethodDef, 1)\r\n  }\r\n\r\n  OPTION2<OUT>(\r\n    this: MixedInParser,\r\n    actionORMethodDef: GrammarAction<OUT> | DSLMethodOpts<OUT>\r\n  ): OUT | undefined {\r\n    return this.optionInternal(actionORMethodDef, 2)\r\n  }\r\n\r\n  OPTION3<OUT>(\r\n    this: MixedInParser,\r\n    actionORMethodDef: GrammarAction<OUT> | DSLMethodOpts<OUT>\r\n  ): OUT | undefined {\r\n    return this.optionInternal(actionORMethodDef, 3)\r\n  }\r\n\r\n  OPTION4<OUT>(\r\n    this: MixedInParser,\r\n    actionORMethodDef: GrammarAction<OUT> | DSLMethodOpts<OUT>\r\n  ): OUT | undefined {\r\n    return this.optionInternal(actionORMethodDef, 4)\r\n  }\r\n\r\n  OPTION5<OUT>(\r\n    this: MixedInParser,\r\n    actionORMethodDef: GrammarAction<OUT> | DSLMethodOpts<OUT>\r\n  ): OUT | undefined {\r\n    return this.optionInternal(actionORMethodDef, 5)\r\n  }\r\n\r\n  OPTION6<OUT>(\r\n    this: MixedInParser,\r\n    actionORMethodDef: GrammarAction<OUT> | DSLMethodOpts<OUT>\r\n  ): OUT | undefined {\r\n    return this.optionInternal(actionORMethodDef, 6)\r\n  }\r\n\r\n  OPTION7<OUT>(\r\n    this: MixedInParser,\r\n    actionORMethodDef: GrammarAction<OUT> | DSLMethodOpts<OUT>\r\n  ): OUT | undefined {\r\n    return this.optionInternal(actionORMethodDef, 7)\r\n  }\r\n\r\n  OPTION8<OUT>(\r\n    this: MixedInParser,\r\n    actionORMethodDef: GrammarAction<OUT> | DSLMethodOpts<OUT>\r\n  ): OUT | undefined {\r\n    return this.optionInternal(actionORMethodDef, 8)\r\n  }\r\n\r\n  OPTION9<OUT>(\r\n    this: MixedInParser,\r\n    actionORMethodDef: GrammarAction<OUT> | DSLMethodOpts<OUT>\r\n  ): OUT | undefined {\r\n    return this.optionInternal(actionORMethodDef, 9)\r\n  }\r\n\r\n  OR<T>(\r\n    this: MixedInParser,\r\n    altsOrOpts: IOrAlt<any>[] | OrMethodOpts<unknown>\r\n  ): T {\r\n    return this.orInternal(altsOrOpts, 0)\r\n  }\r\n\r\n  OR1<T>(\r\n    this: MixedInParser,\r\n    altsOrOpts: IOrAlt<any>[] | OrMethodOpts<unknown>\r\n  ): T {\r\n    return this.orInternal(altsOrOpts, 1)\r\n  }\r\n\r\n  OR2<T>(\r\n    this: MixedInParser,\r\n    altsOrOpts: IOrAlt<any>[] | OrMethodOpts<unknown>\r\n  ): T {\r\n    return this.orInternal(altsOrOpts, 2)\r\n  }\r\n\r\n  OR3<T>(\r\n    this: MixedInParser,\r\n    altsOrOpts: IOrAlt<any>[] | OrMethodOpts<unknown>\r\n  ): T {\r\n    return this.orInternal(altsOrOpts, 3)\r\n  }\r\n\r\n  OR4<T>(\r\n    this: MixedInParser,\r\n    altsOrOpts: IOrAlt<any>[] | OrMethodOpts<unknown>\r\n  ): T {\r\n    return this.orInternal(altsOrOpts, 4)\r\n  }\r\n\r\n  OR5<T>(\r\n    this: MixedInParser,\r\n    altsOrOpts: IOrAlt<any>[] | OrMethodOpts<unknown>\r\n  ): T {\r\n    return this.orInternal(altsOrOpts, 5)\r\n  }\r\n\r\n  OR6<T>(\r\n    this: MixedInParser,\r\n    altsOrOpts: IOrAlt<any>[] | OrMethodOpts<unknown>\r\n  ): T {\r\n    return this.orInternal(altsOrOpts, 6)\r\n  }\r\n\r\n  OR7<T>(\r\n    this: MixedInParser,\r\n    altsOrOpts: IOrAlt<any>[] | OrMethodOpts<unknown>\r\n  ): T {\r\n    return this.orInternal(altsOrOpts, 7)\r\n  }\r\n\r\n  OR8<T>(\r\n    this: MixedInParser,\r\n    altsOrOpts: IOrAlt<any>[] | OrMethodOpts<unknown>\r\n  ): T {\r\n    return this.orInternal(altsOrOpts, 8)\r\n  }\r\n\r\n  OR9<T>(\r\n    this: MixedInParser,\r\n    altsOrOpts: IOrAlt<any>[] | OrMethodOpts<unknown>\r\n  ): T {\r\n    return this.orInternal(altsOrOpts, 9)\r\n  }\r\n\r\n  MANY<OUT>(\r\n    this: MixedInParser,\r\n    actionORMethodDef: GrammarAction<OUT> | DSLMethodOpts<OUT>\r\n  ): void {\r\n    this.manyInternal(0, actionORMethodDef)\r\n  }\r\n\r\n  MANY1<OUT>(\r\n    this: MixedInParser,\r\n    actionORMethodDef: GrammarAction<OUT> | DSLMethodOpts<OUT>\r\n  ): void {\r\n    this.manyInternal(1, actionORMethodDef)\r\n  }\r\n\r\n  MANY2<OUT>(\r\n    this: MixedInParser,\r\n    actionORMethodDef: GrammarAction<OUT> | DSLMethodOpts<OUT>\r\n  ): void {\r\n    this.manyInternal(2, actionORMethodDef)\r\n  }\r\n\r\n  MANY3<OUT>(\r\n    this: MixedInParser,\r\n    actionORMethodDef: GrammarAction<OUT> | DSLMethodOpts<OUT>\r\n  ): void {\r\n    this.manyInternal(3, actionORMethodDef)\r\n  }\r\n\r\n  MANY4<OUT>(\r\n    this: MixedInParser,\r\n    actionORMethodDef: GrammarAction<OUT> | DSLMethodOpts<OUT>\r\n  ): void {\r\n    this.manyInternal(4, actionORMethodDef)\r\n  }\r\n\r\n  MANY5<OUT>(\r\n    this: MixedInParser,\r\n    actionORMethodDef: GrammarAction<OUT> | DSLMethodOpts<OUT>\r\n  ): void {\r\n    this.manyInternal(5, actionORMethodDef)\r\n  }\r\n\r\n  MANY6<OUT>(\r\n    this: MixedInParser,\r\n    actionORMethodDef: GrammarAction<OUT> | DSLMethodOpts<OUT>\r\n  ): void {\r\n    this.manyInternal(6, actionORMethodDef)\r\n  }\r\n\r\n  MANY7<OUT>(\r\n    this: MixedInParser,\r\n    actionORMethodDef: GrammarAction<OUT> | DSLMethodOpts<OUT>\r\n  ): void {\r\n    this.manyInternal(7, actionORMethodDef)\r\n  }\r\n\r\n  MANY8<OUT>(\r\n    this: MixedInParser,\r\n    actionORMethodDef: GrammarAction<OUT> | DSLMethodOpts<OUT>\r\n  ): void {\r\n    this.manyInternal(8, actionORMethodDef)\r\n  }\r\n\r\n  MANY9<OUT>(\r\n    this: MixedInParser,\r\n    actionORMethodDef: GrammarAction<OUT> | DSLMethodOpts<OUT>\r\n  ): void {\r\n    this.manyInternal(9, actionORMethodDef)\r\n  }\r\n\r\n  MANY_SEP<OUT>(this: MixedInParser, options: ManySepMethodOpts<OUT>): void {\r\n    this.manySepFirstInternal(0, options)\r\n  }\r\n\r\n  MANY_SEP1<OUT>(this: MixedInParser, options: ManySepMethodOpts<OUT>): void {\r\n    this.manySepFirstInternal(1, options)\r\n  }\r\n\r\n  MANY_SEP2<OUT>(this: MixedInParser, options: ManySepMethodOpts<OUT>): void {\r\n    this.manySepFirstInternal(2, options)\r\n  }\r\n\r\n  MANY_SEP3<OUT>(this: MixedInParser, options: ManySepMethodOpts<OUT>): void {\r\n    this.manySepFirstInternal(3, options)\r\n  }\r\n\r\n  MANY_SEP4<OUT>(this: MixedInParser, options: ManySepMethodOpts<OUT>): void {\r\n    this.manySepFirstInternal(4, options)\r\n  }\r\n\r\n  MANY_SEP5<OUT>(this: MixedInParser, options: ManySepMethodOpts<OUT>): void {\r\n    this.manySepFirstInternal(5, options)\r\n  }\r\n\r\n  MANY_SEP6<OUT>(this: MixedInParser, options: ManySepMethodOpts<OUT>): void {\r\n    this.manySepFirstInternal(6, options)\r\n  }\r\n\r\n  MANY_SEP7<OUT>(this: MixedInParser, options: ManySepMethodOpts<OUT>): void {\r\n    this.manySepFirstInternal(7, options)\r\n  }\r\n\r\n  MANY_SEP8<OUT>(this: MixedInParser, options: ManySepMethodOpts<OUT>): void {\r\n    this.manySepFirstInternal(8, options)\r\n  }\r\n\r\n  MANY_SEP9<OUT>(this: MixedInParser, options: ManySepMethodOpts<OUT>): void {\r\n    this.manySepFirstInternal(9, options)\r\n  }\r\n\r\n  AT_LEAST_ONE<OUT>(\r\n    this: MixedInParser,\r\n    actionORMethodDef: GrammarAction<OUT> | DSLMethodOptsWithErr<OUT>\r\n  ): void {\r\n    this.atLeastOneInternal(0, actionORMethodDef)\r\n  }\r\n\r\n  AT_LEAST_ONE1<OUT>(\r\n    this: MixedInParser,\r\n    actionORMethodDef: GrammarAction<OUT> | DSLMethodOptsWithErr<OUT>\r\n  ): void {\r\n    return this.atLeastOneInternal(1, actionORMethodDef)\r\n  }\r\n\r\n  AT_LEAST_ONE2<OUT>(\r\n    this: MixedInParser,\r\n    actionORMethodDef: GrammarAction<OUT> | DSLMethodOptsWithErr<OUT>\r\n  ): void {\r\n    this.atLeastOneInternal(2, actionORMethodDef)\r\n  }\r\n\r\n  AT_LEAST_ONE3<OUT>(\r\n    this: MixedInParser,\r\n    actionORMethodDef: GrammarAction<OUT> | DSLMethodOptsWithErr<OUT>\r\n  ): void {\r\n    this.atLeastOneInternal(3, actionORMethodDef)\r\n  }\r\n\r\n  AT_LEAST_ONE4<OUT>(\r\n    this: MixedInParser,\r\n    actionORMethodDef: GrammarAction<OUT> | DSLMethodOptsWithErr<OUT>\r\n  ): void {\r\n    this.atLeastOneInternal(4, actionORMethodDef)\r\n  }\r\n\r\n  AT_LEAST_ONE5<OUT>(\r\n    this: MixedInParser,\r\n    actionORMethodDef: GrammarAction<OUT> | DSLMethodOptsWithErr<OUT>\r\n  ): void {\r\n    this.atLeastOneInternal(5, actionORMethodDef)\r\n  }\r\n\r\n  AT_LEAST_ONE6<OUT>(\r\n    this: MixedInParser,\r\n    actionORMethodDef: GrammarAction<OUT> | DSLMethodOptsWithErr<OUT>\r\n  ): void {\r\n    this.atLeastOneInternal(6, actionORMethodDef)\r\n  }\r\n\r\n  AT_LEAST_ONE7<OUT>(\r\n    this: MixedInParser,\r\n    actionORMethodDef: GrammarAction<OUT> | DSLMethodOptsWithErr<OUT>\r\n  ): void {\r\n    this.atLeastOneInternal(7, actionORMethodDef)\r\n  }\r\n\r\n  AT_LEAST_ONE8<OUT>(\r\n    this: MixedInParser,\r\n    actionORMethodDef: GrammarAction<OUT> | DSLMethodOptsWithErr<OUT>\r\n  ): void {\r\n    this.atLeastOneInternal(8, actionORMethodDef)\r\n  }\r\n\r\n  AT_LEAST_ONE9<OUT>(\r\n    this: MixedInParser,\r\n    actionORMethodDef: GrammarAction<OUT> | DSLMethodOptsWithErr<OUT>\r\n  ): void {\r\n    this.atLeastOneInternal(9, actionORMethodDef)\r\n  }\r\n\r\n  AT_LEAST_ONE_SEP<OUT>(\r\n    this: MixedInParser,\r\n    options: AtLeastOneSepMethodOpts<OUT>\r\n  ): void {\r\n    this.atLeastOneSepFirstInternal(0, options)\r\n  }\r\n\r\n  AT_LEAST_ONE_SEP1<OUT>(\r\n    this: MixedInParser,\r\n    options: AtLeastOneSepMethodOpts<OUT>\r\n  ): void {\r\n    this.atLeastOneSepFirstInternal(1, options)\r\n  }\r\n\r\n  AT_LEAST_ONE_SEP2<OUT>(\r\n    this: MixedInParser,\r\n    options: AtLeastOneSepMethodOpts<OUT>\r\n  ): void {\r\n    this.atLeastOneSepFirstInternal(2, options)\r\n  }\r\n\r\n  AT_LEAST_ONE_SEP3<OUT>(\r\n    this: MixedInParser,\r\n    options: AtLeastOneSepMethodOpts<OUT>\r\n  ): void {\r\n    this.atLeastOneSepFirstInternal(3, options)\r\n  }\r\n\r\n  AT_LEAST_ONE_SEP4<OUT>(\r\n    this: MixedInParser,\r\n    options: AtLeastOneSepMethodOpts<OUT>\r\n  ): void {\r\n    this.atLeastOneSepFirstInternal(4, options)\r\n  }\r\n\r\n  AT_LEAST_ONE_SEP5<OUT>(\r\n    this: MixedInParser,\r\n    options: AtLeastOneSepMethodOpts<OUT>\r\n  ): void {\r\n    this.atLeastOneSepFirstInternal(5, options)\r\n  }\r\n\r\n  AT_LEAST_ONE_SEP6<OUT>(\r\n    this: MixedInParser,\r\n    options: AtLeastOneSepMethodOpts<OUT>\r\n  ): void {\r\n    this.atLeastOneSepFirstInternal(6, options)\r\n  }\r\n\r\n  AT_LEAST_ONE_SEP7<OUT>(\r\n    this: MixedInParser,\r\n    options: AtLeastOneSepMethodOpts<OUT>\r\n  ): void {\r\n    this.atLeastOneSepFirstInternal(7, options)\r\n  }\r\n\r\n  AT_LEAST_ONE_SEP8<OUT>(\r\n    this: MixedInParser,\r\n    options: AtLeastOneSepMethodOpts<OUT>\r\n  ): void {\r\n    this.atLeastOneSepFirstInternal(8, options)\r\n  }\r\n\r\n  AT_LEAST_ONE_SEP9<OUT>(\r\n    this: MixedInParser,\r\n    options: AtLeastOneSepMethodOpts<OUT>\r\n  ): void {\r\n    this.atLeastOneSepFirstInternal(9, options)\r\n  }\r\n\r\n  RULE<T>(\r\n    this: MixedInParser,\r\n    name: string,\r\n    implementation: (...implArgs: any[]) => T,\r\n    config: IRuleConfig<T> = DEFAULT_RULE_CONFIG\r\n  ): (idxInCallingRule?: number, ...args: any[]) => T | any {\r\n    if (includes(this.definedRulesNames, name)) {\r\n      const errMsg =\r\n        defaultGrammarValidatorErrorProvider.buildDuplicateRuleNameError({\r\n          topLevelRule: name,\r\n          grammarName: this.className\r\n        })\r\n\r\n      const error = {\r\n        message: errMsg,\r\n        type: ParserDefinitionErrorType.DUPLICATE_RULE_NAME,\r\n        ruleName: name\r\n      }\r\n      this.definitionErrors.push(error)\r\n    }\r\n\r\n    this.definedRulesNames.push(name)\r\n\r\n    const ruleImplementation = this.defineRule(name, implementation, config)\r\n    ;(this as any)[name] = ruleImplementation\r\n    return ruleImplementation\r\n  }\r\n\r\n  OVERRIDE_RULE<T>(\r\n    this: MixedInParser,\r\n    name: string,\r\n    impl: (...implArgs: any[]) => T,\r\n    config: IRuleConfig<T> = DEFAULT_RULE_CONFIG\r\n  ): (idxInCallingRule?: number, ...args: any[]) => T {\r\n    const ruleErrors: IParserDefinitionError[] = validateRuleIsOverridden(\r\n      name,\r\n      this.definedRulesNames,\r\n      this.className\r\n    )\r\n    this.definitionErrors = this.definitionErrors.concat(ruleErrors)\r\n\r\n    const ruleImplementation = this.defineRule(name, impl, config)\r\n    ;(this as any)[name] = ruleImplementation\r\n    return ruleImplementation\r\n  }\r\n\r\n  BACKTRACK<T>(\r\n    this: MixedInParser,\r\n    grammarRule: (...args: any[]) => T,\r\n    args?: any[]\r\n  ): () => boolean {\r\n    return function () {\r\n      // save org state\r\n      this.isBackTrackingStack.push(1)\r\n      const orgState = this.saveRecogState()\r\n      try {\r\n        grammarRule.apply(this, args)\r\n        // if no exception was thrown we have succeed parsing the rule.\r\n        return true\r\n      } catch (e) {\r\n        if (isRecognitionException(e)) {\r\n          return false\r\n        } else {\r\n          throw e\r\n        }\r\n      } finally {\r\n        this.reloadRecogState(orgState)\r\n        this.isBackTrackingStack.pop()\r\n      }\r\n    }\r\n  }\r\n\r\n  // GAST export APIs\r\n  public getGAstProductions(this: MixedInParser): Record<string, Rule> {\r\n    return this.gastProductionsCache\r\n  }\r\n\r\n  public getSerializedGastProductions(this: MixedInParser): ISerializedGast[] {\r\n    return serializeGrammar(values(this.gastProductionsCache))\r\n  }\r\n}\r\n", "import {\r\n  AtLeastOneSepMethodOpts,\r\n  ConsumeMethodOpts,\r\n  DSLMethodOpts,\r\n  DSLMethodOptsWithErr,\r\n  GrammarAction,\r\n  IOrAlt,\r\n  IParserConfig,\r\n  IRuleConfig,\r\n  IToken,\r\n  ManySepMethodOpts,\r\n  OrMethodOpts,\r\n  ParserMethod,\r\n  SubruleMethodOpts,\r\n  TokenType,\r\n  TokenTypeDictionary,\r\n  TokenVocabulary\r\n} from \"@chevrotain/types\"\r\nimport isEmpty from \"lodash/isEmpty\"\r\nimport isArray from \"lodash/isArray\"\r\nimport flatten from \"lodash/flatten\"\r\nimport every from \"lodash/every\"\r\nimport uniq from \"lodash/uniq\"\r\nimport isObject from \"lodash/isObject\"\r\nimport has from \"lodash/has\"\r\nimport values from \"lodash/values\"\r\nimport reduce from \"lodash/reduce\"\r\nimport clone from \"lodash/clone\"\r\nimport {\r\n  AT_LEAST_ONE_IDX,\r\n  AT_LEAST_ONE_SEP_IDX,\r\n  BITS_FOR_METHOD_TYPE,\r\n  BITS_FOR_OCCURRENCE_IDX,\r\n  MANY_IDX,\r\n  MANY_SEP_IDX,\r\n  OPTION_IDX,\r\n  OR_IDX\r\n} from \"../../grammar/keys\"\r\nimport {\r\n  isRecognitionException,\r\n  MismatchedTokenException,\r\n  NotAllInputParsedException\r\n} from \"../../exceptions_public\"\r\nimport { PROD_TYPE } from \"../../grammar/lookahead\"\r\nimport {\r\n  AbstractNextTerminalAfterProductionWalker,\r\n  NextTerminalAfterAtLeastOneSepWalker,\r\n  NextTerminalAfterAtLeastOneWalker,\r\n  NextTerminalAfterManySepWalker,\r\n  NextTerminalAfterManyWalker\r\n} from \"../../grammar/interpreter\"\r\nimport { DEFAULT_RULE_CONFIG, IParserState, TokenMatcher } from \"../parser\"\r\nimport { IN_RULE_RECOVERY_EXCEPTION } from \"./recoverable\"\r\nimport { EOF } from \"../../../scan/tokens_public\"\r\nimport { MixedInParser } from \"./parser_traits\"\r\nimport {\r\n  augmentTokenTypes,\r\n  isTokenType,\r\n  tokenStructuredMatcher,\r\n  tokenStructuredMatcherNoCategories\r\n} from \"../../../scan/tokens\"\r\nimport { Rule } from \"@chevrotain/gast\"\r\nimport { ParserMethodInternal } from \"../types\"\r\n\r\n/**\r\n * This trait is responsible for the runtime parsing engine\r\n * Used by the official API (recognizer_api.ts)\r\n */\r\nexport class RecognizerEngine {\r\n  isBackTrackingStack: boolean[]\r\n  className: string\r\n  RULE_STACK: number[]\r\n  RULE_OCCURRENCE_STACK: number[]\r\n  definedRulesNames: string[]\r\n  tokensMap: { [fqn: string]: TokenType }\r\n  gastProductionsCache: Record<string, Rule>\r\n  shortRuleNameToFull: Record<string, string>\r\n  fullRuleNameToShort: Record<string, number>\r\n  // The shortName Index must be coded \"after\" the first 8bits to enable building unique lookahead keys\r\n  ruleShortNameIdx: number\r\n  tokenMatcher: TokenMatcher\r\n  subruleIdx: number\r\n\r\n  initRecognizerEngine(\r\n    tokenVocabulary: TokenVocabulary,\r\n    config: IParserConfig\r\n  ) {\r\n    this.className = this.constructor.name\r\n    // TODO: would using an ES6 Map or plain object be faster (CST building scenario)\r\n    this.shortRuleNameToFull = {}\r\n    this.fullRuleNameToShort = {}\r\n    this.ruleShortNameIdx = 256\r\n    this.tokenMatcher = tokenStructuredMatcherNoCategories\r\n    this.subruleIdx = 0\r\n\r\n    this.definedRulesNames = []\r\n    this.tokensMap = {}\r\n    this.isBackTrackingStack = []\r\n    this.RULE_STACK = []\r\n    this.RULE_OCCURRENCE_STACK = []\r\n    this.gastProductionsCache = {}\r\n\r\n    if (has(config, \"serializedGrammar\")) {\r\n      throw Error(\r\n        \"The Parser's configuration can no longer contain a <serializedGrammar> property.\\n\" +\r\n          \"\\tSee: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_6-0-0\\n\" +\r\n          \"\\tFor Further details.\"\r\n      )\r\n    }\r\n\r\n    if (isArray(tokenVocabulary)) {\r\n      // This only checks for Token vocabularies provided as arrays.\r\n      // That is good enough because the main objective is to detect users of pre-V4.0 APIs\r\n      // rather than all edge cases of empty Token vocabularies.\r\n      if (isEmpty(tokenVocabulary as any[])) {\r\n        throw Error(\r\n          \"A Token Vocabulary cannot be empty.\\n\" +\r\n            \"\\tNote that the first argument for the parser constructor\\n\" +\r\n            \"\\tis no longer a Token vector (since v4.0).\"\r\n        )\r\n      }\r\n\r\n      if (typeof (tokenVocabulary as any[])[0].startOffset === \"number\") {\r\n        throw Error(\r\n          \"The Parser constructor no longer accepts a token vector as the first argument.\\n\" +\r\n            \"\\tSee: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_4-0-0\\n\" +\r\n            \"\\tFor Further details.\"\r\n        )\r\n      }\r\n    }\r\n\r\n    if (isArray(tokenVocabulary)) {\r\n      this.tokensMap = reduce(\r\n        tokenVocabulary,\r\n        (acc, tokType: TokenType) => {\r\n          acc[tokType.name] = tokType\r\n          return acc\r\n        },\r\n        {} as { [tokenName: string]: TokenType }\r\n      )\r\n    } else if (\r\n      has(tokenVocabulary, \"modes\") &&\r\n      every(flatten(values((<any>tokenVocabulary).modes)), isTokenType)\r\n    ) {\r\n      const allTokenTypes = flatten(values((<any>tokenVocabulary).modes))\r\n      const uniqueTokens = uniq(allTokenTypes)\r\n      this.tokensMap = <any>reduce(\r\n        uniqueTokens,\r\n        (acc, tokType: TokenType) => {\r\n          acc[tokType.name] = tokType\r\n          return acc\r\n        },\r\n        {} as { [tokenName: string]: TokenType }\r\n      )\r\n    } else if (isObject(tokenVocabulary)) {\r\n      this.tokensMap = clone(tokenVocabulary as TokenTypeDictionary)\r\n    } else {\r\n      throw new Error(\r\n        \"<tokensDictionary> argument must be An Array of Token constructors,\" +\r\n          \" A dictionary of Token constructors or an IMultiModeLexerDefinition\"\r\n      )\r\n    }\r\n\r\n    // always add EOF to the tokenNames -> constructors map. it is useful to assure all the input has been\r\n    // parsed with a clear error message (\"expecting EOF but found ...\")\r\n    this.tokensMap[\"EOF\"] = EOF\r\n\r\n    const allTokenTypes = has(tokenVocabulary, \"modes\")\r\n      ? flatten(values((<any>tokenVocabulary).modes))\r\n      : values(tokenVocabulary)\r\n    const noTokenCategoriesUsed = every(allTokenTypes, (tokenConstructor) =>\r\n      isEmpty(tokenConstructor.categoryMatches)\r\n    )\r\n\r\n    this.tokenMatcher = noTokenCategoriesUsed\r\n      ? tokenStructuredMatcherNoCategories\r\n      : tokenStructuredMatcher\r\n\r\n    // Because ES2015+ syntax should be supported for creating Token classes\r\n    // We cannot assume that the Token classes were created using the \"extendToken\" utilities\r\n    // Therefore we must augment the Token classes both on Lexer initialization and on Parser initialization\r\n    augmentTokenTypes(values(this.tokensMap))\r\n  }\r\n\r\n  defineRule<ARGS extends unknown[], R>(\r\n    this: MixedInParser,\r\n    ruleName: string,\r\n    impl: (...args: ARGS) => R,\r\n    config: IRuleConfig<R>\r\n  ): ParserMethodInternal<ARGS, R> {\r\n    if (this.selfAnalysisDone) {\r\n      throw Error(\r\n        `Grammar rule <${ruleName}> may not be defined after the 'performSelfAnalysis' method has been called'\\n` +\r\n          `Make sure that all grammar rule definitions are done before 'performSelfAnalysis' is called.`\r\n      )\r\n    }\r\n    const resyncEnabled: boolean = has(config, \"resyncEnabled\")\r\n      ? (config.resyncEnabled as boolean) // assumes end user provides the correct config value/type\r\n      : DEFAULT_RULE_CONFIG.resyncEnabled\r\n    const recoveryValueFunc = has(config, \"recoveryValueFunc\")\r\n      ? (config.recoveryValueFunc as () => R) // assumes end user provides the correct config value/type\r\n      : DEFAULT_RULE_CONFIG.recoveryValueFunc\r\n\r\n    // performance optimization: Use small integers as keys for the longer human readable \"full\" rule names.\r\n    // this greatly improves Map access time (as much as 8% for some performance benchmarks).\r\n    const shortName =\r\n      this.ruleShortNameIdx << (BITS_FOR_METHOD_TYPE + BITS_FOR_OCCURRENCE_IDX)\r\n\r\n    this.ruleShortNameIdx++\r\n    this.shortRuleNameToFull[shortName] = ruleName\r\n    this.fullRuleNameToShort[ruleName] = shortName\r\n\r\n    let invokeRuleWithTry: ParserMethod<ARGS, R>\r\n\r\n    // Micro optimization, only check the condition **once** on rule definition\r\n    // instead of **every single** rule invocation.\r\n    if (this.outputCst === true) {\r\n      invokeRuleWithTry = function invokeRuleWithTry(\r\n        this: MixedInParser,\r\n        ...args: ARGS\r\n      ): R {\r\n        try {\r\n          this.ruleInvocationStateUpdate(shortName, ruleName, this.subruleIdx)\r\n          impl.apply(this, args)\r\n          const cst = this.CST_STACK[this.CST_STACK.length - 1]\r\n          this.cstPostRule(cst)\r\n          return cst as unknown as R\r\n        } catch (e) {\r\n          return this.invokeRuleCatch(e, resyncEnabled, recoveryValueFunc) as R\r\n        } finally {\r\n          this.ruleFinallyStateUpdate()\r\n        }\r\n      }\r\n    } else {\r\n      invokeRuleWithTry = function invokeRuleWithTryCst(\r\n        this: MixedInParser,\r\n        ...args: ARGS\r\n      ): R {\r\n        try {\r\n          this.ruleInvocationStateUpdate(shortName, ruleName, this.subruleIdx)\r\n          return impl.apply(this, args)\r\n        } catch (e) {\r\n          return this.invokeRuleCatch(e, resyncEnabled, recoveryValueFunc) as R\r\n        } finally {\r\n          this.ruleFinallyStateUpdate()\r\n        }\r\n      }\r\n    }\r\n\r\n    const wrappedGrammarRule: ParserMethodInternal<ARGS, R> = Object.assign(\r\n      invokeRuleWithTry as any,\r\n      { ruleName, originalGrammarAction: impl }\r\n    )\r\n\r\n    return wrappedGrammarRule\r\n  }\r\n\r\n  invokeRuleCatch(\r\n    this: MixedInParser,\r\n    e: Error,\r\n    resyncEnabledConfig: boolean,\r\n    recoveryValueFunc: Function\r\n  ): unknown {\r\n    const isFirstInvokedRule = this.RULE_STACK.length === 1\r\n    // note the reSync is always enabled for the first rule invocation, because we must always be able to\r\n    // reSync with EOF and just output some INVALID ParseTree\r\n    // during backtracking reSync recovery is disabled, otherwise we can't be certain the backtracking\r\n    // path is really the most valid one\r\n    const reSyncEnabled =\r\n      resyncEnabledConfig && !this.isBackTracking() && this.recoveryEnabled\r\n\r\n    if (isRecognitionException(e)) {\r\n      const recogError: any = e\r\n      if (reSyncEnabled) {\r\n        const reSyncTokType = this.findReSyncTokenType()\r\n        if (this.isInCurrentRuleReSyncSet(reSyncTokType)) {\r\n          recogError.resyncedTokens = this.reSyncTo(reSyncTokType)\r\n          if (this.outputCst) {\r\n            const partialCstResult: any =\r\n              this.CST_STACK[this.CST_STACK.length - 1]\r\n            partialCstResult.recoveredNode = true\r\n            return partialCstResult\r\n          } else {\r\n            return recoveryValueFunc(e)\r\n          }\r\n        } else {\r\n          if (this.outputCst) {\r\n            const partialCstResult: any =\r\n              this.CST_STACK[this.CST_STACK.length - 1]\r\n            partialCstResult.recoveredNode = true\r\n            recogError.partialCstResult = partialCstResult\r\n          }\r\n          // to be handled Further up the call stack\r\n          throw recogError\r\n        }\r\n      } else if (isFirstInvokedRule) {\r\n        // otherwise a Redundant input error will be created as well and we cannot guarantee that this is indeed the case\r\n        this.moveToTerminatedState()\r\n        // the parser should never throw one of its own errors outside its flow.\r\n        // even if error recovery is disabled\r\n        return recoveryValueFunc(e)\r\n      } else {\r\n        // to be recovered Further up the call stack\r\n        throw recogError\r\n      }\r\n    } else {\r\n      // some other Error type which we don't know how to handle (for example a built in JavaScript Error)\r\n      throw e\r\n    }\r\n  }\r\n\r\n  // Implementation of parsing DSL\r\n  optionInternal<OUT>(\r\n    this: MixedInParser,\r\n    actionORMethodDef: GrammarAction<OUT> | DSLMethodOpts<OUT>,\r\n    occurrence: number\r\n  ): OUT | undefined {\r\n    const key = this.getKeyForAutomaticLookahead(OPTION_IDX, occurrence)\r\n    return this.optionInternalLogic(actionORMethodDef, occurrence, key)\r\n  }\r\n\r\n  optionInternalLogic<OUT>(\r\n    this: MixedInParser,\r\n    actionORMethodDef: GrammarAction<OUT> | DSLMethodOpts<OUT>,\r\n    occurrence: number,\r\n    key: number\r\n  ): OUT | undefined {\r\n    let lookAheadFunc = this.getLaFuncFromCache(key)\r\n    let action: GrammarAction<OUT>\r\n    if (typeof actionORMethodDef !== \"function\") {\r\n      action = actionORMethodDef.DEF\r\n      const predicate = actionORMethodDef.GATE\r\n      // predicate present\r\n      if (predicate !== undefined) {\r\n        const orgLookaheadFunction = lookAheadFunc\r\n        lookAheadFunc = () => {\r\n          return predicate.call(this) && orgLookaheadFunction.call(this)\r\n        }\r\n      }\r\n    } else {\r\n      action = actionORMethodDef\r\n    }\r\n\r\n    if (lookAheadFunc.call(this) === true) {\r\n      return action.call(this)\r\n    }\r\n    return undefined\r\n  }\r\n\r\n  atLeastOneInternal<OUT>(\r\n    this: MixedInParser,\r\n    prodOccurrence: number,\r\n    actionORMethodDef: GrammarAction<OUT> | DSLMethodOptsWithErr<OUT>\r\n  ): void {\r\n    const laKey = this.getKeyForAutomaticLookahead(\r\n      AT_LEAST_ONE_IDX,\r\n      prodOccurrence\r\n    )\r\n    return this.atLeastOneInternalLogic(\r\n      prodOccurrence,\r\n      actionORMethodDef,\r\n      laKey\r\n    )\r\n  }\r\n\r\n  atLeastOneInternalLogic<OUT>(\r\n    this: MixedInParser,\r\n    prodOccurrence: number,\r\n    actionORMethodDef: GrammarAction<OUT> | DSLMethodOptsWithErr<OUT>,\r\n    key: number\r\n  ): void {\r\n    let lookAheadFunc = this.getLaFuncFromCache(key)\r\n    let action\r\n    if (typeof actionORMethodDef !== \"function\") {\r\n      action = actionORMethodDef.DEF\r\n      const predicate = actionORMethodDef.GATE\r\n      // predicate present\r\n      if (predicate !== undefined) {\r\n        const orgLookaheadFunction = lookAheadFunc\r\n        lookAheadFunc = () => {\r\n          return predicate.call(this) && orgLookaheadFunction.call(this)\r\n        }\r\n      }\r\n    } else {\r\n      action = actionORMethodDef\r\n    }\r\n\r\n    if ((<Function>lookAheadFunc).call(this) === true) {\r\n      let notStuck = this.doSingleRepetition(action)\r\n      while (\r\n        (<Function>lookAheadFunc).call(this) === true &&\r\n        notStuck === true\r\n      ) {\r\n        notStuck = this.doSingleRepetition(action)\r\n      }\r\n    } else {\r\n      throw this.raiseEarlyExitException(\r\n        prodOccurrence,\r\n        PROD_TYPE.REPETITION_MANDATORY,\r\n        (<DSLMethodOptsWithErr<OUT>>actionORMethodDef).ERR_MSG\r\n      )\r\n    }\r\n\r\n    // note that while it may seem that this can cause an error because by using a recursive call to\r\n    // AT_LEAST_ONE we change the grammar to AT_LEAST_TWO, AT_LEAST_THREE ... , the possible recursive call\r\n    // from the tryInRepetitionRecovery(...) will only happen IFF there really are TWO/THREE/.... items.\r\n\r\n    // Performance optimization: \"attemptInRepetitionRecovery\" will be defined as NOOP unless recovery is enabled\r\n    this.attemptInRepetitionRecovery(\r\n      this.atLeastOneInternal,\r\n      [prodOccurrence, actionORMethodDef],\r\n      <any>lookAheadFunc,\r\n      AT_LEAST_ONE_IDX,\r\n      prodOccurrence,\r\n      NextTerminalAfterAtLeastOneWalker\r\n    )\r\n  }\r\n\r\n  atLeastOneSepFirstInternal<OUT>(\r\n    this: MixedInParser,\r\n    prodOccurrence: number,\r\n    options: AtLeastOneSepMethodOpts<OUT>\r\n  ): void {\r\n    const laKey = this.getKeyForAutomaticLookahead(\r\n      AT_LEAST_ONE_SEP_IDX,\r\n      prodOccurrence\r\n    )\r\n    this.atLeastOneSepFirstInternalLogic(prodOccurrence, options, laKey)\r\n  }\r\n\r\n  atLeastOneSepFirstInternalLogic<OUT>(\r\n    this: MixedInParser,\r\n    prodOccurrence: number,\r\n    options: AtLeastOneSepMethodOpts<OUT>,\r\n    key: number\r\n  ): void {\r\n    const action = options.DEF\r\n    const separator = options.SEP\r\n\r\n    const firstIterationLookaheadFunc = this.getLaFuncFromCache(key)\r\n\r\n    // 1st iteration\r\n    if (firstIterationLookaheadFunc.call(this) === true) {\r\n      ;(<GrammarAction<OUT>>action).call(this)\r\n\r\n      //  TODO: Optimization can move this function construction into \"attemptInRepetitionRecovery\"\r\n      //  because it is only needed in error recovery scenarios.\r\n      const separatorLookAheadFunc = () => {\r\n        return this.tokenMatcher(this.LA(1), separator)\r\n      }\r\n\r\n      // 2nd..nth iterations\r\n      while (this.tokenMatcher(this.LA(1), separator) === true) {\r\n        // note that this CONSUME will never enter recovery because\r\n        // the separatorLookAheadFunc checks that the separator really does exist.\r\n        this.CONSUME(separator)\r\n        // No need for checking infinite loop here due to consuming the separator.\r\n        ;(<GrammarAction<OUT>>action).call(this)\r\n      }\r\n\r\n      // Performance optimization: \"attemptInRepetitionRecovery\" will be defined as NOOP unless recovery is enabled\r\n      this.attemptInRepetitionRecovery(\r\n        this.repetitionSepSecondInternal,\r\n        [\r\n          prodOccurrence,\r\n          separator,\r\n          separatorLookAheadFunc,\r\n          action,\r\n          NextTerminalAfterAtLeastOneSepWalker\r\n        ],\r\n        separatorLookAheadFunc,\r\n        AT_LEAST_ONE_SEP_IDX,\r\n        prodOccurrence,\r\n        NextTerminalAfterAtLeastOneSepWalker\r\n      )\r\n    } else {\r\n      throw this.raiseEarlyExitException(\r\n        prodOccurrence,\r\n        PROD_TYPE.REPETITION_MANDATORY_WITH_SEPARATOR,\r\n        options.ERR_MSG\r\n      )\r\n    }\r\n  }\r\n\r\n  manyInternal<OUT>(\r\n    this: MixedInParser,\r\n    prodOccurrence: number,\r\n    actionORMethodDef: GrammarAction<OUT> | DSLMethodOpts<OUT>\r\n  ): void {\r\n    const laKey = this.getKeyForAutomaticLookahead(MANY_IDX, prodOccurrence)\r\n    return this.manyInternalLogic(prodOccurrence, actionORMethodDef, laKey)\r\n  }\r\n\r\n  manyInternalLogic<OUT>(\r\n    this: MixedInParser,\r\n    prodOccurrence: number,\r\n    actionORMethodDef: GrammarAction<OUT> | DSLMethodOpts<OUT>,\r\n    key: number\r\n  ) {\r\n    let lookaheadFunction = this.getLaFuncFromCache(key)\r\n    let action\r\n    if (typeof actionORMethodDef !== \"function\") {\r\n      action = actionORMethodDef.DEF\r\n      const predicate = actionORMethodDef.GATE\r\n      // predicate present\r\n      if (predicate !== undefined) {\r\n        const orgLookaheadFunction = lookaheadFunction\r\n        lookaheadFunction = () => {\r\n          return predicate.call(this) && orgLookaheadFunction.call(this)\r\n        }\r\n      }\r\n    } else {\r\n      action = actionORMethodDef\r\n    }\r\n\r\n    let notStuck = true\r\n    while (lookaheadFunction.call(this) === true && notStuck === true) {\r\n      notStuck = this.doSingleRepetition(action)\r\n    }\r\n\r\n    // Performance optimization: \"attemptInRepetitionRecovery\" will be defined as NOOP unless recovery is enabled\r\n    this.attemptInRepetitionRecovery(\r\n      this.manyInternal,\r\n      [prodOccurrence, actionORMethodDef],\r\n      <any>lookaheadFunction,\r\n      MANY_IDX,\r\n      prodOccurrence,\r\n      NextTerminalAfterManyWalker,\r\n      // The notStuck parameter is only relevant when \"attemptInRepetitionRecovery\"\r\n      // is invoked from manyInternal, in the MANY_SEP case and AT_LEAST_ONE[_SEP]\r\n      // An infinite loop cannot occur as:\r\n      // - Either the lookahead is guaranteed to consume something (Single Token Separator)\r\n      // - AT_LEAST_ONE by definition is guaranteed to consume something (or error out).\r\n      notStuck\r\n    )\r\n  }\r\n\r\n  manySepFirstInternal<OUT>(\r\n    this: MixedInParser,\r\n    prodOccurrence: number,\r\n    options: ManySepMethodOpts<OUT>\r\n  ): void {\r\n    const laKey = this.getKeyForAutomaticLookahead(MANY_SEP_IDX, prodOccurrence)\r\n    this.manySepFirstInternalLogic(prodOccurrence, options, laKey)\r\n  }\r\n\r\n  manySepFirstInternalLogic<OUT>(\r\n    this: MixedInParser,\r\n    prodOccurrence: number,\r\n    options: ManySepMethodOpts<OUT>,\r\n    key: number\r\n  ): void {\r\n    const action = options.DEF\r\n    const separator = options.SEP\r\n    const firstIterationLaFunc = this.getLaFuncFromCache(key)\r\n\r\n    // 1st iteration\r\n    if (firstIterationLaFunc.call(this) === true) {\r\n      action.call(this)\r\n\r\n      const separatorLookAheadFunc = () => {\r\n        return this.tokenMatcher(this.LA(1), separator)\r\n      }\r\n      // 2nd..nth iterations\r\n      while (this.tokenMatcher(this.LA(1), separator) === true) {\r\n        // note that this CONSUME will never enter recovery because\r\n        // the separatorLookAheadFunc checks that the separator really does exist.\r\n        this.CONSUME(separator)\r\n        // No need for checking infinite loop here due to consuming the separator.\r\n        action.call(this)\r\n      }\r\n\r\n      // Performance optimization: \"attemptInRepetitionRecovery\" will be defined as NOOP unless recovery is enabled\r\n      this.attemptInRepetitionRecovery(\r\n        this.repetitionSepSecondInternal,\r\n        [\r\n          prodOccurrence,\r\n          separator,\r\n          separatorLookAheadFunc,\r\n          action,\r\n          NextTerminalAfterManySepWalker\r\n        ],\r\n        separatorLookAheadFunc,\r\n        MANY_SEP_IDX,\r\n        prodOccurrence,\r\n        NextTerminalAfterManySepWalker\r\n      )\r\n    }\r\n  }\r\n\r\n  repetitionSepSecondInternal<OUT>(\r\n    this: MixedInParser,\r\n    prodOccurrence: number,\r\n    separator: TokenType,\r\n    separatorLookAheadFunc: () => boolean,\r\n    action: GrammarAction<OUT>,\r\n    nextTerminalAfterWalker: typeof AbstractNextTerminalAfterProductionWalker\r\n  ): void {\r\n    while (separatorLookAheadFunc()) {\r\n      // note that this CONSUME will never enter recovery because\r\n      // the separatorLookAheadFunc checks that the separator really does exist.\r\n      this.CONSUME(separator)\r\n      action.call(this)\r\n    }\r\n\r\n    // we can only arrive to this function after an error\r\n    // has occurred (hence the name 'second') so the following\r\n    // IF will always be entered, its possible to remove it...\r\n    // however it is kept to avoid confusion and be consistent.\r\n    // Performance optimization: \"attemptInRepetitionRecovery\" will be defined as NOOP unless recovery is enabled\r\n    /* istanbul ignore else */\r\n    this.attemptInRepetitionRecovery(\r\n      this.repetitionSepSecondInternal,\r\n      [\r\n        prodOccurrence,\r\n        separator,\r\n        separatorLookAheadFunc,\r\n        action,\r\n        nextTerminalAfterWalker\r\n      ],\r\n      separatorLookAheadFunc,\r\n      AT_LEAST_ONE_SEP_IDX,\r\n      prodOccurrence,\r\n      nextTerminalAfterWalker\r\n    )\r\n  }\r\n\r\n  doSingleRepetition(this: MixedInParser, action: Function): any {\r\n    const beforeIteration = this.getLexerPosition()\r\n    action.call(this)\r\n    const afterIteration = this.getLexerPosition()\r\n\r\n    // This boolean will indicate if this repetition progressed\r\n    // or if we are \"stuck\" (potential infinite loop in the repetition).\r\n    return afterIteration > beforeIteration\r\n  }\r\n\r\n  orInternal<T>(\r\n    this: MixedInParser,\r\n    altsOrOpts: IOrAlt<any>[] | OrMethodOpts<unknown>,\r\n    occurrence: number\r\n  ): T {\r\n    const laKey = this.getKeyForAutomaticLookahead(OR_IDX, occurrence)\r\n    const alts = isArray(altsOrOpts) ? altsOrOpts : altsOrOpts.DEF\r\n\r\n    const laFunc = this.getLaFuncFromCache(laKey)\r\n    const altIdxToTake = laFunc.call(this, alts)\r\n    if (altIdxToTake !== undefined) {\r\n      const chosenAlternative: any = alts[altIdxToTake]\r\n      return chosenAlternative.ALT.call(this)\r\n    }\r\n    this.raiseNoAltException(\r\n      occurrence,\r\n      (altsOrOpts as OrMethodOpts<unknown>).ERR_MSG\r\n    )\r\n  }\r\n\r\n  ruleFinallyStateUpdate(this: MixedInParser): void {\r\n    this.RULE_STACK.pop()\r\n    this.RULE_OCCURRENCE_STACK.pop()\r\n\r\n    // NOOP when cst is disabled\r\n    this.cstFinallyStateUpdate()\r\n\r\n    if (this.RULE_STACK.length === 0 && this.isAtEndOfInput() === false) {\r\n      const firstRedundantTok = this.LA(1)\r\n      const errMsg = this.errorMessageProvider.buildNotAllInputParsedMessage({\r\n        firstRedundant: firstRedundantTok,\r\n        ruleName: this.getCurrRuleFullName()\r\n      })\r\n      this.SAVE_ERROR(new NotAllInputParsedException(errMsg, firstRedundantTok))\r\n    }\r\n  }\r\n\r\n  subruleInternal<ARGS extends unknown[], R>(\r\n    this: MixedInParser,\r\n    ruleToCall: ParserMethodInternal<ARGS, R>,\r\n    idx: number,\r\n    options?: SubruleMethodOpts<ARGS>\r\n  ): R {\r\n    let ruleResult\r\n    try {\r\n      const args = options !== undefined ? options.ARGS : undefined\r\n      this.subruleIdx = idx\r\n      ruleResult = ruleToCall.apply(this, args)\r\n      this.cstPostNonTerminal(\r\n        ruleResult,\r\n        options !== undefined && options.LABEL !== undefined\r\n          ? options.LABEL\r\n          : ruleToCall.ruleName\r\n      )\r\n      return ruleResult\r\n    } catch (e) {\r\n      throw this.subruleInternalError(e, options, ruleToCall.ruleName)\r\n    }\r\n  }\r\n\r\n  subruleInternalError(\r\n    this: MixedInParser,\r\n    e: any,\r\n    options: SubruleMethodOpts<unknown[]> | undefined,\r\n    ruleName: string\r\n  ): void {\r\n    if (isRecognitionException(e) && e.partialCstResult !== undefined) {\r\n      this.cstPostNonTerminal(\r\n        e.partialCstResult,\r\n        options !== undefined && options.LABEL !== undefined\r\n          ? options.LABEL\r\n          : ruleName\r\n      )\r\n\r\n      delete e.partialCstResult\r\n    }\r\n    throw e\r\n  }\r\n\r\n  consumeInternal(\r\n    this: MixedInParser,\r\n    tokType: TokenType,\r\n    idx: number,\r\n    options: ConsumeMethodOpts | undefined\r\n  ): IToken {\r\n    let consumedToken!: IToken\r\n    try {\r\n      const nextToken = this.LA(1)\r\n      if (this.tokenMatcher(nextToken, tokType) === true) {\r\n        this.consumeToken()\r\n        consumedToken = nextToken\r\n      } else {\r\n        this.consumeInternalError(tokType, nextToken, options)\r\n      }\r\n    } catch (eFromConsumption) {\r\n      consumedToken = this.consumeInternalRecovery(\r\n        tokType,\r\n        idx,\r\n        eFromConsumption\r\n      )\r\n    }\r\n\r\n    this.cstPostTerminal(\r\n      options !== undefined && options.LABEL !== undefined\r\n        ? options.LABEL\r\n        : tokType.name,\r\n      consumedToken\r\n    )\r\n    return consumedToken\r\n  }\r\n\r\n  consumeInternalError(\r\n    this: MixedInParser,\r\n    tokType: TokenType,\r\n    nextToken: IToken,\r\n    options: ConsumeMethodOpts | undefined\r\n  ): void {\r\n    let msg\r\n    const previousToken = this.LA(0)\r\n    if (options !== undefined && options.ERR_MSG) {\r\n      msg = options.ERR_MSG\r\n    } else {\r\n      msg = this.errorMessageProvider.buildMismatchTokenMessage({\r\n        expected: tokType,\r\n        actual: nextToken,\r\n        previous: previousToken,\r\n        ruleName: this.getCurrRuleFullName()\r\n      })\r\n    }\r\n    throw this.SAVE_ERROR(\r\n      new MismatchedTokenException(msg, nextToken, previousToken)\r\n    )\r\n  }\r\n\r\n  consumeInternalRecovery(\r\n    this: MixedInParser,\r\n    tokType: TokenType,\r\n    idx: number,\r\n    eFromConsumption: Error\r\n  ): IToken {\r\n    // no recovery allowed during backtracking, otherwise backtracking may recover invalid syntax and accept it\r\n    // but the original syntax could have been parsed successfully without any backtracking + recovery\r\n    if (\r\n      this.recoveryEnabled &&\r\n      // TODO: more robust checking of the exception type. Perhaps Typescript extending expressions?\r\n      eFromConsumption.name === \"MismatchedTokenException\" &&\r\n      !this.isBackTracking()\r\n    ) {\r\n      const follows = this.getFollowsForInRuleRecovery(<any>tokType, idx)\r\n      try {\r\n        return this.tryInRuleRecovery(<any>tokType, follows)\r\n      } catch (eFromInRuleRecovery) {\r\n        if (eFromInRuleRecovery.name === IN_RULE_RECOVERY_EXCEPTION) {\r\n          // failed in RuleRecovery.\r\n          // throw the original error in order to trigger reSync error recovery\r\n          throw eFromConsumption\r\n        } else {\r\n          throw eFromInRuleRecovery\r\n        }\r\n      }\r\n    } else {\r\n      throw eFromConsumption\r\n    }\r\n  }\r\n\r\n  saveRecogState(this: MixedInParser): IParserState {\r\n    // errors is a getter which will clone the errors array\r\n    const savedErrors = this.errors\r\n    const savedRuleStack = clone(this.RULE_STACK)\r\n    return {\r\n      errors: savedErrors,\r\n      lexerState: this.exportLexerState(),\r\n      RULE_STACK: savedRuleStack,\r\n      CST_STACK: this.CST_STACK\r\n    }\r\n  }\r\n\r\n  reloadRecogState(this: MixedInParser, newState: IParserState) {\r\n    this.errors = newState.errors\r\n    this.importLexerState(newState.lexerState)\r\n    this.RULE_STACK = newState.RULE_STACK\r\n  }\r\n\r\n  ruleInvocationStateUpdate(\r\n    this: MixedInParser,\r\n    shortName: number,\r\n    fullName: string,\r\n    idxInCallingRule: number\r\n  ): void {\r\n    this.RULE_OCCURRENCE_STACK.push(idxInCallingRule)\r\n    this.RULE_STACK.push(shortName)\r\n    // NOOP when cst is disabled\r\n    this.cstInvocationStateUpdate(fullName)\r\n  }\r\n\r\n  isBackTracking(this: MixedInParser): boolean {\r\n    return this.isBackTrackingStack.length !== 0\r\n  }\r\n\r\n  getCurrRuleFullName(this: MixedInParser): string {\r\n    const shortName = this.getLastExplicitRuleShortName()\r\n    return this.shortRuleNameToFull[shortName]\r\n  }\r\n\r\n  shortRuleNameToFullName(this: MixedInParser, shortName: number) {\r\n    return this.shortRuleNameToFull[shortName]\r\n  }\r\n\r\n  public isAtEndOfInput(this: MixedInParser): boolean {\r\n    return this.tokenMatcher(this.LA(1), EOF)\r\n  }\r\n\r\n  public reset(this: MixedInParser): void {\r\n    this.resetLexerState()\r\n    this.subruleIdx = 0\r\n    this.isBackTrackingStack = []\r\n    this.errors = []\r\n    this.RULE_STACK = []\r\n    // TODO: extract a specific reset for TreeBuilder trait\r\n    this.CST_STACK = []\r\n    this.RULE_OCCURRENCE_STACK = []\r\n  }\r\n}\r\n", "import {\r\n  IParserConfig,\r\n  IParserErrorMessageProvider,\r\n  IRecognitionException\r\n} from \"@chevrotain/types\"\r\nimport {\r\n  EarlyExitException,\r\n  isRecognitionException,\r\n  NoViableAltException\r\n} from \"../../exceptions_public\"\r\nimport has from \"lodash/has\"\r\nimport clone from \"lodash/clone\"\r\nimport {\r\n  getLookaheadPathsForOptionalProd,\r\n  getLookaheadPathsForOr,\r\n  PROD_TYPE\r\n} from \"../../grammar/lookahead\"\r\nimport { MixedInParser } from \"./parser_traits\"\r\nimport { DEFAULT_PARSER_CONFIG } from \"../parser\"\r\n\r\n/**\r\n * Trait responsible for runtime parsing errors.\r\n */\r\nexport class ErrorHandler {\r\n  _errors: IRecognitionException[]\r\n  errorMessageProvider: IParserErrorMessageProvider\r\n\r\n  initErrorHandler(config: IParserConfig) {\r\n    this._errors = []\r\n    this.errorMessageProvider = has(config, \"errorMessageProvider\")\r\n      ? (config.errorMessageProvider as IParserErrorMessageProvider) // assumes end user provides the correct config value/type\r\n      : DEFAULT_PARSER_CONFIG.errorMessageProvider\r\n  }\r\n\r\n  SAVE_ERROR(\r\n    this: MixedInParser,\r\n    error: IRecognitionException\r\n  ): IRecognitionException {\r\n    if (isRecognitionException(error)) {\r\n      error.context = {\r\n        ruleStack: this.getHumanReadableRuleStack(),\r\n        ruleOccurrenceStack: clone(this.RULE_OCCURRENCE_STACK)\r\n      }\r\n      this._errors.push(error)\r\n      return error\r\n    } else {\r\n      throw Error(\"Trying to save an Error which is not a RecognitionException\")\r\n    }\r\n  }\r\n\r\n  get errors(): IRecognitionException[] {\r\n    return clone(this._errors)\r\n  }\r\n\r\n  set errors(newErrors: IRecognitionException[]) {\r\n    this._errors = newErrors\r\n  }\r\n\r\n  // TODO: consider caching the error message computed information\r\n  raiseEarlyExitException(\r\n    this: MixedInParser,\r\n    occurrence: number,\r\n    prodType: PROD_TYPE,\r\n    userDefinedErrMsg: string | undefined\r\n  ): never {\r\n    const ruleName = this.getCurrRuleFullName()\r\n    const ruleGrammar = this.getGAstProductions()[ruleName]\r\n    const lookAheadPathsPerAlternative = getLookaheadPathsForOptionalProd(\r\n      occurrence,\r\n      ruleGrammar,\r\n      prodType,\r\n      this.maxLookahead\r\n    )\r\n    const insideProdPaths = lookAheadPathsPerAlternative[0]\r\n    const actualTokens = []\r\n    for (let i = 1; i <= this.maxLookahead; i++) {\r\n      actualTokens.push(this.LA(i))\r\n    }\r\n    const msg = this.errorMessageProvider.buildEarlyExitMessage({\r\n      expectedIterationPaths: insideProdPaths,\r\n      actual: actualTokens,\r\n      previous: this.LA(0),\r\n      customUserDescription: userDefinedErrMsg,\r\n      ruleName: ruleName\r\n    })\r\n\r\n    throw this.SAVE_ERROR(new EarlyExitException(msg, this.LA(1), this.LA(0)))\r\n  }\r\n\r\n  // TODO: consider caching the error message computed information\r\n  raiseNoAltException(\r\n    this: MixedInParser,\r\n    occurrence: number,\r\n    errMsgTypes: string | undefined\r\n  ): never {\r\n    const ruleName = this.getCurrRuleFullName()\r\n    const ruleGrammar = this.getGAstProductions()[ruleName]\r\n    // TODO: getLookaheadPathsForOr can be slow for large enough maxLookahead and certain grammars, consider caching ?\r\n    const lookAheadPathsPerAlternative = getLookaheadPathsForOr(\r\n      occurrence,\r\n      ruleGrammar,\r\n      this.maxLookahead\r\n    )\r\n\r\n    const actualTokens = []\r\n    for (let i = 1; i <= this.maxLookahead; i++) {\r\n      actualTokens.push(this.LA(i))\r\n    }\r\n    const previousToken = this.LA(0)\r\n\r\n    const errMsg = this.errorMessageProvider.buildNoViableAltMessage({\r\n      expectedPathsPerAlt: lookAheadPathsPerAlternative,\r\n      actual: actualTokens,\r\n      previous: previousToken,\r\n      customUserDescription: errMsgTypes,\r\n      ruleName: this.getCurrRuleFullName()\r\n    })\r\n\r\n    throw this.SAVE_ERROR(\r\n      new NoViableAltException(errMsg, this.LA(1), previousToken)\r\n    )\r\n  }\r\n}\r\n", "import {\r\n  ISyntacticContentAssistPath,\r\n  IToken,\r\n  ITokenGrammarPath,\r\n  TokenType\r\n} from \"@chevrotain/types\"\r\nimport {\r\n  NextAfterTokenWalker,\r\n  nextPossibleTokensAfter\r\n} from \"../../grammar/interpreter\"\r\nimport first from \"lodash/first\"\r\nimport isUndefined from \"lodash/isUndefined\"\r\nimport { MixedInParser } from \"./parser_traits\"\r\n\r\nexport class ContentAssist {\r\n  initContentAssist() {}\r\n\r\n  public computeContentAssist(\r\n    this: MixedInParser,\r\n    startRuleName: string,\r\n    precedingInput: IToken[]\r\n  ): ISyntacticContentAssistPath[] {\r\n    const startRuleGast = this.gastProductionsCache[startRuleName]\r\n\r\n    if (isUndefined(startRuleGast)) {\r\n      throw Error(`Rule ->${startRuleName}<- does not exist in this grammar.`)\r\n    }\r\n\r\n    return nextPossibleTokensAfter(\r\n      [startRuleGast],\r\n      precedingInput,\r\n      this.tokenMatcher,\r\n      this.maxLookahead\r\n    )\r\n  }\r\n\r\n  // TODO: should this be a member method or a utility? it does not have any state or usage of 'this'...\r\n  // TODO: should this be more explicitly part of the public API?\r\n  public getNextPossibleTokenTypes(\r\n    this: MixedInParser,\r\n    grammarPath: ITokenGrammarPath\r\n  ): TokenType[] {\r\n    const topRuleName = first(grammarPath.ruleStack)!\r\n    const gastProductions = this.getGAstProductions()\r\n    const topProduction = gastProductions[topRuleName]\r\n    const nextPossibleTokenTypes = new NextAfterTokenWalker(\r\n      topProduction,\r\n      grammarPath\r\n    ).startWalking()\r\n    return nextPossibleTokenTypes\r\n  }\r\n}\r\n", "import {\r\n  AtLeastOneSepMethodOpts,\r\n  ConsumeMethodOpts,\r\n  CstNode,\r\n  DSLMethodOpts,\r\n  DSLMethodOptsWithErr,\r\n  GrammarAction,\r\n  IOrAlt,\r\n  IParserConfig,\r\n  IProduction,\r\n  IToken,\r\n  ManySepMethodOpts,\r\n  OrMethodOpts,\r\n  SubruleMethodOpts,\r\n  TokenType\r\n} from \"@chevrotain/types\"\r\nimport peek from \"lodash/last\"\r\nimport isArray from \"lodash/isArray\"\r\nimport some from \"lodash/some\"\r\nimport forEach from \"lodash/forEach\"\r\nimport isFunction from \"lodash/isFunction\"\r\nimport has from \"lodash/has\"\r\nimport { MixedInParser } from \"./parser_traits\"\r\nimport {\r\n  Alternation,\r\n  Alternative,\r\n  NonTerminal,\r\n  Option,\r\n  Repetition,\r\n  RepetitionMandatory,\r\n  RepetitionMandatoryWithSeparator,\r\n  RepetitionWithSeparator,\r\n  Rule,\r\n  Terminal\r\n} from \"@chevrotain/gast\"\r\nimport { Lexer } from \"../../../scan/lexer_public\"\r\nimport { augmentTokenTypes, hasShortKeyProperty } from \"../../../scan/tokens\"\r\nimport { createToken, createTokenInstance } from \"../../../scan/tokens_public\"\r\nimport { END_OF_FILE } from \"../parser\"\r\nimport { BITS_FOR_OCCURRENCE_IDX } from \"../../grammar/keys\"\r\nimport { ParserMethodInternal } from \"../types\"\r\n\r\ntype ProdWithDef = IProduction & { definition?: IProduction[] }\r\nconst RECORDING_NULL_OBJECT = {\r\n  description: \"This Object indicates the Parser is during Recording Phase\"\r\n}\r\nObject.freeze(RECORDING_NULL_OBJECT)\r\n\r\nconst HANDLE_SEPARATOR = true\r\nconst MAX_METHOD_IDX = Math.pow(2, BITS_FOR_OCCURRENCE_IDX) - 1\r\n\r\nconst RFT = createToken({ name: \"RECORDING_PHASE_TOKEN\", pattern: Lexer.NA })\r\naugmentTokenTypes([RFT])\r\nconst RECORDING_PHASE_TOKEN = createTokenInstance(\r\n  RFT,\r\n  \"This IToken indicates the Parser is in Recording Phase\\n\\t\" +\r\n    \"\" +\r\n    \"See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details\",\r\n  // Using \"-1\" instead of NaN (as in EOF) because an actual number is less likely to\r\n  // cause errors if the output of LA or CONSUME would be (incorrectly) used during the recording phase.\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1\r\n)\r\nObject.freeze(RECORDING_PHASE_TOKEN)\r\n\r\nconst RECORDING_PHASE_CSTNODE: CstNode = {\r\n  name:\r\n    \"This CSTNode indicates the Parser is in Recording Phase\\n\\t\" +\r\n    \"See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details\",\r\n  children: {}\r\n}\r\n\r\n/**\r\n * This trait handles the creation of the GAST structure for Chevrotain Grammars\r\n */\r\nexport class GastRecorder {\r\n  recordingProdStack: ProdWithDef[]\r\n  RECORDING_PHASE: boolean\r\n\r\n  initGastRecorder(this: MixedInParser, config: IParserConfig): void {\r\n    this.recordingProdStack = []\r\n    this.RECORDING_PHASE = false\r\n  }\r\n\r\n  enableRecording(this: MixedInParser): void {\r\n    this.RECORDING_PHASE = true\r\n\r\n    this.TRACE_INIT(\"Enable Recording\", () => {\r\n      /**\r\n       * Warning Dark Voodoo Magic upcoming!\r\n       * We are \"replacing\" the public parsing DSL methods API\r\n       * With **new** alternative implementations on the Parser **instance**\r\n       *\r\n       * So far this is the only way I've found to avoid performance regressions during parsing time.\r\n       * - Approx 30% performance regression was measured on Chrome 75 Canary when attempting to replace the \"internal\"\r\n       *   implementations directly instead.\r\n       */\r\n      for (let i = 0; i < 10; i++) {\r\n        const idx = i > 0 ? i : \"\"\r\n        this[`CONSUME${idx}` as \"CONSUME\"] = function (arg1, arg2) {\r\n          return this.consumeInternalRecord(arg1, i, arg2)\r\n        }\r\n        this[`SUBRULE${idx}` as \"SUBRULE\"] = function (arg1, arg2) {\r\n          return this.subruleInternalRecord(arg1, i, arg2) as any\r\n        }\r\n        this[`OPTION${idx}` as \"OPTION\"] = function (arg1) {\r\n          return this.optionInternalRecord(arg1, i)\r\n        }\r\n        this[`OR${idx}` as \"OR\"] = function (arg1) {\r\n          return this.orInternalRecord(arg1, i)\r\n        }\r\n        this[`MANY${idx}` as \"MANY\"] = function (arg1) {\r\n          this.manyInternalRecord(i, arg1)\r\n        }\r\n        this[`MANY_SEP${idx}` as \"MANY_SEP\"] = function (arg1) {\r\n          this.manySepFirstInternalRecord(i, arg1)\r\n        }\r\n        this[`AT_LEAST_ONE${idx}` as \"AT_LEAST_ONE\"] = function (arg1) {\r\n          this.atLeastOneInternalRecord(i, arg1)\r\n        }\r\n        this[`AT_LEAST_ONE_SEP${idx}` as \"AT_LEAST_ONE_SEP\"] = function (arg1) {\r\n          this.atLeastOneSepFirstInternalRecord(i, arg1)\r\n        }\r\n      }\r\n\r\n      // DSL methods with the idx(suffix) as an argument\r\n      this[`consume`] = function (idx, arg1, arg2) {\r\n        return this.consumeInternalRecord(arg1, idx, arg2)\r\n      }\r\n      this[`subrule`] = function (idx, arg1, arg2) {\r\n        return this.subruleInternalRecord(arg1, idx, arg2) as any\r\n      }\r\n      this[`option`] = function (idx, arg1) {\r\n        return this.optionInternalRecord(arg1, idx)\r\n      }\r\n      this[`or`] = function (idx, arg1) {\r\n        return this.orInternalRecord(arg1, idx)\r\n      }\r\n      this[`many`] = function (idx, arg1) {\r\n        this.manyInternalRecord(idx, arg1)\r\n      }\r\n      this[`atLeastOne`] = function (idx, arg1) {\r\n        this.atLeastOneInternalRecord(idx, arg1)\r\n      }\r\n\r\n      this.ACTION = this.ACTION_RECORD\r\n      this.BACKTRACK = this.BACKTRACK_RECORD\r\n      this.LA = this.LA_RECORD\r\n    })\r\n  }\r\n\r\n  disableRecording(this: MixedInParser) {\r\n    this.RECORDING_PHASE = false\r\n    // By deleting these **instance** properties, any future invocation\r\n    // will be deferred to the original methods on the **prototype** object\r\n    // This seems to get rid of any incorrect optimizations that V8 may\r\n    // do during the recording phase.\r\n    this.TRACE_INIT(\"Deleting Recording methods\", () => {\r\n      const that: any = this\r\n\r\n      for (let i = 0; i < 10; i++) {\r\n        const idx = i > 0 ? i : \"\"\r\n        delete that[`CONSUME${idx}`]\r\n        delete that[`SUBRULE${idx}`]\r\n        delete that[`OPTION${idx}`]\r\n        delete that[`OR${idx}`]\r\n        delete that[`MANY${idx}`]\r\n        delete that[`MANY_SEP${idx}`]\r\n        delete that[`AT_LEAST_ONE${idx}`]\r\n        delete that[`AT_LEAST_ONE_SEP${idx}`]\r\n      }\r\n\r\n      delete that[`consume`]\r\n      delete that[`subrule`]\r\n      delete that[`option`]\r\n      delete that[`or`]\r\n      delete that[`many`]\r\n      delete that[`atLeastOne`]\r\n\r\n      delete that.ACTION\r\n      delete that.BACKTRACK\r\n      delete that.LA\r\n    })\r\n  }\r\n\r\n  //   Parser methods are called inside an ACTION?\r\n  //   Maybe try/catch/finally on ACTIONS while disabling the recorders state changes?\r\n  // @ts-expect-error -- noop place holder\r\n  ACTION_RECORD<T>(this: MixedInParser, impl: () => T): T {\r\n    // NO-OP during recording\r\n  }\r\n\r\n  // Executing backtracking logic will break our recording logic assumptions\r\n  BACKTRACK_RECORD<T>(\r\n    grammarRule: (...args: any[]) => T,\r\n    args?: any[]\r\n  ): () => boolean {\r\n    return () => true\r\n  }\r\n\r\n  // LA is part of the official API and may be used for custom lookahead logic\r\n  // by end users who may forget to wrap it in ACTION or inside a GATE\r\n  LA_RECORD(howMuch: number): IToken {\r\n    // We cannot use the RECORD_PHASE_TOKEN here because someone may depend\r\n    // On LA return EOF at the end of the input so an infinite loop may occur.\r\n    return END_OF_FILE\r\n  }\r\n\r\n  topLevelRuleRecord(name: string, def: Function): Rule {\r\n    try {\r\n      const newTopLevelRule = new Rule({ definition: [], name: name })\r\n      newTopLevelRule.name = name\r\n      this.recordingProdStack.push(newTopLevelRule)\r\n      def.call(this)\r\n      this.recordingProdStack.pop()\r\n      return newTopLevelRule\r\n    } catch (originalError) {\r\n      if (originalError.KNOWN_RECORDER_ERROR !== true) {\r\n        try {\r\n          originalError.message =\r\n            originalError.message +\r\n            '\\n\\t This error was thrown during the \"grammar recording phase\" For more info see:\\n\\t' +\r\n            \"https://chevrotain.io/docs/guide/internals.html#grammar-recording\"\r\n        } catch (mutabilityError) {\r\n          // We may not be able to modify the original error object\r\n          throw originalError\r\n        }\r\n      }\r\n      throw originalError\r\n    }\r\n  }\r\n\r\n  // Implementation of parsing DSL\r\n  optionInternalRecord<OUT>(\r\n    this: MixedInParser,\r\n    actionORMethodDef: GrammarAction<OUT> | DSLMethodOpts<OUT>,\r\n    occurrence: number\r\n  ): OUT {\r\n    return recordProd.call(this, Option, actionORMethodDef, occurrence)\r\n  }\r\n\r\n  atLeastOneInternalRecord<OUT>(\r\n    this: MixedInParser,\r\n    occurrence: number,\r\n    actionORMethodDef: GrammarAction<OUT> | DSLMethodOptsWithErr<OUT>\r\n  ): void {\r\n    recordProd.call(this, RepetitionMandatory, actionORMethodDef, occurrence)\r\n  }\r\n\r\n  atLeastOneSepFirstInternalRecord<OUT>(\r\n    this: MixedInParser,\r\n    occurrence: number,\r\n    options: AtLeastOneSepMethodOpts<OUT>\r\n  ): void {\r\n    recordProd.call(\r\n      this,\r\n      RepetitionMandatoryWithSeparator,\r\n      options,\r\n      occurrence,\r\n      HANDLE_SEPARATOR\r\n    )\r\n  }\r\n\r\n  manyInternalRecord<OUT>(\r\n    this: MixedInParser,\r\n    occurrence: number,\r\n    actionORMethodDef: GrammarAction<OUT> | DSLMethodOpts<OUT>\r\n  ): void {\r\n    recordProd.call(this, Repetition, actionORMethodDef, occurrence)\r\n  }\r\n\r\n  manySepFirstInternalRecord<OUT>(\r\n    this: MixedInParser,\r\n    occurrence: number,\r\n    options: ManySepMethodOpts<OUT>\r\n  ): void {\r\n    recordProd.call(\r\n      this,\r\n      RepetitionWithSeparator,\r\n      options,\r\n      occurrence,\r\n      HANDLE_SEPARATOR\r\n    )\r\n  }\r\n\r\n  orInternalRecord<T>(\r\n    this: MixedInParser,\r\n    altsOrOpts: IOrAlt<any>[] | OrMethodOpts<unknown>,\r\n    occurrence: number\r\n  ): T {\r\n    return recordOrProd.call(this, altsOrOpts, occurrence)\r\n  }\r\n\r\n  subruleInternalRecord<ARGS extends unknown[], R>(\r\n    this: MixedInParser,\r\n    ruleToCall: ParserMethodInternal<ARGS, R>,\r\n    occurrence: number,\r\n    options?: SubruleMethodOpts<ARGS>\r\n  ): R | CstNode {\r\n    assertMethodIdxIsValid(occurrence)\r\n    if (!ruleToCall || has(ruleToCall, \"ruleName\") === false) {\r\n      const error: any = new Error(\r\n        `<SUBRULE${getIdxSuffix(occurrence)}> argument is invalid` +\r\n          ` expecting a Parser method reference but got: <${JSON.stringify(\r\n            ruleToCall\r\n          )}>` +\r\n          `\\n inside top level rule: <${\r\n            (<Rule>this.recordingProdStack[0]).name\r\n          }>`\r\n      )\r\n      error.KNOWN_RECORDER_ERROR = true\r\n      throw error\r\n    }\r\n\r\n    const prevProd: any = peek(this.recordingProdStack)\r\n    const ruleName = ruleToCall.ruleName\r\n    const newNoneTerminal = new NonTerminal({\r\n      idx: occurrence,\r\n      nonTerminalName: ruleName,\r\n      label: options?.LABEL,\r\n      // The resolving of the `referencedRule` property will be done once all the Rule's GASTs have been created\r\n      referencedRule: undefined\r\n    })\r\n    prevProd.definition.push(newNoneTerminal)\r\n\r\n    return this.outputCst ? RECORDING_PHASE_CSTNODE : <any>RECORDING_NULL_OBJECT\r\n  }\r\n\r\n  consumeInternalRecord(\r\n    this: MixedInParser,\r\n    tokType: TokenType,\r\n    occurrence: number,\r\n    options?: ConsumeMethodOpts\r\n  ): IToken {\r\n    assertMethodIdxIsValid(occurrence)\r\n    if (!hasShortKeyProperty(tokType)) {\r\n      const error: any = new Error(\r\n        `<CONSUME${getIdxSuffix(occurrence)}> argument is invalid` +\r\n          ` expecting a TokenType reference but got: <${JSON.stringify(\r\n            tokType\r\n          )}>` +\r\n          `\\n inside top level rule: <${\r\n            (<Rule>this.recordingProdStack[0]).name\r\n          }>`\r\n      )\r\n      error.KNOWN_RECORDER_ERROR = true\r\n      throw error\r\n    }\r\n    const prevProd: any = peek(this.recordingProdStack)\r\n    const newNoneTerminal = new Terminal({\r\n      idx: occurrence,\r\n      terminalType: tokType,\r\n      label: options?.LABEL\r\n    })\r\n    prevProd.definition.push(newNoneTerminal)\r\n\r\n    return RECORDING_PHASE_TOKEN\r\n  }\r\n}\r\n\r\nfunction recordProd(\r\n  prodConstructor: any,\r\n  mainProdArg: any,\r\n  occurrence: number,\r\n  handleSep: boolean = false\r\n): any {\r\n  assertMethodIdxIsValid(occurrence)\r\n  const prevProd: any = peek(this.recordingProdStack)\r\n  const grammarAction = isFunction(mainProdArg) ? mainProdArg : mainProdArg.DEF\r\n\r\n  const newProd = new prodConstructor({ definition: [], idx: occurrence })\r\n  if (handleSep) {\r\n    newProd.separator = mainProdArg.SEP\r\n  }\r\n  if (has(mainProdArg, \"MAX_LOOKAHEAD\")) {\r\n    newProd.maxLookahead = mainProdArg.MAX_LOOKAHEAD\r\n  }\r\n\r\n  this.recordingProdStack.push(newProd)\r\n  grammarAction.call(this)\r\n  prevProd.definition.push(newProd)\r\n  this.recordingProdStack.pop()\r\n\r\n  return RECORDING_NULL_OBJECT\r\n}\r\n\r\nfunction recordOrProd(mainProdArg: any, occurrence: number): any {\r\n  assertMethodIdxIsValid(occurrence)\r\n  const prevProd: any = peek(this.recordingProdStack)\r\n  // Only an array of alternatives\r\n  const hasOptions = isArray(mainProdArg) === false\r\n  const alts: IOrAlt<unknown>[] =\r\n    hasOptions === false ? mainProdArg : mainProdArg.DEF\r\n\r\n  const newOrProd = new Alternation({\r\n    definition: [],\r\n    idx: occurrence,\r\n    ignoreAmbiguities: hasOptions && mainProdArg.IGNORE_AMBIGUITIES === true\r\n  })\r\n  if (has(mainProdArg, \"MAX_LOOKAHEAD\")) {\r\n    newOrProd.maxLookahead = mainProdArg.MAX_LOOKAHEAD\r\n  }\r\n\r\n  const hasPredicates = some(alts, (currAlt: any) => isFunction(currAlt.GATE))\r\n  newOrProd.hasPredicates = hasPredicates\r\n\r\n  prevProd.definition.push(newOrProd)\r\n\r\n  forEach(alts, (currAlt) => {\r\n    const currAltFlat = new Alternative({ definition: [] })\r\n    newOrProd.definition.push(currAltFlat)\r\n    if (has(currAlt, \"IGNORE_AMBIGUITIES\")) {\r\n      currAltFlat.ignoreAmbiguities = currAlt.IGNORE_AMBIGUITIES as boolean // assumes end user provides the correct config value/type\r\n    }\r\n    // **implicit** ignoreAmbiguities due to usage of gate\r\n    else if (has(currAlt, \"GATE\")) {\r\n      currAltFlat.ignoreAmbiguities = true\r\n    }\r\n    this.recordingProdStack.push(currAltFlat)\r\n    currAlt.ALT.call(this)\r\n    this.recordingProdStack.pop()\r\n  })\r\n  return RECORDING_NULL_OBJECT\r\n}\r\n\r\nfunction getIdxSuffix(idx: number): string {\r\n  return idx === 0 ? \"\" : `${idx}`\r\n}\r\n\r\nfunction assertMethodIdxIsValid(idx: number): void {\r\n  if (idx < 0 || idx > MAX_METHOD_IDX) {\r\n    const error: any = new Error(\r\n      // The stack trace will contain all the needed details\r\n      `Invalid DSL Method idx value: <${idx}>\\n\\t` +\r\n        `Idx value must be a none negative value smaller than ${\r\n          MAX_METHOD_IDX + 1\r\n        }`\r\n    )\r\n    error.KNOWN_RECORDER_ERROR = true\r\n    throw error\r\n  }\r\n}\r\n", "import { IParserConfig } from \"@chevrotain/types\"\r\nimport has from \"lodash/has\"\r\nimport { timer } from \"@chevrotain/utils\"\r\nimport { MixedInParser } from \"./parser_traits\"\r\nimport { DEFAULT_PARSER_CONFIG } from \"../parser\"\r\n\r\n/**\r\n * Trait responsible for runtime parsing errors.\r\n */\r\nexport class PerformanceTracer {\r\n  traceInitPerf: boolean | number\r\n  traceInitMaxIdent: number\r\n  traceInitIndent: number\r\n\r\n  initPerformanceTracer(config: IParserConfig) {\r\n    if (has(config, \"traceInitPerf\")) {\r\n      const userTraceInitPerf = config.traceInitPerf\r\n      const traceIsNumber = typeof userTraceInitPerf === \"number\"\r\n      this.traceInitMaxIdent = traceIsNumber\r\n        ? <number>userTraceInitPerf\r\n        : Infinity\r\n      this.traceInitPerf = traceIsNumber\r\n        ? userTraceInitPerf > 0\r\n        : (userTraceInitPerf as boolean) // assumes end user provides the correct config value/type\r\n    } else {\r\n      this.traceInitMaxIdent = 0\r\n      this.traceInitPerf = DEFAULT_PARSER_CONFIG.traceInitPerf\r\n    }\r\n\r\n    this.traceInitIndent = -1\r\n  }\r\n\r\n  TRACE_INIT<T>(this: MixedInParser, phaseDesc: string, phaseImpl: () => T): T {\r\n    // No need to optimize this using NOOP pattern because\r\n    // It is not called in a hot spot...\r\n    if (this.traceInitPerf === true) {\r\n      this.traceInitIndent++\r\n      const indent = new Array(this.traceInitIndent + 1).join(\"\\t\")\r\n      if (this.traceInitIndent < this.traceInitMaxIdent) {\r\n        console.log(`${indent}--> <${phaseDesc}>`)\r\n      }\r\n      const { time, value } = timer(phaseImpl)\r\n      /* istanbul ignore next - Difficult to reproduce specific performance behavior (>10ms) in tests */\r\n      const traceMethod = time > 10 ? console.warn : console.log\r\n      if (this.traceInitIndent < this.traceInitMaxIdent) {\r\n        traceMethod(`${indent}<-- <${phaseDesc}> time: ${time}ms`)\r\n      }\r\n      this.traceInitIndent--\r\n      return value\r\n    } else {\r\n      return phaseImpl()\r\n    }\r\n  }\r\n}\r\n", "export function applyMixins(derivedCtor: any, baseCtors: any[]) {\r\n  baseCtors.forEach((baseCtor) => {\r\n    const baseProto = baseCtor.prototype\r\n    Object.getOwnPropertyNames(baseProto).forEach((propName) => {\r\n      if (propName === \"constructor\") {\r\n        return\r\n      }\r\n\r\n      const basePropDescriptor = Object.getOwnPropertyDescriptor(\r\n        baseProto,\r\n        propName\r\n      )\r\n      // Handle Accessors\r\n      if (\r\n        basePropDescriptor &&\r\n        (basePropDescriptor.get || basePropDescriptor.set)\r\n      ) {\r\n        Object.defineProperty(\r\n          derivedCtor.prototype,\r\n          propName,\r\n          basePropDescriptor\r\n        )\r\n      } else {\r\n        derivedCtor.prototype[propName] = baseCtor.prototype[propName]\r\n      }\r\n    })\r\n  })\r\n}\r\n", "import isEmpty from \"lodash/isEmpty\"\r\nimport map from \"lodash/map\"\r\nimport forEach from \"lodash/forEach\"\r\nimport values from \"lodash/values\"\r\nimport has from \"lodash/has\"\r\nimport clone from \"lodash/clone\"\r\nimport { toFastProperties } from \"@chevrotain/utils\"\r\nimport { computeAllProdsFollows } from \"../grammar/follow\"\r\nimport { createTokenInstance, EOF } from \"../../scan/tokens_public\"\r\nimport {\r\n  defaultGrammarValidatorErrorProvider,\r\n  defaultParserErrorProvider\r\n} from \"../errors_public\"\r\nimport {\r\n  resolveGrammar,\r\n  validateGrammar\r\n} from \"../grammar/gast/gast_resolver_public\"\r\nimport {\r\n  CstNode,\r\n  IParserConfig,\r\n  IRecognitionException,\r\n  IRuleConfig,\r\n  IToken,\r\n  TokenType,\r\n  TokenVocabulary\r\n} from \"@chevrotain/types\"\r\nimport { Recoverable } from \"./traits/recoverable\"\r\nimport { LooksAhead } from \"./traits/looksahead\"\r\nimport { TreeBuilder } from \"./traits/tree_builder\"\r\nimport { LexerAdapter } from \"./traits/lexer_adapter\"\r\nimport { RecognizerApi } from \"./traits/recognizer_api\"\r\nimport { RecognizerEngine } from \"./traits/recognizer_engine\"\r\n\r\nimport { ErrorHandler } from \"./traits/error_handler\"\r\nimport { MixedInParser } from \"./traits/parser_traits\"\r\nimport { ContentAssist } from \"./traits/context_assist\"\r\nimport { GastRecorder } from \"./traits/gast_recorder\"\r\nimport { PerformanceTracer } from \"./traits/perf_tracer\"\r\nimport { applyMixins } from \"./utils/apply_mixins\"\r\nimport { IParserDefinitionError } from \"../grammar/types\"\r\nimport { Rule } from \"@chevrotain/gast\"\r\nimport { IParserConfigInternal, ParserMethodInternal } from \"./types\"\r\nimport { validateLookahead } from \"../grammar/checks\"\r\n\r\nexport const END_OF_FILE = createTokenInstance(\r\n  EOF,\r\n  \"\",\r\n  NaN,\r\n  NaN,\r\n  NaN,\r\n  NaN,\r\n  NaN,\r\n  NaN\r\n)\r\nObject.freeze(END_OF_FILE)\r\n\r\nexport type TokenMatcher = (token: IToken, tokType: TokenType) => boolean\r\n\r\nexport const DEFAULT_PARSER_CONFIG: Required<\r\n  Omit<IParserConfigInternal, \"lookaheadStrategy\">\r\n> = Object.freeze({\r\n  recoveryEnabled: false,\r\n  maxLookahead: 3,\r\n  dynamicTokensEnabled: false,\r\n  outputCst: true,\r\n  errorMessageProvider: defaultParserErrorProvider,\r\n  nodeLocationTracking: \"none\",\r\n  traceInitPerf: false,\r\n  skipValidations: false\r\n})\r\n\r\nexport const DEFAULT_RULE_CONFIG: Required<IRuleConfig<any>> = Object.freeze({\r\n  recoveryValueFunc: () => undefined,\r\n  resyncEnabled: true\r\n})\r\n\r\nexport enum ParserDefinitionErrorType {\r\n  INVALID_RULE_NAME = 0,\r\n  DUPLICATE_RULE_NAME = 1,\r\n  INVALID_RULE_OVERRIDE = 2,\r\n  DUPLICATE_PRODUCTIONS = 3,\r\n  UNRESOLVED_SUBRULE_REF = 4,\r\n  LEFT_RECURSION = 5,\r\n  NONE_LAST_EMPTY_ALT = 6,\r\n  AMBIGUOUS_ALTS = 7,\r\n  CONFLICT_TOKENS_RULES_NAMESPACE = 8,\r\n  INVALID_TOKEN_NAME = 9,\r\n  NO_NON_EMPTY_LOOKAHEAD = 10,\r\n  AMBIGUOUS_PREFIX_ALTS = 11,\r\n  TOO_MANY_ALTS = 12,\r\n  CUSTOM_LOOKAHEAD_VALIDATION = 13\r\n}\r\n\r\nexport interface IParserDuplicatesDefinitionError\r\n  extends IParserDefinitionError {\r\n  dslName: string\r\n  occurrence: number\r\n  parameter?: string\r\n}\r\n\r\nexport interface IParserEmptyAlternativeDefinitionError\r\n  extends IParserDefinitionError {\r\n  occurrence: number\r\n  alternative: number\r\n}\r\n\r\nexport interface IParserAmbiguousAlternativesDefinitionError\r\n  extends IParserDefinitionError {\r\n  occurrence: number | string\r\n  alternatives: number[]\r\n}\r\n\r\nexport interface IParserUnresolvedRefDefinitionError\r\n  extends IParserDefinitionError {\r\n  unresolvedRefName: string\r\n}\r\n\r\nexport interface IParserState {\r\n  errors: IRecognitionException[]\r\n  lexerState: any\r\n  RULE_STACK: number[]\r\n  CST_STACK: CstNode[]\r\n}\r\n\r\nexport type Predicate = () => boolean\r\n\r\nexport function EMPTY_ALT(): () => undefined\r\nexport function EMPTY_ALT<T>(value: T): () => T\r\nexport function EMPTY_ALT(value: any = undefined) {\r\n  return function () {\r\n    return value\r\n  }\r\n}\r\n\r\nexport class Parser {\r\n  // Set this flag to true if you don't want the Parser to throw error when problems in it's definition are detected.\r\n  // (normally during the parser's constructor).\r\n  // This is a design time flag, it will not affect the runtime error handling of the parser, just design time errors,\r\n  // for example: duplicate rule names, referencing an unresolved subrule, ect...\r\n  // This flag should not be enabled during normal usage, it is used in special situations, for example when\r\n  // needing to display the parser definition errors in some GUI(online playground).\r\n  static DEFER_DEFINITION_ERRORS_HANDLING: boolean = false\r\n\r\n  /**\r\n   *  @deprecated use the **instance** method with the same name instead\r\n   */\r\n  static performSelfAnalysis(parserInstance: Parser): void {\r\n    throw Error(\r\n      \"The **static** `performSelfAnalysis` method has been deprecated.\" +\r\n        \"\\t\\nUse the **instance** method with the same name instead.\"\r\n    )\r\n  }\r\n\r\n  public performSelfAnalysis(this: MixedInParser): void {\r\n    this.TRACE_INIT(\"performSelfAnalysis\", () => {\r\n      let defErrorsMsgs\r\n\r\n      this.selfAnalysisDone = true\r\n      const className = this.className\r\n\r\n      this.TRACE_INIT(\"toFastProps\", () => {\r\n        // Without this voodoo magic the parser would be x3-x4 slower\r\n        // It seems it is better to invoke `toFastProperties` **before**\r\n        // Any manipulations of the `this` object done during the recording phase.\r\n        toFastProperties(this)\r\n      })\r\n\r\n      this.TRACE_INIT(\"Grammar Recording\", () => {\r\n        try {\r\n          this.enableRecording()\r\n          // Building the GAST\r\n          forEach(this.definedRulesNames, (currRuleName) => {\r\n            const wrappedRule = (this as any)[\r\n              currRuleName\r\n            ] as ParserMethodInternal<unknown[], unknown>\r\n            const originalGrammarAction = wrappedRule[\"originalGrammarAction\"]\r\n            let recordedRuleGast!: Rule\r\n            this.TRACE_INIT(`${currRuleName} Rule`, () => {\r\n              recordedRuleGast = this.topLevelRuleRecord(\r\n                currRuleName,\r\n                originalGrammarAction\r\n              )\r\n            })\r\n            this.gastProductionsCache[currRuleName] = recordedRuleGast\r\n          })\r\n        } finally {\r\n          this.disableRecording()\r\n        }\r\n      })\r\n\r\n      let resolverErrors: IParserDefinitionError[] = []\r\n      this.TRACE_INIT(\"Grammar Resolving\", () => {\r\n        resolverErrors = resolveGrammar({\r\n          rules: values(this.gastProductionsCache)\r\n        })\r\n        this.definitionErrors = this.definitionErrors.concat(resolverErrors)\r\n      })\r\n\r\n      this.TRACE_INIT(\"Grammar Validations\", () => {\r\n        // only perform additional grammar validations IFF no resolving errors have occurred.\r\n        // as unresolved grammar may lead to unhandled runtime exceptions in the follow up validations.\r\n        if (isEmpty(resolverErrors) && this.skipValidations === false) {\r\n          const validationErrors = validateGrammar({\r\n            rules: values(this.gastProductionsCache),\r\n            tokenTypes: values(this.tokensMap),\r\n            errMsgProvider: defaultGrammarValidatorErrorProvider,\r\n            grammarName: className\r\n          })\r\n          const lookaheadValidationErrors = validateLookahead({\r\n            lookaheadStrategy: this.lookaheadStrategy,\r\n            rules: values(this.gastProductionsCache),\r\n            tokenTypes: values(this.tokensMap),\r\n            grammarName: className\r\n          })\r\n          this.definitionErrors = this.definitionErrors.concat(\r\n            validationErrors,\r\n            lookaheadValidationErrors\r\n          )\r\n        }\r\n      })\r\n\r\n      // this analysis may fail if the grammar is not perfectly valid\r\n      if (isEmpty(this.definitionErrors)) {\r\n        // The results of these computations are not needed unless error recovery is enabled.\r\n        if (this.recoveryEnabled) {\r\n          this.TRACE_INIT(\"computeAllProdsFollows\", () => {\r\n            const allFollows = computeAllProdsFollows(\r\n              values(this.gastProductionsCache)\r\n            )\r\n            this.resyncFollows = allFollows\r\n          })\r\n        }\r\n\r\n        this.TRACE_INIT(\"ComputeLookaheadFunctions\", () => {\r\n          this.lookaheadStrategy.initialize?.({\r\n            rules: values(this.gastProductionsCache)\r\n          })\r\n          this.preComputeLookaheadFunctions(values(this.gastProductionsCache))\r\n        })\r\n      }\r\n\r\n      if (\r\n        !Parser.DEFER_DEFINITION_ERRORS_HANDLING &&\r\n        !isEmpty(this.definitionErrors)\r\n      ) {\r\n        defErrorsMsgs = map(\r\n          this.definitionErrors,\r\n          (defError) => defError.message\r\n        )\r\n        throw new Error(\r\n          `Parser Definition Errors detected:\\n ${defErrorsMsgs.join(\r\n            \"\\n-------------------------------\\n\"\r\n          )}`\r\n        )\r\n      }\r\n    })\r\n  }\r\n\r\n  definitionErrors: IParserDefinitionError[] = []\r\n  selfAnalysisDone = false\r\n  protected skipValidations: boolean\r\n\r\n  constructor(tokenVocabulary: TokenVocabulary, config: IParserConfig) {\r\n    const that: MixedInParser = this as any\r\n    that.initErrorHandler(config)\r\n    that.initLexerAdapter()\r\n    that.initLooksAhead(config)\r\n    that.initRecognizerEngine(tokenVocabulary, config)\r\n    that.initRecoverable(config)\r\n    that.initTreeBuilder(config)\r\n    that.initContentAssist()\r\n    that.initGastRecorder(config)\r\n    that.initPerformanceTracer(config)\r\n\r\n    if (has(config, \"ignoredIssues\")) {\r\n      throw new Error(\r\n        \"The <ignoredIssues> IParserConfig property has been deprecated.\\n\\t\" +\r\n          \"Please use the <IGNORE_AMBIGUITIES> flag on the relevant DSL method instead.\\n\\t\" +\r\n          \"See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#IGNORING_AMBIGUITIES\\n\\t\" +\r\n          \"For further details.\"\r\n      )\r\n    }\r\n\r\n    this.skipValidations = has(config, \"skipValidations\")\r\n      ? (config.skipValidations as boolean) // casting assumes the end user passing the correct type\r\n      : DEFAULT_PARSER_CONFIG.skipValidations\r\n  }\r\n}\r\n\r\napplyMixins(Parser, [\r\n  Recoverable,\r\n  LooksAhead,\r\n  TreeBuilder,\r\n  LexerAdapter,\r\n  RecognizerEngine,\r\n  RecognizerApi,\r\n  ErrorHandler,\r\n  ContentAssist,\r\n  GastRecorder,\r\n  PerformanceTracer\r\n])\r\n\r\nexport class CstParser extends Parser {\r\n  constructor(\r\n    tokenVocabulary: TokenVocabulary,\r\n    config: IParserConfigInternal = DEFAULT_PARSER_CONFIG\r\n  ) {\r\n    const configClone = clone(config)\r\n    configClone.outputCst = true\r\n    super(tokenVocabulary, configClone)\r\n  }\r\n}\r\n\r\nexport class EmbeddedActionsParser extends Parser {\r\n  constructor(\r\n    tokenVocabulary: TokenVocabulary,\r\n    config: IParserConfigInternal = DEFAULT_PARSER_CONFIG\r\n  ) {\r\n    const configClone = clone(config)\r\n    configClone.outputCst = false\r\n    super(tokenVocabulary, configClone)\r\n  }\r\n}\r\n", "import type {\r\n  Alternation,\r\n  Alternative,\r\n  IProduction,\r\n  Option,\r\n  Repetition,\r\n  RepetitionMandatory,\r\n  RepetitionMandatoryWithSeparator,\r\n  RepetitionWithSeparator,\r\n  Rule,\r\n  Terminal,\r\n  TokenType\r\n} from \"@chevrotain/types\"\r\nimport { NonTerminal, GAstVisitor } from \"@chevrotain/gast\"\r\nimport map from \"lodash/map\"\r\nimport flatten from \"lodash/flatten\"\r\nimport values from \"lodash/values\"\r\nimport some from \"lodash/some\"\r\nimport groupBy from \"lodash/groupBy\"\r\nimport assign from \"lodash/assign\"\r\n\r\nexport function buildModel(\r\n  productions: Record<string, Rule>\r\n): CstNodeTypeDefinition[] {\r\n  const generator = new CstNodeDefinitionGenerator()\r\n  const allRules = values(productions)\r\n  return map(allRules, (rule) => generator.visitRule(rule))\r\n}\r\n\r\nexport type CstNodeTypeDefinition = {\r\n  name: string\r\n  properties: PropertyTypeDefinition[]\r\n}\r\n\r\nexport type PropertyTypeDefinition = {\r\n  name: string\r\n  type: PropertyArrayType\r\n  optional: boolean\r\n}\r\n\r\nexport type PropertyArrayType =\r\n  | TokenArrayType\r\n  | RuleArrayType\r\n  | (TokenArrayType | RuleArrayType)[]\r\n\r\nexport type TokenArrayType = { kind: \"token\" }\r\nexport type RuleArrayType = {\r\n  kind: \"rule\"\r\n  name: string\r\n}\r\n\r\nclass CstNodeDefinitionGenerator extends GAstVisitor {\r\n  visitRule(node: Rule): CstNodeTypeDefinition {\r\n    const rawElements = this.visitEach(node.definition)\r\n\r\n    const grouped = groupBy(rawElements, (el) => el.propertyName)\r\n    const properties = map(grouped, (group, propertyName) => {\r\n      const allNullable = !some(group, (el) => !el.canBeNull)\r\n\r\n      // In an alternation with a label a property name can have\r\n      // multiple types.\r\n      let propertyType: PropertyArrayType = group[0].type\r\n      if (group.length > 1) {\r\n        propertyType = map(group, (g) => g.type)\r\n      }\r\n\r\n      return {\r\n        name: propertyName,\r\n        type: propertyType,\r\n        optional: allNullable\r\n      } as PropertyTypeDefinition\r\n    })\r\n\r\n    return {\r\n      name: node.name,\r\n      properties: properties\r\n    }\r\n  }\r\n\r\n  visitAlternative(node: Alternative) {\r\n    return this.visitEachAndOverrideWith(node.definition, { canBeNull: true })\r\n  }\r\n\r\n  visitOption(node: Option) {\r\n    return this.visitEachAndOverrideWith(node.definition, { canBeNull: true })\r\n  }\r\n\r\n  visitRepetition(node: Repetition) {\r\n    return this.visitEachAndOverrideWith(node.definition, { canBeNull: true })\r\n  }\r\n\r\n  visitRepetitionMandatory(node: RepetitionMandatory) {\r\n    return this.visitEach(node.definition)\r\n  }\r\n\r\n  visitRepetitionMandatoryWithSeparator(\r\n    node: RepetitionMandatoryWithSeparator\r\n  ) {\r\n    return this.visitEach(node.definition).concat({\r\n      propertyName: node.separator.name,\r\n      canBeNull: true,\r\n      type: getType(node.separator)\r\n    })\r\n  }\r\n\r\n  visitRepetitionWithSeparator(node: RepetitionWithSeparator) {\r\n    return this.visitEachAndOverrideWith(node.definition, {\r\n      canBeNull: true\r\n    }).concat({\r\n      propertyName: node.separator.name,\r\n      canBeNull: true,\r\n      type: getType(node.separator)\r\n    })\r\n  }\r\n\r\n  visitAlternation(node: Alternation) {\r\n    return this.visitEachAndOverrideWith(node.definition, { canBeNull: true })\r\n  }\r\n\r\n  visitTerminal(node: Terminal): PropertyTupleElement[] {\r\n    return [\r\n      {\r\n        propertyName: node.label || node.terminalType.name,\r\n        canBeNull: false,\r\n        type: getType(node)\r\n      }\r\n    ]\r\n  }\r\n\r\n  visitNonTerminal(node: NonTerminal): PropertyTupleElement[] {\r\n    return [\r\n      {\r\n        propertyName: node.label || node.nonTerminalName,\r\n        canBeNull: false,\r\n        type: getType(node)\r\n      }\r\n    ]\r\n  }\r\n\r\n  private visitEachAndOverrideWith(\r\n    definition: IProduction[],\r\n    override: Partial<PropertyTupleElement>\r\n  ) {\r\n    return map(\r\n      this.visitEach(definition),\r\n      (definition) => assign({}, definition, override) as PropertyTupleElement\r\n    )\r\n  }\r\n\r\n  private visitEach(definition: IProduction[]) {\r\n    return flatten<PropertyTupleElement>(\r\n      map(\r\n        definition,\r\n        (definition) => this.visit(definition) as PropertyTupleElement[]\r\n      )\r\n    )\r\n  }\r\n}\r\n\r\ntype PropertyTupleElement = {\r\n  propertyName: string\r\n  canBeNull: boolean\r\n  type: TokenArrayType | RuleArrayType\r\n}\r\n\r\nfunction getType(\r\n  production: Terminal | NonTerminal | TokenType\r\n): TokenArrayType | RuleArrayType {\r\n  if (production instanceof NonTerminal) {\r\n    return {\r\n      kind: \"rule\",\r\n      name: production.referencedRule.name\r\n    }\r\n  }\r\n\r\n  return { kind: \"token\" }\r\n}\r\n", "var baseSlice = require('./_baseSlice');\r\n\r\n/**\r\n * Casts `array` to a slice if it's needed.\r\n *\r\n * @private\r\n * @param {Array} array The array to inspect.\r\n * @param {number} start The start position.\r\n * @param {number} [end=array.length] The end position.\r\n * @returns {Array} Returns the cast slice.\r\n */\r\nfunction castSlice(array, start, end) {\r\n  var length = array.length;\r\n  end = end === undefined ? length : end;\r\n  return (!start && end >= length) ? array : baseSlice(array, start, end);\r\n}\r\n\r\nmodule.exports = castSlice;\r\n", "/** Used to compose unicode character classes. */\r\nvar rsAstralRange = '\\\\ud800-\\\\udfff',\r\n    rsComboMarksRange = '\\\\u0300-\\\\u036f',\r\n    reComboHalfMarksRange = '\\\\ufe20-\\\\ufe2f',\r\n    rsComboSymbolsRange = '\\\\u20d0-\\\\u20ff',\r\n    rsComboRange = rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange,\r\n    rsVarRange = '\\\\ufe0e\\\\ufe0f';\r\n\r\n/** Used to compose unicode capture groups. */\r\nvar rsZWJ = '\\\\u200d';\r\n\r\n/** Used to detect strings with [zero-width joiners or code points from the astral planes](http://eev.ee/blog/2015/09/12/dark-corners-of-unicode/). */\r\nvar reHasUnicode = RegExp('[' + rsZWJ + rsAstralRange  + rsComboRange + rsVarRange + ']');\r\n\r\n/**\r\n * Checks if `string` contains Unicode symbols.\r\n *\r\n * @private\r\n * @param {string} string The string to inspect.\r\n * @returns {boolean} Returns `true` if a symbol is found, else `false`.\r\n */\r\nfunction hasUnicode(string) {\r\n  return reHasUnicode.test(string);\r\n}\r\n\r\nmodule.exports = hasUnicode;\r\n", "/**\r\n * Converts an ASCII `string` to an array.\r\n *\r\n * @private\r\n * @param {string} string The string to convert.\r\n * @returns {Array} Returns the converted array.\r\n */\r\nfunction asciiToArray(string) {\r\n  return string.split('');\r\n}\r\n\r\nmodule.exports = asciiToArray;\r\n", "/** Used to compose unicode character classes. */\r\nvar rsAstralRange = '\\\\ud800-\\\\udfff',\r\n    rsComboMarksRange = '\\\\u0300-\\\\u036f',\r\n    reComboHalfMarksRange = '\\\\ufe20-\\\\ufe2f',\r\n    rsComboSymbolsRange = '\\\\u20d0-\\\\u20ff',\r\n    rsComboRange = rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange,\r\n    rsVarRange = '\\\\ufe0e\\\\ufe0f';\r\n\r\n/** Used to compose unicode capture groups. */\r\nvar rsAstral = '[' + rsAstralRange + ']',\r\n    rsCombo = '[' + rsComboRange + ']',\r\n    rsFitz = '\\\\ud83c[\\\\udffb-\\\\udfff]',\r\n    rsModifier = '(?:' + rsCombo + '|' + rsFitz + ')',\r\n    rsNonAstral = '[^' + rsAstralRange + ']',\r\n    rsRegional = '(?:\\\\ud83c[\\\\udde6-\\\\uddff]){2}',\r\n    rsSurrPair = '[\\\\ud800-\\\\udbff][\\\\udc00-\\\\udfff]',\r\n    rsZWJ = '\\\\u200d';\r\n\r\n/** Used to compose unicode regexes. */\r\nvar reOptMod = rsModifier + '?',\r\n    rsOptVar = '[' + rsVarRange + ']?',\r\n    rsOptJoin = '(?:' + rsZWJ + '(?:' + [rsNonAstral, rsRegional, rsSurrPair].join('|') + ')' + rsOptVar + reOptMod + ')*',\r\n    rsSeq = rsOptVar + reOptMod + rsOptJoin,\r\n    rsSymbol = '(?:' + [rsNonAstral + rsCombo + '?', rsCombo, rsRegional, rsSurrPair, rsAstral].join('|') + ')';\r\n\r\n/** Used to match [string symbols](https://mathiasbynens.be/notes/javascript-unicode). */\r\nvar reUnicode = RegExp(rsFitz + '(?=' + rsFitz + ')|' + rsSymbol + rsSeq, 'g');\r\n\r\n/**\r\n * Converts a Unicode `string` to an array.\r\n *\r\n * @private\r\n * @param {string} string The string to convert.\r\n * @returns {Array} Returns the converted array.\r\n */\r\nfunction unicodeToArray(string) {\r\n  return string.match(reUnicode) || [];\r\n}\r\n\r\nmodule.exports = unicodeToArray;\r\n", "var asciiToArray = require('./_asciiToArray'),\r\n    hasUnicode = require('./_hasUnicode'),\r\n    unicodeToArray = require('./_unicodeToArray');\r\n\r\n/**\r\n * Converts `string` to an array.\r\n *\r\n * @private\r\n * @param {string} string The string to convert.\r\n * @returns {Array} Returns the converted array.\r\n */\r\nfunction stringToArray(string) {\r\n  return hasUnicode(string)\r\n    ? unicodeToArray(string)\r\n    : asciiToArray(string);\r\n}\r\n\r\nmodule.exports = stringToArray;\r\n", "var castSlice = require('./_castSlice'),\r\n    hasUnicode = require('./_hasUnicode'),\r\n    stringToArray = require('./_stringToArray'),\r\n    toString = require('./toString');\r\n\r\n/**\r\n * Creates a function like `_.lowerFirst`.\r\n *\r\n * @private\r\n * @param {string} methodName The name of the `String` case method to use.\r\n * @returns {Function} Returns the new case function.\r\n */\r\nfunction createCaseFirst(methodName) {\r\n  return function(string) {\r\n    string = toString(string);\r\n\r\n    var strSymbols = hasUnicode(string)\r\n      ? stringToArray(string)\r\n      : undefined;\r\n\r\n    var chr = strSymbols\r\n      ? strSymbols[0]\r\n      : string.charAt(0);\r\n\r\n    var trailing = strSymbols\r\n      ? castSlice(strSymbols, 1).join('')\r\n      : string.slice(1);\r\n\r\n    return chr[methodName]() + trailing;\r\n  };\r\n}\r\n\r\nmodule.exports = createCaseFirst;\r\n", "var createCaseFirst = require('./_createCaseFirst');\r\n\r\n/**\r\n * Converts the first character of `string` to upper case.\r\n *\r\n * @static\r\n * @memberOf _\r\n * @since 4.0.0\r\n * @category String\r\n * @param {string} [string=''] The string to convert.\r\n * @returns {string} Returns the converted string.\r\n * @example\r\n *\r\n * _.upperFirst('fred');\r\n * // => 'Fred'\r\n *\r\n * _.upperFirst('FRED');\r\n * // => 'FRED'\r\n */\r\nvar upperFirst = createCaseFirst('toUpperCase');\r\n\r\nmodule.exports = upperFirst;\r\n", "import flatten from \"lodash/flatten\"\r\nimport isArray from \"lodash/isArray\"\r\nimport map from \"lodash/map\"\r\nimport reduce from \"lodash/reduce\"\r\nimport uniq from \"lodash/uniq\"\r\nimport upperFirst from \"lodash/upperFirst\"\r\nimport { GenerateDtsOptions } from \"@chevrotain/types\"\r\nimport {\r\n  CstNodeTypeDefinition,\r\n  PropertyTypeDefinition,\r\n  PropertyArrayType,\r\n  TokenArrayType,\r\n  RuleArrayType\r\n} from \"./model\"\r\n\r\nexport function genDts(\r\n  model: CstNodeTypeDefinition[],\r\n  options: Required<GenerateDtsOptions>\r\n): string {\r\n  let contentParts: string[] = []\r\n\r\n  contentParts = contentParts.concat(\r\n    `import type { CstNode, ICstVisitor, IToken } from \"chevrotain\";`\r\n  )\r\n\r\n  contentParts = contentParts.concat(\r\n    flatten(map(model, (node) => genCstNodeTypes(node)))\r\n  )\r\n\r\n  if (options.includeVisitorInterface) {\r\n    contentParts = contentParts.concat(\r\n      genVisitor(options.visitorInterfaceName, model)\r\n    )\r\n  }\r\n\r\n  return contentParts.join(\"\\n\\n\") + \"\\n\"\r\n}\r\n\r\nfunction genCstNodeTypes(node: CstNodeTypeDefinition) {\r\n  const nodeCstInterface = genNodeInterface(node)\r\n  const nodeChildrenInterface = genNodeChildrenType(node)\r\n\r\n  return [nodeCstInterface, nodeChildrenInterface]\r\n}\r\n\r\nfunction genNodeInterface(node: CstNodeTypeDefinition) {\r\n  const nodeInterfaceName = getNodeInterfaceName(node.name)\r\n  const childrenTypeName = getNodeChildrenTypeName(node.name)\r\n\r\n  return `export interface ${nodeInterfaceName} extends CstNode {\r\n  name: \"${node.name}\";\r\n  children: ${childrenTypeName};\r\n}`\r\n}\r\n\r\nfunction genNodeChildrenType(node: CstNodeTypeDefinition) {\r\n  const typeName = getNodeChildrenTypeName(node.name)\r\n\r\n  return `export type ${typeName} = {\r\n  ${map(node.properties, (property) => genChildProperty(property)).join(\"\\n  \")}\r\n};`\r\n}\r\n\r\nfunction genChildProperty(prop: PropertyTypeDefinition) {\r\n  const typeName = buildTypeString(prop.type)\r\n  return `${prop.name}${prop.optional ? \"?\" : \"\"}: ${typeName}[];`\r\n}\r\n\r\nfunction genVisitor(name: string, nodes: CstNodeTypeDefinition[]) {\r\n  return `export interface ${name}<IN, OUT> extends ICstVisitor<IN, OUT> {\r\n  ${map(nodes, (node) => genVisitorFunction(node)).join(\"\\n  \")}\r\n}`\r\n}\r\n\r\nfunction genVisitorFunction(node: CstNodeTypeDefinition) {\r\n  const childrenTypeName = getNodeChildrenTypeName(node.name)\r\n  return `${node.name}(children: ${childrenTypeName}, param?: IN): OUT;`\r\n}\r\n\r\nfunction buildTypeString(type: PropertyArrayType) {\r\n  if (isArray(type)) {\r\n    const typeNames = uniq(map(type, (t) => getTypeString(t)))\r\n    const typeString = reduce(typeNames, (sum, t) => sum + \" | \" + t)\r\n    return \"(\" + typeString + \")\"\r\n  } else {\r\n    return getTypeString(type)\r\n  }\r\n}\r\n\r\nfunction getTypeString(type: TokenArrayType | RuleArrayType) {\r\n  if (type.kind === \"token\") {\r\n    return \"IToken\"\r\n  }\r\n  return getNodeInterfaceName(type.name)\r\n}\r\n\r\nfunction getNodeInterfaceName(ruleName: string) {\r\n  return upperFirst(ruleName) + \"CstNode\"\r\n}\r\n\r\nfunction getNodeChildrenTypeName(ruleName: string) {\r\n  return upperFirst(ruleName) + \"CstChildren\"\r\n}\r\n", "import { Rule, GenerateDtsOptions } from \"@chevrotain/types\"\r\nimport { buildModel } from \"./model\"\r\nimport { genDts } from \"./generate\"\r\n\r\nconst defaultOptions: Required<GenerateDtsOptions> = {\r\n  includeVisitorInterface: true,\r\n  visitorInterfaceName: \"ICstNodeVisitor\"\r\n}\r\n\r\nexport function generateCstDts(\r\n  productions: Record<string, Rule>,\r\n  options?: GenerateDtsOptions\r\n): string {\r\n  const effectiveOptions = {\r\n    ...defaultOptions,\r\n    ...options\r\n  }\r\n\r\n  const model = buildModel(productions)\r\n\r\n  return genDts(model, effectiveOptions)\r\n}\r\n", "import { VERSION } from \"../version\"\r\nimport { ISerializedGast } from \"@chevrotain/types\"\r\n\r\nexport function createSyntaxDiagramsCode(\r\n  grammar: ISerializedGast[],\r\n  {\r\n    resourceBase = `https://unpkg.com/chevrotain@${VERSION}/diagrams/`,\r\n    css = `https://unpkg.com/chevrotain@${VERSION}/diagrams/diagrams.css`\r\n  }: {\r\n    resourceBase?: string\r\n    css?: string\r\n  } = {}\r\n) {\r\n  const header = `\r\n<!-- This is a generated file -->\r\n<!DOCTYPE html>\r\n<meta charset=\"utf-8\">\r\n<style>\r\n  body {\r\n    background-color: hsl(30, 20%, 95%)\r\n  }\r\n</style>\r\n\r\n`\r\n  const cssHtml = `\r\n<link rel='stylesheet' href='${css}'>\r\n`\r\n\r\n  const scripts = `\r\n<script src='${resourceBase}vendor/railroad-diagrams.js'></script>\r\n<script src='${resourceBase}src/diagrams_builder.js'></script>\r\n<script src='${resourceBase}src/diagrams_behavior.js'></script>\r\n<script src='${resourceBase}src/main.js'></script>\r\n`\r\n  const diagramsDiv = `\r\n<div id=\"diagrams\" align=\"center\"></div>    \r\n`\r\n  const serializedGrammar = `\r\n<script>\r\n    window.serializedGrammar = ${JSON.stringify(grammar, null, \"  \")};\r\n</script>\r\n`\r\n\r\n  const initLogic = `\r\n<script>\r\n    var diagramsDiv = document.getElementById(\"diagrams\");\r\n    main.drawDiagramsFromSerializedGrammar(serializedGrammar, diagramsDiv);\r\n</script>\r\n`\r\n  return (\r\n    header + cssHtml + scripts + diagramsDiv + serializedGrammar + initLogic\r\n  )\r\n}\r\n", "/* istanbul ignore file - tricky to import some things from this module during testing */\r\n\r\n// semantic version\r\nexport { VERSION } from \"./version\"\r\n\r\nexport {\r\n  CstParser,\r\n  EmbeddedActionsParser,\r\n  ParserDefinitionErrorType,\r\n  EMPTY_ALT\r\n} from \"./parse/parser/parser\"\r\n\r\nexport { Lexer, LexerDefinitionErrorType } from \"./scan/lexer_public\"\r\n\r\n// Tokens utilities\r\nexport {\r\n  createToken,\r\n  createTokenInstance,\r\n  EOF,\r\n  tokenLabel,\r\n  tokenMatcher,\r\n  tokenName\r\n} from \"./scan/tokens_public\"\r\n\r\n// Lookahead\r\n\r\nexport { getLookaheadPaths } from \"./parse/grammar/lookahead\"\r\n\r\nexport { LLkLookaheadStrategy } from \"./parse/grammar/llk_lookahead\"\r\n\r\n// Other Utilities\r\n\r\nexport { defaultParserErrorProvider } from \"./parse/errors_public\"\r\n\r\nexport {\r\n  EarlyExitException,\r\n  isRecognitionException,\r\n  MismatchedTokenException,\r\n  NotAllInputParsedException,\r\n  NoViableAltException\r\n} from \"./parse/exceptions_public\"\r\n\r\nexport { defaultLexerErrorProvider } from \"./scan/lexer_errors_public\"\r\n\r\n// grammar reflection API\r\nexport {\r\n  Alternation,\r\n  Alternative,\r\n  NonTerminal,\r\n  Option,\r\n  Repetition,\r\n  RepetitionMandatory,\r\n  RepetitionMandatoryWithSeparator,\r\n  RepetitionWithSeparator,\r\n  Rule,\r\n  Terminal\r\n} from \"@chevrotain/gast\"\r\n\r\n// GAST Utilities\r\n\r\nexport {\r\n  serializeGrammar,\r\n  serializeProduction,\r\n  GAstVisitor\r\n} from \"@chevrotain/gast\"\r\n\r\nexport { generateCstDts } from \"@chevrotain/cst-dts-gen\"\r\n\r\n/* istanbul ignore next */\r\nexport function clearCache() {\r\n  console.warn(\r\n    \"The clearCache function was 'soft' removed from the Chevrotain API.\" +\r\n      \"\\n\\t It performs no action other than printing this message.\" +\r\n      \"\\n\\t Please avoid using it as it will be completely removed in the future\"\r\n  )\r\n}\r\n\r\nexport { createSyntaxDiagramsCode } from \"./diagrams/render_public\"\r\n\r\nexport class Parser {\r\n  constructor() {\r\n    throw new Error(\r\n      \"The Parser class has been deprecated, use CstParser or EmbeddedActionsParser instead.\\t\\n\" +\r\n        \"See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_7-0-0\"\r\n    )\r\n  }\r\n}\r\n", "module.exports = Object.create(new Proxy({}, {\n  get(_, key) {\n    if (\n      key !== '__esModule' &&\n      key !== '__proto__' &&\n      key !== 'constructor' &&\n      key !== 'splice'\n    ) {\n      console.warn(`Module \"fs\" has been externalized for browser compatibility. Cannot access \"fs.${key}\" in client code. See https://vitejs.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.`)\n    }\n  }\n}))", "import { Vector3 as Vector3$1, Quaternion as Quaternion$1, ActiveEvents, ColliderDesc, EventQueue, RigidBodyDesc } from '@dimforge/rapier3d-compat';\r\nexport { CoefficientCombineRule, Collider as RapierCollider, RigidBody as RapierRigidBody } from '@dimforge/rapier3d-compat';\r\nimport { useFrame, useThree } from '@react-three/fiber';\r\nimport React, { useRef, useEffect, memo, useMemo, useContext, useState, createContext, useCallback, forwardRef, Fragment } from 'react';\r\nimport { Quaternion, Euler, Vector3, Object3D, Matrix4, BufferAttribute, MathUtils, DynamicDrawUsage } from 'three';\r\nimport { suspend } from 'suspend-react';\r\nimport { mergeVertices } from 'three-stdlib';\r\n\r\nfunction _defineProperty(obj, key, value) {\r\n  if (key in obj) {\r\n    Object.defineProperty(obj, key, {\r\n      value: value,\r\n      enumerable: true,\r\n      configurable: true,\r\n      writable: true\r\n    });\r\n  } else {\r\n    obj[key] = value;\r\n  }\r\n\r\n  return obj;\r\n}\r\n\r\nfunction ownKeys(object, enumerableOnly) {\r\n  var keys = Object.keys(object);\r\n\r\n  if (Object.getOwnPropertySymbols) {\r\n    var symbols = Object.getOwnPropertySymbols(object);\r\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\r\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\r\n    })), keys.push.apply(keys, symbols);\r\n  }\r\n\r\n  return keys;\r\n}\r\n\r\nfunction _objectSpread2(target) {\r\n  for (var i = 1; i < arguments.length; i++) {\r\n    var source = null != arguments[i] ? arguments[i] : {};\r\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\r\n      _defineProperty(target, key, source[key]);\r\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\r\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\r\n    });\r\n  }\r\n\r\n  return target;\r\n}\r\n\r\nconst _quaternion = new Quaternion();\r\nnew Euler();\r\nconst _vector3 = new Vector3();\r\nnew Object3D();\r\nconst _matrix4 = new Matrix4();\r\nconst _position = new Vector3();\r\nconst _rotation = new Quaternion();\r\nconst _scale = new Vector3();\r\n\r\nconst vectorArrayToVector3 = arr => {\r\n  const [x, y, z] = arr;\r\n  return new Vector3(x, y, z);\r\n};\r\nconst rapierQuaternionToQuaternion = ({\r\n  x,\r\n  y,\r\n  z,\r\n  w\r\n}) => _quaternion.set(x, y, z, w);\r\nconst vector3ToRapierVector = v => {\r\n  if (Array.isArray(v)) {\r\n    return new Vector3$1(v[0], v[1], v[2]);\r\n  } else if (typeof v === \"number\") {\r\n    return new Vector3$1(v, v, v);\r\n  } else {\r\n    const threeVector3 = v;\r\n    return new Vector3$1(threeVector3.x, threeVector3.y, threeVector3.z);\r\n  }\r\n};\r\nconst quaternionToRapierQuaternion = v => {\r\n  if (Array.isArray(v)) {\r\n    return new Quaternion$1(v[0], v[1], v[2], v[3]);\r\n  } else {\r\n    return new Quaternion$1(v.x, v.y, v.z, v.w);\r\n  }\r\n};\r\nconst rigidBodyTypeMap = {\r\n  fixed: 1,\r\n  dynamic: 0,\r\n  kinematicPosition: 2,\r\n  kinematicVelocity: 3\r\n};\r\nconst rigidBodyTypeFromString = type => rigidBodyTypeMap[type];\r\nconst scaleVertices = (vertices, scale) => {\r\n  const scaledVerts = Array.from(vertices);\r\n\r\n  for (let i = 0; i < vertices.length / 3; i++) {\r\n    scaledVerts[i * 3] *= scale.x;\r\n    scaledVerts[i * 3 + 1] *= scale.y;\r\n    scaledVerts[i * 3 + 2] *= scale.z;\r\n  }\r\n\r\n  return scaledVerts;\r\n};\r\nconst vectorToTuple = v => {\r\n  if (!v) return [0];\r\n\r\n  if (v instanceof Quaternion) {\r\n    return [v.x, v.y, v.z, v.w];\r\n  }\r\n\r\n  if (v instanceof Vector3 || v instanceof Euler) {\r\n    return [v.x, v.y, v.z];\r\n  }\r\n\r\n  if (Array.isArray(v)) {\r\n    return v;\r\n  }\r\n\r\n  return [v];\r\n};\r\nfunction useConst(initialValue) {\r\n  const ref = useRef();\r\n\r\n  if (ref.current === undefined) {\r\n    ref.current = {\r\n      value: typeof initialValue === \"function\" ? initialValue() : initialValue\r\n    };\r\n  }\r\n\r\n  return ref.current.value;\r\n}\r\n\r\nconst useRaf = callback => {\r\n  const cb = useRef(callback);\r\n  const raf = useRef(0);\r\n  const lastFrame = useRef(0);\r\n  useEffect(() => {\r\n    cb.current = callback;\r\n  }, [callback]);\r\n  useEffect(() => {\r\n    const loop = () => {\r\n      const now = performance.now();\r\n      const delta = now - lastFrame.current;\r\n      raf.current = requestAnimationFrame(loop);\r\n      cb.current(delta / 1000);\r\n      lastFrame.current = now;\r\n    };\r\n\r\n    raf.current = requestAnimationFrame(loop);\r\n    return () => cancelAnimationFrame(raf.current);\r\n  }, []);\r\n};\r\n\r\nconst UseFrameStepper = ({\r\n  onStep,\r\n  updatePriority\r\n}) => {\r\n  useFrame((_, dt) => {\r\n    onStep(dt);\r\n  }, updatePriority);\r\n  return null;\r\n};\r\n\r\nconst RafStepper = ({\r\n  onStep\r\n}) => {\r\n  useRaf(dt => {\r\n    onStep(dt);\r\n  });\r\n  return null;\r\n};\r\n\r\nconst FrameStepper = ({\r\n  onStep,\r\n  type,\r\n  updatePriority\r\n}) => {\r\n  return type === \"independent\" ? /*#__PURE__*/React.createElement(RafStepper, {\r\n    onStep: onStep\r\n  }) : /*#__PURE__*/React.createElement(UseFrameStepper, {\r\n    onStep: onStep,\r\n    updatePriority: updatePriority\r\n  });\r\n};\r\n\r\nvar FrameStepper$1 = /*#__PURE__*/memo(FrameStepper);\r\n\r\nfunction _objectWithoutPropertiesLoose(source, excluded) {\r\n  if (source == null) return {};\r\n  var target = {};\r\n  var sourceKeys = Object.keys(source);\r\n  var key, i;\r\n\r\n  for (i = 0; i < sourceKeys.length; i++) {\r\n    key = sourceKeys[i];\r\n    if (excluded.indexOf(key) >= 0) continue;\r\n    target[key] = source[key];\r\n  }\r\n\r\n  return target;\r\n}\r\n\r\nfunction _objectWithoutProperties(source, excluded) {\r\n  if (source == null) return {};\r\n  var target = _objectWithoutPropertiesLoose(source, excluded);\r\n  var key, i;\r\n\r\n  if (Object.getOwnPropertySymbols) {\r\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\r\n\r\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\r\n      key = sourceSymbolKeys[i];\r\n      if (excluded.indexOf(key) >= 0) continue;\r\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\r\n      target[key] = source[key];\r\n    }\r\n  }\r\n\r\n  return target;\r\n}\r\n\r\nconst _excluded$2 = [\"mass\", \"linearDamping\", \"angularDamping\", \"type\", \"onCollisionEnter\", \"onCollisionExit\", \"onIntersectionEnter\", \"onIntersectionExit\", \"onContactForce\", \"children\", \"canSleep\", \"ccd\", \"gravityScale\", \"softCcdPrediction\"];\r\nconst scaleColliderArgs = (shape, args, scale) => {\r\n  const newArgs = args.slice(); // Heightfield uses a vector\r\n\r\n  if (shape === \"heightfield\") {\r\n    const s = newArgs[3];\r\n    s.x *= scale.x;\r\n    s.x *= scale.y;\r\n    s.x *= scale.z;\r\n    return newArgs;\r\n  } // Trimesh and convex scale the vertices\r\n\r\n\r\n  if (shape === \"trimesh\" || shape === \"convexHull\") {\r\n    newArgs[0] = scaleVertices(newArgs[0], scale);\r\n    return newArgs;\r\n  } // Prepfill with some extra\r\n\r\n\r\n  const scaleArray = [scale.x, scale.y, scale.z, scale.x, scale.x];\r\n  return newArgs.map((arg, index) => scaleArray[index] * arg);\r\n};\r\nconst createColliderFromOptions = (options, world, scale, getRigidBody) => {\r\n  const scaledArgs = scaleColliderArgs(options.shape, options.args, scale); // @ts-ignore\r\n\r\n  const desc = ColliderDesc[options.shape](...scaledArgs);\r\n  return world.createCollider(desc, getRigidBody === null || getRigidBody === void 0 ? void 0 : getRigidBody());\r\n};\r\nconst immutableColliderOptions = [\"shape\", \"args\"];\r\nconst massPropertiesConflictError = \"Please pick ONLY ONE of the `density`, `mass` and `massProperties` options.\";\r\n\r\nconst setColliderMassOptions = (collider, options) => {\r\n  if (options.density !== undefined) {\r\n    if (options.mass !== undefined || options.massProperties !== undefined) {\r\n      throw new Error(massPropertiesConflictError);\r\n    }\r\n\r\n    collider.setDensity(options.density);\r\n    return;\r\n  }\r\n\r\n  if (options.mass !== undefined) {\r\n    if (options.massProperties !== undefined) {\r\n      throw new Error(massPropertiesConflictError);\r\n    }\r\n\r\n    collider.setMass(options.mass);\r\n    return;\r\n  }\r\n\r\n  if (options.massProperties !== undefined) {\r\n    collider.setMassProperties(options.massProperties.mass, options.massProperties.centerOfMass, options.massProperties.principalAngularInertia, options.massProperties.angularInertiaLocalFrame);\r\n  }\r\n};\r\n\r\nconst mutableColliderOptions = {\r\n  sensor: (collider, value) => {\r\n    collider.setSensor(value);\r\n  },\r\n  collisionGroups: (collider, value) => {\r\n    collider.setCollisionGroups(value);\r\n  },\r\n  solverGroups: (collider, value) => {\r\n    collider.setSolverGroups(value);\r\n  },\r\n  friction: (collider, value) => {\r\n    collider.setFriction(value);\r\n  },\r\n  frictionCombineRule: (collider, value) => {\r\n    collider.setFrictionCombineRule(value);\r\n  },\r\n  restitution: (collider, value) => {\r\n    collider.setRestitution(value);\r\n  },\r\n  restitutionCombineRule: (collider, value) => {\r\n    collider.setRestitutionCombineRule(value);\r\n  },\r\n  activeCollisionTypes: (collider, value) => {\r\n    collider.setActiveCollisionTypes(value);\r\n  },\r\n  contactSkin: (collider, value) => {\r\n    collider.setContactSkin(value);\r\n  },\r\n  // To make sure the options all mutable options are listed\r\n  quaternion: () => {},\r\n  position: () => {},\r\n  rotation: () => {},\r\n  scale: () => {}\r\n};\r\nconst mutableColliderOptionKeys = Object.keys(mutableColliderOptions);\r\nconst setColliderOptions = (collider, options, states) => {\r\n  const state = states.get(collider.handle);\r\n\r\n  if (state) {\r\n    var _state$worldParent;\r\n\r\n    // Update collider position based on the object's position\r\n    const parentWorldScale = state.object.parent.getWorldScale(_vector3);\r\n    const parentInvertedWorldMatrix = (_state$worldParent = state.worldParent) === null || _state$worldParent === void 0 ? void 0 : _state$worldParent.matrixWorld.clone().invert();\r\n    state.object.updateWorldMatrix(true, false);\r\n\r\n    _matrix4.copy(state.object.matrixWorld);\r\n\r\n    if (parentInvertedWorldMatrix) {\r\n      _matrix4.premultiply(parentInvertedWorldMatrix);\r\n    }\r\n\r\n    _matrix4.decompose(_position, _rotation, _scale);\r\n\r\n    if (collider.parent()) {\r\n      collider.setTranslationWrtParent({\r\n        x: _position.x * parentWorldScale.x,\r\n        y: _position.y * parentWorldScale.y,\r\n        z: _position.z * parentWorldScale.z\r\n      });\r\n      collider.setRotationWrtParent(_rotation);\r\n    } else {\r\n      collider.setTranslation({\r\n        x: _position.x * parentWorldScale.x,\r\n        y: _position.y * parentWorldScale.y,\r\n        z: _position.z * parentWorldScale.z\r\n      });\r\n      collider.setRotation(_rotation);\r\n    }\r\n\r\n    mutableColliderOptionKeys.forEach(key => {\r\n      if (key in options) {\r\n        const option = options[key];\r\n        mutableColliderOptions[key](collider, // @ts-ignore Option does not want to fit into the function, but it will\r\n        option, options);\r\n      }\r\n    }); // handle mass separately, because the assignments\r\n    // are exclusive.\r\n\r\n    setColliderMassOptions(collider, options);\r\n  }\r\n};\r\nconst useUpdateColliderOptions = (getCollider, props, states) => {\r\n  // TODO: Improve this, split each prop into its own effect\r\n  const mutablePropsAsFlatArray = useMemo(() => mutableColliderOptionKeys.flatMap(key => {\r\n    return vectorToTuple(props[key]);\r\n  }), [props]);\r\n  useEffect(() => {\r\n    const collider = getCollider();\r\n    setColliderOptions(collider, props, states);\r\n  }, [...mutablePropsAsFlatArray, getCollider]);\r\n};\r\n\r\nconst isChildOfMeshCollider = child => {\r\n  let flag = false;\r\n  child.traverseAncestors(a => {\r\n    if (a.userData.r3RapierType === \"MeshCollider\") flag = true;\r\n  });\r\n  return flag;\r\n};\r\n\r\nconst createColliderState = (collider, object, rigidBodyObject) => {\r\n  return {\r\n    collider,\r\n    worldParent: rigidBodyObject || undefined,\r\n    object\r\n  };\r\n};\r\nconst autoColliderMap = {\r\n  cuboid: \"cuboid\",\r\n  ball: \"ball\",\r\n  hull: \"convexHull\",\r\n  trimesh: \"trimesh\"\r\n};\r\nconst createColliderPropsFromChildren = ({\r\n  object,\r\n  ignoreMeshColliders: _ignoreMeshColliders = true,\r\n  options\r\n}) => {\r\n  const childColliderProps = [];\r\n  object.updateWorldMatrix(true, false);\r\n  const invertedParentMatrixWorld = object.matrixWorld.clone().invert();\r\n\r\n  const colliderFromChild = child => {\r\n    if (\"isMesh\" in child) {\r\n      if (_ignoreMeshColliders && isChildOfMeshCollider(child)) return;\r\n      const worldScale = child.getWorldScale(_scale);\r\n      const shape = autoColliderMap[options.colliders || \"cuboid\"];\r\n      child.updateWorldMatrix(true, false);\r\n\r\n      _matrix4.copy(child.matrixWorld).premultiply(invertedParentMatrixWorld).decompose(_position, _rotation, _scale);\r\n\r\n      const rotationEuler = new Euler().setFromQuaternion(_rotation, \"XYZ\");\r\n      const {\r\n        geometry\r\n      } = child;\r\n      const {\r\n        args,\r\n        offset\r\n      } = getColliderArgsFromGeometry(geometry, options.colliders || \"cuboid\");\r\n\r\n      const colliderProps = _objectSpread2(_objectSpread2({}, cleanRigidBodyPropsForCollider(options)), {}, {\r\n        args: args,\r\n        shape: shape,\r\n        rotation: [rotationEuler.x, rotationEuler.y, rotationEuler.z],\r\n        position: [_position.x + offset.x * worldScale.x, _position.y + offset.y * worldScale.y, _position.z + offset.z * worldScale.z],\r\n        scale: [worldScale.x, worldScale.y, worldScale.z]\r\n      });\r\n\r\n      childColliderProps.push(colliderProps);\r\n    }\r\n  };\r\n\r\n  if (options.includeInvisible) {\r\n    object.traverse(colliderFromChild);\r\n  } else {\r\n    object.traverseVisible(colliderFromChild);\r\n  }\r\n\r\n  return childColliderProps;\r\n};\r\nconst getColliderArgsFromGeometry = (geometry, colliders) => {\r\n  switch (colliders) {\r\n    case \"cuboid\":\r\n      {\r\n        geometry.computeBoundingBox();\r\n        const {\r\n          boundingBox\r\n        } = geometry;\r\n        const size = boundingBox.getSize(new Vector3());\r\n        return {\r\n          args: [size.x / 2, size.y / 2, size.z / 2],\r\n          offset: boundingBox.getCenter(new Vector3())\r\n        };\r\n      }\r\n\r\n    case \"ball\":\r\n      {\r\n        geometry.computeBoundingSphere();\r\n        const {\r\n          boundingSphere\r\n        } = geometry;\r\n        const radius = boundingSphere.radius;\r\n        return {\r\n          args: [radius],\r\n          offset: boundingSphere.center\r\n        };\r\n      }\r\n\r\n    case \"trimesh\":\r\n      {\r\n        var _clonedGeometry$index;\r\n\r\n        const clonedGeometry = geometry.index ? geometry.clone() : mergeVertices(geometry);\r\n        return {\r\n          args: [clonedGeometry.attributes.position.array, (_clonedGeometry$index = clonedGeometry.index) === null || _clonedGeometry$index === void 0 ? void 0 : _clonedGeometry$index.array],\r\n          offset: new Vector3()\r\n        };\r\n      }\r\n\r\n    case \"hull\":\r\n      {\r\n        const g = geometry.clone();\r\n        return {\r\n          args: [g.attributes.position.array],\r\n          offset: new Vector3()\r\n        };\r\n      }\r\n  }\r\n\r\n  return {\r\n    args: [],\r\n    offset: new Vector3()\r\n  };\r\n};\r\nconst getActiveCollisionEventsFromProps = props => {\r\n  return {\r\n    collision: !!(props !== null && props !== void 0 && props.onCollisionEnter || props !== null && props !== void 0 && props.onCollisionExit || props !== null && props !== void 0 && props.onIntersectionEnter || props !== null && props !== void 0 && props.onIntersectionExit),\r\n    contactForce: !!(props !== null && props !== void 0 && props.onContactForce)\r\n  };\r\n};\r\nconst useColliderEvents = (getCollider, props, events,\r\n/**\r\n * The RigidBody can pass down active events to the collider without attaching the event listners\r\n */\r\nactiveEvents = {}) => {\r\n  const {\r\n    onCollisionEnter,\r\n    onCollisionExit,\r\n    onIntersectionEnter,\r\n    onIntersectionExit,\r\n    onContactForce\r\n  } = props;\r\n  useEffect(() => {\r\n    const collider = getCollider();\r\n\r\n    if (collider) {\r\n      const {\r\n        collision: collisionEventsActive,\r\n        contactForce: contactForceEventsActive\r\n      } = getActiveCollisionEventsFromProps(props);\r\n      const hasCollisionEvent = collisionEventsActive || activeEvents.collision;\r\n      const hasContactForceEvent = contactForceEventsActive || activeEvents.contactForce;\r\n\r\n      if (hasCollisionEvent && hasContactForceEvent) {\r\n        collider.setActiveEvents(ActiveEvents.COLLISION_EVENTS | ActiveEvents.CONTACT_FORCE_EVENTS);\r\n      } else if (hasCollisionEvent) {\r\n        collider.setActiveEvents(ActiveEvents.COLLISION_EVENTS);\r\n      } else if (hasContactForceEvent) {\r\n        collider.setActiveEvents(ActiveEvents.CONTACT_FORCE_EVENTS);\r\n      }\r\n\r\n      events.set(collider.handle, {\r\n        onCollisionEnter,\r\n        onCollisionExit,\r\n        onIntersectionEnter,\r\n        onIntersectionExit,\r\n        onContactForce\r\n      });\r\n    }\r\n\r\n    return () => {\r\n      if (collider) {\r\n        events.delete(collider.handle);\r\n      }\r\n    };\r\n  }, [onCollisionEnter, onCollisionExit, onIntersectionEnter, onIntersectionExit, onContactForce, activeEvents]);\r\n};\r\nconst cleanRigidBodyPropsForCollider = (props = {}) => {\r\n  const rest = _objectWithoutProperties(props, _excluded$2);\r\n\r\n  return rest;\r\n};\r\n\r\nconst useMutableCallback = fn => {\r\n  const ref = useRef(fn);\r\n  useEffect(() => {\r\n    ref.current = fn;\r\n  }, [fn]);\r\n  return ref;\r\n}; // External hooks\r\n\r\n/**\r\n * Exposes the Rapier context, and world\r\n * @category Hooks\r\n */\r\n\r\n\r\nconst useRapier = () => {\r\n  const rapier = useContext(rapierContext);\r\n  if (!rapier) throw new Error(\"react-three-rapier: useRapier must be used within <Physics />!\");\r\n  return rapier;\r\n};\r\n/**\r\n * Registers a callback to be called before the physics step\r\n * @category Hooks\r\n */\r\n\r\nconst useBeforePhysicsStep = callback => {\r\n  const {\r\n    beforeStepCallbacks\r\n  } = useRapier();\r\n  const ref = useMutableCallback(callback);\r\n  useEffect(() => {\r\n    beforeStepCallbacks.add(ref);\r\n    return () => {\r\n      beforeStepCallbacks.delete(ref);\r\n    };\r\n  }, []);\r\n};\r\n/**\r\n * Registers a callback to be called after the physics step\r\n * @category Hooks\r\n */\r\n\r\nconst useAfterPhysicsStep = callback => {\r\n  const {\r\n    afterStepCallbacks\r\n  } = useRapier();\r\n  const ref = useMutableCallback(callback);\r\n  useEffect(() => {\r\n    afterStepCallbacks.add(ref);\r\n    return () => {\r\n      afterStepCallbacks.delete(ref);\r\n    };\r\n  }, []);\r\n}; // Internal hooks\r\n\r\n/**\r\n * @internal\r\n */\r\n\r\nconst useChildColliderProps = (ref, options, ignoreMeshColliders = true) => {\r\n  const [colliderProps, setColliderProps] = useState([]);\r\n  useEffect(() => {\r\n    const object = ref.current;\r\n\r\n    if (object && options.colliders !== false) {\r\n      setColliderProps(createColliderPropsFromChildren({\r\n        object: ref.current,\r\n        options,\r\n        ignoreMeshColliders\r\n      }));\r\n    }\r\n  }, [options.colliders]);\r\n  return colliderProps;\r\n};\r\n\r\nconst Debug = /*#__PURE__*/memo(() => {\r\n  const {\r\n    world\r\n  } = useRapier();\r\n  const ref = useRef(null);\r\n  useFrame(() => {\r\n    const mesh = ref.current;\r\n    if (!mesh) return;\r\n    const buffers = world.debugRender();\r\n    mesh.geometry.setAttribute(\"position\", new BufferAttribute(buffers.vertices, 3));\r\n    mesh.geometry.setAttribute(\"color\", new BufferAttribute(buffers.colors, 4));\r\n  });\r\n  return /*#__PURE__*/React.createElement(\"group\", null, /*#__PURE__*/React.createElement(\"lineSegments\", {\r\n    ref: ref,\r\n    frustumCulled: false\r\n  }, /*#__PURE__*/React.createElement(\"lineBasicMaterial\", {\r\n    color: 0xffffff,\r\n    vertexColors: true\r\n  }), /*#__PURE__*/React.createElement(\"bufferGeometry\", null)));\r\n});\r\n\r\n/**\r\n * Creates a proxy that will create a singleton instance of the given class\r\n * when a property is accessed, and not before.\r\n *\r\n * @returns A proxy and a reset function, so that the instance can created again\r\n */\r\nconst createSingletonProxy = createInstance => {\r\n  let instance;\r\n  const handler = {\r\n    get(target, prop) {\r\n      if (!instance) {\r\n        instance = createInstance();\r\n      }\r\n\r\n      return Reflect.get(instance, prop);\r\n    },\r\n\r\n    set(target, prop, value) {\r\n      if (!instance) {\r\n        instance = createInstance();\r\n      }\r\n\r\n      return Reflect.set(instance, prop, value);\r\n    }\r\n\r\n  };\r\n  const proxy = new Proxy({}, handler);\r\n\r\n  const reset = () => {\r\n    instance = undefined;\r\n  };\r\n\r\n  const set = newInstance => {\r\n    instance = newInstance;\r\n  };\r\n  /**\r\n   * Return the proxy and a reset function\r\n   */\r\n\r\n\r\n  return {\r\n    proxy,\r\n    reset,\r\n    set\r\n  };\r\n};\r\n\r\nconst rapierContext = /*#__PURE__*/createContext(undefined);\r\n\r\nconst getCollisionPayloadFromSource = (target, other) => {\r\n  var _target$collider$stat, _target$rigidBody$sta, _other$collider$state, _other$rigidBody$stat, _other$collider$state2, _other$rigidBody$stat2;\r\n\r\n  return {\r\n    target: {\r\n      rigidBody: target.rigidBody.object,\r\n      collider: target.collider.object,\r\n      colliderObject: (_target$collider$stat = target.collider.state) === null || _target$collider$stat === void 0 ? void 0 : _target$collider$stat.object,\r\n      rigidBodyObject: (_target$rigidBody$sta = target.rigidBody.state) === null || _target$rigidBody$sta === void 0 ? void 0 : _target$rigidBody$sta.object\r\n    },\r\n    other: {\r\n      rigidBody: other.rigidBody.object,\r\n      collider: other.collider.object,\r\n      colliderObject: (_other$collider$state = other.collider.state) === null || _other$collider$state === void 0 ? void 0 : _other$collider$state.object,\r\n      rigidBodyObject: (_other$rigidBody$stat = other.rigidBody.state) === null || _other$rigidBody$stat === void 0 ? void 0 : _other$rigidBody$stat.object\r\n    },\r\n    rigidBody: other.rigidBody.object,\r\n    collider: other.collider.object,\r\n    colliderObject: (_other$collider$state2 = other.collider.state) === null || _other$collider$state2 === void 0 ? void 0 : _other$collider$state2.object,\r\n    rigidBodyObject: (_other$rigidBody$stat2 = other.rigidBody.state) === null || _other$rigidBody$stat2 === void 0 ? void 0 : _other$rigidBody$stat2.object\r\n  };\r\n};\r\n\r\nconst importRapier = async () => {\r\n  let r = await import('@dimforge/rapier3d-compat');\r\n  await r.init();\r\n  return r;\r\n};\r\n\r\n/**\r\n * The main physics component used to create a physics world.\r\n * @category Components\r\n */\r\nconst Physics = props => {\r\n  const {\r\n    colliders = \"cuboid\",\r\n    children,\r\n    timeStep = 1 / 60,\r\n    paused = false,\r\n    interpolate = true,\r\n    updatePriority,\r\n    updateLoop = \"follow\",\r\n    debug = false,\r\n    gravity = [0, -9.81, 0],\r\n    allowedLinearError = 0.001,\r\n    predictionDistance = 0.002,\r\n    numSolverIterations = 4,\r\n    numAdditionalFrictionIterations = 4,\r\n    numInternalPgsIterations = 1,\r\n    minIslandSize = 128,\r\n    maxCcdSubsteps = 1,\r\n    erp = 0.8,\r\n    lengthUnit = 1\r\n  } = props;\r\n  const rapier = suspend(importRapier, [\"@react-thee/rapier\", importRapier]);\r\n  const {\r\n    invalidate\r\n  } = useThree();\r\n  const rigidBodyStates = useConst(() => new Map());\r\n  const colliderStates = useConst(() => new Map());\r\n  const rigidBodyEvents = useConst(() => new Map());\r\n  const colliderEvents = useConst(() => new Map());\r\n  const eventQueue = useConst(() => new EventQueue(false));\r\n  const beforeStepCallbacks = useConst(() => new Set());\r\n  const afterStepCallbacks = useConst(() => new Set());\r\n  /**\r\n   * Initiate the world\r\n   * This creates a singleton proxy, so that the world is only created when\r\n   * something within it is accessed.\r\n   */\r\n\r\n  const {\r\n    proxy: worldProxy,\r\n    reset: resetWorldProxy,\r\n    set: setWorldProxy\r\n  } = useConst(() => createSingletonProxy(() => new rapier.World(vectorArrayToVector3(gravity))));\r\n  useEffect(() => {\r\n    return () => {\r\n      worldProxy.free();\r\n      resetWorldProxy();\r\n    };\r\n  }, []); // Update mutable props\r\n\r\n  useEffect(() => {\r\n    worldProxy.gravity = vector3ToRapierVector(gravity);\r\n    worldProxy.integrationParameters.numSolverIterations = numSolverIterations;\r\n    worldProxy.integrationParameters.numAdditionalFrictionIterations = numAdditionalFrictionIterations;\r\n    worldProxy.integrationParameters.numInternalPgsIterations = numInternalPgsIterations;\r\n    worldProxy.integrationParameters.normalizedAllowedLinearError = allowedLinearError;\r\n    worldProxy.integrationParameters.minIslandSize = minIslandSize;\r\n    worldProxy.integrationParameters.maxCcdSubsteps = maxCcdSubsteps;\r\n    worldProxy.integrationParameters.normalizedPredictionDistance = predictionDistance;\r\n    worldProxy.integrationParameters.erp = erp;\r\n    worldProxy.lengthUnit = lengthUnit;\r\n  }, [worldProxy, ...gravity, numSolverIterations, numAdditionalFrictionIterations, numInternalPgsIterations, allowedLinearError, minIslandSize, maxCcdSubsteps, predictionDistance, erp, lengthUnit]);\r\n  const getSourceFromColliderHandle = useCallback(handle => {\r\n    var _collider$parent;\r\n\r\n    const collider = worldProxy.getCollider(handle);\r\n    const colEvents = colliderEvents.get(handle);\r\n    const colliderState = colliderStates.get(handle);\r\n    const rigidBodyHandle = collider === null || collider === void 0 ? void 0 : (_collider$parent = collider.parent()) === null || _collider$parent === void 0 ? void 0 : _collider$parent.handle;\r\n    const rigidBody = rigidBodyHandle !== undefined ? worldProxy.getRigidBody(rigidBodyHandle) : undefined;\r\n    const rbEvents = rigidBody && rigidBodyHandle !== undefined ? rigidBodyEvents.get(rigidBodyHandle) : undefined;\r\n    const rigidBodyState = rigidBodyHandle !== undefined ? rigidBodyStates.get(rigidBodyHandle) : undefined;\r\n    const source = {\r\n      collider: {\r\n        object: collider,\r\n        events: colEvents,\r\n        state: colliderState\r\n      },\r\n      rigidBody: {\r\n        object: rigidBody,\r\n        events: rbEvents,\r\n        state: rigidBodyState\r\n      }\r\n    };\r\n    return source;\r\n  }, []);\r\n  const [steppingState] = useState({\r\n    previousState: {},\r\n    accumulator: 0\r\n  });\r\n  const step = useCallback(dt => {\r\n    const world = worldProxy;\r\n    /* Check if the timestep is supposed to be variable. We'll do this here\r\n      once so we don't have to string-check every frame. */\r\n\r\n    const timeStepVariable = timeStep === \"vary\";\r\n    /**\r\n     * Fixed timeStep simulation progression\r\n     * @see https://gafferongames.com/post/fix_your_timestep/\r\n     */\r\n\r\n    const clampedDelta = MathUtils.clamp(dt, 0, 0.5);\r\n\r\n    const stepWorld = delta => {\r\n      // Trigger beforeStep callbacks\r\n      beforeStepCallbacks.forEach(callback => {\r\n        callback.current(world);\r\n      });\r\n      world.timestep = delta;\r\n      world.step(eventQueue); // Trigger afterStep callbacks\r\n\r\n      afterStepCallbacks.forEach(callback => {\r\n        callback.current(world);\r\n      });\r\n    };\r\n\r\n    if (timeStepVariable) {\r\n      stepWorld(clampedDelta);\r\n    } else {\r\n      // don't step time forwards if paused\r\n      // Increase accumulator\r\n      steppingState.accumulator += clampedDelta;\r\n\r\n      while (steppingState.accumulator >= timeStep) {\r\n        // Set up previous state\r\n        // needed for accurate interpolations if the world steps more than once\r\n        if (interpolate) {\r\n          steppingState.previousState = {};\r\n          world.forEachRigidBody(body => {\r\n            steppingState.previousState[body.handle] = {\r\n              position: body.translation(),\r\n              rotation: body.rotation()\r\n            };\r\n          });\r\n        }\r\n\r\n        stepWorld(timeStep);\r\n        steppingState.accumulator -= timeStep;\r\n      }\r\n    }\r\n\r\n    const interpolationAlpha = timeStepVariable || !interpolate || paused ? 1 : steppingState.accumulator / timeStep; // Update meshes\r\n\r\n    rigidBodyStates.forEach((state, handle) => {\r\n      const rigidBody = world.getRigidBody(handle);\r\n      const events = rigidBodyEvents.get(handle);\r\n\r\n      if (events !== null && events !== void 0 && events.onSleep || events !== null && events !== void 0 && events.onWake) {\r\n        if (rigidBody.isSleeping() && !state.isSleeping) {\r\n          var _events$onSleep;\r\n\r\n          events === null || events === void 0 ? void 0 : (_events$onSleep = events.onSleep) === null || _events$onSleep === void 0 ? void 0 : _events$onSleep.call(events);\r\n        }\r\n\r\n        if (!rigidBody.isSleeping() && state.isSleeping) {\r\n          var _events$onWake;\r\n\r\n          events === null || events === void 0 ? void 0 : (_events$onWake = events.onWake) === null || _events$onWake === void 0 ? void 0 : _events$onWake.call(events);\r\n        }\r\n\r\n        state.isSleeping = rigidBody.isSleeping();\r\n      }\r\n\r\n      if (!rigidBody || rigidBody.isSleeping() && !(\"isInstancedMesh\" in state.object) || !state.setMatrix) {\r\n        return;\r\n      } // New states\r\n\r\n\r\n      let t = rigidBody.translation();\r\n      let r = rigidBody.rotation();\r\n      let previousState = steppingState.previousState[handle];\r\n\r\n      if (previousState) {\r\n        // Get previous simulated world position\r\n        _matrix4.compose(previousState.position, rapierQuaternionToQuaternion(previousState.rotation), state.scale).premultiply(state.invertedWorldMatrix).decompose(_position, _rotation, _scale); // Apply previous tick position\r\n\r\n\r\n        if (state.meshType == \"mesh\") {\r\n          state.object.position.copy(_position);\r\n          state.object.quaternion.copy(_rotation);\r\n        }\r\n      } // Get new position\r\n\r\n\r\n      _matrix4.compose(t, rapierQuaternionToQuaternion(r), state.scale).premultiply(state.invertedWorldMatrix).decompose(_position, _rotation, _scale);\r\n\r\n      if (state.meshType == \"instancedMesh\") {\r\n        state.setMatrix(_matrix4);\r\n      } else {\r\n        // Interpolate to new position\r\n        state.object.position.lerp(_position, interpolationAlpha);\r\n        state.object.quaternion.slerp(_rotation, interpolationAlpha);\r\n      }\r\n    });\r\n    eventQueue.drainCollisionEvents((handle1, handle2, started) => {\r\n      const source1 = getSourceFromColliderHandle(handle1);\r\n      const source2 = getSourceFromColliderHandle(handle2); // Collision Events\r\n\r\n      if (!(source1 !== null && source1 !== void 0 && source1.collider.object) || !(source2 !== null && source2 !== void 0 && source2.collider.object)) {\r\n        return;\r\n      }\r\n\r\n      const collisionPayload1 = getCollisionPayloadFromSource(source1, source2);\r\n      const collisionPayload2 = getCollisionPayloadFromSource(source2, source1);\r\n\r\n      if (started) {\r\n        world.contactPair(source1.collider.object, source2.collider.object, (manifold, flipped) => {\r\n          var _source1$rigidBody$ev, _source1$rigidBody$ev2, _source2$rigidBody$ev, _source2$rigidBody$ev2, _source1$collider$eve, _source1$collider$eve2, _source2$collider$eve, _source2$collider$eve2;\r\n\r\n          /* RigidBody events */\r\n          (_source1$rigidBody$ev = source1.rigidBody.events) === null || _source1$rigidBody$ev === void 0 ? void 0 : (_source1$rigidBody$ev2 = _source1$rigidBody$ev.onCollisionEnter) === null || _source1$rigidBody$ev2 === void 0 ? void 0 : _source1$rigidBody$ev2.call(_source1$rigidBody$ev, _objectSpread2(_objectSpread2({}, collisionPayload1), {}, {\r\n            manifold,\r\n            flipped\r\n          }));\r\n          (_source2$rigidBody$ev = source2.rigidBody.events) === null || _source2$rigidBody$ev === void 0 ? void 0 : (_source2$rigidBody$ev2 = _source2$rigidBody$ev.onCollisionEnter) === null || _source2$rigidBody$ev2 === void 0 ? void 0 : _source2$rigidBody$ev2.call(_source2$rigidBody$ev, _objectSpread2(_objectSpread2({}, collisionPayload2), {}, {\r\n            manifold,\r\n            flipped\r\n          }));\r\n          /* Collider events */\r\n\r\n          (_source1$collider$eve = source1.collider.events) === null || _source1$collider$eve === void 0 ? void 0 : (_source1$collider$eve2 = _source1$collider$eve.onCollisionEnter) === null || _source1$collider$eve2 === void 0 ? void 0 : _source1$collider$eve2.call(_source1$collider$eve, _objectSpread2(_objectSpread2({}, collisionPayload1), {}, {\r\n            manifold,\r\n            flipped\r\n          }));\r\n          (_source2$collider$eve = source2.collider.events) === null || _source2$collider$eve === void 0 ? void 0 : (_source2$collider$eve2 = _source2$collider$eve.onCollisionEnter) === null || _source2$collider$eve2 === void 0 ? void 0 : _source2$collider$eve2.call(_source2$collider$eve, _objectSpread2(_objectSpread2({}, collisionPayload2), {}, {\r\n            manifold,\r\n            flipped\r\n          }));\r\n        });\r\n      } else {\r\n        var _source1$rigidBody$ev3, _source1$rigidBody$ev4, _source2$rigidBody$ev3, _source2$rigidBody$ev4, _source1$collider$eve3, _source1$collider$eve4, _source2$collider$eve3, _source2$collider$eve4;\r\n\r\n        (_source1$rigidBody$ev3 = source1.rigidBody.events) === null || _source1$rigidBody$ev3 === void 0 ? void 0 : (_source1$rigidBody$ev4 = _source1$rigidBody$ev3.onCollisionExit) === null || _source1$rigidBody$ev4 === void 0 ? void 0 : _source1$rigidBody$ev4.call(_source1$rigidBody$ev3, collisionPayload1);\r\n        (_source2$rigidBody$ev3 = source2.rigidBody.events) === null || _source2$rigidBody$ev3 === void 0 ? void 0 : (_source2$rigidBody$ev4 = _source2$rigidBody$ev3.onCollisionExit) === null || _source2$rigidBody$ev4 === void 0 ? void 0 : _source2$rigidBody$ev4.call(_source2$rigidBody$ev3, collisionPayload2);\r\n        (_source1$collider$eve3 = source1.collider.events) === null || _source1$collider$eve3 === void 0 ? void 0 : (_source1$collider$eve4 = _source1$collider$eve3.onCollisionExit) === null || _source1$collider$eve4 === void 0 ? void 0 : _source1$collider$eve4.call(_source1$collider$eve3, collisionPayload1);\r\n        (_source2$collider$eve3 = source2.collider.events) === null || _source2$collider$eve3 === void 0 ? void 0 : (_source2$collider$eve4 = _source2$collider$eve3.onCollisionExit) === null || _source2$collider$eve4 === void 0 ? void 0 : _source2$collider$eve4.call(_source2$collider$eve3, collisionPayload2);\r\n      } // Sensor Intersections\r\n\r\n\r\n      if (started) {\r\n        if (world.intersectionPair(source1.collider.object, source2.collider.object)) {\r\n          var _source1$rigidBody$ev5, _source1$rigidBody$ev6, _source2$rigidBody$ev5, _source2$rigidBody$ev6, _source1$collider$eve5, _source1$collider$eve6, _source2$collider$eve5, _source2$collider$eve6;\r\n\r\n          (_source1$rigidBody$ev5 = source1.rigidBody.events) === null || _source1$rigidBody$ev5 === void 0 ? void 0 : (_source1$rigidBody$ev6 = _source1$rigidBody$ev5.onIntersectionEnter) === null || _source1$rigidBody$ev6 === void 0 ? void 0 : _source1$rigidBody$ev6.call(_source1$rigidBody$ev5, collisionPayload1);\r\n          (_source2$rigidBody$ev5 = source2.rigidBody.events) === null || _source2$rigidBody$ev5 === void 0 ? void 0 : (_source2$rigidBody$ev6 = _source2$rigidBody$ev5.onIntersectionEnter) === null || _source2$rigidBody$ev6 === void 0 ? void 0 : _source2$rigidBody$ev6.call(_source2$rigidBody$ev5, collisionPayload2);\r\n          (_source1$collider$eve5 = source1.collider.events) === null || _source1$collider$eve5 === void 0 ? void 0 : (_source1$collider$eve6 = _source1$collider$eve5.onIntersectionEnter) === null || _source1$collider$eve6 === void 0 ? void 0 : _source1$collider$eve6.call(_source1$collider$eve5, collisionPayload1);\r\n          (_source2$collider$eve5 = source2.collider.events) === null || _source2$collider$eve5 === void 0 ? void 0 : (_source2$collider$eve6 = _source2$collider$eve5.onIntersectionEnter) === null || _source2$collider$eve6 === void 0 ? void 0 : _source2$collider$eve6.call(_source2$collider$eve5, collisionPayload2);\r\n        }\r\n      } else {\r\n        var _source1$rigidBody$ev7, _source1$rigidBody$ev8, _source2$rigidBody$ev7, _source2$rigidBody$ev8, _source1$collider$eve7, _source1$collider$eve8, _source2$collider$eve7, _source2$collider$eve8;\r\n\r\n        (_source1$rigidBody$ev7 = source1.rigidBody.events) === null || _source1$rigidBody$ev7 === void 0 ? void 0 : (_source1$rigidBody$ev8 = _source1$rigidBody$ev7.onIntersectionExit) === null || _source1$rigidBody$ev8 === void 0 ? void 0 : _source1$rigidBody$ev8.call(_source1$rigidBody$ev7, collisionPayload1);\r\n        (_source2$rigidBody$ev7 = source2.rigidBody.events) === null || _source2$rigidBody$ev7 === void 0 ? void 0 : (_source2$rigidBody$ev8 = _source2$rigidBody$ev7.onIntersectionExit) === null || _source2$rigidBody$ev8 === void 0 ? void 0 : _source2$rigidBody$ev8.call(_source2$rigidBody$ev7, collisionPayload2);\r\n        (_source1$collider$eve7 = source1.collider.events) === null || _source1$collider$eve7 === void 0 ? void 0 : (_source1$collider$eve8 = _source1$collider$eve7.onIntersectionExit) === null || _source1$collider$eve8 === void 0 ? void 0 : _source1$collider$eve8.call(_source1$collider$eve7, collisionPayload1);\r\n        (_source2$collider$eve7 = source2.collider.events) === null || _source2$collider$eve7 === void 0 ? void 0 : (_source2$collider$eve8 = _source2$collider$eve7.onIntersectionExit) === null || _source2$collider$eve8 === void 0 ? void 0 : _source2$collider$eve8.call(_source2$collider$eve7, collisionPayload2);\r\n      }\r\n    });\r\n    eventQueue.drainContactForceEvents(event => {\r\n      var _source1$rigidBody$ev9, _source1$rigidBody$ev10, _source2$rigidBody$ev9, _source2$rigidBody$ev10, _source1$collider$eve9, _source1$collider$eve10, _source2$collider$eve9, _source2$collider$eve10;\r\n\r\n      const source1 = getSourceFromColliderHandle(event.collider1());\r\n      const source2 = getSourceFromColliderHandle(event.collider2()); // Collision Events\r\n\r\n      if (!(source1 !== null && source1 !== void 0 && source1.collider.object) || !(source2 !== null && source2 !== void 0 && source2.collider.object)) {\r\n        return;\r\n      }\r\n\r\n      const collisionPayload1 = getCollisionPayloadFromSource(source1, source2);\r\n      const collisionPayload2 = getCollisionPayloadFromSource(source2, source1);\r\n      (_source1$rigidBody$ev9 = source1.rigidBody.events) === null || _source1$rigidBody$ev9 === void 0 ? void 0 : (_source1$rigidBody$ev10 = _source1$rigidBody$ev9.onContactForce) === null || _source1$rigidBody$ev10 === void 0 ? void 0 : _source1$rigidBody$ev10.call(_source1$rigidBody$ev9, _objectSpread2(_objectSpread2({}, collisionPayload1), {}, {\r\n        totalForce: event.totalForce(),\r\n        totalForceMagnitude: event.totalForceMagnitude(),\r\n        maxForceDirection: event.maxForceDirection(),\r\n        maxForceMagnitude: event.maxForceMagnitude()\r\n      }));\r\n      (_source2$rigidBody$ev9 = source2.rigidBody.events) === null || _source2$rigidBody$ev9 === void 0 ? void 0 : (_source2$rigidBody$ev10 = _source2$rigidBody$ev9.onContactForce) === null || _source2$rigidBody$ev10 === void 0 ? void 0 : _source2$rigidBody$ev10.call(_source2$rigidBody$ev9, _objectSpread2(_objectSpread2({}, collisionPayload2), {}, {\r\n        totalForce: event.totalForce(),\r\n        totalForceMagnitude: event.totalForceMagnitude(),\r\n        maxForceDirection: event.maxForceDirection(),\r\n        maxForceMagnitude: event.maxForceMagnitude()\r\n      }));\r\n      (_source1$collider$eve9 = source1.collider.events) === null || _source1$collider$eve9 === void 0 ? void 0 : (_source1$collider$eve10 = _source1$collider$eve9.onContactForce) === null || _source1$collider$eve10 === void 0 ? void 0 : _source1$collider$eve10.call(_source1$collider$eve9, _objectSpread2(_objectSpread2({}, collisionPayload1), {}, {\r\n        totalForce: event.totalForce(),\r\n        totalForceMagnitude: event.totalForceMagnitude(),\r\n        maxForceDirection: event.maxForceDirection(),\r\n        maxForceMagnitude: event.maxForceMagnitude()\r\n      }));\r\n      (_source2$collider$eve9 = source2.collider.events) === null || _source2$collider$eve9 === void 0 ? void 0 : (_source2$collider$eve10 = _source2$collider$eve9.onContactForce) === null || _source2$collider$eve10 === void 0 ? void 0 : _source2$collider$eve10.call(_source2$collider$eve9, _objectSpread2(_objectSpread2({}, collisionPayload2), {}, {\r\n        totalForce: event.totalForce(),\r\n        totalForceMagnitude: event.totalForceMagnitude(),\r\n        maxForceDirection: event.maxForceDirection(),\r\n        maxForceMagnitude: event.maxForceMagnitude()\r\n      }));\r\n    });\r\n    world.forEachActiveRigidBody(() => {\r\n      invalidate();\r\n    });\r\n  }, [paused, timeStep, interpolate, worldProxy]);\r\n  const context = useMemo(() => ({\r\n    rapier,\r\n    world: worldProxy,\r\n    setWorld: world => {\r\n      setWorldProxy(world);\r\n    },\r\n    physicsOptions: {\r\n      colliders,\r\n      gravity\r\n    },\r\n    rigidBodyStates,\r\n    colliderStates,\r\n    rigidBodyEvents,\r\n    colliderEvents,\r\n    beforeStepCallbacks,\r\n    afterStepCallbacks,\r\n    isPaused: paused,\r\n    isDebug: debug,\r\n    step\r\n  }), [paused, step, debug, colliders, gravity]);\r\n  const stepCallback = useCallback(delta => {\r\n    if (!paused) {\r\n      step(delta);\r\n    }\r\n  }, [paused, step]);\r\n  return /*#__PURE__*/React.createElement(rapierContext.Provider, {\r\n    value: context\r\n  }, /*#__PURE__*/React.createElement(FrameStepper$1, {\r\n    onStep: stepCallback,\r\n    type: updateLoop,\r\n    updatePriority: updatePriority\r\n  }), debug && /*#__PURE__*/React.createElement(Debug, null), children);\r\n};\r\n\r\nfunction _extends() {\r\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\r\n    for (var i = 1; i < arguments.length; i++) {\r\n      var source = arguments[i];\r\n\r\n      for (var key in source) {\r\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\r\n          target[key] = source[key];\r\n        }\r\n      }\r\n    }\r\n\r\n    return target;\r\n  };\r\n  return _extends.apply(this, arguments);\r\n}\r\n\r\n/**\r\n * Initiate an instance and return a safe getter\r\n */\r\n\r\nconst useImperativeInstance = (createFn, destroyFn, dependencyList) => {\r\n  const ref = useRef();\r\n  const getInstance = useCallback(() => {\r\n    if (!ref.current) {\r\n      ref.current = createFn();\r\n    }\r\n\r\n    return ref.current;\r\n  }, dependencyList);\r\n  useEffect(() => {\r\n    // Save the destroy function and instance\r\n    const instance = getInstance();\r\n\r\n    const destroy = () => destroyFn(instance);\r\n\r\n    return () => {\r\n      destroy();\r\n      ref.current = undefined;\r\n    };\r\n  }, [getInstance]);\r\n  return getInstance;\r\n};\r\n\r\n/**\r\n * Takes an object resembling a Vector3 and returs a Three.Vector3\r\n * @category Math helpers\r\n */\r\n\r\nconst vec3 = ({\r\n  x,\r\n  y,\r\n  z\r\n} = {\r\n  x: 0,\r\n  y: 0,\r\n  z: 0\r\n}) => {\r\n  return new Vector3(x, y, z);\r\n};\r\n/**\r\n * Takes an object resembling a Quaternion and returs a Three.Quaternion\r\n * @category Math helpers\r\n */\r\n\r\nconst quat = ({\r\n  x,\r\n  y,\r\n  z,\r\n  w\r\n} = {\r\n  x: 0,\r\n  y: 0,\r\n  z: 0,\r\n  w: 1\r\n}) => {\r\n  return new Quaternion(x, y, z, w);\r\n};\r\n/**\r\n * Takes an object resembling an Euler and returs a Three.Euler\r\n * @category Math helpers\r\n */\r\n\r\nconst euler = ({\r\n  x,\r\n  y,\r\n  z\r\n} = {\r\n  x: 0,\r\n  y: 0,\r\n  z: 0\r\n}) => {\r\n  return new Euler(x, y, z);\r\n};\r\n\r\nconst useForwardedRef = (forwardedRef, defaultValue = null) => {\r\n  const innerRef = useRef(defaultValue); // Update the forwarded ref when the inner ref changes\r\n\r\n  if (forwardedRef && typeof forwardedRef !== \"function\") {\r\n    if (!forwardedRef.current) {\r\n      forwardedRef.current = innerRef.current;\r\n    }\r\n\r\n    return forwardedRef;\r\n  }\r\n\r\n  return innerRef;\r\n};\r\n\r\n/**\r\n * A collider is a shape that can be attached to a rigid body to define its physical properties.\r\n * @internal\r\n */\r\nconst AnyCollider = /*#__PURE__*/memo( /*#__PURE__*/forwardRef((props, forwardedRef) => {\r\n  const {\r\n    children,\r\n    position,\r\n    rotation,\r\n    quaternion,\r\n    scale,\r\n    name\r\n  } = props;\r\n  const {\r\n    world,\r\n    colliderEvents,\r\n    colliderStates\r\n  } = useRapier();\r\n  const rigidBodyContext = useRigidBodyContext();\r\n  const colliderRef = useForwardedRef(forwardedRef);\r\n  const objectRef = useRef(null); // We spread the props out here to make sure that the ref is updated when the props change.\r\n\r\n  const immutablePropArray = immutableColliderOptions.flatMap(key => Array.isArray(props[key]) ? [...props[key]] : props[key]);\r\n  const getInstance = useImperativeInstance(() => {\r\n    const worldScale = objectRef.current.getWorldScale(vec3());\r\n    const collider = createColliderFromOptions(props, world, worldScale, rigidBodyContext === null || rigidBodyContext === void 0 ? void 0 : rigidBodyContext.getRigidBody);\r\n\r\n    if (typeof forwardedRef == \"function\") {\r\n      forwardedRef(collider);\r\n    }\r\n\r\n    colliderRef.current = collider;\r\n    return collider;\r\n  }, collider => {\r\n    if (world.getCollider(collider.handle)) {\r\n      world.removeCollider(collider, true);\r\n    }\r\n  }, [...immutablePropArray, rigidBodyContext]);\r\n  useEffect(() => {\r\n    const collider = getInstance();\r\n    colliderStates.set(collider.handle, createColliderState(collider, objectRef.current, rigidBodyContext === null || rigidBodyContext === void 0 ? void 0 : rigidBodyContext.ref.current));\r\n    return () => {\r\n      colliderStates.delete(collider.handle);\r\n    };\r\n  }, [getInstance]);\r\n  const mergedProps = useMemo(() => {\r\n    return _objectSpread2(_objectSpread2({}, cleanRigidBodyPropsForCollider(rigidBodyContext === null || rigidBodyContext === void 0 ? void 0 : rigidBodyContext.options)), props);\r\n  }, [props, rigidBodyContext === null || rigidBodyContext === void 0 ? void 0 : rigidBodyContext.options]);\r\n  useUpdateColliderOptions(getInstance, mergedProps, colliderStates);\r\n  useColliderEvents(getInstance, mergedProps, colliderEvents, getActiveCollisionEventsFromProps(rigidBodyContext === null || rigidBodyContext === void 0 ? void 0 : rigidBodyContext.options));\r\n  return /*#__PURE__*/React.createElement(\"object3D\", {\r\n    position: position,\r\n    rotation: rotation,\r\n    quaternion: quaternion,\r\n    scale: scale,\r\n    ref: objectRef,\r\n    name: name\r\n  }, children);\r\n}));\r\n\r\n/**\r\n * A cuboid collider shape\r\n * @category Colliders\r\n */\r\nconst CuboidCollider = /*#__PURE__*/React.forwardRef((props, ref) => {\r\n  return /*#__PURE__*/React.createElement(AnyCollider, _extends({}, props, {\r\n    shape: \"cuboid\",\r\n    ref: ref\r\n  }));\r\n});\r\nCuboidCollider.displayName = \"CuboidCollider\";\r\n\r\n/**\r\n * A round cuboid collider shape\r\n * @category Colliders\r\n */\r\nconst RoundCuboidCollider = /*#__PURE__*/React.forwardRef((props, ref) => /*#__PURE__*/React.createElement(AnyCollider, _extends({}, props, {\r\n  shape: \"roundCuboid\",\r\n  ref: ref\r\n})));\r\nRoundCuboidCollider.displayName = \"RoundCuboidCollider\";\r\n\r\n/**\r\n * A ball collider shape\r\n * @category Colliders\r\n */\r\nconst BallCollider = /*#__PURE__*/React.forwardRef((props, ref) => /*#__PURE__*/React.createElement(AnyCollider, _extends({}, props, {\r\n  shape: \"ball\",\r\n  ref: ref\r\n})));\r\nBallCollider.displayName = \"BallCollider\";\r\n\r\n/**\r\n * A capsule collider shape\r\n * @category Colliders\r\n */\r\nconst CapsuleCollider = /*#__PURE__*/React.forwardRef((props, ref) => /*#__PURE__*/React.createElement(AnyCollider, _extends({}, props, {\r\n  shape: \"capsule\",\r\n  ref: ref\r\n})));\r\nCapsuleCollider.displayName = \"CapsuleCollider\";\r\n\r\n/**\r\n * A heightfield collider shape\r\n * @category Colliders\r\n */\r\nconst HeightfieldCollider = /*#__PURE__*/React.forwardRef((props, ref) => /*#__PURE__*/React.createElement(AnyCollider, _extends({}, props, {\r\n  shape: \"heightfield\",\r\n  ref: ref\r\n})));\r\nHeightfieldCollider.displayName = \"HeightfieldCollider\";\r\n\r\n/**\r\n * A trimesh collider shape\r\n * @category Colliders\r\n */\r\nconst TrimeshCollider = /*#__PURE__*/React.forwardRef((props, ref) => /*#__PURE__*/React.createElement(AnyCollider, _extends({}, props, {\r\n  shape: \"trimesh\",\r\n  ref: ref\r\n})));\r\nTrimeshCollider.displayName = \"TrimeshCollider\";\r\n\r\n/**\r\n * A cone collider shape\r\n * @category Colliders\r\n */\r\nconst ConeCollider = /*#__PURE__*/React.forwardRef((props, ref) => /*#__PURE__*/React.createElement(AnyCollider, _extends({}, props, {\r\n  shape: \"cone\",\r\n  ref: ref\r\n})));\r\nConeCollider.displayName = \"ConeCollider\";\r\n\r\n/**\r\n * A round cylinder collider shape\r\n * @category Colliders\r\n */\r\nconst RoundConeCollider = /*#__PURE__*/React.forwardRef((props, ref) => /*#__PURE__*/React.createElement(AnyCollider, _extends({}, props, {\r\n  shape: \"roundCone\",\r\n  ref: ref\r\n})));\r\nRoundConeCollider.displayName = \"RoundConeCollider\";\r\n\r\n/**\r\n * A cylinder collider shape\r\n * @category Colliders\r\n */\r\nconst CylinderCollider = /*#__PURE__*/React.forwardRef((props, ref) => /*#__PURE__*/React.createElement(AnyCollider, _extends({}, props, {\r\n  shape: \"cylinder\",\r\n  ref: ref\r\n})));\r\nCylinderCollider.displayName = \"CylinderCollider\";\r\n\r\n/**\r\n * A round cylinder collider shape\r\n * @category Colliders\r\n */\r\nconst RoundCylinderCollider = /*#__PURE__*/React.forwardRef((props, ref) => /*#__PURE__*/React.createElement(AnyCollider, _extends({}, props, {\r\n  shape: \"roundCylinder\",\r\n  ref: ref\r\n})));\r\nCylinderCollider.displayName = \"RoundCylinderCollider\";\r\n\r\n/**\r\n * A convex hull collider shape\r\n * @category Colliders\r\n */\r\nconst ConvexHullCollider = /*#__PURE__*/React.forwardRef((props, ref) => /*#__PURE__*/React.createElement(AnyCollider, _extends({}, props, {\r\n  shape: \"convexHull\",\r\n  ref: ref\r\n})));\r\nConvexHullCollider.displayName = \"ConvexHullCollider\";\r\n\r\nconst rigidBodyDescFromOptions = options => {\r\n  var _options$canSleep;\r\n\r\n  const type = rigidBodyTypeFromString((options === null || options === void 0 ? void 0 : options.type) || \"dynamic\");\r\n  const desc = new RigidBodyDesc(type); // Apply immutable options\r\n\r\n  desc.canSleep = (_options$canSleep = options === null || options === void 0 ? void 0 : options.canSleep) !== null && _options$canSleep !== void 0 ? _options$canSleep : true;\r\n  return desc;\r\n};\r\nconst createRigidBodyState = ({\r\n  rigidBody,\r\n  object,\r\n  setMatrix,\r\n  getMatrix,\r\n  worldScale,\r\n  meshType: _meshType = \"mesh\"\r\n}) => {\r\n  object.updateWorldMatrix(true, false);\r\n  const invertedWorldMatrix = object.parent.matrixWorld.clone().invert();\r\n  return {\r\n    object,\r\n    rigidBody,\r\n    invertedWorldMatrix,\r\n    setMatrix: setMatrix ? setMatrix : matrix => {\r\n      object.matrix.copy(matrix);\r\n    },\r\n    getMatrix: getMatrix ? getMatrix : matrix => matrix.copy(object.matrix),\r\n    scale: worldScale || object.getWorldScale(_scale).clone(),\r\n    isSleeping: false,\r\n    meshType: _meshType\r\n  };\r\n};\r\nconst immutableRigidBodyOptions = [\"args\", \"colliders\", \"canSleep\"];\r\nconst mutableRigidBodyOptions = {\r\n  gravityScale: (rb, value) => {\r\n    rb.setGravityScale(value, true);\r\n  },\r\n\r\n  additionalSolverIterations(rb, value) {\r\n    rb.setAdditionalSolverIterations(value);\r\n  },\r\n\r\n  linearDamping: (rb, value) => {\r\n    rb.setLinearDamping(value);\r\n  },\r\n  angularDamping: (rb, value) => {\r\n    rb.setAngularDamping(value);\r\n  },\r\n  dominanceGroup: (rb, value) => {\r\n    rb.setDominanceGroup(value);\r\n  },\r\n  enabledRotations: (rb, [x, y, z]) => {\r\n    rb.setEnabledRotations(x, y, z, true);\r\n  },\r\n  enabledTranslations: (rb, [x, y, z]) => {\r\n    rb.setEnabledTranslations(x, y, z, true);\r\n  },\r\n  lockRotations: (rb, value) => {\r\n    rb.lockRotations(value, true);\r\n  },\r\n  lockTranslations: (rb, value) => {\r\n    rb.lockTranslations(value, true);\r\n  },\r\n  angularVelocity: (rb, [x, y, z]) => {\r\n    rb.setAngvel({\r\n      x,\r\n      y,\r\n      z\r\n    }, true);\r\n  },\r\n  linearVelocity: (rb, [x, y, z]) => {\r\n    rb.setLinvel({\r\n      x,\r\n      y,\r\n      z\r\n    }, true);\r\n  },\r\n  ccd: (rb, value) => {\r\n    rb.enableCcd(value);\r\n  },\r\n  softCcdPrediction: (rb, value) => {\r\n    rb.setSoftCcdPrediction(value);\r\n  },\r\n  userData: (rb, value) => {\r\n    rb.userData = value;\r\n  },\r\n\r\n  type(rb, value) {\r\n    rb.setBodyType(rigidBodyTypeFromString(value), true);\r\n  },\r\n\r\n  position: () => {},\r\n  rotation: () => {},\r\n  quaternion: () => {},\r\n  scale: () => {}\r\n};\r\nconst mutableRigidBodyOptionKeys = Object.keys(mutableRigidBodyOptions);\r\nconst setRigidBodyOptions = (rigidBody, options, states, updateTranslations = true) => {\r\n  if (!rigidBody) {\r\n    return;\r\n  }\r\n\r\n  const state = states.get(rigidBody.handle);\r\n\r\n  if (state) {\r\n    if (updateTranslations) {\r\n      state.object.updateWorldMatrix(true, false);\r\n\r\n      _matrix4.copy(state.object.matrixWorld).decompose(_position, _rotation, _scale);\r\n\r\n      rigidBody.setTranslation(_position, false);\r\n      rigidBody.setRotation(_rotation, false);\r\n    }\r\n\r\n    mutableRigidBodyOptionKeys.forEach(key => {\r\n      if (key in options) {\r\n        mutableRigidBodyOptions[key](rigidBody, options[key]);\r\n      }\r\n    });\r\n  }\r\n};\r\nconst useUpdateRigidBodyOptions = (getRigidBody, props, states, updateTranslations = true) => {\r\n  // TODO: Improve this, split each prop into its own effect\r\n  const mutablePropsAsFlatArray = useMemo(() => mutableRigidBodyOptionKeys.flatMap(key => {\r\n    return vectorToTuple(props[key]);\r\n  }), [props]);\r\n  useEffect(() => {\r\n    const rigidBody = getRigidBody();\r\n    setRigidBodyOptions(rigidBody, props, states, updateTranslations);\r\n  }, mutablePropsAsFlatArray);\r\n};\r\nconst useRigidBodyEvents = (getRigidBody, props, events) => {\r\n  const {\r\n    onWake,\r\n    onSleep,\r\n    onCollisionEnter,\r\n    onCollisionExit,\r\n    onIntersectionEnter,\r\n    onIntersectionExit,\r\n    onContactForce\r\n  } = props;\r\n  const eventHandlers = {\r\n    onWake,\r\n    onSleep,\r\n    onCollisionEnter,\r\n    onCollisionExit,\r\n    onIntersectionEnter,\r\n    onIntersectionExit,\r\n    onContactForce\r\n  };\r\n  useEffect(() => {\r\n    const rigidBody = getRigidBody();\r\n    events.set(rigidBody.handle, eventHandlers);\r\n    return () => {\r\n      events.delete(rigidBody.handle);\r\n    };\r\n  }, [onWake, onSleep, onCollisionEnter, onCollisionExit, onIntersectionEnter, onIntersectionExit, onContactForce]);\r\n};\r\n\r\nconst _excluded$1 = [\"children\", \"type\", \"position\", \"rotation\", \"scale\", \"quaternion\", \"transformState\"];\r\nconst RigidBodyContext = /*#__PURE__*/createContext(undefined);\r\nconst useRigidBodyContext = () => useContext(RigidBodyContext);\r\n\r\n/**\r\n * A rigid body is a physical object that can be simulated by the physics engine.\r\n * @category Components\r\n */\r\nconst RigidBody = /*#__PURE__*/memo( /*#__PURE__*/forwardRef((props, forwardedRef) => {\r\n  const {\r\n    children,\r\n    type,\r\n    position,\r\n    rotation,\r\n    scale,\r\n    quaternion,\r\n    transformState\r\n  } = props,\r\n        objectProps = _objectWithoutProperties(props, _excluded$1);\r\n\r\n  const objectRef = useRef(null);\r\n  const rigidBodyRef = useForwardedRef(forwardedRef);\r\n  const {\r\n    world,\r\n    rigidBodyStates,\r\n    physicsOptions,\r\n    rigidBodyEvents\r\n  } = useRapier();\r\n  const mergedOptions = useMemo(() => {\r\n    return _objectSpread2(_objectSpread2(_objectSpread2({}, physicsOptions), props), {}, {\r\n      children: undefined\r\n    });\r\n  }, [physicsOptions, props]);\r\n  const immutablePropArray = immutableRigidBodyOptions.flatMap(key => {\r\n    return Array.isArray(mergedOptions[key]) ? [...mergedOptions[key]] : mergedOptions[key];\r\n  });\r\n  const childColliderProps = useChildColliderProps(objectRef, mergedOptions); // Provide a way to eagerly create rigidbody\r\n\r\n  const getRigidBody = useImperativeInstance(() => {\r\n    const desc = rigidBodyDescFromOptions(mergedOptions);\r\n    const rigidBody = world.createRigidBody(desc);\r\n\r\n    if (typeof forwardedRef === \"function\") {\r\n      forwardedRef(rigidBody);\r\n    }\r\n\r\n    rigidBodyRef.current = rigidBody;\r\n    return rigidBody;\r\n  }, rigidBody => {\r\n    if (world.getRigidBody(rigidBody.handle)) {\r\n      world.removeRigidBody(rigidBody);\r\n    }\r\n  }, immutablePropArray); // Only provide a object state after the ref has been set\r\n\r\n  useEffect(() => {\r\n    const rigidBody = getRigidBody();\r\n    const state = createRigidBodyState({\r\n      rigidBody,\r\n      object: objectRef.current\r\n    });\r\n    rigidBodyStates.set(rigidBody.handle, props.transformState ? props.transformState(state) : state);\r\n    return () => {\r\n      rigidBodyStates.delete(rigidBody.handle);\r\n    };\r\n  }, [getRigidBody]);\r\n  useUpdateRigidBodyOptions(getRigidBody, mergedOptions, rigidBodyStates);\r\n  useRigidBodyEvents(getRigidBody, mergedOptions, rigidBodyEvents);\r\n  const contextValue = useMemo(() => {\r\n    return {\r\n      ref: objectRef,\r\n      getRigidBody: getRigidBody,\r\n      options: mergedOptions\r\n    };\r\n  }, [getRigidBody]);\r\n  return /*#__PURE__*/React.createElement(RigidBodyContext.Provider, {\r\n    value: contextValue\r\n  }, /*#__PURE__*/React.createElement(\"object3D\", _extends({\r\n    ref: objectRef\r\n  }, objectProps, {\r\n    position: position,\r\n    rotation: rotation,\r\n    quaternion: quaternion,\r\n    scale: scale\r\n  }), children, childColliderProps.map((colliderProps, index) => /*#__PURE__*/React.createElement(AnyCollider, _extends({\r\n    key: index\r\n  }, colliderProps)))));\r\n}));\r\nRigidBody.displayName = \"RigidBody\";\r\n\r\n/**\r\n * A mesh collider is a collider that is automatically generated from the geometry of the children.\r\n * @category Colliders\r\n */\r\nconst MeshCollider = /*#__PURE__*/memo(props => {\r\n  const {\r\n    children,\r\n    type\r\n  } = props;\r\n  const {\r\n    physicsOptions\r\n  } = useRapier();\r\n  const object = useRef(null);\r\n  const {\r\n    options\r\n  } = useRigidBodyContext();\r\n  const mergedOptions = useMemo(() => {\r\n    return _objectSpread2(_objectSpread2(_objectSpread2({}, physicsOptions), options), {}, {\r\n      children: undefined,\r\n      colliders: type\r\n    });\r\n  }, [physicsOptions, options]);\r\n  const childColliderProps = useChildColliderProps(object, mergedOptions, false);\r\n  return /*#__PURE__*/React.createElement(\"object3D\", {\r\n    ref: object,\r\n    userData: {\r\n      r3RapierType: \"MeshCollider\"\r\n    }\r\n  }, children, childColliderProps.map((colliderProps, index) => /*#__PURE__*/React.createElement(AnyCollider, _extends({\r\n    key: index\r\n  }, colliderProps))));\r\n});\r\nMeshCollider.displayName = \"MeshCollider\";\r\n\r\nconst _excluded = [\"children\", \"instances\", \"colliderNodes\", \"position\", \"rotation\", \"quaternion\", \"scale\"];\r\nconst InstancedRigidBodies = /*#__PURE__*/memo( /*#__PURE__*/forwardRef((props, forwardedRef) => {\r\n  const rigidBodiesRef = useForwardedRef(forwardedRef, []);\r\n  const objectRef = useRef(null);\r\n  const instanceWrapperRef = useRef(null);\r\n\r\n  const {\r\n    // instanced props\r\n    children,\r\n    instances,\r\n    colliderNodes = [],\r\n    // wrapper object props\r\n    position,\r\n    rotation,\r\n    quaternion,\r\n    scale\r\n  } = props,\r\n        rigidBodyProps = _objectWithoutProperties(props, _excluded);\r\n\r\n  const childColliderProps = useChildColliderProps(objectRef, _objectSpread2(_objectSpread2({}, props), {}, {\r\n    children: undefined\r\n  }));\r\n\r\n  const getInstancedMesh = () => {\r\n    const firstChild = instanceWrapperRef.current.children[0];\r\n\r\n    if (firstChild && \"isInstancedMesh\" in firstChild) {\r\n      return firstChild;\r\n    }\r\n\r\n    return undefined;\r\n  };\r\n\r\n  useEffect(() => {\r\n    const instancedMesh = getInstancedMesh();\r\n\r\n    if (instancedMesh) {\r\n      instancedMesh.instanceMatrix.setUsage(DynamicDrawUsage);\r\n    } else {\r\n      console.warn(\"InstancedRigidBodies expects exactly one child, which must be an InstancedMesh\");\r\n    }\r\n  }, []); // Update the RigidBodyStates whenever the instances change\r\n\r\n  const applyInstancedState = (state, index) => {\r\n    const instancedMesh = getInstancedMesh();\r\n\r\n    if (instancedMesh) {\r\n      return _objectSpread2(_objectSpread2({}, state), {}, {\r\n        getMatrix: matrix => {\r\n          instancedMesh.getMatrixAt(index, matrix);\r\n          return matrix;\r\n        },\r\n        setMatrix: matrix => {\r\n          instancedMesh.setMatrixAt(index, matrix);\r\n          instancedMesh.instanceMatrix.needsUpdate = true;\r\n        },\r\n        meshType: \"instancedMesh\"\r\n      });\r\n    }\r\n\r\n    return state;\r\n  };\r\n\r\n  return /*#__PURE__*/React.createElement(\"object3D\", _extends({\r\n    ref: objectRef\r\n  }, rigidBodyProps, {\r\n    position: position,\r\n    rotation: rotation,\r\n    quaternion: quaternion,\r\n    scale: scale\r\n  }), /*#__PURE__*/React.createElement(\"object3D\", {\r\n    ref: instanceWrapperRef\r\n  }, children), instances === null || instances === void 0 ? void 0 : instances.map((instance, index) => /*#__PURE__*/React.createElement(RigidBody, _extends({}, rigidBodyProps, instance, {\r\n    ref: body => rigidBodiesRef.current[index] = body,\r\n    transformState: state => applyInstancedState(state, index)\r\n  }), /*#__PURE__*/React.createElement(React.Fragment, null, colliderNodes.map((node, index) => /*#__PURE__*/React.createElement(Fragment, {\r\n    key: index\r\n  }, node)), childColliderProps.map((colliderProps, colliderIndex) => /*#__PURE__*/React.createElement(AnyCollider, _extends({\r\n    key: colliderIndex\r\n  }, colliderProps)))))));\r\n}));\r\nInstancedRigidBodies.displayName = \"InstancedRigidBodies\";\r\n\r\n/**\r\n * @internal\r\n */\r\n\r\nconst useImpulseJoint = (body1, body2, params) => {\r\n  const {\r\n    world\r\n  } = useRapier();\r\n  const jointRef = useRef();\r\n  useImperativeInstance(() => {\r\n    if (body1.current && body2.current) {\r\n      const newJoint = world.createImpulseJoint(params, body1.current, body2.current, true);\r\n      jointRef.current = newJoint;\r\n      return newJoint;\r\n    }\r\n  }, joint => {\r\n    if (joint) {\r\n      jointRef.current = undefined;\r\n\r\n      if (world.getImpulseJoint(joint.handle)) {\r\n        world.removeImpulseJoint(joint, true);\r\n      }\r\n    }\r\n  }, []);\r\n  return jointRef;\r\n};\r\n/**\r\n * A fixed joint ensures that two rigid-bodies don't move relative to each other.\r\n * Fixed joints are characterized by one local frame (represented by an isometry) on each rigid-body.\r\n * The fixed-joint makes these frames coincide in world-space.\r\n *\r\n * @category Hooks - Joints\r\n */\r\n\r\nconst useFixedJoint = (body1, body2, [body1Anchor, body1LocalFrame, body2Anchor, body2LocalFrame]) => {\r\n  const {\r\n    rapier\r\n  } = useRapier();\r\n  return useImpulseJoint(body1, body2, rapier.JointData.fixed(vector3ToRapierVector(body1Anchor), quaternionToRapierQuaternion(body1LocalFrame), vector3ToRapierVector(body2Anchor), quaternionToRapierQuaternion(body2LocalFrame)));\r\n};\r\n/**\r\n * The spherical joint ensures that two points on the local-spaces of two rigid-bodies always coincide (it prevents any relative\r\n * translational motion at this points). This is typically used to simulate ragdolls arms, pendulums, etc.\r\n * They are characterized by one local anchor on each rigid-body. Each anchor represents the location of the\r\n * points that need to coincide on the local-space of each rigid-body.\r\n *\r\n * @category Hooks - Joints\r\n */\r\n\r\nconst useSphericalJoint = (body1, body2, [body1Anchor, body2Anchor]) => {\r\n  const {\r\n    rapier\r\n  } = useRapier();\r\n  return useImpulseJoint(body1, body2, rapier.JointData.spherical(vector3ToRapierVector(body1Anchor), vector3ToRapierVector(body2Anchor)));\r\n};\r\n/**\r\n * The revolute joint prevents any relative movement between two rigid-bodies, except for relative\r\n * rotations along one axis. This is typically used to simulate wheels, fans, etc.\r\n * They are characterized by one local anchor as well as one local axis on each rigid-body.\r\n *\r\n * @category Hooks - Joints\r\n */\r\n\r\nconst useRevoluteJoint = (body1, body2, [body1Anchor, body2Anchor, axis, limits]) => {\r\n  const {\r\n    rapier\r\n  } = useRapier();\r\n  const params = rapier.JointData.revolute(vector3ToRapierVector(body1Anchor), vector3ToRapierVector(body2Anchor), vector3ToRapierVector(axis));\r\n\r\n  if (limits) {\r\n    params.limitsEnabled = true;\r\n    params.limits = limits;\r\n  }\r\n\r\n  return useImpulseJoint(body1, body2, params);\r\n};\r\n/**\r\n * The prismatic joint prevents any relative movement between two rigid-bodies, except for relative translations along one axis.\r\n * It is characterized by one local anchor as well as one local axis on each rigid-body. In 3D, an optional\r\n * local tangent axis can be specified for each rigid-body.\r\n *\r\n * @category Hooks - Joints\r\n */\r\n\r\nconst usePrismaticJoint = (body1, body2, [body1Anchor, body2Anchor, axis, limits]) => {\r\n  const {\r\n    rapier\r\n  } = useRapier();\r\n  const params = rapier.JointData.prismatic(vector3ToRapierVector(body1Anchor), vector3ToRapierVector(body2Anchor), vector3ToRapierVector(axis));\r\n\r\n  if (limits) {\r\n    params.limitsEnabled = true;\r\n    params.limits = limits;\r\n  }\r\n\r\n  return useImpulseJoint(body1, body2, params);\r\n};\r\n/**\r\n * The rope joint limits the max distance between two bodies.\r\n * @category Hooks - Joints\r\n */\r\n\r\nconst useRopeJoint = (body1, body2, [body1Anchor, body2Anchor, length]) => {\r\n  const {\r\n    rapier\r\n  } = useRapier();\r\n  const vBody1Anchor = vector3ToRapierVector(body1Anchor);\r\n  const vBody2Anchor = vector3ToRapierVector(body2Anchor);\r\n  const params = rapier.JointData.rope(length, vBody1Anchor, vBody2Anchor);\r\n  return useImpulseJoint(body1, body2, params);\r\n};\r\n/**\r\n * The spring joint applies a force proportional to the distance between two objects.\r\n * @category Hooks - Joints\r\n */\r\n\r\nconst useSpringJoint = (body1, body2, [body1Anchor, body2Anchor, restLength, stiffness, damping]) => {\r\n  const {\r\n    rapier\r\n  } = useRapier();\r\n  const vBody1Anchor = vector3ToRapierVector(body1Anchor);\r\n  const vBody2Anchor = vector3ToRapierVector(body2Anchor);\r\n  const params = rapier.JointData.spring(restLength, stiffness, damping, vBody1Anchor, vBody2Anchor);\r\n  return useImpulseJoint(body1, body2, params);\r\n};\r\n\r\n/**\r\n * Calculates an InteractionGroup bitmask for use in the `collisionGroups` or `solverGroups`\r\n * properties of RigidBody or Collider components. The first argument represents a list of\r\n * groups the entity is in (expressed as numbers from 0 to 15). The second argument is a list\r\n * of groups that will be filtered against. When it is omitted, all groups are filtered against.\r\n *\r\n * @example\r\n * A RigidBody that is member of group 0 and will collide with everything from groups 0 and 1:\r\n *\r\n * ```tsx\r\n * <RigidBody collisionGroups={interactionGroups([0], [0, 1])} />\r\n * ```\r\n *\r\n * A RigidBody that is member of groups 0 and 1 and will collide with everything else:\r\n *\r\n * ```tsx\r\n * <RigidBody collisionGroups={interactionGroups([0, 1])} />\r\n * ```\r\n *\r\n * A RigidBody that is member of groups 0 and 1 and will not collide with anything:\r\n *\r\n * ```tsx\r\n * <RigidBody collisionGroups={interactionGroups([0, 1], [])} />\r\n * ```\r\n *\r\n * Please note that Rapier needs interaction filters to evaluate to true between _both_ colliding\r\n * entities for collision events to trigger.\r\n *\r\n * @param memberships Groups the collider is a member of. (Values can range from 0 to 15.)\r\n * @param filters Groups the interaction group should filter against. (Values can range from 0 to 15.)\r\n * @returns An InteractionGroup bitmask.\r\n */\r\nconst interactionGroups = (memberships, filters) => (bitmask(memberships) << 16) + (filters !== undefined ? bitmask(filters) : 0b1111111111111111);\r\n\r\nconst bitmask = groups => [groups].flat().reduce((acc, layer) => acc | 1 << layer, 0);\r\n\r\nexport { AnyCollider, BallCollider, CapsuleCollider, ConeCollider, ConvexHullCollider, CuboidCollider, CylinderCollider, HeightfieldCollider, InstancedRigidBodies, MeshCollider, Physics, RigidBody, RoundConeCollider, RoundCuboidCollider, RoundCylinderCollider, TrimeshCollider, euler, interactionGroups, quat, useAfterPhysicsStep, useBeforePhysicsStep, useFixedJoint, useImpulseJoint, usePrismaticJoint, useRapier, useRevoluteJoint, useRopeJoint, useSphericalJoint, useSpringJoint, vec3 };\r\n", "import { Vector3, Line3, Plane, Triangle } from \"three\";\r\nconst Visible = 0;\r\nconst Deleted = 1;\r\nconst _v1 = /* @__PURE__ */ new Vector3();\r\nconst _line3 = /* @__PURE__ */ new Line3();\r\nconst _plane = /* @__PURE__ */ new Plane();\r\nconst _closestPoint = /* @__PURE__ */ new Vector3();\r\nconst _triangle = /* @__PURE__ */ new Triangle();\r\nclass ConvexHull {\r\n  constructor() {\r\n    this.tolerance = -1;\r\n    this.faces = [];\r\n    this.newFaces = [];\r\n    this.assigned = new VertexList();\r\n    this.unassigned = new VertexList();\r\n    this.vertices = [];\r\n  }\r\n  setFromPoints(points) {\r\n    if (points.length >= 4) {\r\n      this.makeEmpty();\r\n      for (let i = 0, l = points.length; i < l; i++) {\r\n        this.vertices.push(new VertexNode(points[i]));\r\n      }\r\n      this.compute();\r\n    }\r\n    return this;\r\n  }\r\n  setFromObject(object) {\r\n    const points = [];\r\n    object.updateMatrixWorld(true);\r\n    object.traverse(function(node) {\r\n      const geometry = node.geometry;\r\n      if (geometry !== void 0) {\r\n        const attribute = geometry.attributes.position;\r\n        if (attribute !== void 0) {\r\n          for (let i = 0, l = attribute.count; i < l; i++) {\r\n            const point = new Vector3();\r\n            point.fromBufferAttribute(attribute, i).applyMatrix4(node.matrixWorld);\r\n            points.push(point);\r\n          }\r\n        }\r\n      }\r\n    });\r\n    return this.setFromPoints(points);\r\n  }\r\n  containsPoint(point) {\r\n    const faces = this.faces;\r\n    for (let i = 0, l = faces.length; i < l; i++) {\r\n      const face = faces[i];\r\n      if (face.distanceToPoint(point) > this.tolerance)\r\n        return false;\r\n    }\r\n    return true;\r\n  }\r\n  intersectRay(ray, target) {\r\n    const faces = this.faces;\r\n    let tNear = -Infinity;\r\n    let tFar = Infinity;\r\n    for (let i = 0, l = faces.length; i < l; i++) {\r\n      const face = faces[i];\r\n      const vN = face.distanceToPoint(ray.origin);\r\n      const vD = face.normal.dot(ray.direction);\r\n      if (vN > 0 && vD >= 0)\r\n        return null;\r\n      const t = vD !== 0 ? -vN / vD : 0;\r\n      if (t <= 0)\r\n        continue;\r\n      if (vD > 0) {\r\n        tFar = Math.min(t, tFar);\r\n      } else {\r\n        tNear = Math.max(t, tNear);\r\n      }\r\n      if (tNear > tFar) {\r\n        return null;\r\n      }\r\n    }\r\n    if (tNear !== -Infinity) {\r\n      ray.at(tNear, target);\r\n    } else {\r\n      ray.at(tFar, target);\r\n    }\r\n    return target;\r\n  }\r\n  intersectsRay(ray) {\r\n    return this.intersectRay(ray, _v1) !== null;\r\n  }\r\n  makeEmpty() {\r\n    this.faces = [];\r\n    this.vertices = [];\r\n    return this;\r\n  }\r\n  // Adds a vertex to the 'assigned' list of vertices and assigns it to the given face\r\n  addVertexToFace(vertex, face) {\r\n    vertex.face = face;\r\n    if (face.outside === null) {\r\n      this.assigned.append(vertex);\r\n    } else {\r\n      this.assigned.insertBefore(face.outside, vertex);\r\n    }\r\n    face.outside = vertex;\r\n    return this;\r\n  }\r\n  // Removes a vertex from the 'assigned' list of vertices and from the given face\r\n  removeVertexFromFace(vertex, face) {\r\n    if (vertex === face.outside) {\r\n      if (vertex.next !== null && vertex.next.face === face) {\r\n        face.outside = vertex.next;\r\n      } else {\r\n        face.outside = null;\r\n      }\r\n    }\r\n    this.assigned.remove(vertex);\r\n    return this;\r\n  }\r\n  // Removes all the visible vertices that a given face is able to see which are stored in the 'assigned' vertex list\r\n  removeAllVerticesFromFace(face) {\r\n    if (face.outside !== null) {\r\n      const start = face.outside;\r\n      let end = face.outside;\r\n      while (end.next !== null && end.next.face === face) {\r\n        end = end.next;\r\n      }\r\n      this.assigned.removeSubList(start, end);\r\n      start.prev = end.next = null;\r\n      face.outside = null;\r\n      return start;\r\n    }\r\n  }\r\n  // Removes all the visible vertices that 'face' is able to see\r\n  deleteFaceVertices(face, absorbingFace) {\r\n    const faceVertices = this.removeAllVerticesFromFace(face);\r\n    if (faceVertices !== void 0) {\r\n      if (absorbingFace === void 0) {\r\n        this.unassigned.appendChain(faceVertices);\r\n      } else {\r\n        let vertex = faceVertices;\r\n        do {\r\n          const nextVertex = vertex.next;\r\n          const distance = absorbingFace.distanceToPoint(vertex.point);\r\n          if (distance > this.tolerance) {\r\n            this.addVertexToFace(vertex, absorbingFace);\r\n          } else {\r\n            this.unassigned.append(vertex);\r\n          }\r\n          vertex = nextVertex;\r\n        } while (vertex !== null);\r\n      }\r\n    }\r\n    return this;\r\n  }\r\n  // Reassigns as many vertices as possible from the unassigned list to the new faces\r\n  resolveUnassignedPoints(newFaces) {\r\n    if (this.unassigned.isEmpty() === false) {\r\n      let vertex = this.unassigned.first();\r\n      do {\r\n        const nextVertex = vertex.next;\r\n        let maxDistance = this.tolerance;\r\n        let maxFace = null;\r\n        for (let i = 0; i < newFaces.length; i++) {\r\n          const face = newFaces[i];\r\n          if (face.mark === Visible) {\r\n            const distance = face.distanceToPoint(vertex.point);\r\n            if (distance > maxDistance) {\r\n              maxDistance = distance;\r\n              maxFace = face;\r\n            }\r\n            if (maxDistance > 1e3 * this.tolerance)\r\n              break;\r\n          }\r\n        }\r\n        if (maxFace !== null) {\r\n          this.addVertexToFace(vertex, maxFace);\r\n        }\r\n        vertex = nextVertex;\r\n      } while (vertex !== null);\r\n    }\r\n    return this;\r\n  }\r\n  // Computes the extremes of a simplex which will be the initial hull\r\n  computeExtremes() {\r\n    const min = new Vector3();\r\n    const max = new Vector3();\r\n    const minVertices = [];\r\n    const maxVertices = [];\r\n    for (let i = 0; i < 3; i++) {\r\n      minVertices[i] = maxVertices[i] = this.vertices[0];\r\n    }\r\n    min.copy(this.vertices[0].point);\r\n    max.copy(this.vertices[0].point);\r\n    for (let i = 0, l = this.vertices.length; i < l; i++) {\r\n      const vertex = this.vertices[i];\r\n      const point = vertex.point;\r\n      for (let j = 0; j < 3; j++) {\r\n        if (point.getComponent(j) < min.getComponent(j)) {\r\n          min.setComponent(j, point.getComponent(j));\r\n          minVertices[j] = vertex;\r\n        }\r\n      }\r\n      for (let j = 0; j < 3; j++) {\r\n        if (point.getComponent(j) > max.getComponent(j)) {\r\n          max.setComponent(j, point.getComponent(j));\r\n          maxVertices[j] = vertex;\r\n        }\r\n      }\r\n    }\r\n    this.tolerance = 3 * Number.EPSILON * (Math.max(Math.abs(min.x), Math.abs(max.x)) + Math.max(Math.abs(min.y), Math.abs(max.y)) + Math.max(Math.abs(min.z), Math.abs(max.z)));\r\n    return { min: minVertices, max: maxVertices };\r\n  }\r\n  // Computes the initial simplex assigning to its faces all the points\r\n  // that are candidates to form part of the hull\r\n  computeInitialHull() {\r\n    const vertices = this.vertices;\r\n    const extremes = this.computeExtremes();\r\n    const min = extremes.min;\r\n    const max = extremes.max;\r\n    let maxDistance = 0;\r\n    let index = 0;\r\n    for (let i = 0; i < 3; i++) {\r\n      const distance = max[i].point.getComponent(i) - min[i].point.getComponent(i);\r\n      if (distance > maxDistance) {\r\n        maxDistance = distance;\r\n        index = i;\r\n      }\r\n    }\r\n    const v0 = min[index];\r\n    const v1 = max[index];\r\n    let v2;\r\n    let v3;\r\n    maxDistance = 0;\r\n    _line3.set(v0.point, v1.point);\r\n    for (let i = 0, l = this.vertices.length; i < l; i++) {\r\n      const vertex = vertices[i];\r\n      if (vertex !== v0 && vertex !== v1) {\r\n        _line3.closestPointToPoint(vertex.point, true, _closestPoint);\r\n        const distance = _closestPoint.distanceToSquared(vertex.point);\r\n        if (distance > maxDistance) {\r\n          maxDistance = distance;\r\n          v2 = vertex;\r\n        }\r\n      }\r\n    }\r\n    maxDistance = -1;\r\n    _plane.setFromCoplanarPoints(v0.point, v1.point, v2.point);\r\n    for (let i = 0, l = this.vertices.length; i < l; i++) {\r\n      const vertex = vertices[i];\r\n      if (vertex !== v0 && vertex !== v1 && vertex !== v2) {\r\n        const distance = Math.abs(_plane.distanceToPoint(vertex.point));\r\n        if (distance > maxDistance) {\r\n          maxDistance = distance;\r\n          v3 = vertex;\r\n        }\r\n      }\r\n    }\r\n    const faces = [];\r\n    if (_plane.distanceToPoint(v3.point) < 0) {\r\n      faces.push(Face.create(v0, v1, v2), Face.create(v3, v1, v0), Face.create(v3, v2, v1), Face.create(v3, v0, v2));\r\n      for (let i = 0; i < 3; i++) {\r\n        const j = (i + 1) % 3;\r\n        faces[i + 1].getEdge(2).setTwin(faces[0].getEdge(j));\r\n        faces[i + 1].getEdge(1).setTwin(faces[j + 1].getEdge(0));\r\n      }\r\n    } else {\r\n      faces.push(Face.create(v0, v2, v1), Face.create(v3, v0, v1), Face.create(v3, v1, v2), Face.create(v3, v2, v0));\r\n      for (let i = 0; i < 3; i++) {\r\n        const j = (i + 1) % 3;\r\n        faces[i + 1].getEdge(2).setTwin(faces[0].getEdge((3 - i) % 3));\r\n        faces[i + 1].getEdge(0).setTwin(faces[j + 1].getEdge(1));\r\n      }\r\n    }\r\n    for (let i = 0; i < 4; i++) {\r\n      this.faces.push(faces[i]);\r\n    }\r\n    for (let i = 0, l = vertices.length; i < l; i++) {\r\n      const vertex = vertices[i];\r\n      if (vertex !== v0 && vertex !== v1 && vertex !== v2 && vertex !== v3) {\r\n        maxDistance = this.tolerance;\r\n        let maxFace = null;\r\n        for (let j = 0; j < 4; j++) {\r\n          const distance = this.faces[j].distanceToPoint(vertex.point);\r\n          if (distance > maxDistance) {\r\n            maxDistance = distance;\r\n            maxFace = this.faces[j];\r\n          }\r\n        }\r\n        if (maxFace !== null) {\r\n          this.addVertexToFace(vertex, maxFace);\r\n        }\r\n      }\r\n    }\r\n    return this;\r\n  }\r\n  // Removes inactive faces\r\n  reindexFaces() {\r\n    const activeFaces = [];\r\n    for (let i = 0; i < this.faces.length; i++) {\r\n      const face = this.faces[i];\r\n      if (face.mark === Visible) {\r\n        activeFaces.push(face);\r\n      }\r\n    }\r\n    this.faces = activeFaces;\r\n    return this;\r\n  }\r\n  // Finds the next vertex to create faces with the current hull\r\n  nextVertexToAdd() {\r\n    if (this.assigned.isEmpty() === false) {\r\n      let eyeVertex, maxDistance = 0;\r\n      const eyeFace = this.assigned.first().face;\r\n      let vertex = eyeFace.outside;\r\n      do {\r\n        const distance = eyeFace.distanceToPoint(vertex.point);\r\n        if (distance > maxDistance) {\r\n          maxDistance = distance;\r\n          eyeVertex = vertex;\r\n        }\r\n        vertex = vertex.next;\r\n      } while (vertex !== null && vertex.face === eyeFace);\r\n      return eyeVertex;\r\n    }\r\n  }\r\n  // Computes a chain of half edges in CCW order called the 'horizon'.\r\n  // For an edge to be part of the horizon it must join a face that can see\r\n  // 'eyePoint' and a face that cannot see 'eyePoint'.\r\n  computeHorizon(eyePoint, crossEdge, face, horizon) {\r\n    this.deleteFaceVertices(face);\r\n    face.mark = Deleted;\r\n    let edge;\r\n    if (crossEdge === null) {\r\n      edge = crossEdge = face.getEdge(0);\r\n    } else {\r\n      edge = crossEdge.next;\r\n    }\r\n    do {\r\n      const twinEdge = edge.twin;\r\n      const oppositeFace = twinEdge.face;\r\n      if (oppositeFace.mark === Visible) {\r\n        if (oppositeFace.distanceToPoint(eyePoint) > this.tolerance) {\r\n          this.computeHorizon(eyePoint, twinEdge, oppositeFace, horizon);\r\n        } else {\r\n          horizon.push(edge);\r\n        }\r\n      }\r\n      edge = edge.next;\r\n    } while (edge !== crossEdge);\r\n    return this;\r\n  }\r\n  // Creates a face with the vertices 'eyeVertex.point', 'horizonEdge.tail' and 'horizonEdge.head' in CCW order\r\n  addAdjoiningFace(eyeVertex, horizonEdge) {\r\n    const face = Face.create(eyeVertex, horizonEdge.tail(), horizonEdge.head());\r\n    this.faces.push(face);\r\n    face.getEdge(-1).setTwin(horizonEdge.twin);\r\n    return face.getEdge(0);\r\n  }\r\n  //  Adds 'horizon.length' faces to the hull, each face will be linked with the\r\n  //  horizon opposite face and the face on the left/right\r\n  addNewFaces(eyeVertex, horizon) {\r\n    this.newFaces = [];\r\n    let firstSideEdge = null;\r\n    let previousSideEdge = null;\r\n    for (let i = 0; i < horizon.length; i++) {\r\n      const horizonEdge = horizon[i];\r\n      const sideEdge = this.addAdjoiningFace(eyeVertex, horizonEdge);\r\n      if (firstSideEdge === null) {\r\n        firstSideEdge = sideEdge;\r\n      } else {\r\n        sideEdge.next.setTwin(previousSideEdge);\r\n      }\r\n      this.newFaces.push(sideEdge.face);\r\n      previousSideEdge = sideEdge;\r\n    }\r\n    firstSideEdge.next.setTwin(previousSideEdge);\r\n    return this;\r\n  }\r\n  // Adds a vertex to the hull\r\n  addVertexToHull(eyeVertex) {\r\n    const horizon = [];\r\n    this.unassigned.clear();\r\n    this.removeVertexFromFace(eyeVertex, eyeVertex.face);\r\n    this.computeHorizon(eyeVertex.point, null, eyeVertex.face, horizon);\r\n    this.addNewFaces(eyeVertex, horizon);\r\n    this.resolveUnassignedPoints(this.newFaces);\r\n    return this;\r\n  }\r\n  cleanup() {\r\n    this.assigned.clear();\r\n    this.unassigned.clear();\r\n    this.newFaces = [];\r\n    return this;\r\n  }\r\n  compute() {\r\n    let vertex;\r\n    this.computeInitialHull();\r\n    while ((vertex = this.nextVertexToAdd()) !== void 0) {\r\n      this.addVertexToHull(vertex);\r\n    }\r\n    this.reindexFaces();\r\n    this.cleanup();\r\n    return this;\r\n  }\r\n}\r\nclass Face {\r\n  constructor() {\r\n    this.normal = new Vector3();\r\n    this.midpoint = new Vector3();\r\n    this.area = 0;\r\n    this.constant = 0;\r\n    this.outside = null;\r\n    this.mark = Visible;\r\n    this.edge = null;\r\n  }\r\n  static create(a, b, c) {\r\n    const face = new Face();\r\n    const e0 = new HalfEdge(a, face);\r\n    const e1 = new HalfEdge(b, face);\r\n    const e2 = new HalfEdge(c, face);\r\n    e0.next = e2.prev = e1;\r\n    e1.next = e0.prev = e2;\r\n    e2.next = e1.prev = e0;\r\n    face.edge = e0;\r\n    return face.compute();\r\n  }\r\n  getEdge(i) {\r\n    let edge = this.edge;\r\n    while (i > 0) {\r\n      edge = edge.next;\r\n      i--;\r\n    }\r\n    while (i < 0) {\r\n      edge = edge.prev;\r\n      i++;\r\n    }\r\n    return edge;\r\n  }\r\n  compute() {\r\n    const a = this.edge.tail();\r\n    const b = this.edge.head();\r\n    const c = this.edge.next.head();\r\n    _triangle.set(a.point, b.point, c.point);\r\n    _triangle.getNormal(this.normal);\r\n    _triangle.getMidpoint(this.midpoint);\r\n    this.area = _triangle.getArea();\r\n    this.constant = this.normal.dot(this.midpoint);\r\n    return this;\r\n  }\r\n  distanceToPoint(point) {\r\n    return this.normal.dot(point) - this.constant;\r\n  }\r\n}\r\nclass HalfEdge {\r\n  constructor(vertex, face) {\r\n    this.vertex = vertex;\r\n    this.prev = null;\r\n    this.next = null;\r\n    this.twin = null;\r\n    this.face = face;\r\n  }\r\n  head() {\r\n    return this.vertex;\r\n  }\r\n  tail() {\r\n    return this.prev ? this.prev.vertex : null;\r\n  }\r\n  length() {\r\n    const head = this.head();\r\n    const tail = this.tail();\r\n    if (tail !== null) {\r\n      return tail.point.distanceTo(head.point);\r\n    }\r\n    return -1;\r\n  }\r\n  lengthSquared() {\r\n    const head = this.head();\r\n    const tail = this.tail();\r\n    if (tail !== null) {\r\n      return tail.point.distanceToSquared(head.point);\r\n    }\r\n    return -1;\r\n  }\r\n  setTwin(edge) {\r\n    this.twin = edge;\r\n    edge.twin = this;\r\n    return this;\r\n  }\r\n}\r\nclass VertexNode {\r\n  constructor(point) {\r\n    this.point = point;\r\n    this.prev = null;\r\n    this.next = null;\r\n    this.face = null;\r\n  }\r\n}\r\nclass VertexList {\r\n  constructor() {\r\n    this.head = null;\r\n    this.tail = null;\r\n  }\r\n  first() {\r\n    return this.head;\r\n  }\r\n  last() {\r\n    return this.tail;\r\n  }\r\n  clear() {\r\n    this.head = this.tail = null;\r\n    return this;\r\n  }\r\n  // Inserts a vertex before the target vertex\r\n  insertBefore(target, vertex) {\r\n    vertex.prev = target.prev;\r\n    vertex.next = target;\r\n    if (vertex.prev === null) {\r\n      this.head = vertex;\r\n    } else {\r\n      vertex.prev.next = vertex;\r\n    }\r\n    target.prev = vertex;\r\n    return this;\r\n  }\r\n  // Inserts a vertex after the target vertex\r\n  insertAfter(target, vertex) {\r\n    vertex.prev = target;\r\n    vertex.next = target.next;\r\n    if (vertex.next === null) {\r\n      this.tail = vertex;\r\n    } else {\r\n      vertex.next.prev = vertex;\r\n    }\r\n    target.next = vertex;\r\n    return this;\r\n  }\r\n  // Appends a vertex to the end of the linked list\r\n  append(vertex) {\r\n    if (this.head === null) {\r\n      this.head = vertex;\r\n    } else {\r\n      this.tail.next = vertex;\r\n    }\r\n    vertex.prev = this.tail;\r\n    vertex.next = null;\r\n    this.tail = vertex;\r\n    return this;\r\n  }\r\n  // Appends a chain of vertices where 'vertex' is the head.\r\n  appendChain(vertex) {\r\n    if (this.head === null) {\r\n      this.head = vertex;\r\n    } else {\r\n      this.tail.next = vertex;\r\n    }\r\n    vertex.prev = this.tail;\r\n    while (vertex.next !== null) {\r\n      vertex = vertex.next;\r\n    }\r\n    this.tail = vertex;\r\n    return this;\r\n  }\r\n  // Removes a vertex from the linked list\r\n  remove(vertex) {\r\n    if (vertex.prev === null) {\r\n      this.head = vertex.next;\r\n    } else {\r\n      vertex.prev.next = vertex.next;\r\n    }\r\n    if (vertex.next === null) {\r\n      this.tail = vertex.prev;\r\n    } else {\r\n      vertex.next.prev = vertex.prev;\r\n    }\r\n    return this;\r\n  }\r\n  // Removes a list of vertices whose 'head' is 'a' and whose 'tail' is b\r\n  removeSubList(a, b) {\r\n    if (a.prev === null) {\r\n      this.head = b.next;\r\n    } else {\r\n      a.prev.next = b.next;\r\n    }\r\n    if (b.next === null) {\r\n      this.tail = a.prev;\r\n    } else {\r\n      b.next.prev = a.prev;\r\n    }\r\n    return this;\r\n  }\r\n  isEmpty() {\r\n    return this.head === null;\r\n  }\r\n}\r\nexport {\r\n  ConvexHull,\r\n  Face,\r\n  HalfEdge,\r\n  VertexList,\r\n  VertexNode\r\n};\r\n", "import { Vector3, Line3, Plane, Mesh } from \"three\";\r\nimport { ConvexGeometry } from \"../geometries/ConvexGeometry.js\";\r\nconst _v1 = /* @__PURE__ */ new Vector3();\r\nclass ConvexObjectBreaker {\r\n  constructor(minSizeForBreak = 1.4, smallDelta = 1e-4) {\r\n    this.minSizeForBreak = minSizeForBreak;\r\n    this.smallDelta = smallDelta;\r\n    this.tempLine1 = new Line3();\r\n    this.tempPlane1 = new Plane();\r\n    this.tempPlane2 = new Plane();\r\n    this.tempPlane_Cut = new Plane();\r\n    this.tempCM1 = new Vector3();\r\n    this.tempCM2 = new Vector3();\r\n    this.tempVector3 = new Vector3();\r\n    this.tempVector3_2 = new Vector3();\r\n    this.tempVector3_3 = new Vector3();\r\n    this.tempVector3_P0 = new Vector3();\r\n    this.tempVector3_P1 = new Vector3();\r\n    this.tempVector3_P2 = new Vector3();\r\n    this.tempVector3_N0 = new Vector3();\r\n    this.tempVector3_N1 = new Vector3();\r\n    this.tempVector3_AB = new Vector3();\r\n    this.tempVector3_CB = new Vector3();\r\n    this.tempResultObjects = { object1: null, object2: null };\r\n    this.segments = [];\r\n    const n = 30 * 30;\r\n    for (let i = 0; i < n; i++)\r\n      this.segments[i] = false;\r\n  }\r\n  prepareBreakableObject(object, mass, velocity, angularVelocity, breakable) {\r\n    const userData = object.userData;\r\n    userData.mass = mass;\r\n    userData.velocity = velocity.clone();\r\n    userData.angularVelocity = angularVelocity.clone();\r\n    userData.breakable = breakable;\r\n  }\r\n  /*\r\n   * @param {int} maxRadialIterations Iterations for radial cuts.\r\n   * @param {int} maxRandomIterations Max random iterations for not-radial cuts\r\n   *\r\n   * Returns the array of pieces\r\n   */\r\n  subdivideByImpact(object, pointOfImpact, normal, maxRadialIterations, maxRandomIterations) {\r\n    const debris = [];\r\n    const tempPlane1 = this.tempPlane1;\r\n    const tempPlane2 = this.tempPlane2;\r\n    this.tempVector3.addVectors(pointOfImpact, normal);\r\n    tempPlane1.setFromCoplanarPoints(pointOfImpact, object.position, this.tempVector3);\r\n    const maxTotalIterations = maxRandomIterations + maxRadialIterations;\r\n    const scope = this;\r\n    function subdivideRadial(subObject, startAngle, endAngle, numIterations) {\r\n      if (Math.random() < numIterations * 0.05 || numIterations > maxTotalIterations) {\r\n        debris.push(subObject);\r\n        return;\r\n      }\r\n      let angle = Math.PI;\r\n      if (numIterations === 0) {\r\n        tempPlane2.normal.copy(tempPlane1.normal);\r\n        tempPlane2.constant = tempPlane1.constant;\r\n      } else {\r\n        if (numIterations <= maxRadialIterations) {\r\n          angle = (endAngle - startAngle) * (0.2 + 0.6 * Math.random()) + startAngle;\r\n          scope.tempVector3_2.copy(object.position).sub(pointOfImpact).applyAxisAngle(normal, angle).add(pointOfImpact);\r\n          tempPlane2.setFromCoplanarPoints(pointOfImpact, scope.tempVector3, scope.tempVector3_2);\r\n        } else {\r\n          angle = (0.5 * (numIterations & 1) + 0.2 * (2 - Math.random())) * Math.PI;\r\n          scope.tempVector3_2.copy(pointOfImpact).sub(subObject.position).applyAxisAngle(normal, angle).add(subObject.position);\r\n          scope.tempVector3_3.copy(normal).add(subObject.position);\r\n          tempPlane2.setFromCoplanarPoints(subObject.position, scope.tempVector3_3, scope.tempVector3_2);\r\n        }\r\n      }\r\n      scope.cutByPlane(subObject, tempPlane2, scope.tempResultObjects);\r\n      const obj1 = scope.tempResultObjects.object1;\r\n      const obj2 = scope.tempResultObjects.object2;\r\n      if (obj1) {\r\n        subdivideRadial(obj1, startAngle, angle, numIterations + 1);\r\n      }\r\n      if (obj2) {\r\n        subdivideRadial(obj2, angle, endAngle, numIterations + 1);\r\n      }\r\n    }\r\n    subdivideRadial(object, 0, 2 * Math.PI, 0);\r\n    return debris;\r\n  }\r\n  cutByPlane(object, plane, output) {\r\n    const geometry = object.geometry;\r\n    const coords = geometry.attributes.position.array;\r\n    const normals = geometry.attributes.normal.array;\r\n    const numPoints = coords.length / 3;\r\n    let numFaces = numPoints / 3;\r\n    let indices = geometry.getIndex();\r\n    if (indices) {\r\n      indices = indices.array;\r\n      numFaces = indices.length / 3;\r\n    }\r\n    function getVertexIndex(faceIdx, vert) {\r\n      const idx = faceIdx * 3 + vert;\r\n      return indices ? indices[idx] : idx;\r\n    }\r\n    const points1 = [];\r\n    const points2 = [];\r\n    const delta = this.smallDelta;\r\n    const numPointPairs = numPoints * numPoints;\r\n    for (let i = 0; i < numPointPairs; i++)\r\n      this.segments[i] = false;\r\n    const p0 = this.tempVector3_P0;\r\n    const p1 = this.tempVector3_P1;\r\n    const n0 = this.tempVector3_N0;\r\n    const n1 = this.tempVector3_N1;\r\n    for (let i = 0; i < numFaces - 1; i++) {\r\n      const a1 = getVertexIndex(i, 0);\r\n      const b1 = getVertexIndex(i, 1);\r\n      const c1 = getVertexIndex(i, 2);\r\n      n0.set(normals[a1], normals[a1] + 1, normals[a1] + 2);\r\n      for (let j = i + 1; j < numFaces; j++) {\r\n        const a2 = getVertexIndex(j, 0);\r\n        const b2 = getVertexIndex(j, 1);\r\n        const c2 = getVertexIndex(j, 2);\r\n        n1.set(normals[a2], normals[a2] + 1, normals[a2] + 2);\r\n        const coplanar = 1 - n0.dot(n1) < delta;\r\n        if (coplanar) {\r\n          if (a1 === a2 || a1 === b2 || a1 === c2) {\r\n            if (b1 === a2 || b1 === b2 || b1 === c2) {\r\n              this.segments[a1 * numPoints + b1] = true;\r\n              this.segments[b1 * numPoints + a1] = true;\r\n            } else {\r\n              this.segments[c1 * numPoints + a1] = true;\r\n              this.segments[a1 * numPoints + c1] = true;\r\n            }\r\n          } else if (b1 === a2 || b1 === b2 || b1 === c2) {\r\n            this.segments[c1 * numPoints + b1] = true;\r\n            this.segments[b1 * numPoints + c1] = true;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    const localPlane = this.tempPlane_Cut;\r\n    object.updateMatrix();\r\n    ConvexObjectBreaker.transformPlaneToLocalSpace(plane, object.matrix, localPlane);\r\n    for (let i = 0; i < numFaces; i++) {\r\n      const va = getVertexIndex(i, 0);\r\n      const vb = getVertexIndex(i, 1);\r\n      const vc = getVertexIndex(i, 2);\r\n      for (let segment = 0; segment < 3; segment++) {\r\n        const i0 = segment === 0 ? va : segment === 1 ? vb : vc;\r\n        const i1 = segment === 0 ? vb : segment === 1 ? vc : va;\r\n        const segmentState = this.segments[i0 * numPoints + i1];\r\n        if (segmentState)\r\n          continue;\r\n        this.segments[i0 * numPoints + i1] = true;\r\n        this.segments[i1 * numPoints + i0] = true;\r\n        p0.set(coords[3 * i0], coords[3 * i0 + 1], coords[3 * i0 + 2]);\r\n        p1.set(coords[3 * i1], coords[3 * i1 + 1], coords[3 * i1 + 2]);\r\n        let mark0 = 0;\r\n        let d = localPlane.distanceToPoint(p0);\r\n        if (d > delta) {\r\n          mark0 = 2;\r\n          points2.push(p0.clone());\r\n        } else if (d < -delta) {\r\n          mark0 = 1;\r\n          points1.push(p0.clone());\r\n        } else {\r\n          mark0 = 3;\r\n          points1.push(p0.clone());\r\n          points2.push(p0.clone());\r\n        }\r\n        let mark1 = 0;\r\n        d = localPlane.distanceToPoint(p1);\r\n        if (d > delta) {\r\n          mark1 = 2;\r\n          points2.push(p1.clone());\r\n        } else if (d < -delta) {\r\n          mark1 = 1;\r\n          points1.push(p1.clone());\r\n        } else {\r\n          mark1 = 3;\r\n          points1.push(p1.clone());\r\n          points2.push(p1.clone());\r\n        }\r\n        if (mark0 === 1 && mark1 === 2 || mark0 === 2 && mark1 === 1) {\r\n          this.tempLine1.start.copy(p0);\r\n          this.tempLine1.end.copy(p1);\r\n          let intersection = new Vector3();\r\n          intersection = localPlane.intersectLine(this.tempLine1, intersection);\r\n          if (intersection === null) {\r\n            console.error(\"Internal error: segment does not intersect plane.\");\r\n            output.segmentedObject1 = null;\r\n            output.segmentedObject2 = null;\r\n            return 0;\r\n          }\r\n          points1.push(intersection);\r\n          points2.push(intersection.clone());\r\n        }\r\n      }\r\n    }\r\n    const newMass = object.userData.mass * 0.5;\r\n    this.tempCM1.set(0, 0, 0);\r\n    let radius1 = 0;\r\n    const numPoints1 = points1.length;\r\n    if (numPoints1 > 0) {\r\n      for (let i = 0; i < numPoints1; i++)\r\n        this.tempCM1.add(points1[i]);\r\n      this.tempCM1.divideScalar(numPoints1);\r\n      for (let i = 0; i < numPoints1; i++) {\r\n        const p = points1[i];\r\n        p.sub(this.tempCM1);\r\n        radius1 = Math.max(radius1, p.x, p.y, p.z);\r\n      }\r\n      this.tempCM1.add(object.position);\r\n    }\r\n    this.tempCM2.set(0, 0, 0);\r\n    let radius2 = 0;\r\n    const numPoints2 = points2.length;\r\n    if (numPoints2 > 0) {\r\n      for (let i = 0; i < numPoints2; i++)\r\n        this.tempCM2.add(points2[i]);\r\n      this.tempCM2.divideScalar(numPoints2);\r\n      for (let i = 0; i < numPoints2; i++) {\r\n        const p = points2[i];\r\n        p.sub(this.tempCM2);\r\n        radius2 = Math.max(radius2, p.x, p.y, p.z);\r\n      }\r\n      this.tempCM2.add(object.position);\r\n    }\r\n    let object1 = null;\r\n    let object2 = null;\r\n    let numObjects = 0;\r\n    if (numPoints1 > 4) {\r\n      object1 = new Mesh(new ConvexGeometry(points1), object.material);\r\n      object1.position.copy(this.tempCM1);\r\n      object1.quaternion.copy(object.quaternion);\r\n      this.prepareBreakableObject(\r\n        object1,\r\n        newMass,\r\n        object.userData.velocity,\r\n        object.userData.angularVelocity,\r\n        2 * radius1 > this.minSizeForBreak\r\n      );\r\n      numObjects++;\r\n    }\r\n    if (numPoints2 > 4) {\r\n      object2 = new Mesh(new ConvexGeometry(points2), object.material);\r\n      object2.position.copy(this.tempCM2);\r\n      object2.quaternion.copy(object.quaternion);\r\n      this.prepareBreakableObject(\r\n        object2,\r\n        newMass,\r\n        object.userData.velocity,\r\n        object.userData.angularVelocity,\r\n        2 * radius2 > this.minSizeForBreak\r\n      );\r\n      numObjects++;\r\n    }\r\n    output.object1 = object1;\r\n    output.object2 = object2;\r\n    return numObjects;\r\n  }\r\n  static transformFreeVector(v, m) {\r\n    const x = v.x, y = v.y, z = v.z;\r\n    const e = m.elements;\r\n    v.x = e[0] * x + e[4] * y + e[8] * z;\r\n    v.y = e[1] * x + e[5] * y + e[9] * z;\r\n    v.z = e[2] * x + e[6] * y + e[10] * z;\r\n    return v;\r\n  }\r\n  static transformFreeVectorInverse(v, m) {\r\n    const x = v.x, y = v.y, z = v.z;\r\n    const e = m.elements;\r\n    v.x = e[0] * x + e[1] * y + e[2] * z;\r\n    v.y = e[4] * x + e[5] * y + e[6] * z;\r\n    v.z = e[8] * x + e[9] * y + e[10] * z;\r\n    return v;\r\n  }\r\n  static transformTiedVectorInverse(v, m) {\r\n    const x = v.x, y = v.y, z = v.z;\r\n    const e = m.elements;\r\n    v.x = e[0] * x + e[1] * y + e[2] * z - e[12];\r\n    v.y = e[4] * x + e[5] * y + e[6] * z - e[13];\r\n    v.z = e[8] * x + e[9] * y + e[10] * z - e[14];\r\n    return v;\r\n  }\r\n  static transformPlaneToLocalSpace(plane, m, resultPlane) {\r\n    resultPlane.normal.copy(plane.normal);\r\n    resultPlane.constant = plane.constant;\r\n    const referencePoint = ConvexObjectBreaker.transformTiedVectorInverse(plane.coplanarPoint(_v1), m);\r\n    ConvexObjectBreaker.transformFreeVectorInverse(resultPlane.normal, m);\r\n    resultPlane.constant = -referencePoint.dot(resultPlane.normal);\r\n  }\r\n}\r\nexport {\r\n  ConvexObjectBreaker\r\n};\r\n", "import { Vector3, Quaternion, Object3D } from \"three\";\r\nconst _translationObject = /* @__PURE__ */ new Vector3();\r\nconst _quaternionObject = /* @__PURE__ */ new Quaternion();\r\nconst _scaleObject = /* @__PURE__ */ new Vector3();\r\nconst _translationWorld = /* @__PURE__ */ new Vector3();\r\nconst _quaternionWorld = /* @__PURE__ */ new Quaternion();\r\nconst _scaleWorld = /* @__PURE__ */ new Vector3();\r\nclass Gyroscope extends Object3D {\r\n  constructor() {\r\n    super();\r\n  }\r\n  updateMatrixWorld(force) {\r\n    this.matrixAutoUpdate && this.updateMatrix();\r\n    if (this.matrixWorldNeedsUpdate || force) {\r\n      if (this.parent !== null) {\r\n        this.matrixWorld.multiplyMatrices(this.parent.matrixWorld, this.matrix);\r\n        this.matrixWorld.decompose(_translationWorld, _quaternionWorld, _scaleWorld);\r\n        this.matrix.decompose(_translationObject, _quaternionObject, _scaleObject);\r\n        this.matrixWorld.compose(_translationWorld, _quaternionObject, _scaleWorld);\r\n      } else {\r\n        this.matrixWorld.copy(this.matrix);\r\n      }\r\n      this.matrixWorldNeedsUpdate = false;\r\n      force = true;\r\n    }\r\n    for (let i = 0, l = this.children.length; i < l; i++) {\r\n      this.children[i].updateMatrixWorld(force);\r\n    }\r\n  }\r\n}\r\nexport {\r\n  Gyroscope\r\n};\r\n", "import { Object3D, Vector2, Vector3, Matrix4 } from \"three\";\r\nclass CSS2DObject extends Object3D {\r\n  constructor(element = document.createElement(\"div\")) {\r\n    super();\r\n    this.isCSS2DObject = true;\r\n    this.element = element;\r\n    this.element.style.position = \"absolute\";\r\n    this.element.style.userSelect = \"none\";\r\n    this.element.setAttribute(\"draggable\", false);\r\n    this.center = new Vector2(0.5, 0.5);\r\n    this.addEventListener(\"removed\", function() {\r\n      this.traverse(function(object) {\r\n        if (object.element instanceof Element && object.element.parentNode !== null) {\r\n          object.element.parentNode.removeChild(object.element);\r\n        }\r\n      });\r\n    });\r\n  }\r\n  copy(source, recursive) {\r\n    super.copy(source, recursive);\r\n    this.element = source.element.cloneNode(true);\r\n    this.center = source.center;\r\n    return this;\r\n  }\r\n}\r\nconst _vector = /* @__PURE__ */ new Vector3();\r\nconst _viewMatrix = /* @__PURE__ */ new Matrix4();\r\nconst _viewProjectionMatrix = /* @__PURE__ */ new Matrix4();\r\nconst _a = /* @__PURE__ */ new Vector3();\r\nconst _b = /* @__PURE__ */ new Vector3();\r\nclass CSS2DRenderer {\r\n  constructor(parameters = {}) {\r\n    const _this = this;\r\n    let _width, _height;\r\n    let _widthHalf, _heightHalf;\r\n    const cache = {\r\n      objects: /* @__PURE__ */ new WeakMap()\r\n    };\r\n    const domElement = parameters.element !== void 0 ? parameters.element : document.createElement(\"div\");\r\n    domElement.style.overflow = \"hidden\";\r\n    this.domElement = domElement;\r\n    this.getSize = function() {\r\n      return {\r\n        width: _width,\r\n        height: _height\r\n      };\r\n    };\r\n    this.render = function(scene, camera) {\r\n      if (scene.matrixWorldAutoUpdate === true)\r\n        scene.updateMatrixWorld();\r\n      if (camera.parent === null && camera.matrixWorldAutoUpdate === true)\r\n        camera.updateMatrixWorld();\r\n      _viewMatrix.copy(camera.matrixWorldInverse);\r\n      _viewProjectionMatrix.multiplyMatrices(camera.projectionMatrix, _viewMatrix);\r\n      renderObject(scene, scene, camera);\r\n      zOrder(scene);\r\n    };\r\n    this.setSize = function(width, height) {\r\n      _width = width;\r\n      _height = height;\r\n      _widthHalf = _width / 2;\r\n      _heightHalf = _height / 2;\r\n      domElement.style.width = width + \"px\";\r\n      domElement.style.height = height + \"px\";\r\n    };\r\n    function renderObject(object, scene, camera) {\r\n      if (object.isCSS2DObject) {\r\n        _vector.setFromMatrixPosition(object.matrixWorld);\r\n        _vector.applyMatrix4(_viewProjectionMatrix);\r\n        const visible = object.visible === true && _vector.z >= -1 && _vector.z <= 1 && object.layers.test(camera.layers) === true;\r\n        object.element.style.display = visible === true ? \"\" : \"none\";\r\n        if (visible === true) {\r\n          object.onBeforeRender(_this, scene, camera);\r\n          const element = object.element;\r\n          element.style.transform = \"translate(\" + -100 * object.center.x + \"%,\" + -100 * object.center.y + \"%)translate(\" + (_vector.x * _widthHalf + _widthHalf) + \"px,\" + (-_vector.y * _heightHalf + _heightHalf) + \"px)\";\r\n          if (element.parentNode !== domElement) {\r\n            domElement.appendChild(element);\r\n          }\r\n          object.onAfterRender(_this, scene, camera);\r\n        }\r\n        const objectData = {\r\n          distanceToCameraSquared: getDistanceToSquared(camera, object)\r\n        };\r\n        cache.objects.set(object, objectData);\r\n      }\r\n      for (let i = 0, l = object.children.length; i < l; i++) {\r\n        renderObject(object.children[i], scene, camera);\r\n      }\r\n    }\r\n    function getDistanceToSquared(object1, object2) {\r\n      _a.setFromMatrixPosition(object1.matrixWorld);\r\n      _b.setFromMatrixPosition(object2.matrixWorld);\r\n      return _a.distanceToSquared(_b);\r\n    }\r\n    function filterAndFlatten(scene) {\r\n      const result = [];\r\n      scene.traverse(function(object) {\r\n        if (object.isCSS2DObject)\r\n          result.push(object);\r\n      });\r\n      return result;\r\n    }\r\n    function zOrder(scene) {\r\n      const sorted = filterAndFlatten(scene).sort(function(a, b) {\r\n        if (a.renderOrder !== b.renderOrder) {\r\n          return b.renderOrder - a.renderOrder;\r\n        }\r\n        const distanceA = cache.objects.get(a).distanceToCameraSquared;\r\n        const distanceB = cache.objects.get(b).distanceToCameraSquared;\r\n        return distanceA - distanceB;\r\n      });\r\n      const zMax = sorted.length;\r\n      for (let i = 0, l = sorted.length; i < l; i++) {\r\n        sorted[i].element.style.zIndex = zMax - i;\r\n      }\r\n    }\r\n  }\r\n}\r\nexport {\r\n  CSS2DObject,\r\n  CSS2DRenderer\r\n};\r\n", "import { Vector3, Quaternion, Object3D, Matrix4 } from \"three\";\r\nconst _position = /* @__PURE__ */ new Vector3();\r\nconst _quaternion = /* @__PURE__ */ new Quaternion();\r\nconst _scale = /* @__PURE__ */ new Vector3();\r\nclass CSS3DObject extends Object3D {\r\n  constructor(element = document.createElement(\"div\")) {\r\n    super();\r\n    this.isCSS3DObject = true;\r\n    this.element = element;\r\n    this.element.style.position = \"absolute\";\r\n    this.element.style.pointerEvents = \"auto\";\r\n    this.element.style.userSelect = \"none\";\r\n    this.element.setAttribute(\"draggable\", false);\r\n    this.addEventListener(\"removed\", function() {\r\n      this.traverse(function(object) {\r\n        if (object.element instanceof Element && object.element.parentNode !== null) {\r\n          object.element.parentNode.removeChild(object.element);\r\n        }\r\n      });\r\n    });\r\n  }\r\n  copy(source, recursive) {\r\n    super.copy(source, recursive);\r\n    this.element = source.element.cloneNode(true);\r\n    return this;\r\n  }\r\n}\r\nclass CSS3DSprite extends CSS3DObject {\r\n  constructor(element) {\r\n    super(element);\r\n    this.isCSS3DSprite = true;\r\n    this.rotation2D = 0;\r\n  }\r\n  copy(source, recursive) {\r\n    super.copy(source, recursive);\r\n    this.rotation2D = source.rotation2D;\r\n    return this;\r\n  }\r\n}\r\nconst _matrix = /* @__PURE__ */ new Matrix4();\r\nconst _matrix2 = /* @__PURE__ */ new Matrix4();\r\nclass CSS3DRenderer {\r\n  constructor(parameters = {}) {\r\n    const _this = this;\r\n    let _width, _height;\r\n    let _widthHalf, _heightHalf;\r\n    const cache = {\r\n      camera: { fov: 0, style: \"\" },\r\n      objects: /* @__PURE__ */ new WeakMap()\r\n    };\r\n    const domElement = parameters.element !== void 0 ? parameters.element : document.createElement(\"div\");\r\n    domElement.style.overflow = \"hidden\";\r\n    this.domElement = domElement;\r\n    const viewElement = document.createElement(\"div\");\r\n    viewElement.style.transformOrigin = \"0 0\";\r\n    viewElement.style.pointerEvents = \"none\";\r\n    domElement.appendChild(viewElement);\r\n    const cameraElement = document.createElement(\"div\");\r\n    cameraElement.style.transformStyle = \"preserve-3d\";\r\n    viewElement.appendChild(cameraElement);\r\n    this.getSize = function() {\r\n      return {\r\n        width: _width,\r\n        height: _height\r\n      };\r\n    };\r\n    this.render = function(scene, camera) {\r\n      const fov = camera.projectionMatrix.elements[5] * _heightHalf;\r\n      if (cache.camera.fov !== fov) {\r\n        viewElement.style.perspective = camera.isPerspectiveCamera ? fov + \"px\" : \"\";\r\n        cache.camera.fov = fov;\r\n      }\r\n      if (camera.view && camera.view.enabled) {\r\n        viewElement.style.transform = `translate( ${-camera.view.offsetX * (_width / camera.view.width)}px, ${-camera.view.offsetY * (_height / camera.view.height)}px )`;\r\n        viewElement.style.transform += `scale( ${camera.view.fullWidth / camera.view.width}, ${camera.view.fullHeight / camera.view.height} )`;\r\n      } else {\r\n        viewElement.style.transform = \"\";\r\n      }\r\n      if (scene.matrixWorldAutoUpdate === true)\r\n        scene.updateMatrixWorld();\r\n      if (camera.parent === null && camera.matrixWorldAutoUpdate === true)\r\n        camera.updateMatrixWorld();\r\n      let tx, ty;\r\n      if (camera.isOrthographicCamera) {\r\n        tx = -(camera.right + camera.left) / 2;\r\n        ty = (camera.top + camera.bottom) / 2;\r\n      }\r\n      const scaleByViewOffset = camera.view && camera.view.enabled ? camera.view.height / camera.view.fullHeight : 1;\r\n      const cameraCSSMatrix = camera.isOrthographicCamera ? `scale( ${scaleByViewOffset} )scale(` + fov + \")translate(\" + epsilon(tx) + \"px,\" + epsilon(ty) + \"px)\" + getCameraCSSMatrix(camera.matrixWorldInverse) : `scale( ${scaleByViewOffset} )translateZ(` + fov + \"px)\" + getCameraCSSMatrix(camera.matrixWorldInverse);\r\n      const style = cameraCSSMatrix + \"translate(\" + _widthHalf + \"px,\" + _heightHalf + \"px)\";\r\n      if (cache.camera.style !== style) {\r\n        cameraElement.style.transform = style;\r\n        cache.camera.style = style;\r\n      }\r\n      renderObject(scene, scene, camera, cameraCSSMatrix);\r\n    };\r\n    this.setSize = function(width, height) {\r\n      _width = width;\r\n      _height = height;\r\n      _widthHalf = _width / 2;\r\n      _heightHalf = _height / 2;\r\n      domElement.style.width = width + \"px\";\r\n      domElement.style.height = height + \"px\";\r\n      viewElement.style.width = width + \"px\";\r\n      viewElement.style.height = height + \"px\";\r\n      cameraElement.style.width = width + \"px\";\r\n      cameraElement.style.height = height + \"px\";\r\n    };\r\n    function epsilon(value) {\r\n      return Math.abs(value) < 1e-10 ? 0 : value;\r\n    }\r\n    function getCameraCSSMatrix(matrix) {\r\n      const elements = matrix.elements;\r\n      return \"matrix3d(\" + epsilon(elements[0]) + \",\" + epsilon(-elements[1]) + \",\" + epsilon(elements[2]) + \",\" + epsilon(elements[3]) + \",\" + epsilon(elements[4]) + \",\" + epsilon(-elements[5]) + \",\" + epsilon(elements[6]) + \",\" + epsilon(elements[7]) + \",\" + epsilon(elements[8]) + \",\" + epsilon(-elements[9]) + \",\" + epsilon(elements[10]) + \",\" + epsilon(elements[11]) + \",\" + epsilon(elements[12]) + \",\" + epsilon(-elements[13]) + \",\" + epsilon(elements[14]) + \",\" + epsilon(elements[15]) + \")\";\r\n    }\r\n    function getObjectCSSMatrix(matrix) {\r\n      const elements = matrix.elements;\r\n      const matrix3d = \"matrix3d(\" + epsilon(elements[0]) + \",\" + epsilon(elements[1]) + \",\" + epsilon(elements[2]) + \",\" + epsilon(elements[3]) + \",\" + epsilon(-elements[4]) + \",\" + epsilon(-elements[5]) + \",\" + epsilon(-elements[6]) + \",\" + epsilon(-elements[7]) + \",\" + epsilon(elements[8]) + \",\" + epsilon(elements[9]) + \",\" + epsilon(elements[10]) + \",\" + epsilon(elements[11]) + \",\" + epsilon(elements[12]) + \",\" + epsilon(elements[13]) + \",\" + epsilon(elements[14]) + \",\" + epsilon(elements[15]) + \")\";\r\n      return \"translate(-50%,-50%)\" + matrix3d;\r\n    }\r\n    function renderObject(object, scene, camera, cameraCSSMatrix) {\r\n      if (object.isCSS3DObject) {\r\n        const visible = object.visible === true && object.layers.test(camera.layers) === true;\r\n        object.element.style.display = visible === true ? \"\" : \"none\";\r\n        if (visible === true) {\r\n          object.onBeforeRender(_this, scene, camera);\r\n          let style;\r\n          if (object.isCSS3DSprite) {\r\n            _matrix.copy(camera.matrixWorldInverse);\r\n            _matrix.transpose();\r\n            if (object.rotation2D !== 0)\r\n              _matrix.multiply(_matrix2.makeRotationZ(object.rotation2D));\r\n            object.matrixWorld.decompose(_position, _quaternion, _scale);\r\n            _matrix.setPosition(_position);\r\n            _matrix.scale(_scale);\r\n            _matrix.elements[3] = 0;\r\n            _matrix.elements[7] = 0;\r\n            _matrix.elements[11] = 0;\r\n            _matrix.elements[15] = 1;\r\n            style = getObjectCSSMatrix(_matrix);\r\n          } else {\r\n            style = getObjectCSSMatrix(object.matrixWorld);\r\n          }\r\n          const element = object.element;\r\n          const cachedObject = cache.objects.get(object);\r\n          if (cachedObject === void 0 || cachedObject.style !== style) {\r\n            element.style.transform = style;\r\n            const objectData = { style };\r\n            cache.objects.set(object, objectData);\r\n          }\r\n          if (element.parentNode !== cameraElement) {\r\n            cameraElement.appendChild(element);\r\n          }\r\n          object.onAfterRender(_this, scene, camera);\r\n        }\r\n      }\r\n      for (let i = 0, l = object.children.length; i < l; i++) {\r\n        renderObject(object.children[i], scene, camera, cameraCSSMatrix);\r\n      }\r\n    }\r\n  }\r\n}\r\nexport {\r\n  CSS3DObject,\r\n  CSS3DRenderer,\r\n  CSS3DSprite\r\n};\r\n", "var __defProp = Object.defineProperty;\r\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\r\nvar __publicField = (obj, key, value) => {\r\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\r\n  return value;\r\n};\r\nimport { DataTexture, RGBAFormat, FloatType, RepeatWrapping, NearestFilter, Mesh, InstancedMesh, Matrix4, DynamicDrawUsage } from \"three\";\r\nconst CHANNELS = 4;\r\nconst TEXTURE_WIDTH = 1024;\r\nconst TEXTURE_HEIGHT = 4;\r\nconst initSplineTexture = (numberOfCurves = 1) => {\r\n  const dataArray = new Float32Array(TEXTURE_WIDTH * TEXTURE_HEIGHT * numberOfCurves * CHANNELS);\r\n  const dataTexture = new DataTexture(dataArray, TEXTURE_WIDTH, TEXTURE_HEIGHT * numberOfCurves, RGBAFormat, FloatType);\r\n  dataTexture.wrapS = RepeatWrapping;\r\n  dataTexture.wrapT = RepeatWrapping;\r\n  dataTexture.magFilter = NearestFilter;\r\n  dataTexture.needsUpdate = true;\r\n  return dataTexture;\r\n};\r\nconst updateSplineTexture = (texture, splineCurve, offset = 0) => {\r\n  const numberOfPoints = Math.floor(TEXTURE_WIDTH * (TEXTURE_HEIGHT / 4));\r\n  splineCurve.arcLengthDivisions = numberOfPoints / 2;\r\n  splineCurve.updateArcLengths();\r\n  const points = splineCurve.getSpacedPoints(numberOfPoints);\r\n  const frenetFrames = splineCurve.computeFrenetFrames(numberOfPoints, true);\r\n  for (let i = 0; i < numberOfPoints; i++) {\r\n    const rowOffset = Math.floor(i / TEXTURE_WIDTH);\r\n    const rowIndex = i % TEXTURE_WIDTH;\r\n    let pt = points[i];\r\n    setTextureValue(texture, rowIndex, pt.x, pt.y, pt.z, 0 + rowOffset + TEXTURE_HEIGHT * offset);\r\n    pt = frenetFrames.tangents[i];\r\n    setTextureValue(texture, rowIndex, pt.x, pt.y, pt.z, 1 + rowOffset + TEXTURE_HEIGHT * offset);\r\n    pt = frenetFrames.normals[i];\r\n    setTextureValue(texture, rowIndex, pt.x, pt.y, pt.z, 2 + rowOffset + TEXTURE_HEIGHT * offset);\r\n    pt = frenetFrames.binormals[i];\r\n    setTextureValue(texture, rowIndex, pt.x, pt.y, pt.z, 3 + rowOffset + TEXTURE_HEIGHT * offset);\r\n  }\r\n  texture.needsUpdate = true;\r\n};\r\nconst setTextureValue = (texture, index, x, y, z, o) => {\r\n  const image = texture.image;\r\n  const { data } = image;\r\n  const i = CHANNELS * TEXTURE_WIDTH * o;\r\n  data[index * CHANNELS + i + 0] = x;\r\n  data[index * CHANNELS + i + 1] = y;\r\n  data[index * CHANNELS + i + 2] = z;\r\n  data[index * CHANNELS + i + 3] = 1;\r\n};\r\nconst getUniforms = (splineTexture) => ({\r\n  spineTexture: { value: splineTexture },\r\n  pathOffset: { type: \"f\", value: 0 },\r\n  // time of path curve\r\n  pathSegment: { type: \"f\", value: 1 },\r\n  // fractional length of path\r\n  spineOffset: { type: \"f\", value: 161 },\r\n  spineLength: { type: \"f\", value: 400 },\r\n  flow: { type: \"i\", value: 1 }\r\n});\r\nfunction modifyShader(material, uniforms, numberOfCurves = 1) {\r\n  if (material.__ok)\r\n    return;\r\n  material.__ok = true;\r\n  material.onBeforeCompile = (shader) => {\r\n    if (shader.__modified)\r\n      return;\r\n    shader.__modified = true;\r\n    Object.assign(shader.uniforms, uniforms);\r\n    const vertexShader = (\r\n      /* glsl */\r\n      `\r\n\t\tuniform sampler2D spineTexture;\r\n\t\tuniform float pathOffset;\r\n\t\tuniform float pathSegment;\r\n\t\tuniform float spineOffset;\r\n\t\tuniform float spineLength;\r\n\t\tuniform int flow;\r\n\r\n\t\tfloat textureLayers = ${TEXTURE_HEIGHT * numberOfCurves}.;\r\n\t\tfloat textureStacks = ${TEXTURE_HEIGHT / 4}.;\r\n\r\n\t\t${shader.vertexShader}\r\n\t\t`.replace(\"#include <beginnormal_vertex>\", \"\").replace(\"#include <defaultnormal_vertex>\", \"\").replace(\"#include <begin_vertex>\", \"\").replace(\r\n        /void\\s*main\\s*\\(\\)\\s*\\{/,\r\n        /* glsl */\r\n        `\r\n        void main() {\r\n        #include <beginnormal_vertex>\r\n\r\n        vec4 worldPos = modelMatrix * vec4(position, 1.);\r\n\r\n        bool bend = flow > 0;\r\n        float xWeight = bend ? 0. : 1.;\r\n\r\n        #ifdef USE_INSTANCING\r\n        float pathOffsetFromInstanceMatrix = instanceMatrix[3][2];\r\n        float spineLengthFromInstanceMatrix = instanceMatrix[3][0];\r\n        float spinePortion = bend ? (worldPos.x + spineOffset) / spineLengthFromInstanceMatrix : 0.;\r\n        float mt = (spinePortion * pathSegment + pathOffset + pathOffsetFromInstanceMatrix)*textureStacks;\r\n        #else\r\n        float spinePortion = bend ? (worldPos.x + spineOffset) / spineLength : 0.;\r\n        float mt = (spinePortion * pathSegment + pathOffset)*textureStacks;\r\n        #endif\r\n\r\n        mt = mod(mt, textureStacks);\r\n        float rowOffset = floor(mt);\r\n\r\n        #ifdef USE_INSTANCING\r\n        rowOffset += instanceMatrix[3][1] * ${TEXTURE_HEIGHT}.;\r\n        #endif\r\n\r\n        vec3 spinePos = texture2D(spineTexture, vec2(mt, (0. + rowOffset + 0.5) / textureLayers)).xyz;\r\n        vec3 a =        texture2D(spineTexture, vec2(mt, (1. + rowOffset + 0.5) / textureLayers)).xyz;\r\n        vec3 b =        texture2D(spineTexture, vec2(mt, (2. + rowOffset + 0.5) / textureLayers)).xyz;\r\n        vec3 c =        texture2D(spineTexture, vec2(mt, (3. + rowOffset + 0.5) / textureLayers)).xyz;\r\n        mat3 basis = mat3(a, b, c);\r\n\r\n        vec3 transformed = basis\r\n          * vec3(worldPos.x * xWeight, worldPos.y * 1., worldPos.z * 1.)\r\n          + spinePos;\r\n\r\n        vec3 transformedNormal = normalMatrix * (basis * objectNormal);\r\n\t\t\t`\r\n      ).replace(\r\n        \"#include <project_vertex>\",\r\n        /* glsl */\r\n        `vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\r\n\t\t\t\tgl_Position = projectionMatrix * mvPosition;`\r\n      )\r\n    );\r\n    shader.vertexShader = vertexShader;\r\n  };\r\n}\r\nclass Flow {\r\n  /**\r\n   * @param {Mesh} mesh The mesh to clone and modify to bend around the curve\r\n   * @param {number} numberOfCurves The amount of space that should preallocated for additional curves\r\n   */\r\n  constructor(mesh, numberOfCurves = 1) {\r\n    __publicField(this, \"curveArray\");\r\n    __publicField(this, \"curveLengthArray\");\r\n    __publicField(this, \"object3D\");\r\n    __publicField(this, \"splineTexure\");\r\n    __publicField(this, \"uniforms\");\r\n    const obj3D = mesh.clone();\r\n    const splineTexure = initSplineTexture(numberOfCurves);\r\n    const uniforms = getUniforms(splineTexure);\r\n    obj3D.traverse((child) => {\r\n      if (child instanceof Mesh || child instanceof InstancedMesh) {\r\n        child.material = child.material.clone();\r\n        modifyShader(child.material, uniforms, numberOfCurves);\r\n      }\r\n    });\r\n    this.curveArray = new Array(numberOfCurves);\r\n    this.curveLengthArray = new Array(numberOfCurves);\r\n    this.object3D = obj3D;\r\n    this.splineTexure = splineTexure;\r\n    this.uniforms = uniforms;\r\n  }\r\n  updateCurve(index, curve) {\r\n    if (index >= this.curveArray.length)\r\n      throw Error(\"Index out of range for Flow\");\r\n    const curveLength = curve.getLength();\r\n    this.uniforms.spineLength.value = curveLength;\r\n    this.curveLengthArray[index] = curveLength;\r\n    this.curveArray[index] = curve;\r\n    updateSplineTexture(this.splineTexure, curve, index);\r\n  }\r\n  moveAlongCurve(amount) {\r\n    this.uniforms.pathOffset.value += amount;\r\n  }\r\n}\r\nconst matrix = /* @__PURE__ */ new Matrix4();\r\nclass InstancedFlow extends Flow {\r\n  /**\r\n   *\r\n   * @param {number} count The number of instanced elements\r\n   * @param {number} curveCount The number of curves to preallocate for\r\n   * @param {Geometry} geometry The geometry to use for the instanced mesh\r\n   * @param {Material} material The material to use for the instanced mesh\r\n   */\r\n  constructor(count, curveCount, geometry, material) {\r\n    const mesh = new InstancedMesh(geometry, material, count);\r\n    mesh.instanceMatrix.setUsage(DynamicDrawUsage);\r\n    mesh.frustumCulled = false;\r\n    super(mesh, curveCount);\r\n    __publicField(this, \"offsets\");\r\n    __publicField(this, \"whichCurve\");\r\n    this.offsets = new Array(count).fill(0);\r\n    this.whichCurve = new Array(count).fill(0);\r\n  }\r\n  /**\r\n   * The extra information about which curve and curve position is stored in the translation components of the matrix for the instanced objects\r\n   * This writes that information to the matrix and marks it as needing update.\r\n   *\r\n   * @param {number} index of the instanced element to update\r\n   */\r\n  writeChanges(index) {\r\n    matrix.makeTranslation(this.curveLengthArray[this.whichCurve[index]], this.whichCurve[index], this.offsets[index]);\r\n    this.object3D.setMatrixAt(index, matrix);\r\n    this.object3D.instanceMatrix.needsUpdate = true;\r\n  }\r\n  /**\r\n   * Move an individual element along the curve by a specific amount\r\n   *\r\n   * @param {number} index Which element to update\r\n   * @param {number} offset Move by how much\r\n   */\r\n  moveIndividualAlongCurve(index, offset) {\r\n    this.offsets[index] += offset;\r\n    this.writeChanges(index);\r\n  }\r\n  /**\r\n   * Select which curve to use for an element\r\n   *\r\n   * @param {number} index the index of the instanced element to update\r\n   * @param {number} curveNo the index of the curve it should use\r\n   */\r\n  setCurve(index, curveNo) {\r\n    if (isNaN(curveNo))\r\n      throw Error(\"curve index being set is Not a Number (NaN)\");\r\n    this.whichCurve[index] = curveNo;\r\n    this.writeChanges(index);\r\n  }\r\n}\r\nexport {\r\n  Flow,\r\n  InstancedFlow,\r\n  getUniforms,\r\n  initSplineTexture,\r\n  modifyShader,\r\n  updateSplineTexture\r\n};\r\n", "import { BufferGeometry, BufferAttribute, InterleavedBuffer, InterleavedBufferAttribute, TrianglesDrawMode, TriangleFanDrawMode, TriangleStripDrawMode, Vector3, Float32BufferAttribute } from \"three\";\r\nimport { getWithKey } from \"../types/helpers.js\";\r\nconst mergeBufferGeometries = (geometries, useGroups) => {\r\n  const isIndexed = geometries[0].index !== null;\r\n  const attributesUsed = new Set(Object.keys(geometries[0].attributes));\r\n  const morphAttributesUsed = new Set(Object.keys(geometries[0].morphAttributes));\r\n  const attributes = {};\r\n  const morphAttributes = {};\r\n  const morphTargetsRelative = geometries[0].morphTargetsRelative;\r\n  const mergedGeometry = new BufferGeometry();\r\n  let offset = 0;\r\n  geometries.forEach((geom, i) => {\r\n    let attributesCount = 0;\r\n    if (isIndexed !== (geom.index !== null)) {\r\n      console.error(\r\n        \"THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index \" + i + \". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them.\"\r\n      );\r\n      return null;\r\n    }\r\n    for (let name in geom.attributes) {\r\n      if (!attributesUsed.has(name)) {\r\n        console.error(\r\n          \"THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index \" + i + '. All geometries must have compatible attributes; make sure \"' + name + '\" attribute exists among all geometries, or in none of them.'\r\n        );\r\n        return null;\r\n      }\r\n      if (attributes[name] === void 0) {\r\n        attributes[name] = [];\r\n      }\r\n      attributes[name].push(geom.attributes[name]);\r\n      attributesCount++;\r\n    }\r\n    if (attributesCount !== attributesUsed.size) {\r\n      console.error(\r\n        \"THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index \" + i + \". Make sure all geometries have the same number of attributes.\"\r\n      );\r\n      return null;\r\n    }\r\n    if (morphTargetsRelative !== geom.morphTargetsRelative) {\r\n      console.error(\r\n        \"THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index \" + i + \". .morphTargetsRelative must be consistent throughout all geometries.\"\r\n      );\r\n      return null;\r\n    }\r\n    for (let name in geom.morphAttributes) {\r\n      if (!morphAttributesUsed.has(name)) {\r\n        console.error(\r\n          \"THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index \" + i + \".  .morphAttributes must be consistent throughout all geometries.\"\r\n        );\r\n        return null;\r\n      }\r\n      if (morphAttributes[name] === void 0)\r\n        morphAttributes[name] = [];\r\n      morphAttributes[name].push(geom.morphAttributes[name]);\r\n    }\r\n    mergedGeometry.userData.mergedUserData = mergedGeometry.userData.mergedUserData || [];\r\n    mergedGeometry.userData.mergedUserData.push(geom.userData);\r\n    if (useGroups) {\r\n      let count;\r\n      if (geom.index) {\r\n        count = geom.index.count;\r\n      } else if (geom.attributes.position !== void 0) {\r\n        count = geom.attributes.position.count;\r\n      } else {\r\n        console.error(\r\n          \"THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index \" + i + \". The geometry must have either an index or a position attribute\"\r\n        );\r\n        return null;\r\n      }\r\n      mergedGeometry.addGroup(offset, count, i);\r\n      offset += count;\r\n    }\r\n  });\r\n  if (isIndexed) {\r\n    let indexOffset = 0;\r\n    const mergedIndex = [];\r\n    geometries.forEach((geom) => {\r\n      const index = geom.index;\r\n      for (let j = 0; j < index.count; ++j) {\r\n        mergedIndex.push(index.getX(j) + indexOffset);\r\n      }\r\n      indexOffset += geom.attributes.position.count;\r\n    });\r\n    mergedGeometry.setIndex(mergedIndex);\r\n  }\r\n  for (let name in attributes) {\r\n    const mergedAttribute = mergeBufferAttributes(attributes[name]);\r\n    if (!mergedAttribute) {\r\n      console.error(\r\n        \"THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the \" + name + \" attribute.\"\r\n      );\r\n      return null;\r\n    }\r\n    mergedGeometry.setAttribute(name, mergedAttribute);\r\n  }\r\n  for (let name in morphAttributes) {\r\n    const numMorphTargets = morphAttributes[name][0].length;\r\n    if (numMorphTargets === 0)\r\n      break;\r\n    mergedGeometry.morphAttributes = mergedGeometry.morphAttributes || {};\r\n    mergedGeometry.morphAttributes[name] = [];\r\n    for (let i = 0; i < numMorphTargets; ++i) {\r\n      const morphAttributesToMerge = [];\r\n      for (let j = 0; j < morphAttributes[name].length; ++j) {\r\n        morphAttributesToMerge.push(morphAttributes[name][j][i]);\r\n      }\r\n      const mergedMorphAttribute = mergeBufferAttributes(morphAttributesToMerge);\r\n      if (!mergedMorphAttribute) {\r\n        console.error(\r\n          \"THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the \" + name + \" morphAttribute.\"\r\n        );\r\n        return null;\r\n      }\r\n      mergedGeometry.morphAttributes[name].push(mergedMorphAttribute);\r\n    }\r\n  }\r\n  return mergedGeometry;\r\n};\r\nconst mergeBufferAttributes = (attributes) => {\r\n  let TypedArray = void 0;\r\n  let itemSize = void 0;\r\n  let normalized = void 0;\r\n  let arrayLength = 0;\r\n  attributes.forEach((attr) => {\r\n    if (TypedArray === void 0) {\r\n      TypedArray = attr.array.constructor;\r\n    }\r\n    if (TypedArray !== attr.array.constructor) {\r\n      console.error(\r\n        \"THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes.\"\r\n      );\r\n      return null;\r\n    }\r\n    if (itemSize === void 0)\r\n      itemSize = attr.itemSize;\r\n    if (itemSize !== attr.itemSize) {\r\n      console.error(\r\n        \"THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes.\"\r\n      );\r\n      return null;\r\n    }\r\n    if (normalized === void 0)\r\n      normalized = attr.normalized;\r\n    if (normalized !== attr.normalized) {\r\n      console.error(\r\n        \"THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes.\"\r\n      );\r\n      return null;\r\n    }\r\n    arrayLength += attr.array.length;\r\n  });\r\n  if (TypedArray && itemSize) {\r\n    const array = new TypedArray(arrayLength);\r\n    let offset = 0;\r\n    attributes.forEach((attr) => {\r\n      array.set(attr.array, offset);\r\n      offset += attr.array.length;\r\n    });\r\n    return new BufferAttribute(array, itemSize, normalized);\r\n  }\r\n};\r\nconst interleaveAttributes = (attributes) => {\r\n  let TypedArray = void 0;\r\n  let arrayLength = 0;\r\n  let stride = 0;\r\n  for (let i = 0, l = attributes.length; i < l; ++i) {\r\n    const attribute = attributes[i];\r\n    if (TypedArray === void 0)\r\n      TypedArray = attribute.array.constructor;\r\n    if (TypedArray !== attribute.array.constructor) {\r\n      console.error(\"AttributeBuffers of different types cannot be interleaved\");\r\n      return null;\r\n    }\r\n    arrayLength += attribute.array.length;\r\n    stride += attribute.itemSize;\r\n  }\r\n  const interleavedBuffer = new InterleavedBuffer(new TypedArray(arrayLength), stride);\r\n  let offset = 0;\r\n  const res = [];\r\n  const getters = [\"getX\", \"getY\", \"getZ\", \"getW\"];\r\n  const setters = [\"setX\", \"setY\", \"setZ\", \"setW\"];\r\n  for (let j = 0, l = attributes.length; j < l; j++) {\r\n    const attribute = attributes[j];\r\n    const itemSize = attribute.itemSize;\r\n    const count = attribute.count;\r\n    const iba = new InterleavedBufferAttribute(interleavedBuffer, itemSize, offset, attribute.normalized);\r\n    res.push(iba);\r\n    offset += itemSize;\r\n    for (let c = 0; c < count; c++) {\r\n      for (let k = 0; k < itemSize; k++) {\r\n        const set = getWithKey(iba, setters[k]);\r\n        const get = getWithKey(attribute, getters[k]);\r\n        set(c, get(c));\r\n      }\r\n    }\r\n  }\r\n  return res;\r\n};\r\nfunction estimateBytesUsed(geometry) {\r\n  let mem = 0;\r\n  for (let name in geometry.attributes) {\r\n    const attr = geometry.getAttribute(name);\r\n    mem += attr.count * attr.itemSize * attr.array.BYTES_PER_ELEMENT;\r\n  }\r\n  const indices = geometry.getIndex();\r\n  mem += indices ? indices.count * indices.itemSize * indices.array.BYTES_PER_ELEMENT : 0;\r\n  return mem;\r\n}\r\nfunction mergeVertices(geometry, tolerance = 1e-4) {\r\n  tolerance = Math.max(tolerance, Number.EPSILON);\r\n  const hashToIndex = {};\r\n  const indices = geometry.getIndex();\r\n  const positions = geometry.getAttribute(\"position\");\r\n  const vertexCount = indices ? indices.count : positions.count;\r\n  let nextIndex = 0;\r\n  const attributeNames = Object.keys(geometry.attributes);\r\n  const attrArrays = {};\r\n  const morphAttrsArrays = {};\r\n  const newIndices = [];\r\n  const getters = [\"getX\", \"getY\", \"getZ\", \"getW\"];\r\n  for (let i = 0, l = attributeNames.length; i < l; i++) {\r\n    const name = attributeNames[i];\r\n    attrArrays[name] = [];\r\n    const morphAttr = geometry.morphAttributes[name];\r\n    if (morphAttr) {\r\n      morphAttrsArrays[name] = new Array(morphAttr.length).fill(0).map(() => []);\r\n    }\r\n  }\r\n  const decimalShift = Math.log10(1 / tolerance);\r\n  const shiftMultiplier = Math.pow(10, decimalShift);\r\n  for (let i = 0; i < vertexCount; i++) {\r\n    const index = indices ? indices.getX(i) : i;\r\n    let hash = \"\";\r\n    for (let j = 0, l = attributeNames.length; j < l; j++) {\r\n      const name = attributeNames[j];\r\n      const attribute = geometry.getAttribute(name);\r\n      const itemSize = attribute.itemSize;\r\n      for (let k = 0; k < itemSize; k++) {\r\n        hash += `${~~(attribute[getters[k]](index) * shiftMultiplier)},`;\r\n      }\r\n    }\r\n    if (hash in hashToIndex) {\r\n      newIndices.push(hashToIndex[hash]);\r\n    } else {\r\n      for (let j = 0, l = attributeNames.length; j < l; j++) {\r\n        const name = attributeNames[j];\r\n        const attribute = geometry.getAttribute(name);\r\n        const morphAttr = geometry.morphAttributes[name];\r\n        const itemSize = attribute.itemSize;\r\n        const newarray = attrArrays[name];\r\n        const newMorphArrays = morphAttrsArrays[name];\r\n        for (let k = 0; k < itemSize; k++) {\r\n          const getterFunc = getters[k];\r\n          newarray.push(attribute[getterFunc](index));\r\n          if (morphAttr) {\r\n            for (let m = 0, ml = morphAttr.length; m < ml; m++) {\r\n              newMorphArrays[m].push(morphAttr[m][getterFunc](index));\r\n            }\r\n          }\r\n        }\r\n      }\r\n      hashToIndex[hash] = nextIndex;\r\n      newIndices.push(nextIndex);\r\n      nextIndex++;\r\n    }\r\n  }\r\n  const result = geometry.clone();\r\n  for (let i = 0, l = attributeNames.length; i < l; i++) {\r\n    const name = attributeNames[i];\r\n    const oldAttribute = geometry.getAttribute(name);\r\n    const buffer = new oldAttribute.array.constructor(attrArrays[name]);\r\n    const attribute = new BufferAttribute(buffer, oldAttribute.itemSize, oldAttribute.normalized);\r\n    result.setAttribute(name, attribute);\r\n    if (name in morphAttrsArrays) {\r\n      for (let j = 0; j < morphAttrsArrays[name].length; j++) {\r\n        const oldMorphAttribute = geometry.morphAttributes[name][j];\r\n        const buffer2 = new oldMorphAttribute.array.constructor(morphAttrsArrays[name][j]);\r\n        const morphAttribute = new BufferAttribute(buffer2, oldMorphAttribute.itemSize, oldMorphAttribute.normalized);\r\n        result.morphAttributes[name][j] = morphAttribute;\r\n      }\r\n    }\r\n  }\r\n  result.setIndex(newIndices);\r\n  return result;\r\n}\r\nfunction toTrianglesDrawMode(geometry, drawMode) {\r\n  if (drawMode === TrianglesDrawMode) {\r\n    console.warn(\"THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles.\");\r\n    return geometry;\r\n  }\r\n  if (drawMode === TriangleFanDrawMode || drawMode === TriangleStripDrawMode) {\r\n    let index = geometry.getIndex();\r\n    if (index === null) {\r\n      const indices = [];\r\n      const position = geometry.getAttribute(\"position\");\r\n      if (position !== void 0) {\r\n        for (let i = 0; i < position.count; i++) {\r\n          indices.push(i);\r\n        }\r\n        geometry.setIndex(indices);\r\n        index = geometry.getIndex();\r\n      } else {\r\n        console.error(\r\n          \"THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible.\"\r\n        );\r\n        return geometry;\r\n      }\r\n    }\r\n    const numberOfTriangles = index.count - 2;\r\n    const newIndices = [];\r\n    if (index) {\r\n      if (drawMode === TriangleFanDrawMode) {\r\n        for (let i = 1; i <= numberOfTriangles; i++) {\r\n          newIndices.push(index.getX(0));\r\n          newIndices.push(index.getX(i));\r\n          newIndices.push(index.getX(i + 1));\r\n        }\r\n      } else {\r\n        for (let i = 0; i < numberOfTriangles; i++) {\r\n          if (i % 2 === 0) {\r\n            newIndices.push(index.getX(i));\r\n            newIndices.push(index.getX(i + 1));\r\n            newIndices.push(index.getX(i + 2));\r\n          } else {\r\n            newIndices.push(index.getX(i + 2));\r\n            newIndices.push(index.getX(i + 1));\r\n            newIndices.push(index.getX(i));\r\n          }\r\n        }\r\n      }\r\n    }\r\n    if (newIndices.length / 3 !== numberOfTriangles) {\r\n      console.error(\"THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.\");\r\n    }\r\n    const newGeometry = geometry.clone();\r\n    newGeometry.setIndex(newIndices);\r\n    newGeometry.clearGroups();\r\n    return newGeometry;\r\n  } else {\r\n    console.error(\"THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:\", drawMode);\r\n    return geometry;\r\n  }\r\n}\r\nfunction computeMorphedAttributes(object) {\r\n  if (object.geometry.isBufferGeometry !== true) {\r\n    console.error(\"THREE.BufferGeometryUtils: Geometry is not of type BufferGeometry.\");\r\n    return null;\r\n  }\r\n  const _vA = new Vector3();\r\n  const _vB = new Vector3();\r\n  const _vC = new Vector3();\r\n  const _tempA = new Vector3();\r\n  const _tempB = new Vector3();\r\n  const _tempC = new Vector3();\r\n  const _morphA = new Vector3();\r\n  const _morphB = new Vector3();\r\n  const _morphC = new Vector3();\r\n  function _calculateMorphedAttributeData(object2, material2, attribute, morphAttribute, morphTargetsRelative2, a2, b2, c2, modifiedAttributeArray) {\r\n    _vA.fromBufferAttribute(attribute, a2);\r\n    _vB.fromBufferAttribute(attribute, b2);\r\n    _vC.fromBufferAttribute(attribute, c2);\r\n    const morphInfluences = object2.morphTargetInfluences;\r\n    if (\r\n      // @ts-ignore\r\n      material2.morphTargets && morphAttribute && morphInfluences\r\n    ) {\r\n      _morphA.set(0, 0, 0);\r\n      _morphB.set(0, 0, 0);\r\n      _morphC.set(0, 0, 0);\r\n      for (let i2 = 0, il2 = morphAttribute.length; i2 < il2; i2++) {\r\n        const influence = morphInfluences[i2];\r\n        const morph = morphAttribute[i2];\r\n        if (influence === 0)\r\n          continue;\r\n        _tempA.fromBufferAttribute(morph, a2);\r\n        _tempB.fromBufferAttribute(morph, b2);\r\n        _tempC.fromBufferAttribute(morph, c2);\r\n        if (morphTargetsRelative2) {\r\n          _morphA.addScaledVector(_tempA, influence);\r\n          _morphB.addScaledVector(_tempB, influence);\r\n          _morphC.addScaledVector(_tempC, influence);\r\n        } else {\r\n          _morphA.addScaledVector(_tempA.sub(_vA), influence);\r\n          _morphB.addScaledVector(_tempB.sub(_vB), influence);\r\n          _morphC.addScaledVector(_tempC.sub(_vC), influence);\r\n        }\r\n      }\r\n      _vA.add(_morphA);\r\n      _vB.add(_morphB);\r\n      _vC.add(_morphC);\r\n    }\r\n    if (object2.isSkinnedMesh) {\r\n      object2.boneTransform(a2, _vA);\r\n      object2.boneTransform(b2, _vB);\r\n      object2.boneTransform(c2, _vC);\r\n    }\r\n    modifiedAttributeArray[a2 * 3 + 0] = _vA.x;\r\n    modifiedAttributeArray[a2 * 3 + 1] = _vA.y;\r\n    modifiedAttributeArray[a2 * 3 + 2] = _vA.z;\r\n    modifiedAttributeArray[b2 * 3 + 0] = _vB.x;\r\n    modifiedAttributeArray[b2 * 3 + 1] = _vB.y;\r\n    modifiedAttributeArray[b2 * 3 + 2] = _vB.z;\r\n    modifiedAttributeArray[c2 * 3 + 0] = _vC.x;\r\n    modifiedAttributeArray[c2 * 3 + 1] = _vC.y;\r\n    modifiedAttributeArray[c2 * 3 + 2] = _vC.z;\r\n  }\r\n  const geometry = object.geometry;\r\n  const material = object.material;\r\n  let a, b, c;\r\n  const index = geometry.index;\r\n  const positionAttribute = geometry.attributes.position;\r\n  const morphPosition = geometry.morphAttributes.position;\r\n  const morphTargetsRelative = geometry.morphTargetsRelative;\r\n  const normalAttribute = geometry.attributes.normal;\r\n  const morphNormal = geometry.morphAttributes.position;\r\n  const groups = geometry.groups;\r\n  const drawRange = geometry.drawRange;\r\n  let i, j, il, jl;\r\n  let group, groupMaterial;\r\n  let start, end;\r\n  const modifiedPosition = new Float32Array(positionAttribute.count * positionAttribute.itemSize);\r\n  const modifiedNormal = new Float32Array(normalAttribute.count * normalAttribute.itemSize);\r\n  if (index !== null) {\r\n    if (Array.isArray(material)) {\r\n      for (i = 0, il = groups.length; i < il; i++) {\r\n        group = groups[i];\r\n        groupMaterial = material[group.materialIndex];\r\n        start = Math.max(group.start, drawRange.start);\r\n        end = Math.min(group.start + group.count, drawRange.start + drawRange.count);\r\n        for (j = start, jl = end; j < jl; j += 3) {\r\n          a = index.getX(j);\r\n          b = index.getX(j + 1);\r\n          c = index.getX(j + 2);\r\n          _calculateMorphedAttributeData(\r\n            object,\r\n            groupMaterial,\r\n            positionAttribute,\r\n            morphPosition,\r\n            morphTargetsRelative,\r\n            a,\r\n            b,\r\n            c,\r\n            modifiedPosition\r\n          );\r\n          _calculateMorphedAttributeData(\r\n            object,\r\n            groupMaterial,\r\n            normalAttribute,\r\n            morphNormal,\r\n            morphTargetsRelative,\r\n            a,\r\n            b,\r\n            c,\r\n            modifiedNormal\r\n          );\r\n        }\r\n      }\r\n    } else {\r\n      start = Math.max(0, drawRange.start);\r\n      end = Math.min(index.count, drawRange.start + drawRange.count);\r\n      for (i = start, il = end; i < il; i += 3) {\r\n        a = index.getX(i);\r\n        b = index.getX(i + 1);\r\n        c = index.getX(i + 2);\r\n        _calculateMorphedAttributeData(\r\n          object,\r\n          material,\r\n          positionAttribute,\r\n          morphPosition,\r\n          morphTargetsRelative,\r\n          a,\r\n          b,\r\n          c,\r\n          modifiedPosition\r\n        );\r\n        _calculateMorphedAttributeData(\r\n          object,\r\n          material,\r\n          normalAttribute,\r\n          morphNormal,\r\n          morphTargetsRelative,\r\n          a,\r\n          b,\r\n          c,\r\n          modifiedNormal\r\n        );\r\n      }\r\n    }\r\n  } else if (positionAttribute !== void 0) {\r\n    if (Array.isArray(material)) {\r\n      for (i = 0, il = groups.length; i < il; i++) {\r\n        group = groups[i];\r\n        groupMaterial = material[group.materialIndex];\r\n        start = Math.max(group.start, drawRange.start);\r\n        end = Math.min(group.start + group.count, drawRange.start + drawRange.count);\r\n        for (j = start, jl = end; j < jl; j += 3) {\r\n          a = j;\r\n          b = j + 1;\r\n          c = j + 2;\r\n          _calculateMorphedAttributeData(\r\n            object,\r\n            groupMaterial,\r\n            positionAttribute,\r\n            morphPosition,\r\n            morphTargetsRelative,\r\n            a,\r\n            b,\r\n            c,\r\n            modifiedPosition\r\n          );\r\n          _calculateMorphedAttributeData(\r\n            object,\r\n            groupMaterial,\r\n            normalAttribute,\r\n            morphNormal,\r\n            morphTargetsRelative,\r\n            a,\r\n            b,\r\n            c,\r\n            modifiedNormal\r\n          );\r\n        }\r\n      }\r\n    } else {\r\n      start = Math.max(0, drawRange.start);\r\n      end = Math.min(positionAttribute.count, drawRange.start + drawRange.count);\r\n      for (i = start, il = end; i < il; i += 3) {\r\n        a = i;\r\n        b = i + 1;\r\n        c = i + 2;\r\n        _calculateMorphedAttributeData(\r\n          object,\r\n          material,\r\n          positionAttribute,\r\n          morphPosition,\r\n          morphTargetsRelative,\r\n          a,\r\n          b,\r\n          c,\r\n          modifiedPosition\r\n        );\r\n        _calculateMorphedAttributeData(\r\n          object,\r\n          material,\r\n          normalAttribute,\r\n          morphNormal,\r\n          morphTargetsRelative,\r\n          a,\r\n          b,\r\n          c,\r\n          modifiedNormal\r\n        );\r\n      }\r\n    }\r\n  }\r\n  const morphedPositionAttribute = new Float32BufferAttribute(modifiedPosition, 3);\r\n  const morphedNormalAttribute = new Float32BufferAttribute(modifiedNormal, 3);\r\n  return {\r\n    positionAttribute,\r\n    normalAttribute,\r\n    morphedPositionAttribute,\r\n    morphedNormalAttribute\r\n  };\r\n}\r\nfunction toCreasedNormals(geometry, creaseAngle = Math.PI / 3) {\r\n  const creaseDot = Math.cos(creaseAngle);\r\n  const hashMultiplier = (1 + 1e-10) * 100;\r\n  const verts = [new Vector3(), new Vector3(), new Vector3()];\r\n  const tempVec1 = new Vector3();\r\n  const tempVec2 = new Vector3();\r\n  const tempNorm = new Vector3();\r\n  const tempNorm2 = new Vector3();\r\n  function hashVertex(v) {\r\n    const x = ~~(v.x * hashMultiplier);\r\n    const y = ~~(v.y * hashMultiplier);\r\n    const z = ~~(v.z * hashMultiplier);\r\n    return `${x},${y},${z}`;\r\n  }\r\n  const resultGeometry = geometry.toNonIndexed();\r\n  const posAttr = resultGeometry.attributes.position;\r\n  const vertexMap = {};\r\n  for (let i = 0, l = posAttr.count / 3; i < l; i++) {\r\n    const i3 = 3 * i;\r\n    const a = verts[0].fromBufferAttribute(posAttr, i3 + 0);\r\n    const b = verts[1].fromBufferAttribute(posAttr, i3 + 1);\r\n    const c = verts[2].fromBufferAttribute(posAttr, i3 + 2);\r\n    tempVec1.subVectors(c, b);\r\n    tempVec2.subVectors(a, b);\r\n    const normal = new Vector3().crossVectors(tempVec1, tempVec2).normalize();\r\n    for (let n = 0; n < 3; n++) {\r\n      const vert = verts[n];\r\n      const hash = hashVertex(vert);\r\n      if (!(hash in vertexMap)) {\r\n        vertexMap[hash] = [];\r\n      }\r\n      vertexMap[hash].push(normal);\r\n    }\r\n  }\r\n  const normalArray = new Float32Array(posAttr.count * 3);\r\n  const normAttr = new BufferAttribute(normalArray, 3, false);\r\n  for (let i = 0, l = posAttr.count / 3; i < l; i++) {\r\n    const i3 = 3 * i;\r\n    const a = verts[0].fromBufferAttribute(posAttr, i3 + 0);\r\n    const b = verts[1].fromBufferAttribute(posAttr, i3 + 1);\r\n    const c = verts[2].fromBufferAttribute(posAttr, i3 + 2);\r\n    tempVec1.subVectors(c, b);\r\n    tempVec2.subVectors(a, b);\r\n    tempNorm.crossVectors(tempVec1, tempVec2).normalize();\r\n    for (let n = 0; n < 3; n++) {\r\n      const vert = verts[n];\r\n      const hash = hashVertex(vert);\r\n      const otherNormals = vertexMap[hash];\r\n      tempNorm2.set(0, 0, 0);\r\n      for (let k = 0, lk = otherNormals.length; k < lk; k++) {\r\n        const otherNorm = otherNormals[k];\r\n        if (tempNorm.dot(otherNorm) > creaseDot) {\r\n          tempNorm2.add(otherNorm);\r\n        }\r\n      }\r\n      tempNorm2.normalize();\r\n      normAttr.setXYZ(i3 + n, tempNorm2.x, tempNorm2.y, tempNorm2.z);\r\n    }\r\n  }\r\n  resultGeometry.setAttribute(\"normal\", normAttr);\r\n  return resultGeometry;\r\n}\r\nexport {\r\n  computeMorphedAttributes,\r\n  estimateBytesUsed,\r\n  interleaveAttributes,\r\n  mergeBufferAttributes,\r\n  mergeBufferGeometries,\r\n  mergeVertices,\r\n  toCreasedNormals,\r\n  toTrianglesDrawMode\r\n};\r\n", "var __defProp = Object.defineProperty;\r\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\r\nvar __publicField = (obj, key, value) => {\r\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\r\n  return value;\r\n};\r\nimport { Vector3, BufferGeometry, Float32BufferAttribute } from \"three\";\r\nimport { mergeVertices } from \"../utils/BufferGeometryUtils.js\";\r\nconst cb = /* @__PURE__ */ new Vector3();\r\nconst ab = /* @__PURE__ */ new Vector3();\r\nfunction pushIfUnique(array, object) {\r\n  if (array.indexOf(object) === -1)\r\n    array.push(object);\r\n}\r\nfunction removeFromArray(array, object) {\r\n  const k = array.indexOf(object);\r\n  if (k > -1)\r\n    array.splice(k, 1);\r\n}\r\nclass Vertex {\r\n  constructor(v, id) {\r\n    __publicField(this, \"position\");\r\n    __publicField(this, \"id\");\r\n    __publicField(this, \"faces\");\r\n    __publicField(this, \"neighbors\");\r\n    __publicField(this, \"collapseCost\");\r\n    __publicField(this, \"collapseNeighbor\");\r\n    __publicField(this, \"minCost\", 0);\r\n    __publicField(this, \"totalCost\", 0);\r\n    __publicField(this, \"costCount\", 0);\r\n    this.position = v;\r\n    this.id = id;\r\n    this.faces = [];\r\n    this.neighbors = [];\r\n    this.collapseCost = 0;\r\n    this.collapseNeighbor = null;\r\n  }\r\n  addUniqueNeighbor(vertex) {\r\n    pushIfUnique(this.neighbors, vertex);\r\n  }\r\n  removeIfNonNeighbor(n) {\r\n    const neighbors = this.neighbors;\r\n    const faces = this.faces;\r\n    const offset = neighbors.indexOf(n);\r\n    if (offset === -1)\r\n      return;\r\n    for (let i = 0; i < faces.length; i++) {\r\n      if (faces[i].hasVertex(n))\r\n        return;\r\n    }\r\n    neighbors.splice(offset, 1);\r\n  }\r\n}\r\nclass Triangle {\r\n  constructor(v1, v2, v3, a, b, c) {\r\n    __publicField(this, \"a\");\r\n    __publicField(this, \"b\");\r\n    __publicField(this, \"c\");\r\n    __publicField(this, \"v1\");\r\n    __publicField(this, \"v2\");\r\n    __publicField(this, \"v3\");\r\n    __publicField(this, \"normal\", new Vector3());\r\n    this.a = a;\r\n    this.b = b;\r\n    this.c = c;\r\n    this.v1 = v1;\r\n    this.v2 = v2;\r\n    this.v3 = v3;\r\n    this.computeNormal();\r\n    v1.faces.push(this);\r\n    v1.addUniqueNeighbor(v2);\r\n    v1.addUniqueNeighbor(v3);\r\n    v2.faces.push(this);\r\n    v2.addUniqueNeighbor(v1);\r\n    v2.addUniqueNeighbor(v3);\r\n    v3.faces.push(this);\r\n    v3.addUniqueNeighbor(v1);\r\n    v3.addUniqueNeighbor(v2);\r\n  }\r\n  computeNormal() {\r\n    const vA = this.v1.position;\r\n    const vB = this.v2.position;\r\n    const vC = this.v3.position;\r\n    cb.subVectors(vC, vB);\r\n    ab.subVectors(vA, vB);\r\n    cb.cross(ab).normalize();\r\n    this.normal.copy(cb);\r\n  }\r\n  hasVertex(v) {\r\n    return v === this.v1 || v === this.v2 || v === this.v3;\r\n  }\r\n  replaceVertex(oldv, newv) {\r\n    if (oldv === this.v1)\r\n      this.v1 = newv;\r\n    else if (oldv === this.v2)\r\n      this.v2 = newv;\r\n    else if (oldv === this.v3)\r\n      this.v3 = newv;\r\n    removeFromArray(oldv.faces, this);\r\n    newv.faces.push(this);\r\n    oldv.removeIfNonNeighbor(this.v1);\r\n    this.v1.removeIfNonNeighbor(oldv);\r\n    oldv.removeIfNonNeighbor(this.v2);\r\n    this.v2.removeIfNonNeighbor(oldv);\r\n    oldv.removeIfNonNeighbor(this.v3);\r\n    this.v3.removeIfNonNeighbor(oldv);\r\n    this.v1.addUniqueNeighbor(this.v2);\r\n    this.v1.addUniqueNeighbor(this.v3);\r\n    this.v2.addUniqueNeighbor(this.v1);\r\n    this.v2.addUniqueNeighbor(this.v3);\r\n    this.v3.addUniqueNeighbor(this.v1);\r\n    this.v3.addUniqueNeighbor(this.v2);\r\n    this.computeNormal();\r\n  }\r\n}\r\nclass SimplifyModifier {\r\n  constructor() {\r\n    __publicField(this, \"computeEdgeCollapseCost\", (u, v) => {\r\n      const edgelength = v.position.distanceTo(u.position);\r\n      let curvature = 0;\r\n      const sideFaces = [];\r\n      let i, il = u.faces.length, face, sideFace;\r\n      for (i = 0; i < il; i++) {\r\n        face = u.faces[i];\r\n        if (face.hasVertex(v)) {\r\n          sideFaces.push(face);\r\n        }\r\n      }\r\n      for (i = 0; i < il; i++) {\r\n        let minCurvature = 1;\r\n        face = u.faces[i];\r\n        for (let j = 0; j < sideFaces.length; j++) {\r\n          sideFace = sideFaces[j];\r\n          const dotProd = face.normal.dot(sideFace.normal);\r\n          minCurvature = Math.min(minCurvature, (1.001 - dotProd) / 2);\r\n        }\r\n        curvature = Math.max(curvature, minCurvature);\r\n      }\r\n      const borders = 0;\r\n      if (sideFaces.length < 2) {\r\n        curvature = 1;\r\n      }\r\n      const amt = edgelength * curvature + borders;\r\n      return amt;\r\n    });\r\n    __publicField(this, \"computeEdgeCostAtVertex\", (v) => {\r\n      if (v.neighbors.length === 0) {\r\n        v.collapseNeighbor = null;\r\n        v.collapseCost = -0.01;\r\n        return;\r\n      }\r\n      v.collapseCost = 1e5;\r\n      v.collapseNeighbor = null;\r\n      for (let i = 0; i < v.neighbors.length; i++) {\r\n        const collapseCost = this.computeEdgeCollapseCost(v, v.neighbors[i]);\r\n        if (!v.collapseNeighbor) {\r\n          v.collapseNeighbor = v.neighbors[i];\r\n          v.collapseCost = collapseCost;\r\n          v.minCost = collapseCost;\r\n          v.totalCost = 0;\r\n          v.costCount = 0;\r\n        }\r\n        v.costCount++;\r\n        v.totalCost += collapseCost;\r\n        if (collapseCost < v.minCost) {\r\n          v.collapseNeighbor = v.neighbors[i];\r\n          v.minCost = collapseCost;\r\n        }\r\n      }\r\n      v.collapseCost = v.totalCost / v.costCount;\r\n    });\r\n    __publicField(this, \"removeFace\", (f, faces) => {\r\n      removeFromArray(faces, f);\r\n      if (f.v1)\r\n        removeFromArray(f.v1.faces, f);\r\n      if (f.v2)\r\n        removeFromArray(f.v2.faces, f);\r\n      if (f.v3)\r\n        removeFromArray(f.v3.faces, f);\r\n      const vs = [f.v1, f.v2, f.v3];\r\n      let v1, v2;\r\n      for (let i = 0; i < 3; i++) {\r\n        v1 = vs[i];\r\n        v2 = vs[(i + 1) % 3];\r\n        if (!v1 || !v2)\r\n          continue;\r\n        v1.removeIfNonNeighbor(v2);\r\n        v2.removeIfNonNeighbor(v1);\r\n      }\r\n    });\r\n    __publicField(this, \"collapse\", (vertices, faces, u, v) => {\r\n      if (!v) {\r\n        this.removeVertex(u, vertices);\r\n        return;\r\n      }\r\n      let i;\r\n      const tmpVertices = [];\r\n      for (i = 0; i < u.neighbors.length; i++) {\r\n        tmpVertices.push(u.neighbors[i]);\r\n      }\r\n      for (i = u.faces.length - 1; i >= 0; i--) {\r\n        if (u.faces[i].hasVertex(v)) {\r\n          this.removeFace(u.faces[i], faces);\r\n        }\r\n      }\r\n      for (i = u.faces.length - 1; i >= 0; i--) {\r\n        u.faces[i].replaceVertex(u, v);\r\n      }\r\n      this.removeVertex(u, vertices);\r\n      for (i = 0; i < tmpVertices.length; i++) {\r\n        this.computeEdgeCostAtVertex(tmpVertices[i]);\r\n      }\r\n    });\r\n    __publicField(this, \"minimumCostEdge\", (vertices) => {\r\n      let least = vertices[0];\r\n      for (let i = 0; i < vertices.length; i++) {\r\n        if (vertices[i].collapseCost < least.collapseCost) {\r\n          least = vertices[i];\r\n        }\r\n      }\r\n      return least;\r\n    });\r\n    __publicField(this, \"modify\", (geometry, count) => {\r\n      geometry = geometry.clone();\r\n      const attributes = geometry.attributes;\r\n      for (let name in attributes) {\r\n        if (name !== \"position\")\r\n          geometry.deleteAttribute(name);\r\n      }\r\n      geometry = mergeVertices(geometry);\r\n      const vertices = [];\r\n      const faces = [];\r\n      const positionAttribute = geometry.getAttribute(\"position\");\r\n      for (let i = 0; i < positionAttribute.count; i++) {\r\n        const v = new Vector3().fromBufferAttribute(positionAttribute, i);\r\n        const vertex = new Vertex(v, i);\r\n        vertices.push(vertex);\r\n      }\r\n      const geomIndex = geometry.getIndex();\r\n      if (geomIndex !== null) {\r\n        for (let i = 0; i < geomIndex.count; i += 3) {\r\n          const a = geomIndex.getX(i);\r\n          const b = geomIndex.getX(i + 1);\r\n          const c = geomIndex.getX(i + 2);\r\n          const triangle = new Triangle(vertices[a], vertices[b], vertices[c], a, b, c);\r\n          faces.push(triangle);\r\n        }\r\n      } else {\r\n        for (let i = 0; i < positionAttribute.count; i += 3) {\r\n          const a = i;\r\n          const b = i + 1;\r\n          const c = i + 2;\r\n          const triangle = new Triangle(vertices[a], vertices[b], vertices[c], a, b, c);\r\n          faces.push(triangle);\r\n        }\r\n      }\r\n      for (let i = 0, il = vertices.length; i < il; i++) {\r\n        this.computeEdgeCostAtVertex(vertices[i]);\r\n      }\r\n      let nextVertex;\r\n      let z = count;\r\n      while (z--) {\r\n        nextVertex = this.minimumCostEdge(vertices);\r\n        if (!nextVertex) {\r\n          console.log(\"THREE.SimplifyModifier: No next vertex\");\r\n          break;\r\n        } else {\r\n          this.collapse(vertices, faces, nextVertex, nextVertex.collapseNeighbor);\r\n        }\r\n      }\r\n      const simplifiedGeometry = new BufferGeometry();\r\n      const position = [];\r\n      let index = [];\r\n      for (let i = 0; i < vertices.length; i++) {\r\n        const vertex = vertices[i].position;\r\n        position.push(vertex.x, vertex.y, vertex.z);\r\n      }\r\n      for (let i = 0; i < faces.length; i++) {\r\n        const face = faces[i];\r\n        const a = vertices.indexOf(face.v1);\r\n        const b = vertices.indexOf(face.v2);\r\n        const c = vertices.indexOf(face.v3);\r\n        index.push(a, b, c);\r\n      }\r\n      simplifiedGeometry.setAttribute(\"position\", new Float32BufferAttribute(position, 3));\r\n      simplifiedGeometry.setIndex(index);\r\n      return simplifiedGeometry;\r\n    });\r\n  }\r\n  removeVertex(v, vertices) {\r\n    console.assert(v.faces.length === 0);\r\n    while (v.neighbors.length) {\r\n      const n = v.neighbors.pop();\r\n      removeFromArray(n.neighbors, v);\r\n    }\r\n    removeFromArray(vertices, v);\r\n  }\r\n}\r\nexport {\r\n  SimplifyModifier\r\n};\r\n", "import { PlaneGeometry, ShaderMaterial, Uniform, Mesh, PerspectiveCamera, Scene, WebGLRenderer, Texture, NearestFilter, NearestMipmapNearestFilter, NearestMipmapLinearFilter, LinearFilter, LinearMipmapNearestFilter, LinearMipmapLinearFilter, ClampToEdgeWrapping, RepeatWrapping, MirroredRepeatWrapping, Color, MathUtils, Vector3, CompressedTexture, RGBAFormat, DoubleSide, REVISION, BufferAttribute, PropertyBinding, InterpolateDiscrete, Matrix4, InterpolateLinear } from \"three\";\r\nlet _renderer;\r\nlet fullscreenQuadGeometry;\r\nlet fullscreenQuadMaterial;\r\nlet fullscreenQuad;\r\nfunction decompress(texture, maxTextureSize = Infinity, renderer = null) {\r\n  if (!fullscreenQuadGeometry)\r\n    fullscreenQuadGeometry = new PlaneGeometry(2, 2, 1, 1);\r\n  if (!fullscreenQuadMaterial)\r\n    fullscreenQuadMaterial = new ShaderMaterial({\r\n      uniforms: { blitTexture: new Uniform(texture) },\r\n      vertexShader: (\r\n        /* glsl */\r\n        `\r\n        varying vec2 vUv;\r\n        void main(){\r\n            vUv = uv;\r\n            gl_Position = vec4(position.xy * 1.0,0.,.999999);\r\n        }\r\n      `\r\n      ),\r\n      fragmentShader: (\r\n        /* glsl */\r\n        `\r\n          uniform sampler2D blitTexture; \r\n          varying vec2 vUv;\r\n\r\n          void main(){ \r\n              gl_FragColor = vec4(vUv.xy, 0, 1);\r\n              \r\n              #ifdef IS_SRGB\r\n              gl_FragColor = LinearTosRGB( texture2D( blitTexture, vUv) );\r\n              #else\r\n              gl_FragColor = texture2D( blitTexture, vUv);\r\n              #endif\r\n          }\r\n      `\r\n      )\r\n    });\r\n  fullscreenQuadMaterial.uniforms.blitTexture.value = texture;\r\n  fullscreenQuadMaterial.defines.IS_SRGB = \"colorSpace\" in texture ? texture.colorSpace === \"srgb\" : texture.encoding === 3001;\r\n  fullscreenQuadMaterial.needsUpdate = true;\r\n  if (!fullscreenQuad) {\r\n    fullscreenQuad = new Mesh(fullscreenQuadGeometry, fullscreenQuadMaterial);\r\n    fullscreenQuad.frustrumCulled = false;\r\n  }\r\n  const _camera = new PerspectiveCamera();\r\n  const _scene = new Scene();\r\n  _scene.add(fullscreenQuad);\r\n  if (!renderer) {\r\n    renderer = _renderer = new WebGLRenderer({ antialias: false });\r\n  }\r\n  renderer.setSize(Math.min(texture.image.width, maxTextureSize), Math.min(texture.image.height, maxTextureSize));\r\n  renderer.clear();\r\n  renderer.render(_scene, _camera);\r\n  const readableTexture = new Texture(renderer.domElement);\r\n  readableTexture.minFilter = texture.minFilter;\r\n  readableTexture.magFilter = texture.magFilter;\r\n  readableTexture.wrapS = texture.wrapS;\r\n  readableTexture.wrapT = texture.wrapT;\r\n  readableTexture.name = texture.name;\r\n  if (_renderer) {\r\n    _renderer.dispose();\r\n    _renderer = null;\r\n  }\r\n  return readableTexture;\r\n}\r\nconst KHR_mesh_quantization_ExtraAttrTypes = {\r\n  POSITION: [\r\n    \"byte\",\r\n    \"byte normalized\",\r\n    \"unsigned byte\",\r\n    \"unsigned byte normalized\",\r\n    \"short\",\r\n    \"short normalized\",\r\n    \"unsigned short\",\r\n    \"unsigned short normalized\"\r\n  ],\r\n  NORMAL: [\"byte normalized\", \"short normalized\"],\r\n  TANGENT: [\"byte normalized\", \"short normalized\"],\r\n  TEXCOORD: [\"byte\", \"byte normalized\", \"unsigned byte\", \"short\", \"short normalized\", \"unsigned short\"]\r\n};\r\nclass GLTFExporter {\r\n  constructor() {\r\n    this.pluginCallbacks = [];\r\n    this.register(function(writer) {\r\n      return new GLTFLightExtension(writer);\r\n    });\r\n    this.register(function(writer) {\r\n      return new GLTFMaterialsUnlitExtension(writer);\r\n    });\r\n    this.register(function(writer) {\r\n      return new GLTFMaterialsTransmissionExtension(writer);\r\n    });\r\n    this.register(function(writer) {\r\n      return new GLTFMaterialsVolumeExtension(writer);\r\n    });\r\n    this.register(function(writer) {\r\n      return new GLTFMaterialsIorExtension(writer);\r\n    });\r\n    this.register(function(writer) {\r\n      return new GLTFMaterialsSpecularExtension(writer);\r\n    });\r\n    this.register(function(writer) {\r\n      return new GLTFMaterialsClearcoatExtension(writer);\r\n    });\r\n    this.register(function(writer) {\r\n      return new GLTFMaterialsIridescenceExtension(writer);\r\n    });\r\n    this.register(function(writer) {\r\n      return new GLTFMaterialsSheenExtension(writer);\r\n    });\r\n    this.register(function(writer) {\r\n      return new GLTFMaterialsAnisotropyExtension(writer);\r\n    });\r\n    this.register(function(writer) {\r\n      return new GLTFMaterialsEmissiveStrengthExtension(writer);\r\n    });\r\n  }\r\n  register(callback) {\r\n    if (this.pluginCallbacks.indexOf(callback) === -1) {\r\n      this.pluginCallbacks.push(callback);\r\n    }\r\n    return this;\r\n  }\r\n  unregister(callback) {\r\n    if (this.pluginCallbacks.indexOf(callback) !== -1) {\r\n      this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(callback), 1);\r\n    }\r\n    return this;\r\n  }\r\n  /**\r\n   * Parse scenes and generate GLTF output\r\n   * @param  {Scene or [THREE.Scenes]} input   Scene or Array of THREE.Scenes\r\n   * @param  {Function} onDone  Callback on completed\r\n   * @param  {Function} onError  Callback on errors\r\n   * @param  {Object} options options\r\n   */\r\n  parse(input, onDone, onError, options) {\r\n    const writer = new GLTFWriter();\r\n    const plugins = [];\r\n    for (let i = 0, il = this.pluginCallbacks.length; i < il; i++) {\r\n      plugins.push(this.pluginCallbacks[i](writer));\r\n    }\r\n    writer.setPlugins(plugins);\r\n    writer.write(input, onDone, options).catch(onError);\r\n  }\r\n  parseAsync(input, options) {\r\n    const scope = this;\r\n    return new Promise(function(resolve, reject) {\r\n      scope.parse(input, resolve, reject, options);\r\n    });\r\n  }\r\n}\r\nconst WEBGL_CONSTANTS = {\r\n  POINTS: 0,\r\n  LINES: 1,\r\n  LINE_LOOP: 2,\r\n  LINE_STRIP: 3,\r\n  TRIANGLES: 4,\r\n  TRIANGLE_STRIP: 5,\r\n  TRIANGLE_FAN: 6,\r\n  BYTE: 5120,\r\n  UNSIGNED_BYTE: 5121,\r\n  SHORT: 5122,\r\n  UNSIGNED_SHORT: 5123,\r\n  INT: 5124,\r\n  UNSIGNED_INT: 5125,\r\n  FLOAT: 5126,\r\n  ARRAY_BUFFER: 34962,\r\n  ELEMENT_ARRAY_BUFFER: 34963,\r\n  NEAREST: 9728,\r\n  LINEAR: 9729,\r\n  NEAREST_MIPMAP_NEAREST: 9984,\r\n  LINEAR_MIPMAP_NEAREST: 9985,\r\n  NEAREST_MIPMAP_LINEAR: 9986,\r\n  LINEAR_MIPMAP_LINEAR: 9987,\r\n  CLAMP_TO_EDGE: 33071,\r\n  MIRRORED_REPEAT: 33648,\r\n  REPEAT: 10497\r\n};\r\nconst KHR_MESH_QUANTIZATION = \"KHR_mesh_quantization\";\r\nconst THREE_TO_WEBGL = {};\r\nTHREE_TO_WEBGL[NearestFilter] = WEBGL_CONSTANTS.NEAREST;\r\nTHREE_TO_WEBGL[NearestMipmapNearestFilter] = WEBGL_CONSTANTS.NEAREST_MIPMAP_NEAREST;\r\nTHREE_TO_WEBGL[NearestMipmapLinearFilter] = WEBGL_CONSTANTS.NEAREST_MIPMAP_LINEAR;\r\nTHREE_TO_WEBGL[LinearFilter] = WEBGL_CONSTANTS.LINEAR;\r\nTHREE_TO_WEBGL[LinearMipmapNearestFilter] = WEBGL_CONSTANTS.LINEAR_MIPMAP_NEAREST;\r\nTHREE_TO_WEBGL[LinearMipmapLinearFilter] = WEBGL_CONSTANTS.LINEAR_MIPMAP_LINEAR;\r\nTHREE_TO_WEBGL[ClampToEdgeWrapping] = WEBGL_CONSTANTS.CLAMP_TO_EDGE;\r\nTHREE_TO_WEBGL[RepeatWrapping] = WEBGL_CONSTANTS.REPEAT;\r\nTHREE_TO_WEBGL[MirroredRepeatWrapping] = WEBGL_CONSTANTS.MIRRORED_REPEAT;\r\nconst PATH_PROPERTIES = {\r\n  scale: \"scale\",\r\n  position: \"translation\",\r\n  quaternion: \"rotation\",\r\n  morphTargetInfluences: \"weights\"\r\n};\r\nconst DEFAULT_SPECULAR_COLOR = new Color();\r\nconst GLB_HEADER_BYTES = 12;\r\nconst GLB_HEADER_MAGIC = 1179937895;\r\nconst GLB_VERSION = 2;\r\nconst GLB_CHUNK_PREFIX_BYTES = 8;\r\nconst GLB_CHUNK_TYPE_JSON = 1313821514;\r\nconst GLB_CHUNK_TYPE_BIN = 5130562;\r\nfunction equalArray(array1, array2) {\r\n  return array1.length === array2.length && array1.every(function(element, index) {\r\n    return element === array2[index];\r\n  });\r\n}\r\nfunction stringToArrayBuffer(text) {\r\n  return new TextEncoder().encode(text).buffer;\r\n}\r\nfunction isIdentityMatrix(matrix) {\r\n  return equalArray(matrix.elements, [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]);\r\n}\r\nfunction getMinMax(attribute, start, count) {\r\n  const output = {\r\n    min: new Array(attribute.itemSize).fill(Number.POSITIVE_INFINITY),\r\n    max: new Array(attribute.itemSize).fill(Number.NEGATIVE_INFINITY)\r\n  };\r\n  for (let i = start; i < start + count; i++) {\r\n    for (let a = 0; a < attribute.itemSize; a++) {\r\n      let value;\r\n      if (attribute.itemSize > 4) {\r\n        value = attribute.array[i * attribute.itemSize + a];\r\n      } else {\r\n        if (a === 0)\r\n          value = attribute.getX(i);\r\n        else if (a === 1)\r\n          value = attribute.getY(i);\r\n        else if (a === 2)\r\n          value = attribute.getZ(i);\r\n        else if (a === 3)\r\n          value = attribute.getW(i);\r\n        if (attribute.normalized === true) {\r\n          value = MathUtils.normalize(value, attribute.array);\r\n        }\r\n      }\r\n      output.min[a] = Math.min(output.min[a], value);\r\n      output.max[a] = Math.max(output.max[a], value);\r\n    }\r\n  }\r\n  return output;\r\n}\r\nfunction getPaddedBufferSize(bufferSize) {\r\n  return Math.ceil(bufferSize / 4) * 4;\r\n}\r\nfunction getPaddedArrayBuffer(arrayBuffer, paddingByte = 0) {\r\n  const paddedLength = getPaddedBufferSize(arrayBuffer.byteLength);\r\n  if (paddedLength !== arrayBuffer.byteLength) {\r\n    const array = new Uint8Array(paddedLength);\r\n    array.set(new Uint8Array(arrayBuffer));\r\n    if (paddingByte !== 0) {\r\n      for (let i = arrayBuffer.byteLength; i < paddedLength; i++) {\r\n        array[i] = paddingByte;\r\n      }\r\n    }\r\n    return array.buffer;\r\n  }\r\n  return arrayBuffer;\r\n}\r\nfunction getCanvas() {\r\n  if (typeof document === \"undefined\" && typeof OffscreenCanvas !== \"undefined\") {\r\n    return new OffscreenCanvas(1, 1);\r\n  }\r\n  return document.createElement(\"canvas\");\r\n}\r\nfunction getToBlobPromise(canvas, mimeType) {\r\n  if (canvas.toBlob !== void 0) {\r\n    return new Promise((resolve) => canvas.toBlob(resolve, mimeType));\r\n  }\r\n  let quality;\r\n  if (mimeType === \"image/jpeg\") {\r\n    quality = 0.92;\r\n  } else if (mimeType === \"image/webp\") {\r\n    quality = 0.8;\r\n  }\r\n  return canvas.convertToBlob({\r\n    type: mimeType,\r\n    quality\r\n  });\r\n}\r\nclass GLTFWriter {\r\n  constructor() {\r\n    this.plugins = [];\r\n    this.options = {};\r\n    this.pending = [];\r\n    this.buffers = [];\r\n    this.byteOffset = 0;\r\n    this.buffers = [];\r\n    this.nodeMap = /* @__PURE__ */ new Map();\r\n    this.skins = [];\r\n    this.extensionsUsed = {};\r\n    this.extensionsRequired = {};\r\n    this.uids = /* @__PURE__ */ new Map();\r\n    this.uid = 0;\r\n    this.json = {\r\n      asset: {\r\n        version: \"2.0\",\r\n        generator: \"THREE.GLTFExporter\"\r\n      }\r\n    };\r\n    this.cache = {\r\n      meshes: /* @__PURE__ */ new Map(),\r\n      attributes: /* @__PURE__ */ new Map(),\r\n      attributesNormalized: /* @__PURE__ */ new Map(),\r\n      materials: /* @__PURE__ */ new Map(),\r\n      textures: /* @__PURE__ */ new Map(),\r\n      images: /* @__PURE__ */ new Map()\r\n    };\r\n  }\r\n  setPlugins(plugins) {\r\n    this.plugins = plugins;\r\n  }\r\n  /**\r\n   * Parse scenes and generate GLTF output\r\n   * @param  {Scene or [THREE.Scenes]} input   Scene or Array of THREE.Scenes\r\n   * @param  {Function} onDone  Callback on completed\r\n   * @param  {Object} options options\r\n   */\r\n  async write(input, onDone, options = {}) {\r\n    this.options = Object.assign(\r\n      {\r\n        // default options\r\n        binary: false,\r\n        trs: false,\r\n        onlyVisible: true,\r\n        maxTextureSize: Infinity,\r\n        animations: [],\r\n        includeCustomExtensions: false\r\n      },\r\n      options\r\n    );\r\n    if (this.options.animations.length > 0) {\r\n      this.options.trs = true;\r\n    }\r\n    this.processInput(input);\r\n    await Promise.all(this.pending);\r\n    const writer = this;\r\n    const buffers = writer.buffers;\r\n    const json = writer.json;\r\n    options = writer.options;\r\n    const extensionsUsed = writer.extensionsUsed;\r\n    const extensionsRequired = writer.extensionsRequired;\r\n    const blob = new Blob(buffers, { type: \"application/octet-stream\" });\r\n    const extensionsUsedList = Object.keys(extensionsUsed);\r\n    const extensionsRequiredList = Object.keys(extensionsRequired);\r\n    if (extensionsUsedList.length > 0)\r\n      json.extensionsUsed = extensionsUsedList;\r\n    if (extensionsRequiredList.length > 0)\r\n      json.extensionsRequired = extensionsRequiredList;\r\n    if (json.buffers && json.buffers.length > 0)\r\n      json.buffers[0].byteLength = blob.size;\r\n    if (options.binary === true) {\r\n      const reader = new FileReader();\r\n      reader.readAsArrayBuffer(blob);\r\n      reader.onloadend = function() {\r\n        const binaryChunk = getPaddedArrayBuffer(reader.result);\r\n        const binaryChunkPrefix = new DataView(new ArrayBuffer(GLB_CHUNK_PREFIX_BYTES));\r\n        binaryChunkPrefix.setUint32(0, binaryChunk.byteLength, true);\r\n        binaryChunkPrefix.setUint32(4, GLB_CHUNK_TYPE_BIN, true);\r\n        const jsonChunk = getPaddedArrayBuffer(stringToArrayBuffer(JSON.stringify(json)), 32);\r\n        const jsonChunkPrefix = new DataView(new ArrayBuffer(GLB_CHUNK_PREFIX_BYTES));\r\n        jsonChunkPrefix.setUint32(0, jsonChunk.byteLength, true);\r\n        jsonChunkPrefix.setUint32(4, GLB_CHUNK_TYPE_JSON, true);\r\n        const header = new ArrayBuffer(GLB_HEADER_BYTES);\r\n        const headerView = new DataView(header);\r\n        headerView.setUint32(0, GLB_HEADER_MAGIC, true);\r\n        headerView.setUint32(4, GLB_VERSION, true);\r\n        const totalByteLength = GLB_HEADER_BYTES + jsonChunkPrefix.byteLength + jsonChunk.byteLength + binaryChunkPrefix.byteLength + binaryChunk.byteLength;\r\n        headerView.setUint32(8, totalByteLength, true);\r\n        const glbBlob = new Blob([header, jsonChunkPrefix, jsonChunk, binaryChunkPrefix, binaryChunk], {\r\n          type: \"application/octet-stream\"\r\n        });\r\n        const glbReader = new FileReader();\r\n        glbReader.readAsArrayBuffer(glbBlob);\r\n        glbReader.onloadend = function() {\r\n          onDone(glbReader.result);\r\n        };\r\n      };\r\n    } else {\r\n      if (json.buffers && json.buffers.length > 0) {\r\n        const reader = new FileReader();\r\n        reader.readAsDataURL(blob);\r\n        reader.onloadend = function() {\r\n          const base64data = reader.result;\r\n          json.buffers[0].uri = base64data;\r\n          onDone(json);\r\n        };\r\n      } else {\r\n        onDone(json);\r\n      }\r\n    }\r\n  }\r\n  /**\r\n   * Serializes a userData.\r\n   *\r\n   * @param {THREE.Object3D|THREE.Material} object\r\n   * @param {Object} objectDef\r\n   */\r\n  serializeUserData(object, objectDef) {\r\n    if (Object.keys(object.userData).length === 0)\r\n      return;\r\n    const options = this.options;\r\n    const extensionsUsed = this.extensionsUsed;\r\n    try {\r\n      const json = JSON.parse(JSON.stringify(object.userData));\r\n      if (options.includeCustomExtensions && json.gltfExtensions) {\r\n        if (objectDef.extensions === void 0)\r\n          objectDef.extensions = {};\r\n        for (const extensionName in json.gltfExtensions) {\r\n          objectDef.extensions[extensionName] = json.gltfExtensions[extensionName];\r\n          extensionsUsed[extensionName] = true;\r\n        }\r\n        delete json.gltfExtensions;\r\n      }\r\n      if (Object.keys(json).length > 0)\r\n        objectDef.extras = json;\r\n    } catch (error) {\r\n      console.warn(\r\n        \"THREE.GLTFExporter: userData of '\" + object.name + \"' won't be serialized because of JSON.stringify error - \" + error.message\r\n      );\r\n    }\r\n  }\r\n  /**\r\n   * Returns ids for buffer attributes.\r\n   * @param  {Object} object\r\n   * @return {Integer}\r\n   */\r\n  getUID(attribute, isRelativeCopy = false) {\r\n    if (this.uids.has(attribute) === false) {\r\n      const uids2 = /* @__PURE__ */ new Map();\r\n      uids2.set(true, this.uid++);\r\n      uids2.set(false, this.uid++);\r\n      this.uids.set(attribute, uids2);\r\n    }\r\n    const uids = this.uids.get(attribute);\r\n    return uids.get(isRelativeCopy);\r\n  }\r\n  /**\r\n   * Checks if normal attribute values are normalized.\r\n   *\r\n   * @param {BufferAttribute} normal\r\n   * @returns {Boolean}\r\n   */\r\n  isNormalizedNormalAttribute(normal) {\r\n    const cache = this.cache;\r\n    if (cache.attributesNormalized.has(normal))\r\n      return false;\r\n    const v = new Vector3();\r\n    for (let i = 0, il = normal.count; i < il; i++) {\r\n      if (Math.abs(v.fromBufferAttribute(normal, i).length() - 1) > 5e-4)\r\n        return false;\r\n    }\r\n    return true;\r\n  }\r\n  /**\r\n   * Creates normalized normal buffer attribute.\r\n   *\r\n   * @param {BufferAttribute} normal\r\n   * @returns {BufferAttribute}\r\n   *\r\n   */\r\n  createNormalizedNormalAttribute(normal) {\r\n    const cache = this.cache;\r\n    if (cache.attributesNormalized.has(normal))\r\n      return cache.attributesNormalized.get(normal);\r\n    const attribute = normal.clone();\r\n    const v = new Vector3();\r\n    for (let i = 0, il = attribute.count; i < il; i++) {\r\n      v.fromBufferAttribute(attribute, i);\r\n      if (v.x === 0 && v.y === 0 && v.z === 0) {\r\n        v.setX(1);\r\n      } else {\r\n        v.normalize();\r\n      }\r\n      attribute.setXYZ(i, v.x, v.y, v.z);\r\n    }\r\n    cache.attributesNormalized.set(normal, attribute);\r\n    return attribute;\r\n  }\r\n  /**\r\n   * Applies a texture transform, if present, to the map definition. Requires\r\n   * the KHR_texture_transform extension.\r\n   *\r\n   * @param {Object} mapDef\r\n   * @param {THREE.Texture} texture\r\n   */\r\n  applyTextureTransform(mapDef, texture) {\r\n    let didTransform = false;\r\n    const transformDef = {};\r\n    if (texture.offset.x !== 0 || texture.offset.y !== 0) {\r\n      transformDef.offset = texture.offset.toArray();\r\n      didTransform = true;\r\n    }\r\n    if (texture.rotation !== 0) {\r\n      transformDef.rotation = texture.rotation;\r\n      didTransform = true;\r\n    }\r\n    if (texture.repeat.x !== 1 || texture.repeat.y !== 1) {\r\n      transformDef.scale = texture.repeat.toArray();\r\n      didTransform = true;\r\n    }\r\n    if (didTransform) {\r\n      mapDef.extensions = mapDef.extensions || {};\r\n      mapDef.extensions[\"KHR_texture_transform\"] = transformDef;\r\n      this.extensionsUsed[\"KHR_texture_transform\"] = true;\r\n    }\r\n  }\r\n  buildMetalRoughTexture(metalnessMap, roughnessMap) {\r\n    if (metalnessMap === roughnessMap)\r\n      return metalnessMap;\r\n    function getEncodingConversion(map) {\r\n      if (\"colorSpace\" in map ? map.colorSpace === \"srgb\" : map.encoding === 3001) {\r\n        return function SRGBToLinear(c) {\r\n          return c < 0.04045 ? c * 0.0773993808 : Math.pow(c * 0.9478672986 + 0.0521327014, 2.4);\r\n        };\r\n      }\r\n      return function LinearToLinear(c) {\r\n        return c;\r\n      };\r\n    }\r\n    console.warn(\"THREE.GLTFExporter: Merged metalnessMap and roughnessMap textures.\");\r\n    if (metalnessMap instanceof CompressedTexture) {\r\n      metalnessMap = decompress(metalnessMap);\r\n    }\r\n    if (roughnessMap instanceof CompressedTexture) {\r\n      roughnessMap = decompress(roughnessMap);\r\n    }\r\n    const metalness = metalnessMap ? metalnessMap.image : null;\r\n    const roughness = roughnessMap ? roughnessMap.image : null;\r\n    const width = Math.max(metalness ? metalness.width : 0, roughness ? roughness.width : 0);\r\n    const height = Math.max(metalness ? metalness.height : 0, roughness ? roughness.height : 0);\r\n    const canvas = getCanvas();\r\n    canvas.width = width;\r\n    canvas.height = height;\r\n    const context = canvas.getContext(\"2d\");\r\n    context.fillStyle = \"#00ffff\";\r\n    context.fillRect(0, 0, width, height);\r\n    const composite = context.getImageData(0, 0, width, height);\r\n    if (metalness) {\r\n      context.drawImage(metalness, 0, 0, width, height);\r\n      const convert = getEncodingConversion(metalnessMap);\r\n      const data = context.getImageData(0, 0, width, height).data;\r\n      for (let i = 2; i < data.length; i += 4) {\r\n        composite.data[i] = convert(data[i] / 256) * 256;\r\n      }\r\n    }\r\n    if (roughness) {\r\n      context.drawImage(roughness, 0, 0, width, height);\r\n      const convert = getEncodingConversion(roughnessMap);\r\n      const data = context.getImageData(0, 0, width, height).data;\r\n      for (let i = 1; i < data.length; i += 4) {\r\n        composite.data[i] = convert(data[i] / 256) * 256;\r\n      }\r\n    }\r\n    context.putImageData(composite, 0, 0);\r\n    const reference = metalnessMap || roughnessMap;\r\n    const texture = reference.clone();\r\n    texture.source = new Texture(canvas).source;\r\n    if (\"colorSpace\" in texture)\r\n      texture.colorSpace = \"\";\r\n    else\r\n      texture.encoding = 3e3;\r\n    texture.channel = (metalnessMap || roughnessMap).channel;\r\n    if (metalnessMap && roughnessMap && metalnessMap.channel !== roughnessMap.channel) {\r\n      console.warn(\"THREE.GLTFExporter: UV channels for metalnessMap and roughnessMap textures must match.\");\r\n    }\r\n    return texture;\r\n  }\r\n  /**\r\n   * Process a buffer to append to the default one.\r\n   * @param  {ArrayBuffer} buffer\r\n   * @return {Integer}\r\n   */\r\n  processBuffer(buffer) {\r\n    const json = this.json;\r\n    const buffers = this.buffers;\r\n    if (!json.buffers)\r\n      json.buffers = [{ byteLength: 0 }];\r\n    buffers.push(buffer);\r\n    return 0;\r\n  }\r\n  /**\r\n   * Process and generate a BufferView\r\n   * @param  {BufferAttribute} attribute\r\n   * @param  {number} componentType\r\n   * @param  {number} start\r\n   * @param  {number} count\r\n   * @param  {number} target (Optional) Target usage of the BufferView\r\n   * @return {Object}\r\n   */\r\n  processBufferView(attribute, componentType, start, count, target) {\r\n    const json = this.json;\r\n    if (!json.bufferViews)\r\n      json.bufferViews = [];\r\n    let componentSize;\r\n    switch (componentType) {\r\n      case WEBGL_CONSTANTS.BYTE:\r\n      case WEBGL_CONSTANTS.UNSIGNED_BYTE:\r\n        componentSize = 1;\r\n        break;\r\n      case WEBGL_CONSTANTS.SHORT:\r\n      case WEBGL_CONSTANTS.UNSIGNED_SHORT:\r\n        componentSize = 2;\r\n        break;\r\n      default:\r\n        componentSize = 4;\r\n    }\r\n    const byteLength = getPaddedBufferSize(count * attribute.itemSize * componentSize);\r\n    const dataView = new DataView(new ArrayBuffer(byteLength));\r\n    let offset = 0;\r\n    for (let i = start; i < start + count; i++) {\r\n      for (let a = 0; a < attribute.itemSize; a++) {\r\n        let value;\r\n        if (attribute.itemSize > 4) {\r\n          value = attribute.array[i * attribute.itemSize + a];\r\n        } else {\r\n          if (a === 0)\r\n            value = attribute.getX(i);\r\n          else if (a === 1)\r\n            value = attribute.getY(i);\r\n          else if (a === 2)\r\n            value = attribute.getZ(i);\r\n          else if (a === 3)\r\n            value = attribute.getW(i);\r\n          if (attribute.normalized === true) {\r\n            value = MathUtils.normalize(value, attribute.array);\r\n          }\r\n        }\r\n        if (componentType === WEBGL_CONSTANTS.FLOAT) {\r\n          dataView.setFloat32(offset, value, true);\r\n        } else if (componentType === WEBGL_CONSTANTS.INT) {\r\n          dataView.setInt32(offset, value, true);\r\n        } else if (componentType === WEBGL_CONSTANTS.UNSIGNED_INT) {\r\n          dataView.setUint32(offset, value, true);\r\n        } else if (componentType === WEBGL_CONSTANTS.SHORT) {\r\n          dataView.setInt16(offset, value, true);\r\n        } else if (componentType === WEBGL_CONSTANTS.UNSIGNED_SHORT) {\r\n          dataView.setUint16(offset, value, true);\r\n        } else if (componentType === WEBGL_CONSTANTS.BYTE) {\r\n          dataView.setInt8(offset, value);\r\n        } else if (componentType === WEBGL_CONSTANTS.UNSIGNED_BYTE) {\r\n          dataView.setUint8(offset, value);\r\n        }\r\n        offset += componentSize;\r\n      }\r\n    }\r\n    const bufferViewDef = {\r\n      buffer: this.processBuffer(dataView.buffer),\r\n      byteOffset: this.byteOffset,\r\n      byteLength\r\n    };\r\n    if (target !== void 0)\r\n      bufferViewDef.target = target;\r\n    if (target === WEBGL_CONSTANTS.ARRAY_BUFFER) {\r\n      bufferViewDef.byteStride = attribute.itemSize * componentSize;\r\n    }\r\n    this.byteOffset += byteLength;\r\n    json.bufferViews.push(bufferViewDef);\r\n    const output = {\r\n      id: json.bufferViews.length - 1,\r\n      byteLength: 0\r\n    };\r\n    return output;\r\n  }\r\n  /**\r\n   * Process and generate a BufferView from an image Blob.\r\n   * @param {Blob} blob\r\n   * @return {Promise<Integer>}\r\n   */\r\n  processBufferViewImage(blob) {\r\n    const writer = this;\r\n    const json = writer.json;\r\n    if (!json.bufferViews)\r\n      json.bufferViews = [];\r\n    return new Promise(function(resolve) {\r\n      const reader = new FileReader();\r\n      reader.readAsArrayBuffer(blob);\r\n      reader.onloadend = function() {\r\n        const buffer = getPaddedArrayBuffer(reader.result);\r\n        const bufferViewDef = {\r\n          buffer: writer.processBuffer(buffer),\r\n          byteOffset: writer.byteOffset,\r\n          byteLength: buffer.byteLength\r\n        };\r\n        writer.byteOffset += buffer.byteLength;\r\n        resolve(json.bufferViews.push(bufferViewDef) - 1);\r\n      };\r\n    });\r\n  }\r\n  /**\r\n   * Process attribute to generate an accessor\r\n   * @param  {BufferAttribute} attribute Attribute to process\r\n   * @param  {THREE.BufferGeometry} geometry (Optional) Geometry used for truncated draw range\r\n   * @param  {Integer} start (Optional)\r\n   * @param  {Integer} count (Optional)\r\n   * @return {Integer|null} Index of the processed accessor on the \"accessors\" array\r\n   */\r\n  processAccessor(attribute, geometry, start, count) {\r\n    const json = this.json;\r\n    const types = {\r\n      1: \"SCALAR\",\r\n      2: \"VEC2\",\r\n      3: \"VEC3\",\r\n      4: \"VEC4\",\r\n      9: \"MAT3\",\r\n      16: \"MAT4\"\r\n    };\r\n    let componentType;\r\n    if (attribute.array.constructor === Float32Array) {\r\n      componentType = WEBGL_CONSTANTS.FLOAT;\r\n    } else if (attribute.array.constructor === Int32Array) {\r\n      componentType = WEBGL_CONSTANTS.INT;\r\n    } else if (attribute.array.constructor === Uint32Array) {\r\n      componentType = WEBGL_CONSTANTS.UNSIGNED_INT;\r\n    } else if (attribute.array.constructor === Int16Array) {\r\n      componentType = WEBGL_CONSTANTS.SHORT;\r\n    } else if (attribute.array.constructor === Uint16Array) {\r\n      componentType = WEBGL_CONSTANTS.UNSIGNED_SHORT;\r\n    } else if (attribute.array.constructor === Int8Array) {\r\n      componentType = WEBGL_CONSTANTS.BYTE;\r\n    } else if (attribute.array.constructor === Uint8Array) {\r\n      componentType = WEBGL_CONSTANTS.UNSIGNED_BYTE;\r\n    } else {\r\n      throw new Error(\r\n        \"THREE.GLTFExporter: Unsupported bufferAttribute component type: \" + attribute.array.constructor.name\r\n      );\r\n    }\r\n    if (start === void 0)\r\n      start = 0;\r\n    if (count === void 0)\r\n      count = attribute.count;\r\n    if (count === 0)\r\n      return null;\r\n    const minMax = getMinMax(attribute, start, count);\r\n    let bufferViewTarget;\r\n    if (geometry !== void 0) {\r\n      bufferViewTarget = attribute === geometry.index ? WEBGL_CONSTANTS.ELEMENT_ARRAY_BUFFER : WEBGL_CONSTANTS.ARRAY_BUFFER;\r\n    }\r\n    const bufferView = this.processBufferView(attribute, componentType, start, count, bufferViewTarget);\r\n    const accessorDef = {\r\n      bufferView: bufferView.id,\r\n      byteOffset: bufferView.byteOffset,\r\n      componentType,\r\n      count,\r\n      max: minMax.max,\r\n      min: minMax.min,\r\n      type: types[attribute.itemSize]\r\n    };\r\n    if (attribute.normalized === true)\r\n      accessorDef.normalized = true;\r\n    if (!json.accessors)\r\n      json.accessors = [];\r\n    return json.accessors.push(accessorDef) - 1;\r\n  }\r\n  /**\r\n   * Process image\r\n   * @param  {Image} image to process\r\n   * @param  {Integer} format of the image (RGBAFormat)\r\n   * @param  {Boolean} flipY before writing out the image\r\n   * @param  {String} mimeType export format\r\n   * @return {Integer}     Index of the processed texture in the \"images\" array\r\n   */\r\n  processImage(image, format, flipY, mimeType = \"image/png\") {\r\n    if (image !== null) {\r\n      const writer = this;\r\n      const cache = writer.cache;\r\n      const json = writer.json;\r\n      const options = writer.options;\r\n      const pending = writer.pending;\r\n      if (!cache.images.has(image))\r\n        cache.images.set(image, {});\r\n      const cachedImages = cache.images.get(image);\r\n      const key = mimeType + \":flipY/\" + flipY.toString();\r\n      if (cachedImages[key] !== void 0)\r\n        return cachedImages[key];\r\n      if (!json.images)\r\n        json.images = [];\r\n      const imageDef = { mimeType };\r\n      const canvas = getCanvas();\r\n      canvas.width = Math.min(image.width, options.maxTextureSize);\r\n      canvas.height = Math.min(image.height, options.maxTextureSize);\r\n      const ctx = canvas.getContext(\"2d\");\r\n      if (flipY === true) {\r\n        ctx.translate(0, canvas.height);\r\n        ctx.scale(1, -1);\r\n      }\r\n      if (image.data !== void 0) {\r\n        if (format !== RGBAFormat) {\r\n          console.error(\"GLTFExporter: Only RGBAFormat is supported.\", format);\r\n        }\r\n        if (image.width > options.maxTextureSize || image.height > options.maxTextureSize) {\r\n          console.warn(\"GLTFExporter: Image size is bigger than maxTextureSize\", image);\r\n        }\r\n        const data = new Uint8ClampedArray(image.height * image.width * 4);\r\n        for (let i = 0; i < data.length; i += 4) {\r\n          data[i + 0] = image.data[i + 0];\r\n          data[i + 1] = image.data[i + 1];\r\n          data[i + 2] = image.data[i + 2];\r\n          data[i + 3] = image.data[i + 3];\r\n        }\r\n        ctx.putImageData(new ImageData(data, image.width, image.height), 0, 0);\r\n      } else {\r\n        ctx.drawImage(image, 0, 0, canvas.width, canvas.height);\r\n      }\r\n      if (options.binary === true) {\r\n        pending.push(\r\n          getToBlobPromise(canvas, mimeType).then((blob) => writer.processBufferViewImage(blob)).then((bufferViewIndex) => {\r\n            imageDef.bufferView = bufferViewIndex;\r\n          })\r\n        );\r\n      } else {\r\n        if (canvas.toDataURL !== void 0) {\r\n          imageDef.uri = canvas.toDataURL(mimeType);\r\n        } else {\r\n          pending.push(\r\n            getToBlobPromise(canvas, mimeType).then((blob) => new FileReader().readAsDataURL(blob)).then((dataURL) => {\r\n              imageDef.uri = dataURL;\r\n            })\r\n          );\r\n        }\r\n      }\r\n      const index = json.images.push(imageDef) - 1;\r\n      cachedImages[key] = index;\r\n      return index;\r\n    } else {\r\n      throw new Error(\"THREE.GLTFExporter: No valid image data found. Unable to process texture.\");\r\n    }\r\n  }\r\n  /**\r\n   * Process sampler\r\n   * @param  {Texture} map Texture to process\r\n   * @return {Integer}     Index of the processed texture in the \"samplers\" array\r\n   */\r\n  processSampler(map) {\r\n    const json = this.json;\r\n    if (!json.samplers)\r\n      json.samplers = [];\r\n    const samplerDef = {\r\n      magFilter: THREE_TO_WEBGL[map.magFilter],\r\n      minFilter: THREE_TO_WEBGL[map.minFilter],\r\n      wrapS: THREE_TO_WEBGL[map.wrapS],\r\n      wrapT: THREE_TO_WEBGL[map.wrapT]\r\n    };\r\n    return json.samplers.push(samplerDef) - 1;\r\n  }\r\n  /**\r\n   * Process texture\r\n   * @param  {Texture} map Map to process\r\n   * @return {Integer} Index of the processed texture in the \"textures\" array\r\n   */\r\n  processTexture(map) {\r\n    const writer = this;\r\n    const options = writer.options;\r\n    const cache = this.cache;\r\n    const json = this.json;\r\n    if (cache.textures.has(map))\r\n      return cache.textures.get(map);\r\n    if (!json.textures)\r\n      json.textures = [];\r\n    if (map instanceof CompressedTexture) {\r\n      map = decompress(map, options.maxTextureSize);\r\n    }\r\n    let mimeType = map.userData.mimeType;\r\n    if (mimeType === \"image/webp\")\r\n      mimeType = \"image/png\";\r\n    const textureDef = {\r\n      sampler: this.processSampler(map),\r\n      source: this.processImage(map.image, map.format, map.flipY, mimeType)\r\n    };\r\n    if (map.name)\r\n      textureDef.name = map.name;\r\n    this._invokeAll(function(ext) {\r\n      ext.writeTexture && ext.writeTexture(map, textureDef);\r\n    });\r\n    const index = json.textures.push(textureDef) - 1;\r\n    cache.textures.set(map, index);\r\n    return index;\r\n  }\r\n  /**\r\n   * Process material\r\n   * @param  {THREE.Material} material Material to process\r\n   * @return {Integer|null} Index of the processed material in the \"materials\" array\r\n   */\r\n  processMaterial(material) {\r\n    const cache = this.cache;\r\n    const json = this.json;\r\n    if (cache.materials.has(material))\r\n      return cache.materials.get(material);\r\n    if (material.isShaderMaterial) {\r\n      console.warn(\"GLTFExporter: THREE.ShaderMaterial not supported.\");\r\n      return null;\r\n    }\r\n    if (!json.materials)\r\n      json.materials = [];\r\n    const materialDef = { pbrMetallicRoughness: {} };\r\n    if (material.isMeshStandardMaterial !== true && material.isMeshBasicMaterial !== true) {\r\n      console.warn(\"GLTFExporter: Use MeshStandardMaterial or MeshBasicMaterial for best results.\");\r\n    }\r\n    const color = material.color.toArray().concat([material.opacity]);\r\n    if (!equalArray(color, [1, 1, 1, 1])) {\r\n      materialDef.pbrMetallicRoughness.baseColorFactor = color;\r\n    }\r\n    if (material.isMeshStandardMaterial) {\r\n      materialDef.pbrMetallicRoughness.metallicFactor = material.metalness;\r\n      materialDef.pbrMetallicRoughness.roughnessFactor = material.roughness;\r\n    } else {\r\n      materialDef.pbrMetallicRoughness.metallicFactor = 0.5;\r\n      materialDef.pbrMetallicRoughness.roughnessFactor = 0.5;\r\n    }\r\n    if (material.metalnessMap || material.roughnessMap) {\r\n      const metalRoughTexture = this.buildMetalRoughTexture(material.metalnessMap, material.roughnessMap);\r\n      const metalRoughMapDef = {\r\n        index: this.processTexture(metalRoughTexture),\r\n        channel: metalRoughTexture.channel\r\n      };\r\n      this.applyTextureTransform(metalRoughMapDef, metalRoughTexture);\r\n      materialDef.pbrMetallicRoughness.metallicRoughnessTexture = metalRoughMapDef;\r\n    }\r\n    if (material.map) {\r\n      const baseColorMapDef = {\r\n        index: this.processTexture(material.map),\r\n        texCoord: material.map.channel\r\n      };\r\n      this.applyTextureTransform(baseColorMapDef, material.map);\r\n      materialDef.pbrMetallicRoughness.baseColorTexture = baseColorMapDef;\r\n    }\r\n    if (material.emissive) {\r\n      const emissive = material.emissive;\r\n      const maxEmissiveComponent = Math.max(emissive.r, emissive.g, emissive.b);\r\n      if (maxEmissiveComponent > 0) {\r\n        materialDef.emissiveFactor = material.emissive.toArray();\r\n      }\r\n      if (material.emissiveMap) {\r\n        const emissiveMapDef = {\r\n          index: this.processTexture(material.emissiveMap),\r\n          texCoord: material.emissiveMap.channel\r\n        };\r\n        this.applyTextureTransform(emissiveMapDef, material.emissiveMap);\r\n        materialDef.emissiveTexture = emissiveMapDef;\r\n      }\r\n    }\r\n    if (material.normalMap) {\r\n      const normalMapDef = {\r\n        index: this.processTexture(material.normalMap),\r\n        texCoord: material.normalMap.channel\r\n      };\r\n      if (material.normalScale && material.normalScale.x !== 1) {\r\n        normalMapDef.scale = material.normalScale.x;\r\n      }\r\n      this.applyTextureTransform(normalMapDef, material.normalMap);\r\n      materialDef.normalTexture = normalMapDef;\r\n    }\r\n    if (material.aoMap) {\r\n      const occlusionMapDef = {\r\n        index: this.processTexture(material.aoMap),\r\n        texCoord: material.aoMap.channel\r\n      };\r\n      if (material.aoMapIntensity !== 1) {\r\n        occlusionMapDef.strength = material.aoMapIntensity;\r\n      }\r\n      this.applyTextureTransform(occlusionMapDef, material.aoMap);\r\n      materialDef.occlusionTexture = occlusionMapDef;\r\n    }\r\n    if (material.transparent) {\r\n      materialDef.alphaMode = \"BLEND\";\r\n    } else {\r\n      if (material.alphaTest > 0) {\r\n        materialDef.alphaMode = \"MASK\";\r\n        materialDef.alphaCutoff = material.alphaTest;\r\n      }\r\n    }\r\n    if (material.side === DoubleSide)\r\n      materialDef.doubleSided = true;\r\n    if (material.name !== \"\")\r\n      materialDef.name = material.name;\r\n    this.serializeUserData(material, materialDef);\r\n    this._invokeAll(function(ext) {\r\n      ext.writeMaterial && ext.writeMaterial(material, materialDef);\r\n    });\r\n    const index = json.materials.push(materialDef) - 1;\r\n    cache.materials.set(material, index);\r\n    return index;\r\n  }\r\n  /**\r\n   * Process mesh\r\n   * @param  {THREE.Mesh} mesh Mesh to process\r\n   * @return {Integer|null} Index of the processed mesh in the \"meshes\" array\r\n   */\r\n  processMesh(mesh) {\r\n    const cache = this.cache;\r\n    const json = this.json;\r\n    const meshCacheKeyParts = [mesh.geometry.uuid];\r\n    if (Array.isArray(mesh.material)) {\r\n      for (let i = 0, l = mesh.material.length; i < l; i++) {\r\n        meshCacheKeyParts.push(mesh.material[i].uuid);\r\n      }\r\n    } else {\r\n      meshCacheKeyParts.push(mesh.material.uuid);\r\n    }\r\n    const meshCacheKey = meshCacheKeyParts.join(\":\");\r\n    if (cache.meshes.has(meshCacheKey))\r\n      return cache.meshes.get(meshCacheKey);\r\n    const geometry = mesh.geometry;\r\n    let mode;\r\n    if (mesh.isLineSegments) {\r\n      mode = WEBGL_CONSTANTS.LINES;\r\n    } else if (mesh.isLineLoop) {\r\n      mode = WEBGL_CONSTANTS.LINE_LOOP;\r\n    } else if (mesh.isLine) {\r\n      mode = WEBGL_CONSTANTS.LINE_STRIP;\r\n    } else if (mesh.isPoints) {\r\n      mode = WEBGL_CONSTANTS.POINTS;\r\n    } else {\r\n      mode = mesh.material.wireframe ? WEBGL_CONSTANTS.LINES : WEBGL_CONSTANTS.TRIANGLES;\r\n    }\r\n    const meshDef = {};\r\n    const attributes = {};\r\n    const primitives = [];\r\n    const targets = [];\r\n    const nameConversion = {\r\n      uv: \"TEXCOORD_0\",\r\n      [REVISION.replace(/\\D+/g, \"\") >= 152 ? \"uv1\" : \"uv2\"]: \"TEXCOORD_1\",\r\n      color: \"COLOR_0\",\r\n      skinWeight: \"WEIGHTS_0\",\r\n      skinIndex: \"JOINTS_0\"\r\n    };\r\n    const originalNormal = geometry.getAttribute(\"normal\");\r\n    if (originalNormal !== void 0 && !this.isNormalizedNormalAttribute(originalNormal)) {\r\n      console.warn(\"THREE.GLTFExporter: Creating normalized normal attribute from the non-normalized one.\");\r\n      geometry.setAttribute(\"normal\", this.createNormalizedNormalAttribute(originalNormal));\r\n    }\r\n    let modifiedAttribute = null;\r\n    for (let attributeName in geometry.attributes) {\r\n      if (attributeName.slice(0, 5) === \"morph\")\r\n        continue;\r\n      const attribute = geometry.attributes[attributeName];\r\n      attributeName = nameConversion[attributeName] || attributeName.toUpperCase();\r\n      const validVertexAttributes = /^(POSITION|NORMAL|TANGENT|TEXCOORD_\\d+|COLOR_\\d+|JOINTS_\\d+|WEIGHTS_\\d+)$/;\r\n      if (!validVertexAttributes.test(attributeName))\r\n        attributeName = \"_\" + attributeName;\r\n      if (cache.attributes.has(this.getUID(attribute))) {\r\n        attributes[attributeName] = cache.attributes.get(this.getUID(attribute));\r\n        continue;\r\n      }\r\n      modifiedAttribute = null;\r\n      const array = attribute.array;\r\n      if (attributeName === \"JOINTS_0\" && !(array instanceof Uint16Array) && !(array instanceof Uint8Array)) {\r\n        console.warn('GLTFExporter: Attribute \"skinIndex\" converted to type UNSIGNED_SHORT.');\r\n        modifiedAttribute = new BufferAttribute(new Uint16Array(array), attribute.itemSize, attribute.normalized);\r\n      }\r\n      const accessor = this.processAccessor(modifiedAttribute || attribute, geometry);\r\n      if (accessor !== null) {\r\n        if (!attributeName.startsWith(\"_\")) {\r\n          this.detectMeshQuantization(attributeName, attribute);\r\n        }\r\n        attributes[attributeName] = accessor;\r\n        cache.attributes.set(this.getUID(attribute), accessor);\r\n      }\r\n    }\r\n    if (originalNormal !== void 0)\r\n      geometry.setAttribute(\"normal\", originalNormal);\r\n    if (Object.keys(attributes).length === 0)\r\n      return null;\r\n    if (mesh.morphTargetInfluences !== void 0 && mesh.morphTargetInfluences.length > 0) {\r\n      const weights = [];\r\n      const targetNames = [];\r\n      const reverseDictionary = {};\r\n      if (mesh.morphTargetDictionary !== void 0) {\r\n        for (const key in mesh.morphTargetDictionary) {\r\n          reverseDictionary[mesh.morphTargetDictionary[key]] = key;\r\n        }\r\n      }\r\n      for (let i = 0; i < mesh.morphTargetInfluences.length; ++i) {\r\n        const target = {};\r\n        let warned = false;\r\n        for (const attributeName in geometry.morphAttributes) {\r\n          if (attributeName !== \"position\" && attributeName !== \"normal\") {\r\n            if (!warned) {\r\n              console.warn(\"GLTFExporter: Only POSITION and NORMAL morph are supported.\");\r\n              warned = true;\r\n            }\r\n            continue;\r\n          }\r\n          const attribute = geometry.morphAttributes[attributeName][i];\r\n          const gltfAttributeName = attributeName.toUpperCase();\r\n          const baseAttribute = geometry.attributes[attributeName];\r\n          if (cache.attributes.has(this.getUID(attribute, true))) {\r\n            target[gltfAttributeName] = cache.attributes.get(this.getUID(attribute, true));\r\n            continue;\r\n          }\r\n          const relativeAttribute = attribute.clone();\r\n          if (!geometry.morphTargetsRelative) {\r\n            for (let j = 0, jl = attribute.count; j < jl; j++) {\r\n              for (let a = 0; a < attribute.itemSize; a++) {\r\n                if (a === 0)\r\n                  relativeAttribute.setX(j, attribute.getX(j) - baseAttribute.getX(j));\r\n                if (a === 1)\r\n                  relativeAttribute.setY(j, attribute.getY(j) - baseAttribute.getY(j));\r\n                if (a === 2)\r\n                  relativeAttribute.setZ(j, attribute.getZ(j) - baseAttribute.getZ(j));\r\n                if (a === 3)\r\n                  relativeAttribute.setW(j, attribute.getW(j) - baseAttribute.getW(j));\r\n              }\r\n            }\r\n          }\r\n          target[gltfAttributeName] = this.processAccessor(relativeAttribute, geometry);\r\n          cache.attributes.set(this.getUID(baseAttribute, true), target[gltfAttributeName]);\r\n        }\r\n        targets.push(target);\r\n        weights.push(mesh.morphTargetInfluences[i]);\r\n        if (mesh.morphTargetDictionary !== void 0)\r\n          targetNames.push(reverseDictionary[i]);\r\n      }\r\n      meshDef.weights = weights;\r\n      if (targetNames.length > 0) {\r\n        meshDef.extras = {};\r\n        meshDef.extras.targetNames = targetNames;\r\n      }\r\n    }\r\n    const isMultiMaterial = Array.isArray(mesh.material);\r\n    if (isMultiMaterial && geometry.groups.length === 0)\r\n      return null;\r\n    const materials = isMultiMaterial ? mesh.material : [mesh.material];\r\n    const groups = isMultiMaterial ? geometry.groups : [{ materialIndex: 0, start: void 0, count: void 0 }];\r\n    for (let i = 0, il = groups.length; i < il; i++) {\r\n      const primitive = {\r\n        mode,\r\n        attributes\r\n      };\r\n      this.serializeUserData(geometry, primitive);\r\n      if (targets.length > 0)\r\n        primitive.targets = targets;\r\n      if (geometry.index !== null) {\r\n        let cacheKey = this.getUID(geometry.index);\r\n        if (groups[i].start !== void 0 || groups[i].count !== void 0) {\r\n          cacheKey += \":\" + groups[i].start + \":\" + groups[i].count;\r\n        }\r\n        if (cache.attributes.has(cacheKey)) {\r\n          primitive.indices = cache.attributes.get(cacheKey);\r\n        } else {\r\n          primitive.indices = this.processAccessor(geometry.index, geometry, groups[i].start, groups[i].count);\r\n          cache.attributes.set(cacheKey, primitive.indices);\r\n        }\r\n        if (primitive.indices === null)\r\n          delete primitive.indices;\r\n      }\r\n      const material = this.processMaterial(materials[groups[i].materialIndex]);\r\n      if (material !== null)\r\n        primitive.material = material;\r\n      primitives.push(primitive);\r\n    }\r\n    meshDef.primitives = primitives;\r\n    if (!json.meshes)\r\n      json.meshes = [];\r\n    this._invokeAll(function(ext) {\r\n      ext.writeMesh && ext.writeMesh(mesh, meshDef);\r\n    });\r\n    const index = json.meshes.push(meshDef) - 1;\r\n    cache.meshes.set(meshCacheKey, index);\r\n    return index;\r\n  }\r\n  /**\r\n   * If a vertex attribute with a\r\n   * [non-standard data type](https://registry.khronos.org/glTF/specs/2.0/glTF-2.0.html#meshes-overview)\r\n   * is used, it is checked whether it is a valid data type according to the\r\n   * [KHR_mesh_quantization](https://github.com/KhronosGroup/glTF/blob/main/extensions/2.0/Khronos/KHR_mesh_quantization/README.md)\r\n   * extension.\r\n   * In this case the extension is automatically added to the list of used extensions.\r\n   *\r\n   * @param {string} attributeName\r\n   * @param {THREE.BufferAttribute} attribute\r\n   */\r\n  detectMeshQuantization(attributeName, attribute) {\r\n    if (this.extensionsUsed[KHR_MESH_QUANTIZATION])\r\n      return;\r\n    let attrType = void 0;\r\n    switch (attribute.array.constructor) {\r\n      case Int8Array:\r\n        attrType = \"byte\";\r\n        break;\r\n      case Uint8Array:\r\n        attrType = \"unsigned byte\";\r\n        break;\r\n      case Int16Array:\r\n        attrType = \"short\";\r\n        break;\r\n      case Uint16Array:\r\n        attrType = \"unsigned short\";\r\n        break;\r\n      default:\r\n        return;\r\n    }\r\n    if (attribute.normalized)\r\n      attrType += \" normalized\";\r\n    const attrNamePrefix = attributeName.split(\"_\", 1)[0];\r\n    if (KHR_mesh_quantization_ExtraAttrTypes[attrNamePrefix] && KHR_mesh_quantization_ExtraAttrTypes[attrNamePrefix].includes(attrType)) {\r\n      this.extensionsUsed[KHR_MESH_QUANTIZATION] = true;\r\n      this.extensionsRequired[KHR_MESH_QUANTIZATION] = true;\r\n    }\r\n  }\r\n  /**\r\n   * Process camera\r\n   * @param  {THREE.Camera} camera Camera to process\r\n   * @return {Integer}      Index of the processed mesh in the \"camera\" array\r\n   */\r\n  processCamera(camera) {\r\n    const json = this.json;\r\n    if (!json.cameras)\r\n      json.cameras = [];\r\n    const isOrtho = camera.isOrthographicCamera;\r\n    const cameraDef = {\r\n      type: isOrtho ? \"orthographic\" : \"perspective\"\r\n    };\r\n    if (isOrtho) {\r\n      cameraDef.orthographic = {\r\n        xmag: camera.right * 2,\r\n        ymag: camera.top * 2,\r\n        zfar: camera.far <= 0 ? 1e-3 : camera.far,\r\n        znear: camera.near < 0 ? 0 : camera.near\r\n      };\r\n    } else {\r\n      cameraDef.perspective = {\r\n        aspectRatio: camera.aspect,\r\n        yfov: MathUtils.degToRad(camera.fov),\r\n        zfar: camera.far <= 0 ? 1e-3 : camera.far,\r\n        znear: camera.near < 0 ? 0 : camera.near\r\n      };\r\n    }\r\n    if (camera.name !== \"\")\r\n      cameraDef.name = camera.type;\r\n    return json.cameras.push(cameraDef) - 1;\r\n  }\r\n  /**\r\n   * Creates glTF animation entry from AnimationClip object.\r\n   *\r\n   * Status:\r\n   * - Only properties listed in PATH_PROPERTIES may be animated.\r\n   *\r\n   * @param {THREE.AnimationClip} clip\r\n   * @param {THREE.Object3D} root\r\n   * @return {number|null}\r\n   */\r\n  processAnimation(clip, root) {\r\n    const json = this.json;\r\n    const nodeMap = this.nodeMap;\r\n    if (!json.animations)\r\n      json.animations = [];\r\n    clip = GLTFExporter.Utils.mergeMorphTargetTracks(clip.clone(), root);\r\n    const tracks = clip.tracks;\r\n    const channels = [];\r\n    const samplers = [];\r\n    for (let i = 0; i < tracks.length; ++i) {\r\n      const track = tracks[i];\r\n      const trackBinding = PropertyBinding.parseTrackName(track.name);\r\n      let trackNode = PropertyBinding.findNode(root, trackBinding.nodeName);\r\n      const trackProperty = PATH_PROPERTIES[trackBinding.propertyName];\r\n      if (trackBinding.objectName === \"bones\") {\r\n        if (trackNode.isSkinnedMesh === true) {\r\n          trackNode = trackNode.skeleton.getBoneByName(trackBinding.objectIndex);\r\n        } else {\r\n          trackNode = void 0;\r\n        }\r\n      }\r\n      if (!trackNode || !trackProperty) {\r\n        console.warn('THREE.GLTFExporter: Could not export animation track \"%s\".', track.name);\r\n        return null;\r\n      }\r\n      const inputItemSize = 1;\r\n      let outputItemSize = track.values.length / track.times.length;\r\n      if (trackProperty === PATH_PROPERTIES.morphTargetInfluences) {\r\n        outputItemSize /= trackNode.morphTargetInfluences.length;\r\n      }\r\n      let interpolation;\r\n      if (track.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline === true) {\r\n        interpolation = \"CUBICSPLINE\";\r\n        outputItemSize /= 3;\r\n      } else if (track.getInterpolation() === InterpolateDiscrete) {\r\n        interpolation = \"STEP\";\r\n      } else {\r\n        interpolation = \"LINEAR\";\r\n      }\r\n      samplers.push({\r\n        input: this.processAccessor(new BufferAttribute(track.times, inputItemSize)),\r\n        output: this.processAccessor(new BufferAttribute(track.values, outputItemSize)),\r\n        interpolation\r\n      });\r\n      channels.push({\r\n        sampler: samplers.length - 1,\r\n        target: {\r\n          node: nodeMap.get(trackNode),\r\n          path: trackProperty\r\n        }\r\n      });\r\n    }\r\n    json.animations.push({\r\n      name: clip.name || \"clip_\" + json.animations.length,\r\n      samplers,\r\n      channels\r\n    });\r\n    return json.animations.length - 1;\r\n  }\r\n  /**\r\n   * @param {THREE.Object3D} object\r\n   * @return {number|null}\r\n   */\r\n  processSkin(object) {\r\n    const json = this.json;\r\n    const nodeMap = this.nodeMap;\r\n    const node = json.nodes[nodeMap.get(object)];\r\n    const skeleton = object.skeleton;\r\n    if (skeleton === void 0)\r\n      return null;\r\n    const rootJoint = object.skeleton.bones[0];\r\n    if (rootJoint === void 0)\r\n      return null;\r\n    const joints = [];\r\n    const inverseBindMatrices = new Float32Array(skeleton.bones.length * 16);\r\n    const temporaryBoneInverse = new Matrix4();\r\n    for (let i = 0; i < skeleton.bones.length; ++i) {\r\n      joints.push(nodeMap.get(skeleton.bones[i]));\r\n      temporaryBoneInverse.copy(skeleton.boneInverses[i]);\r\n      temporaryBoneInverse.multiply(object.bindMatrix).toArray(inverseBindMatrices, i * 16);\r\n    }\r\n    if (json.skins === void 0)\r\n      json.skins = [];\r\n    json.skins.push({\r\n      inverseBindMatrices: this.processAccessor(new BufferAttribute(inverseBindMatrices, 16)),\r\n      joints,\r\n      skeleton: nodeMap.get(rootJoint)\r\n    });\r\n    const skinIndex = node.skin = json.skins.length - 1;\r\n    return skinIndex;\r\n  }\r\n  /**\r\n   * Process Object3D node\r\n   * @param  {THREE.Object3D} node Object3D to processNode\r\n   * @return {Integer} Index of the node in the nodes list\r\n   */\r\n  processNode(object) {\r\n    const json = this.json;\r\n    const options = this.options;\r\n    const nodeMap = this.nodeMap;\r\n    if (!json.nodes)\r\n      json.nodes = [];\r\n    const nodeDef = {};\r\n    if (options.trs) {\r\n      const rotation = object.quaternion.toArray();\r\n      const position = object.position.toArray();\r\n      const scale = object.scale.toArray();\r\n      if (!equalArray(rotation, [0, 0, 0, 1])) {\r\n        nodeDef.rotation = rotation;\r\n      }\r\n      if (!equalArray(position, [0, 0, 0])) {\r\n        nodeDef.translation = position;\r\n      }\r\n      if (!equalArray(scale, [1, 1, 1])) {\r\n        nodeDef.scale = scale;\r\n      }\r\n    } else {\r\n      if (object.matrixAutoUpdate) {\r\n        object.updateMatrix();\r\n      }\r\n      if (isIdentityMatrix(object.matrix) === false) {\r\n        nodeDef.matrix = object.matrix.elements;\r\n      }\r\n    }\r\n    if (object.name !== \"\")\r\n      nodeDef.name = String(object.name);\r\n    this.serializeUserData(object, nodeDef);\r\n    if (object.isMesh || object.isLine || object.isPoints) {\r\n      const meshIndex = this.processMesh(object);\r\n      if (meshIndex !== null)\r\n        nodeDef.mesh = meshIndex;\r\n    } else if (object.isCamera) {\r\n      nodeDef.camera = this.processCamera(object);\r\n    }\r\n    if (object.isSkinnedMesh)\r\n      this.skins.push(object);\r\n    if (object.children.length > 0) {\r\n      const children = [];\r\n      for (let i = 0, l = object.children.length; i < l; i++) {\r\n        const child = object.children[i];\r\n        if (child.visible || options.onlyVisible === false) {\r\n          const nodeIndex2 = this.processNode(child);\r\n          if (nodeIndex2 !== null)\r\n            children.push(nodeIndex2);\r\n        }\r\n      }\r\n      if (children.length > 0)\r\n        nodeDef.children = children;\r\n    }\r\n    this._invokeAll(function(ext) {\r\n      ext.writeNode && ext.writeNode(object, nodeDef);\r\n    });\r\n    const nodeIndex = json.nodes.push(nodeDef) - 1;\r\n    nodeMap.set(object, nodeIndex);\r\n    return nodeIndex;\r\n  }\r\n  /**\r\n   * Process Scene\r\n   * @param  {Scene} node Scene to process\r\n   */\r\n  processScene(scene) {\r\n    const json = this.json;\r\n    const options = this.options;\r\n    if (!json.scenes) {\r\n      json.scenes = [];\r\n      json.scene = 0;\r\n    }\r\n    const sceneDef = {};\r\n    if (scene.name !== \"\")\r\n      sceneDef.name = scene.name;\r\n    json.scenes.push(sceneDef);\r\n    const nodes = [];\r\n    for (let i = 0, l = scene.children.length; i < l; i++) {\r\n      const child = scene.children[i];\r\n      if (child.visible || options.onlyVisible === false) {\r\n        const nodeIndex = this.processNode(child);\r\n        if (nodeIndex !== null)\r\n          nodes.push(nodeIndex);\r\n      }\r\n    }\r\n    if (nodes.length > 0)\r\n      sceneDef.nodes = nodes;\r\n    this.serializeUserData(scene, sceneDef);\r\n  }\r\n  /**\r\n   * Creates a Scene to hold a list of objects and parse it\r\n   * @param  {Array} objects List of objects to process\r\n   */\r\n  processObjects(objects) {\r\n    const scene = new Scene();\r\n    scene.name = \"AuxScene\";\r\n    for (let i = 0; i < objects.length; i++) {\r\n      scene.children.push(objects[i]);\r\n    }\r\n    this.processScene(scene);\r\n  }\r\n  /**\r\n   * @param {THREE.Object3D|Array<THREE.Object3D>} input\r\n   */\r\n  processInput(input) {\r\n    const options = this.options;\r\n    input = input instanceof Array ? input : [input];\r\n    this._invokeAll(function(ext) {\r\n      ext.beforeParse && ext.beforeParse(input);\r\n    });\r\n    const objectsWithoutScene = [];\r\n    for (let i = 0; i < input.length; i++) {\r\n      if (input[i] instanceof Scene) {\r\n        this.processScene(input[i]);\r\n      } else {\r\n        objectsWithoutScene.push(input[i]);\r\n      }\r\n    }\r\n    if (objectsWithoutScene.length > 0)\r\n      this.processObjects(objectsWithoutScene);\r\n    for (let i = 0; i < this.skins.length; ++i) {\r\n      this.processSkin(this.skins[i]);\r\n    }\r\n    for (let i = 0; i < options.animations.length; ++i) {\r\n      this.processAnimation(options.animations[i], input[0]);\r\n    }\r\n    this._invokeAll(function(ext) {\r\n      ext.afterParse && ext.afterParse(input);\r\n    });\r\n  }\r\n  _invokeAll(func) {\r\n    for (let i = 0, il = this.plugins.length; i < il; i++) {\r\n      func(this.plugins[i]);\r\n    }\r\n  }\r\n}\r\nclass GLTFLightExtension {\r\n  constructor(writer) {\r\n    this.writer = writer;\r\n    this.name = \"KHR_lights_punctual\";\r\n  }\r\n  writeNode(light, nodeDef) {\r\n    if (!light.isLight)\r\n      return;\r\n    if (!light.isDirectionalLight && !light.isPointLight && !light.isSpotLight) {\r\n      console.warn(\"THREE.GLTFExporter: Only directional, point, and spot lights are supported.\", light);\r\n      return;\r\n    }\r\n    const writer = this.writer;\r\n    const json = writer.json;\r\n    const extensionsUsed = writer.extensionsUsed;\r\n    const lightDef = {};\r\n    if (light.name)\r\n      lightDef.name = light.name;\r\n    lightDef.color = light.color.toArray();\r\n    lightDef.intensity = light.intensity;\r\n    if (light.isDirectionalLight) {\r\n      lightDef.type = \"directional\";\r\n    } else if (light.isPointLight) {\r\n      lightDef.type = \"point\";\r\n      if (light.distance > 0)\r\n        lightDef.range = light.distance;\r\n    } else if (light.isSpotLight) {\r\n      lightDef.type = \"spot\";\r\n      if (light.distance > 0)\r\n        lightDef.range = light.distance;\r\n      lightDef.spot = {};\r\n      lightDef.spot.innerConeAngle = (light.penumbra - 1) * light.angle * -1;\r\n      lightDef.spot.outerConeAngle = light.angle;\r\n    }\r\n    if (light.decay !== void 0 && light.decay !== 2) {\r\n      console.warn(\r\n        \"THREE.GLTFExporter: Light decay may be lost. glTF is physically-based, and expects light.decay=2.\"\r\n      );\r\n    }\r\n    if (light.target && (light.target.parent !== light || light.target.position.x !== 0 || light.target.position.y !== 0 || light.target.position.z !== -1)) {\r\n      console.warn(\r\n        \"THREE.GLTFExporter: Light direction may be lost. For best results, make light.target a child of the light with position 0,0,-1.\"\r\n      );\r\n    }\r\n    if (!extensionsUsed[this.name]) {\r\n      json.extensions = json.extensions || {};\r\n      json.extensions[this.name] = { lights: [] };\r\n      extensionsUsed[this.name] = true;\r\n    }\r\n    const lights = json.extensions[this.name].lights;\r\n    lights.push(lightDef);\r\n    nodeDef.extensions = nodeDef.extensions || {};\r\n    nodeDef.extensions[this.name] = { light: lights.length - 1 };\r\n  }\r\n}\r\nclass GLTFMaterialsUnlitExtension {\r\n  constructor(writer) {\r\n    this.writer = writer;\r\n    this.name = \"KHR_materials_unlit\";\r\n  }\r\n  writeMaterial(material, materialDef) {\r\n    if (!material.isMeshBasicMaterial)\r\n      return;\r\n    const writer = this.writer;\r\n    const extensionsUsed = writer.extensionsUsed;\r\n    materialDef.extensions = materialDef.extensions || {};\r\n    materialDef.extensions[this.name] = {};\r\n    extensionsUsed[this.name] = true;\r\n    materialDef.pbrMetallicRoughness.metallicFactor = 0;\r\n    materialDef.pbrMetallicRoughness.roughnessFactor = 0.9;\r\n  }\r\n}\r\nclass GLTFMaterialsClearcoatExtension {\r\n  constructor(writer) {\r\n    this.writer = writer;\r\n    this.name = \"KHR_materials_clearcoat\";\r\n  }\r\n  writeMaterial(material, materialDef) {\r\n    if (!material.isMeshPhysicalMaterial || material.clearcoat === 0)\r\n      return;\r\n    const writer = this.writer;\r\n    const extensionsUsed = writer.extensionsUsed;\r\n    const extensionDef = {};\r\n    extensionDef.clearcoatFactor = material.clearcoat;\r\n    if (material.clearcoatMap) {\r\n      const clearcoatMapDef = {\r\n        index: writer.processTexture(material.clearcoatMap),\r\n        texCoord: material.clearcoatMap.channel\r\n      };\r\n      writer.applyTextureTransform(clearcoatMapDef, material.clearcoatMap);\r\n      extensionDef.clearcoatTexture = clearcoatMapDef;\r\n    }\r\n    extensionDef.clearcoatRoughnessFactor = material.clearcoatRoughness;\r\n    if (material.clearcoatRoughnessMap) {\r\n      const clearcoatRoughnessMapDef = {\r\n        index: writer.processTexture(material.clearcoatRoughnessMap),\r\n        texCoord: material.clearcoatRoughnessMap.channel\r\n      };\r\n      writer.applyTextureTransform(clearcoatRoughnessMapDef, material.clearcoatRoughnessMap);\r\n      extensionDef.clearcoatRoughnessTexture = clearcoatRoughnessMapDef;\r\n    }\r\n    if (material.clearcoatNormalMap) {\r\n      const clearcoatNormalMapDef = {\r\n        index: writer.processTexture(material.clearcoatNormalMap),\r\n        texCoord: material.clearcoatNormalMap.channel\r\n      };\r\n      writer.applyTextureTransform(clearcoatNormalMapDef, material.clearcoatNormalMap);\r\n      extensionDef.clearcoatNormalTexture = clearcoatNormalMapDef;\r\n    }\r\n    materialDef.extensions = materialDef.extensions || {};\r\n    materialDef.extensions[this.name] = extensionDef;\r\n    extensionsUsed[this.name] = true;\r\n  }\r\n}\r\nclass GLTFMaterialsIridescenceExtension {\r\n  constructor(writer) {\r\n    this.writer = writer;\r\n    this.name = \"KHR_materials_iridescence\";\r\n  }\r\n  writeMaterial(material, materialDef) {\r\n    if (!material.isMeshPhysicalMaterial || material.iridescence === 0)\r\n      return;\r\n    const writer = this.writer;\r\n    const extensionsUsed = writer.extensionsUsed;\r\n    const extensionDef = {};\r\n    extensionDef.iridescenceFactor = material.iridescence;\r\n    if (material.iridescenceMap) {\r\n      const iridescenceMapDef = {\r\n        index: writer.processTexture(material.iridescenceMap),\r\n        texCoord: material.iridescenceMap.channel\r\n      };\r\n      writer.applyTextureTransform(iridescenceMapDef, material.iridescenceMap);\r\n      extensionDef.iridescenceTexture = iridescenceMapDef;\r\n    }\r\n    extensionDef.iridescenceIor = material.iridescenceIOR;\r\n    extensionDef.iridescenceThicknessMinimum = material.iridescenceThicknessRange[0];\r\n    extensionDef.iridescenceThicknessMaximum = material.iridescenceThicknessRange[1];\r\n    if (material.iridescenceThicknessMap) {\r\n      const iridescenceThicknessMapDef = {\r\n        index: writer.processTexture(material.iridescenceThicknessMap),\r\n        texCoord: material.iridescenceThicknessMap.channel\r\n      };\r\n      writer.applyTextureTransform(iridescenceThicknessMapDef, material.iridescenceThicknessMap);\r\n      extensionDef.iridescenceThicknessTexture = iridescenceThicknessMapDef;\r\n    }\r\n    materialDef.extensions = materialDef.extensions || {};\r\n    materialDef.extensions[this.name] = extensionDef;\r\n    extensionsUsed[this.name] = true;\r\n  }\r\n}\r\nclass GLTFMaterialsTransmissionExtension {\r\n  constructor(writer) {\r\n    this.writer = writer;\r\n    this.name = \"KHR_materials_transmission\";\r\n  }\r\n  writeMaterial(material, materialDef) {\r\n    if (!material.isMeshPhysicalMaterial || material.transmission === 0)\r\n      return;\r\n    const writer = this.writer;\r\n    const extensionsUsed = writer.extensionsUsed;\r\n    const extensionDef = {};\r\n    extensionDef.transmissionFactor = material.transmission;\r\n    if (material.transmissionMap) {\r\n      const transmissionMapDef = {\r\n        index: writer.processTexture(material.transmissionMap),\r\n        texCoord: material.transmissionMap.channel\r\n      };\r\n      writer.applyTextureTransform(transmissionMapDef, material.transmissionMap);\r\n      extensionDef.transmissionTexture = transmissionMapDef;\r\n    }\r\n    materialDef.extensions = materialDef.extensions || {};\r\n    materialDef.extensions[this.name] = extensionDef;\r\n    extensionsUsed[this.name] = true;\r\n  }\r\n}\r\nclass GLTFMaterialsVolumeExtension {\r\n  constructor(writer) {\r\n    this.writer = writer;\r\n    this.name = \"KHR_materials_volume\";\r\n  }\r\n  writeMaterial(material, materialDef) {\r\n    if (!material.isMeshPhysicalMaterial || material.transmission === 0)\r\n      return;\r\n    const writer = this.writer;\r\n    const extensionsUsed = writer.extensionsUsed;\r\n    const extensionDef = {};\r\n    extensionDef.thicknessFactor = material.thickness;\r\n    if (material.thicknessMap) {\r\n      const thicknessMapDef = {\r\n        index: writer.processTexture(material.thicknessMap),\r\n        texCoord: material.thicknessMap.channel\r\n      };\r\n      writer.applyTextureTransform(thicknessMapDef, material.thicknessMap);\r\n      extensionDef.thicknessTexture = thicknessMapDef;\r\n    }\r\n    extensionDef.attenuationDistance = material.attenuationDistance;\r\n    extensionDef.attenuationColor = material.attenuationColor.toArray();\r\n    materialDef.extensions = materialDef.extensions || {};\r\n    materialDef.extensions[this.name] = extensionDef;\r\n    extensionsUsed[this.name] = true;\r\n  }\r\n}\r\nclass GLTFMaterialsIorExtension {\r\n  constructor(writer) {\r\n    this.writer = writer;\r\n    this.name = \"KHR_materials_ior\";\r\n  }\r\n  writeMaterial(material, materialDef) {\r\n    if (!material.isMeshPhysicalMaterial || material.ior === 1.5)\r\n      return;\r\n    const writer = this.writer;\r\n    const extensionsUsed = writer.extensionsUsed;\r\n    const extensionDef = {};\r\n    extensionDef.ior = material.ior;\r\n    materialDef.extensions = materialDef.extensions || {};\r\n    materialDef.extensions[this.name] = extensionDef;\r\n    extensionsUsed[this.name] = true;\r\n  }\r\n}\r\nclass GLTFMaterialsSpecularExtension {\r\n  constructor(writer) {\r\n    this.writer = writer;\r\n    this.name = \"KHR_materials_specular\";\r\n  }\r\n  writeMaterial(material, materialDef) {\r\n    if (!material.isMeshPhysicalMaterial || material.specularIntensity === 1 && material.specularColor.equals(DEFAULT_SPECULAR_COLOR) && !material.specularIntensityMap && !material.specularColorTexture)\r\n      return;\r\n    const writer = this.writer;\r\n    const extensionsUsed = writer.extensionsUsed;\r\n    const extensionDef = {};\r\n    if (material.specularIntensityMap) {\r\n      const specularIntensityMapDef = {\r\n        index: writer.processTexture(material.specularIntensityMap),\r\n        texCoord: material.specularIntensityMap.channel\r\n      };\r\n      writer.applyTextureTransform(specularIntensityMapDef, material.specularIntensityMap);\r\n      extensionDef.specularTexture = specularIntensityMapDef;\r\n    }\r\n    if (material.specularColorMap) {\r\n      const specularColorMapDef = {\r\n        index: writer.processTexture(material.specularColorMap),\r\n        texCoord: material.specularColorMap.channel\r\n      };\r\n      writer.applyTextureTransform(specularColorMapDef, material.specularColorMap);\r\n      extensionDef.specularColorTexture = specularColorMapDef;\r\n    }\r\n    extensionDef.specularFactor = material.specularIntensity;\r\n    extensionDef.specularColorFactor = material.specularColor.toArray();\r\n    materialDef.extensions = materialDef.extensions || {};\r\n    materialDef.extensions[this.name] = extensionDef;\r\n    extensionsUsed[this.name] = true;\r\n  }\r\n}\r\nclass GLTFMaterialsSheenExtension {\r\n  constructor(writer) {\r\n    this.writer = writer;\r\n    this.name = \"KHR_materials_sheen\";\r\n  }\r\n  writeMaterial(material, materialDef) {\r\n    if (!material.isMeshPhysicalMaterial || material.sheen == 0)\r\n      return;\r\n    const writer = this.writer;\r\n    const extensionsUsed = writer.extensionsUsed;\r\n    const extensionDef = {};\r\n    if (material.sheenRoughnessMap) {\r\n      const sheenRoughnessMapDef = {\r\n        index: writer.processTexture(material.sheenRoughnessMap),\r\n        texCoord: material.sheenRoughnessMap.channel\r\n      };\r\n      writer.applyTextureTransform(sheenRoughnessMapDef, material.sheenRoughnessMap);\r\n      extensionDef.sheenRoughnessTexture = sheenRoughnessMapDef;\r\n    }\r\n    if (material.sheenColorMap) {\r\n      const sheenColorMapDef = {\r\n        index: writer.processTexture(material.sheenColorMap),\r\n        texCoord: material.sheenColorMap.channel\r\n      };\r\n      writer.applyTextureTransform(sheenColorMapDef, material.sheenColorMap);\r\n      extensionDef.sheenColorTexture = sheenColorMapDef;\r\n    }\r\n    extensionDef.sheenRoughnessFactor = material.sheenRoughness;\r\n    extensionDef.sheenColorFactor = material.sheenColor.toArray();\r\n    materialDef.extensions = materialDef.extensions || {};\r\n    materialDef.extensions[this.name] = extensionDef;\r\n    extensionsUsed[this.name] = true;\r\n  }\r\n}\r\nclass GLTFMaterialsAnisotropyExtension {\r\n  constructor(writer) {\r\n    this.writer = writer;\r\n    this.name = \"KHR_materials_anisotropy\";\r\n  }\r\n  writeMaterial(material, materialDef) {\r\n    if (!material.isMeshPhysicalMaterial || material.anisotropy == 0)\r\n      return;\r\n    const writer = this.writer;\r\n    const extensionsUsed = writer.extensionsUsed;\r\n    const extensionDef = {};\r\n    if (material.anisotropyMap) {\r\n      const anisotropyMapDef = { index: writer.processTexture(material.anisotropyMap) };\r\n      writer.applyTextureTransform(anisotropyMapDef, material.anisotropyMap);\r\n      extensionDef.anisotropyTexture = anisotropyMapDef;\r\n    }\r\n    extensionDef.anisotropyStrength = material.anisotropy;\r\n    extensionDef.anisotropyRotation = material.anisotropyRotation;\r\n    materialDef.extensions = materialDef.extensions || {};\r\n    materialDef.extensions[this.name] = extensionDef;\r\n    extensionsUsed[this.name] = true;\r\n  }\r\n}\r\nclass GLTFMaterialsEmissiveStrengthExtension {\r\n  constructor(writer) {\r\n    this.writer = writer;\r\n    this.name = \"KHR_materials_emissive_strength\";\r\n  }\r\n  writeMaterial(material, materialDef) {\r\n    if (!material.isMeshStandardMaterial || material.emissiveIntensity === 1)\r\n      return;\r\n    const writer = this.writer;\r\n    const extensionsUsed = writer.extensionsUsed;\r\n    const extensionDef = {};\r\n    extensionDef.emissiveStrength = material.emissiveIntensity;\r\n    materialDef.extensions = materialDef.extensions || {};\r\n    materialDef.extensions[this.name] = extensionDef;\r\n    extensionsUsed[this.name] = true;\r\n  }\r\n}\r\nGLTFExporter.Utils = {\r\n  insertKeyframe: function(track, time) {\r\n    const tolerance = 1e-3;\r\n    const valueSize = track.getValueSize();\r\n    const times = new track.TimeBufferType(track.times.length + 1);\r\n    const values = new track.ValueBufferType(track.values.length + valueSize);\r\n    const interpolant = track.createInterpolant(new track.ValueBufferType(valueSize));\r\n    let index;\r\n    if (track.times.length === 0) {\r\n      times[0] = time;\r\n      for (let i = 0; i < valueSize; i++) {\r\n        values[i] = 0;\r\n      }\r\n      index = 0;\r\n    } else if (time < track.times[0]) {\r\n      if (Math.abs(track.times[0] - time) < tolerance)\r\n        return 0;\r\n      times[0] = time;\r\n      times.set(track.times, 1);\r\n      values.set(interpolant.evaluate(time), 0);\r\n      values.set(track.values, valueSize);\r\n      index = 0;\r\n    } else if (time > track.times[track.times.length - 1]) {\r\n      if (Math.abs(track.times[track.times.length - 1] - time) < tolerance) {\r\n        return track.times.length - 1;\r\n      }\r\n      times[times.length - 1] = time;\r\n      times.set(track.times, 0);\r\n      values.set(track.values, 0);\r\n      values.set(interpolant.evaluate(time), track.values.length);\r\n      index = times.length - 1;\r\n    } else {\r\n      for (let i = 0; i < track.times.length; i++) {\r\n        if (Math.abs(track.times[i] - time) < tolerance)\r\n          return i;\r\n        if (track.times[i] < time && track.times[i + 1] > time) {\r\n          times.set(track.times.slice(0, i + 1), 0);\r\n          times[i + 1] = time;\r\n          times.set(track.times.slice(i + 1), i + 2);\r\n          values.set(track.values.slice(0, (i + 1) * valueSize), 0);\r\n          values.set(interpolant.evaluate(time), (i + 1) * valueSize);\r\n          values.set(track.values.slice((i + 1) * valueSize), (i + 2) * valueSize);\r\n          index = i + 1;\r\n          break;\r\n        }\r\n      }\r\n    }\r\n    track.times = times;\r\n    track.values = values;\r\n    return index;\r\n  },\r\n  mergeMorphTargetTracks: function(clip, root) {\r\n    const tracks = [];\r\n    const mergedTracks = {};\r\n    const sourceTracks = clip.tracks;\r\n    for (let i = 0; i < sourceTracks.length; ++i) {\r\n      let sourceTrack = sourceTracks[i];\r\n      const sourceTrackBinding = PropertyBinding.parseTrackName(sourceTrack.name);\r\n      const sourceTrackNode = PropertyBinding.findNode(root, sourceTrackBinding.nodeName);\r\n      if (sourceTrackBinding.propertyName !== \"morphTargetInfluences\" || sourceTrackBinding.propertyIndex === void 0) {\r\n        tracks.push(sourceTrack);\r\n        continue;\r\n      }\r\n      if (sourceTrack.createInterpolant !== sourceTrack.InterpolantFactoryMethodDiscrete && sourceTrack.createInterpolant !== sourceTrack.InterpolantFactoryMethodLinear) {\r\n        if (sourceTrack.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline) {\r\n          throw new Error(\"THREE.GLTFExporter: Cannot merge tracks with glTF CUBICSPLINE interpolation.\");\r\n        }\r\n        console.warn(\"THREE.GLTFExporter: Morph target interpolation mode not yet supported. Using LINEAR instead.\");\r\n        sourceTrack = sourceTrack.clone();\r\n        sourceTrack.setInterpolation(InterpolateLinear);\r\n      }\r\n      const targetCount = sourceTrackNode.morphTargetInfluences.length;\r\n      const targetIndex = sourceTrackNode.morphTargetDictionary[sourceTrackBinding.propertyIndex];\r\n      if (targetIndex === void 0) {\r\n        throw new Error(\"THREE.GLTFExporter: Morph target name not found: \" + sourceTrackBinding.propertyIndex);\r\n      }\r\n      let mergedTrack;\r\n      if (mergedTracks[sourceTrackNode.uuid] === void 0) {\r\n        mergedTrack = sourceTrack.clone();\r\n        const values = new mergedTrack.ValueBufferType(targetCount * mergedTrack.times.length);\r\n        for (let j = 0; j < mergedTrack.times.length; j++) {\r\n          values[j * targetCount + targetIndex] = mergedTrack.values[j];\r\n        }\r\n        mergedTrack.name = (sourceTrackBinding.nodeName || \"\") + \".morphTargetInfluences\";\r\n        mergedTrack.values = values;\r\n        mergedTracks[sourceTrackNode.uuid] = mergedTrack;\r\n        tracks.push(mergedTrack);\r\n        continue;\r\n      }\r\n      const sourceInterpolant = sourceTrack.createInterpolant(new sourceTrack.ValueBufferType(1));\r\n      mergedTrack = mergedTracks[sourceTrackNode.uuid];\r\n      for (let j = 0; j < mergedTrack.times.length; j++) {\r\n        mergedTrack.values[j * targetCount + targetIndex] = sourceInterpolant.evaluate(mergedTrack.times[j]);\r\n      }\r\n      for (let j = 0; j < sourceTrack.times.length; j++) {\r\n        const keyframeIndex = this.insertKeyframe(mergedTrack, sourceTrack.times[j]);\r\n        mergedTrack.values[keyframeIndex * targetCount + targetIndex] = sourceTrack.values[j];\r\n      }\r\n    }\r\n    clip.tracks = tracks;\r\n    return clip;\r\n  }\r\n};\r\nexport {\r\n  GLTFExporter\r\n};\r\n", "// DEFLATE is a complex format; to read this code, you should probably check the RFC first:\r\n// https://tools.ietf.org/html/rfc1951\r\n// You may also wish to take a look at the guide I made about this program:\r\n// https://gist.github.com/101arrowz/253f31eb5abc3d9275ab943003ffecad\r\n// Some of the following code is similar to that of UZIP.js:\r\n// https://github.com/photopea/UZIP.js\r\n// However, the vast majority of the codebase has diverged from UZIP.js to increase performance and reduce bundle size.\r\n// Sometimes 0 will appear where -1 would be more appropriate. This is because using a uint\r\n// is better for memory in most engines (I *think*).\r\nvar ch2 = {};\r\nvar wk = (function (c, id, msg, transfer, cb) {\r\n    var w = new Worker(ch2[id] || (ch2[id] = URL.createObjectURL(new Blob([c], { type: 'text/javascript' }))));\r\n    w.onerror = function (e) { return cb(e.error, null); };\r\n    w.onmessage = function (e) { return cb(null, e.data); };\r\n    w.postMessage(msg, transfer);\r\n    return w;\r\n});\r\n\r\n// aliases for shorter compressed code (most minifers don't do this)\r\nvar u8 = Uint8Array, u16 = Uint16Array, u32 = Uint32Array;\r\n// fixed length extra bits\r\nvar fleb = new u8([0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0, /* unused */ 0, 0, /* impossible */ 0]);\r\n// fixed distance extra bits\r\n// see fleb note\r\nvar fdeb = new u8([0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13, /* unused */ 0, 0]);\r\n// code length index map\r\nvar clim = new u8([16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15]);\r\n// get base, reverse index map from extra bits\r\nvar freb = function (eb, start) {\r\n    var b = new u16(31);\r\n    for (var i = 0; i < 31; ++i) {\r\n        b[i] = start += 1 << eb[i - 1];\r\n    }\r\n    // numbers here are at max 18 bits\r\n    var r = new u32(b[30]);\r\n    for (var i = 1; i < 30; ++i) {\r\n        for (var j = b[i]; j < b[i + 1]; ++j) {\r\n            r[j] = ((j - b[i]) << 5) | i;\r\n        }\r\n    }\r\n    return [b, r];\r\n};\r\nvar _a = freb(fleb, 2), fl = _a[0], revfl = _a[1];\r\n// we can ignore the fact that the other numbers are wrong; they never happen anyway\r\nfl[28] = 258, revfl[258] = 28;\r\nvar _b = freb(fdeb, 0), fd = _b[0], revfd = _b[1];\r\n// map of value to reverse (assuming 16 bits)\r\nvar rev = new u16(32768);\r\nfor (var i = 0; i < 32768; ++i) {\r\n    // reverse table algorithm from SO\r\n    var x = ((i & 0xAAAA) >>> 1) | ((i & 0x5555) << 1);\r\n    x = ((x & 0xCCCC) >>> 2) | ((x & 0x3333) << 2);\r\n    x = ((x & 0xF0F0) >>> 4) | ((x & 0x0F0F) << 4);\r\n    rev[i] = (((x & 0xFF00) >>> 8) | ((x & 0x00FF) << 8)) >>> 1;\r\n}\r\n// create huffman tree from u8 \"map\": index -> code length for code index\r\n// mb (max bits) must be at most 15\r\n// TODO: optimize/split up?\r\nvar hMap = (function (cd, mb, r) {\r\n    var s = cd.length;\r\n    // index\r\n    var i = 0;\r\n    // u16 \"map\": index -> # of codes with bit length = index\r\n    var l = new u16(mb);\r\n    // length of cd must be 288 (total # of codes)\r\n    for (; i < s; ++i)\r\n        ++l[cd[i] - 1];\r\n    // u16 \"map\": index -> minimum code for bit length = index\r\n    var le = new u16(mb);\r\n    for (i = 0; i < mb; ++i) {\r\n        le[i] = (le[i - 1] + l[i - 1]) << 1;\r\n    }\r\n    var co;\r\n    if (r) {\r\n        // u16 \"map\": index -> number of actual bits, symbol for code\r\n        co = new u16(1 << mb);\r\n        // bits to remove for reverser\r\n        var rvb = 15 - mb;\r\n        for (i = 0; i < s; ++i) {\r\n            // ignore 0 lengths\r\n            if (cd[i]) {\r\n                // num encoding both symbol and bits read\r\n                var sv = (i << 4) | cd[i];\r\n                // free bits\r\n                var r_1 = mb - cd[i];\r\n                // start value\r\n                var v = le[cd[i] - 1]++ << r_1;\r\n                // m is end value\r\n                for (var m = v | ((1 << r_1) - 1); v <= m; ++v) {\r\n                    // every 16 bit value starting with the code yields the same result\r\n                    co[rev[v] >>> rvb] = sv;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    else {\r\n        co = new u16(s);\r\n        for (i = 0; i < s; ++i) {\r\n            if (cd[i]) {\r\n                co[i] = rev[le[cd[i] - 1]++] >>> (15 - cd[i]);\r\n            }\r\n        }\r\n    }\r\n    return co;\r\n});\r\n// fixed length tree\r\nvar flt = new u8(288);\r\nfor (var i = 0; i < 144; ++i)\r\n    flt[i] = 8;\r\nfor (var i = 144; i < 256; ++i)\r\n    flt[i] = 9;\r\nfor (var i = 256; i < 280; ++i)\r\n    flt[i] = 7;\r\nfor (var i = 280; i < 288; ++i)\r\n    flt[i] = 8;\r\n// fixed distance tree\r\nvar fdt = new u8(32);\r\nfor (var i = 0; i < 32; ++i)\r\n    fdt[i] = 5;\r\n// fixed length map\r\nvar flm = /*#__PURE__*/ hMap(flt, 9, 0), flrm = /*#__PURE__*/ hMap(flt, 9, 1);\r\n// fixed distance map\r\nvar fdm = /*#__PURE__*/ hMap(fdt, 5, 0), fdrm = /*#__PURE__*/ hMap(fdt, 5, 1);\r\n// find max of array\r\nvar max = function (a) {\r\n    var m = a[0];\r\n    for (var i = 1; i < a.length; ++i) {\r\n        if (a[i] > m)\r\n            m = a[i];\r\n    }\r\n    return m;\r\n};\r\n// read d, starting at bit p and mask with m\r\nvar bits = function (d, p, m) {\r\n    var o = (p / 8) | 0;\r\n    return ((d[o] | (d[o + 1] << 8)) >> (p & 7)) & m;\r\n};\r\n// read d, starting at bit p continuing for at least 16 bits\r\nvar bits16 = function (d, p) {\r\n    var o = (p / 8) | 0;\r\n    return ((d[o] | (d[o + 1] << 8) | (d[o + 2] << 16)) >> (p & 7));\r\n};\r\n// get end of byte\r\nvar shft = function (p) { return ((p / 8) | 0) + (p & 7 && 1); };\r\n// typed array slice - allows garbage collector to free original reference,\r\n// while being more compatible than .slice\r\nvar slc = function (v, s, e) {\r\n    if (s == null || s < 0)\r\n        s = 0;\r\n    if (e == null || e > v.length)\r\n        e = v.length;\r\n    // can't use .constructor in case user-supplied\r\n    var n = new (v instanceof u16 ? u16 : v instanceof u32 ? u32 : u8)(e - s);\r\n    n.set(v.subarray(s, e));\r\n    return n;\r\n};\r\n// expands raw DEFLATE data\r\nvar inflt = function (dat, buf, st) {\r\n    // source length\r\n    var sl = dat.length;\r\n    if (!sl || (st && !st.l && sl < 5))\r\n        return buf || new u8(0);\r\n    // have to estimate size\r\n    var noBuf = !buf || st;\r\n    // no state\r\n    var noSt = !st || st.i;\r\n    if (!st)\r\n        st = {};\r\n    // Assumes roughly 33% compression ratio average\r\n    if (!buf)\r\n        buf = new u8(sl * 3);\r\n    // ensure buffer can fit at least l elements\r\n    var cbuf = function (l) {\r\n        var bl = buf.length;\r\n        // need to increase size to fit\r\n        if (l > bl) {\r\n            // Double or set to necessary, whichever is greater\r\n            var nbuf = new u8(Math.max(bl * 2, l));\r\n            nbuf.set(buf);\r\n            buf = nbuf;\r\n        }\r\n    };\r\n    //  last chunk         bitpos           bytes\r\n    var final = st.f || 0, pos = st.p || 0, bt = st.b || 0, lm = st.l, dm = st.d, lbt = st.m, dbt = st.n;\r\n    // total bits\r\n    var tbts = sl * 8;\r\n    do {\r\n        if (!lm) {\r\n            // BFINAL - this is only 1 when last chunk is next\r\n            st.f = final = bits(dat, pos, 1);\r\n            // type: 0 = no compression, 1 = fixed huffman, 2 = dynamic huffman\r\n            var type = bits(dat, pos + 1, 3);\r\n            pos += 3;\r\n            if (!type) {\r\n                // go to end of byte boundary\r\n                var s = shft(pos) + 4, l = dat[s - 4] | (dat[s - 3] << 8), t = s + l;\r\n                if (t > sl) {\r\n                    if (noSt)\r\n                        throw 'unexpected EOF';\r\n                    break;\r\n                }\r\n                // ensure size\r\n                if (noBuf)\r\n                    cbuf(bt + l);\r\n                // Copy over uncompressed data\r\n                buf.set(dat.subarray(s, t), bt);\r\n                // Get new bitpos, update byte count\r\n                st.b = bt += l, st.p = pos = t * 8;\r\n                continue;\r\n            }\r\n            else if (type == 1)\r\n                lm = flrm, dm = fdrm, lbt = 9, dbt = 5;\r\n            else if (type == 2) {\r\n                //  literal                            lengths\r\n                var hLit = bits(dat, pos, 31) + 257, hcLen = bits(dat, pos + 10, 15) + 4;\r\n                var tl = hLit + bits(dat, pos + 5, 31) + 1;\r\n                pos += 14;\r\n                // length+distance tree\r\n                var ldt = new u8(tl);\r\n                // code length tree\r\n                var clt = new u8(19);\r\n                for (var i = 0; i < hcLen; ++i) {\r\n                    // use index map to get real code\r\n                    clt[clim[i]] = bits(dat, pos + i * 3, 7);\r\n                }\r\n                pos += hcLen * 3;\r\n                // code lengths bits\r\n                var clb = max(clt), clbmsk = (1 << clb) - 1;\r\n                // code lengths map\r\n                var clm = hMap(clt, clb, 1);\r\n                for (var i = 0; i < tl;) {\r\n                    var r = clm[bits(dat, pos, clbmsk)];\r\n                    // bits read\r\n                    pos += r & 15;\r\n                    // symbol\r\n                    var s = r >>> 4;\r\n                    // code length to copy\r\n                    if (s < 16) {\r\n                        ldt[i++] = s;\r\n                    }\r\n                    else {\r\n                        //  copy   count\r\n                        var c = 0, n = 0;\r\n                        if (s == 16)\r\n                            n = 3 + bits(dat, pos, 3), pos += 2, c = ldt[i - 1];\r\n                        else if (s == 17)\r\n                            n = 3 + bits(dat, pos, 7), pos += 3;\r\n                        else if (s == 18)\r\n                            n = 11 + bits(dat, pos, 127), pos += 7;\r\n                        while (n--)\r\n                            ldt[i++] = c;\r\n                    }\r\n                }\r\n                //    length tree                 distance tree\r\n                var lt = ldt.subarray(0, hLit), dt = ldt.subarray(hLit);\r\n                // max length bits\r\n                lbt = max(lt);\r\n                // max dist bits\r\n                dbt = max(dt);\r\n                lm = hMap(lt, lbt, 1);\r\n                dm = hMap(dt, dbt, 1);\r\n            }\r\n            else\r\n                throw 'invalid block type';\r\n            if (pos > tbts) {\r\n                if (noSt)\r\n                    throw 'unexpected EOF';\r\n                break;\r\n            }\r\n        }\r\n        // Make sure the buffer can hold this + the largest possible addition\r\n        // Maximum chunk size (practically, theoretically infinite) is 2^17;\r\n        if (noBuf)\r\n            cbuf(bt + 131072);\r\n        var lms = (1 << lbt) - 1, dms = (1 << dbt) - 1;\r\n        var lpos = pos;\r\n        for (;; lpos = pos) {\r\n            // bits read, code\r\n            var c = lm[bits16(dat, pos) & lms], sym = c >>> 4;\r\n            pos += c & 15;\r\n            if (pos > tbts) {\r\n                if (noSt)\r\n                    throw 'unexpected EOF';\r\n                break;\r\n            }\r\n            if (!c)\r\n                throw 'invalid length/literal';\r\n            if (sym < 256)\r\n                buf[bt++] = sym;\r\n            else if (sym == 256) {\r\n                lpos = pos, lm = null;\r\n                break;\r\n            }\r\n            else {\r\n                var add = sym - 254;\r\n                // no extra bits needed if less\r\n                if (sym > 264) {\r\n                    // index\r\n                    var i = sym - 257, b = fleb[i];\r\n                    add = bits(dat, pos, (1 << b) - 1) + fl[i];\r\n                    pos += b;\r\n                }\r\n                // dist\r\n                var d = dm[bits16(dat, pos) & dms], dsym = d >>> 4;\r\n                if (!d)\r\n                    throw 'invalid distance';\r\n                pos += d & 15;\r\n                var dt = fd[dsym];\r\n                if (dsym > 3) {\r\n                    var b = fdeb[dsym];\r\n                    dt += bits16(dat, pos) & ((1 << b) - 1), pos += b;\r\n                }\r\n                if (pos > tbts) {\r\n                    if (noSt)\r\n                        throw 'unexpected EOF';\r\n                    break;\r\n                }\r\n                if (noBuf)\r\n                    cbuf(bt + 131072);\r\n                var end = bt + add;\r\n                for (; bt < end; bt += 4) {\r\n                    buf[bt] = buf[bt - dt];\r\n                    buf[bt + 1] = buf[bt + 1 - dt];\r\n                    buf[bt + 2] = buf[bt + 2 - dt];\r\n                    buf[bt + 3] = buf[bt + 3 - dt];\r\n                }\r\n                bt = end;\r\n            }\r\n        }\r\n        st.l = lm, st.p = lpos, st.b = bt;\r\n        if (lm)\r\n            final = 1, st.m = lbt, st.d = dm, st.n = dbt;\r\n    } while (!final);\r\n    return bt == buf.length ? buf : slc(buf, 0, bt);\r\n};\r\n// starting at p, write the minimum number of bits that can hold v to d\r\nvar wbits = function (d, p, v) {\r\n    v <<= p & 7;\r\n    var o = (p / 8) | 0;\r\n    d[o] |= v;\r\n    d[o + 1] |= v >>> 8;\r\n};\r\n// starting at p, write the minimum number of bits (>8) that can hold v to d\r\nvar wbits16 = function (d, p, v) {\r\n    v <<= p & 7;\r\n    var o = (p / 8) | 0;\r\n    d[o] |= v;\r\n    d[o + 1] |= v >>> 8;\r\n    d[o + 2] |= v >>> 16;\r\n};\r\n// creates code lengths from a frequency table\r\nvar hTree = function (d, mb) {\r\n    // Need extra info to make a tree\r\n    var t = [];\r\n    for (var i = 0; i < d.length; ++i) {\r\n        if (d[i])\r\n            t.push({ s: i, f: d[i] });\r\n    }\r\n    var s = t.length;\r\n    var t2 = t.slice();\r\n    if (!s)\r\n        return [et, 0];\r\n    if (s == 1) {\r\n        var v = new u8(t[0].s + 1);\r\n        v[t[0].s] = 1;\r\n        return [v, 1];\r\n    }\r\n    t.sort(function (a, b) { return a.f - b.f; });\r\n    // after i2 reaches last ind, will be stopped\r\n    // freq must be greater than largest possible number of symbols\r\n    t.push({ s: -1, f: 25001 });\r\n    var l = t[0], r = t[1], i0 = 0, i1 = 1, i2 = 2;\r\n    t[0] = { s: -1, f: l.f + r.f, l: l, r: r };\r\n    // efficient algorithm from UZIP.js\r\n    // i0 is lookbehind, i2 is lookahead - after processing two low-freq\r\n    // symbols that combined have high freq, will start processing i2 (high-freq,\r\n    // non-composite) symbols instead\r\n    // see https://reddit.com/r/photopea/comments/ikekht/uzipjs_questions/\r\n    while (i1 != s - 1) {\r\n        l = t[t[i0].f < t[i2].f ? i0++ : i2++];\r\n        r = t[i0 != i1 && t[i0].f < t[i2].f ? i0++ : i2++];\r\n        t[i1++] = { s: -1, f: l.f + r.f, l: l, r: r };\r\n    }\r\n    var maxSym = t2[0].s;\r\n    for (var i = 1; i < s; ++i) {\r\n        if (t2[i].s > maxSym)\r\n            maxSym = t2[i].s;\r\n    }\r\n    // code lengths\r\n    var tr = new u16(maxSym + 1);\r\n    // max bits in tree\r\n    var mbt = ln(t[i1 - 1], tr, 0);\r\n    if (mbt > mb) {\r\n        // more algorithms from UZIP.js\r\n        // TODO: find out how this code works (debt)\r\n        //  ind    debt\r\n        var i = 0, dt = 0;\r\n        //    left            cost\r\n        var lft = mbt - mb, cst = 1 << lft;\r\n        t2.sort(function (a, b) { return tr[b.s] - tr[a.s] || a.f - b.f; });\r\n        for (; i < s; ++i) {\r\n            var i2_1 = t2[i].s;\r\n            if (tr[i2_1] > mb) {\r\n                dt += cst - (1 << (mbt - tr[i2_1]));\r\n                tr[i2_1] = mb;\r\n            }\r\n            else\r\n                break;\r\n        }\r\n        dt >>>= lft;\r\n        while (dt > 0) {\r\n            var i2_2 = t2[i].s;\r\n            if (tr[i2_2] < mb)\r\n                dt -= 1 << (mb - tr[i2_2]++ - 1);\r\n            else\r\n                ++i;\r\n        }\r\n        for (; i >= 0 && dt; --i) {\r\n            var i2_3 = t2[i].s;\r\n            if (tr[i2_3] == mb) {\r\n                --tr[i2_3];\r\n                ++dt;\r\n            }\r\n        }\r\n        mbt = mb;\r\n    }\r\n    return [new u8(tr), mbt];\r\n};\r\n// get the max length and assign length codes\r\nvar ln = function (n, l, d) {\r\n    return n.s == -1\r\n        ? Math.max(ln(n.l, l, d + 1), ln(n.r, l, d + 1))\r\n        : (l[n.s] = d);\r\n};\r\n// length codes generation\r\nvar lc = function (c) {\r\n    var s = c.length;\r\n    // Note that the semicolon was intentional\r\n    while (s && !c[--s])\r\n        ;\r\n    var cl = new u16(++s);\r\n    //  ind      num         streak\r\n    var cli = 0, cln = c[0], cls = 1;\r\n    var w = function (v) { cl[cli++] = v; };\r\n    for (var i = 1; i <= s; ++i) {\r\n        if (c[i] == cln && i != s)\r\n            ++cls;\r\n        else {\r\n            if (!cln && cls > 2) {\r\n                for (; cls > 138; cls -= 138)\r\n                    w(32754);\r\n                if (cls > 2) {\r\n                    w(cls > 10 ? ((cls - 11) << 5) | 28690 : ((cls - 3) << 5) | 12305);\r\n                    cls = 0;\r\n                }\r\n            }\r\n            else if (cls > 3) {\r\n                w(cln), --cls;\r\n                for (; cls > 6; cls -= 6)\r\n                    w(8304);\r\n                if (cls > 2)\r\n                    w(((cls - 3) << 5) | 8208), cls = 0;\r\n            }\r\n            while (cls--)\r\n                w(cln);\r\n            cls = 1;\r\n            cln = c[i];\r\n        }\r\n    }\r\n    return [cl.subarray(0, cli), s];\r\n};\r\n// calculate the length of output from tree, code lengths\r\nvar clen = function (cf, cl) {\r\n    var l = 0;\r\n    for (var i = 0; i < cl.length; ++i)\r\n        l += cf[i] * cl[i];\r\n    return l;\r\n};\r\n// writes a fixed block\r\n// returns the new bit pos\r\nvar wfblk = function (out, pos, dat) {\r\n    // no need to write 00 as type: TypedArray defaults to 0\r\n    var s = dat.length;\r\n    var o = shft(pos + 2);\r\n    out[o] = s & 255;\r\n    out[o + 1] = s >>> 8;\r\n    out[o + 2] = out[o] ^ 255;\r\n    out[o + 3] = out[o + 1] ^ 255;\r\n    for (var i = 0; i < s; ++i)\r\n        out[o + i + 4] = dat[i];\r\n    return (o + 4 + s) * 8;\r\n};\r\n// writes a block\r\nvar wblk = function (dat, out, final, syms, lf, df, eb, li, bs, bl, p) {\r\n    wbits(out, p++, final);\r\n    ++lf[256];\r\n    var _a = hTree(lf, 15), dlt = _a[0], mlb = _a[1];\r\n    var _b = hTree(df, 15), ddt = _b[0], mdb = _b[1];\r\n    var _c = lc(dlt), lclt = _c[0], nlc = _c[1];\r\n    var _d = lc(ddt), lcdt = _d[0], ndc = _d[1];\r\n    var lcfreq = new u16(19);\r\n    for (var i = 0; i < lclt.length; ++i)\r\n        lcfreq[lclt[i] & 31]++;\r\n    for (var i = 0; i < lcdt.length; ++i)\r\n        lcfreq[lcdt[i] & 31]++;\r\n    var _e = hTree(lcfreq, 7), lct = _e[0], mlcb = _e[1];\r\n    var nlcc = 19;\r\n    for (; nlcc > 4 && !lct[clim[nlcc - 1]]; --nlcc)\r\n        ;\r\n    var flen = (bl + 5) << 3;\r\n    var ftlen = clen(lf, flt) + clen(df, fdt) + eb;\r\n    var dtlen = clen(lf, dlt) + clen(df, ddt) + eb + 14 + 3 * nlcc + clen(lcfreq, lct) + (2 * lcfreq[16] + 3 * lcfreq[17] + 7 * lcfreq[18]);\r\n    if (flen <= ftlen && flen <= dtlen)\r\n        return wfblk(out, p, dat.subarray(bs, bs + bl));\r\n    var lm, ll, dm, dl;\r\n    wbits(out, p, 1 + (dtlen < ftlen)), p += 2;\r\n    if (dtlen < ftlen) {\r\n        lm = hMap(dlt, mlb, 0), ll = dlt, dm = hMap(ddt, mdb, 0), dl = ddt;\r\n        var llm = hMap(lct, mlcb, 0);\r\n        wbits(out, p, nlc - 257);\r\n        wbits(out, p + 5, ndc - 1);\r\n        wbits(out, p + 10, nlcc - 4);\r\n        p += 14;\r\n        for (var i = 0; i < nlcc; ++i)\r\n            wbits(out, p + 3 * i, lct[clim[i]]);\r\n        p += 3 * nlcc;\r\n        var lcts = [lclt, lcdt];\r\n        for (var it = 0; it < 2; ++it) {\r\n            var clct = lcts[it];\r\n            for (var i = 0; i < clct.length; ++i) {\r\n                var len = clct[i] & 31;\r\n                wbits(out, p, llm[len]), p += lct[len];\r\n                if (len > 15)\r\n                    wbits(out, p, (clct[i] >>> 5) & 127), p += clct[i] >>> 12;\r\n            }\r\n        }\r\n    }\r\n    else {\r\n        lm = flm, ll = flt, dm = fdm, dl = fdt;\r\n    }\r\n    for (var i = 0; i < li; ++i) {\r\n        if (syms[i] > 255) {\r\n            var len = (syms[i] >>> 18) & 31;\r\n            wbits16(out, p, lm[len + 257]), p += ll[len + 257];\r\n            if (len > 7)\r\n                wbits(out, p, (syms[i] >>> 23) & 31), p += fleb[len];\r\n            var dst = syms[i] & 31;\r\n            wbits16(out, p, dm[dst]), p += dl[dst];\r\n            if (dst > 3)\r\n                wbits16(out, p, (syms[i] >>> 5) & 8191), p += fdeb[dst];\r\n        }\r\n        else {\r\n            wbits16(out, p, lm[syms[i]]), p += ll[syms[i]];\r\n        }\r\n    }\r\n    wbits16(out, p, lm[256]);\r\n    return p + ll[256];\r\n};\r\n// deflate options (nice << 13) | chain\r\nvar deo = /*#__PURE__*/ new u32([65540, 131080, 131088, 131104, 262176, 1048704, 1048832, 2114560, 2117632]);\r\n// empty\r\nvar et = /*#__PURE__*/ new u8(0);\r\n// compresses data into a raw DEFLATE buffer\r\nvar dflt = function (dat, lvl, plvl, pre, post, lst) {\r\n    var s = dat.length;\r\n    var o = new u8(pre + s + 5 * (1 + Math.ceil(s / 7000)) + post);\r\n    // writing to this writes to the output buffer\r\n    var w = o.subarray(pre, o.length - post);\r\n    var pos = 0;\r\n    if (!lvl || s < 8) {\r\n        for (var i = 0; i <= s; i += 65535) {\r\n            // end\r\n            var e = i + 65535;\r\n            if (e < s) {\r\n                // write full block\r\n                pos = wfblk(w, pos, dat.subarray(i, e));\r\n            }\r\n            else {\r\n                // write final block\r\n                w[i] = lst;\r\n                pos = wfblk(w, pos, dat.subarray(i, s));\r\n            }\r\n        }\r\n    }\r\n    else {\r\n        var opt = deo[lvl - 1];\r\n        var n = opt >>> 13, c = opt & 8191;\r\n        var msk_1 = (1 << plvl) - 1;\r\n        //    prev 2-byte val map    curr 2-byte val map\r\n        var prev = new u16(32768), head = new u16(msk_1 + 1);\r\n        var bs1_1 = Math.ceil(plvl / 3), bs2_1 = 2 * bs1_1;\r\n        var hsh = function (i) { return (dat[i] ^ (dat[i + 1] << bs1_1) ^ (dat[i + 2] << bs2_1)) & msk_1; };\r\n        // 24576 is an arbitrary number of maximum symbols per block\r\n        // 424 buffer for last block\r\n        var syms = new u32(25000);\r\n        // length/literal freq   distance freq\r\n        var lf = new u16(288), df = new u16(32);\r\n        //  l/lcnt  exbits  index  l/lind  waitdx  bitpos\r\n        var lc_1 = 0, eb = 0, i = 0, li = 0, wi = 0, bs = 0;\r\n        for (; i < s; ++i) {\r\n            // hash value\r\n            // deopt when i > s - 3 - at end, deopt acceptable\r\n            var hv = hsh(i);\r\n            // index mod 32768    previous index mod\r\n            var imod = i & 32767, pimod = head[hv];\r\n            prev[imod] = pimod;\r\n            head[hv] = imod;\r\n            // We always should modify head and prev, but only add symbols if\r\n            // this data is not yet processed (\"wait\" for wait index)\r\n            if (wi <= i) {\r\n                // bytes remaining\r\n                var rem = s - i;\r\n                if ((lc_1 > 7000 || li > 24576) && rem > 423) {\r\n                    pos = wblk(dat, w, 0, syms, lf, df, eb, li, bs, i - bs, pos);\r\n                    li = lc_1 = eb = 0, bs = i;\r\n                    for (var j = 0; j < 286; ++j)\r\n                        lf[j] = 0;\r\n                    for (var j = 0; j < 30; ++j)\r\n                        df[j] = 0;\r\n                }\r\n                //  len    dist   chain\r\n                var l = 2, d = 0, ch_1 = c, dif = (imod - pimod) & 32767;\r\n                if (rem > 2 && hv == hsh(i - dif)) {\r\n                    var maxn = Math.min(n, rem) - 1;\r\n                    var maxd = Math.min(32767, i);\r\n                    // max possible length\r\n                    // not capped at dif because decompressors implement \"rolling\" index population\r\n                    var ml = Math.min(258, rem);\r\n                    while (dif <= maxd && --ch_1 && imod != pimod) {\r\n                        if (dat[i + l] == dat[i + l - dif]) {\r\n                            var nl = 0;\r\n                            for (; nl < ml && dat[i + nl] == dat[i + nl - dif]; ++nl)\r\n                                ;\r\n                            if (nl > l) {\r\n                                l = nl, d = dif;\r\n                                // break out early when we reach \"nice\" (we are satisfied enough)\r\n                                if (nl > maxn)\r\n                                    break;\r\n                                // now, find the rarest 2-byte sequence within this\r\n                                // length of literals and search for that instead.\r\n                                // Much faster than just using the start\r\n                                var mmd = Math.min(dif, nl - 2);\r\n                                var md = 0;\r\n                                for (var j = 0; j < mmd; ++j) {\r\n                                    var ti = (i - dif + j + 32768) & 32767;\r\n                                    var pti = prev[ti];\r\n                                    var cd = (ti - pti + 32768) & 32767;\r\n                                    if (cd > md)\r\n                                        md = cd, pimod = ti;\r\n                                }\r\n                            }\r\n                        }\r\n                        // check the previous match\r\n                        imod = pimod, pimod = prev[imod];\r\n                        dif += (imod - pimod + 32768) & 32767;\r\n                    }\r\n                }\r\n                // d will be nonzero only when a match was found\r\n                if (d) {\r\n                    // store both dist and len data in one Uint32\r\n                    // Make sure this is recognized as a len/dist with 28th bit (2^28)\r\n                    syms[li++] = 268435456 | (revfl[l] << 18) | revfd[d];\r\n                    var lin = revfl[l] & 31, din = revfd[d] & 31;\r\n                    eb += fleb[lin] + fdeb[din];\r\n                    ++lf[257 + lin];\r\n                    ++df[din];\r\n                    wi = i + l;\r\n                    ++lc_1;\r\n                }\r\n                else {\r\n                    syms[li++] = dat[i];\r\n                    ++lf[dat[i]];\r\n                }\r\n            }\r\n        }\r\n        pos = wblk(dat, w, lst, syms, lf, df, eb, li, bs, i - bs, pos);\r\n        // this is the easiest way to avoid needing to maintain state\r\n        if (!lst && pos & 7)\r\n            pos = wfblk(w, pos + 1, et);\r\n    }\r\n    return slc(o, 0, pre + shft(pos) + post);\r\n};\r\n// CRC32 table\r\nvar crct = /*#__PURE__*/ (function () {\r\n    var t = new Int32Array(256);\r\n    for (var i = 0; i < 256; ++i) {\r\n        var c = i, k = 9;\r\n        while (--k)\r\n            c = ((c & 1) && -306674912) ^ (c >>> 1);\r\n        t[i] = c;\r\n    }\r\n    return t;\r\n})();\r\n// CRC32\r\nvar crc = function () {\r\n    var c = -1;\r\n    return {\r\n        p: function (d) {\r\n            // closures have awful performance\r\n            var cr = c;\r\n            for (var i = 0; i < d.length; ++i)\r\n                cr = crct[(cr & 255) ^ d[i]] ^ (cr >>> 8);\r\n            c = cr;\r\n        },\r\n        d: function () { return ~c; }\r\n    };\r\n};\r\n// Alder32\r\nvar adler = function () {\r\n    var a = 1, b = 0;\r\n    return {\r\n        p: function (d) {\r\n            // closures have awful performance\r\n            var n = a, m = b;\r\n            var l = d.length;\r\n            for (var i = 0; i != l;) {\r\n                var e = Math.min(i + 2655, l);\r\n                for (; i < e; ++i)\r\n                    m += n += d[i];\r\n                n = (n & 65535) + 15 * (n >> 16), m = (m & 65535) + 15 * (m >> 16);\r\n            }\r\n            a = n, b = m;\r\n        },\r\n        d: function () {\r\n            a %= 65521, b %= 65521;\r\n            return (a & 255) << 24 | (a >>> 8) << 16 | (b & 255) << 8 | (b >>> 8);\r\n        }\r\n    };\r\n};\r\n;\r\n// deflate with opts\r\nvar dopt = function (dat, opt, pre, post, st) {\r\n    return dflt(dat, opt.level == null ? 6 : opt.level, opt.mem == null ? Math.ceil(Math.max(8, Math.min(13, Math.log(dat.length))) * 1.5) : (12 + opt.mem), pre, post, !st);\r\n};\r\n// Walmart object spread\r\nvar mrg = function (a, b) {\r\n    var o = {};\r\n    for (var k in a)\r\n        o[k] = a[k];\r\n    for (var k in b)\r\n        o[k] = b[k];\r\n    return o;\r\n};\r\n// worker clone\r\n// This is possibly the craziest part of the entire codebase, despite how simple it may seem.\r\n// The only parameter to this function is a closure that returns an array of variables outside of the function scope.\r\n// We're going to try to figure out the variable names used in the closure as strings because that is crucial for workerization.\r\n// We will return an object mapping of true variable name to value (basically, the current scope as a JS object).\r\n// The reason we can't just use the original variable names is minifiers mangling the toplevel scope.\r\n// This took me three weeks to figure out how to do.\r\nvar wcln = function (fn, fnStr, td) {\r\n    var dt = fn();\r\n    var st = fn.toString();\r\n    var ks = st.slice(st.indexOf('[') + 1, st.lastIndexOf(']')).replace(/ /g, '').split(',');\r\n    for (var i = 0; i < dt.length; ++i) {\r\n        var v = dt[i], k = ks[i];\r\n        if (typeof v == 'function') {\r\n            fnStr += ';' + k + '=';\r\n            var st_1 = v.toString();\r\n            if (v.prototype) {\r\n                // for global objects\r\n                if (st_1.indexOf('[native code]') != -1) {\r\n                    var spInd = st_1.indexOf(' ', 8) + 1;\r\n                    fnStr += st_1.slice(spInd, st_1.indexOf('(', spInd));\r\n                }\r\n                else {\r\n                    fnStr += st_1;\r\n                    for (var t in v.prototype)\r\n                        fnStr += ';' + k + '.prototype.' + t + '=' + v.prototype[t].toString();\r\n                }\r\n            }\r\n            else\r\n                fnStr += st_1;\r\n        }\r\n        else\r\n            td[k] = v;\r\n    }\r\n    return [fnStr, td];\r\n};\r\nvar ch = [];\r\n// clone bufs\r\nvar cbfs = function (v) {\r\n    var tl = [];\r\n    for (var k in v) {\r\n        if (v[k] instanceof u8 || v[k] instanceof u16 || v[k] instanceof u32)\r\n            tl.push((v[k] = new v[k].constructor(v[k])).buffer);\r\n    }\r\n    return tl;\r\n};\r\n// use a worker to execute code\r\nvar wrkr = function (fns, init, id, cb) {\r\n    var _a;\r\n    if (!ch[id]) {\r\n        var fnStr = '', td_1 = {}, m = fns.length - 1;\r\n        for (var i = 0; i < m; ++i)\r\n            _a = wcln(fns[i], fnStr, td_1), fnStr = _a[0], td_1 = _a[1];\r\n        ch[id] = wcln(fns[m], fnStr, td_1);\r\n    }\r\n    var td = mrg({}, ch[id][1]);\r\n    return wk(ch[id][0] + ';onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage=' + init.toString() + '}', id, td, cbfs(td), cb);\r\n};\r\n// base async inflate fn\r\nvar bInflt = function () { return [u8, u16, u32, fleb, fdeb, clim, fl, fd, flrm, fdrm, rev, hMap, max, bits, bits16, shft, slc, inflt, inflateSync, pbf, gu8]; };\r\nvar bDflt = function () { return [u8, u16, u32, fleb, fdeb, clim, revfl, revfd, flm, flt, fdm, fdt, rev, deo, et, hMap, wbits, wbits16, hTree, ln, lc, clen, wfblk, wblk, shft, slc, dflt, dopt, deflateSync, pbf]; };\r\n// gzip extra\r\nvar gze = function () { return [gzh, gzhl, wbytes, crc, crct]; };\r\n// gunzip extra\r\nvar guze = function () { return [gzs, gzl]; };\r\n// zlib extra\r\nvar zle = function () { return [zlh, wbytes, adler]; };\r\n// unzlib extra\r\nvar zule = function () { return [zlv]; };\r\n// post buf\r\nvar pbf = function (msg) { return postMessage(msg, [msg.buffer]); };\r\n// get u8\r\nvar gu8 = function (o) { return o && o.size && new u8(o.size); };\r\n// async helper\r\nvar cbify = function (dat, opts, fns, init, id, cb) {\r\n    var w = wrkr(fns, init, id, function (err, dat) {\r\n        w.terminate();\r\n        cb(err, dat);\r\n    });\r\n    w.postMessage([dat, opts], opts.consume ? [dat.buffer] : []);\r\n    return function () { w.terminate(); };\r\n};\r\n// auto stream\r\nvar astrm = function (strm) {\r\n    strm.ondata = function (dat, final) { return postMessage([dat, final], [dat.buffer]); };\r\n    return function (ev) { return strm.push(ev.data[0], ev.data[1]); };\r\n};\r\n// async stream attach\r\nvar astrmify = function (fns, strm, opts, init, id) {\r\n    var t;\r\n    var w = wrkr(fns, init, id, function (err, dat) {\r\n        if (err)\r\n            w.terminate(), strm.ondata.call(strm, err);\r\n        else {\r\n            if (dat[1])\r\n                w.terminate();\r\n            strm.ondata.call(strm, err, dat[0], dat[1]);\r\n        }\r\n    });\r\n    w.postMessage(opts);\r\n    strm.push = function (d, f) {\r\n        if (t)\r\n            throw 'stream finished';\r\n        if (!strm.ondata)\r\n            throw 'no stream handler';\r\n        w.postMessage([d, t = f], [d.buffer]);\r\n    };\r\n    strm.terminate = function () { w.terminate(); };\r\n};\r\n// read 2 bytes\r\nvar b2 = function (d, b) { return d[b] | (d[b + 1] << 8); };\r\n// read 4 bytes\r\nvar b4 = function (d, b) { return (d[b] | (d[b + 1] << 8) | (d[b + 2] << 16) | (d[b + 3] << 24)) >>> 0; };\r\nvar b8 = function (d, b) { return b4(d, b) + (b4(d, b + 4) * 4294967296); };\r\n// write bytes\r\nvar wbytes = function (d, b, v) {\r\n    for (; v; ++b)\r\n        d[b] = v, v >>>= 8;\r\n};\r\n// gzip header\r\nvar gzh = function (c, o) {\r\n    var fn = o.filename;\r\n    c[0] = 31, c[1] = 139, c[2] = 8, c[8] = o.level < 2 ? 4 : o.level == 9 ? 2 : 0, c[9] = 3; // assume Unix\r\n    if (o.mtime != 0)\r\n        wbytes(c, 4, Math.floor(new Date(o.mtime || Date.now()) / 1000));\r\n    if (fn) {\r\n        c[3] = 8;\r\n        for (var i = 0; i <= fn.length; ++i)\r\n            c[i + 10] = fn.charCodeAt(i);\r\n    }\r\n};\r\n// gzip footer: -8 to -4 = CRC, -4 to -0 is length\r\n// gzip start\r\nvar gzs = function (d) {\r\n    if (d[0] != 31 || d[1] != 139 || d[2] != 8)\r\n        throw 'invalid gzip data';\r\n    var flg = d[3];\r\n    var st = 10;\r\n    if (flg & 4)\r\n        st += d[10] | (d[11] << 8) + 2;\r\n    for (var zs = (flg >> 3 & 1) + (flg >> 4 & 1); zs > 0; zs -= !d[st++])\r\n        ;\r\n    return st + (flg & 2);\r\n};\r\n// gzip length\r\nvar gzl = function (d) {\r\n    var l = d.length;\r\n    return ((d[l - 4] | d[l - 3] << 8 | d[l - 2] << 16) | (d[l - 1] << 24)) >>> 0;\r\n};\r\n// gzip header length\r\nvar gzhl = function (o) { return 10 + ((o.filename && (o.filename.length + 1)) || 0); };\r\n// zlib header\r\nvar zlh = function (c, o) {\r\n    var lv = o.level, fl = lv == 0 ? 0 : lv < 6 ? 1 : lv == 9 ? 3 : 2;\r\n    c[0] = 120, c[1] = (fl << 6) | (fl ? (32 - 2 * fl) : 1);\r\n};\r\n// zlib valid\r\nvar zlv = function (d) {\r\n    if ((d[0] & 15) != 8 || (d[0] >>> 4) > 7 || ((d[0] << 8 | d[1]) % 31))\r\n        throw 'invalid zlib data';\r\n    if (d[1] & 32)\r\n        throw 'invalid zlib data: preset dictionaries not supported';\r\n};\r\nfunction AsyncCmpStrm(opts, cb) {\r\n    if (!cb && typeof opts == 'function')\r\n        cb = opts, opts = {};\r\n    this.ondata = cb;\r\n    return opts;\r\n}\r\n// zlib footer: -4 to -0 is Adler32\r\n/**\r\n * Streaming DEFLATE compression\r\n */\r\nvar Deflate = /*#__PURE__*/ (function () {\r\n    function Deflate(opts, cb) {\r\n        if (!cb && typeof opts == 'function')\r\n            cb = opts, opts = {};\r\n        this.ondata = cb;\r\n        this.o = opts || {};\r\n    }\r\n    Deflate.prototype.p = function (c, f) {\r\n        this.ondata(dopt(c, this.o, 0, 0, !f), f);\r\n    };\r\n    /**\r\n     * Pushes a chunk to be deflated\r\n     * @param chunk The chunk to push\r\n     * @param final Whether this is the last chunk\r\n     */\r\n    Deflate.prototype.push = function (chunk, final) {\r\n        if (this.d)\r\n            throw 'stream finished';\r\n        if (!this.ondata)\r\n            throw 'no stream handler';\r\n        this.d = final;\r\n        this.p(chunk, final || false);\r\n    };\r\n    return Deflate;\r\n}());\r\nexport { Deflate };\r\n/**\r\n * Asynchronous streaming DEFLATE compression\r\n */\r\nvar AsyncDeflate = /*#__PURE__*/ (function () {\r\n    function AsyncDeflate(opts, cb) {\r\n        astrmify([\r\n            bDflt,\r\n            function () { return [astrm, Deflate]; }\r\n        ], this, AsyncCmpStrm.call(this, opts, cb), function (ev) {\r\n            var strm = new Deflate(ev.data);\r\n            onmessage = astrm(strm);\r\n        }, 6);\r\n    }\r\n    return AsyncDeflate;\r\n}());\r\nexport { AsyncDeflate };\r\nexport function deflate(data, opts, cb) {\r\n    if (!cb)\r\n        cb = opts, opts = {};\r\n    if (typeof cb != 'function')\r\n        throw 'no callback';\r\n    return cbify(data, opts, [\r\n        bDflt,\r\n    ], function (ev) { return pbf(deflateSync(ev.data[0], ev.data[1])); }, 0, cb);\r\n}\r\n/**\r\n * Compresses data with DEFLATE without any wrapper\r\n * @param data The data to compress\r\n * @param opts The compression options\r\n * @returns The deflated version of the data\r\n */\r\nexport function deflateSync(data, opts) {\r\n    return dopt(data, opts || {}, 0, 0);\r\n}\r\n/**\r\n * Streaming DEFLATE decompression\r\n */\r\nvar Inflate = /*#__PURE__*/ (function () {\r\n    /**\r\n     * Creates an inflation stream\r\n     * @param cb The callback to call whenever data is inflated\r\n     */\r\n    function Inflate(cb) {\r\n        this.s = {};\r\n        this.p = new u8(0);\r\n        this.ondata = cb;\r\n    }\r\n    Inflate.prototype.e = function (c) {\r\n        if (this.d)\r\n            throw 'stream finished';\r\n        if (!this.ondata)\r\n            throw 'no stream handler';\r\n        var l = this.p.length;\r\n        var n = new u8(l + c.length);\r\n        n.set(this.p), n.set(c, l), this.p = n;\r\n    };\r\n    Inflate.prototype.c = function (final) {\r\n        this.d = this.s.i = final || false;\r\n        var bts = this.s.b;\r\n        var dt = inflt(this.p, this.o, this.s);\r\n        this.ondata(slc(dt, bts, this.s.b), this.d);\r\n        this.o = slc(dt, this.s.b - 32768), this.s.b = this.o.length;\r\n        this.p = slc(this.p, (this.s.p / 8) | 0), this.s.p &= 7;\r\n    };\r\n    /**\r\n     * Pushes a chunk to be inflated\r\n     * @param chunk The chunk to push\r\n     * @param final Whether this is the final chunk\r\n     */\r\n    Inflate.prototype.push = function (chunk, final) {\r\n        this.e(chunk), this.c(final);\r\n    };\r\n    return Inflate;\r\n}());\r\nexport { Inflate };\r\n/**\r\n * Asynchronous streaming DEFLATE decompression\r\n */\r\nvar AsyncInflate = /*#__PURE__*/ (function () {\r\n    /**\r\n     * Creates an asynchronous inflation stream\r\n     * @param cb The callback to call whenever data is deflated\r\n     */\r\n    function AsyncInflate(cb) {\r\n        this.ondata = cb;\r\n        astrmify([\r\n            bInflt,\r\n            function () { return [astrm, Inflate]; }\r\n        ], this, 0, function () {\r\n            var strm = new Inflate();\r\n            onmessage = astrm(strm);\r\n        }, 7);\r\n    }\r\n    return AsyncInflate;\r\n}());\r\nexport { AsyncInflate };\r\nexport function inflate(data, opts, cb) {\r\n    if (!cb)\r\n        cb = opts, opts = {};\r\n    if (typeof cb != 'function')\r\n        throw 'no callback';\r\n    return cbify(data, opts, [\r\n        bInflt\r\n    ], function (ev) { return pbf(inflateSync(ev.data[0], gu8(ev.data[1]))); }, 1, cb);\r\n}\r\n/**\r\n * Expands DEFLATE data with no wrapper\r\n * @param data The data to decompress\r\n * @param out Where to write the data. Saves memory if you know the decompressed size and provide an output buffer of that length.\r\n * @returns The decompressed version of the data\r\n */\r\nexport function inflateSync(data, out) {\r\n    return inflt(data, out);\r\n}\r\n// before you yell at me for not just using extends, my reason is that TS inheritance is hard to workerize.\r\n/**\r\n * Streaming GZIP compression\r\n */\r\nvar Gzip = /*#__PURE__*/ (function () {\r\n    function Gzip(opts, cb) {\r\n        this.c = crc();\r\n        this.l = 0;\r\n        this.v = 1;\r\n        Deflate.call(this, opts, cb);\r\n    }\r\n    /**\r\n     * Pushes a chunk to be GZIPped\r\n     * @param chunk The chunk to push\r\n     * @param final Whether this is the last chunk\r\n     */\r\n    Gzip.prototype.push = function (chunk, final) {\r\n        Deflate.prototype.push.call(this, chunk, final);\r\n    };\r\n    Gzip.prototype.p = function (c, f) {\r\n        this.c.p(c);\r\n        this.l += c.length;\r\n        var raw = dopt(c, this.o, this.v && gzhl(this.o), f && 8, !f);\r\n        if (this.v)\r\n            gzh(raw, this.o), this.v = 0;\r\n        if (f)\r\n            wbytes(raw, raw.length - 8, this.c.d()), wbytes(raw, raw.length - 4, this.l);\r\n        this.ondata(raw, f);\r\n    };\r\n    return Gzip;\r\n}());\r\nexport { Gzip };\r\n/**\r\n * Asynchronous streaming GZIP compression\r\n */\r\nvar AsyncGzip = /*#__PURE__*/ (function () {\r\n    function AsyncGzip(opts, cb) {\r\n        astrmify([\r\n            bDflt,\r\n            gze,\r\n            function () { return [astrm, Deflate, Gzip]; }\r\n        ], this, AsyncCmpStrm.call(this, opts, cb), function (ev) {\r\n            var strm = new Gzip(ev.data);\r\n            onmessage = astrm(strm);\r\n        }, 8);\r\n    }\r\n    return AsyncGzip;\r\n}());\r\nexport { AsyncGzip };\r\nexport function gzip(data, opts, cb) {\r\n    if (!cb)\r\n        cb = opts, opts = {};\r\n    if (typeof cb != 'function')\r\n        throw 'no callback';\r\n    return cbify(data, opts, [\r\n        bDflt,\r\n        gze,\r\n        function () { return [gzipSync]; }\r\n    ], function (ev) { return pbf(gzipSync(ev.data[0], ev.data[1])); }, 2, cb);\r\n}\r\n/**\r\n * Compresses data with GZIP\r\n * @param data The data to compress\r\n * @param opts The compression options\r\n * @returns The gzipped version of the data\r\n */\r\nexport function gzipSync(data, opts) {\r\n    if (!opts)\r\n        opts = {};\r\n    var c = crc(), l = data.length;\r\n    c.p(data);\r\n    var d = dopt(data, opts, gzhl(opts), 8), s = d.length;\r\n    return gzh(d, opts), wbytes(d, s - 8, c.d()), wbytes(d, s - 4, l), d;\r\n}\r\n/**\r\n * Streaming GZIP decompression\r\n */\r\nvar Gunzip = /*#__PURE__*/ (function () {\r\n    /**\r\n     * Creates a GUNZIP stream\r\n     * @param cb The callback to call whenever data is inflated\r\n     */\r\n    function Gunzip(cb) {\r\n        this.v = 1;\r\n        Inflate.call(this, cb);\r\n    }\r\n    /**\r\n     * Pushes a chunk to be GUNZIPped\r\n     * @param chunk The chunk to push\r\n     * @param final Whether this is the last chunk\r\n     */\r\n    Gunzip.prototype.push = function (chunk, final) {\r\n        Inflate.prototype.e.call(this, chunk);\r\n        if (this.v) {\r\n            var s = this.p.length > 3 ? gzs(this.p) : 4;\r\n            if (s >= this.p.length && !final)\r\n                return;\r\n            this.p = this.p.subarray(s), this.v = 0;\r\n        }\r\n        if (final) {\r\n            if (this.p.length < 8)\r\n                throw 'invalid gzip stream';\r\n            this.p = this.p.subarray(0, -8);\r\n        }\r\n        // necessary to prevent TS from using the closure value\r\n        // This allows for workerization to function correctly\r\n        Inflate.prototype.c.call(this, final);\r\n    };\r\n    return Gunzip;\r\n}());\r\nexport { Gunzip };\r\n/**\r\n * Asynchronous streaming GZIP decompression\r\n */\r\nvar AsyncGunzip = /*#__PURE__*/ (function () {\r\n    /**\r\n     * Creates an asynchronous GUNZIP stream\r\n     * @param cb The callback to call whenever data is deflated\r\n     */\r\n    function AsyncGunzip(cb) {\r\n        this.ondata = cb;\r\n        astrmify([\r\n            bInflt,\r\n            guze,\r\n            function () { return [astrm, Inflate, Gunzip]; }\r\n        ], this, 0, function () {\r\n            var strm = new Gunzip();\r\n            onmessage = astrm(strm);\r\n        }, 9);\r\n    }\r\n    return AsyncGunzip;\r\n}());\r\nexport { AsyncGunzip };\r\nexport function gunzip(data, opts, cb) {\r\n    if (!cb)\r\n        cb = opts, opts = {};\r\n    if (typeof cb != 'function')\r\n        throw 'no callback';\r\n    return cbify(data, opts, [\r\n        bInflt,\r\n        guze,\r\n        function () { return [gunzipSync]; }\r\n    ], function (ev) { return pbf(gunzipSync(ev.data[0])); }, 3, cb);\r\n}\r\n/**\r\n * Expands GZIP data\r\n * @param data The data to decompress\r\n * @param out Where to write the data. GZIP already encodes the output size, so providing this doesn't save memory.\r\n * @returns The decompressed version of the data\r\n */\r\nexport function gunzipSync(data, out) {\r\n    return inflt(data.subarray(gzs(data), -8), out || new u8(gzl(data)));\r\n}\r\n/**\r\n * Streaming Zlib compression\r\n */\r\nvar Zlib = /*#__PURE__*/ (function () {\r\n    function Zlib(opts, cb) {\r\n        this.c = adler();\r\n        this.v = 1;\r\n        Deflate.call(this, opts, cb);\r\n    }\r\n    /**\r\n     * Pushes a chunk to be zlibbed\r\n     * @param chunk The chunk to push\r\n     * @param final Whether this is the last chunk\r\n     */\r\n    Zlib.prototype.push = function (chunk, final) {\r\n        Deflate.prototype.push.call(this, chunk, final);\r\n    };\r\n    Zlib.prototype.p = function (c, f) {\r\n        this.c.p(c);\r\n        var raw = dopt(c, this.o, this.v && 2, f && 4, !f);\r\n        if (this.v)\r\n            zlh(raw, this.o), this.v = 0;\r\n        if (f)\r\n            wbytes(raw, raw.length - 4, this.c.d());\r\n        this.ondata(raw, f);\r\n    };\r\n    return Zlib;\r\n}());\r\nexport { Zlib };\r\n/**\r\n * Asynchronous streaming Zlib compression\r\n */\r\nvar AsyncZlib = /*#__PURE__*/ (function () {\r\n    function AsyncZlib(opts, cb) {\r\n        astrmify([\r\n            bDflt,\r\n            zle,\r\n            function () { return [astrm, Deflate, Zlib]; }\r\n        ], this, AsyncCmpStrm.call(this, opts, cb), function (ev) {\r\n            var strm = new Zlib(ev.data);\r\n            onmessage = astrm(strm);\r\n        }, 10);\r\n    }\r\n    return AsyncZlib;\r\n}());\r\nexport { AsyncZlib };\r\nexport function zlib(data, opts, cb) {\r\n    if (!cb)\r\n        cb = opts, opts = {};\r\n    if (typeof cb != 'function')\r\n        throw 'no callback';\r\n    return cbify(data, opts, [\r\n        bDflt,\r\n        zle,\r\n        function () { return [zlibSync]; }\r\n    ], function (ev) { return pbf(zlibSync(ev.data[0], ev.data[1])); }, 4, cb);\r\n}\r\n/**\r\n * Compress data with Zlib\r\n * @param data The data to compress\r\n * @param opts The compression options\r\n * @returns The zlib-compressed version of the data\r\n */\r\nexport function zlibSync(data, opts) {\r\n    if (!opts)\r\n        opts = {};\r\n    var a = adler();\r\n    a.p(data);\r\n    var d = dopt(data, opts, 2, 4);\r\n    return zlh(d, opts), wbytes(d, d.length - 4, a.d()), d;\r\n}\r\n/**\r\n * Streaming Zlib decompression\r\n */\r\nvar Unzlib = /*#__PURE__*/ (function () {\r\n    /**\r\n     * Creates a Zlib decompression stream\r\n     * @param cb The callback to call whenever data is inflated\r\n     */\r\n    function Unzlib(cb) {\r\n        this.v = 1;\r\n        Inflate.call(this, cb);\r\n    }\r\n    /**\r\n     * Pushes a chunk to be unzlibbed\r\n     * @param chunk The chunk to push\r\n     * @param final Whether this is the last chunk\r\n     */\r\n    Unzlib.prototype.push = function (chunk, final) {\r\n        Inflate.prototype.e.call(this, chunk);\r\n        if (this.v) {\r\n            if (this.p.length < 2 && !final)\r\n                return;\r\n            this.p = this.p.subarray(2), this.v = 0;\r\n        }\r\n        if (final) {\r\n            if (this.p.length < 4)\r\n                throw 'invalid zlib stream';\r\n            this.p = this.p.subarray(0, -4);\r\n        }\r\n        // necessary to prevent TS from using the closure value\r\n        // This allows for workerization to function correctly\r\n        Inflate.prototype.c.call(this, final);\r\n    };\r\n    return Unzlib;\r\n}());\r\nexport { Unzlib };\r\n/**\r\n * Asynchronous streaming Zlib decompression\r\n */\r\nvar AsyncUnzlib = /*#__PURE__*/ (function () {\r\n    /**\r\n     * Creates an asynchronous Zlib decompression stream\r\n     * @param cb The callback to call whenever data is deflated\r\n     */\r\n    function AsyncUnzlib(cb) {\r\n        this.ondata = cb;\r\n        astrmify([\r\n            bInflt,\r\n            zule,\r\n            function () { return [astrm, Inflate, Unzlib]; }\r\n        ], this, 0, function () {\r\n            var strm = new Unzlib();\r\n            onmessage = astrm(strm);\r\n        }, 11);\r\n    }\r\n    return AsyncUnzlib;\r\n}());\r\nexport { AsyncUnzlib };\r\nexport function unzlib(data, opts, cb) {\r\n    if (!cb)\r\n        cb = opts, opts = {};\r\n    if (typeof cb != 'function')\r\n        throw 'no callback';\r\n    return cbify(data, opts, [\r\n        bInflt,\r\n        zule,\r\n        function () { return [unzlibSync]; }\r\n    ], function (ev) { return pbf(unzlibSync(ev.data[0], gu8(ev.data[1]))); }, 5, cb);\r\n}\r\n/**\r\n * Expands Zlib data\r\n * @param data The data to decompress\r\n * @param out Where to write the data. Saves memory if you know the decompressed size and provide an output buffer of that length.\r\n * @returns The decompressed version of the data\r\n */\r\nexport function unzlibSync(data, out) {\r\n    return inflt((zlv(data), data.subarray(2, -4)), out);\r\n}\r\n// Default algorithm for compression (used because having a known output size allows faster decompression)\r\nexport { gzip as compress, AsyncGzip as AsyncCompress };\r\n// Default algorithm for compression (used because having a known output size allows faster decompression)\r\nexport { gzipSync as compressSync, Gzip as Compress };\r\n/**\r\n * Streaming GZIP, Zlib, or raw DEFLATE decompression\r\n */\r\nvar Decompress = /*#__PURE__*/ (function () {\r\n    /**\r\n     * Creates a decompression stream\r\n     * @param cb The callback to call whenever data is decompressed\r\n     */\r\n    function Decompress(cb) {\r\n        this.G = Gunzip;\r\n        this.I = Inflate;\r\n        this.Z = Unzlib;\r\n        this.ondata = cb;\r\n    }\r\n    /**\r\n     * Pushes a chunk to be decompressed\r\n     * @param chunk The chunk to push\r\n     * @param final Whether this is the last chunk\r\n     */\r\n    Decompress.prototype.push = function (chunk, final) {\r\n        if (!this.ondata)\r\n            throw 'no stream handler';\r\n        if (!this.s) {\r\n            if (this.p && this.p.length) {\r\n                var n = new u8(this.p.length + chunk.length);\r\n                n.set(this.p), n.set(chunk, this.p.length);\r\n            }\r\n            else\r\n                this.p = chunk;\r\n            if (this.p.length > 2) {\r\n                var _this_1 = this;\r\n                var cb = function () { _this_1.ondata.apply(_this_1, arguments); };\r\n                this.s = (this.p[0] == 31 && this.p[1] == 139 && this.p[2] == 8)\r\n                    ? new this.G(cb)\r\n                    : ((this.p[0] & 15) != 8 || (this.p[0] >> 4) > 7 || ((this.p[0] << 8 | this.p[1]) % 31))\r\n                        ? new this.I(cb)\r\n                        : new this.Z(cb);\r\n                this.s.push(this.p, final);\r\n                this.p = null;\r\n            }\r\n        }\r\n        else\r\n            this.s.push(chunk, final);\r\n    };\r\n    return Decompress;\r\n}());\r\nexport { Decompress };\r\n/**\r\n * Asynchronous streaming GZIP, Zlib, or raw DEFLATE decompression\r\n */\r\nvar AsyncDecompress = /*#__PURE__*/ (function () {\r\n    /**\r\n   * Creates an asynchronous decompression stream\r\n   * @param cb The callback to call whenever data is decompressed\r\n   */\r\n    function AsyncDecompress(cb) {\r\n        this.G = AsyncGunzip;\r\n        this.I = AsyncInflate;\r\n        this.Z = AsyncUnzlib;\r\n        this.ondata = cb;\r\n    }\r\n    /**\r\n     * Pushes a chunk to be decompressed\r\n     * @param chunk The chunk to push\r\n     * @param final Whether this is the last chunk\r\n     */\r\n    AsyncDecompress.prototype.push = function (chunk, final) {\r\n        Decompress.prototype.push.call(this, chunk, final);\r\n    };\r\n    return AsyncDecompress;\r\n}());\r\nexport { AsyncDecompress };\r\nexport function decompress(data, opts, cb) {\r\n    if (!cb)\r\n        cb = opts, opts = {};\r\n    if (typeof cb != 'function')\r\n        throw 'no callback';\r\n    return (data[0] == 31 && data[1] == 139 && data[2] == 8)\r\n        ? gunzip(data, opts, cb)\r\n        : ((data[0] & 15) != 8 || (data[0] >> 4) > 7 || ((data[0] << 8 | data[1]) % 31))\r\n            ? inflate(data, opts, cb)\r\n            : unzlib(data, opts, cb);\r\n}\r\n/**\r\n * Expands compressed GZIP, Zlib, or raw DEFLATE data, automatically detecting the format\r\n * @param data The data to decompress\r\n * @param out Where to write the data. Saves memory if you know the decompressed size and provide an output buffer of that length.\r\n * @returns The decompressed version of the data\r\n */\r\nexport function decompressSync(data, out) {\r\n    return (data[0] == 31 && data[1] == 139 && data[2] == 8)\r\n        ? gunzipSync(data, out)\r\n        : ((data[0] & 15) != 8 || (data[0] >> 4) > 7 || ((data[0] << 8 | data[1]) % 31))\r\n            ? inflateSync(data, out)\r\n            : unzlibSync(data, out);\r\n}\r\n// flatten a directory structure\r\nvar fltn = function (d, p, t, o) {\r\n    for (var k in d) {\r\n        var val = d[k], n = p + k;\r\n        if (val instanceof u8)\r\n            t[n] = [val, o];\r\n        else if (Array.isArray(val))\r\n            t[n] = [val[0], mrg(o, val[1])];\r\n        else\r\n            fltn(val, n + '/', t, o);\r\n    }\r\n};\r\n// text encoder\r\nvar te = typeof TextEncoder != 'undefined' && /*#__PURE__*/ new TextEncoder();\r\n// text decoder\r\nvar td = typeof TextDecoder != 'undefined' && /*#__PURE__*/ new TextDecoder();\r\n// text decoder stream\r\nvar tds = 0;\r\ntry {\r\n    td.decode(et, { stream: true });\r\n    tds = 1;\r\n}\r\ncatch (e) { }\r\n// decode UTF8\r\nvar dutf8 = function (d) {\r\n    for (var r = '', i = 0;;) {\r\n        var c = d[i++];\r\n        var eb = (c > 127) + (c > 223) + (c > 239);\r\n        if (i + eb > d.length)\r\n            return [r, slc(d, i - 1)];\r\n        if (!eb)\r\n            r += String.fromCharCode(c);\r\n        else if (eb == 3) {\r\n            c = ((c & 15) << 18 | (d[i++] & 63) << 12 | (d[i++] & 63) << 6 | (d[i++] & 63)) - 65536,\r\n                r += String.fromCharCode(55296 | (c >> 10), 56320 | (c & 1023));\r\n        }\r\n        else if (eb & 1)\r\n            r += String.fromCharCode((c & 31) << 6 | (d[i++] & 63));\r\n        else\r\n            r += String.fromCharCode((c & 15) << 12 | (d[i++] & 63) << 6 | (d[i++] & 63));\r\n    }\r\n};\r\n/**\r\n * Streaming UTF-8 decoding\r\n */\r\nvar DecodeUTF8 = /*#__PURE__*/ (function () {\r\n    /**\r\n     * Creates a UTF-8 decoding stream\r\n     * @param cb The callback to call whenever data is decoded\r\n     */\r\n    function DecodeUTF8(cb) {\r\n        this.ondata = cb;\r\n        if (tds)\r\n            this.t = new TextDecoder();\r\n        else\r\n            this.p = et;\r\n    }\r\n    /**\r\n     * Pushes a chunk to be decoded from UTF-8 binary\r\n     * @param chunk The chunk to push\r\n     * @param final Whether this is the last chunk\r\n     */\r\n    DecodeUTF8.prototype.push = function (chunk, final) {\r\n        if (!this.ondata)\r\n            throw 'no callback';\r\n        final = !!final;\r\n        if (this.t) {\r\n            this.ondata(this.t.decode(chunk, { stream: true }), final);\r\n            if (final) {\r\n                if (this.t.decode().length)\r\n                    throw 'invalid utf-8 data';\r\n                this.t = null;\r\n            }\r\n            return;\r\n        }\r\n        if (!this.p)\r\n            throw 'stream finished';\r\n        var dat = new u8(this.p.length + chunk.length);\r\n        dat.set(this.p);\r\n        dat.set(chunk, this.p.length);\r\n        var _a = dutf8(dat), ch = _a[0], np = _a[1];\r\n        if (final) {\r\n            if (np.length)\r\n                throw 'invalid utf-8 data';\r\n            this.p = null;\r\n        }\r\n        else\r\n            this.p = np;\r\n        this.ondata(ch, final);\r\n    };\r\n    return DecodeUTF8;\r\n}());\r\nexport { DecodeUTF8 };\r\n/**\r\n * Streaming UTF-8 encoding\r\n */\r\nvar EncodeUTF8 = /*#__PURE__*/ (function () {\r\n    /**\r\n     * Creates a UTF-8 decoding stream\r\n     * @param cb The callback to call whenever data is encoded\r\n     */\r\n    function EncodeUTF8(cb) {\r\n        this.ondata = cb;\r\n    }\r\n    /**\r\n     * Pushes a chunk to be encoded to UTF-8\r\n     * @param chunk The string data to push\r\n     * @param final Whether this is the last chunk\r\n     */\r\n    EncodeUTF8.prototype.push = function (chunk, final) {\r\n        if (!this.ondata)\r\n            throw 'no callback';\r\n        if (this.d)\r\n            throw 'stream finished';\r\n        this.ondata(strToU8(chunk), this.d = final || false);\r\n    };\r\n    return EncodeUTF8;\r\n}());\r\nexport { EncodeUTF8 };\r\n/**\r\n * Converts a string into a Uint8Array for use with compression/decompression methods\r\n * @param str The string to encode\r\n * @param latin1 Whether or not to interpret the data as Latin-1. This should\r\n *               not need to be true unless decoding a binary string.\r\n * @returns The string encoded in UTF-8/Latin-1 binary\r\n */\r\nexport function strToU8(str, latin1) {\r\n    if (latin1) {\r\n        var ar_1 = new u8(str.length);\r\n        for (var i = 0; i < str.length; ++i)\r\n            ar_1[i] = str.charCodeAt(i);\r\n        return ar_1;\r\n    }\r\n    if (te)\r\n        return te.encode(str);\r\n    var l = str.length;\r\n    var ar = new u8(str.length + (str.length >> 1));\r\n    var ai = 0;\r\n    var w = function (v) { ar[ai++] = v; };\r\n    for (var i = 0; i < l; ++i) {\r\n        if (ai + 5 > ar.length) {\r\n            var n = new u8(ai + 8 + ((l - i) << 1));\r\n            n.set(ar);\r\n            ar = n;\r\n        }\r\n        var c = str.charCodeAt(i);\r\n        if (c < 128 || latin1)\r\n            w(c);\r\n        else if (c < 2048)\r\n            w(192 | (c >> 6)), w(128 | (c & 63));\r\n        else if (c > 55295 && c < 57344)\r\n            c = 65536 + (c & 1023 << 10) | (str.charCodeAt(++i) & 1023),\r\n                w(240 | (c >> 18)), w(128 | ((c >> 12) & 63)), w(128 | ((c >> 6) & 63)), w(128 | (c & 63));\r\n        else\r\n            w(224 | (c >> 12)), w(128 | ((c >> 6) & 63)), w(128 | (c & 63));\r\n    }\r\n    return slc(ar, 0, ai);\r\n}\r\n/**\r\n * Converts a Uint8Array to a string\r\n * @param dat The data to decode to string\r\n * @param latin1 Whether or not to interpret the data as Latin-1. This should\r\n *               not need to be true unless encoding to binary string.\r\n * @returns The original UTF-8/Latin-1 string\r\n */\r\nexport function strFromU8(dat, latin1) {\r\n    if (latin1) {\r\n        var r = '';\r\n        for (var i = 0; i < dat.length; i += 16384)\r\n            r += String.fromCharCode.apply(null, dat.subarray(i, i + 16384));\r\n        return r;\r\n    }\r\n    else if (td)\r\n        return td.decode(dat);\r\n    else {\r\n        var _a = dutf8(dat), out = _a[0], ext = _a[1];\r\n        if (ext.length)\r\n            throw 'invalid utf-8 data';\r\n        return out;\r\n    }\r\n}\r\n;\r\n// deflate bit flag\r\nvar dbf = function (l) { return l == 1 ? 3 : l < 6 ? 2 : l == 9 ? 1 : 0; };\r\n// skip local zip header\r\nvar slzh = function (d, b) { return b + 30 + b2(d, b + 26) + b2(d, b + 28); };\r\n// read zip header\r\nvar zh = function (d, b, z) {\r\n    var fnl = b2(d, b + 28), fn = strFromU8(d.subarray(b + 46, b + 46 + fnl), !(b2(d, b + 8) & 2048)), es = b + 46 + fnl, bs = b4(d, b + 20);\r\n    var _a = z && bs == 4294967295 ? z64e(d, es) : [bs, b4(d, b + 24), b4(d, b + 42)], sc = _a[0], su = _a[1], off = _a[2];\r\n    return [b2(d, b + 10), sc, su, fn, es + b2(d, b + 30) + b2(d, b + 32), off];\r\n};\r\n// read zip64 extra field\r\nvar z64e = function (d, b) {\r\n    for (; b2(d, b) != 1; b += 4 + b2(d, b + 2))\r\n        ;\r\n    return [b8(d, b + 12), b8(d, b + 4), b8(d, b + 20)];\r\n};\r\n// extra field length\r\nvar exfl = function (ex) {\r\n    var le = 0;\r\n    if (ex) {\r\n        for (var k in ex) {\r\n            var l = ex[k].length;\r\n            if (l > 65535)\r\n                throw 'extra field too long';\r\n            le += l + 4;\r\n        }\r\n    }\r\n    return le;\r\n};\r\n// write zip header\r\nvar wzh = function (d, b, f, fn, u, c, ce, co) {\r\n    var fl = fn.length, ex = f.extra, col = co && co.length;\r\n    var exl = exfl(ex);\r\n    wbytes(d, b, ce != null ? 0x2014B50 : 0x4034B50), b += 4;\r\n    if (ce != null)\r\n        d[b++] = 20, d[b++] = f.os;\r\n    d[b] = 20, b += 2; // spec compliance? what's that?\r\n    d[b++] = (f.flag << 1) | (c == null && 8), d[b++] = u && 8;\r\n    d[b++] = f.compression & 255, d[b++] = f.compression >> 8;\r\n    var dt = new Date(f.mtime == null ? Date.now() : f.mtime), y = dt.getFullYear() - 1980;\r\n    if (y < 0 || y > 119)\r\n        throw 'date not in range 1980-2099';\r\n    wbytes(d, b, (y << 25) | ((dt.getMonth() + 1) << 21) | (dt.getDate() << 16) | (dt.getHours() << 11) | (dt.getMinutes() << 5) | (dt.getSeconds() >>> 1)), b += 4;\r\n    if (c != null) {\r\n        wbytes(d, b, f.crc);\r\n        wbytes(d, b + 4, c);\r\n        wbytes(d, b + 8, f.size);\r\n    }\r\n    wbytes(d, b + 12, fl);\r\n    wbytes(d, b + 14, exl), b += 16;\r\n    if (ce != null) {\r\n        wbytes(d, b, col);\r\n        wbytes(d, b + 6, f.attrs);\r\n        wbytes(d, b + 10, ce), b += 14;\r\n    }\r\n    d.set(fn, b);\r\n    b += fl;\r\n    if (exl) {\r\n        for (var k in ex) {\r\n            var exf = ex[k], l = exf.length;\r\n            wbytes(d, b, +k);\r\n            wbytes(d, b + 2, l);\r\n            d.set(exf, b + 4), b += 4 + l;\r\n        }\r\n    }\r\n    if (col)\r\n        d.set(co, b), b += col;\r\n    return b;\r\n};\r\n// write zip footer (end of central directory)\r\nvar wzf = function (o, b, c, d, e) {\r\n    wbytes(o, b, 0x6054B50); // skip disk\r\n    wbytes(o, b + 8, c);\r\n    wbytes(o, b + 10, c);\r\n    wbytes(o, b + 12, d);\r\n    wbytes(o, b + 16, e);\r\n};\r\n/**\r\n * A pass-through stream to keep data uncompressed in a ZIP archive.\r\n */\r\nvar ZipPassThrough = /*#__PURE__*/ (function () {\r\n    /**\r\n     * Creates a pass-through stream that can be added to ZIP archives\r\n     * @param filename The filename to associate with this data stream\r\n     */\r\n    function ZipPassThrough(filename) {\r\n        this.filename = filename;\r\n        this.c = crc();\r\n        this.size = 0;\r\n        this.compression = 0;\r\n    }\r\n    /**\r\n     * Processes a chunk and pushes to the output stream. You can override this\r\n     * method in a subclass for custom behavior, but by default this passes\r\n     * the data through. You must call this.ondata(err, chunk, final) at some\r\n     * point in this method.\r\n     * @param chunk The chunk to process\r\n     * @param final Whether this is the last chunk\r\n     */\r\n    ZipPassThrough.prototype.process = function (chunk, final) {\r\n        this.ondata(null, chunk, final);\r\n    };\r\n    /**\r\n     * Pushes a chunk to be added. If you are subclassing this with a custom\r\n     * compression algorithm, note that you must push data from the source\r\n     * file only, pre-compression.\r\n     * @param chunk The chunk to push\r\n     * @param final Whether this is the last chunk\r\n     */\r\n    ZipPassThrough.prototype.push = function (chunk, final) {\r\n        if (!this.ondata)\r\n            throw 'no callback - add to ZIP archive before pushing';\r\n        this.c.p(chunk);\r\n        this.size += chunk.length;\r\n        if (final)\r\n            this.crc = this.c.d();\r\n        this.process(chunk, final || false);\r\n    };\r\n    return ZipPassThrough;\r\n}());\r\nexport { ZipPassThrough };\r\n// I don't extend because TypeScript extension adds 1kB of runtime bloat\r\n/**\r\n * Streaming DEFLATE compression for ZIP archives. Prefer using AsyncZipDeflate\r\n * for better performance\r\n */\r\nvar ZipDeflate = /*#__PURE__*/ (function () {\r\n    /**\r\n     * Creates a DEFLATE stream that can be added to ZIP archives\r\n     * @param filename The filename to associate with this data stream\r\n     * @param opts The compression options\r\n     */\r\n    function ZipDeflate(filename, opts) {\r\n        var _this_1 = this;\r\n        if (!opts)\r\n            opts = {};\r\n        ZipPassThrough.call(this, filename);\r\n        this.d = new Deflate(opts, function (dat, final) {\r\n            _this_1.ondata(null, dat, final);\r\n        });\r\n        this.compression = 8;\r\n        this.flag = dbf(opts.level);\r\n    }\r\n    ZipDeflate.prototype.process = function (chunk, final) {\r\n        try {\r\n            this.d.push(chunk, final);\r\n        }\r\n        catch (e) {\r\n            this.ondata(e, null, final);\r\n        }\r\n    };\r\n    /**\r\n     * Pushes a chunk to be deflated\r\n     * @param chunk The chunk to push\r\n     * @param final Whether this is the last chunk\r\n     */\r\n    ZipDeflate.prototype.push = function (chunk, final) {\r\n        ZipPassThrough.prototype.push.call(this, chunk, final);\r\n    };\r\n    return ZipDeflate;\r\n}());\r\nexport { ZipDeflate };\r\n/**\r\n * Asynchronous streaming DEFLATE compression for ZIP archives\r\n */\r\nvar AsyncZipDeflate = /*#__PURE__*/ (function () {\r\n    /**\r\n     * Creates a DEFLATE stream that can be added to ZIP archives\r\n     * @param filename The filename to associate with this data stream\r\n     * @param opts The compression options\r\n     */\r\n    function AsyncZipDeflate(filename, opts) {\r\n        var _this_1 = this;\r\n        if (!opts)\r\n            opts = {};\r\n        ZipPassThrough.call(this, filename);\r\n        this.d = new AsyncDeflate(opts, function (err, dat, final) {\r\n            _this_1.ondata(err, dat, final);\r\n        });\r\n        this.compression = 8;\r\n        this.flag = dbf(opts.level);\r\n        this.terminate = this.d.terminate;\r\n    }\r\n    AsyncZipDeflate.prototype.process = function (chunk, final) {\r\n        this.d.push(chunk, final);\r\n    };\r\n    /**\r\n     * Pushes a chunk to be deflated\r\n     * @param chunk The chunk to push\r\n     * @param final Whether this is the last chunk\r\n     */\r\n    AsyncZipDeflate.prototype.push = function (chunk, final) {\r\n        ZipPassThrough.prototype.push.call(this, chunk, final);\r\n    };\r\n    return AsyncZipDeflate;\r\n}());\r\nexport { AsyncZipDeflate };\r\n// TODO: Better tree shaking\r\n/**\r\n * A zippable archive to which files can incrementally be added\r\n */\r\nvar Zip = /*#__PURE__*/ (function () {\r\n    /**\r\n     * Creates an empty ZIP archive to which files can be added\r\n     * @param cb The callback to call whenever data for the generated ZIP archive\r\n     *           is available\r\n     */\r\n    function Zip(cb) {\r\n        this.ondata = cb;\r\n        this.u = [];\r\n        this.d = 1;\r\n    }\r\n    /**\r\n     * Adds a file to the ZIP archive\r\n     * @param file The file stream to add\r\n     */\r\n    Zip.prototype.add = function (file) {\r\n        var _this_1 = this;\r\n        if (this.d & 2)\r\n            throw 'stream finished';\r\n        var f = strToU8(file.filename), fl = f.length;\r\n        var com = file.comment, o = com && strToU8(com);\r\n        var u = fl != file.filename.length || (o && (com.length != o.length));\r\n        var hl = fl + exfl(file.extra) + 30;\r\n        if (fl > 65535)\r\n            throw 'filename too long';\r\n        var header = new u8(hl);\r\n        wzh(header, 0, file, f, u);\r\n        var chks = [header];\r\n        var pAll = function () {\r\n            for (var _i = 0, chks_1 = chks; _i < chks_1.length; _i++) {\r\n                var chk = chks_1[_i];\r\n                _this_1.ondata(null, chk, false);\r\n            }\r\n            chks = [];\r\n        };\r\n        var tr = this.d;\r\n        this.d = 0;\r\n        var ind = this.u.length;\r\n        var uf = mrg(file, {\r\n            f: f,\r\n            u: u,\r\n            o: o,\r\n            t: function () {\r\n                if (file.terminate)\r\n                    file.terminate();\r\n            },\r\n            r: function () {\r\n                pAll();\r\n                if (tr) {\r\n                    var nxt = _this_1.u[ind + 1];\r\n                    if (nxt)\r\n                        nxt.r();\r\n                    else\r\n                        _this_1.d = 1;\r\n                }\r\n                tr = 1;\r\n            }\r\n        });\r\n        var cl = 0;\r\n        file.ondata = function (err, dat, final) {\r\n            if (err) {\r\n                _this_1.ondata(err, dat, final);\r\n                _this_1.terminate();\r\n            }\r\n            else {\r\n                cl += dat.length;\r\n                chks.push(dat);\r\n                if (final) {\r\n                    var dd = new u8(16);\r\n                    wbytes(dd, 0, 0x8074B50);\r\n                    wbytes(dd, 4, file.crc);\r\n                    wbytes(dd, 8, cl);\r\n                    wbytes(dd, 12, file.size);\r\n                    chks.push(dd);\r\n                    uf.c = cl, uf.b = hl + cl + 16, uf.crc = file.crc, uf.size = file.size;\r\n                    if (tr)\r\n                        uf.r();\r\n                    tr = 1;\r\n                }\r\n                else if (tr)\r\n                    pAll();\r\n            }\r\n        };\r\n        this.u.push(uf);\r\n    };\r\n    /**\r\n     * Ends the process of adding files and prepares to emit the final chunks.\r\n     * This *must* be called after adding all desired files for the resulting\r\n     * ZIP file to work properly.\r\n     */\r\n    Zip.prototype.end = function () {\r\n        var _this_1 = this;\r\n        if (this.d & 2) {\r\n            if (this.d & 1)\r\n                throw 'stream finishing';\r\n            throw 'stream finished';\r\n        }\r\n        if (this.d)\r\n            this.e();\r\n        else\r\n            this.u.push({\r\n                r: function () {\r\n                    if (!(_this_1.d & 1))\r\n                        return;\r\n                    _this_1.u.splice(-1, 1);\r\n                    _this_1.e();\r\n                },\r\n                t: function () { }\r\n            });\r\n        this.d = 3;\r\n    };\r\n    Zip.prototype.e = function () {\r\n        var bt = 0, l = 0, tl = 0;\r\n        for (var _i = 0, _a = this.u; _i < _a.length; _i++) {\r\n            var f = _a[_i];\r\n            tl += 46 + f.f.length + exfl(f.extra) + (f.o ? f.o.length : 0);\r\n        }\r\n        var out = new u8(tl + 22);\r\n        for (var _b = 0, _c = this.u; _b < _c.length; _b++) {\r\n            var f = _c[_b];\r\n            wzh(out, bt, f, f.f, f.u, f.c, l, f.o);\r\n            bt += 46 + f.f.length + exfl(f.extra) + (f.o ? f.o.length : 0), l += f.b;\r\n        }\r\n        wzf(out, bt, this.u.length, tl, l);\r\n        this.ondata(null, out, true);\r\n        this.d = 2;\r\n    };\r\n    /**\r\n     * A method to terminate any internal workers used by the stream. Subsequent\r\n     * calls to add() will fail.\r\n     */\r\n    Zip.prototype.terminate = function () {\r\n        for (var _i = 0, _a = this.u; _i < _a.length; _i++) {\r\n            var f = _a[_i];\r\n            f.t();\r\n        }\r\n        this.d = 2;\r\n    };\r\n    return Zip;\r\n}());\r\nexport { Zip };\r\nexport function zip(data, opts, cb) {\r\n    if (!cb)\r\n        cb = opts, opts = {};\r\n    if (typeof cb != 'function')\r\n        throw 'no callback';\r\n    var r = {};\r\n    fltn(data, '', r, opts);\r\n    var k = Object.keys(r);\r\n    var lft = k.length, o = 0, tot = 0;\r\n    var slft = lft, files = new Array(lft);\r\n    var term = [];\r\n    var tAll = function () {\r\n        for (var i = 0; i < term.length; ++i)\r\n            term[i]();\r\n    };\r\n    var cbf = function () {\r\n        var out = new u8(tot + 22), oe = o, cdl = tot - o;\r\n        tot = 0;\r\n        for (var i = 0; i < slft; ++i) {\r\n            var f = files[i];\r\n            try {\r\n                var l = f.c.length;\r\n                wzh(out, tot, f, f.f, f.u, l);\r\n                var badd = 30 + f.f.length + exfl(f.extra);\r\n                var loc = tot + badd;\r\n                out.set(f.c, loc);\r\n                wzh(out, o, f, f.f, f.u, l, tot, f.m), o += 16 + badd + (f.m ? f.m.length : 0), tot = loc + l;\r\n            }\r\n            catch (e) {\r\n                return cb(e, null);\r\n            }\r\n        }\r\n        wzf(out, o, files.length, cdl, oe);\r\n        cb(null, out);\r\n    };\r\n    if (!lft)\r\n        cbf();\r\n    var _loop_1 = function (i) {\r\n        var fn = k[i];\r\n        var _a = r[fn], file = _a[0], p = _a[1];\r\n        var c = crc(), size = file.length;\r\n        c.p(file);\r\n        var f = strToU8(fn), s = f.length;\r\n        var com = p.comment, m = com && strToU8(com), ms = m && m.length;\r\n        var exl = exfl(p.extra);\r\n        var compression = p.level == 0 ? 0 : 8;\r\n        var cbl = function (e, d) {\r\n            if (e) {\r\n                tAll();\r\n                cb(e, null);\r\n            }\r\n            else {\r\n                var l = d.length;\r\n                files[i] = mrg(p, {\r\n                    size: size,\r\n                    crc: c.d(),\r\n                    c: d,\r\n                    f: f,\r\n                    m: m,\r\n                    u: s != fn.length || (m && (com.length != ms)),\r\n                    compression: compression\r\n                });\r\n                o += 30 + s + exl + l;\r\n                tot += 76 + 2 * (s + exl) + (ms || 0) + l;\r\n                if (!--lft)\r\n                    cbf();\r\n            }\r\n        };\r\n        if (s > 65535)\r\n            cbl('filename too long', null);\r\n        if (!compression)\r\n            cbl(null, file);\r\n        else if (size < 160000) {\r\n            try {\r\n                cbl(null, deflateSync(file, p));\r\n            }\r\n            catch (e) {\r\n                cbl(e, null);\r\n            }\r\n        }\r\n        else\r\n            term.push(deflate(file, p, cbl));\r\n    };\r\n    // Cannot use lft because it can decrease\r\n    for (var i = 0; i < slft; ++i) {\r\n        _loop_1(i);\r\n    }\r\n    return tAll;\r\n}\r\n/**\r\n * Synchronously creates a ZIP file. Prefer using `zip` for better performance\r\n * with more than one file.\r\n * @param data The directory structure for the ZIP archive\r\n * @param opts The main options, merged with per-file options\r\n * @returns The generated ZIP archive\r\n */\r\nexport function zipSync(data, opts) {\r\n    if (!opts)\r\n        opts = {};\r\n    var r = {};\r\n    var files = [];\r\n    fltn(data, '', r, opts);\r\n    var o = 0;\r\n    var tot = 0;\r\n    for (var fn in r) {\r\n        var _a = r[fn], file = _a[0], p = _a[1];\r\n        var compression = p.level == 0 ? 0 : 8;\r\n        var f = strToU8(fn), s = f.length;\r\n        var com = p.comment, m = com && strToU8(com), ms = m && m.length;\r\n        var exl = exfl(p.extra);\r\n        if (s > 65535)\r\n            throw 'filename too long';\r\n        var d = compression ? deflateSync(file, p) : file, l = d.length;\r\n        var c = crc();\r\n        c.p(file);\r\n        files.push(mrg(p, {\r\n            size: file.length,\r\n            crc: c.d(),\r\n            c: d,\r\n            f: f,\r\n            m: m,\r\n            u: s != fn.length || (m && (com.length != ms)),\r\n            o: o,\r\n            compression: compression\r\n        }));\r\n        o += 30 + s + exl + l;\r\n        tot += 76 + 2 * (s + exl) + (ms || 0) + l;\r\n    }\r\n    var out = new u8(tot + 22), oe = o, cdl = tot - o;\r\n    for (var i = 0; i < files.length; ++i) {\r\n        var f = files[i];\r\n        wzh(out, f.o, f, f.f, f.u, f.c.length);\r\n        var badd = 30 + f.f.length + exfl(f.extra);\r\n        out.set(f.c, f.o + badd);\r\n        wzh(out, o, f, f.f, f.u, f.c.length, f.o, f.m), o += 16 + badd + (f.m ? f.m.length : 0);\r\n    }\r\n    wzf(out, o, files.length, cdl, oe);\r\n    return out;\r\n}\r\n/**\r\n * Streaming pass-through decompression for ZIP archives\r\n */\r\nvar UnzipPassThrough = /*#__PURE__*/ (function () {\r\n    function UnzipPassThrough() {\r\n    }\r\n    UnzipPassThrough.prototype.push = function (data, final) {\r\n        this.ondata(null, data, final);\r\n    };\r\n    UnzipPassThrough.compression = 0;\r\n    return UnzipPassThrough;\r\n}());\r\nexport { UnzipPassThrough };\r\n/**\r\n * Streaming DEFLATE decompression for ZIP archives. Prefer AsyncZipInflate for\r\n * better performance.\r\n */\r\nvar UnzipInflate = /*#__PURE__*/ (function () {\r\n    /**\r\n     * Creates a DEFLATE decompression that can be used in ZIP archives\r\n     */\r\n    function UnzipInflate() {\r\n        var _this_1 = this;\r\n        this.i = new Inflate(function (dat, final) {\r\n            _this_1.ondata(null, dat, final);\r\n        });\r\n    }\r\n    UnzipInflate.prototype.push = function (data, final) {\r\n        try {\r\n            this.i.push(data, final);\r\n        }\r\n        catch (e) {\r\n            this.ondata(e, data, final);\r\n        }\r\n    };\r\n    UnzipInflate.compression = 8;\r\n    return UnzipInflate;\r\n}());\r\nexport { UnzipInflate };\r\n/**\r\n * Asynchronous streaming DEFLATE decompression for ZIP archives\r\n */\r\nvar AsyncUnzipInflate = /*#__PURE__*/ (function () {\r\n    /**\r\n     * Creates a DEFLATE decompression that can be used in ZIP archives\r\n     */\r\n    function AsyncUnzipInflate(_, sz) {\r\n        var _this_1 = this;\r\n        if (sz < 320000) {\r\n            this.i = new Inflate(function (dat, final) {\r\n                _this_1.ondata(null, dat, final);\r\n            });\r\n        }\r\n        else {\r\n            this.i = new AsyncInflate(function (err, dat, final) {\r\n                _this_1.ondata(err, dat, final);\r\n            });\r\n            this.terminate = this.i.terminate;\r\n        }\r\n    }\r\n    AsyncUnzipInflate.prototype.push = function (data, final) {\r\n        if (this.i.terminate)\r\n            data = slc(data, 0);\r\n        this.i.push(data, final);\r\n    };\r\n    AsyncUnzipInflate.compression = 8;\r\n    return AsyncUnzipInflate;\r\n}());\r\nexport { AsyncUnzipInflate };\r\n/**\r\n * A ZIP archive decompression stream that emits files as they are discovered\r\n */\r\nvar Unzip = /*#__PURE__*/ (function () {\r\n    /**\r\n     * Creates a ZIP decompression stream\r\n     * @param cb The callback to call whenever a file in the ZIP archive is found\r\n     */\r\n    function Unzip(cb) {\r\n        this.onfile = cb;\r\n        this.k = [];\r\n        this.o = {\r\n            0: UnzipPassThrough\r\n        };\r\n        this.p = et;\r\n    }\r\n    /**\r\n     * Pushes a chunk to be unzipped\r\n     * @param chunk The chunk to push\r\n     * @param final Whether this is the last chunk\r\n     */\r\n    Unzip.prototype.push = function (chunk, final) {\r\n        var _this_1 = this;\r\n        if (!this.onfile)\r\n            throw 'no callback';\r\n        if (!this.p)\r\n            throw 'stream finished';\r\n        if (this.c > 0) {\r\n            var len = Math.min(this.c, chunk.length);\r\n            var toAdd = chunk.subarray(0, len);\r\n            this.c -= len;\r\n            if (this.d)\r\n                this.d.push(toAdd, !this.c);\r\n            else\r\n                this.k[0].push(toAdd);\r\n            chunk = chunk.subarray(len);\r\n            if (chunk.length)\r\n                return this.push(chunk, final);\r\n        }\r\n        else {\r\n            var f = 0, i = 0, is = void 0, buf = void 0;\r\n            if (!this.p.length)\r\n                buf = chunk;\r\n            else if (!chunk.length)\r\n                buf = this.p;\r\n            else {\r\n                buf = new u8(this.p.length + chunk.length);\r\n                buf.set(this.p), buf.set(chunk, this.p.length);\r\n            }\r\n            var l = buf.length, oc = this.c, add = oc && this.d;\r\n            var _loop_2 = function () {\r\n                var _a;\r\n                var sig = b4(buf, i);\r\n                if (sig == 0x4034B50) {\r\n                    f = 1, is = i;\r\n                    this_1.d = null;\r\n                    this_1.c = 0;\r\n                    var bf = b2(buf, i + 6), cmp_1 = b2(buf, i + 8), u = bf & 2048, dd = bf & 8, fnl = b2(buf, i + 26), es = b2(buf, i + 28);\r\n                    if (l > i + 30 + fnl + es) {\r\n                        var chks_2 = [];\r\n                        this_1.k.unshift(chks_2);\r\n                        f = 2;\r\n                        var sc_1 = b4(buf, i + 18), su_1 = b4(buf, i + 22);\r\n                        var fn_1 = strFromU8(buf.subarray(i + 30, i += 30 + fnl), !u);\r\n                        if (sc_1 == 4294967295) {\r\n                            _a = dd ? [-2] : z64e(buf, i), sc_1 = _a[0], su_1 = _a[1];\r\n                        }\r\n                        else if (dd)\r\n                            sc_1 = -1;\r\n                        i += es;\r\n                        this_1.c = sc_1;\r\n                        var d_1;\r\n                        var file_1 = {\r\n                            name: fn_1,\r\n                            compression: cmp_1,\r\n                            start: function () {\r\n                                if (!file_1.ondata)\r\n                                    throw 'no callback';\r\n                                if (!sc_1)\r\n                                    file_1.ondata(null, et, true);\r\n                                else {\r\n                                    var ctr = _this_1.o[cmp_1];\r\n                                    if (!ctr)\r\n                                        throw 'unknown compression type ' + cmp_1;\r\n                                    d_1 = sc_1 < 0 ? new ctr(fn_1) : new ctr(fn_1, sc_1, su_1);\r\n                                    d_1.ondata = function (err, dat, final) { file_1.ondata(err, dat, final); };\r\n                                    for (var _i = 0, chks_3 = chks_2; _i < chks_3.length; _i++) {\r\n                                        var dat = chks_3[_i];\r\n                                        d_1.push(dat, false);\r\n                                    }\r\n                                    if (_this_1.k[0] == chks_2 && _this_1.c)\r\n                                        _this_1.d = d_1;\r\n                                    else\r\n                                        d_1.push(et, true);\r\n                                }\r\n                            },\r\n                            terminate: function () {\r\n                                if (d_1 && d_1.terminate)\r\n                                    d_1.terminate();\r\n                            }\r\n                        };\r\n                        if (sc_1 >= 0)\r\n                            file_1.size = sc_1, file_1.originalSize = su_1;\r\n                        this_1.onfile(file_1);\r\n                    }\r\n                    return \"break\";\r\n                }\r\n                else if (oc) {\r\n                    if (sig == 0x8074B50) {\r\n                        is = i += 12 + (oc == -2 && 8), f = 3, this_1.c = 0;\r\n                        return \"break\";\r\n                    }\r\n                    else if (sig == 0x2014B50) {\r\n                        is = i -= 4, f = 3, this_1.c = 0;\r\n                        return \"break\";\r\n                    }\r\n                }\r\n            };\r\n            var this_1 = this;\r\n            for (; i < l - 4; ++i) {\r\n                var state_1 = _loop_2();\r\n                if (state_1 === \"break\")\r\n                    break;\r\n            }\r\n            this.p = et;\r\n            if (oc < 0) {\r\n                var dat = f ? buf.subarray(0, is - 12 - (oc == -2 && 8) - (b4(buf, is - 16) == 0x8074B50 && 4)) : buf.subarray(0, i);\r\n                if (add)\r\n                    add.push(dat, !!f);\r\n                else\r\n                    this.k[+(f == 2)].push(dat);\r\n            }\r\n            if (f & 2)\r\n                return this.push(buf.subarray(i), final);\r\n            this.p = buf.subarray(i);\r\n        }\r\n        if (final) {\r\n            if (this.c)\r\n                throw 'invalid zip file';\r\n            this.p = null;\r\n        }\r\n    };\r\n    /**\r\n     * Registers a decoder with the stream, allowing for files compressed with\r\n     * the compression type provided to be expanded correctly\r\n     * @param decoder The decoder constructor\r\n     */\r\n    Unzip.prototype.register = function (decoder) {\r\n        this.o[decoder.compression] = decoder;\r\n    };\r\n    return Unzip;\r\n}());\r\nexport { Unzip };\r\n/**\r\n * Asynchronously decompresses a ZIP archive\r\n * @param data The raw compressed ZIP file\r\n * @param cb The callback to call with the decompressed files\r\n * @returns A function that can be used to immediately terminate the unzipping\r\n */\r\nexport function unzip(data, cb) {\r\n    if (typeof cb != 'function')\r\n        throw 'no callback';\r\n    var term = [];\r\n    var tAll = function () {\r\n        for (var i = 0; i < term.length; ++i)\r\n            term[i]();\r\n    };\r\n    var files = {};\r\n    var e = data.length - 22;\r\n    for (; b4(data, e) != 0x6054B50; --e) {\r\n        if (!e || data.length - e > 65558) {\r\n            cb('invalid zip file', null);\r\n            return;\r\n        }\r\n    }\r\n    ;\r\n    var lft = b2(data, e + 8);\r\n    if (!lft)\r\n        cb(null, {});\r\n    var c = lft;\r\n    var o = b4(data, e + 16);\r\n    var z = o == 4294967295;\r\n    if (z) {\r\n        e = b4(data, e - 12);\r\n        if (b4(data, e) != 0x6064B50) {\r\n            cb('invalid zip file', null);\r\n            return;\r\n        }\r\n        c = lft = b4(data, e + 32);\r\n        o = b4(data, e + 48);\r\n    }\r\n    var _loop_3 = function (i) {\r\n        var _a = zh(data, o, z), c_1 = _a[0], sc = _a[1], su = _a[2], fn = _a[3], no = _a[4], off = _a[5], b = slzh(data, off);\r\n        o = no;\r\n        var cbl = function (e, d) {\r\n            if (e) {\r\n                tAll();\r\n                cb(e, null);\r\n            }\r\n            else {\r\n                files[fn] = d;\r\n                if (!--lft)\r\n                    cb(null, files);\r\n            }\r\n        };\r\n        if (!c_1)\r\n            cbl(null, slc(data, b, b + sc));\r\n        else if (c_1 == 8) {\r\n            var infl = data.subarray(b, b + sc);\r\n            if (sc < 320000) {\r\n                try {\r\n                    cbl(null, inflateSync(infl, new u8(su)));\r\n                }\r\n                catch (e) {\r\n                    cbl(e, null);\r\n                }\r\n            }\r\n            else\r\n                term.push(inflate(infl, { size: su }, cbl));\r\n        }\r\n        else\r\n            cbl('unknown compression type ' + c_1, null);\r\n    };\r\n    for (var i = 0; i < c; ++i) {\r\n        _loop_3(i);\r\n    }\r\n    return tAll;\r\n}\r\n/**\r\n * Synchronously decompresses a ZIP archive. Prefer using `unzip` for better\r\n * performance with more than one file.\r\n * @param data The raw compressed ZIP file\r\n * @returns The decompressed files\r\n */\r\nexport function unzipSync(data) {\r\n    var files = {};\r\n    var e = data.length - 22;\r\n    for (; b4(data, e) != 0x6054B50; --e) {\r\n        if (!e || data.length - e > 65558)\r\n            throw 'invalid zip file';\r\n    }\r\n    ;\r\n    var c = b2(data, e + 8);\r\n    if (!c)\r\n        return {};\r\n    var o = b4(data, e + 16);\r\n    var z = o == 4294967295;\r\n    if (z) {\r\n        e = b4(data, e - 12);\r\n        if (b4(data, e) != 0x6064B50)\r\n            throw 'invalid zip file';\r\n        c = b4(data, e + 32);\r\n        o = b4(data, e + 48);\r\n    }\r\n    for (var i = 0; i < c; ++i) {\r\n        var _a = zh(data, o, z), c_2 = _a[0], sc = _a[1], su = _a[2], fn = _a[3], no = _a[4], off = _a[5], b = slzh(data, off);\r\n        o = no;\r\n        if (!c_2)\r\n            files[fn] = slc(data, b, b + sc);\r\n        else if (c_2 == 8)\r\n            files[fn] = inflateSync(data.subarray(b, b + sc), new u8(su));\r\n        else\r\n            throw 'unknown compression type ' + c_2;\r\n    }\r\n    return files;\r\n}\r\n", "var __defProp = Object.defineProperty;\r\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\r\nvar __publicField = (obj, key, value) => {\r\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\r\n  return value;\r\n};\r\nimport { BufferGeometry, Mesh, Points } from \"three\";\r\nconst _DRACOExporter = class {\r\n  parse(object, options = {\r\n    decodeSpeed: 5,\r\n    encodeSpeed: 5,\r\n    encoderMethod: _DRACOExporter.MESH_EDGEBREAKER_ENCODING,\r\n    quantization: [16, 8, 8, 8, 8],\r\n    exportUvs: true,\r\n    exportNormals: true,\r\n    exportColor: false\r\n  }) {\r\n    if (object instanceof BufferGeometry && object.isBufferGeometry) {\r\n      throw new Error(\"DRACOExporter: The first parameter of parse() is now an instance of Mesh or Points.\");\r\n    }\r\n    if (DracoEncoderModule === void 0) {\r\n      throw new Error(\"THREE.DRACOExporter: required the draco_encoder to work.\");\r\n    }\r\n    const geometry = object.geometry;\r\n    const dracoEncoder = DracoEncoderModule();\r\n    const encoder = new dracoEncoder.Encoder();\r\n    let builder;\r\n    let dracoObject;\r\n    if (!geometry.isBufferGeometry) {\r\n      throw new Error(\"THREE.DRACOExporter.parse(geometry, options): geometry is not a THREE.BufferGeometry instance.\");\r\n    }\r\n    if (object instanceof Mesh && object.isMesh) {\r\n      builder = new dracoEncoder.MeshBuilder();\r\n      dracoObject = new dracoEncoder.Mesh();\r\n      const vertices = geometry.getAttribute(\"position\");\r\n      builder.AddFloatAttributeToMesh(\r\n        dracoObject,\r\n        dracoEncoder.POSITION,\r\n        vertices.count,\r\n        vertices.itemSize,\r\n        vertices.array\r\n      );\r\n      const faces = geometry.getIndex();\r\n      if (faces !== null) {\r\n        builder.AddFacesToMesh(dracoObject, faces.count / 3, faces.array);\r\n      } else {\r\n        const faces2 = new (vertices.count > 65535 ? Uint32Array : Uint16Array)(vertices.count);\r\n        for (let i = 0; i < faces2.length; i++) {\r\n          faces2[i] = i;\r\n        }\r\n        builder.AddFacesToMesh(dracoObject, vertices.count, faces2);\r\n      }\r\n      if (options.exportNormals) {\r\n        const normals = geometry.getAttribute(\"normal\");\r\n        if (normals !== void 0) {\r\n          builder.AddFloatAttributeToMesh(\r\n            dracoObject,\r\n            dracoEncoder.NORMAL,\r\n            normals.count,\r\n            normals.itemSize,\r\n            normals.array\r\n          );\r\n        }\r\n      }\r\n      if (options.exportUvs) {\r\n        const uvs = geometry.getAttribute(\"uv\");\r\n        if (uvs !== void 0) {\r\n          builder.AddFloatAttributeToMesh(dracoObject, dracoEncoder.TEX_COORD, uvs.count, uvs.itemSize, uvs.array);\r\n        }\r\n      }\r\n      if (options.exportColor) {\r\n        const colors = geometry.getAttribute(\"color\");\r\n        if (colors !== void 0) {\r\n          builder.AddFloatAttributeToMesh(dracoObject, dracoEncoder.COLOR, colors.count, colors.itemSize, colors.array);\r\n        }\r\n      }\r\n    } else if (object instanceof Points && object.isPoints) {\r\n      builder = new dracoEncoder.PointCloudBuilder();\r\n      dracoObject = new dracoEncoder.PointCloud();\r\n      const vertices = geometry.getAttribute(\"position\");\r\n      builder.AddFloatAttribute(dracoObject, dracoEncoder.POSITION, vertices.count, vertices.itemSize, vertices.array);\r\n      if (options.exportColor) {\r\n        const colors = geometry.getAttribute(\"color\");\r\n        if (colors !== void 0) {\r\n          builder.AddFloatAttribute(dracoObject, dracoEncoder.COLOR, colors.count, colors.itemSize, colors.array);\r\n        }\r\n      }\r\n    } else {\r\n      throw new Error(\"DRACOExporter: Unsupported object type.\");\r\n    }\r\n    const encodedData = new dracoEncoder.DracoInt8Array();\r\n    const encodeSpeed = options.encodeSpeed !== void 0 ? options.encodeSpeed : 5;\r\n    const decodeSpeed = options.decodeSpeed !== void 0 ? options.decodeSpeed : 5;\r\n    encoder.SetSpeedOptions(encodeSpeed, decodeSpeed);\r\n    if (options.encoderMethod !== void 0) {\r\n      encoder.SetEncodingMethod(options.encoderMethod);\r\n    }\r\n    if (options.quantization !== void 0) {\r\n      for (let i = 0; i < 5; i++) {\r\n        if (options.quantization[i] !== void 0) {\r\n          encoder.SetAttributeQuantization(i, options.quantization[i]);\r\n        }\r\n      }\r\n    }\r\n    let length;\r\n    if (object instanceof Mesh && object.isMesh) {\r\n      length = encoder.EncodeMeshToDracoBuffer(dracoObject, encodedData);\r\n    } else {\r\n      length = encoder.EncodePointCloudToDracoBuffer(dracoObject, true, encodedData);\r\n    }\r\n    dracoEncoder.destroy(dracoObject);\r\n    if (length === 0) {\r\n      throw new Error(\"THREE.DRACOExporter: Draco encoding failed.\");\r\n    }\r\n    const outputData = new Int8Array(new ArrayBuffer(length));\r\n    for (let i = 0; i < length; i++) {\r\n      outputData[i] = encodedData.GetValue(i);\r\n    }\r\n    dracoEncoder.destroy(encodedData);\r\n    dracoEncoder.destroy(encoder);\r\n    dracoEncoder.destroy(builder);\r\n    return outputData;\r\n  }\r\n};\r\nlet DRACOExporter = _DRACOExporter;\r\n// Encoder methods\r\n__publicField(DRACOExporter, \"MESH_EDGEBREAKER_ENCODING\", 1);\r\n__publicField(DRACOExporter, \"MESH_SEQUENTIAL_ENCODING\", 0);\r\n// Geometry type\r\n__publicField(DRACOExporter, \"POINT_CLOUD\", 0);\r\n__publicField(DRACOExporter, \"TRIANGULAR_MESH\", 1);\r\n// Attribute type\r\n__publicField(DRACOExporter, \"INVALID\", -1);\r\n__publicField(DRACOExporter, \"POSITION\", 0);\r\n__publicField(DRACOExporter, \"NORMAL\", 1);\r\n__publicField(DRACOExporter, \"COLOR\", 2);\r\n__publicField(DRACOExporter, \"TEX_COORD\", 3);\r\n__publicField(DRACOExporter, \"GENERIC\", 4);\r\nexport {\r\n  DRACOExporter\r\n};\r\n", "/**\r\n * @author Takahiro / https://github.com/takahirox\r\n *\r\n * Simple CharsetEncoder.\r\n */\r\n\r\nfunction CharsetEncoder() {\r\n}\r\n\r\n/*\r\n * Converts from Shift_JIS Uint8Array data to Unicode strings.\r\n */\r\nCharsetEncoder.prototype.s2u = function(uint8Array) {\r\n  var t = this.s2uTable;\r\n  var str = '';\r\n  var p = 0;\r\n\r\n  while(p < uint8Array.length) {\r\n    var key = uint8Array[p++];\r\n\r\n    if(! ((key >= 0x00 && key <= 0x7e) ||\r\n          (key >= 0xa1 && key <= 0xdf)) &&\r\n       p < uint8Array.length) {\r\n      key = (key << 8) | uint8Array[p++];\r\n    }\r\n\r\n    if(t[key] === undefined) {\r\n      console.error('unknown char code ' + key + '.');\r\n      return str;\r\n    }\r\n\r\n    str += String.fromCharCode(t[key]);\r\n  }\r\n\r\n  return str;\r\n};\r\n\r\nCharsetEncoder.prototype.s2uTable = {\r\n0:0,\r\n1:1,\r\n2:2,\r\n3:3,\r\n4:4,\r\n5:5,\r\n6:6,\r\n7:7,\r\n8:8,\r\n9:9,\r\n10:10,\r\n11:11,\r\n12:12,\r\n13:13,\r\n14:14,\r\n15:15,\r\n16:16,\r\n17:17,\r\n18:18,\r\n19:19,\r\n20:20,\r\n21:21,\r\n22:22,\r\n23:23,\r\n24:24,\r\n25:25,\r\n26:26,\r\n27:27,\r\n28:28,\r\n29:29,\r\n30:30,\r\n31:31,\r\n32:32,\r\n33:33,\r\n34:34,\r\n35:35,\r\n36:36,\r\n37:37,\r\n38:38,\r\n39:39,\r\n40:40,\r\n41:41,\r\n42:42,\r\n43:43,\r\n44:44,\r\n45:45,\r\n46:46,\r\n47:47,\r\n48:48,\r\n49:49,\r\n50:50,\r\n51:51,\r\n52:52,\r\n53:53,\r\n54:54,\r\n55:55,\r\n56:56,\r\n57:57,\r\n58:58,\r\n59:59,\r\n60:60,\r\n61:61,\r\n62:62,\r\n63:63,\r\n64:64,\r\n65:65,\r\n66:66,\r\n67:67,\r\n68:68,\r\n69:69,\r\n70:70,\r\n71:71,\r\n72:72,\r\n73:73,\r\n74:74,\r\n75:75,\r\n76:76,\r\n77:77,\r\n78:78,\r\n79:79,\r\n80:80,\r\n81:81,\r\n82:82,\r\n83:83,\r\n84:84,\r\n85:85,\r\n86:86,\r\n87:87,\r\n88:88,\r\n89:89,\r\n90:90,\r\n91:91,\r\n92:92,\r\n93:93,\r\n94:94,\r\n95:95,\r\n96:96,\r\n97:97,\r\n98:98,\r\n99:99,\r\n100:100,\r\n101:101,\r\n102:102,\r\n103:103,\r\n104:104,\r\n105:105,\r\n106:106,\r\n107:107,\r\n108:108,\r\n109:109,\r\n110:110,\r\n111:111,\r\n112:112,\r\n113:113,\r\n114:114,\r\n115:115,\r\n116:116,\r\n117:117,\r\n118:118,\r\n119:119,\r\n120:120,\r\n121:121,\r\n122:122,\r\n123:123,\r\n124:124,\r\n125:125,\r\n126:126,\r\n161:65377,\r\n162:65378,\r\n163:65379,\r\n164:65380,\r\n165:65381,\r\n166:65382,\r\n167:65383,\r\n168:65384,\r\n169:65385,\r\n170:65386,\r\n171:65387,\r\n172:65388,\r\n173:65389,\r\n174:65390,\r\n175:65391,\r\n176:65392,\r\n177:65393,\r\n178:65394,\r\n179:65395,\r\n180:65396,\r\n181:65397,\r\n182:65398,\r\n183:65399,\r\n184:65400,\r\n185:65401,\r\n186:65402,\r\n187:65403,\r\n188:65404,\r\n189:65405,\r\n190:65406,\r\n191:65407,\r\n192:65408,\r\n193:65409,\r\n194:65410,\r\n195:65411,\r\n196:65412,\r\n197:65413,\r\n198:65414,\r\n199:65415,\r\n200:65416,\r\n201:65417,\r\n202:65418,\r\n203:65419,\r\n204:65420,\r\n205:65421,\r\n206:65422,\r\n207:65423,\r\n208:65424,\r\n209:65425,\r\n210:65426,\r\n211:65427,\r\n212:65428,\r\n213:65429,\r\n214:65430,\r\n215:65431,\r\n216:65432,\r\n217:65433,\r\n218:65434,\r\n219:65435,\r\n220:65436,\r\n221:65437,\r\n222:65438,\r\n223:65439,\r\n33088:12288,\r\n33089:12289,\r\n33090:12290,\r\n33091:65292,\r\n33092:65294,\r\n33093:12539,\r\n33094:65306,\r\n33095:65307,\r\n33096:65311,\r\n33097:65281,\r\n33098:12443,\r\n33099:12444,\r\n33100:180,\r\n33101:65344,\r\n33102:168,\r\n33103:65342,\r\n33104:65507,\r\n33105:65343,\r\n33106:12541,\r\n33107:12542,\r\n33108:12445,\r\n33109:12446,\r\n33110:12291,\r\n33111:20189,\r\n33112:12293,\r\n33113:12294,\r\n33114:12295,\r\n33115:12540,\r\n33116:8213,\r\n33117:8208,\r\n33118:65295,\r\n33119:65340,\r\n33120:65374,\r\n33121:8741,\r\n33122:65372,\r\n33123:8230,\r\n33124:8229,\r\n33125:8216,\r\n33126:8217,\r\n33127:8220,\r\n33128:8221,\r\n33129:65288,\r\n33130:65289,\r\n33131:12308,\r\n33132:12309,\r\n33133:65339,\r\n33134:65341,\r\n33135:65371,\r\n33136:65373,\r\n33137:12296,\r\n33138:12297,\r\n33139:12298,\r\n33140:12299,\r\n33141:12300,\r\n33142:12301,\r\n33143:12302,\r\n33144:12303,\r\n33145:12304,\r\n33146:12305,\r\n33147:65291,\r\n33148:65293,\r\n33149:177,\r\n33150:215,\r\n33152:247,\r\n33153:65309,\r\n33154:8800,\r\n33155:65308,\r\n33156:65310,\r\n33157:8806,\r\n33158:8807,\r\n33159:8734,\r\n33160:8756,\r\n33161:9794,\r\n33162:9792,\r\n33163:176,\r\n33164:8242,\r\n33165:8243,\r\n33166:8451,\r\n33167:65509,\r\n33168:65284,\r\n33169:65504,\r\n33170:65505,\r\n33171:65285,\r\n33172:65283,\r\n33173:65286,\r\n33174:65290,\r\n33175:65312,\r\n33176:167,\r\n33177:9734,\r\n33178:9733,\r\n33179:9675,\r\n33180:9679,\r\n33181:9678,\r\n33182:9671,\r\n33183:9670,\r\n33184:9633,\r\n33185:9632,\r\n33186:9651,\r\n33187:9650,\r\n33188:9661,\r\n33189:9660,\r\n33190:8251,\r\n33191:12306,\r\n33192:8594,\r\n33193:8592,\r\n33194:8593,\r\n33195:8595,\r\n33196:12307,\r\n33208:8712,\r\n33209:8715,\r\n33210:8838,\r\n33211:8839,\r\n33212:8834,\r\n33213:8835,\r\n33214:8746,\r\n33215:8745,\r\n33224:8743,\r\n33225:8744,\r\n33226:65506,\r\n33227:8658,\r\n33228:8660,\r\n33229:8704,\r\n33230:8707,\r\n33242:8736,\r\n33243:8869,\r\n33244:8978,\r\n33245:8706,\r\n33246:8711,\r\n33247:8801,\r\n33248:8786,\r\n33249:8810,\r\n33250:8811,\r\n33251:8730,\r\n33252:8765,\r\n33253:8733,\r\n33254:8757,\r\n33255:8747,\r\n33256:8748,\r\n33264:8491,\r\n33265:8240,\r\n33266:9839,\r\n33267:9837,\r\n33268:9834,\r\n33269:8224,\r\n33270:8225,\r\n33271:182,\r\n33276:9711,\r\n33359:65296,\r\n33360:65297,\r\n33361:65298,\r\n33362:65299,\r\n33363:65300,\r\n33364:65301,\r\n33365:65302,\r\n33366:65303,\r\n33367:65304,\r\n33368:65305,\r\n33376:65313,\r\n33377:65314,\r\n33378:65315,\r\n33379:65316,\r\n33380:65317,\r\n33381:65318,\r\n33382:65319,\r\n33383:65320,\r\n33384:65321,\r\n33385:65322,\r\n33386:65323,\r\n33387:65324,\r\n33388:65325,\r\n33389:65326,\r\n33390:65327,\r\n33391:65328,\r\n33392:65329,\r\n33393:65330,\r\n33394:65331,\r\n33395:65332,\r\n33396:65333,\r\n33397:65334,\r\n33398:65335,\r\n33399:65336,\r\n33400:65337,\r\n33401:65338,\r\n33409:65345,\r\n33410:65346,\r\n33411:65347,\r\n33412:65348,\r\n33413:65349,\r\n33414:65350,\r\n33415:65351,\r\n33416:65352,\r\n33417:65353,\r\n33418:65354,\r\n33419:65355,\r\n33420:65356,\r\n33421:65357,\r\n33422:65358,\r\n33423:65359,\r\n33424:65360,\r\n33425:65361,\r\n33426:65362,\r\n33427:65363,\r\n33428:65364,\r\n33429:65365,\r\n33430:65366,\r\n33431:65367,\r\n33432:65368,\r\n33433:65369,\r\n33434:65370,\r\n33439:12353,\r\n33440:12354,\r\n33441:12355,\r\n33442:12356,\r\n33443:12357,\r\n33444:12358,\r\n33445:12359,\r\n33446:12360,\r\n33447:12361,\r\n33448:12362,\r\n33449:12363,\r\n33450:12364,\r\n33451:12365,\r\n33452:12366,\r\n33453:12367,\r\n33454:12368,\r\n33455:12369,\r\n33456:12370,\r\n33457:12371,\r\n33458:12372,\r\n33459:12373,\r\n33460:12374,\r\n33461:12375,\r\n33462:12376,\r\n33463:12377,\r\n33464:12378,\r\n33465:12379,\r\n33466:12380,\r\n33467:12381,\r\n33468:12382,\r\n33469:12383,\r\n33470:12384,\r\n33471:12385,\r\n33472:12386,\r\n33473:12387,\r\n33474:12388,\r\n33475:12389,\r\n33476:12390,\r\n33477:12391,\r\n33478:12392,\r\n33479:12393,\r\n33480:12394,\r\n33481:12395,\r\n33482:12396,\r\n33483:12397,\r\n33484:12398,\r\n33485:12399,\r\n33486:12400,\r\n33487:12401,\r\n33488:12402,\r\n33489:12403,\r\n33490:12404,\r\n33491:12405,\r\n33492:12406,\r\n33493:12407,\r\n33494:12408,\r\n33495:12409,\r\n33496:12410,\r\n33497:12411,\r\n33498:12412,\r\n33499:12413,\r\n33500:12414,\r\n33501:12415,\r\n33502:12416,\r\n33503:12417,\r\n33504:12418,\r\n33505:12419,\r\n33506:12420,\r\n33507:12421,\r\n33508:12422,\r\n33509:12423,\r\n33510:12424,\r\n33511:12425,\r\n33512:12426,\r\n33513:12427,\r\n33514:12428,\r\n33515:12429,\r\n33516:12430,\r\n33517:12431,\r\n33518:12432,\r\n33519:12433,\r\n33520:12434,\r\n33521:12435,\r\n33600:12449,\r\n33601:12450,\r\n33602:12451,\r\n33603:12452,\r\n33604:12453,\r\n33605:12454,\r\n33606:12455,\r\n33607:12456,\r\n33608:12457,\r\n33609:12458,\r\n33610:12459,\r\n33611:12460,\r\n33612:12461,\r\n33613:12462,\r\n33614:12463,\r\n33615:12464,\r\n33616:12465,\r\n33617:12466,\r\n33618:12467,\r\n33619:12468,\r\n33620:12469,\r\n33621:12470,\r\n33622:12471,\r\n33623:12472,\r\n33624:12473,\r\n33625:12474,\r\n33626:12475,\r\n33627:12476,\r\n33628:12477,\r\n33629:12478,\r\n33630:12479,\r\n33631:12480,\r\n33632:12481,\r\n33633:12482,\r\n33634:12483,\r\n33635:12484,\r\n33636:12485,\r\n33637:12486,\r\n33638:12487,\r\n33639:12488,\r\n33640:12489,\r\n33641:12490,\r\n33642:12491,\r\n33643:12492,\r\n33644:12493,\r\n33645:12494,\r\n33646:12495,\r\n33647:12496,\r\n33648:12497,\r\n33649:12498,\r\n33650:12499,\r\n33651:12500,\r\n33652:12501,\r\n33653:12502,\r\n33654:12503,\r\n33655:12504,\r\n33656:12505,\r\n33657:12506,\r\n33658:12507,\r\n33659:12508,\r\n33660:12509,\r\n33661:12510,\r\n33662:12511,\r\n33664:12512,\r\n33665:12513,\r\n33666:12514,\r\n33667:12515,\r\n33668:12516,\r\n33669:12517,\r\n33670:12518,\r\n33671:12519,\r\n33672:12520,\r\n33673:12521,\r\n33674:12522,\r\n33675:12523,\r\n33676:12524,\r\n33677:12525,\r\n33678:12526,\r\n33679:12527,\r\n33680:12528,\r\n33681:12529,\r\n33682:12530,\r\n33683:12531,\r\n33684:12532,\r\n33685:12533,\r\n33686:12534,\r\n33695:913,\r\n33696:914,\r\n33697:915,\r\n33698:916,\r\n33699:917,\r\n33700:918,\r\n33701:919,\r\n33702:920,\r\n33703:921,\r\n33704:922,\r\n33705:923,\r\n33706:924,\r\n33707:925,\r\n33708:926,\r\n33709:927,\r\n33710:928,\r\n33711:929,\r\n33712:931,\r\n33713:932,\r\n33714:933,\r\n33715:934,\r\n33716:935,\r\n33717:936,\r\n33718:937,\r\n33727:945,\r\n33728:946,\r\n33729:947,\r\n33730:948,\r\n33731:949,\r\n33732:950,\r\n33733:951,\r\n33734:952,\r\n33735:953,\r\n33736:954,\r\n33737:955,\r\n33738:956,\r\n33739:957,\r\n33740:958,\r\n33741:959,\r\n33742:960,\r\n33743:961,\r\n33744:963,\r\n33745:964,\r\n33746:965,\r\n33747:966,\r\n33748:967,\r\n33749:968,\r\n33750:969,\r\n33856:1040,\r\n33857:1041,\r\n33858:1042,\r\n33859:1043,\r\n33860:1044,\r\n33861:1045,\r\n33862:1025,\r\n33863:1046,\r\n33864:1047,\r\n33865:1048,\r\n33866:1049,\r\n33867:1050,\r\n33868:1051,\r\n33869:1052,\r\n33870:1053,\r\n33871:1054,\r\n33872:1055,\r\n33873:1056,\r\n33874:1057,\r\n33875:1058,\r\n33876:1059,\r\n33877:1060,\r\n33878:1061,\r\n33879:1062,\r\n33880:1063,\r\n33881:1064,\r\n33882:1065,\r\n33883:1066,\r\n33884:1067,\r\n33885:1068,\r\n33886:1069,\r\n33887:1070,\r\n33888:1071,\r\n33904:1072,\r\n33905:1073,\r\n33906:1074,\r\n33907:1075,\r\n33908:1076,\r\n33909:1077,\r\n33910:1105,\r\n33911:1078,\r\n33912:1079,\r\n33913:1080,\r\n33914:1081,\r\n33915:1082,\r\n33916:1083,\r\n33917:1084,\r\n33918:1085,\r\n33920:1086,\r\n33921:1087,\r\n33922:1088,\r\n33923:1089,\r\n33924:1090,\r\n33925:1091,\r\n33926:1092,\r\n33927:1093,\r\n33928:1094,\r\n33929:1095,\r\n33930:1096,\r\n33931:1097,\r\n33932:1098,\r\n33933:1099,\r\n33934:1100,\r\n33935:1101,\r\n33936:1102,\r\n33937:1103,\r\n33951:9472,\r\n33952:9474,\r\n33953:9484,\r\n33954:9488,\r\n33955:9496,\r\n33956:9492,\r\n33957:9500,\r\n33958:9516,\r\n33959:9508,\r\n33960:9524,\r\n33961:9532,\r\n33962:9473,\r\n33963:9475,\r\n33964:9487,\r\n33965:9491,\r\n33966:9499,\r\n33967:9495,\r\n33968:9507,\r\n33969:9523,\r\n33970:9515,\r\n33971:9531,\r\n33972:9547,\r\n33973:9504,\r\n33974:9519,\r\n33975:9512,\r\n33976:9527,\r\n33977:9535,\r\n33978:9501,\r\n33979:9520,\r\n33980:9509,\r\n33981:9528,\r\n33982:9538,\r\n34624:9312,\r\n34625:9313,\r\n34626:9314,\r\n34627:9315,\r\n34628:9316,\r\n34629:9317,\r\n34630:9318,\r\n34631:9319,\r\n34632:9320,\r\n34633:9321,\r\n34634:9322,\r\n34635:9323,\r\n34636:9324,\r\n34637:9325,\r\n34638:9326,\r\n34639:9327,\r\n34640:9328,\r\n34641:9329,\r\n34642:9330,\r\n34643:9331,\r\n34644:8544,\r\n34645:8545,\r\n34646:8546,\r\n34647:8547,\r\n34648:8548,\r\n34649:8549,\r\n34650:8550,\r\n34651:8551,\r\n34652:8552,\r\n34653:8553,\r\n34655:13129,\r\n34656:13076,\r\n34657:13090,\r\n34658:13133,\r\n34659:13080,\r\n34660:13095,\r\n34661:13059,\r\n34662:13110,\r\n34663:13137,\r\n34664:13143,\r\n34665:13069,\r\n34666:13094,\r\n34667:13091,\r\n34668:13099,\r\n34669:13130,\r\n34670:13115,\r\n34671:13212,\r\n34672:13213,\r\n34673:13214,\r\n34674:13198,\r\n34675:13199,\r\n34676:13252,\r\n34677:13217,\r\n34686:13179,\r\n34688:12317,\r\n34689:12319,\r\n34690:8470,\r\n34691:13261,\r\n34692:8481,\r\n34693:12964,\r\n34694:12965,\r\n34695:12966,\r\n34696:12967,\r\n34697:12968,\r\n34698:12849,\r\n34699:12850,\r\n34700:12857,\r\n34701:13182,\r\n34702:13181,\r\n34703:13180,\r\n34704:8786,\r\n34705:8801,\r\n34706:8747,\r\n34707:8750,\r\n34708:8721,\r\n34709:8730,\r\n34710:8869,\r\n34711:8736,\r\n34712:8735,\r\n34713:8895,\r\n34714:8757,\r\n34715:8745,\r\n34716:8746,\r\n34975:20124,\r\n34976:21782,\r\n34977:23043,\r\n34978:38463,\r\n34979:21696,\r\n34980:24859,\r\n34981:25384,\r\n34982:23030,\r\n34983:36898,\r\n34984:33909,\r\n34985:33564,\r\n34986:31312,\r\n34987:24746,\r\n34988:25569,\r\n34989:28197,\r\n34990:26093,\r\n34991:33894,\r\n34992:33446,\r\n34993:39925,\r\n34994:26771,\r\n34995:22311,\r\n34996:26017,\r\n34997:25201,\r\n34998:23451,\r\n34999:22992,\r\n35000:34427,\r\n35001:39156,\r\n35002:32098,\r\n35003:32190,\r\n35004:39822,\r\n35005:25110,\r\n35006:31903,\r\n35007:34999,\r\n35008:23433,\r\n35009:24245,\r\n35010:25353,\r\n35011:26263,\r\n35012:26696,\r\n35013:38343,\r\n35014:38797,\r\n35015:26447,\r\n35016:20197,\r\n35017:20234,\r\n35018:20301,\r\n35019:20381,\r\n35020:20553,\r\n35021:22258,\r\n35022:22839,\r\n35023:22996,\r\n35024:23041,\r\n35025:23561,\r\n35026:24799,\r\n35027:24847,\r\n35028:24944,\r\n35029:26131,\r\n35030:26885,\r\n35031:28858,\r\n35032:30031,\r\n35033:30064,\r\n35034:31227,\r\n35035:32173,\r\n35036:32239,\r\n35037:32963,\r\n35038:33806,\r\n35039:34915,\r\n35040:35586,\r\n35041:36949,\r\n35042:36986,\r\n35043:21307,\r\n35044:20117,\r\n35045:20133,\r\n35046:22495,\r\n35047:32946,\r\n35048:37057,\r\n35049:30959,\r\n35050:19968,\r\n35051:22769,\r\n35052:28322,\r\n35053:36920,\r\n35054:31282,\r\n35055:33576,\r\n35056:33419,\r\n35057:39983,\r\n35058:20801,\r\n35059:21360,\r\n35060:21693,\r\n35061:21729,\r\n35062:22240,\r\n35063:23035,\r\n35064:24341,\r\n35065:39154,\r\n35066:28139,\r\n35067:32996,\r\n35068:34093,\r\n35136:38498,\r\n35137:38512,\r\n35138:38560,\r\n35139:38907,\r\n35140:21515,\r\n35141:21491,\r\n35142:23431,\r\n35143:28879,\r\n35144:32701,\r\n35145:36802,\r\n35146:38632,\r\n35147:21359,\r\n35148:40284,\r\n35149:31418,\r\n35150:19985,\r\n35151:30867,\r\n35152:33276,\r\n35153:28198,\r\n35154:22040,\r\n35155:21764,\r\n35156:27421,\r\n35157:34074,\r\n35158:39995,\r\n35159:23013,\r\n35160:21417,\r\n35161:28006,\r\n35162:29916,\r\n35163:38287,\r\n35164:22082,\r\n35165:20113,\r\n35166:36939,\r\n35167:38642,\r\n35168:33615,\r\n35169:39180,\r\n35170:21473,\r\n35171:21942,\r\n35172:23344,\r\n35173:24433,\r\n35174:26144,\r\n35175:26355,\r\n35176:26628,\r\n35177:27704,\r\n35178:27891,\r\n35179:27945,\r\n35180:29787,\r\n35181:30408,\r\n35182:31310,\r\n35183:38964,\r\n35184:33521,\r\n35185:34907,\r\n35186:35424,\r\n35187:37613,\r\n35188:28082,\r\n35189:30123,\r\n35190:30410,\r\n35191:39365,\r\n35192:24742,\r\n35193:35585,\r\n35194:36234,\r\n35195:38322,\r\n35196:27022,\r\n35197:21421,\r\n35198:20870,\r\n35200:22290,\r\n35201:22576,\r\n35202:22852,\r\n35203:23476,\r\n35204:24310,\r\n35205:24616,\r\n35206:25513,\r\n35207:25588,\r\n35208:27839,\r\n35209:28436,\r\n35210:28814,\r\n35211:28948,\r\n35212:29017,\r\n35213:29141,\r\n35214:29503,\r\n35215:32257,\r\n35216:33398,\r\n35217:33489,\r\n35218:34199,\r\n35219:36960,\r\n35220:37467,\r\n35221:40219,\r\n35222:22633,\r\n35223:26044,\r\n35224:27738,\r\n35225:29989,\r\n35226:20985,\r\n35227:22830,\r\n35228:22885,\r\n35229:24448,\r\n35230:24540,\r\n35231:25276,\r\n35232:26106,\r\n35233:27178,\r\n35234:27431,\r\n35235:27572,\r\n35236:29579,\r\n35237:32705,\r\n35238:35158,\r\n35239:40236,\r\n35240:40206,\r\n35241:40644,\r\n35242:23713,\r\n35243:27798,\r\n35244:33659,\r\n35245:20740,\r\n35246:23627,\r\n35247:25014,\r\n35248:33222,\r\n35249:26742,\r\n35250:29281,\r\n35251:20057,\r\n35252:20474,\r\n35253:21368,\r\n35254:24681,\r\n35255:28201,\r\n35256:31311,\r\n35257:38899,\r\n35258:19979,\r\n35259:21270,\r\n35260:20206,\r\n35261:20309,\r\n35262:20285,\r\n35263:20385,\r\n35264:20339,\r\n35265:21152,\r\n35266:21487,\r\n35267:22025,\r\n35268:22799,\r\n35269:23233,\r\n35270:23478,\r\n35271:23521,\r\n35272:31185,\r\n35273:26247,\r\n35274:26524,\r\n35275:26550,\r\n35276:27468,\r\n35277:27827,\r\n35278:28779,\r\n35279:29634,\r\n35280:31117,\r\n35281:31166,\r\n35282:31292,\r\n35283:31623,\r\n35284:33457,\r\n35285:33499,\r\n35286:33540,\r\n35287:33655,\r\n35288:33775,\r\n35289:33747,\r\n35290:34662,\r\n35291:35506,\r\n35292:22057,\r\n35293:36008,\r\n35294:36838,\r\n35295:36942,\r\n35296:38686,\r\n35297:34442,\r\n35298:20420,\r\n35299:23784,\r\n35300:25105,\r\n35301:29273,\r\n35302:30011,\r\n35303:33253,\r\n35304:33469,\r\n35305:34558,\r\n35306:36032,\r\n35307:38597,\r\n35308:39187,\r\n35309:39381,\r\n35310:20171,\r\n35311:20250,\r\n35312:35299,\r\n35313:22238,\r\n35314:22602,\r\n35315:22730,\r\n35316:24315,\r\n35317:24555,\r\n35318:24618,\r\n35319:24724,\r\n35320:24674,\r\n35321:25040,\r\n35322:25106,\r\n35323:25296,\r\n35324:25913,\r\n35392:39745,\r\n35393:26214,\r\n35394:26800,\r\n35395:28023,\r\n35396:28784,\r\n35397:30028,\r\n35398:30342,\r\n35399:32117,\r\n35400:33445,\r\n35401:34809,\r\n35402:38283,\r\n35403:38542,\r\n35404:35997,\r\n35405:20977,\r\n35406:21182,\r\n35407:22806,\r\n35408:21683,\r\n35409:23475,\r\n35410:23830,\r\n35411:24936,\r\n35412:27010,\r\n35413:28079,\r\n35414:30861,\r\n35415:33995,\r\n35416:34903,\r\n35417:35442,\r\n35418:37799,\r\n35419:39608,\r\n35420:28012,\r\n35421:39336,\r\n35422:34521,\r\n35423:22435,\r\n35424:26623,\r\n35425:34510,\r\n35426:37390,\r\n35427:21123,\r\n35428:22151,\r\n35429:21508,\r\n35430:24275,\r\n35431:25313,\r\n35432:25785,\r\n35433:26684,\r\n35434:26680,\r\n35435:27579,\r\n35436:29554,\r\n35437:30906,\r\n35438:31339,\r\n35439:35226,\r\n35440:35282,\r\n35441:36203,\r\n35442:36611,\r\n35443:37101,\r\n35444:38307,\r\n35445:38548,\r\n35446:38761,\r\n35447:23398,\r\n35448:23731,\r\n35449:27005,\r\n35450:38989,\r\n35451:38990,\r\n35452:25499,\r\n35453:31520,\r\n35454:27179,\r\n35456:27263,\r\n35457:26806,\r\n35458:39949,\r\n35459:28511,\r\n35460:21106,\r\n35461:21917,\r\n35462:24688,\r\n35463:25324,\r\n35464:27963,\r\n35465:28167,\r\n35466:28369,\r\n35467:33883,\r\n35468:35088,\r\n35469:36676,\r\n35470:19988,\r\n35471:39993,\r\n35472:21494,\r\n35473:26907,\r\n35474:27194,\r\n35475:38788,\r\n35476:26666,\r\n35477:20828,\r\n35478:31427,\r\n35479:33970,\r\n35480:37340,\r\n35481:37772,\r\n35482:22107,\r\n35483:40232,\r\n35484:26658,\r\n35485:33541,\r\n35486:33841,\r\n35487:31909,\r\n35488:21000,\r\n35489:33477,\r\n35490:29926,\r\n35491:20094,\r\n35492:20355,\r\n35493:20896,\r\n35494:23506,\r\n35495:21002,\r\n35496:21208,\r\n35497:21223,\r\n35498:24059,\r\n35499:21914,\r\n35500:22570,\r\n35501:23014,\r\n35502:23436,\r\n35503:23448,\r\n35504:23515,\r\n35505:24178,\r\n35506:24185,\r\n35507:24739,\r\n35508:24863,\r\n35509:24931,\r\n35510:25022,\r\n35511:25563,\r\n35512:25954,\r\n35513:26577,\r\n35514:26707,\r\n35515:26874,\r\n35516:27454,\r\n35517:27475,\r\n35518:27735,\r\n35519:28450,\r\n35520:28567,\r\n35521:28485,\r\n35522:29872,\r\n35523:29976,\r\n35524:30435,\r\n35525:30475,\r\n35526:31487,\r\n35527:31649,\r\n35528:31777,\r\n35529:32233,\r\n35530:32566,\r\n35531:32752,\r\n35532:32925,\r\n35533:33382,\r\n35534:33694,\r\n35535:35251,\r\n35536:35532,\r\n35537:36011,\r\n35538:36996,\r\n35539:37969,\r\n35540:38291,\r\n35541:38289,\r\n35542:38306,\r\n35543:38501,\r\n35544:38867,\r\n35545:39208,\r\n35546:33304,\r\n35547:20024,\r\n35548:21547,\r\n35549:23736,\r\n35550:24012,\r\n35551:29609,\r\n35552:30284,\r\n35553:30524,\r\n35554:23721,\r\n35555:32747,\r\n35556:36107,\r\n35557:38593,\r\n35558:38929,\r\n35559:38996,\r\n35560:39000,\r\n35561:20225,\r\n35562:20238,\r\n35563:21361,\r\n35564:21916,\r\n35565:22120,\r\n35566:22522,\r\n35567:22855,\r\n35568:23305,\r\n35569:23492,\r\n35570:23696,\r\n35571:24076,\r\n35572:24190,\r\n35573:24524,\r\n35574:25582,\r\n35575:26426,\r\n35576:26071,\r\n35577:26082,\r\n35578:26399,\r\n35579:26827,\r\n35580:26820,\r\n35648:27231,\r\n35649:24112,\r\n35650:27589,\r\n35651:27671,\r\n35652:27773,\r\n35653:30079,\r\n35654:31048,\r\n35655:23395,\r\n35656:31232,\r\n35657:32000,\r\n35658:24509,\r\n35659:35215,\r\n35660:35352,\r\n35661:36020,\r\n35662:36215,\r\n35663:36556,\r\n35664:36637,\r\n35665:39138,\r\n35666:39438,\r\n35667:39740,\r\n35668:20096,\r\n35669:20605,\r\n35670:20736,\r\n35671:22931,\r\n35672:23452,\r\n35673:25135,\r\n35674:25216,\r\n35675:25836,\r\n35676:27450,\r\n35677:29344,\r\n35678:30097,\r\n35679:31047,\r\n35680:32681,\r\n35681:34811,\r\n35682:35516,\r\n35683:35696,\r\n35684:25516,\r\n35685:33738,\r\n35686:38816,\r\n35687:21513,\r\n35688:21507,\r\n35689:21931,\r\n35690:26708,\r\n35691:27224,\r\n35692:35440,\r\n35693:30759,\r\n35694:26485,\r\n35695:40653,\r\n35696:21364,\r\n35697:23458,\r\n35698:33050,\r\n35699:34384,\r\n35700:36870,\r\n35701:19992,\r\n35702:20037,\r\n35703:20167,\r\n35704:20241,\r\n35705:21450,\r\n35706:21560,\r\n35707:23470,\r\n35708:24339,\r\n35709:24613,\r\n35710:25937,\r\n35712:26429,\r\n35713:27714,\r\n35714:27762,\r\n35715:27875,\r\n35716:28792,\r\n35717:29699,\r\n35718:31350,\r\n35719:31406,\r\n35720:31496,\r\n35721:32026,\r\n35722:31998,\r\n35723:32102,\r\n35724:26087,\r\n35725:29275,\r\n35726:21435,\r\n35727:23621,\r\n35728:24040,\r\n35729:25298,\r\n35730:25312,\r\n35731:25369,\r\n35732:28192,\r\n35733:34394,\r\n35734:35377,\r\n35735:36317,\r\n35736:37624,\r\n35737:28417,\r\n35738:31142,\r\n35739:39770,\r\n35740:20136,\r\n35741:20139,\r\n35742:20140,\r\n35743:20379,\r\n35744:20384,\r\n35745:20689,\r\n35746:20807,\r\n35747:31478,\r\n35748:20849,\r\n35749:20982,\r\n35750:21332,\r\n35751:21281,\r\n35752:21375,\r\n35753:21483,\r\n35754:21932,\r\n35755:22659,\r\n35756:23777,\r\n35757:24375,\r\n35758:24394,\r\n35759:24623,\r\n35760:24656,\r\n35761:24685,\r\n35762:25375,\r\n35763:25945,\r\n35764:27211,\r\n35765:27841,\r\n35766:29378,\r\n35767:29421,\r\n35768:30703,\r\n35769:33016,\r\n35770:33029,\r\n35771:33288,\r\n35772:34126,\r\n35773:37111,\r\n35774:37857,\r\n35775:38911,\r\n35776:39255,\r\n35777:39514,\r\n35778:20208,\r\n35779:20957,\r\n35780:23597,\r\n35781:26241,\r\n35782:26989,\r\n35783:23616,\r\n35784:26354,\r\n35785:26997,\r\n35786:29577,\r\n35787:26704,\r\n35788:31873,\r\n35789:20677,\r\n35790:21220,\r\n35791:22343,\r\n35792:24062,\r\n35793:37670,\r\n35794:26020,\r\n35795:27427,\r\n35796:27453,\r\n35797:29748,\r\n35798:31105,\r\n35799:31165,\r\n35800:31563,\r\n35801:32202,\r\n35802:33465,\r\n35803:33740,\r\n35804:34943,\r\n35805:35167,\r\n35806:35641,\r\n35807:36817,\r\n35808:37329,\r\n35809:21535,\r\n35810:37504,\r\n35811:20061,\r\n35812:20534,\r\n35813:21477,\r\n35814:21306,\r\n35815:29399,\r\n35816:29590,\r\n35817:30697,\r\n35818:33510,\r\n35819:36527,\r\n35820:39366,\r\n35821:39368,\r\n35822:39378,\r\n35823:20855,\r\n35824:24858,\r\n35825:34398,\r\n35826:21936,\r\n35827:31354,\r\n35828:20598,\r\n35829:23507,\r\n35830:36935,\r\n35831:38533,\r\n35832:20018,\r\n35833:27355,\r\n35834:37351,\r\n35835:23633,\r\n35836:23624,\r\n35904:25496,\r\n35905:31391,\r\n35906:27795,\r\n35907:38772,\r\n35908:36705,\r\n35909:31402,\r\n35910:29066,\r\n35911:38536,\r\n35912:31874,\r\n35913:26647,\r\n35914:32368,\r\n35915:26705,\r\n35916:37740,\r\n35917:21234,\r\n35918:21531,\r\n35919:34219,\r\n35920:35347,\r\n35921:32676,\r\n35922:36557,\r\n35923:37089,\r\n35924:21350,\r\n35925:34952,\r\n35926:31041,\r\n35927:20418,\r\n35928:20670,\r\n35929:21009,\r\n35930:20804,\r\n35931:21843,\r\n35932:22317,\r\n35933:29674,\r\n35934:22411,\r\n35935:22865,\r\n35936:24418,\r\n35937:24452,\r\n35938:24693,\r\n35939:24950,\r\n35940:24935,\r\n35941:25001,\r\n35942:25522,\r\n35943:25658,\r\n35944:25964,\r\n35945:26223,\r\n35946:26690,\r\n35947:28179,\r\n35948:30054,\r\n35949:31293,\r\n35950:31995,\r\n35951:32076,\r\n35952:32153,\r\n35953:32331,\r\n35954:32619,\r\n35955:33550,\r\n35956:33610,\r\n35957:34509,\r\n35958:35336,\r\n35959:35427,\r\n35960:35686,\r\n35961:36605,\r\n35962:38938,\r\n35963:40335,\r\n35964:33464,\r\n35965:36814,\r\n35966:39912,\r\n35968:21127,\r\n35969:25119,\r\n35970:25731,\r\n35971:28608,\r\n35972:38553,\r\n35973:26689,\r\n35974:20625,\r\n35975:27424,\r\n35976:27770,\r\n35977:28500,\r\n35978:31348,\r\n35979:32080,\r\n35980:34880,\r\n35981:35363,\r\n35982:26376,\r\n35983:20214,\r\n35984:20537,\r\n35985:20518,\r\n35986:20581,\r\n35987:20860,\r\n35988:21048,\r\n35989:21091,\r\n35990:21927,\r\n35991:22287,\r\n35992:22533,\r\n35993:23244,\r\n35994:24314,\r\n35995:25010,\r\n35996:25080,\r\n35997:25331,\r\n35998:25458,\r\n35999:26908,\r\n36000:27177,\r\n36001:29309,\r\n36002:29356,\r\n36003:29486,\r\n36004:30740,\r\n36005:30831,\r\n36006:32121,\r\n36007:30476,\r\n36008:32937,\r\n36009:35211,\r\n36010:35609,\r\n36011:36066,\r\n36012:36562,\r\n36013:36963,\r\n36014:37749,\r\n36015:38522,\r\n36016:38997,\r\n36017:39443,\r\n36018:40568,\r\n36019:20803,\r\n36020:21407,\r\n36021:21427,\r\n36022:24187,\r\n36023:24358,\r\n36024:28187,\r\n36025:28304,\r\n36026:29572,\r\n36027:29694,\r\n36028:32067,\r\n36029:33335,\r\n36030:35328,\r\n36031:35578,\r\n36032:38480,\r\n36033:20046,\r\n36034:20491,\r\n36035:21476,\r\n36036:21628,\r\n36037:22266,\r\n36038:22993,\r\n36039:23396,\r\n36040:24049,\r\n36041:24235,\r\n36042:24359,\r\n36043:25144,\r\n36044:25925,\r\n36045:26543,\r\n36046:28246,\r\n36047:29392,\r\n36048:31946,\r\n36049:34996,\r\n36050:32929,\r\n36051:32993,\r\n36052:33776,\r\n36053:34382,\r\n36054:35463,\r\n36055:36328,\r\n36056:37431,\r\n36057:38599,\r\n36058:39015,\r\n36059:40723,\r\n36060:20116,\r\n36061:20114,\r\n36062:20237,\r\n36063:21320,\r\n36064:21577,\r\n36065:21566,\r\n36066:23087,\r\n36067:24460,\r\n36068:24481,\r\n36069:24735,\r\n36070:26791,\r\n36071:27278,\r\n36072:29786,\r\n36073:30849,\r\n36074:35486,\r\n36075:35492,\r\n36076:35703,\r\n36077:37264,\r\n36078:20062,\r\n36079:39881,\r\n36080:20132,\r\n36081:20348,\r\n36082:20399,\r\n36083:20505,\r\n36084:20502,\r\n36085:20809,\r\n36086:20844,\r\n36087:21151,\r\n36088:21177,\r\n36089:21246,\r\n36090:21402,\r\n36091:21475,\r\n36092:21521,\r\n36160:21518,\r\n36161:21897,\r\n36162:22353,\r\n36163:22434,\r\n36164:22909,\r\n36165:23380,\r\n36166:23389,\r\n36167:23439,\r\n36168:24037,\r\n36169:24039,\r\n36170:24055,\r\n36171:24184,\r\n36172:24195,\r\n36173:24218,\r\n36174:24247,\r\n36175:24344,\r\n36176:24658,\r\n36177:24908,\r\n36178:25239,\r\n36179:25304,\r\n36180:25511,\r\n36181:25915,\r\n36182:26114,\r\n36183:26179,\r\n36184:26356,\r\n36185:26477,\r\n36186:26657,\r\n36187:26775,\r\n36188:27083,\r\n36189:27743,\r\n36190:27946,\r\n36191:28009,\r\n36192:28207,\r\n36193:28317,\r\n36194:30002,\r\n36195:30343,\r\n36196:30828,\r\n36197:31295,\r\n36198:31968,\r\n36199:32005,\r\n36200:32024,\r\n36201:32094,\r\n36202:32177,\r\n36203:32789,\r\n36204:32771,\r\n36205:32943,\r\n36206:32945,\r\n36207:33108,\r\n36208:33167,\r\n36209:33322,\r\n36210:33618,\r\n36211:34892,\r\n36212:34913,\r\n36213:35611,\r\n36214:36002,\r\n36215:36092,\r\n36216:37066,\r\n36217:37237,\r\n36218:37489,\r\n36219:30783,\r\n36220:37628,\r\n36221:38308,\r\n36222:38477,\r\n36224:38917,\r\n36225:39321,\r\n36226:39640,\r\n36227:40251,\r\n36228:21083,\r\n36229:21163,\r\n36230:21495,\r\n36231:21512,\r\n36232:22741,\r\n36233:25335,\r\n36234:28640,\r\n36235:35946,\r\n36236:36703,\r\n36237:40633,\r\n36238:20811,\r\n36239:21051,\r\n36240:21578,\r\n36241:22269,\r\n36242:31296,\r\n36243:37239,\r\n36244:40288,\r\n36245:40658,\r\n36246:29508,\r\n36247:28425,\r\n36248:33136,\r\n36249:29969,\r\n36250:24573,\r\n36251:24794,\r\n36252:39592,\r\n36253:29403,\r\n36254:36796,\r\n36255:27492,\r\n36256:38915,\r\n36257:20170,\r\n36258:22256,\r\n36259:22372,\r\n36260:22718,\r\n36261:23130,\r\n36262:24680,\r\n36263:25031,\r\n36264:26127,\r\n36265:26118,\r\n36266:26681,\r\n36267:26801,\r\n36268:28151,\r\n36269:30165,\r\n36270:32058,\r\n36271:33390,\r\n36272:39746,\r\n36273:20123,\r\n36274:20304,\r\n36275:21449,\r\n36276:21766,\r\n36277:23919,\r\n36278:24038,\r\n36279:24046,\r\n36280:26619,\r\n36281:27801,\r\n36282:29811,\r\n36283:30722,\r\n36284:35408,\r\n36285:37782,\r\n36286:35039,\r\n36287:22352,\r\n36288:24231,\r\n36289:25387,\r\n36290:20661,\r\n36291:20652,\r\n36292:20877,\r\n36293:26368,\r\n36294:21705,\r\n36295:22622,\r\n36296:22971,\r\n36297:23472,\r\n36298:24425,\r\n36299:25165,\r\n36300:25505,\r\n36301:26685,\r\n36302:27507,\r\n36303:28168,\r\n36304:28797,\r\n36305:37319,\r\n36306:29312,\r\n36307:30741,\r\n36308:30758,\r\n36309:31085,\r\n36310:25998,\r\n36311:32048,\r\n36312:33756,\r\n36313:35009,\r\n36314:36617,\r\n36315:38555,\r\n36316:21092,\r\n36317:22312,\r\n36318:26448,\r\n36319:32618,\r\n36320:36001,\r\n36321:20916,\r\n36322:22338,\r\n36323:38442,\r\n36324:22586,\r\n36325:27018,\r\n36326:32948,\r\n36327:21682,\r\n36328:23822,\r\n36329:22524,\r\n36330:30869,\r\n36331:40442,\r\n36332:20316,\r\n36333:21066,\r\n36334:21643,\r\n36335:25662,\r\n36336:26152,\r\n36337:26388,\r\n36338:26613,\r\n36339:31364,\r\n36340:31574,\r\n36341:32034,\r\n36342:37679,\r\n36343:26716,\r\n36344:39853,\r\n36345:31545,\r\n36346:21273,\r\n36347:20874,\r\n36348:21047,\r\n36416:23519,\r\n36417:25334,\r\n36418:25774,\r\n36419:25830,\r\n36420:26413,\r\n36421:27578,\r\n36422:34217,\r\n36423:38609,\r\n36424:30352,\r\n36425:39894,\r\n36426:25420,\r\n36427:37638,\r\n36428:39851,\r\n36429:30399,\r\n36430:26194,\r\n36431:19977,\r\n36432:20632,\r\n36433:21442,\r\n36434:23665,\r\n36435:24808,\r\n36436:25746,\r\n36437:25955,\r\n36438:26719,\r\n36439:29158,\r\n36440:29642,\r\n36441:29987,\r\n36442:31639,\r\n36443:32386,\r\n36444:34453,\r\n36445:35715,\r\n36446:36059,\r\n36447:37240,\r\n36448:39184,\r\n36449:26028,\r\n36450:26283,\r\n36451:27531,\r\n36452:20181,\r\n36453:20180,\r\n36454:20282,\r\n36455:20351,\r\n36456:21050,\r\n36457:21496,\r\n36458:21490,\r\n36459:21987,\r\n36460:22235,\r\n36461:22763,\r\n36462:22987,\r\n36463:22985,\r\n36464:23039,\r\n36465:23376,\r\n36466:23629,\r\n36467:24066,\r\n36468:24107,\r\n36469:24535,\r\n36470:24605,\r\n36471:25351,\r\n36472:25903,\r\n36473:23388,\r\n36474:26031,\r\n36475:26045,\r\n36476:26088,\r\n36477:26525,\r\n36478:27490,\r\n36480:27515,\r\n36481:27663,\r\n36482:29509,\r\n36483:31049,\r\n36484:31169,\r\n36485:31992,\r\n36486:32025,\r\n36487:32043,\r\n36488:32930,\r\n36489:33026,\r\n36490:33267,\r\n36491:35222,\r\n36492:35422,\r\n36493:35433,\r\n36494:35430,\r\n36495:35468,\r\n36496:35566,\r\n36497:36039,\r\n36498:36060,\r\n36499:38604,\r\n36500:39164,\r\n36501:27503,\r\n36502:20107,\r\n36503:20284,\r\n36504:20365,\r\n36505:20816,\r\n36506:23383,\r\n36507:23546,\r\n36508:24904,\r\n36509:25345,\r\n36510:26178,\r\n36511:27425,\r\n36512:28363,\r\n36513:27835,\r\n36514:29246,\r\n36515:29885,\r\n36516:30164,\r\n36517:30913,\r\n36518:31034,\r\n36519:32780,\r\n36520:32819,\r\n36521:33258,\r\n36522:33940,\r\n36523:36766,\r\n36524:27728,\r\n36525:40575,\r\n36526:24335,\r\n36527:35672,\r\n36528:40235,\r\n36529:31482,\r\n36530:36600,\r\n36531:23437,\r\n36532:38635,\r\n36533:19971,\r\n36534:21489,\r\n36535:22519,\r\n36536:22833,\r\n36537:23241,\r\n36538:23460,\r\n36539:24713,\r\n36540:28287,\r\n36541:28422,\r\n36542:30142,\r\n36543:36074,\r\n36544:23455,\r\n36545:34048,\r\n36546:31712,\r\n36547:20594,\r\n36548:26612,\r\n36549:33437,\r\n36550:23649,\r\n36551:34122,\r\n36552:32286,\r\n36553:33294,\r\n36554:20889,\r\n36555:23556,\r\n36556:25448,\r\n36557:36198,\r\n36558:26012,\r\n36559:29038,\r\n36560:31038,\r\n36561:32023,\r\n36562:32773,\r\n36563:35613,\r\n36564:36554,\r\n36565:36974,\r\n36566:34503,\r\n36567:37034,\r\n36568:20511,\r\n36569:21242,\r\n36570:23610,\r\n36571:26451,\r\n36572:28796,\r\n36573:29237,\r\n36574:37196,\r\n36575:37320,\r\n36576:37675,\r\n36577:33509,\r\n36578:23490,\r\n36579:24369,\r\n36580:24825,\r\n36581:20027,\r\n36582:21462,\r\n36583:23432,\r\n36584:25163,\r\n36585:26417,\r\n36586:27530,\r\n36587:29417,\r\n36588:29664,\r\n36589:31278,\r\n36590:33131,\r\n36591:36259,\r\n36592:37202,\r\n36593:39318,\r\n36594:20754,\r\n36595:21463,\r\n36596:21610,\r\n36597:23551,\r\n36598:25480,\r\n36599:27193,\r\n36600:32172,\r\n36601:38656,\r\n36602:22234,\r\n36603:21454,\r\n36604:21608,\r\n36672:23447,\r\n36673:23601,\r\n36674:24030,\r\n36675:20462,\r\n36676:24833,\r\n36677:25342,\r\n36678:27954,\r\n36679:31168,\r\n36680:31179,\r\n36681:32066,\r\n36682:32333,\r\n36683:32722,\r\n36684:33261,\r\n36685:33311,\r\n36686:33936,\r\n36687:34886,\r\n36688:35186,\r\n36689:35728,\r\n36690:36468,\r\n36691:36655,\r\n36692:36913,\r\n36693:37195,\r\n36694:37228,\r\n36695:38598,\r\n36696:37276,\r\n36697:20160,\r\n36698:20303,\r\n36699:20805,\r\n36700:21313,\r\n36701:24467,\r\n36702:25102,\r\n36703:26580,\r\n36704:27713,\r\n36705:28171,\r\n36706:29539,\r\n36707:32294,\r\n36708:37325,\r\n36709:37507,\r\n36710:21460,\r\n36711:22809,\r\n36712:23487,\r\n36713:28113,\r\n36714:31069,\r\n36715:32302,\r\n36716:31899,\r\n36717:22654,\r\n36718:29087,\r\n36719:20986,\r\n36720:34899,\r\n36721:36848,\r\n36722:20426,\r\n36723:23803,\r\n36724:26149,\r\n36725:30636,\r\n36726:31459,\r\n36727:33308,\r\n36728:39423,\r\n36729:20934,\r\n36730:24490,\r\n36731:26092,\r\n36732:26991,\r\n36733:27529,\r\n36734:28147,\r\n36736:28310,\r\n36737:28516,\r\n36738:30462,\r\n36739:32020,\r\n36740:24033,\r\n36741:36981,\r\n36742:37255,\r\n36743:38918,\r\n36744:20966,\r\n36745:21021,\r\n36746:25152,\r\n36747:26257,\r\n36748:26329,\r\n36749:28186,\r\n36750:24246,\r\n36751:32210,\r\n36752:32626,\r\n36753:26360,\r\n36754:34223,\r\n36755:34295,\r\n36756:35576,\r\n36757:21161,\r\n36758:21465,\r\n36759:22899,\r\n36760:24207,\r\n36761:24464,\r\n36762:24661,\r\n36763:37604,\r\n36764:38500,\r\n36765:20663,\r\n36766:20767,\r\n36767:21213,\r\n36768:21280,\r\n36769:21319,\r\n36770:21484,\r\n36771:21736,\r\n36772:21830,\r\n36773:21809,\r\n36774:22039,\r\n36775:22888,\r\n36776:22974,\r\n36777:23100,\r\n36778:23477,\r\n36779:23558,\r\n36780:23567,\r\n36781:23569,\r\n36782:23578,\r\n36783:24196,\r\n36784:24202,\r\n36785:24288,\r\n36786:24432,\r\n36787:25215,\r\n36788:25220,\r\n36789:25307,\r\n36790:25484,\r\n36791:25463,\r\n36792:26119,\r\n36793:26124,\r\n36794:26157,\r\n36795:26230,\r\n36796:26494,\r\n36797:26786,\r\n36798:27167,\r\n36799:27189,\r\n36800:27836,\r\n36801:28040,\r\n36802:28169,\r\n36803:28248,\r\n36804:28988,\r\n36805:28966,\r\n36806:29031,\r\n36807:30151,\r\n36808:30465,\r\n36809:30813,\r\n36810:30977,\r\n36811:31077,\r\n36812:31216,\r\n36813:31456,\r\n36814:31505,\r\n36815:31911,\r\n36816:32057,\r\n36817:32918,\r\n36818:33750,\r\n36819:33931,\r\n36820:34121,\r\n36821:34909,\r\n36822:35059,\r\n36823:35359,\r\n36824:35388,\r\n36825:35412,\r\n36826:35443,\r\n36827:35937,\r\n36828:36062,\r\n36829:37284,\r\n36830:37478,\r\n36831:37758,\r\n36832:37912,\r\n36833:38556,\r\n36834:38808,\r\n36835:19978,\r\n36836:19976,\r\n36837:19998,\r\n36838:20055,\r\n36839:20887,\r\n36840:21104,\r\n36841:22478,\r\n36842:22580,\r\n36843:22732,\r\n36844:23330,\r\n36845:24120,\r\n36846:24773,\r\n36847:25854,\r\n36848:26465,\r\n36849:26454,\r\n36850:27972,\r\n36851:29366,\r\n36852:30067,\r\n36853:31331,\r\n36854:33976,\r\n36855:35698,\r\n36856:37304,\r\n36857:37664,\r\n36858:22065,\r\n36859:22516,\r\n36860:39166,\r\n36928:25325,\r\n36929:26893,\r\n36930:27542,\r\n36931:29165,\r\n36932:32340,\r\n36933:32887,\r\n36934:33394,\r\n36935:35302,\r\n36936:39135,\r\n36937:34645,\r\n36938:36785,\r\n36939:23611,\r\n36940:20280,\r\n36941:20449,\r\n36942:20405,\r\n36943:21767,\r\n36944:23072,\r\n36945:23517,\r\n36946:23529,\r\n36947:24515,\r\n36948:24910,\r\n36949:25391,\r\n36950:26032,\r\n36951:26187,\r\n36952:26862,\r\n36953:27035,\r\n36954:28024,\r\n36955:28145,\r\n36956:30003,\r\n36957:30137,\r\n36958:30495,\r\n36959:31070,\r\n36960:31206,\r\n36961:32051,\r\n36962:33251,\r\n36963:33455,\r\n36964:34218,\r\n36965:35242,\r\n36966:35386,\r\n36967:36523,\r\n36968:36763,\r\n36969:36914,\r\n36970:37341,\r\n36971:38663,\r\n36972:20154,\r\n36973:20161,\r\n36974:20995,\r\n36975:22645,\r\n36976:22764,\r\n36977:23563,\r\n36978:29978,\r\n36979:23613,\r\n36980:33102,\r\n36981:35338,\r\n36982:36805,\r\n36983:38499,\r\n36984:38765,\r\n36985:31525,\r\n36986:35535,\r\n36987:38920,\r\n36988:37218,\r\n36989:22259,\r\n36990:21416,\r\n36992:36887,\r\n36993:21561,\r\n36994:22402,\r\n36995:24101,\r\n36996:25512,\r\n36997:27700,\r\n36998:28810,\r\n36999:30561,\r\n37000:31883,\r\n37001:32736,\r\n37002:34928,\r\n37003:36930,\r\n37004:37204,\r\n37005:37648,\r\n37006:37656,\r\n37007:38543,\r\n37008:29790,\r\n37009:39620,\r\n37010:23815,\r\n37011:23913,\r\n37012:25968,\r\n37013:26530,\r\n37014:36264,\r\n37015:38619,\r\n37016:25454,\r\n37017:26441,\r\n37018:26905,\r\n37019:33733,\r\n37020:38935,\r\n37021:38592,\r\n37022:35070,\r\n37023:28548,\r\n37024:25722,\r\n37025:23544,\r\n37026:19990,\r\n37027:28716,\r\n37028:30045,\r\n37029:26159,\r\n37030:20932,\r\n37031:21046,\r\n37032:21218,\r\n37033:22995,\r\n37034:24449,\r\n37035:24615,\r\n37036:25104,\r\n37037:25919,\r\n37038:25972,\r\n37039:26143,\r\n37040:26228,\r\n37041:26866,\r\n37042:26646,\r\n37043:27491,\r\n37044:28165,\r\n37045:29298,\r\n37046:29983,\r\n37047:30427,\r\n37048:31934,\r\n37049:32854,\r\n37050:22768,\r\n37051:35069,\r\n37052:35199,\r\n37053:35488,\r\n37054:35475,\r\n37055:35531,\r\n37056:36893,\r\n37057:37266,\r\n37058:38738,\r\n37059:38745,\r\n37060:25993,\r\n37061:31246,\r\n37062:33030,\r\n37063:38587,\r\n37064:24109,\r\n37065:24796,\r\n37066:25114,\r\n37067:26021,\r\n37068:26132,\r\n37069:26512,\r\n37070:30707,\r\n37071:31309,\r\n37072:31821,\r\n37073:32318,\r\n37074:33034,\r\n37075:36012,\r\n37076:36196,\r\n37077:36321,\r\n37078:36447,\r\n37079:30889,\r\n37080:20999,\r\n37081:25305,\r\n37082:25509,\r\n37083:25666,\r\n37084:25240,\r\n37085:35373,\r\n37086:31363,\r\n37087:31680,\r\n37088:35500,\r\n37089:38634,\r\n37090:32118,\r\n37091:33292,\r\n37092:34633,\r\n37093:20185,\r\n37094:20808,\r\n37095:21315,\r\n37096:21344,\r\n37097:23459,\r\n37098:23554,\r\n37099:23574,\r\n37100:24029,\r\n37101:25126,\r\n37102:25159,\r\n37103:25776,\r\n37104:26643,\r\n37105:26676,\r\n37106:27849,\r\n37107:27973,\r\n37108:27927,\r\n37109:26579,\r\n37110:28508,\r\n37111:29006,\r\n37112:29053,\r\n37113:26059,\r\n37114:31359,\r\n37115:31661,\r\n37116:32218,\r\n37184:32330,\r\n37185:32680,\r\n37186:33146,\r\n37187:33307,\r\n37188:33337,\r\n37189:34214,\r\n37190:35438,\r\n37191:36046,\r\n37192:36341,\r\n37193:36984,\r\n37194:36983,\r\n37195:37549,\r\n37196:37521,\r\n37197:38275,\r\n37198:39854,\r\n37199:21069,\r\n37200:21892,\r\n37201:28472,\r\n37202:28982,\r\n37203:20840,\r\n37204:31109,\r\n37205:32341,\r\n37206:33203,\r\n37207:31950,\r\n37208:22092,\r\n37209:22609,\r\n37210:23720,\r\n37211:25514,\r\n37212:26366,\r\n37213:26365,\r\n37214:26970,\r\n37215:29401,\r\n37216:30095,\r\n37217:30094,\r\n37218:30990,\r\n37219:31062,\r\n37220:31199,\r\n37221:31895,\r\n37222:32032,\r\n37223:32068,\r\n37224:34311,\r\n37225:35380,\r\n37226:38459,\r\n37227:36961,\r\n37228:40736,\r\n37229:20711,\r\n37230:21109,\r\n37231:21452,\r\n37232:21474,\r\n37233:20489,\r\n37234:21930,\r\n37235:22766,\r\n37236:22863,\r\n37237:29245,\r\n37238:23435,\r\n37239:23652,\r\n37240:21277,\r\n37241:24803,\r\n37242:24819,\r\n37243:25436,\r\n37244:25475,\r\n37245:25407,\r\n37246:25531,\r\n37248:25805,\r\n37249:26089,\r\n37250:26361,\r\n37251:24035,\r\n37252:27085,\r\n37253:27133,\r\n37254:28437,\r\n37255:29157,\r\n37256:20105,\r\n37257:30185,\r\n37258:30456,\r\n37259:31379,\r\n37260:31967,\r\n37261:32207,\r\n37262:32156,\r\n37263:32865,\r\n37264:33609,\r\n37265:33624,\r\n37266:33900,\r\n37267:33980,\r\n37268:34299,\r\n37269:35013,\r\n37270:36208,\r\n37271:36865,\r\n37272:36973,\r\n37273:37783,\r\n37274:38684,\r\n37275:39442,\r\n37276:20687,\r\n37277:22679,\r\n37278:24974,\r\n37279:33235,\r\n37280:34101,\r\n37281:36104,\r\n37282:36896,\r\n37283:20419,\r\n37284:20596,\r\n37285:21063,\r\n37286:21363,\r\n37287:24687,\r\n37288:25417,\r\n37289:26463,\r\n37290:28204,\r\n37291:36275,\r\n37292:36895,\r\n37293:20439,\r\n37294:23646,\r\n37295:36042,\r\n37296:26063,\r\n37297:32154,\r\n37298:21330,\r\n37299:34966,\r\n37300:20854,\r\n37301:25539,\r\n37302:23384,\r\n37303:23403,\r\n37304:23562,\r\n37305:25613,\r\n37306:26449,\r\n37307:36956,\r\n37308:20182,\r\n37309:22810,\r\n37310:22826,\r\n37311:27760,\r\n37312:35409,\r\n37313:21822,\r\n37314:22549,\r\n37315:22949,\r\n37316:24816,\r\n37317:25171,\r\n37318:26561,\r\n37319:33333,\r\n37320:26965,\r\n37321:38464,\r\n37322:39364,\r\n37323:39464,\r\n37324:20307,\r\n37325:22534,\r\n37326:23550,\r\n37327:32784,\r\n37328:23729,\r\n37329:24111,\r\n37330:24453,\r\n37331:24608,\r\n37332:24907,\r\n37333:25140,\r\n37334:26367,\r\n37335:27888,\r\n37336:28382,\r\n37337:32974,\r\n37338:33151,\r\n37339:33492,\r\n37340:34955,\r\n37341:36024,\r\n37342:36864,\r\n37343:36910,\r\n37344:38538,\r\n37345:40667,\r\n37346:39899,\r\n37347:20195,\r\n37348:21488,\r\n37349:22823,\r\n37350:31532,\r\n37351:37261,\r\n37352:38988,\r\n37353:40441,\r\n37354:28381,\r\n37355:28711,\r\n37356:21331,\r\n37357:21828,\r\n37358:23429,\r\n37359:25176,\r\n37360:25246,\r\n37361:25299,\r\n37362:27810,\r\n37363:28655,\r\n37364:29730,\r\n37365:35351,\r\n37366:37944,\r\n37367:28609,\r\n37368:35582,\r\n37369:33592,\r\n37370:20967,\r\n37371:34552,\r\n37372:21482,\r\n37440:21481,\r\n37441:20294,\r\n37442:36948,\r\n37443:36784,\r\n37444:22890,\r\n37445:33073,\r\n37446:24061,\r\n37447:31466,\r\n37448:36799,\r\n37449:26842,\r\n37450:35895,\r\n37451:29432,\r\n37452:40008,\r\n37453:27197,\r\n37454:35504,\r\n37455:20025,\r\n37456:21336,\r\n37457:22022,\r\n37458:22374,\r\n37459:25285,\r\n37460:25506,\r\n37461:26086,\r\n37462:27470,\r\n37463:28129,\r\n37464:28251,\r\n37465:28845,\r\n37466:30701,\r\n37467:31471,\r\n37468:31658,\r\n37469:32187,\r\n37470:32829,\r\n37471:32966,\r\n37472:34507,\r\n37473:35477,\r\n37474:37723,\r\n37475:22243,\r\n37476:22727,\r\n37477:24382,\r\n37478:26029,\r\n37479:26262,\r\n37480:27264,\r\n37481:27573,\r\n37482:30007,\r\n37483:35527,\r\n37484:20516,\r\n37485:30693,\r\n37486:22320,\r\n37487:24347,\r\n37488:24677,\r\n37489:26234,\r\n37490:27744,\r\n37491:30196,\r\n37492:31258,\r\n37493:32622,\r\n37494:33268,\r\n37495:34584,\r\n37496:36933,\r\n37497:39347,\r\n37498:31689,\r\n37499:30044,\r\n37500:31481,\r\n37501:31569,\r\n37502:33988,\r\n37504:36880,\r\n37505:31209,\r\n37506:31378,\r\n37507:33590,\r\n37508:23265,\r\n37509:30528,\r\n37510:20013,\r\n37511:20210,\r\n37512:23449,\r\n37513:24544,\r\n37514:25277,\r\n37515:26172,\r\n37516:26609,\r\n37517:27880,\r\n37518:34411,\r\n37519:34935,\r\n37520:35387,\r\n37521:37198,\r\n37522:37619,\r\n37523:39376,\r\n37524:27159,\r\n37525:28710,\r\n37526:29482,\r\n37527:33511,\r\n37528:33879,\r\n37529:36015,\r\n37530:19969,\r\n37531:20806,\r\n37532:20939,\r\n37533:21899,\r\n37534:23541,\r\n37535:24086,\r\n37536:24115,\r\n37537:24193,\r\n37538:24340,\r\n37539:24373,\r\n37540:24427,\r\n37541:24500,\r\n37542:25074,\r\n37543:25361,\r\n37544:26274,\r\n37545:26397,\r\n37546:28526,\r\n37547:29266,\r\n37548:30010,\r\n37549:30522,\r\n37550:32884,\r\n37551:33081,\r\n37552:33144,\r\n37553:34678,\r\n37554:35519,\r\n37555:35548,\r\n37556:36229,\r\n37557:36339,\r\n37558:37530,\r\n37559:38263,\r\n37560:38914,\r\n37561:40165,\r\n37562:21189,\r\n37563:25431,\r\n37564:30452,\r\n37565:26389,\r\n37566:27784,\r\n37567:29645,\r\n37568:36035,\r\n37569:37806,\r\n37570:38515,\r\n37571:27941,\r\n37572:22684,\r\n37573:26894,\r\n37574:27084,\r\n37575:36861,\r\n37576:37786,\r\n37577:30171,\r\n37578:36890,\r\n37579:22618,\r\n37580:26626,\r\n37581:25524,\r\n37582:27131,\r\n37583:20291,\r\n37584:28460,\r\n37585:26584,\r\n37586:36795,\r\n37587:34086,\r\n37588:32180,\r\n37589:37716,\r\n37590:26943,\r\n37591:28528,\r\n37592:22378,\r\n37593:22775,\r\n37594:23340,\r\n37595:32044,\r\n37596:29226,\r\n37597:21514,\r\n37598:37347,\r\n37599:40372,\r\n37600:20141,\r\n37601:20302,\r\n37602:20572,\r\n37603:20597,\r\n37604:21059,\r\n37605:35998,\r\n37606:21576,\r\n37607:22564,\r\n37608:23450,\r\n37609:24093,\r\n37610:24213,\r\n37611:24237,\r\n37612:24311,\r\n37613:24351,\r\n37614:24716,\r\n37615:25269,\r\n37616:25402,\r\n37617:25552,\r\n37618:26799,\r\n37619:27712,\r\n37620:30855,\r\n37621:31118,\r\n37622:31243,\r\n37623:32224,\r\n37624:33351,\r\n37625:35330,\r\n37626:35558,\r\n37627:36420,\r\n37628:36883,\r\n37696:37048,\r\n37697:37165,\r\n37698:37336,\r\n37699:40718,\r\n37700:27877,\r\n37701:25688,\r\n37702:25826,\r\n37703:25973,\r\n37704:28404,\r\n37705:30340,\r\n37706:31515,\r\n37707:36969,\r\n37708:37841,\r\n37709:28346,\r\n37710:21746,\r\n37711:24505,\r\n37712:25764,\r\n37713:36685,\r\n37714:36845,\r\n37715:37444,\r\n37716:20856,\r\n37717:22635,\r\n37718:22825,\r\n37719:23637,\r\n37720:24215,\r\n37721:28155,\r\n37722:32399,\r\n37723:29980,\r\n37724:36028,\r\n37725:36578,\r\n37726:39003,\r\n37727:28857,\r\n37728:20253,\r\n37729:27583,\r\n37730:28593,\r\n37731:30000,\r\n37732:38651,\r\n37733:20814,\r\n37734:21520,\r\n37735:22581,\r\n37736:22615,\r\n37737:22956,\r\n37738:23648,\r\n37739:24466,\r\n37740:26007,\r\n37741:26460,\r\n37742:28193,\r\n37743:30331,\r\n37744:33759,\r\n37745:36077,\r\n37746:36884,\r\n37747:37117,\r\n37748:37709,\r\n37749:30757,\r\n37750:30778,\r\n37751:21162,\r\n37752:24230,\r\n37753:22303,\r\n37754:22900,\r\n37755:24594,\r\n37756:20498,\r\n37757:20826,\r\n37758:20908,\r\n37760:20941,\r\n37761:20992,\r\n37762:21776,\r\n37763:22612,\r\n37764:22616,\r\n37765:22871,\r\n37766:23445,\r\n37767:23798,\r\n37768:23947,\r\n37769:24764,\r\n37770:25237,\r\n37771:25645,\r\n37772:26481,\r\n37773:26691,\r\n37774:26812,\r\n37775:26847,\r\n37776:30423,\r\n37777:28120,\r\n37778:28271,\r\n37779:28059,\r\n37780:28783,\r\n37781:29128,\r\n37782:24403,\r\n37783:30168,\r\n37784:31095,\r\n37785:31561,\r\n37786:31572,\r\n37787:31570,\r\n37788:31958,\r\n37789:32113,\r\n37790:21040,\r\n37791:33891,\r\n37792:34153,\r\n37793:34276,\r\n37794:35342,\r\n37795:35588,\r\n37796:35910,\r\n37797:36367,\r\n37798:36867,\r\n37799:36879,\r\n37800:37913,\r\n37801:38518,\r\n37802:38957,\r\n37803:39472,\r\n37804:38360,\r\n37805:20685,\r\n37806:21205,\r\n37807:21516,\r\n37808:22530,\r\n37809:23566,\r\n37810:24999,\r\n37811:25758,\r\n37812:27934,\r\n37813:30643,\r\n37814:31461,\r\n37815:33012,\r\n37816:33796,\r\n37817:36947,\r\n37818:37509,\r\n37819:23776,\r\n37820:40199,\r\n37821:21311,\r\n37822:24471,\r\n37823:24499,\r\n37824:28060,\r\n37825:29305,\r\n37826:30563,\r\n37827:31167,\r\n37828:31716,\r\n37829:27602,\r\n37830:29420,\r\n37831:35501,\r\n37832:26627,\r\n37833:27233,\r\n37834:20984,\r\n37835:31361,\r\n37836:26932,\r\n37837:23626,\r\n37838:40182,\r\n37839:33515,\r\n37840:23493,\r\n37841:37193,\r\n37842:28702,\r\n37843:22136,\r\n37844:23663,\r\n37845:24775,\r\n37846:25958,\r\n37847:27788,\r\n37848:35930,\r\n37849:36929,\r\n37850:38931,\r\n37851:21585,\r\n37852:26311,\r\n37853:37389,\r\n37854:22856,\r\n37855:37027,\r\n37856:20869,\r\n37857:20045,\r\n37858:20970,\r\n37859:34201,\r\n37860:35598,\r\n37861:28760,\r\n37862:25466,\r\n37863:37707,\r\n37864:26978,\r\n37865:39348,\r\n37866:32260,\r\n37867:30071,\r\n37868:21335,\r\n37869:26976,\r\n37870:36575,\r\n37871:38627,\r\n37872:27741,\r\n37873:20108,\r\n37874:23612,\r\n37875:24336,\r\n37876:36841,\r\n37877:21250,\r\n37878:36049,\r\n37879:32905,\r\n37880:34425,\r\n37881:24319,\r\n37882:26085,\r\n37883:20083,\r\n37884:20837,\r\n37952:22914,\r\n37953:23615,\r\n37954:38894,\r\n37955:20219,\r\n37956:22922,\r\n37957:24525,\r\n37958:35469,\r\n37959:28641,\r\n37960:31152,\r\n37961:31074,\r\n37962:23527,\r\n37963:33905,\r\n37964:29483,\r\n37965:29105,\r\n37966:24180,\r\n37967:24565,\r\n37968:25467,\r\n37969:25754,\r\n37970:29123,\r\n37971:31896,\r\n37972:20035,\r\n37973:24316,\r\n37974:20043,\r\n37975:22492,\r\n37976:22178,\r\n37977:24745,\r\n37978:28611,\r\n37979:32013,\r\n37980:33021,\r\n37981:33075,\r\n37982:33215,\r\n37983:36786,\r\n37984:35223,\r\n37985:34468,\r\n37986:24052,\r\n37987:25226,\r\n37988:25773,\r\n37989:35207,\r\n37990:26487,\r\n37991:27874,\r\n37992:27966,\r\n37993:29750,\r\n37994:30772,\r\n37995:23110,\r\n37996:32629,\r\n37997:33453,\r\n37998:39340,\r\n37999:20467,\r\n38000:24259,\r\n38001:25309,\r\n38002:25490,\r\n38003:25943,\r\n38004:26479,\r\n38005:30403,\r\n38006:29260,\r\n38007:32972,\r\n38008:32954,\r\n38009:36649,\r\n38010:37197,\r\n38011:20493,\r\n38012:22521,\r\n38013:23186,\r\n38014:26757,\r\n38016:26995,\r\n38017:29028,\r\n38018:29437,\r\n38019:36023,\r\n38020:22770,\r\n38021:36064,\r\n38022:38506,\r\n38023:36889,\r\n38024:34687,\r\n38025:31204,\r\n38026:30695,\r\n38027:33833,\r\n38028:20271,\r\n38029:21093,\r\n38030:21338,\r\n38031:25293,\r\n38032:26575,\r\n38033:27850,\r\n38034:30333,\r\n38035:31636,\r\n38036:31893,\r\n38037:33334,\r\n38038:34180,\r\n38039:36843,\r\n38040:26333,\r\n38041:28448,\r\n38042:29190,\r\n38043:32283,\r\n38044:33707,\r\n38045:39361,\r\n38046:40614,\r\n38047:20989,\r\n38048:31665,\r\n38049:30834,\r\n38050:31672,\r\n38051:32903,\r\n38052:31560,\r\n38053:27368,\r\n38054:24161,\r\n38055:32908,\r\n38056:30033,\r\n38057:30048,\r\n38058:20843,\r\n38059:37474,\r\n38060:28300,\r\n38061:30330,\r\n38062:37271,\r\n38063:39658,\r\n38064:20240,\r\n38065:32624,\r\n38066:25244,\r\n38067:31567,\r\n38068:38309,\r\n38069:40169,\r\n38070:22138,\r\n38071:22617,\r\n38072:34532,\r\n38073:38588,\r\n38074:20276,\r\n38075:21028,\r\n38076:21322,\r\n38077:21453,\r\n38078:21467,\r\n38079:24070,\r\n38080:25644,\r\n38081:26001,\r\n38082:26495,\r\n38083:27710,\r\n38084:27726,\r\n38085:29256,\r\n38086:29359,\r\n38087:29677,\r\n38088:30036,\r\n38089:32321,\r\n38090:33324,\r\n38091:34281,\r\n38092:36009,\r\n38093:31684,\r\n38094:37318,\r\n38095:29033,\r\n38096:38930,\r\n38097:39151,\r\n38098:25405,\r\n38099:26217,\r\n38100:30058,\r\n38101:30436,\r\n38102:30928,\r\n38103:34115,\r\n38104:34542,\r\n38105:21290,\r\n38106:21329,\r\n38107:21542,\r\n38108:22915,\r\n38109:24199,\r\n38110:24444,\r\n38111:24754,\r\n38112:25161,\r\n38113:25209,\r\n38114:25259,\r\n38115:26000,\r\n38116:27604,\r\n38117:27852,\r\n38118:30130,\r\n38119:30382,\r\n38120:30865,\r\n38121:31192,\r\n38122:32203,\r\n38123:32631,\r\n38124:32933,\r\n38125:34987,\r\n38126:35513,\r\n38127:36027,\r\n38128:36991,\r\n38129:38750,\r\n38130:39131,\r\n38131:27147,\r\n38132:31800,\r\n38133:20633,\r\n38134:23614,\r\n38135:24494,\r\n38136:26503,\r\n38137:27608,\r\n38138:29749,\r\n38139:30473,\r\n38140:32654,\r\n38208:40763,\r\n38209:26570,\r\n38210:31255,\r\n38211:21305,\r\n38212:30091,\r\n38213:39661,\r\n38214:24422,\r\n38215:33181,\r\n38216:33777,\r\n38217:32920,\r\n38218:24380,\r\n38219:24517,\r\n38220:30050,\r\n38221:31558,\r\n38222:36924,\r\n38223:26727,\r\n38224:23019,\r\n38225:23195,\r\n38226:32016,\r\n38227:30334,\r\n38228:35628,\r\n38229:20469,\r\n38230:24426,\r\n38231:27161,\r\n38232:27703,\r\n38233:28418,\r\n38234:29922,\r\n38235:31080,\r\n38236:34920,\r\n38237:35413,\r\n38238:35961,\r\n38239:24287,\r\n38240:25551,\r\n38241:30149,\r\n38242:31186,\r\n38243:33495,\r\n38244:37672,\r\n38245:37618,\r\n38246:33948,\r\n38247:34541,\r\n38248:39981,\r\n38249:21697,\r\n38250:24428,\r\n38251:25996,\r\n38252:27996,\r\n38253:28693,\r\n38254:36007,\r\n38255:36051,\r\n38256:38971,\r\n38257:25935,\r\n38258:29942,\r\n38259:19981,\r\n38260:20184,\r\n38261:22496,\r\n38262:22827,\r\n38263:23142,\r\n38264:23500,\r\n38265:20904,\r\n38266:24067,\r\n38267:24220,\r\n38268:24598,\r\n38269:25206,\r\n38270:25975,\r\n38272:26023,\r\n38273:26222,\r\n38274:28014,\r\n38275:29238,\r\n38276:31526,\r\n38277:33104,\r\n38278:33178,\r\n38279:33433,\r\n38280:35676,\r\n38281:36000,\r\n38282:36070,\r\n38283:36212,\r\n38284:38428,\r\n38285:38468,\r\n38286:20398,\r\n38287:25771,\r\n38288:27494,\r\n38289:33310,\r\n38290:33889,\r\n38291:34154,\r\n38292:37096,\r\n38293:23553,\r\n38294:26963,\r\n38295:39080,\r\n38296:33914,\r\n38297:34135,\r\n38298:20239,\r\n38299:21103,\r\n38300:24489,\r\n38301:24133,\r\n38302:26381,\r\n38303:31119,\r\n38304:33145,\r\n38305:35079,\r\n38306:35206,\r\n38307:28149,\r\n38308:24343,\r\n38309:25173,\r\n38310:27832,\r\n38311:20175,\r\n38312:29289,\r\n38313:39826,\r\n38314:20998,\r\n38315:21563,\r\n38316:22132,\r\n38317:22707,\r\n38318:24996,\r\n38319:25198,\r\n38320:28954,\r\n38321:22894,\r\n38322:31881,\r\n38323:31966,\r\n38324:32027,\r\n38325:38640,\r\n38326:25991,\r\n38327:32862,\r\n38328:19993,\r\n38329:20341,\r\n38330:20853,\r\n38331:22592,\r\n38332:24163,\r\n38333:24179,\r\n38334:24330,\r\n38335:26564,\r\n38336:20006,\r\n38337:34109,\r\n38338:38281,\r\n38339:38491,\r\n38340:31859,\r\n38341:38913,\r\n38342:20731,\r\n38343:22721,\r\n38344:30294,\r\n38345:30887,\r\n38346:21029,\r\n38347:30629,\r\n38348:34065,\r\n38349:31622,\r\n38350:20559,\r\n38351:22793,\r\n38352:29255,\r\n38353:31687,\r\n38354:32232,\r\n38355:36794,\r\n38356:36820,\r\n38357:36941,\r\n38358:20415,\r\n38359:21193,\r\n38360:23081,\r\n38361:24321,\r\n38362:38829,\r\n38363:20445,\r\n38364:33303,\r\n38365:37610,\r\n38366:22275,\r\n38367:25429,\r\n38368:27497,\r\n38369:29995,\r\n38370:35036,\r\n38371:36628,\r\n38372:31298,\r\n38373:21215,\r\n38374:22675,\r\n38375:24917,\r\n38376:25098,\r\n38377:26286,\r\n38378:27597,\r\n38379:31807,\r\n38380:33769,\r\n38381:20515,\r\n38382:20472,\r\n38383:21253,\r\n38384:21574,\r\n38385:22577,\r\n38386:22857,\r\n38387:23453,\r\n38388:23792,\r\n38389:23791,\r\n38390:23849,\r\n38391:24214,\r\n38392:25265,\r\n38393:25447,\r\n38394:25918,\r\n38395:26041,\r\n38396:26379,\r\n38464:27861,\r\n38465:27873,\r\n38466:28921,\r\n38467:30770,\r\n38468:32299,\r\n38469:32990,\r\n38470:33459,\r\n38471:33804,\r\n38472:34028,\r\n38473:34562,\r\n38474:35090,\r\n38475:35370,\r\n38476:35914,\r\n38477:37030,\r\n38478:37586,\r\n38479:39165,\r\n38480:40179,\r\n38481:40300,\r\n38482:20047,\r\n38483:20129,\r\n38484:20621,\r\n38485:21078,\r\n38486:22346,\r\n38487:22952,\r\n38488:24125,\r\n38489:24536,\r\n38490:24537,\r\n38491:25151,\r\n38492:26292,\r\n38493:26395,\r\n38494:26576,\r\n38495:26834,\r\n38496:20882,\r\n38497:32033,\r\n38498:32938,\r\n38499:33192,\r\n38500:35584,\r\n38501:35980,\r\n38502:36031,\r\n38503:37502,\r\n38504:38450,\r\n38505:21536,\r\n38506:38956,\r\n38507:21271,\r\n38508:20693,\r\n38509:21340,\r\n38510:22696,\r\n38511:25778,\r\n38512:26420,\r\n38513:29287,\r\n38514:30566,\r\n38515:31302,\r\n38516:37350,\r\n38517:21187,\r\n38518:27809,\r\n38519:27526,\r\n38520:22528,\r\n38521:24140,\r\n38522:22868,\r\n38523:26412,\r\n38524:32763,\r\n38525:20961,\r\n38526:30406,\r\n38528:25705,\r\n38529:30952,\r\n38530:39764,\r\n38531:40635,\r\n38532:22475,\r\n38533:22969,\r\n38534:26151,\r\n38535:26522,\r\n38536:27598,\r\n38537:21737,\r\n38538:27097,\r\n38539:24149,\r\n38540:33180,\r\n38541:26517,\r\n38542:39850,\r\n38543:26622,\r\n38544:40018,\r\n38545:26717,\r\n38546:20134,\r\n38547:20451,\r\n38548:21448,\r\n38549:25273,\r\n38550:26411,\r\n38551:27819,\r\n38552:36804,\r\n38553:20397,\r\n38554:32365,\r\n38555:40639,\r\n38556:19975,\r\n38557:24930,\r\n38558:28288,\r\n38559:28459,\r\n38560:34067,\r\n38561:21619,\r\n38562:26410,\r\n38563:39749,\r\n38564:24051,\r\n38565:31637,\r\n38566:23724,\r\n38567:23494,\r\n38568:34588,\r\n38569:28234,\r\n38570:34001,\r\n38571:31252,\r\n38572:33032,\r\n38573:22937,\r\n38574:31885,\r\n38575:27665,\r\n38576:30496,\r\n38577:21209,\r\n38578:22818,\r\n38579:28961,\r\n38580:29279,\r\n38581:30683,\r\n38582:38695,\r\n38583:40289,\r\n38584:26891,\r\n38585:23167,\r\n38586:23064,\r\n38587:20901,\r\n38588:21517,\r\n38589:21629,\r\n38590:26126,\r\n38591:30431,\r\n38592:36855,\r\n38593:37528,\r\n38594:40180,\r\n38595:23018,\r\n38596:29277,\r\n38597:28357,\r\n38598:20813,\r\n38599:26825,\r\n38600:32191,\r\n38601:32236,\r\n38602:38754,\r\n38603:40634,\r\n38604:25720,\r\n38605:27169,\r\n38606:33538,\r\n38607:22916,\r\n38608:23391,\r\n38609:27611,\r\n38610:29467,\r\n38611:30450,\r\n38612:32178,\r\n38613:32791,\r\n38614:33945,\r\n38615:20786,\r\n38616:26408,\r\n38617:40665,\r\n38618:30446,\r\n38619:26466,\r\n38620:21247,\r\n38621:39173,\r\n38622:23588,\r\n38623:25147,\r\n38624:31870,\r\n38625:36016,\r\n38626:21839,\r\n38627:24758,\r\n38628:32011,\r\n38629:38272,\r\n38630:21249,\r\n38631:20063,\r\n38632:20918,\r\n38633:22812,\r\n38634:29242,\r\n38635:32822,\r\n38636:37326,\r\n38637:24357,\r\n38638:30690,\r\n38639:21380,\r\n38640:24441,\r\n38641:32004,\r\n38642:34220,\r\n38643:35379,\r\n38644:36493,\r\n38645:38742,\r\n38646:26611,\r\n38647:34222,\r\n38648:37971,\r\n38649:24841,\r\n38650:24840,\r\n38651:27833,\r\n38652:30290,\r\n38720:35565,\r\n38721:36664,\r\n38722:21807,\r\n38723:20305,\r\n38724:20778,\r\n38725:21191,\r\n38726:21451,\r\n38727:23461,\r\n38728:24189,\r\n38729:24736,\r\n38730:24962,\r\n38731:25558,\r\n38732:26377,\r\n38733:26586,\r\n38734:28263,\r\n38735:28044,\r\n38736:29494,\r\n38737:29495,\r\n38738:30001,\r\n38739:31056,\r\n38740:35029,\r\n38741:35480,\r\n38742:36938,\r\n38743:37009,\r\n38744:37109,\r\n38745:38596,\r\n38746:34701,\r\n38747:22805,\r\n38748:20104,\r\n38749:20313,\r\n38750:19982,\r\n38751:35465,\r\n38752:36671,\r\n38753:38928,\r\n38754:20653,\r\n38755:24188,\r\n38756:22934,\r\n38757:23481,\r\n38758:24248,\r\n38759:25562,\r\n38760:25594,\r\n38761:25793,\r\n38762:26332,\r\n38763:26954,\r\n38764:27096,\r\n38765:27915,\r\n38766:28342,\r\n38767:29076,\r\n38768:29992,\r\n38769:31407,\r\n38770:32650,\r\n38771:32768,\r\n38772:33865,\r\n38773:33993,\r\n38774:35201,\r\n38775:35617,\r\n38776:36362,\r\n38777:36965,\r\n38778:38525,\r\n38779:39178,\r\n38780:24958,\r\n38781:25233,\r\n38782:27442,\r\n38784:27779,\r\n38785:28020,\r\n38786:32716,\r\n38787:32764,\r\n38788:28096,\r\n38789:32645,\r\n38790:34746,\r\n38791:35064,\r\n38792:26469,\r\n38793:33713,\r\n38794:38972,\r\n38795:38647,\r\n38796:27931,\r\n38797:32097,\r\n38798:33853,\r\n38799:37226,\r\n38800:20081,\r\n38801:21365,\r\n38802:23888,\r\n38803:27396,\r\n38804:28651,\r\n38805:34253,\r\n38806:34349,\r\n38807:35239,\r\n38808:21033,\r\n38809:21519,\r\n38810:23653,\r\n38811:26446,\r\n38812:26792,\r\n38813:29702,\r\n38814:29827,\r\n38815:30178,\r\n38816:35023,\r\n38817:35041,\r\n38818:37324,\r\n38819:38626,\r\n38820:38520,\r\n38821:24459,\r\n38822:29575,\r\n38823:31435,\r\n38824:33870,\r\n38825:25504,\r\n38826:30053,\r\n38827:21129,\r\n38828:27969,\r\n38829:28316,\r\n38830:29705,\r\n38831:30041,\r\n38832:30827,\r\n38833:31890,\r\n38834:38534,\r\n38835:31452,\r\n38836:40845,\r\n38837:20406,\r\n38838:24942,\r\n38839:26053,\r\n38840:34396,\r\n38841:20102,\r\n38842:20142,\r\n38843:20698,\r\n38844:20001,\r\n38845:20940,\r\n38846:23534,\r\n38847:26009,\r\n38848:26753,\r\n38849:28092,\r\n38850:29471,\r\n38851:30274,\r\n38852:30637,\r\n38853:31260,\r\n38854:31975,\r\n38855:33391,\r\n38856:35538,\r\n38857:36988,\r\n38858:37327,\r\n38859:38517,\r\n38860:38936,\r\n38861:21147,\r\n38862:32209,\r\n38863:20523,\r\n38864:21400,\r\n38865:26519,\r\n38866:28107,\r\n38867:29136,\r\n38868:29747,\r\n38869:33256,\r\n38870:36650,\r\n38871:38563,\r\n38872:40023,\r\n38873:40607,\r\n38874:29792,\r\n38875:22593,\r\n38876:28057,\r\n38877:32047,\r\n38878:39006,\r\n38879:20196,\r\n38880:20278,\r\n38881:20363,\r\n38882:20919,\r\n38883:21169,\r\n38884:23994,\r\n38885:24604,\r\n38886:29618,\r\n38887:31036,\r\n38888:33491,\r\n38889:37428,\r\n38890:38583,\r\n38891:38646,\r\n38892:38666,\r\n38893:40599,\r\n38894:40802,\r\n38895:26278,\r\n38896:27508,\r\n38897:21015,\r\n38898:21155,\r\n38899:28872,\r\n38900:35010,\r\n38901:24265,\r\n38902:24651,\r\n38903:24976,\r\n38904:28451,\r\n38905:29001,\r\n38906:31806,\r\n38907:32244,\r\n38908:32879,\r\n38976:34030,\r\n38977:36899,\r\n38978:37676,\r\n38979:21570,\r\n38980:39791,\r\n38981:27347,\r\n38982:28809,\r\n38983:36034,\r\n38984:36335,\r\n38985:38706,\r\n38986:21172,\r\n38987:23105,\r\n38988:24266,\r\n38989:24324,\r\n38990:26391,\r\n38991:27004,\r\n38992:27028,\r\n38993:28010,\r\n38994:28431,\r\n38995:29282,\r\n38996:29436,\r\n38997:31725,\r\n38998:32769,\r\n38999:32894,\r\n39000:34635,\r\n39001:37070,\r\n39002:20845,\r\n39003:40595,\r\n39004:31108,\r\n39005:32907,\r\n39006:37682,\r\n39007:35542,\r\n39008:20525,\r\n39009:21644,\r\n39010:35441,\r\n39011:27498,\r\n39012:36036,\r\n39013:33031,\r\n39014:24785,\r\n39015:26528,\r\n39016:40434,\r\n39017:20121,\r\n39018:20120,\r\n39019:39952,\r\n39020:35435,\r\n39021:34241,\r\n39022:34152,\r\n39023:26880,\r\n39024:28286,\r\n39025:30871,\r\n39026:33109,\r\n39071:24332,\r\n39072:19984,\r\n39073:19989,\r\n39074:20010,\r\n39075:20017,\r\n39076:20022,\r\n39077:20028,\r\n39078:20031,\r\n39079:20034,\r\n39080:20054,\r\n39081:20056,\r\n39082:20098,\r\n39083:20101,\r\n39084:35947,\r\n39085:20106,\r\n39086:33298,\r\n39087:24333,\r\n39088:20110,\r\n39089:20126,\r\n39090:20127,\r\n39091:20128,\r\n39092:20130,\r\n39093:20144,\r\n39094:20147,\r\n39095:20150,\r\n39096:20174,\r\n39097:20173,\r\n39098:20164,\r\n39099:20166,\r\n39100:20162,\r\n39101:20183,\r\n39102:20190,\r\n39103:20205,\r\n39104:20191,\r\n39105:20215,\r\n39106:20233,\r\n39107:20314,\r\n39108:20272,\r\n39109:20315,\r\n39110:20317,\r\n39111:20311,\r\n39112:20295,\r\n39113:20342,\r\n39114:20360,\r\n39115:20367,\r\n39116:20376,\r\n39117:20347,\r\n39118:20329,\r\n39119:20336,\r\n39120:20369,\r\n39121:20335,\r\n39122:20358,\r\n39123:20374,\r\n39124:20760,\r\n39125:20436,\r\n39126:20447,\r\n39127:20430,\r\n39128:20440,\r\n39129:20443,\r\n39130:20433,\r\n39131:20442,\r\n39132:20432,\r\n39133:20452,\r\n39134:20453,\r\n39135:20506,\r\n39136:20520,\r\n39137:20500,\r\n39138:20522,\r\n39139:20517,\r\n39140:20485,\r\n39141:20252,\r\n39142:20470,\r\n39143:20513,\r\n39144:20521,\r\n39145:20524,\r\n39146:20478,\r\n39147:20463,\r\n39148:20497,\r\n39149:20486,\r\n39150:20547,\r\n39151:20551,\r\n39152:26371,\r\n39153:20565,\r\n39154:20560,\r\n39155:20552,\r\n39156:20570,\r\n39157:20566,\r\n39158:20588,\r\n39159:20600,\r\n39160:20608,\r\n39161:20634,\r\n39162:20613,\r\n39163:20660,\r\n39164:20658,\r\n39232:20681,\r\n39233:20682,\r\n39234:20659,\r\n39235:20674,\r\n39236:20694,\r\n39237:20702,\r\n39238:20709,\r\n39239:20717,\r\n39240:20707,\r\n39241:20718,\r\n39242:20729,\r\n39243:20725,\r\n39244:20745,\r\n39245:20737,\r\n39246:20738,\r\n39247:20758,\r\n39248:20757,\r\n39249:20756,\r\n39250:20762,\r\n39251:20769,\r\n39252:20794,\r\n39253:20791,\r\n39254:20796,\r\n39255:20795,\r\n39256:20799,\r\n39257:20800,\r\n39258:20818,\r\n39259:20812,\r\n39260:20820,\r\n39261:20834,\r\n39262:31480,\r\n39263:20841,\r\n39264:20842,\r\n39265:20846,\r\n39266:20864,\r\n39267:20866,\r\n39268:22232,\r\n39269:20876,\r\n39270:20873,\r\n39271:20879,\r\n39272:20881,\r\n39273:20883,\r\n39274:20885,\r\n39275:20886,\r\n39276:20900,\r\n39277:20902,\r\n39278:20898,\r\n39279:20905,\r\n39280:20906,\r\n39281:20907,\r\n39282:20915,\r\n39283:20913,\r\n39284:20914,\r\n39285:20912,\r\n39286:20917,\r\n39287:20925,\r\n39288:20933,\r\n39289:20937,\r\n39290:20955,\r\n39291:20960,\r\n39292:34389,\r\n39293:20969,\r\n39294:20973,\r\n39296:20976,\r\n39297:20981,\r\n39298:20990,\r\n39299:20996,\r\n39300:21003,\r\n39301:21012,\r\n39302:21006,\r\n39303:21031,\r\n39304:21034,\r\n39305:21038,\r\n39306:21043,\r\n39307:21049,\r\n39308:21071,\r\n39309:21060,\r\n39310:21067,\r\n39311:21068,\r\n39312:21086,\r\n39313:21076,\r\n39314:21098,\r\n39315:21108,\r\n39316:21097,\r\n39317:21107,\r\n39318:21119,\r\n39319:21117,\r\n39320:21133,\r\n39321:21140,\r\n39322:21138,\r\n39323:21105,\r\n39324:21128,\r\n39325:21137,\r\n39326:36776,\r\n39327:36775,\r\n39328:21164,\r\n39329:21165,\r\n39330:21180,\r\n39331:21173,\r\n39332:21185,\r\n39333:21197,\r\n39334:21207,\r\n39335:21214,\r\n39336:21219,\r\n39337:21222,\r\n39338:39149,\r\n39339:21216,\r\n39340:21235,\r\n39341:21237,\r\n39342:21240,\r\n39343:21241,\r\n39344:21254,\r\n39345:21256,\r\n39346:30008,\r\n39347:21261,\r\n39348:21264,\r\n39349:21263,\r\n39350:21269,\r\n39351:21274,\r\n39352:21283,\r\n39353:21295,\r\n39354:21297,\r\n39355:21299,\r\n39356:21304,\r\n39357:21312,\r\n39358:21318,\r\n39359:21317,\r\n39360:19991,\r\n39361:21321,\r\n39362:21325,\r\n39363:20950,\r\n39364:21342,\r\n39365:21353,\r\n39366:21358,\r\n39367:22808,\r\n39368:21371,\r\n39369:21367,\r\n39370:21378,\r\n39371:21398,\r\n39372:21408,\r\n39373:21414,\r\n39374:21413,\r\n39375:21422,\r\n39376:21424,\r\n39377:21430,\r\n39378:21443,\r\n39379:31762,\r\n39380:38617,\r\n39381:21471,\r\n39382:26364,\r\n39383:29166,\r\n39384:21486,\r\n39385:21480,\r\n39386:21485,\r\n39387:21498,\r\n39388:21505,\r\n39389:21565,\r\n39390:21568,\r\n39391:21548,\r\n39392:21549,\r\n39393:21564,\r\n39394:21550,\r\n39395:21558,\r\n39396:21545,\r\n39397:21533,\r\n39398:21582,\r\n39399:21647,\r\n39400:21621,\r\n39401:21646,\r\n39402:21599,\r\n39403:21617,\r\n39404:21623,\r\n39405:21616,\r\n39406:21650,\r\n39407:21627,\r\n39408:21632,\r\n39409:21622,\r\n39410:21636,\r\n39411:21648,\r\n39412:21638,\r\n39413:21703,\r\n39414:21666,\r\n39415:21688,\r\n39416:21669,\r\n39417:21676,\r\n39418:21700,\r\n39419:21704,\r\n39420:21672,\r\n39488:21675,\r\n39489:21698,\r\n39490:21668,\r\n39491:21694,\r\n39492:21692,\r\n39493:21720,\r\n39494:21733,\r\n39495:21734,\r\n39496:21775,\r\n39497:21780,\r\n39498:21757,\r\n39499:21742,\r\n39500:21741,\r\n39501:21754,\r\n39502:21730,\r\n39503:21817,\r\n39504:21824,\r\n39505:21859,\r\n39506:21836,\r\n39507:21806,\r\n39508:21852,\r\n39509:21829,\r\n39510:21846,\r\n39511:21847,\r\n39512:21816,\r\n39513:21811,\r\n39514:21853,\r\n39515:21913,\r\n39516:21888,\r\n39517:21679,\r\n39518:21898,\r\n39519:21919,\r\n39520:21883,\r\n39521:21886,\r\n39522:21912,\r\n39523:21918,\r\n39524:21934,\r\n39525:21884,\r\n39526:21891,\r\n39527:21929,\r\n39528:21895,\r\n39529:21928,\r\n39530:21978,\r\n39531:21957,\r\n39532:21983,\r\n39533:21956,\r\n39534:21980,\r\n39535:21988,\r\n39536:21972,\r\n39537:22036,\r\n39538:22007,\r\n39539:22038,\r\n39540:22014,\r\n39541:22013,\r\n39542:22043,\r\n39543:22009,\r\n39544:22094,\r\n39545:22096,\r\n39546:29151,\r\n39547:22068,\r\n39548:22070,\r\n39549:22066,\r\n39550:22072,\r\n39552:22123,\r\n39553:22116,\r\n39554:22063,\r\n39555:22124,\r\n39556:22122,\r\n39557:22150,\r\n39558:22144,\r\n39559:22154,\r\n39560:22176,\r\n39561:22164,\r\n39562:22159,\r\n39563:22181,\r\n39564:22190,\r\n39565:22198,\r\n39566:22196,\r\n39567:22210,\r\n39568:22204,\r\n39569:22209,\r\n39570:22211,\r\n39571:22208,\r\n39572:22216,\r\n39573:22222,\r\n39574:22225,\r\n39575:22227,\r\n39576:22231,\r\n39577:22254,\r\n39578:22265,\r\n39579:22272,\r\n39580:22271,\r\n39581:22276,\r\n39582:22281,\r\n39583:22280,\r\n39584:22283,\r\n39585:22285,\r\n39586:22291,\r\n39587:22296,\r\n39588:22294,\r\n39589:21959,\r\n39590:22300,\r\n39591:22310,\r\n39592:22327,\r\n39593:22328,\r\n39594:22350,\r\n39595:22331,\r\n39596:22336,\r\n39597:22351,\r\n39598:22377,\r\n39599:22464,\r\n39600:22408,\r\n39601:22369,\r\n39602:22399,\r\n39603:22409,\r\n39604:22419,\r\n39605:22432,\r\n39606:22451,\r\n39607:22436,\r\n39608:22442,\r\n39609:22448,\r\n39610:22467,\r\n39611:22470,\r\n39612:22484,\r\n39613:22482,\r\n39614:22483,\r\n39615:22538,\r\n39616:22486,\r\n39617:22499,\r\n39618:22539,\r\n39619:22553,\r\n39620:22557,\r\n39621:22642,\r\n39622:22561,\r\n39623:22626,\r\n39624:22603,\r\n39625:22640,\r\n39626:27584,\r\n39627:22610,\r\n39628:22589,\r\n39629:22649,\r\n39630:22661,\r\n39631:22713,\r\n39632:22687,\r\n39633:22699,\r\n39634:22714,\r\n39635:22750,\r\n39636:22715,\r\n39637:22712,\r\n39638:22702,\r\n39639:22725,\r\n39640:22739,\r\n39641:22737,\r\n39642:22743,\r\n39643:22745,\r\n39644:22744,\r\n39645:22757,\r\n39646:22748,\r\n39647:22756,\r\n39648:22751,\r\n39649:22767,\r\n39650:22778,\r\n39651:22777,\r\n39652:22779,\r\n39653:22780,\r\n39654:22781,\r\n39655:22786,\r\n39656:22794,\r\n39657:22800,\r\n39658:22811,\r\n39659:26790,\r\n39660:22821,\r\n39661:22828,\r\n39662:22829,\r\n39663:22834,\r\n39664:22840,\r\n39665:22846,\r\n39666:31442,\r\n39667:22869,\r\n39668:22864,\r\n39669:22862,\r\n39670:22874,\r\n39671:22872,\r\n39672:22882,\r\n39673:22880,\r\n39674:22887,\r\n39675:22892,\r\n39676:22889,\r\n39744:22904,\r\n39745:22913,\r\n39746:22941,\r\n39747:20318,\r\n39748:20395,\r\n39749:22947,\r\n39750:22962,\r\n39751:22982,\r\n39752:23016,\r\n39753:23004,\r\n39754:22925,\r\n39755:23001,\r\n39756:23002,\r\n39757:23077,\r\n39758:23071,\r\n39759:23057,\r\n39760:23068,\r\n39761:23049,\r\n39762:23066,\r\n39763:23104,\r\n39764:23148,\r\n39765:23113,\r\n39766:23093,\r\n39767:23094,\r\n39768:23138,\r\n39769:23146,\r\n39770:23194,\r\n39771:23228,\r\n39772:23230,\r\n39773:23243,\r\n39774:23234,\r\n39775:23229,\r\n39776:23267,\r\n39777:23255,\r\n39778:23270,\r\n39779:23273,\r\n39780:23254,\r\n39781:23290,\r\n39782:23291,\r\n39783:23308,\r\n39784:23307,\r\n39785:23318,\r\n39786:23346,\r\n39787:23248,\r\n39788:23338,\r\n39789:23350,\r\n39790:23358,\r\n39791:23363,\r\n39792:23365,\r\n39793:23360,\r\n39794:23377,\r\n39795:23381,\r\n39796:23386,\r\n39797:23387,\r\n39798:23397,\r\n39799:23401,\r\n39800:23408,\r\n39801:23411,\r\n39802:23413,\r\n39803:23416,\r\n39804:25992,\r\n39805:23418,\r\n39806:23424,\r\n39808:23427,\r\n39809:23462,\r\n39810:23480,\r\n39811:23491,\r\n39812:23495,\r\n39813:23497,\r\n39814:23508,\r\n39815:23504,\r\n39816:23524,\r\n39817:23526,\r\n39818:23522,\r\n39819:23518,\r\n39820:23525,\r\n39821:23531,\r\n39822:23536,\r\n39823:23542,\r\n39824:23539,\r\n39825:23557,\r\n39826:23559,\r\n39827:23560,\r\n39828:23565,\r\n39829:23571,\r\n39830:23584,\r\n39831:23586,\r\n39832:23592,\r\n39833:23608,\r\n39834:23609,\r\n39835:23617,\r\n39836:23622,\r\n39837:23630,\r\n39838:23635,\r\n39839:23632,\r\n39840:23631,\r\n39841:23409,\r\n39842:23660,\r\n39843:23662,\r\n39844:20066,\r\n39845:23670,\r\n39846:23673,\r\n39847:23692,\r\n39848:23697,\r\n39849:23700,\r\n39850:22939,\r\n39851:23723,\r\n39852:23739,\r\n39853:23734,\r\n39854:23740,\r\n39855:23735,\r\n39856:23749,\r\n39857:23742,\r\n39858:23751,\r\n39859:23769,\r\n39860:23785,\r\n39861:23805,\r\n39862:23802,\r\n39863:23789,\r\n39864:23948,\r\n39865:23786,\r\n39866:23819,\r\n39867:23829,\r\n39868:23831,\r\n39869:23900,\r\n39870:23839,\r\n39871:23835,\r\n39872:23825,\r\n39873:23828,\r\n39874:23842,\r\n39875:23834,\r\n39876:23833,\r\n39877:23832,\r\n39878:23884,\r\n39879:23890,\r\n39880:23886,\r\n39881:23883,\r\n39882:23916,\r\n39883:23923,\r\n39884:23926,\r\n39885:23943,\r\n39886:23940,\r\n39887:23938,\r\n39888:23970,\r\n39889:23965,\r\n39890:23980,\r\n39891:23982,\r\n39892:23997,\r\n39893:23952,\r\n39894:23991,\r\n39895:23996,\r\n39896:24009,\r\n39897:24013,\r\n39898:24019,\r\n39899:24018,\r\n39900:24022,\r\n39901:24027,\r\n39902:24043,\r\n39903:24050,\r\n39904:24053,\r\n39905:24075,\r\n39906:24090,\r\n39907:24089,\r\n39908:24081,\r\n39909:24091,\r\n39910:24118,\r\n39911:24119,\r\n39912:24132,\r\n39913:24131,\r\n39914:24128,\r\n39915:24142,\r\n39916:24151,\r\n39917:24148,\r\n39918:24159,\r\n39919:24162,\r\n39920:24164,\r\n39921:24135,\r\n39922:24181,\r\n39923:24182,\r\n39924:24186,\r\n39925:40636,\r\n39926:24191,\r\n39927:24224,\r\n39928:24257,\r\n39929:24258,\r\n39930:24264,\r\n39931:24272,\r\n39932:24271,\r\n40000:24278,\r\n40001:24291,\r\n40002:24285,\r\n40003:24282,\r\n40004:24283,\r\n40005:24290,\r\n40006:24289,\r\n40007:24296,\r\n40008:24297,\r\n40009:24300,\r\n40010:24305,\r\n40011:24307,\r\n40012:24304,\r\n40013:24308,\r\n40014:24312,\r\n40015:24318,\r\n40016:24323,\r\n40017:24329,\r\n40018:24413,\r\n40019:24412,\r\n40020:24331,\r\n40021:24337,\r\n40022:24342,\r\n40023:24361,\r\n40024:24365,\r\n40025:24376,\r\n40026:24385,\r\n40027:24392,\r\n40028:24396,\r\n40029:24398,\r\n40030:24367,\r\n40031:24401,\r\n40032:24406,\r\n40033:24407,\r\n40034:24409,\r\n40035:24417,\r\n40036:24429,\r\n40037:24435,\r\n40038:24439,\r\n40039:24451,\r\n40040:24450,\r\n40041:24447,\r\n40042:24458,\r\n40043:24456,\r\n40044:24465,\r\n40045:24455,\r\n40046:24478,\r\n40047:24473,\r\n40048:24472,\r\n40049:24480,\r\n40050:24488,\r\n40051:24493,\r\n40052:24508,\r\n40053:24534,\r\n40054:24571,\r\n40055:24548,\r\n40056:24568,\r\n40057:24561,\r\n40058:24541,\r\n40059:24755,\r\n40060:24575,\r\n40061:24609,\r\n40062:24672,\r\n40064:24601,\r\n40065:24592,\r\n40066:24617,\r\n40067:24590,\r\n40068:24625,\r\n40069:24603,\r\n40070:24597,\r\n40071:24619,\r\n40072:24614,\r\n40073:24591,\r\n40074:24634,\r\n40075:24666,\r\n40076:24641,\r\n40077:24682,\r\n40078:24695,\r\n40079:24671,\r\n40080:24650,\r\n40081:24646,\r\n40082:24653,\r\n40083:24675,\r\n40084:24643,\r\n40085:24676,\r\n40086:24642,\r\n40087:24684,\r\n40088:24683,\r\n40089:24665,\r\n40090:24705,\r\n40091:24717,\r\n40092:24807,\r\n40093:24707,\r\n40094:24730,\r\n40095:24708,\r\n40096:24731,\r\n40097:24726,\r\n40098:24727,\r\n40099:24722,\r\n40100:24743,\r\n40101:24715,\r\n40102:24801,\r\n40103:24760,\r\n40104:24800,\r\n40105:24787,\r\n40106:24756,\r\n40107:24560,\r\n40108:24765,\r\n40109:24774,\r\n40110:24757,\r\n40111:24792,\r\n40112:24909,\r\n40113:24853,\r\n40114:24838,\r\n40115:24822,\r\n40116:24823,\r\n40117:24832,\r\n40118:24820,\r\n40119:24826,\r\n40120:24835,\r\n40121:24865,\r\n40122:24827,\r\n40123:24817,\r\n40124:24845,\r\n40125:24846,\r\n40126:24903,\r\n40127:24894,\r\n40128:24872,\r\n40129:24871,\r\n40130:24906,\r\n40131:24895,\r\n40132:24892,\r\n40133:24876,\r\n40134:24884,\r\n40135:24893,\r\n40136:24898,\r\n40137:24900,\r\n40138:24947,\r\n40139:24951,\r\n40140:24920,\r\n40141:24921,\r\n40142:24922,\r\n40143:24939,\r\n40144:24948,\r\n40145:24943,\r\n40146:24933,\r\n40147:24945,\r\n40148:24927,\r\n40149:24925,\r\n40150:24915,\r\n40151:24949,\r\n40152:24985,\r\n40153:24982,\r\n40154:24967,\r\n40155:25004,\r\n40156:24980,\r\n40157:24986,\r\n40158:24970,\r\n40159:24977,\r\n40160:25003,\r\n40161:25006,\r\n40162:25036,\r\n40163:25034,\r\n40164:25033,\r\n40165:25079,\r\n40166:25032,\r\n40167:25027,\r\n40168:25030,\r\n40169:25018,\r\n40170:25035,\r\n40171:32633,\r\n40172:25037,\r\n40173:25062,\r\n40174:25059,\r\n40175:25078,\r\n40176:25082,\r\n40177:25076,\r\n40178:25087,\r\n40179:25085,\r\n40180:25084,\r\n40181:25086,\r\n40182:25088,\r\n40183:25096,\r\n40184:25097,\r\n40185:25101,\r\n40186:25100,\r\n40187:25108,\r\n40188:25115,\r\n40256:25118,\r\n40257:25121,\r\n40258:25130,\r\n40259:25134,\r\n40260:25136,\r\n40261:25138,\r\n40262:25139,\r\n40263:25153,\r\n40264:25166,\r\n40265:25182,\r\n40266:25187,\r\n40267:25179,\r\n40268:25184,\r\n40269:25192,\r\n40270:25212,\r\n40271:25218,\r\n40272:25225,\r\n40273:25214,\r\n40274:25234,\r\n40275:25235,\r\n40276:25238,\r\n40277:25300,\r\n40278:25219,\r\n40279:25236,\r\n40280:25303,\r\n40281:25297,\r\n40282:25275,\r\n40283:25295,\r\n40284:25343,\r\n40285:25286,\r\n40286:25812,\r\n40287:25288,\r\n40288:25308,\r\n40289:25292,\r\n40290:25290,\r\n40291:25282,\r\n40292:25287,\r\n40293:25243,\r\n40294:25289,\r\n40295:25356,\r\n40296:25326,\r\n40297:25329,\r\n40298:25383,\r\n40299:25346,\r\n40300:25352,\r\n40301:25327,\r\n40302:25333,\r\n40303:25424,\r\n40304:25406,\r\n40305:25421,\r\n40306:25628,\r\n40307:25423,\r\n40308:25494,\r\n40309:25486,\r\n40310:25472,\r\n40311:25515,\r\n40312:25462,\r\n40313:25507,\r\n40314:25487,\r\n40315:25481,\r\n40316:25503,\r\n40317:25525,\r\n40318:25451,\r\n40320:25449,\r\n40321:25534,\r\n40322:25577,\r\n40323:25536,\r\n40324:25542,\r\n40325:25571,\r\n40326:25545,\r\n40327:25554,\r\n40328:25590,\r\n40329:25540,\r\n40330:25622,\r\n40331:25652,\r\n40332:25606,\r\n40333:25619,\r\n40334:25638,\r\n40335:25654,\r\n40336:25885,\r\n40337:25623,\r\n40338:25640,\r\n40339:25615,\r\n40340:25703,\r\n40341:25711,\r\n40342:25718,\r\n40343:25678,\r\n40344:25898,\r\n40345:25749,\r\n40346:25747,\r\n40347:25765,\r\n40348:25769,\r\n40349:25736,\r\n40350:25788,\r\n40351:25818,\r\n40352:25810,\r\n40353:25797,\r\n40354:25799,\r\n40355:25787,\r\n40356:25816,\r\n40357:25794,\r\n40358:25841,\r\n40359:25831,\r\n40360:33289,\r\n40361:25824,\r\n40362:25825,\r\n40363:25260,\r\n40364:25827,\r\n40365:25839,\r\n40366:25900,\r\n40367:25846,\r\n40368:25844,\r\n40369:25842,\r\n40370:25850,\r\n40371:25856,\r\n40372:25853,\r\n40373:25880,\r\n40374:25884,\r\n40375:25861,\r\n40376:25892,\r\n40377:25891,\r\n40378:25899,\r\n40379:25908,\r\n40380:25909,\r\n40381:25911,\r\n40382:25910,\r\n40383:25912,\r\n40384:30027,\r\n40385:25928,\r\n40386:25942,\r\n40387:25941,\r\n40388:25933,\r\n40389:25944,\r\n40390:25950,\r\n40391:25949,\r\n40392:25970,\r\n40393:25976,\r\n40394:25986,\r\n40395:25987,\r\n40396:35722,\r\n40397:26011,\r\n40398:26015,\r\n40399:26027,\r\n40400:26039,\r\n40401:26051,\r\n40402:26054,\r\n40403:26049,\r\n40404:26052,\r\n40405:26060,\r\n40406:26066,\r\n40407:26075,\r\n40408:26073,\r\n40409:26080,\r\n40410:26081,\r\n40411:26097,\r\n40412:26482,\r\n40413:26122,\r\n40414:26115,\r\n40415:26107,\r\n40416:26483,\r\n40417:26165,\r\n40418:26166,\r\n40419:26164,\r\n40420:26140,\r\n40421:26191,\r\n40422:26180,\r\n40423:26185,\r\n40424:26177,\r\n40425:26206,\r\n40426:26205,\r\n40427:26212,\r\n40428:26215,\r\n40429:26216,\r\n40430:26207,\r\n40431:26210,\r\n40432:26224,\r\n40433:26243,\r\n40434:26248,\r\n40435:26254,\r\n40436:26249,\r\n40437:26244,\r\n40438:26264,\r\n40439:26269,\r\n40440:26305,\r\n40441:26297,\r\n40442:26313,\r\n40443:26302,\r\n40444:26300,\r\n40512:26308,\r\n40513:26296,\r\n40514:26326,\r\n40515:26330,\r\n40516:26336,\r\n40517:26175,\r\n40518:26342,\r\n40519:26345,\r\n40520:26352,\r\n40521:26357,\r\n40522:26359,\r\n40523:26383,\r\n40524:26390,\r\n40525:26398,\r\n40526:26406,\r\n40527:26407,\r\n40528:38712,\r\n40529:26414,\r\n40530:26431,\r\n40531:26422,\r\n40532:26433,\r\n40533:26424,\r\n40534:26423,\r\n40535:26438,\r\n40536:26462,\r\n40537:26464,\r\n40538:26457,\r\n40539:26467,\r\n40540:26468,\r\n40541:26505,\r\n40542:26480,\r\n40543:26537,\r\n40544:26492,\r\n40545:26474,\r\n40546:26508,\r\n40547:26507,\r\n40548:26534,\r\n40549:26529,\r\n40550:26501,\r\n40551:26551,\r\n40552:26607,\r\n40553:26548,\r\n40554:26604,\r\n40555:26547,\r\n40556:26601,\r\n40557:26552,\r\n40558:26596,\r\n40559:26590,\r\n40560:26589,\r\n40561:26594,\r\n40562:26606,\r\n40563:26553,\r\n40564:26574,\r\n40565:26566,\r\n40566:26599,\r\n40567:27292,\r\n40568:26654,\r\n40569:26694,\r\n40570:26665,\r\n40571:26688,\r\n40572:26701,\r\n40573:26674,\r\n40574:26702,\r\n40576:26803,\r\n40577:26667,\r\n40578:26713,\r\n40579:26723,\r\n40580:26743,\r\n40581:26751,\r\n40582:26783,\r\n40583:26767,\r\n40584:26797,\r\n40585:26772,\r\n40586:26781,\r\n40587:26779,\r\n40588:26755,\r\n40589:27310,\r\n40590:26809,\r\n40591:26740,\r\n40592:26805,\r\n40593:26784,\r\n40594:26810,\r\n40595:26895,\r\n40596:26765,\r\n40597:26750,\r\n40598:26881,\r\n40599:26826,\r\n40600:26888,\r\n40601:26840,\r\n40602:26914,\r\n40603:26918,\r\n40604:26849,\r\n40605:26892,\r\n40606:26829,\r\n40607:26836,\r\n40608:26855,\r\n40609:26837,\r\n40610:26934,\r\n40611:26898,\r\n40612:26884,\r\n40613:26839,\r\n40614:26851,\r\n40615:26917,\r\n40616:26873,\r\n40617:26848,\r\n40618:26863,\r\n40619:26920,\r\n40620:26922,\r\n40621:26906,\r\n40622:26915,\r\n40623:26913,\r\n40624:26822,\r\n40625:27001,\r\n40626:26999,\r\n40627:26972,\r\n40628:27000,\r\n40629:26987,\r\n40630:26964,\r\n40631:27006,\r\n40632:26990,\r\n40633:26937,\r\n40634:26996,\r\n40635:26941,\r\n40636:26969,\r\n40637:26928,\r\n40638:26977,\r\n40639:26974,\r\n40640:26973,\r\n40641:27009,\r\n40642:26986,\r\n40643:27058,\r\n40644:27054,\r\n40645:27088,\r\n40646:27071,\r\n40647:27073,\r\n40648:27091,\r\n40649:27070,\r\n40650:27086,\r\n40651:23528,\r\n40652:27082,\r\n40653:27101,\r\n40654:27067,\r\n40655:27075,\r\n40656:27047,\r\n40657:27182,\r\n40658:27025,\r\n40659:27040,\r\n40660:27036,\r\n40661:27029,\r\n40662:27060,\r\n40663:27102,\r\n40664:27112,\r\n40665:27138,\r\n40666:27163,\r\n40667:27135,\r\n40668:27402,\r\n40669:27129,\r\n40670:27122,\r\n40671:27111,\r\n40672:27141,\r\n40673:27057,\r\n40674:27166,\r\n40675:27117,\r\n40676:27156,\r\n40677:27115,\r\n40678:27146,\r\n40679:27154,\r\n40680:27329,\r\n40681:27171,\r\n40682:27155,\r\n40683:27204,\r\n40684:27148,\r\n40685:27250,\r\n40686:27190,\r\n40687:27256,\r\n40688:27207,\r\n40689:27234,\r\n40690:27225,\r\n40691:27238,\r\n40692:27208,\r\n40693:27192,\r\n40694:27170,\r\n40695:27280,\r\n40696:27277,\r\n40697:27296,\r\n40698:27268,\r\n40699:27298,\r\n40700:27299,\r\n40768:27287,\r\n40769:34327,\r\n40770:27323,\r\n40771:27331,\r\n40772:27330,\r\n40773:27320,\r\n40774:27315,\r\n40775:27308,\r\n40776:27358,\r\n40777:27345,\r\n40778:27359,\r\n40779:27306,\r\n40780:27354,\r\n40781:27370,\r\n40782:27387,\r\n40783:27397,\r\n40784:34326,\r\n40785:27386,\r\n40786:27410,\r\n40787:27414,\r\n40788:39729,\r\n40789:27423,\r\n40790:27448,\r\n40791:27447,\r\n40792:30428,\r\n40793:27449,\r\n40794:39150,\r\n40795:27463,\r\n40796:27459,\r\n40797:27465,\r\n40798:27472,\r\n40799:27481,\r\n40800:27476,\r\n40801:27483,\r\n40802:27487,\r\n40803:27489,\r\n40804:27512,\r\n40805:27513,\r\n40806:27519,\r\n40807:27520,\r\n40808:27524,\r\n40809:27523,\r\n40810:27533,\r\n40811:27544,\r\n40812:27541,\r\n40813:27550,\r\n40814:27556,\r\n40815:27562,\r\n40816:27563,\r\n40817:27567,\r\n40818:27570,\r\n40819:27569,\r\n40820:27571,\r\n40821:27575,\r\n40822:27580,\r\n40823:27590,\r\n40824:27595,\r\n40825:27603,\r\n40826:27615,\r\n40827:27628,\r\n40828:27627,\r\n40829:27635,\r\n40830:27631,\r\n40832:40638,\r\n40833:27656,\r\n40834:27667,\r\n40835:27668,\r\n40836:27675,\r\n40837:27684,\r\n40838:27683,\r\n40839:27742,\r\n40840:27733,\r\n40841:27746,\r\n40842:27754,\r\n40843:27778,\r\n40844:27789,\r\n40845:27802,\r\n40846:27777,\r\n40847:27803,\r\n40848:27774,\r\n40849:27752,\r\n40850:27763,\r\n40851:27794,\r\n40852:27792,\r\n40853:27844,\r\n40854:27889,\r\n40855:27859,\r\n40856:27837,\r\n40857:27863,\r\n40858:27845,\r\n40859:27869,\r\n40860:27822,\r\n40861:27825,\r\n40862:27838,\r\n40863:27834,\r\n40864:27867,\r\n40865:27887,\r\n40866:27865,\r\n40867:27882,\r\n40868:27935,\r\n40869:34893,\r\n40870:27958,\r\n40871:27947,\r\n40872:27965,\r\n40873:27960,\r\n40874:27929,\r\n40875:27957,\r\n40876:27955,\r\n40877:27922,\r\n40878:27916,\r\n40879:28003,\r\n40880:28051,\r\n40881:28004,\r\n40882:27994,\r\n40883:28025,\r\n40884:27993,\r\n40885:28046,\r\n40886:28053,\r\n40887:28644,\r\n40888:28037,\r\n40889:28153,\r\n40890:28181,\r\n40891:28170,\r\n40892:28085,\r\n40893:28103,\r\n40894:28134,\r\n40895:28088,\r\n40896:28102,\r\n40897:28140,\r\n40898:28126,\r\n40899:28108,\r\n40900:28136,\r\n40901:28114,\r\n40902:28101,\r\n40903:28154,\r\n40904:28121,\r\n40905:28132,\r\n40906:28117,\r\n40907:28138,\r\n40908:28142,\r\n40909:28205,\r\n40910:28270,\r\n40911:28206,\r\n40912:28185,\r\n40913:28274,\r\n40914:28255,\r\n40915:28222,\r\n40916:28195,\r\n40917:28267,\r\n40918:28203,\r\n40919:28278,\r\n40920:28237,\r\n40921:28191,\r\n40922:28227,\r\n40923:28218,\r\n40924:28238,\r\n40925:28196,\r\n40926:28415,\r\n40927:28189,\r\n40928:28216,\r\n40929:28290,\r\n40930:28330,\r\n40931:28312,\r\n40932:28361,\r\n40933:28343,\r\n40934:28371,\r\n40935:28349,\r\n40936:28335,\r\n40937:28356,\r\n40938:28338,\r\n40939:28372,\r\n40940:28373,\r\n40941:28303,\r\n40942:28325,\r\n40943:28354,\r\n40944:28319,\r\n40945:28481,\r\n40946:28433,\r\n40947:28748,\r\n40948:28396,\r\n40949:28408,\r\n40950:28414,\r\n40951:28479,\r\n40952:28402,\r\n40953:28465,\r\n40954:28399,\r\n40955:28466,\r\n40956:28364,\r\n57408:28478,\r\n57409:28435,\r\n57410:28407,\r\n57411:28550,\r\n57412:28538,\r\n57413:28536,\r\n57414:28545,\r\n57415:28544,\r\n57416:28527,\r\n57417:28507,\r\n57418:28659,\r\n57419:28525,\r\n57420:28546,\r\n57421:28540,\r\n57422:28504,\r\n57423:28558,\r\n57424:28561,\r\n57425:28610,\r\n57426:28518,\r\n57427:28595,\r\n57428:28579,\r\n57429:28577,\r\n57430:28580,\r\n57431:28601,\r\n57432:28614,\r\n57433:28586,\r\n57434:28639,\r\n57435:28629,\r\n57436:28652,\r\n57437:28628,\r\n57438:28632,\r\n57439:28657,\r\n57440:28654,\r\n57441:28635,\r\n57442:28681,\r\n57443:28683,\r\n57444:28666,\r\n57445:28689,\r\n57446:28673,\r\n57447:28687,\r\n57448:28670,\r\n57449:28699,\r\n57450:28698,\r\n57451:28532,\r\n57452:28701,\r\n57453:28696,\r\n57454:28703,\r\n57455:28720,\r\n57456:28734,\r\n57457:28722,\r\n57458:28753,\r\n57459:28771,\r\n57460:28825,\r\n57461:28818,\r\n57462:28847,\r\n57463:28913,\r\n57464:28844,\r\n57465:28856,\r\n57466:28851,\r\n57467:28846,\r\n57468:28895,\r\n57469:28875,\r\n57470:28893,\r\n57472:28889,\r\n57473:28937,\r\n57474:28925,\r\n57475:28956,\r\n57476:28953,\r\n57477:29029,\r\n57478:29013,\r\n57479:29064,\r\n57480:29030,\r\n57481:29026,\r\n57482:29004,\r\n57483:29014,\r\n57484:29036,\r\n57485:29071,\r\n57486:29179,\r\n57487:29060,\r\n57488:29077,\r\n57489:29096,\r\n57490:29100,\r\n57491:29143,\r\n57492:29113,\r\n57493:29118,\r\n57494:29138,\r\n57495:29129,\r\n57496:29140,\r\n57497:29134,\r\n57498:29152,\r\n57499:29164,\r\n57500:29159,\r\n57501:29173,\r\n57502:29180,\r\n57503:29177,\r\n57504:29183,\r\n57505:29197,\r\n57506:29200,\r\n57507:29211,\r\n57508:29224,\r\n57509:29229,\r\n57510:29228,\r\n57511:29232,\r\n57512:29234,\r\n57513:29243,\r\n57514:29244,\r\n57515:29247,\r\n57516:29248,\r\n57517:29254,\r\n57518:29259,\r\n57519:29272,\r\n57520:29300,\r\n57521:29310,\r\n57522:29314,\r\n57523:29313,\r\n57524:29319,\r\n57525:29330,\r\n57526:29334,\r\n57527:29346,\r\n57528:29351,\r\n57529:29369,\r\n57530:29362,\r\n57531:29379,\r\n57532:29382,\r\n57533:29380,\r\n57534:29390,\r\n57535:29394,\r\n57536:29410,\r\n57537:29408,\r\n57538:29409,\r\n57539:29433,\r\n57540:29431,\r\n57541:20495,\r\n57542:29463,\r\n57543:29450,\r\n57544:29468,\r\n57545:29462,\r\n57546:29469,\r\n57547:29492,\r\n57548:29487,\r\n57549:29481,\r\n57550:29477,\r\n57551:29502,\r\n57552:29518,\r\n57553:29519,\r\n57554:40664,\r\n57555:29527,\r\n57556:29546,\r\n57557:29544,\r\n57558:29552,\r\n57559:29560,\r\n57560:29557,\r\n57561:29563,\r\n57562:29562,\r\n57563:29640,\r\n57564:29619,\r\n57565:29646,\r\n57566:29627,\r\n57567:29632,\r\n57568:29669,\r\n57569:29678,\r\n57570:29662,\r\n57571:29858,\r\n57572:29701,\r\n57573:29807,\r\n57574:29733,\r\n57575:29688,\r\n57576:29746,\r\n57577:29754,\r\n57578:29781,\r\n57579:29759,\r\n57580:29791,\r\n57581:29785,\r\n57582:29761,\r\n57583:29788,\r\n57584:29801,\r\n57585:29808,\r\n57586:29795,\r\n57587:29802,\r\n57588:29814,\r\n57589:29822,\r\n57590:29835,\r\n57591:29854,\r\n57592:29863,\r\n57593:29898,\r\n57594:29903,\r\n57595:29908,\r\n57596:29681,\r\n57664:29920,\r\n57665:29923,\r\n57666:29927,\r\n57667:29929,\r\n57668:29934,\r\n57669:29938,\r\n57670:29936,\r\n57671:29937,\r\n57672:29944,\r\n57673:29943,\r\n57674:29956,\r\n57675:29955,\r\n57676:29957,\r\n57677:29964,\r\n57678:29966,\r\n57679:29965,\r\n57680:29973,\r\n57681:29971,\r\n57682:29982,\r\n57683:29990,\r\n57684:29996,\r\n57685:30012,\r\n57686:30020,\r\n57687:30029,\r\n57688:30026,\r\n57689:30025,\r\n57690:30043,\r\n57691:30022,\r\n57692:30042,\r\n57693:30057,\r\n57694:30052,\r\n57695:30055,\r\n57696:30059,\r\n57697:30061,\r\n57698:30072,\r\n57699:30070,\r\n57700:30086,\r\n57701:30087,\r\n57702:30068,\r\n57703:30090,\r\n57704:30089,\r\n57705:30082,\r\n57706:30100,\r\n57707:30106,\r\n57708:30109,\r\n57709:30117,\r\n57710:30115,\r\n57711:30146,\r\n57712:30131,\r\n57713:30147,\r\n57714:30133,\r\n57715:30141,\r\n57716:30136,\r\n57717:30140,\r\n57718:30129,\r\n57719:30157,\r\n57720:30154,\r\n57721:30162,\r\n57722:30169,\r\n57723:30179,\r\n57724:30174,\r\n57725:30206,\r\n57726:30207,\r\n57728:30204,\r\n57729:30209,\r\n57730:30192,\r\n57731:30202,\r\n57732:30194,\r\n57733:30195,\r\n57734:30219,\r\n57735:30221,\r\n57736:30217,\r\n57737:30239,\r\n57738:30247,\r\n57739:30240,\r\n57740:30241,\r\n57741:30242,\r\n57742:30244,\r\n57743:30260,\r\n57744:30256,\r\n57745:30267,\r\n57746:30279,\r\n57747:30280,\r\n57748:30278,\r\n57749:30300,\r\n57750:30296,\r\n57751:30305,\r\n57752:30306,\r\n57753:30312,\r\n57754:30313,\r\n57755:30314,\r\n57756:30311,\r\n57757:30316,\r\n57758:30320,\r\n57759:30322,\r\n57760:30326,\r\n57761:30328,\r\n57762:30332,\r\n57763:30336,\r\n57764:30339,\r\n57765:30344,\r\n57766:30347,\r\n57767:30350,\r\n57768:30358,\r\n57769:30355,\r\n57770:30361,\r\n57771:30362,\r\n57772:30384,\r\n57773:30388,\r\n57774:30392,\r\n57775:30393,\r\n57776:30394,\r\n57777:30402,\r\n57778:30413,\r\n57779:30422,\r\n57780:30418,\r\n57781:30430,\r\n57782:30433,\r\n57783:30437,\r\n57784:30439,\r\n57785:30442,\r\n57786:34351,\r\n57787:30459,\r\n57788:30472,\r\n57789:30471,\r\n57790:30468,\r\n57791:30505,\r\n57792:30500,\r\n57793:30494,\r\n57794:30501,\r\n57795:30502,\r\n57796:30491,\r\n57797:30519,\r\n57798:30520,\r\n57799:30535,\r\n57800:30554,\r\n57801:30568,\r\n57802:30571,\r\n57803:30555,\r\n57804:30565,\r\n57805:30591,\r\n57806:30590,\r\n57807:30585,\r\n57808:30606,\r\n57809:30603,\r\n57810:30609,\r\n57811:30624,\r\n57812:30622,\r\n57813:30640,\r\n57814:30646,\r\n57815:30649,\r\n57816:30655,\r\n57817:30652,\r\n57818:30653,\r\n57819:30651,\r\n57820:30663,\r\n57821:30669,\r\n57822:30679,\r\n57823:30682,\r\n57824:30684,\r\n57825:30691,\r\n57826:30702,\r\n57827:30716,\r\n57828:30732,\r\n57829:30738,\r\n57830:31014,\r\n57831:30752,\r\n57832:31018,\r\n57833:30789,\r\n57834:30862,\r\n57835:30836,\r\n57836:30854,\r\n57837:30844,\r\n57838:30874,\r\n57839:30860,\r\n57840:30883,\r\n57841:30901,\r\n57842:30890,\r\n57843:30895,\r\n57844:30929,\r\n57845:30918,\r\n57846:30923,\r\n57847:30932,\r\n57848:30910,\r\n57849:30908,\r\n57850:30917,\r\n57851:30922,\r\n57852:30956,\r\n57920:30951,\r\n57921:30938,\r\n57922:30973,\r\n57923:30964,\r\n57924:30983,\r\n57925:30994,\r\n57926:30993,\r\n57927:31001,\r\n57928:31020,\r\n57929:31019,\r\n57930:31040,\r\n57931:31072,\r\n57932:31063,\r\n57933:31071,\r\n57934:31066,\r\n57935:31061,\r\n57936:31059,\r\n57937:31098,\r\n57938:31103,\r\n57939:31114,\r\n57940:31133,\r\n57941:31143,\r\n57942:40779,\r\n57943:31146,\r\n57944:31150,\r\n57945:31155,\r\n57946:31161,\r\n57947:31162,\r\n57948:31177,\r\n57949:31189,\r\n57950:31207,\r\n57951:31212,\r\n57952:31201,\r\n57953:31203,\r\n57954:31240,\r\n57955:31245,\r\n57956:31256,\r\n57957:31257,\r\n57958:31264,\r\n57959:31263,\r\n57960:31104,\r\n57961:31281,\r\n57962:31291,\r\n57963:31294,\r\n57964:31287,\r\n57965:31299,\r\n57966:31319,\r\n57967:31305,\r\n57968:31329,\r\n57969:31330,\r\n57970:31337,\r\n57971:40861,\r\n57972:31344,\r\n57973:31353,\r\n57974:31357,\r\n57975:31368,\r\n57976:31383,\r\n57977:31381,\r\n57978:31384,\r\n57979:31382,\r\n57980:31401,\r\n57981:31432,\r\n57982:31408,\r\n57984:31414,\r\n57985:31429,\r\n57986:31428,\r\n57987:31423,\r\n57988:36995,\r\n57989:31431,\r\n57990:31434,\r\n57991:31437,\r\n57992:31439,\r\n57993:31445,\r\n57994:31443,\r\n57995:31449,\r\n57996:31450,\r\n57997:31453,\r\n57998:31457,\r\n57999:31458,\r\n58000:31462,\r\n58001:31469,\r\n58002:31472,\r\n58003:31490,\r\n58004:31503,\r\n58005:31498,\r\n58006:31494,\r\n58007:31539,\r\n58008:31512,\r\n58009:31513,\r\n58010:31518,\r\n58011:31541,\r\n58012:31528,\r\n58013:31542,\r\n58014:31568,\r\n58015:31610,\r\n58016:31492,\r\n58017:31565,\r\n58018:31499,\r\n58019:31564,\r\n58020:31557,\r\n58021:31605,\r\n58022:31589,\r\n58023:31604,\r\n58024:31591,\r\n58025:31600,\r\n58026:31601,\r\n58027:31596,\r\n58028:31598,\r\n58029:31645,\r\n58030:31640,\r\n58031:31647,\r\n58032:31629,\r\n58033:31644,\r\n58034:31642,\r\n58035:31627,\r\n58036:31634,\r\n58037:31631,\r\n58038:31581,\r\n58039:31641,\r\n58040:31691,\r\n58041:31681,\r\n58042:31692,\r\n58043:31695,\r\n58044:31668,\r\n58045:31686,\r\n58046:31709,\r\n58047:31721,\r\n58048:31761,\r\n58049:31764,\r\n58050:31718,\r\n58051:31717,\r\n58052:31840,\r\n58053:31744,\r\n58054:31751,\r\n58055:31763,\r\n58056:31731,\r\n58057:31735,\r\n58058:31767,\r\n58059:31757,\r\n58060:31734,\r\n58061:31779,\r\n58062:31783,\r\n58063:31786,\r\n58064:31775,\r\n58065:31799,\r\n58066:31787,\r\n58067:31805,\r\n58068:31820,\r\n58069:31811,\r\n58070:31828,\r\n58071:31823,\r\n58072:31808,\r\n58073:31824,\r\n58074:31832,\r\n58075:31839,\r\n58076:31844,\r\n58077:31830,\r\n58078:31845,\r\n58079:31852,\r\n58080:31861,\r\n58081:31875,\r\n58082:31888,\r\n58083:31908,\r\n58084:31917,\r\n58085:31906,\r\n58086:31915,\r\n58087:31905,\r\n58088:31912,\r\n58089:31923,\r\n58090:31922,\r\n58091:31921,\r\n58092:31918,\r\n58093:31929,\r\n58094:31933,\r\n58095:31936,\r\n58096:31941,\r\n58097:31938,\r\n58098:31960,\r\n58099:31954,\r\n58100:31964,\r\n58101:31970,\r\n58102:39739,\r\n58103:31983,\r\n58104:31986,\r\n58105:31988,\r\n58106:31990,\r\n58107:31994,\r\n58108:32006,\r\n58176:32002,\r\n58177:32028,\r\n58178:32021,\r\n58179:32010,\r\n58180:32069,\r\n58181:32075,\r\n58182:32046,\r\n58183:32050,\r\n58184:32063,\r\n58185:32053,\r\n58186:32070,\r\n58187:32115,\r\n58188:32086,\r\n58189:32078,\r\n58190:32114,\r\n58191:32104,\r\n58192:32110,\r\n58193:32079,\r\n58194:32099,\r\n58195:32147,\r\n58196:32137,\r\n58197:32091,\r\n58198:32143,\r\n58199:32125,\r\n58200:32155,\r\n58201:32186,\r\n58202:32174,\r\n58203:32163,\r\n58204:32181,\r\n58205:32199,\r\n58206:32189,\r\n58207:32171,\r\n58208:32317,\r\n58209:32162,\r\n58210:32175,\r\n58211:32220,\r\n58212:32184,\r\n58213:32159,\r\n58214:32176,\r\n58215:32216,\r\n58216:32221,\r\n58217:32228,\r\n58218:32222,\r\n58219:32251,\r\n58220:32242,\r\n58221:32225,\r\n58222:32261,\r\n58223:32266,\r\n58224:32291,\r\n58225:32289,\r\n58226:32274,\r\n58227:32305,\r\n58228:32287,\r\n58229:32265,\r\n58230:32267,\r\n58231:32290,\r\n58232:32326,\r\n58233:32358,\r\n58234:32315,\r\n58235:32309,\r\n58236:32313,\r\n58237:32323,\r\n58238:32311,\r\n58240:32306,\r\n58241:32314,\r\n58242:32359,\r\n58243:32349,\r\n58244:32342,\r\n58245:32350,\r\n58246:32345,\r\n58247:32346,\r\n58248:32377,\r\n58249:32362,\r\n58250:32361,\r\n58251:32380,\r\n58252:32379,\r\n58253:32387,\r\n58254:32213,\r\n58255:32381,\r\n58256:36782,\r\n58257:32383,\r\n58258:32392,\r\n58259:32393,\r\n58260:32396,\r\n58261:32402,\r\n58262:32400,\r\n58263:32403,\r\n58264:32404,\r\n58265:32406,\r\n58266:32398,\r\n58267:32411,\r\n58268:32412,\r\n58269:32568,\r\n58270:32570,\r\n58271:32581,\r\n58272:32588,\r\n58273:32589,\r\n58274:32590,\r\n58275:32592,\r\n58276:32593,\r\n58277:32597,\r\n58278:32596,\r\n58279:32600,\r\n58280:32607,\r\n58281:32608,\r\n58282:32616,\r\n58283:32617,\r\n58284:32615,\r\n58285:32632,\r\n58286:32642,\r\n58287:32646,\r\n58288:32643,\r\n58289:32648,\r\n58290:32647,\r\n58291:32652,\r\n58292:32660,\r\n58293:32670,\r\n58294:32669,\r\n58295:32666,\r\n58296:32675,\r\n58297:32687,\r\n58298:32690,\r\n58299:32697,\r\n58300:32686,\r\n58301:32694,\r\n58302:32696,\r\n58303:35697,\r\n58304:32709,\r\n58305:32710,\r\n58306:32714,\r\n58307:32725,\r\n58308:32724,\r\n58309:32737,\r\n58310:32742,\r\n58311:32745,\r\n58312:32755,\r\n58313:32761,\r\n58314:39132,\r\n58315:32774,\r\n58316:32772,\r\n58317:32779,\r\n58318:32786,\r\n58319:32792,\r\n58320:32793,\r\n58321:32796,\r\n58322:32801,\r\n58323:32808,\r\n58324:32831,\r\n58325:32827,\r\n58326:32842,\r\n58327:32838,\r\n58328:32850,\r\n58329:32856,\r\n58330:32858,\r\n58331:32863,\r\n58332:32866,\r\n58333:32872,\r\n58334:32883,\r\n58335:32882,\r\n58336:32880,\r\n58337:32886,\r\n58338:32889,\r\n58339:32893,\r\n58340:32895,\r\n58341:32900,\r\n58342:32902,\r\n58343:32901,\r\n58344:32923,\r\n58345:32915,\r\n58346:32922,\r\n58347:32941,\r\n58348:20880,\r\n58349:32940,\r\n58350:32987,\r\n58351:32997,\r\n58352:32985,\r\n58353:32989,\r\n58354:32964,\r\n58355:32986,\r\n58356:32982,\r\n58357:33033,\r\n58358:33007,\r\n58359:33009,\r\n58360:33051,\r\n58361:33065,\r\n58362:33059,\r\n58363:33071,\r\n58364:33099,\r\n58432:38539,\r\n58433:33094,\r\n58434:33086,\r\n58435:33107,\r\n58436:33105,\r\n58437:33020,\r\n58438:33137,\r\n58439:33134,\r\n58440:33125,\r\n58441:33126,\r\n58442:33140,\r\n58443:33155,\r\n58444:33160,\r\n58445:33162,\r\n58446:33152,\r\n58447:33154,\r\n58448:33184,\r\n58449:33173,\r\n58450:33188,\r\n58451:33187,\r\n58452:33119,\r\n58453:33171,\r\n58454:33193,\r\n58455:33200,\r\n58456:33205,\r\n58457:33214,\r\n58458:33208,\r\n58459:33213,\r\n58460:33216,\r\n58461:33218,\r\n58462:33210,\r\n58463:33225,\r\n58464:33229,\r\n58465:33233,\r\n58466:33241,\r\n58467:33240,\r\n58468:33224,\r\n58469:33242,\r\n58470:33247,\r\n58471:33248,\r\n58472:33255,\r\n58473:33274,\r\n58474:33275,\r\n58475:33278,\r\n58476:33281,\r\n58477:33282,\r\n58478:33285,\r\n58479:33287,\r\n58480:33290,\r\n58481:33293,\r\n58482:33296,\r\n58483:33302,\r\n58484:33321,\r\n58485:33323,\r\n58486:33336,\r\n58487:33331,\r\n58488:33344,\r\n58489:33369,\r\n58490:33368,\r\n58491:33373,\r\n58492:33370,\r\n58493:33375,\r\n58494:33380,\r\n58496:33378,\r\n58497:33384,\r\n58498:33386,\r\n58499:33387,\r\n58500:33326,\r\n58501:33393,\r\n58502:33399,\r\n58503:33400,\r\n58504:33406,\r\n58505:33421,\r\n58506:33426,\r\n58507:33451,\r\n58508:33439,\r\n58509:33467,\r\n58510:33452,\r\n58511:33505,\r\n58512:33507,\r\n58513:33503,\r\n58514:33490,\r\n58515:33524,\r\n58516:33523,\r\n58517:33530,\r\n58518:33683,\r\n58519:33539,\r\n58520:33531,\r\n58521:33529,\r\n58522:33502,\r\n58523:33542,\r\n58524:33500,\r\n58525:33545,\r\n58526:33497,\r\n58527:33589,\r\n58528:33588,\r\n58529:33558,\r\n58530:33586,\r\n58531:33585,\r\n58532:33600,\r\n58533:33593,\r\n58534:33616,\r\n58535:33605,\r\n58536:33583,\r\n58537:33579,\r\n58538:33559,\r\n58539:33560,\r\n58540:33669,\r\n58541:33690,\r\n58542:33706,\r\n58543:33695,\r\n58544:33698,\r\n58545:33686,\r\n58546:33571,\r\n58547:33678,\r\n58548:33671,\r\n58549:33674,\r\n58550:33660,\r\n58551:33717,\r\n58552:33651,\r\n58553:33653,\r\n58554:33696,\r\n58555:33673,\r\n58556:33704,\r\n58557:33780,\r\n58558:33811,\r\n58559:33771,\r\n58560:33742,\r\n58561:33789,\r\n58562:33795,\r\n58563:33752,\r\n58564:33803,\r\n58565:33729,\r\n58566:33783,\r\n58567:33799,\r\n58568:33760,\r\n58569:33778,\r\n58570:33805,\r\n58571:33826,\r\n58572:33824,\r\n58573:33725,\r\n58574:33848,\r\n58575:34054,\r\n58576:33787,\r\n58577:33901,\r\n58578:33834,\r\n58579:33852,\r\n58580:34138,\r\n58581:33924,\r\n58582:33911,\r\n58583:33899,\r\n58584:33965,\r\n58585:33902,\r\n58586:33922,\r\n58587:33897,\r\n58588:33862,\r\n58589:33836,\r\n58590:33903,\r\n58591:33913,\r\n58592:33845,\r\n58593:33994,\r\n58594:33890,\r\n58595:33977,\r\n58596:33983,\r\n58597:33951,\r\n58598:34009,\r\n58599:33997,\r\n58600:33979,\r\n58601:34010,\r\n58602:34000,\r\n58603:33985,\r\n58604:33990,\r\n58605:34006,\r\n58606:33953,\r\n58607:34081,\r\n58608:34047,\r\n58609:34036,\r\n58610:34071,\r\n58611:34072,\r\n58612:34092,\r\n58613:34079,\r\n58614:34069,\r\n58615:34068,\r\n58616:34044,\r\n58617:34112,\r\n58618:34147,\r\n58619:34136,\r\n58620:34120,\r\n58688:34113,\r\n58689:34306,\r\n58690:34123,\r\n58691:34133,\r\n58692:34176,\r\n58693:34212,\r\n58694:34184,\r\n58695:34193,\r\n58696:34186,\r\n58697:34216,\r\n58698:34157,\r\n58699:34196,\r\n58700:34203,\r\n58701:34282,\r\n58702:34183,\r\n58703:34204,\r\n58704:34167,\r\n58705:34174,\r\n58706:34192,\r\n58707:34249,\r\n58708:34234,\r\n58709:34255,\r\n58710:34233,\r\n58711:34256,\r\n58712:34261,\r\n58713:34269,\r\n58714:34277,\r\n58715:34268,\r\n58716:34297,\r\n58717:34314,\r\n58718:34323,\r\n58719:34315,\r\n58720:34302,\r\n58721:34298,\r\n58722:34310,\r\n58723:34338,\r\n58724:34330,\r\n58725:34352,\r\n58726:34367,\r\n58727:34381,\r\n58728:20053,\r\n58729:34388,\r\n58730:34399,\r\n58731:34407,\r\n58732:34417,\r\n58733:34451,\r\n58734:34467,\r\n58735:34473,\r\n58736:34474,\r\n58737:34443,\r\n58738:34444,\r\n58739:34486,\r\n58740:34479,\r\n58741:34500,\r\n58742:34502,\r\n58743:34480,\r\n58744:34505,\r\n58745:34851,\r\n58746:34475,\r\n58747:34516,\r\n58748:34526,\r\n58749:34537,\r\n58750:34540,\r\n58752:34527,\r\n58753:34523,\r\n58754:34543,\r\n58755:34578,\r\n58756:34566,\r\n58757:34568,\r\n58758:34560,\r\n58759:34563,\r\n58760:34555,\r\n58761:34577,\r\n58762:34569,\r\n58763:34573,\r\n58764:34553,\r\n58765:34570,\r\n58766:34612,\r\n58767:34623,\r\n58768:34615,\r\n58769:34619,\r\n58770:34597,\r\n58771:34601,\r\n58772:34586,\r\n58773:34656,\r\n58774:34655,\r\n58775:34680,\r\n58776:34636,\r\n58777:34638,\r\n58778:34676,\r\n58779:34647,\r\n58780:34664,\r\n58781:34670,\r\n58782:34649,\r\n58783:34643,\r\n58784:34659,\r\n58785:34666,\r\n58786:34821,\r\n58787:34722,\r\n58788:34719,\r\n58789:34690,\r\n58790:34735,\r\n58791:34763,\r\n58792:34749,\r\n58793:34752,\r\n58794:34768,\r\n58795:38614,\r\n58796:34731,\r\n58797:34756,\r\n58798:34739,\r\n58799:34759,\r\n58800:34758,\r\n58801:34747,\r\n58802:34799,\r\n58803:34802,\r\n58804:34784,\r\n58805:34831,\r\n58806:34829,\r\n58807:34814,\r\n58808:34806,\r\n58809:34807,\r\n58810:34830,\r\n58811:34770,\r\n58812:34833,\r\n58813:34838,\r\n58814:34837,\r\n58815:34850,\r\n58816:34849,\r\n58817:34865,\r\n58818:34870,\r\n58819:34873,\r\n58820:34855,\r\n58821:34875,\r\n58822:34884,\r\n58823:34882,\r\n58824:34898,\r\n58825:34905,\r\n58826:34910,\r\n58827:34914,\r\n58828:34923,\r\n58829:34945,\r\n58830:34942,\r\n58831:34974,\r\n58832:34933,\r\n58833:34941,\r\n58834:34997,\r\n58835:34930,\r\n58836:34946,\r\n58837:34967,\r\n58838:34962,\r\n58839:34990,\r\n58840:34969,\r\n58841:34978,\r\n58842:34957,\r\n58843:34980,\r\n58844:34992,\r\n58845:35007,\r\n58846:34993,\r\n58847:35011,\r\n58848:35012,\r\n58849:35028,\r\n58850:35032,\r\n58851:35033,\r\n58852:35037,\r\n58853:35065,\r\n58854:35074,\r\n58855:35068,\r\n58856:35060,\r\n58857:35048,\r\n58858:35058,\r\n58859:35076,\r\n58860:35084,\r\n58861:35082,\r\n58862:35091,\r\n58863:35139,\r\n58864:35102,\r\n58865:35109,\r\n58866:35114,\r\n58867:35115,\r\n58868:35137,\r\n58869:35140,\r\n58870:35131,\r\n58871:35126,\r\n58872:35128,\r\n58873:35148,\r\n58874:35101,\r\n58875:35168,\r\n58876:35166,\r\n58944:35174,\r\n58945:35172,\r\n58946:35181,\r\n58947:35178,\r\n58948:35183,\r\n58949:35188,\r\n58950:35191,\r\n58951:35198,\r\n58952:35203,\r\n58953:35208,\r\n58954:35210,\r\n58955:35219,\r\n58956:35224,\r\n58957:35233,\r\n58958:35241,\r\n58959:35238,\r\n58960:35244,\r\n58961:35247,\r\n58962:35250,\r\n58963:35258,\r\n58964:35261,\r\n58965:35263,\r\n58966:35264,\r\n58967:35290,\r\n58968:35292,\r\n58969:35293,\r\n58970:35303,\r\n58971:35316,\r\n58972:35320,\r\n58973:35331,\r\n58974:35350,\r\n58975:35344,\r\n58976:35340,\r\n58977:35355,\r\n58978:35357,\r\n58979:35365,\r\n58980:35382,\r\n58981:35393,\r\n58982:35419,\r\n58983:35410,\r\n58984:35398,\r\n58985:35400,\r\n58986:35452,\r\n58987:35437,\r\n58988:35436,\r\n58989:35426,\r\n58990:35461,\r\n58991:35458,\r\n58992:35460,\r\n58993:35496,\r\n58994:35489,\r\n58995:35473,\r\n58996:35493,\r\n58997:35494,\r\n58998:35482,\r\n58999:35491,\r\n59000:35524,\r\n59001:35533,\r\n59002:35522,\r\n59003:35546,\r\n59004:35563,\r\n59005:35571,\r\n59006:35559,\r\n59008:35556,\r\n59009:35569,\r\n59010:35604,\r\n59011:35552,\r\n59012:35554,\r\n59013:35575,\r\n59014:35550,\r\n59015:35547,\r\n59016:35596,\r\n59017:35591,\r\n59018:35610,\r\n59019:35553,\r\n59020:35606,\r\n59021:35600,\r\n59022:35607,\r\n59023:35616,\r\n59024:35635,\r\n59025:38827,\r\n59026:35622,\r\n59027:35627,\r\n59028:35646,\r\n59029:35624,\r\n59030:35649,\r\n59031:35660,\r\n59032:35663,\r\n59033:35662,\r\n59034:35657,\r\n59035:35670,\r\n59036:35675,\r\n59037:35674,\r\n59038:35691,\r\n59039:35679,\r\n59040:35692,\r\n59041:35695,\r\n59042:35700,\r\n59043:35709,\r\n59044:35712,\r\n59045:35724,\r\n59046:35726,\r\n59047:35730,\r\n59048:35731,\r\n59049:35734,\r\n59050:35737,\r\n59051:35738,\r\n59052:35898,\r\n59053:35905,\r\n59054:35903,\r\n59055:35912,\r\n59056:35916,\r\n59057:35918,\r\n59058:35920,\r\n59059:35925,\r\n59060:35938,\r\n59061:35948,\r\n59062:35960,\r\n59063:35962,\r\n59064:35970,\r\n59065:35977,\r\n59066:35973,\r\n59067:35978,\r\n59068:35981,\r\n59069:35982,\r\n59070:35988,\r\n59071:35964,\r\n59072:35992,\r\n59073:25117,\r\n59074:36013,\r\n59075:36010,\r\n59076:36029,\r\n59077:36018,\r\n59078:36019,\r\n59079:36014,\r\n59080:36022,\r\n59081:36040,\r\n59082:36033,\r\n59083:36068,\r\n59084:36067,\r\n59085:36058,\r\n59086:36093,\r\n59087:36090,\r\n59088:36091,\r\n59089:36100,\r\n59090:36101,\r\n59091:36106,\r\n59092:36103,\r\n59093:36111,\r\n59094:36109,\r\n59095:36112,\r\n59096:40782,\r\n59097:36115,\r\n59098:36045,\r\n59099:36116,\r\n59100:36118,\r\n59101:36199,\r\n59102:36205,\r\n59103:36209,\r\n59104:36211,\r\n59105:36225,\r\n59106:36249,\r\n59107:36290,\r\n59108:36286,\r\n59109:36282,\r\n59110:36303,\r\n59111:36314,\r\n59112:36310,\r\n59113:36300,\r\n59114:36315,\r\n59115:36299,\r\n59116:36330,\r\n59117:36331,\r\n59118:36319,\r\n59119:36323,\r\n59120:36348,\r\n59121:36360,\r\n59122:36361,\r\n59123:36351,\r\n59124:36381,\r\n59125:36382,\r\n59126:36368,\r\n59127:36383,\r\n59128:36418,\r\n59129:36405,\r\n59130:36400,\r\n59131:36404,\r\n59132:36426,\r\n59200:36423,\r\n59201:36425,\r\n59202:36428,\r\n59203:36432,\r\n59204:36424,\r\n59205:36441,\r\n59206:36452,\r\n59207:36448,\r\n59208:36394,\r\n59209:36451,\r\n59210:36437,\r\n59211:36470,\r\n59212:36466,\r\n59213:36476,\r\n59214:36481,\r\n59215:36487,\r\n59216:36485,\r\n59217:36484,\r\n59218:36491,\r\n59219:36490,\r\n59220:36499,\r\n59221:36497,\r\n59222:36500,\r\n59223:36505,\r\n59224:36522,\r\n59225:36513,\r\n59226:36524,\r\n59227:36528,\r\n59228:36550,\r\n59229:36529,\r\n59230:36542,\r\n59231:36549,\r\n59232:36552,\r\n59233:36555,\r\n59234:36571,\r\n59235:36579,\r\n59236:36604,\r\n59237:36603,\r\n59238:36587,\r\n59239:36606,\r\n59240:36618,\r\n59241:36613,\r\n59242:36629,\r\n59243:36626,\r\n59244:36633,\r\n59245:36627,\r\n59246:36636,\r\n59247:36639,\r\n59248:36635,\r\n59249:36620,\r\n59250:36646,\r\n59251:36659,\r\n59252:36667,\r\n59253:36665,\r\n59254:36677,\r\n59255:36674,\r\n59256:36670,\r\n59257:36684,\r\n59258:36681,\r\n59259:36678,\r\n59260:36686,\r\n59261:36695,\r\n59262:36700,\r\n59264:36706,\r\n59265:36707,\r\n59266:36708,\r\n59267:36764,\r\n59268:36767,\r\n59269:36771,\r\n59270:36781,\r\n59271:36783,\r\n59272:36791,\r\n59273:36826,\r\n59274:36837,\r\n59275:36834,\r\n59276:36842,\r\n59277:36847,\r\n59278:36999,\r\n59279:36852,\r\n59280:36869,\r\n59281:36857,\r\n59282:36858,\r\n59283:36881,\r\n59284:36885,\r\n59285:36897,\r\n59286:36877,\r\n59287:36894,\r\n59288:36886,\r\n59289:36875,\r\n59290:36903,\r\n59291:36918,\r\n59292:36917,\r\n59293:36921,\r\n59294:36856,\r\n59295:36943,\r\n59296:36944,\r\n59297:36945,\r\n59298:36946,\r\n59299:36878,\r\n59300:36937,\r\n59301:36926,\r\n59302:36950,\r\n59303:36952,\r\n59304:36958,\r\n59305:36968,\r\n59306:36975,\r\n59307:36982,\r\n59308:38568,\r\n59309:36978,\r\n59310:36994,\r\n59311:36989,\r\n59312:36993,\r\n59313:36992,\r\n59314:37002,\r\n59315:37001,\r\n59316:37007,\r\n59317:37032,\r\n59318:37039,\r\n59319:37041,\r\n59320:37045,\r\n59321:37090,\r\n59322:37092,\r\n59323:25160,\r\n59324:37083,\r\n59325:37122,\r\n59326:37138,\r\n59327:37145,\r\n59328:37170,\r\n59329:37168,\r\n59330:37194,\r\n59331:37206,\r\n59332:37208,\r\n59333:37219,\r\n59334:37221,\r\n59335:37225,\r\n59336:37235,\r\n59337:37234,\r\n59338:37259,\r\n59339:37257,\r\n59340:37250,\r\n59341:37282,\r\n59342:37291,\r\n59343:37295,\r\n59344:37290,\r\n59345:37301,\r\n59346:37300,\r\n59347:37306,\r\n59348:37312,\r\n59349:37313,\r\n59350:37321,\r\n59351:37323,\r\n59352:37328,\r\n59353:37334,\r\n59354:37343,\r\n59355:37345,\r\n59356:37339,\r\n59357:37372,\r\n59358:37365,\r\n59359:37366,\r\n59360:37406,\r\n59361:37375,\r\n59362:37396,\r\n59363:37420,\r\n59364:37397,\r\n59365:37393,\r\n59366:37470,\r\n59367:37463,\r\n59368:37445,\r\n59369:37449,\r\n59370:37476,\r\n59371:37448,\r\n59372:37525,\r\n59373:37439,\r\n59374:37451,\r\n59375:37456,\r\n59376:37532,\r\n59377:37526,\r\n59378:37523,\r\n59379:37531,\r\n59380:37466,\r\n59381:37583,\r\n59382:37561,\r\n59383:37559,\r\n59384:37609,\r\n59385:37647,\r\n59386:37626,\r\n59387:37700,\r\n59388:37678,\r\n59456:37657,\r\n59457:37666,\r\n59458:37658,\r\n59459:37667,\r\n59460:37690,\r\n59461:37685,\r\n59462:37691,\r\n59463:37724,\r\n59464:37728,\r\n59465:37756,\r\n59466:37742,\r\n59467:37718,\r\n59468:37808,\r\n59469:37804,\r\n59470:37805,\r\n59471:37780,\r\n59472:37817,\r\n59473:37846,\r\n59474:37847,\r\n59475:37864,\r\n59476:37861,\r\n59477:37848,\r\n59478:37827,\r\n59479:37853,\r\n59480:37840,\r\n59481:37832,\r\n59482:37860,\r\n59483:37914,\r\n59484:37908,\r\n59485:37907,\r\n59486:37891,\r\n59487:37895,\r\n59488:37904,\r\n59489:37942,\r\n59490:37931,\r\n59491:37941,\r\n59492:37921,\r\n59493:37946,\r\n59494:37953,\r\n59495:37970,\r\n59496:37956,\r\n59497:37979,\r\n59498:37984,\r\n59499:37986,\r\n59500:37982,\r\n59501:37994,\r\n59502:37417,\r\n59503:38000,\r\n59504:38005,\r\n59505:38007,\r\n59506:38013,\r\n59507:37978,\r\n59508:38012,\r\n59509:38014,\r\n59510:38017,\r\n59511:38015,\r\n59512:38274,\r\n59513:38279,\r\n59514:38282,\r\n59515:38292,\r\n59516:38294,\r\n59517:38296,\r\n59518:38297,\r\n59520:38304,\r\n59521:38312,\r\n59522:38311,\r\n59523:38317,\r\n59524:38332,\r\n59525:38331,\r\n59526:38329,\r\n59527:38334,\r\n59528:38346,\r\n59529:28662,\r\n59530:38339,\r\n59531:38349,\r\n59532:38348,\r\n59533:38357,\r\n59534:38356,\r\n59535:38358,\r\n59536:38364,\r\n59537:38369,\r\n59538:38373,\r\n59539:38370,\r\n59540:38433,\r\n59541:38440,\r\n59542:38446,\r\n59543:38447,\r\n59544:38466,\r\n59545:38476,\r\n59546:38479,\r\n59547:38475,\r\n59548:38519,\r\n59549:38492,\r\n59550:38494,\r\n59551:38493,\r\n59552:38495,\r\n59553:38502,\r\n59554:38514,\r\n59555:38508,\r\n59556:38541,\r\n59557:38552,\r\n59558:38549,\r\n59559:38551,\r\n59560:38570,\r\n59561:38567,\r\n59562:38577,\r\n59563:38578,\r\n59564:38576,\r\n59565:38580,\r\n59566:38582,\r\n59567:38584,\r\n59568:38585,\r\n59569:38606,\r\n59570:38603,\r\n59571:38601,\r\n59572:38605,\r\n59573:35149,\r\n59574:38620,\r\n59575:38669,\r\n59576:38613,\r\n59577:38649,\r\n59578:38660,\r\n59579:38662,\r\n59580:38664,\r\n59581:38675,\r\n59582:38670,\r\n59583:38673,\r\n59584:38671,\r\n59585:38678,\r\n59586:38681,\r\n59587:38692,\r\n59588:38698,\r\n59589:38704,\r\n59590:38713,\r\n59591:38717,\r\n59592:38718,\r\n59593:38724,\r\n59594:38726,\r\n59595:38728,\r\n59596:38722,\r\n59597:38729,\r\n59598:38748,\r\n59599:38752,\r\n59600:38756,\r\n59601:38758,\r\n59602:38760,\r\n59603:21202,\r\n59604:38763,\r\n59605:38769,\r\n59606:38777,\r\n59607:38789,\r\n59608:38780,\r\n59609:38785,\r\n59610:38778,\r\n59611:38790,\r\n59612:38795,\r\n59613:38799,\r\n59614:38800,\r\n59615:38812,\r\n59616:38824,\r\n59617:38822,\r\n59618:38819,\r\n59619:38835,\r\n59620:38836,\r\n59621:38851,\r\n59622:38854,\r\n59623:38856,\r\n59624:38859,\r\n59625:38876,\r\n59626:38893,\r\n59627:40783,\r\n59628:38898,\r\n59629:31455,\r\n59630:38902,\r\n59631:38901,\r\n59632:38927,\r\n59633:38924,\r\n59634:38968,\r\n59635:38948,\r\n59636:38945,\r\n59637:38967,\r\n59638:38973,\r\n59639:38982,\r\n59640:38991,\r\n59641:38987,\r\n59642:39019,\r\n59643:39023,\r\n59644:39024,\r\n59712:39025,\r\n59713:39028,\r\n59714:39027,\r\n59715:39082,\r\n59716:39087,\r\n59717:39089,\r\n59718:39094,\r\n59719:39108,\r\n59720:39107,\r\n59721:39110,\r\n59722:39145,\r\n59723:39147,\r\n59724:39171,\r\n59725:39177,\r\n59726:39186,\r\n59727:39188,\r\n59728:39192,\r\n59729:39201,\r\n59730:39197,\r\n59731:39198,\r\n59732:39204,\r\n59733:39200,\r\n59734:39212,\r\n59735:39214,\r\n59736:39229,\r\n59737:39230,\r\n59738:39234,\r\n59739:39241,\r\n59740:39237,\r\n59741:39248,\r\n59742:39243,\r\n59743:39249,\r\n59744:39250,\r\n59745:39244,\r\n59746:39253,\r\n59747:39319,\r\n59748:39320,\r\n59749:39333,\r\n59750:39341,\r\n59751:39342,\r\n59752:39356,\r\n59753:39391,\r\n59754:39387,\r\n59755:39389,\r\n59756:39384,\r\n59757:39377,\r\n59758:39405,\r\n59759:39406,\r\n59760:39409,\r\n59761:39410,\r\n59762:39419,\r\n59763:39416,\r\n59764:39425,\r\n59765:39439,\r\n59766:39429,\r\n59767:39394,\r\n59768:39449,\r\n59769:39467,\r\n59770:39479,\r\n59771:39493,\r\n59772:39490,\r\n59773:39488,\r\n59774:39491,\r\n59776:39486,\r\n59777:39509,\r\n59778:39501,\r\n59779:39515,\r\n59780:39511,\r\n59781:39519,\r\n59782:39522,\r\n59783:39525,\r\n59784:39524,\r\n59785:39529,\r\n59786:39531,\r\n59787:39530,\r\n59788:39597,\r\n59789:39600,\r\n59790:39612,\r\n59791:39616,\r\n59792:39631,\r\n59793:39633,\r\n59794:39635,\r\n59795:39636,\r\n59796:39646,\r\n59797:39647,\r\n59798:39650,\r\n59799:39651,\r\n59800:39654,\r\n59801:39663,\r\n59802:39659,\r\n59803:39662,\r\n59804:39668,\r\n59805:39665,\r\n59806:39671,\r\n59807:39675,\r\n59808:39686,\r\n59809:39704,\r\n59810:39706,\r\n59811:39711,\r\n59812:39714,\r\n59813:39715,\r\n59814:39717,\r\n59815:39719,\r\n59816:39720,\r\n59817:39721,\r\n59818:39722,\r\n59819:39726,\r\n59820:39727,\r\n59821:39730,\r\n59822:39748,\r\n59823:39747,\r\n59824:39759,\r\n59825:39757,\r\n59826:39758,\r\n59827:39761,\r\n59828:39768,\r\n59829:39796,\r\n59830:39827,\r\n59831:39811,\r\n59832:39825,\r\n59833:39830,\r\n59834:39831,\r\n59835:39839,\r\n59836:39840,\r\n59837:39848,\r\n59838:39860,\r\n59839:39872,\r\n59840:39882,\r\n59841:39865,\r\n59842:39878,\r\n59843:39887,\r\n59844:39889,\r\n59845:39890,\r\n59846:39907,\r\n59847:39906,\r\n59848:39908,\r\n59849:39892,\r\n59850:39905,\r\n59851:39994,\r\n59852:39922,\r\n59853:39921,\r\n59854:39920,\r\n59855:39957,\r\n59856:39956,\r\n59857:39945,\r\n59858:39955,\r\n59859:39948,\r\n59860:39942,\r\n59861:39944,\r\n59862:39954,\r\n59863:39946,\r\n59864:39940,\r\n59865:39982,\r\n59866:39963,\r\n59867:39973,\r\n59868:39972,\r\n59869:39969,\r\n59870:39984,\r\n59871:40007,\r\n59872:39986,\r\n59873:40006,\r\n59874:39998,\r\n59875:40026,\r\n59876:40032,\r\n59877:40039,\r\n59878:40054,\r\n59879:40056,\r\n59880:40167,\r\n59881:40172,\r\n59882:40176,\r\n59883:40201,\r\n59884:40200,\r\n59885:40171,\r\n59886:40195,\r\n59887:40198,\r\n59888:40234,\r\n59889:40230,\r\n59890:40367,\r\n59891:40227,\r\n59892:40223,\r\n59893:40260,\r\n59894:40213,\r\n59895:40210,\r\n59896:40257,\r\n59897:40255,\r\n59898:40254,\r\n59899:40262,\r\n59900:40264,\r\n59968:40285,\r\n59969:40286,\r\n59970:40292,\r\n59971:40273,\r\n59972:40272,\r\n59973:40281,\r\n59974:40306,\r\n59975:40329,\r\n59976:40327,\r\n59977:40363,\r\n59978:40303,\r\n59979:40314,\r\n59980:40346,\r\n59981:40356,\r\n59982:40361,\r\n59983:40370,\r\n59984:40388,\r\n59985:40385,\r\n59986:40379,\r\n59987:40376,\r\n59988:40378,\r\n59989:40390,\r\n59990:40399,\r\n59991:40386,\r\n59992:40409,\r\n59993:40403,\r\n59994:40440,\r\n59995:40422,\r\n59996:40429,\r\n59997:40431,\r\n59998:40445,\r\n59999:40474,\r\n60000:40475,\r\n60001:40478,\r\n60002:40565,\r\n60003:40569,\r\n60004:40573,\r\n60005:40577,\r\n60006:40584,\r\n60007:40587,\r\n60008:40588,\r\n60009:40594,\r\n60010:40597,\r\n60011:40593,\r\n60012:40605,\r\n60013:40613,\r\n60014:40617,\r\n60015:40632,\r\n60016:40618,\r\n60017:40621,\r\n60018:38753,\r\n60019:40652,\r\n60020:40654,\r\n60021:40655,\r\n60022:40656,\r\n60023:40660,\r\n60024:40668,\r\n60025:40670,\r\n60026:40669,\r\n60027:40672,\r\n60028:40677,\r\n60029:40680,\r\n60030:40687,\r\n60032:40692,\r\n60033:40694,\r\n60034:40695,\r\n60035:40697,\r\n60036:40699,\r\n60037:40700,\r\n60038:40701,\r\n60039:40711,\r\n60040:40712,\r\n60041:30391,\r\n60042:40725,\r\n60043:40737,\r\n60044:40748,\r\n60045:40766,\r\n60046:40778,\r\n60047:40786,\r\n60048:40788,\r\n60049:40803,\r\n60050:40799,\r\n60051:40800,\r\n60052:40801,\r\n60053:40806,\r\n60054:40807,\r\n60055:40812,\r\n60056:40810,\r\n60057:40823,\r\n60058:40818,\r\n60059:40822,\r\n60060:40853,\r\n60061:40860,\r\n60062:40864,\r\n60063:22575,\r\n60064:27079,\r\n60065:36953,\r\n60066:29796,\r\n60067:20956,\r\n60068:29081,\r\n60736:32394,\r\n60737:35100,\r\n60738:37704,\r\n60739:37512,\r\n60740:34012,\r\n60741:20425,\r\n60742:28859,\r\n60743:26161,\r\n60744:26824,\r\n60745:37625,\r\n60746:26363,\r\n60747:24389,\r\n60748:20008,\r\n60749:20193,\r\n60750:20220,\r\n60751:20224,\r\n60752:20227,\r\n60753:20281,\r\n60754:20310,\r\n60755:20370,\r\n60756:20362,\r\n60757:20378,\r\n60758:20372,\r\n60759:20429,\r\n60760:20544,\r\n60761:20514,\r\n60762:20479,\r\n60763:20510,\r\n60764:20550,\r\n60765:20592,\r\n60766:20546,\r\n60767:20628,\r\n60768:20724,\r\n60769:20696,\r\n60770:20810,\r\n60771:20836,\r\n60772:20893,\r\n60773:20926,\r\n60774:20972,\r\n60775:21013,\r\n60776:21148,\r\n60777:21158,\r\n60778:21184,\r\n60779:21211,\r\n60780:21248,\r\n60781:21255,\r\n60782:21284,\r\n60783:21362,\r\n60784:21395,\r\n60785:21426,\r\n60786:21469,\r\n60787:64014,\r\n60788:21660,\r\n60789:21642,\r\n60790:21673,\r\n60791:21759,\r\n60792:21894,\r\n60793:22361,\r\n60794:22373,\r\n60795:22444,\r\n60796:22472,\r\n60797:22471,\r\n60798:64015,\r\n60800:64016,\r\n60801:22686,\r\n60802:22706,\r\n60803:22795,\r\n60804:22867,\r\n60805:22875,\r\n60806:22877,\r\n60807:22883,\r\n60808:22948,\r\n60809:22970,\r\n60810:23382,\r\n60811:23488,\r\n60812:29999,\r\n60813:23512,\r\n60814:23532,\r\n60815:23582,\r\n60816:23718,\r\n60817:23738,\r\n60818:23797,\r\n60819:23847,\r\n60820:23891,\r\n60821:64017,\r\n60822:23874,\r\n60823:23917,\r\n60824:23992,\r\n60825:23993,\r\n60826:24016,\r\n60827:24353,\r\n60828:24372,\r\n60829:24423,\r\n60830:24503,\r\n60831:24542,\r\n60832:24669,\r\n60833:24709,\r\n60834:24714,\r\n60835:24798,\r\n60836:24789,\r\n60837:24864,\r\n60838:24818,\r\n60839:24849,\r\n60840:24887,\r\n60841:24880,\r\n60842:24984,\r\n60843:25107,\r\n60844:25254,\r\n60845:25589,\r\n60846:25696,\r\n60847:25757,\r\n60848:25806,\r\n60849:25934,\r\n60850:26112,\r\n60851:26133,\r\n60852:26171,\r\n60853:26121,\r\n60854:26158,\r\n60855:26142,\r\n60856:26148,\r\n60857:26213,\r\n60858:26199,\r\n60859:26201,\r\n60860:64018,\r\n60861:26227,\r\n60862:26265,\r\n60863:26272,\r\n60864:26290,\r\n60865:26303,\r\n60866:26362,\r\n60867:26382,\r\n60868:63785,\r\n60869:26470,\r\n60870:26555,\r\n60871:26706,\r\n60872:26560,\r\n60873:26625,\r\n60874:26692,\r\n60875:26831,\r\n60876:64019,\r\n60877:26984,\r\n60878:64020,\r\n60879:27032,\r\n60880:27106,\r\n60881:27184,\r\n60882:27243,\r\n60883:27206,\r\n60884:27251,\r\n60885:27262,\r\n60886:27362,\r\n60887:27364,\r\n60888:27606,\r\n60889:27711,\r\n60890:27740,\r\n60891:27782,\r\n60892:27759,\r\n60893:27866,\r\n60894:27908,\r\n60895:28039,\r\n60896:28015,\r\n60897:28054,\r\n60898:28076,\r\n60899:28111,\r\n60900:28152,\r\n60901:28146,\r\n60902:28156,\r\n60903:28217,\r\n60904:28252,\r\n60905:28199,\r\n60906:28220,\r\n60907:28351,\r\n60908:28552,\r\n60909:28597,\r\n60910:28661,\r\n60911:28677,\r\n60912:28679,\r\n60913:28712,\r\n60914:28805,\r\n60915:28843,\r\n60916:28943,\r\n60917:28932,\r\n60918:29020,\r\n60919:28998,\r\n60920:28999,\r\n60921:64021,\r\n60922:29121,\r\n60923:29182,\r\n60924:29361,\r\n60992:29374,\r\n60993:29476,\r\n60994:64022,\r\n60995:29559,\r\n60996:29629,\r\n60997:29641,\r\n60998:29654,\r\n60999:29667,\r\n61000:29650,\r\n61001:29703,\r\n61002:29685,\r\n61003:29734,\r\n61004:29738,\r\n61005:29737,\r\n61006:29742,\r\n61007:29794,\r\n61008:29833,\r\n61009:29855,\r\n61010:29953,\r\n61011:30063,\r\n61012:30338,\r\n61013:30364,\r\n61014:30366,\r\n61015:30363,\r\n61016:30374,\r\n61017:64023,\r\n61018:30534,\r\n61019:21167,\r\n61020:30753,\r\n61021:30798,\r\n61022:30820,\r\n61023:30842,\r\n61024:31024,\r\n61025:64024,\r\n61026:64025,\r\n61027:64026,\r\n61028:31124,\r\n61029:64027,\r\n61030:31131,\r\n61031:31441,\r\n61032:31463,\r\n61033:64028,\r\n61034:31467,\r\n61035:31646,\r\n61036:64029,\r\n61037:32072,\r\n61038:32092,\r\n61039:32183,\r\n61040:32160,\r\n61041:32214,\r\n61042:32338,\r\n61043:32583,\r\n61044:32673,\r\n61045:64030,\r\n61046:33537,\r\n61047:33634,\r\n61048:33663,\r\n61049:33735,\r\n61050:33782,\r\n61051:33864,\r\n61052:33972,\r\n61053:34131,\r\n61054:34137,\r\n61056:34155,\r\n61057:64031,\r\n61058:34224,\r\n61059:64032,\r\n61060:64033,\r\n61061:34823,\r\n61062:35061,\r\n61063:35346,\r\n61064:35383,\r\n61065:35449,\r\n61066:35495,\r\n61067:35518,\r\n61068:35551,\r\n61069:64034,\r\n61070:35574,\r\n61071:35667,\r\n61072:35711,\r\n61073:36080,\r\n61074:36084,\r\n61075:36114,\r\n61076:36214,\r\n61077:64035,\r\n61078:36559,\r\n61079:64036,\r\n61080:64037,\r\n61081:36967,\r\n61082:37086,\r\n61083:64038,\r\n61084:37141,\r\n61085:37159,\r\n61086:37338,\r\n61087:37335,\r\n61088:37342,\r\n61089:37357,\r\n61090:37358,\r\n61091:37348,\r\n61092:37349,\r\n61093:37382,\r\n61094:37392,\r\n61095:37386,\r\n61096:37434,\r\n61097:37440,\r\n61098:37436,\r\n61099:37454,\r\n61100:37465,\r\n61101:37457,\r\n61102:37433,\r\n61103:37479,\r\n61104:37543,\r\n61105:37495,\r\n61106:37496,\r\n61107:37607,\r\n61108:37591,\r\n61109:37593,\r\n61110:37584,\r\n61111:64039,\r\n61112:37589,\r\n61113:37600,\r\n61114:37587,\r\n61115:37669,\r\n61116:37665,\r\n61117:37627,\r\n61118:64040,\r\n61119:37662,\r\n61120:37631,\r\n61121:37661,\r\n61122:37634,\r\n61123:37744,\r\n61124:37719,\r\n61125:37796,\r\n61126:37830,\r\n61127:37854,\r\n61128:37880,\r\n61129:37937,\r\n61130:37957,\r\n61131:37960,\r\n61132:38290,\r\n61133:63964,\r\n61134:64041,\r\n61135:38557,\r\n61136:38575,\r\n61137:38707,\r\n61138:38715,\r\n61139:38723,\r\n61140:38733,\r\n61141:38735,\r\n61142:38737,\r\n61143:38741,\r\n61144:38999,\r\n61145:39013,\r\n61146:64042,\r\n61147:64043,\r\n61148:39207,\r\n61149:64044,\r\n61150:39326,\r\n61151:39502,\r\n61152:39641,\r\n61153:39644,\r\n61154:39797,\r\n61155:39794,\r\n61156:39823,\r\n61157:39857,\r\n61158:39867,\r\n61159:39936,\r\n61160:40304,\r\n61161:40299,\r\n61162:64045,\r\n61163:40473,\r\n61164:40657,\r\n61167:8560,\r\n61168:8561,\r\n61169:8562,\r\n61170:8563,\r\n61171:8564,\r\n61172:8565,\r\n61173:8566,\r\n61174:8567,\r\n61175:8568,\r\n61176:8569,\r\n61177:65506,\r\n61178:65508,\r\n61179:65287,\r\n61180:65282,\r\n61504:57344,\r\n61505:57345,\r\n61506:57346,\r\n61507:57347,\r\n61508:57348,\r\n61509:57349,\r\n61510:57350,\r\n61511:57351,\r\n61512:57352,\r\n61513:57353,\r\n61514:57354,\r\n61515:57355,\r\n61516:57356,\r\n61517:57357,\r\n61518:57358,\r\n61519:57359,\r\n61520:57360,\r\n61521:57361,\r\n61522:57362,\r\n61523:57363,\r\n61524:57364,\r\n61525:57365,\r\n61526:57366,\r\n61527:57367,\r\n61528:57368,\r\n61529:57369,\r\n61530:57370,\r\n61531:57371,\r\n61532:57372,\r\n61533:57373,\r\n61534:57374,\r\n61535:57375,\r\n61536:57376,\r\n61537:57377,\r\n61538:57378,\r\n61539:57379,\r\n61540:57380,\r\n61541:57381,\r\n61542:57382,\r\n61543:57383,\r\n61544:57384,\r\n61545:57385,\r\n61546:57386,\r\n61547:57387,\r\n61548:57388,\r\n61549:57389,\r\n61550:57390,\r\n61551:57391,\r\n61552:57392,\r\n61553:57393,\r\n61554:57394,\r\n61555:57395,\r\n61556:57396,\r\n61557:57397,\r\n61558:57398,\r\n61559:57399,\r\n61560:57400,\r\n61561:57401,\r\n61562:57402,\r\n61563:57403,\r\n61564:57404,\r\n61565:57405,\r\n61566:57406,\r\n61568:57407,\r\n61569:57408,\r\n61570:57409,\r\n61571:57410,\r\n61572:57411,\r\n61573:57412,\r\n61574:57413,\r\n61575:57414,\r\n61576:57415,\r\n61577:57416,\r\n61578:57417,\r\n61579:57418,\r\n61580:57419,\r\n61581:57420,\r\n61582:57421,\r\n61583:57422,\r\n61584:57423,\r\n61585:57424,\r\n61586:57425,\r\n61587:57426,\r\n61588:57427,\r\n61589:57428,\r\n61590:57429,\r\n61591:57430,\r\n61592:57431,\r\n61593:57432,\r\n61594:57433,\r\n61595:57434,\r\n61596:57435,\r\n61597:57436,\r\n61598:57437,\r\n61599:57438,\r\n61600:57439,\r\n61601:57440,\r\n61602:57441,\r\n61603:57442,\r\n61604:57443,\r\n61605:57444,\r\n61606:57445,\r\n61607:57446,\r\n61608:57447,\r\n61609:57448,\r\n61610:57449,\r\n61611:57450,\r\n61612:57451,\r\n61613:57452,\r\n61614:57453,\r\n61615:57454,\r\n61616:57455,\r\n61617:57456,\r\n61618:57457,\r\n61619:57458,\r\n61620:57459,\r\n61621:57460,\r\n61622:57461,\r\n61623:57462,\r\n61624:57463,\r\n61625:57464,\r\n61626:57465,\r\n61627:57466,\r\n61628:57467,\r\n61629:57468,\r\n61630:57469,\r\n61631:57470,\r\n61632:57471,\r\n61633:57472,\r\n61634:57473,\r\n61635:57474,\r\n61636:57475,\r\n61637:57476,\r\n61638:57477,\r\n61639:57478,\r\n61640:57479,\r\n61641:57480,\r\n61642:57481,\r\n61643:57482,\r\n61644:57483,\r\n61645:57484,\r\n61646:57485,\r\n61647:57486,\r\n61648:57487,\r\n61649:57488,\r\n61650:57489,\r\n61651:57490,\r\n61652:57491,\r\n61653:57492,\r\n61654:57493,\r\n61655:57494,\r\n61656:57495,\r\n61657:57496,\r\n61658:57497,\r\n61659:57498,\r\n61660:57499,\r\n61661:57500,\r\n61662:57501,\r\n61663:57502,\r\n61664:57503,\r\n61665:57504,\r\n61666:57505,\r\n61667:57506,\r\n61668:57507,\r\n61669:57508,\r\n61670:57509,\r\n61671:57510,\r\n61672:57511,\r\n61673:57512,\r\n61674:57513,\r\n61675:57514,\r\n61676:57515,\r\n61677:57516,\r\n61678:57517,\r\n61679:57518,\r\n61680:57519,\r\n61681:57520,\r\n61682:57521,\r\n61683:57522,\r\n61684:57523,\r\n61685:57524,\r\n61686:57525,\r\n61687:57526,\r\n61688:57527,\r\n61689:57528,\r\n61690:57529,\r\n61691:57530,\r\n61692:57531,\r\n61760:57532,\r\n61761:57533,\r\n61762:57534,\r\n61763:57535,\r\n61764:57536,\r\n61765:57537,\r\n61766:57538,\r\n61767:57539,\r\n61768:57540,\r\n61769:57541,\r\n61770:57542,\r\n61771:57543,\r\n61772:57544,\r\n61773:57545,\r\n61774:57546,\r\n61775:57547,\r\n61776:57548,\r\n61777:57549,\r\n61778:57550,\r\n61779:57551,\r\n61780:57552,\r\n61781:57553,\r\n61782:57554,\r\n61783:57555,\r\n61784:57556,\r\n61785:57557,\r\n61786:57558,\r\n61787:57559,\r\n61788:57560,\r\n61789:57561,\r\n61790:57562,\r\n61791:57563,\r\n61792:57564,\r\n61793:57565,\r\n61794:57566,\r\n61795:57567,\r\n61796:57568,\r\n61797:57569,\r\n61798:57570,\r\n61799:57571,\r\n61800:57572,\r\n61801:57573,\r\n61802:57574,\r\n61803:57575,\r\n61804:57576,\r\n61805:57577,\r\n61806:57578,\r\n61807:57579,\r\n61808:57580,\r\n61809:57581,\r\n61810:57582,\r\n61811:57583,\r\n61812:57584,\r\n61813:57585,\r\n61814:57586,\r\n61815:57587,\r\n61816:57588,\r\n61817:57589,\r\n61818:57590,\r\n61819:57591,\r\n61820:57592,\r\n61821:57593,\r\n61822:57594,\r\n61824:57595,\r\n61825:57596,\r\n61826:57597,\r\n61827:57598,\r\n61828:57599,\r\n61829:57600,\r\n61830:57601,\r\n61831:57602,\r\n61832:57603,\r\n61833:57604,\r\n61834:57605,\r\n61835:57606,\r\n61836:57607,\r\n61837:57608,\r\n61838:57609,\r\n61839:57610,\r\n61840:57611,\r\n61841:57612,\r\n61842:57613,\r\n61843:57614,\r\n61844:57615,\r\n61845:57616,\r\n61846:57617,\r\n61847:57618,\r\n61848:57619,\r\n61849:57620,\r\n61850:57621,\r\n61851:57622,\r\n61852:57623,\r\n61853:57624,\r\n61854:57625,\r\n61855:57626,\r\n61856:57627,\r\n61857:57628,\r\n61858:57629,\r\n61859:57630,\r\n61860:57631,\r\n61861:57632,\r\n61862:57633,\r\n61863:57634,\r\n61864:57635,\r\n61865:57636,\r\n61866:57637,\r\n61867:57638,\r\n61868:57639,\r\n61869:57640,\r\n61870:57641,\r\n61871:57642,\r\n61872:57643,\r\n61873:57644,\r\n61874:57645,\r\n61875:57646,\r\n61876:57647,\r\n61877:57648,\r\n61878:57649,\r\n61879:57650,\r\n61880:57651,\r\n61881:57652,\r\n61882:57653,\r\n61883:57654,\r\n61884:57655,\r\n61885:57656,\r\n61886:57657,\r\n61887:57658,\r\n61888:57659,\r\n61889:57660,\r\n61890:57661,\r\n61891:57662,\r\n61892:57663,\r\n61893:57664,\r\n61894:57665,\r\n61895:57666,\r\n61896:57667,\r\n61897:57668,\r\n61898:57669,\r\n61899:57670,\r\n61900:57671,\r\n61901:57672,\r\n61902:57673,\r\n61903:57674,\r\n61904:57675,\r\n61905:57676,\r\n61906:57677,\r\n61907:57678,\r\n61908:57679,\r\n61909:57680,\r\n61910:57681,\r\n61911:57682,\r\n61912:57683,\r\n61913:57684,\r\n61914:57685,\r\n61915:57686,\r\n61916:57687,\r\n61917:57688,\r\n61918:57689,\r\n61919:57690,\r\n61920:57691,\r\n61921:57692,\r\n61922:57693,\r\n61923:57694,\r\n61924:57695,\r\n61925:57696,\r\n61926:57697,\r\n61927:57698,\r\n61928:57699,\r\n61929:57700,\r\n61930:57701,\r\n61931:57702,\r\n61932:57703,\r\n61933:57704,\r\n61934:57705,\r\n61935:57706,\r\n61936:57707,\r\n61937:57708,\r\n61938:57709,\r\n61939:57710,\r\n61940:57711,\r\n61941:57712,\r\n61942:57713,\r\n61943:57714,\r\n61944:57715,\r\n61945:57716,\r\n61946:57717,\r\n61947:57718,\r\n61948:57719,\r\n62016:57720,\r\n62017:57721,\r\n62018:57722,\r\n62019:57723,\r\n62020:57724,\r\n62021:57725,\r\n62022:57726,\r\n62023:57727,\r\n62024:57728,\r\n62025:57729,\r\n62026:57730,\r\n62027:57731,\r\n62028:57732,\r\n62029:57733,\r\n62030:57734,\r\n62031:57735,\r\n62032:57736,\r\n62033:57737,\r\n62034:57738,\r\n62035:57739,\r\n62036:57740,\r\n62037:57741,\r\n62038:57742,\r\n62039:57743,\r\n62040:57744,\r\n62041:57745,\r\n62042:57746,\r\n62043:57747,\r\n62044:57748,\r\n62045:57749,\r\n62046:57750,\r\n62047:57751,\r\n62048:57752,\r\n62049:57753,\r\n62050:57754,\r\n62051:57755,\r\n62052:57756,\r\n62053:57757,\r\n62054:57758,\r\n62055:57759,\r\n62056:57760,\r\n62057:57761,\r\n62058:57762,\r\n62059:57763,\r\n62060:57764,\r\n62061:57765,\r\n62062:57766,\r\n62063:57767,\r\n62064:57768,\r\n62065:57769,\r\n62066:57770,\r\n62067:57771,\r\n62068:57772,\r\n62069:57773,\r\n62070:57774,\r\n62071:57775,\r\n62072:57776,\r\n62073:57777,\r\n62074:57778,\r\n62075:57779,\r\n62076:57780,\r\n62077:57781,\r\n62078:57782,\r\n62080:57783,\r\n62081:57784,\r\n62082:57785,\r\n62083:57786,\r\n62084:57787,\r\n62085:57788,\r\n62086:57789,\r\n62087:57790,\r\n62088:57791,\r\n62089:57792,\r\n62090:57793,\r\n62091:57794,\r\n62092:57795,\r\n62093:57796,\r\n62094:57797,\r\n62095:57798,\r\n62096:57799,\r\n62097:57800,\r\n62098:57801,\r\n62099:57802,\r\n62100:57803,\r\n62101:57804,\r\n62102:57805,\r\n62103:57806,\r\n62104:57807,\r\n62105:57808,\r\n62106:57809,\r\n62107:57810,\r\n62108:57811,\r\n62109:57812,\r\n62110:57813,\r\n62111:57814,\r\n62112:57815,\r\n62113:57816,\r\n62114:57817,\r\n62115:57818,\r\n62116:57819,\r\n62117:57820,\r\n62118:57821,\r\n62119:57822,\r\n62120:57823,\r\n62121:57824,\r\n62122:57825,\r\n62123:57826,\r\n62124:57827,\r\n62125:57828,\r\n62126:57829,\r\n62127:57830,\r\n62128:57831,\r\n62129:57832,\r\n62130:57833,\r\n62131:57834,\r\n62132:57835,\r\n62133:57836,\r\n62134:57837,\r\n62135:57838,\r\n62136:57839,\r\n62137:57840,\r\n62138:57841,\r\n62139:57842,\r\n62140:57843,\r\n62141:57844,\r\n62142:57845,\r\n62143:57846,\r\n62144:57847,\r\n62145:57848,\r\n62146:57849,\r\n62147:57850,\r\n62148:57851,\r\n62149:57852,\r\n62150:57853,\r\n62151:57854,\r\n62152:57855,\r\n62153:57856,\r\n62154:57857,\r\n62155:57858,\r\n62156:57859,\r\n62157:57860,\r\n62158:57861,\r\n62159:57862,\r\n62160:57863,\r\n62161:57864,\r\n62162:57865,\r\n62163:57866,\r\n62164:57867,\r\n62165:57868,\r\n62166:57869,\r\n62167:57870,\r\n62168:57871,\r\n62169:57872,\r\n62170:57873,\r\n62171:57874,\r\n62172:57875,\r\n62173:57876,\r\n62174:57877,\r\n62175:57878,\r\n62176:57879,\r\n62177:57880,\r\n62178:57881,\r\n62179:57882,\r\n62180:57883,\r\n62181:57884,\r\n62182:57885,\r\n62183:57886,\r\n62184:57887,\r\n62185:57888,\r\n62186:57889,\r\n62187:57890,\r\n62188:57891,\r\n62189:57892,\r\n62190:57893,\r\n62191:57894,\r\n62192:57895,\r\n62193:57896,\r\n62194:57897,\r\n62195:57898,\r\n62196:57899,\r\n62197:57900,\r\n62198:57901,\r\n62199:57902,\r\n62200:57903,\r\n62201:57904,\r\n62202:57905,\r\n62203:57906,\r\n62204:57907,\r\n62272:57908,\r\n62273:57909,\r\n62274:57910,\r\n62275:57911,\r\n62276:57912,\r\n62277:57913,\r\n62278:57914,\r\n62279:57915,\r\n62280:57916,\r\n62281:57917,\r\n62282:57918,\r\n62283:57919,\r\n62284:57920,\r\n62285:57921,\r\n62286:57922,\r\n62287:57923,\r\n62288:57924,\r\n62289:57925,\r\n62290:57926,\r\n62291:57927,\r\n62292:57928,\r\n62293:57929,\r\n62294:57930,\r\n62295:57931,\r\n62296:57932,\r\n62297:57933,\r\n62298:57934,\r\n62299:57935,\r\n62300:57936,\r\n62301:57937,\r\n62302:57938,\r\n62303:57939,\r\n62304:57940,\r\n62305:57941,\r\n62306:57942,\r\n62307:57943,\r\n62308:57944,\r\n62309:57945,\r\n62310:57946,\r\n62311:57947,\r\n62312:57948,\r\n62313:57949,\r\n62314:57950,\r\n62315:57951,\r\n62316:57952,\r\n62317:57953,\r\n62318:57954,\r\n62319:57955,\r\n62320:57956,\r\n62321:57957,\r\n62322:57958,\r\n62323:57959,\r\n62324:57960,\r\n62325:57961,\r\n62326:57962,\r\n62327:57963,\r\n62328:57964,\r\n62329:57965,\r\n62330:57966,\r\n62331:57967,\r\n62332:57968,\r\n62333:57969,\r\n62334:57970,\r\n62336:57971,\r\n62337:57972,\r\n62338:57973,\r\n62339:57974,\r\n62340:57975,\r\n62341:57976,\r\n62342:57977,\r\n62343:57978,\r\n62344:57979,\r\n62345:57980,\r\n62346:57981,\r\n62347:57982,\r\n62348:57983,\r\n62349:57984,\r\n62350:57985,\r\n62351:57986,\r\n62352:57987,\r\n62353:57988,\r\n62354:57989,\r\n62355:57990,\r\n62356:57991,\r\n62357:57992,\r\n62358:57993,\r\n62359:57994,\r\n62360:57995,\r\n62361:57996,\r\n62362:57997,\r\n62363:57998,\r\n62364:57999,\r\n62365:58000,\r\n62366:58001,\r\n62367:58002,\r\n62368:58003,\r\n62369:58004,\r\n62370:58005,\r\n62371:58006,\r\n62372:58007,\r\n62373:58008,\r\n62374:58009,\r\n62375:58010,\r\n62376:58011,\r\n62377:58012,\r\n62378:58013,\r\n62379:58014,\r\n62380:58015,\r\n62381:58016,\r\n62382:58017,\r\n62383:58018,\r\n62384:58019,\r\n62385:58020,\r\n62386:58021,\r\n62387:58022,\r\n62388:58023,\r\n62389:58024,\r\n62390:58025,\r\n62391:58026,\r\n62392:58027,\r\n62393:58028,\r\n62394:58029,\r\n62395:58030,\r\n62396:58031,\r\n62397:58032,\r\n62398:58033,\r\n62399:58034,\r\n62400:58035,\r\n62401:58036,\r\n62402:58037,\r\n62403:58038,\r\n62404:58039,\r\n62405:58040,\r\n62406:58041,\r\n62407:58042,\r\n62408:58043,\r\n62409:58044,\r\n62410:58045,\r\n62411:58046,\r\n62412:58047,\r\n62413:58048,\r\n62414:58049,\r\n62415:58050,\r\n62416:58051,\r\n62417:58052,\r\n62418:58053,\r\n62419:58054,\r\n62420:58055,\r\n62421:58056,\r\n62422:58057,\r\n62423:58058,\r\n62424:58059,\r\n62425:58060,\r\n62426:58061,\r\n62427:58062,\r\n62428:58063,\r\n62429:58064,\r\n62430:58065,\r\n62431:58066,\r\n62432:58067,\r\n62433:58068,\r\n62434:58069,\r\n62435:58070,\r\n62436:58071,\r\n62437:58072,\r\n62438:58073,\r\n62439:58074,\r\n62440:58075,\r\n62441:58076,\r\n62442:58077,\r\n62443:58078,\r\n62444:58079,\r\n62445:58080,\r\n62446:58081,\r\n62447:58082,\r\n62448:58083,\r\n62449:58084,\r\n62450:58085,\r\n62451:58086,\r\n62452:58087,\r\n62453:58088,\r\n62454:58089,\r\n62455:58090,\r\n62456:58091,\r\n62457:58092,\r\n62458:58093,\r\n62459:58094,\r\n62460:58095,\r\n62528:58096,\r\n62529:58097,\r\n62530:58098,\r\n62531:58099,\r\n62532:58100,\r\n62533:58101,\r\n62534:58102,\r\n62535:58103,\r\n62536:58104,\r\n62537:58105,\r\n62538:58106,\r\n62539:58107,\r\n62540:58108,\r\n62541:58109,\r\n62542:58110,\r\n62543:58111,\r\n62544:58112,\r\n62545:58113,\r\n62546:58114,\r\n62547:58115,\r\n62548:58116,\r\n62549:58117,\r\n62550:58118,\r\n62551:58119,\r\n62552:58120,\r\n62553:58121,\r\n62554:58122,\r\n62555:58123,\r\n62556:58124,\r\n62557:58125,\r\n62558:58126,\r\n62559:58127,\r\n62560:58128,\r\n62561:58129,\r\n62562:58130,\r\n62563:58131,\r\n62564:58132,\r\n62565:58133,\r\n62566:58134,\r\n62567:58135,\r\n62568:58136,\r\n62569:58137,\r\n62570:58138,\r\n62571:58139,\r\n62572:58140,\r\n62573:58141,\r\n62574:58142,\r\n62575:58143,\r\n62576:58144,\r\n62577:58145,\r\n62578:58146,\r\n62579:58147,\r\n62580:58148,\r\n62581:58149,\r\n62582:58150,\r\n62583:58151,\r\n62584:58152,\r\n62585:58153,\r\n62586:58154,\r\n62587:58155,\r\n62588:58156,\r\n62589:58157,\r\n62590:58158,\r\n62592:58159,\r\n62593:58160,\r\n62594:58161,\r\n62595:58162,\r\n62596:58163,\r\n62597:58164,\r\n62598:58165,\r\n62599:58166,\r\n62600:58167,\r\n62601:58168,\r\n62602:58169,\r\n62603:58170,\r\n62604:58171,\r\n62605:58172,\r\n62606:58173,\r\n62607:58174,\r\n62608:58175,\r\n62609:58176,\r\n62610:58177,\r\n62611:58178,\r\n62612:58179,\r\n62613:58180,\r\n62614:58181,\r\n62615:58182,\r\n62616:58183,\r\n62617:58184,\r\n62618:58185,\r\n62619:58186,\r\n62620:58187,\r\n62621:58188,\r\n62622:58189,\r\n62623:58190,\r\n62624:58191,\r\n62625:58192,\r\n62626:58193,\r\n62627:58194,\r\n62628:58195,\r\n62629:58196,\r\n62630:58197,\r\n62631:58198,\r\n62632:58199,\r\n62633:58200,\r\n62634:58201,\r\n62635:58202,\r\n62636:58203,\r\n62637:58204,\r\n62638:58205,\r\n62639:58206,\r\n62640:58207,\r\n62641:58208,\r\n62642:58209,\r\n62643:58210,\r\n62644:58211,\r\n62645:58212,\r\n62646:58213,\r\n62647:58214,\r\n62648:58215,\r\n62649:58216,\r\n62650:58217,\r\n62651:58218,\r\n62652:58219,\r\n62653:58220,\r\n62654:58221,\r\n62655:58222,\r\n62656:58223,\r\n62657:58224,\r\n62658:58225,\r\n62659:58226,\r\n62660:58227,\r\n62661:58228,\r\n62662:58229,\r\n62663:58230,\r\n62664:58231,\r\n62665:58232,\r\n62666:58233,\r\n62667:58234,\r\n62668:58235,\r\n62669:58236,\r\n62670:58237,\r\n62671:58238,\r\n62672:58239,\r\n62673:58240,\r\n62674:58241,\r\n62675:58242,\r\n62676:58243,\r\n62677:58244,\r\n62678:58245,\r\n62679:58246,\r\n62680:58247,\r\n62681:58248,\r\n62682:58249,\r\n62683:58250,\r\n62684:58251,\r\n62685:58252,\r\n62686:58253,\r\n62687:58254,\r\n62688:58255,\r\n62689:58256,\r\n62690:58257,\r\n62691:58258,\r\n62692:58259,\r\n62693:58260,\r\n62694:58261,\r\n62695:58262,\r\n62696:58263,\r\n62697:58264,\r\n62698:58265,\r\n62699:58266,\r\n62700:58267,\r\n62701:58268,\r\n62702:58269,\r\n62703:58270,\r\n62704:58271,\r\n62705:58272,\r\n62706:58273,\r\n62707:58274,\r\n62708:58275,\r\n62709:58276,\r\n62710:58277,\r\n62711:58278,\r\n62712:58279,\r\n62713:58280,\r\n62714:58281,\r\n62715:58282,\r\n62716:58283,\r\n62784:58284,\r\n62785:58285,\r\n62786:58286,\r\n62787:58287,\r\n62788:58288,\r\n62789:58289,\r\n62790:58290,\r\n62791:58291,\r\n62792:58292,\r\n62793:58293,\r\n62794:58294,\r\n62795:58295,\r\n62796:58296,\r\n62797:58297,\r\n62798:58298,\r\n62799:58299,\r\n62800:58300,\r\n62801:58301,\r\n62802:58302,\r\n62803:58303,\r\n62804:58304,\r\n62805:58305,\r\n62806:58306,\r\n62807:58307,\r\n62808:58308,\r\n62809:58309,\r\n62810:58310,\r\n62811:58311,\r\n62812:58312,\r\n62813:58313,\r\n62814:58314,\r\n62815:58315,\r\n62816:58316,\r\n62817:58317,\r\n62818:58318,\r\n62819:58319,\r\n62820:58320,\r\n62821:58321,\r\n62822:58322,\r\n62823:58323,\r\n62824:58324,\r\n62825:58325,\r\n62826:58326,\r\n62827:58327,\r\n62828:58328,\r\n62829:58329,\r\n62830:58330,\r\n62831:58331,\r\n62832:58332,\r\n62833:58333,\r\n62834:58334,\r\n62835:58335,\r\n62836:58336,\r\n62837:58337,\r\n62838:58338,\r\n62839:58339,\r\n62840:58340,\r\n62841:58341,\r\n62842:58342,\r\n62843:58343,\r\n62844:58344,\r\n62845:58345,\r\n62846:58346,\r\n62848:58347,\r\n62849:58348,\r\n62850:58349,\r\n62851:58350,\r\n62852:58351,\r\n62853:58352,\r\n62854:58353,\r\n62855:58354,\r\n62856:58355,\r\n62857:58356,\r\n62858:58357,\r\n62859:58358,\r\n62860:58359,\r\n62861:58360,\r\n62862:58361,\r\n62863:58362,\r\n62864:58363,\r\n62865:58364,\r\n62866:58365,\r\n62867:58366,\r\n62868:58367,\r\n62869:58368,\r\n62870:58369,\r\n62871:58370,\r\n62872:58371,\r\n62873:58372,\r\n62874:58373,\r\n62875:58374,\r\n62876:58375,\r\n62877:58376,\r\n62878:58377,\r\n62879:58378,\r\n62880:58379,\r\n62881:58380,\r\n62882:58381,\r\n62883:58382,\r\n62884:58383,\r\n62885:58384,\r\n62886:58385,\r\n62887:58386,\r\n62888:58387,\r\n62889:58388,\r\n62890:58389,\r\n62891:58390,\r\n62892:58391,\r\n62893:58392,\r\n62894:58393,\r\n62895:58394,\r\n62896:58395,\r\n62897:58396,\r\n62898:58397,\r\n62899:58398,\r\n62900:58399,\r\n62901:58400,\r\n62902:58401,\r\n62903:58402,\r\n62904:58403,\r\n62905:58404,\r\n62906:58405,\r\n62907:58406,\r\n62908:58407,\r\n62909:58408,\r\n62910:58409,\r\n62911:58410,\r\n62912:58411,\r\n62913:58412,\r\n62914:58413,\r\n62915:58414,\r\n62916:58415,\r\n62917:58416,\r\n62918:58417,\r\n62919:58418,\r\n62920:58419,\r\n62921:58420,\r\n62922:58421,\r\n62923:58422,\r\n62924:58423,\r\n62925:58424,\r\n62926:58425,\r\n62927:58426,\r\n62928:58427,\r\n62929:58428,\r\n62930:58429,\r\n62931:58430,\r\n62932:58431,\r\n62933:58432,\r\n62934:58433,\r\n62935:58434,\r\n62936:58435,\r\n62937:58436,\r\n62938:58437,\r\n62939:58438,\r\n62940:58439,\r\n62941:58440,\r\n62942:58441,\r\n62943:58442,\r\n62944:58443,\r\n62945:58444,\r\n62946:58445,\r\n62947:58446,\r\n62948:58447,\r\n62949:58448,\r\n62950:58449,\r\n62951:58450,\r\n62952:58451,\r\n62953:58452,\r\n62954:58453,\r\n62955:58454,\r\n62956:58455,\r\n62957:58456,\r\n62958:58457,\r\n62959:58458,\r\n62960:58459,\r\n62961:58460,\r\n62962:58461,\r\n62963:58462,\r\n62964:58463,\r\n62965:58464,\r\n62966:58465,\r\n62967:58466,\r\n62968:58467,\r\n62969:58468,\r\n62970:58469,\r\n62971:58470,\r\n62972:58471,\r\n63040:58472,\r\n63041:58473,\r\n63042:58474,\r\n63043:58475,\r\n63044:58476,\r\n63045:58477,\r\n63046:58478,\r\n63047:58479,\r\n63048:58480,\r\n63049:58481,\r\n63050:58482,\r\n63051:58483,\r\n63052:58484,\r\n63053:58485,\r\n63054:58486,\r\n63055:58487,\r\n63056:58488,\r\n63057:58489,\r\n63058:58490,\r\n63059:58491,\r\n63060:58492,\r\n63061:58493,\r\n63062:58494,\r\n63063:58495,\r\n63064:58496,\r\n63065:58497,\r\n63066:58498,\r\n63067:58499,\r\n63068:58500,\r\n63069:58501,\r\n63070:58502,\r\n63071:58503,\r\n63072:58504,\r\n63073:58505,\r\n63074:58506,\r\n63075:58507,\r\n63076:58508,\r\n63077:58509,\r\n63078:58510,\r\n63079:58511,\r\n63080:58512,\r\n63081:58513,\r\n63082:58514,\r\n63083:58515,\r\n63084:58516,\r\n63085:58517,\r\n63086:58518,\r\n63087:58519,\r\n63088:58520,\r\n63089:58521,\r\n63090:58522,\r\n63091:58523,\r\n63092:58524,\r\n63093:58525,\r\n63094:58526,\r\n63095:58527,\r\n63096:58528,\r\n63097:58529,\r\n63098:58530,\r\n63099:58531,\r\n63100:58532,\r\n63101:58533,\r\n63102:58534,\r\n63104:58535,\r\n63105:58536,\r\n63106:58537,\r\n63107:58538,\r\n63108:58539,\r\n63109:58540,\r\n63110:58541,\r\n63111:58542,\r\n63112:58543,\r\n63113:58544,\r\n63114:58545,\r\n63115:58546,\r\n63116:58547,\r\n63117:58548,\r\n63118:58549,\r\n63119:58550,\r\n63120:58551,\r\n63121:58552,\r\n63122:58553,\r\n63123:58554,\r\n63124:58555,\r\n63125:58556,\r\n63126:58557,\r\n63127:58558,\r\n63128:58559,\r\n63129:58560,\r\n63130:58561,\r\n63131:58562,\r\n63132:58563,\r\n63133:58564,\r\n63134:58565,\r\n63135:58566,\r\n63136:58567,\r\n63137:58568,\r\n63138:58569,\r\n63139:58570,\r\n63140:58571,\r\n63141:58572,\r\n63142:58573,\r\n63143:58574,\r\n63144:58575,\r\n63145:58576,\r\n63146:58577,\r\n63147:58578,\r\n63148:58579,\r\n63149:58580,\r\n63150:58581,\r\n63151:58582,\r\n63152:58583,\r\n63153:58584,\r\n63154:58585,\r\n63155:58586,\r\n63156:58587,\r\n63157:58588,\r\n63158:58589,\r\n63159:58590,\r\n63160:58591,\r\n63161:58592,\r\n63162:58593,\r\n63163:58594,\r\n63164:58595,\r\n63165:58596,\r\n63166:58597,\r\n63167:58598,\r\n63168:58599,\r\n63169:58600,\r\n63170:58601,\r\n63171:58602,\r\n63172:58603,\r\n63173:58604,\r\n63174:58605,\r\n63175:58606,\r\n63176:58607,\r\n63177:58608,\r\n63178:58609,\r\n63179:58610,\r\n63180:58611,\r\n63181:58612,\r\n63182:58613,\r\n63183:58614,\r\n63184:58615,\r\n63185:58616,\r\n63186:58617,\r\n63187:58618,\r\n63188:58619,\r\n63189:58620,\r\n63190:58621,\r\n63191:58622,\r\n63192:58623,\r\n63193:58624,\r\n63194:58625,\r\n63195:58626,\r\n63196:58627,\r\n63197:58628,\r\n63198:58629,\r\n63199:58630,\r\n63200:58631,\r\n63201:58632,\r\n63202:58633,\r\n63203:58634,\r\n63204:58635,\r\n63205:58636,\r\n63206:58637,\r\n63207:58638,\r\n63208:58639,\r\n63209:58640,\r\n63210:58641,\r\n63211:58642,\r\n63212:58643,\r\n63213:58644,\r\n63214:58645,\r\n63215:58646,\r\n63216:58647,\r\n63217:58648,\r\n63218:58649,\r\n63219:58650,\r\n63220:58651,\r\n63221:58652,\r\n63222:58653,\r\n63223:58654,\r\n63224:58655,\r\n63225:58656,\r\n63226:58657,\r\n63227:58658,\r\n63228:58659,\r\n63296:58660,\r\n63297:58661,\r\n63298:58662,\r\n63299:58663,\r\n63300:58664,\r\n63301:58665,\r\n63302:58666,\r\n63303:58667,\r\n63304:58668,\r\n63305:58669,\r\n63306:58670,\r\n63307:58671,\r\n63308:58672,\r\n63309:58673,\r\n63310:58674,\r\n63311:58675,\r\n63312:58676,\r\n63313:58677,\r\n63314:58678,\r\n63315:58679,\r\n63316:58680,\r\n63317:58681,\r\n63318:58682,\r\n63319:58683,\r\n63320:58684,\r\n63321:58685,\r\n63322:58686,\r\n63323:58687,\r\n63324:58688,\r\n63325:58689,\r\n63326:58690,\r\n63327:58691,\r\n63328:58692,\r\n63329:58693,\r\n63330:58694,\r\n63331:58695,\r\n63332:58696,\r\n63333:58697,\r\n63334:58698,\r\n63335:58699,\r\n63336:58700,\r\n63337:58701,\r\n63338:58702,\r\n63339:58703,\r\n63340:58704,\r\n63341:58705,\r\n63342:58706,\r\n63343:58707,\r\n63344:58708,\r\n63345:58709,\r\n63346:58710,\r\n63347:58711,\r\n63348:58712,\r\n63349:58713,\r\n63350:58714,\r\n63351:58715,\r\n63352:58716,\r\n63353:58717,\r\n63354:58718,\r\n63355:58719,\r\n63356:58720,\r\n63357:58721,\r\n63358:58722,\r\n63360:58723,\r\n63361:58724,\r\n63362:58725,\r\n63363:58726,\r\n63364:58727,\r\n63365:58728,\r\n63366:58729,\r\n63367:58730,\r\n63368:58731,\r\n63369:58732,\r\n63370:58733,\r\n63371:58734,\r\n63372:58735,\r\n63373:58736,\r\n63374:58737,\r\n63375:58738,\r\n63376:58739,\r\n63377:58740,\r\n63378:58741,\r\n63379:58742,\r\n63380:58743,\r\n63381:58744,\r\n63382:58745,\r\n63383:58746,\r\n63384:58747,\r\n63385:58748,\r\n63386:58749,\r\n63387:58750,\r\n63388:58751,\r\n63389:58752,\r\n63390:58753,\r\n63391:58754,\r\n63392:58755,\r\n63393:58756,\r\n63394:58757,\r\n63395:58758,\r\n63396:58759,\r\n63397:58760,\r\n63398:58761,\r\n63399:58762,\r\n63400:58763,\r\n63401:58764,\r\n63402:58765,\r\n63403:58766,\r\n63404:58767,\r\n63405:58768,\r\n63406:58769,\r\n63407:58770,\r\n63408:58771,\r\n63409:58772,\r\n63410:58773,\r\n63411:58774,\r\n63412:58775,\r\n63413:58776,\r\n63414:58777,\r\n63415:58778,\r\n63416:58779,\r\n63417:58780,\r\n63418:58781,\r\n63419:58782,\r\n63420:58783,\r\n63421:58784,\r\n63422:58785,\r\n63423:58786,\r\n63424:58787,\r\n63425:58788,\r\n63426:58789,\r\n63427:58790,\r\n63428:58791,\r\n63429:58792,\r\n63430:58793,\r\n63431:58794,\r\n63432:58795,\r\n63433:58796,\r\n63434:58797,\r\n63435:58798,\r\n63436:58799,\r\n63437:58800,\r\n63438:58801,\r\n63439:58802,\r\n63440:58803,\r\n63441:58804,\r\n63442:58805,\r\n63443:58806,\r\n63444:58807,\r\n63445:58808,\r\n63446:58809,\r\n63447:58810,\r\n63448:58811,\r\n63449:58812,\r\n63450:58813,\r\n63451:58814,\r\n63452:58815,\r\n63453:58816,\r\n63454:58817,\r\n63455:58818,\r\n63456:58819,\r\n63457:58820,\r\n63458:58821,\r\n63459:58822,\r\n63460:58823,\r\n63461:58824,\r\n63462:58825,\r\n63463:58826,\r\n63464:58827,\r\n63465:58828,\r\n63466:58829,\r\n63467:58830,\r\n63468:58831,\r\n63469:58832,\r\n63470:58833,\r\n63471:58834,\r\n63472:58835,\r\n63473:58836,\r\n63474:58837,\r\n63475:58838,\r\n63476:58839,\r\n63477:58840,\r\n63478:58841,\r\n63479:58842,\r\n63480:58843,\r\n63481:58844,\r\n63482:58845,\r\n63483:58846,\r\n63484:58847,\r\n63552:58848,\r\n63553:58849,\r\n63554:58850,\r\n63555:58851,\r\n63556:58852,\r\n63557:58853,\r\n63558:58854,\r\n63559:58855,\r\n63560:58856,\r\n63561:58857,\r\n63562:58858,\r\n63563:58859,\r\n63564:58860,\r\n63565:58861,\r\n63566:58862,\r\n63567:58863,\r\n63568:58864,\r\n63569:58865,\r\n63570:58866,\r\n63571:58867,\r\n63572:58868,\r\n63573:58869,\r\n63574:58870,\r\n63575:58871,\r\n63576:58872,\r\n63577:58873,\r\n63578:58874,\r\n63579:58875,\r\n63580:58876,\r\n63581:58877,\r\n63582:58878,\r\n63583:58879,\r\n63584:58880,\r\n63585:58881,\r\n63586:58882,\r\n63587:58883,\r\n63588:58884,\r\n63589:58885,\r\n63590:58886,\r\n63591:58887,\r\n63592:58888,\r\n63593:58889,\r\n63594:58890,\r\n63595:58891,\r\n63596:58892,\r\n63597:58893,\r\n63598:58894,\r\n63599:58895,\r\n63600:58896,\r\n63601:58897,\r\n63602:58898,\r\n63603:58899,\r\n63604:58900,\r\n63605:58901,\r\n63606:58902,\r\n63607:58903,\r\n63608:58904,\r\n63609:58905,\r\n63610:58906,\r\n63611:58907,\r\n63612:58908,\r\n63613:58909,\r\n63614:58910,\r\n63616:58911,\r\n63617:58912,\r\n63618:58913,\r\n63619:58914,\r\n63620:58915,\r\n63621:58916,\r\n63622:58917,\r\n63623:58918,\r\n63624:58919,\r\n63625:58920,\r\n63626:58921,\r\n63627:58922,\r\n63628:58923,\r\n63629:58924,\r\n63630:58925,\r\n63631:58926,\r\n63632:58927,\r\n63633:58928,\r\n63634:58929,\r\n63635:58930,\r\n63636:58931,\r\n63637:58932,\r\n63638:58933,\r\n63639:58934,\r\n63640:58935,\r\n63641:58936,\r\n63642:58937,\r\n63643:58938,\r\n63644:58939,\r\n63645:58940,\r\n63646:58941,\r\n63647:58942,\r\n63648:58943,\r\n63649:58944,\r\n63650:58945,\r\n63651:58946,\r\n63652:58947,\r\n63653:58948,\r\n63654:58949,\r\n63655:58950,\r\n63656:58951,\r\n63657:58952,\r\n63658:58953,\r\n63659:58954,\r\n63660:58955,\r\n63661:58956,\r\n63662:58957,\r\n63663:58958,\r\n63664:58959,\r\n63665:58960,\r\n63666:58961,\r\n63667:58962,\r\n63668:58963,\r\n63669:58964,\r\n63670:58965,\r\n63671:58966,\r\n63672:58967,\r\n63673:58968,\r\n63674:58969,\r\n63675:58970,\r\n63676:58971,\r\n63677:58972,\r\n63678:58973,\r\n63679:58974,\r\n63680:58975,\r\n63681:58976,\r\n63682:58977,\r\n63683:58978,\r\n63684:58979,\r\n63685:58980,\r\n63686:58981,\r\n63687:58982,\r\n63688:58983,\r\n63689:58984,\r\n63690:58985,\r\n63691:58986,\r\n63692:58987,\r\n63693:58988,\r\n63694:58989,\r\n63695:58990,\r\n63696:58991,\r\n63697:58992,\r\n63698:58993,\r\n63699:58994,\r\n63700:58995,\r\n63701:58996,\r\n63702:58997,\r\n63703:58998,\r\n63704:58999,\r\n63705:59000,\r\n63706:59001,\r\n63707:59002,\r\n63708:59003,\r\n63709:59004,\r\n63710:59005,\r\n63711:59006,\r\n63712:59007,\r\n63713:59008,\r\n63714:59009,\r\n63715:59010,\r\n63716:59011,\r\n63717:59012,\r\n63718:59013,\r\n63719:59014,\r\n63720:59015,\r\n63721:59016,\r\n63722:59017,\r\n63723:59018,\r\n63724:59019,\r\n63725:59020,\r\n63726:59021,\r\n63727:59022,\r\n63728:59023,\r\n63729:59024,\r\n63730:59025,\r\n63731:59026,\r\n63732:59027,\r\n63733:59028,\r\n63734:59029,\r\n63735:59030,\r\n63736:59031,\r\n63737:59032,\r\n63738:59033,\r\n63739:59034,\r\n63740:59035,\r\n64064:8560,\r\n64065:8561,\r\n64066:8562,\r\n64067:8563,\r\n64068:8564,\r\n64069:8565,\r\n64070:8566,\r\n64071:8567,\r\n64072:8568,\r\n64073:8569,\r\n64074:8544,\r\n64075:8545,\r\n64076:8546,\r\n64077:8547,\r\n64078:8548,\r\n64079:8549,\r\n64080:8550,\r\n64081:8551,\r\n64082:8552,\r\n64083:8553,\r\n64084:65506,\r\n64085:65508,\r\n64086:65287,\r\n64087:65282,\r\n64088:12849,\r\n64089:8470,\r\n64090:8481,\r\n64091:8757,\r\n64092:32394,\r\n64093:35100,\r\n64094:37704,\r\n64095:37512,\r\n64096:34012,\r\n64097:20425,\r\n64098:28859,\r\n64099:26161,\r\n64100:26824,\r\n64101:37625,\r\n64102:26363,\r\n64103:24389,\r\n64104:20008,\r\n64105:20193,\r\n64106:20220,\r\n64107:20224,\r\n64108:20227,\r\n64109:20281,\r\n64110:20310,\r\n64111:20370,\r\n64112:20362,\r\n64113:20378,\r\n64114:20372,\r\n64115:20429,\r\n64116:20544,\r\n64117:20514,\r\n64118:20479,\r\n64119:20510,\r\n64120:20550,\r\n64121:20592,\r\n64122:20546,\r\n64123:20628,\r\n64124:20724,\r\n64125:20696,\r\n64126:20810,\r\n64128:20836,\r\n64129:20893,\r\n64130:20926,\r\n64131:20972,\r\n64132:21013,\r\n64133:21148,\r\n64134:21158,\r\n64135:21184,\r\n64136:21211,\r\n64137:21248,\r\n64138:21255,\r\n64139:21284,\r\n64140:21362,\r\n64141:21395,\r\n64142:21426,\r\n64143:21469,\r\n64144:64014,\r\n64145:21660,\r\n64146:21642,\r\n64147:21673,\r\n64148:21759,\r\n64149:21894,\r\n64150:22361,\r\n64151:22373,\r\n64152:22444,\r\n64153:22472,\r\n64154:22471,\r\n64155:64015,\r\n64156:64016,\r\n64157:22686,\r\n64158:22706,\r\n64159:22795,\r\n64160:22867,\r\n64161:22875,\r\n64162:22877,\r\n64163:22883,\r\n64164:22948,\r\n64165:22970,\r\n64166:23382,\r\n64167:23488,\r\n64168:29999,\r\n64169:23512,\r\n64170:23532,\r\n64171:23582,\r\n64172:23718,\r\n64173:23738,\r\n64174:23797,\r\n64175:23847,\r\n64176:23891,\r\n64177:64017,\r\n64178:23874,\r\n64179:23917,\r\n64180:23992,\r\n64181:23993,\r\n64182:24016,\r\n64183:24353,\r\n64184:24372,\r\n64185:24423,\r\n64186:24503,\r\n64187:24542,\r\n64188:24669,\r\n64189:24709,\r\n64190:24714,\r\n64191:24798,\r\n64192:24789,\r\n64193:24864,\r\n64194:24818,\r\n64195:24849,\r\n64196:24887,\r\n64197:24880,\r\n64198:24984,\r\n64199:25107,\r\n64200:25254,\r\n64201:25589,\r\n64202:25696,\r\n64203:25757,\r\n64204:25806,\r\n64205:25934,\r\n64206:26112,\r\n64207:26133,\r\n64208:26171,\r\n64209:26121,\r\n64210:26158,\r\n64211:26142,\r\n64212:26148,\r\n64213:26213,\r\n64214:26199,\r\n64215:26201,\r\n64216:64018,\r\n64217:26227,\r\n64218:26265,\r\n64219:26272,\r\n64220:26290,\r\n64221:26303,\r\n64222:26362,\r\n64223:26382,\r\n64224:63785,\r\n64225:26470,\r\n64226:26555,\r\n64227:26706,\r\n64228:26560,\r\n64229:26625,\r\n64230:26692,\r\n64231:26831,\r\n64232:64019,\r\n64233:26984,\r\n64234:64020,\r\n64235:27032,\r\n64236:27106,\r\n64237:27184,\r\n64238:27243,\r\n64239:27206,\r\n64240:27251,\r\n64241:27262,\r\n64242:27362,\r\n64243:27364,\r\n64244:27606,\r\n64245:27711,\r\n64246:27740,\r\n64247:27782,\r\n64248:27759,\r\n64249:27866,\r\n64250:27908,\r\n64251:28039,\r\n64252:28015,\r\n64320:28054,\r\n64321:28076,\r\n64322:28111,\r\n64323:28152,\r\n64324:28146,\r\n64325:28156,\r\n64326:28217,\r\n64327:28252,\r\n64328:28199,\r\n64329:28220,\r\n64330:28351,\r\n64331:28552,\r\n64332:28597,\r\n64333:28661,\r\n64334:28677,\r\n64335:28679,\r\n64336:28712,\r\n64337:28805,\r\n64338:28843,\r\n64339:28943,\r\n64340:28932,\r\n64341:29020,\r\n64342:28998,\r\n64343:28999,\r\n64344:64021,\r\n64345:29121,\r\n64346:29182,\r\n64347:29361,\r\n64348:29374,\r\n64349:29476,\r\n64350:64022,\r\n64351:29559,\r\n64352:29629,\r\n64353:29641,\r\n64354:29654,\r\n64355:29667,\r\n64356:29650,\r\n64357:29703,\r\n64358:29685,\r\n64359:29734,\r\n64360:29738,\r\n64361:29737,\r\n64362:29742,\r\n64363:29794,\r\n64364:29833,\r\n64365:29855,\r\n64366:29953,\r\n64367:30063,\r\n64368:30338,\r\n64369:30364,\r\n64370:30366,\r\n64371:30363,\r\n64372:30374,\r\n64373:64023,\r\n64374:30534,\r\n64375:21167,\r\n64376:30753,\r\n64377:30798,\r\n64378:30820,\r\n64379:30842,\r\n64380:31024,\r\n64381:64024,\r\n64382:64025,\r\n64384:64026,\r\n64385:31124,\r\n64386:64027,\r\n64387:31131,\r\n64388:31441,\r\n64389:31463,\r\n64390:64028,\r\n64391:31467,\r\n64392:31646,\r\n64393:64029,\r\n64394:32072,\r\n64395:32092,\r\n64396:32183,\r\n64397:32160,\r\n64398:32214,\r\n64399:32338,\r\n64400:32583,\r\n64401:32673,\r\n64402:64030,\r\n64403:33537,\r\n64404:33634,\r\n64405:33663,\r\n64406:33735,\r\n64407:33782,\r\n64408:33864,\r\n64409:33972,\r\n64410:34131,\r\n64411:34137,\r\n64412:34155,\r\n64413:64031,\r\n64414:34224,\r\n64415:64032,\r\n64416:64033,\r\n64417:34823,\r\n64418:35061,\r\n64419:35346,\r\n64420:35383,\r\n64421:35449,\r\n64422:35495,\r\n64423:35518,\r\n64424:35551,\r\n64425:64034,\r\n64426:35574,\r\n64427:35667,\r\n64428:35711,\r\n64429:36080,\r\n64430:36084,\r\n64431:36114,\r\n64432:36214,\r\n64433:64035,\r\n64434:36559,\r\n64435:64036,\r\n64436:64037,\r\n64437:36967,\r\n64438:37086,\r\n64439:64038,\r\n64440:37141,\r\n64441:37159,\r\n64442:37338,\r\n64443:37335,\r\n64444:37342,\r\n64445:37357,\r\n64446:37358,\r\n64447:37348,\r\n64448:37349,\r\n64449:37382,\r\n64450:37392,\r\n64451:37386,\r\n64452:37434,\r\n64453:37440,\r\n64454:37436,\r\n64455:37454,\r\n64456:37465,\r\n64457:37457,\r\n64458:37433,\r\n64459:37479,\r\n64460:37543,\r\n64461:37495,\r\n64462:37496,\r\n64463:37607,\r\n64464:37591,\r\n64465:37593,\r\n64466:37584,\r\n64467:64039,\r\n64468:37589,\r\n64469:37600,\r\n64470:37587,\r\n64471:37669,\r\n64472:37665,\r\n64473:37627,\r\n64474:64040,\r\n64475:37662,\r\n64476:37631,\r\n64477:37661,\r\n64478:37634,\r\n64479:37744,\r\n64480:37719,\r\n64481:37796,\r\n64482:37830,\r\n64483:37854,\r\n64484:37880,\r\n64485:37937,\r\n64486:37957,\r\n64487:37960,\r\n64488:38290,\r\n64489:63964,\r\n64490:64041,\r\n64491:38557,\r\n64492:38575,\r\n64493:38707,\r\n64494:38715,\r\n64495:38723,\r\n64496:38733,\r\n64497:38735,\r\n64498:38737,\r\n64499:38741,\r\n64500:38999,\r\n64501:39013,\r\n64502:64042,\r\n64503:64043,\r\n64504:39207,\r\n64505:64044,\r\n64506:39326,\r\n64507:39502,\r\n64508:39641,\r\n64576:39644,\r\n64577:39797,\r\n64578:39794,\r\n64579:39823,\r\n64580:39857,\r\n64581:39867,\r\n64582:39936,\r\n64583:40304,\r\n64584:40299,\r\n64585:64045,\r\n64586:40473,\r\n64587:40657\r\n};\r\n\r\n/**\r\n * @author takahiro / https://github.com/takahirox\r\n */\r\n\r\nfunction DataViewEx ( buffer, littleEndian ) {\r\n\r\n\tthis.dv = new DataView( buffer );\r\n\tthis.offset = 0;\r\n\tthis.littleEndian = ( littleEndian !== undefined ) ? littleEndian : true;\r\n\tthis.encoder = new CharsetEncoder();\r\n\r\n}\r\n\r\nDataViewEx.prototype = {\r\n\r\n\tconstructor: DataViewEx,\r\n\r\n\tgetInt8: function () {\r\n\r\n\t\tvar value = this.dv.getInt8( this.offset );\r\n\t\tthis.offset += 1;\r\n\t\treturn value;\r\n\r\n\t},\r\n\r\n\tgetInt8Array: function ( size ) {\r\n\r\n\t\tvar a = [];\r\n\r\n\t\tfor ( var i = 0; i < size; i++ ) {\r\n\r\n\t\t\ta.push( this.getInt8() );\r\n\r\n\t\t}\r\n\r\n\t\treturn a;\r\n\r\n\t},\r\n\r\n\tgetUint8: function () {\r\n\r\n\t\tvar value = this.dv.getUint8( this.offset );\r\n\t\tthis.offset += 1;\r\n\t\treturn value;\r\n\r\n\t},\r\n\r\n\tgetUint8Array: function ( size ) {\r\n\r\n\t\tvar a = [];\r\n\r\n\t\tfor ( var i = 0; i < size; i++ ) {\r\n\r\n\t\t\ta.push( this.getUint8() );\r\n\r\n\t\t}\r\n\r\n\t\treturn a;\r\n\r\n\t},\r\n\r\n\r\n\tgetInt16: function () {\r\n\r\n\t\tvar value = this.dv.getInt16( this.offset, this.littleEndian );\r\n\t\tthis.offset += 2;\r\n\t\treturn value;\r\n\r\n\t},\r\n\r\n\tgetInt16Array: function ( size ) {\r\n\r\n\t\tvar a = [];\r\n\r\n\t\tfor ( var i = 0; i < size; i++ ) {\r\n\r\n\t\t\ta.push( this.getInt16() );\r\n\r\n\t\t}\r\n\r\n\t\treturn a;\r\n\r\n\t},\r\n\r\n\tgetUint16: function () {\r\n\r\n\t\tvar value = this.dv.getUint16( this.offset, this.littleEndian );\r\n\t\tthis.offset += 2;\r\n\t\treturn value;\r\n\r\n\t},\r\n\r\n\tgetUint16Array: function ( size ) {\r\n\r\n\t\tvar a = [];\r\n\r\n\t\tfor ( var i = 0; i < size; i++ ) {\r\n\r\n\t\t\ta.push( this.getUint16() );\r\n\r\n\t\t}\r\n\r\n\t\treturn a;\r\n\r\n\t},\r\n\r\n\tgetInt32: function () {\r\n\r\n\t\tvar value = this.dv.getInt32( this.offset, this.littleEndian );\r\n\t\tthis.offset += 4;\r\n\t\treturn value;\r\n\r\n\t},\r\n\r\n\tgetInt32Array: function ( size ) {\r\n\r\n\t\tvar a = [];\r\n\r\n\t\tfor ( var i = 0; i < size; i++ ) {\r\n\r\n\t\t\ta.push( this.getInt32() );\r\n\r\n\t\t}\r\n\r\n\t\treturn a;\r\n\r\n\t},\r\n\r\n\tgetUint32: function () {\r\n\r\n\t\tvar value = this.dv.getUint32( this.offset, this.littleEndian );\r\n\t\tthis.offset += 4;\r\n\t\treturn value;\r\n\r\n\t},\r\n\r\n\tgetUint32Array: function ( size ) {\r\n\r\n\t\tvar a = [];\r\n\r\n\t\tfor ( var i = 0; i < size; i++ ) {\r\n\r\n\t\t\ta.push( this.getUint32() );\r\n\r\n\t\t}\r\n\r\n\t\treturn a;\r\n\r\n\t},\r\n\r\n\tgetFloat32: function () {\r\n\r\n\t\tvar value = this.dv.getFloat32( this.offset, this.littleEndian );\r\n\t\tthis.offset += 4;\r\n\t\treturn value;\r\n\r\n\t},\r\n\r\n\tgetFloat32Array: function( size ) {\r\n\r\n\t\tvar a = [];\r\n\r\n\t\tfor ( var i = 0; i < size; i++ ) {\r\n\r\n\t\t\ta.push( this.getFloat32() );\r\n\r\n\t\t}\r\n\r\n\t\treturn a;\r\n\r\n\t},\r\n\r\n\tgetFloat64: function () {\r\n\r\n\t\tvar value = this.dv.getFloat64( this.offset, this.littleEndian );\r\n\t\tthis.offset += 8;\r\n\t\treturn value;\r\n\r\n\t},\r\n\r\n\tgetFloat64Array: function( size ) {\r\n\r\n\t\tvar a = [];\r\n\r\n\t\tfor ( var i = 0; i < size; i++ ) {\r\n\r\n\t\t\ta.push( this.getFloat64() );\r\n\r\n\t\t}\r\n\r\n\t\treturn a;\r\n\r\n\t},\r\n\r\n\tgetIndex: function ( type, isUnsigned ) {\r\n\r\n\t\tswitch ( type ) {\r\n\r\n\t\t\tcase 1:\r\n\t\t\t\treturn ( isUnsigned === true ) ? this.getUint8() : this.getInt8();\r\n\r\n\t\t\tcase 2:\r\n\t\t\t\treturn ( isUnsigned === true ) ? this.getUint16() : this.getInt16();\r\n\r\n\t\t\tcase 4:\r\n\t\t\t\treturn this.getInt32(); // No Uint32\r\n\r\n\t\t\tdefault:\r\n\t\t\t\tthrow 'unknown number type ' + type + ' exception.';\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tgetIndexArray: function ( type, size, isUnsigned ) {\r\n\r\n\t\tvar a = [];\r\n\r\n\t\tfor ( var i = 0; i < size; i++ ) {\r\n\r\n\t\t\ta.push( this.getIndex( type, isUnsigned ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn a;\r\n\r\n\t},\r\n\r\n\tgetChars: function ( size ) {\r\n\r\n\t\tvar str = '';\r\n\r\n\t\twhile ( size > 0 ) {\r\n\r\n\t\t\tvar value = this.getUint8();\r\n\t\t\tsize--;\r\n\r\n\t\t\tif ( value === 0 ) {\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tstr += String.fromCharCode( value );\r\n\r\n\t\t}\r\n\r\n\t\twhile ( size > 0 ) {\r\n\r\n\t\t\tthis.getUint8();\r\n\t\t\tsize--;\r\n\r\n\t\t}\r\n\r\n\t\treturn str;\r\n\r\n\t},\r\n\r\n\tgetSjisStringsAsUnicode: function ( size ) {\r\n\r\n\t\tvar a = [];\r\n\r\n\t\twhile ( size > 0 ) {\r\n\r\n\t\t\tvar value = this.getUint8();\r\n\t\t\tsize--;\r\n\r\n\t\t\tif ( value === 0 ) {\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t\ta.push( value );\r\n\r\n\t\t}\r\n\r\n\t\twhile ( size > 0 ) {\r\n\r\n\t\t\tthis.getUint8();\r\n\t\t\tsize--;\r\n\r\n\t\t}\r\n\r\n\t\treturn this.encoder.s2u( new Uint8Array( a ) );\r\n\r\n\t},\r\n\r\n\tgetUnicodeStrings: function ( size ) {\r\n\r\n\t\tvar str = '';\r\n\r\n\t\twhile ( size > 0 ) {\r\n\r\n\t\t\tvar value = this.getUint16();\r\n\t\t\tsize -= 2;\r\n\r\n\t\t\tif ( value === 0 ) {\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tstr += String.fromCharCode( value );\r\n\r\n\t\t}\r\n\r\n\t\twhile ( size > 0 ) {\r\n\r\n\t\t\tthis.getUint8();\r\n\t\t\tsize--;\r\n\r\n\t\t}\r\n\r\n\t\treturn str;\r\n\r\n\t},\r\n\r\n\tgetTextBuffer: function () {\r\n\r\n\t\tvar size = this.getUint32();\r\n\t\treturn this.getUnicodeStrings( size );\r\n\r\n\t}\r\n\r\n};\r\n\r\n/**\r\n * @author takahiro / https://github.com/takahirox\r\n */\r\n\r\nfunction DataCreationHelper () {\r\n}\r\n\r\nDataCreationHelper.prototype = {\r\n\r\n\tconstructor: DataCreationHelper,\r\n\r\n\tleftToRightVector3: function ( v ) {\r\n\r\n\t\tv[ 2 ] = -v[ 2 ];\r\n\r\n\t},\r\n\r\n\tleftToRightQuaternion: function ( q ) {\r\n\r\n\t\tq[ 0 ] = -q[ 0 ];\r\n\t\tq[ 1 ] = -q[ 1 ];\r\n\r\n\t},\r\n\r\n\tleftToRightEuler: function ( r ) {\r\n\r\n\t\tr[ 0 ] = -r[ 0 ];\r\n\t\tr[ 1 ] = -r[ 1 ];\r\n\r\n\t},\r\n\r\n\tleftToRightIndexOrder: function ( p ) {\r\n\r\n\t\tvar tmp = p[ 2 ];\r\n\t\tp[ 2 ] = p[ 0 ];\r\n\t\tp[ 0 ] = tmp;\r\n\r\n\t},\r\n\r\n\tleftToRightVector3Range: function ( v1, v2 ) {\r\n\r\n\t\tvar tmp = -v2[ 2 ];\r\n\t\tv2[ 2 ] = -v1[ 2 ];\r\n\t\tv1[ 2 ] = tmp;\r\n\r\n\t},\r\n\r\n\tleftToRightEulerRange: function ( r1, r2 ) {\r\n\r\n\t\tvar tmp1 = -r2[ 0 ];\r\n\t\tvar tmp2 = -r2[ 1 ];\r\n\t\tr2[ 0 ] = -r1[ 0 ];\r\n\t\tr2[ 1 ] = -r1[ 1 ];\r\n\t\tr1[ 0 ] = tmp1;\r\n\t\tr1[ 1 ] = tmp2;\r\n\r\n\t}\r\n\r\n};\r\n\r\n/**\r\n * @author takahiro / https://github.com/takahirox\r\n */\r\n\r\nfunction Parser() {\r\n}\r\n\r\nParser.prototype.parsePmd = function ( buffer, leftToRight ) {\r\n\r\n\tvar pmd = {};\r\n\tvar dv = new DataViewEx( buffer );\r\n\r\n\tpmd.metadata = {};\r\n\tpmd.metadata.format = 'pmd';\r\n\tpmd.metadata.coordinateSystem = 'left';\r\n\r\n\tvar parseHeader = function () {\r\n\r\n\t\tvar metadata = pmd.metadata;\r\n\t\tmetadata.magic = dv.getChars( 3 );\r\n\r\n\t\tif ( metadata.magic !== 'Pmd' ) {\r\n\r\n\t\t\tthrow 'PMD file magic is not Pmd, but ' + metadata.magic;\r\n\r\n\t\t}\r\n\r\n\t\tmetadata.version = dv.getFloat32();\r\n\t\tmetadata.modelName = dv.getSjisStringsAsUnicode( 20 );\r\n\t\tmetadata.comment = dv.getSjisStringsAsUnicode( 256 );\r\n\r\n\t};\r\n\r\n\tvar parseVertices = function () {\r\n\r\n\t\tvar parseVertex = function () {\r\n\r\n\t\t\tvar p = {};\r\n\t\t\tp.position = dv.getFloat32Array( 3 );\r\n\t\t\tp.normal = dv.getFloat32Array( 3 );\r\n\t\t\tp.uv = dv.getFloat32Array( 2 );\r\n\t\t\tp.skinIndices = dv.getUint16Array( 2 );\r\n\t\t\tp.skinWeights = [ dv.getUint8() / 100 ];\r\n\t\t\tp.skinWeights.push( 1.0 - p.skinWeights[ 0 ] );\r\n\t\t\tp.edgeFlag = dv.getUint8();\r\n\t\t\treturn p;\r\n\r\n\t\t};\r\n\r\n\t\tvar metadata = pmd.metadata;\r\n\t\tmetadata.vertexCount = dv.getUint32();\r\n\r\n\t\tpmd.vertices = [];\r\n\r\n\t\tfor ( var i = 0; i < metadata.vertexCount; i++ ) {\r\n\r\n\t\t\tpmd.vertices.push( parseVertex() );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tvar parseFaces = function () {\r\n\r\n\t\tvar parseFace = function () {\r\n\r\n\t\t\tvar p = {};\r\n\t\t\tp.indices = dv.getUint16Array( 3 );\r\n\t\t\treturn p;\r\n\r\n\t\t};\r\n\r\n\t\tvar metadata = pmd.metadata;\r\n\t\tmetadata.faceCount = dv.getUint32() / 3;\r\n\r\n\t\tpmd.faces = [];\r\n\r\n\t\tfor ( var i = 0; i < metadata.faceCount; i++ ) {\r\n\r\n\t\t\tpmd.faces.push( parseFace() );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tvar parseMaterials = function () {\r\n\r\n\t\tvar parseMaterial = function () {\r\n\r\n\t\t\tvar p = {};\r\n\t\t\tp.diffuse = dv.getFloat32Array( 4 );\r\n\t\t\tp.shininess = dv.getFloat32();\r\n\t\t\tp.specular = dv.getFloat32Array( 3 );\r\n\t\t\tp.ambient = dv.getFloat32Array( 3 );\r\n\t\t\tp.toonIndex = dv.getInt8();\r\n\t\t\tp.edgeFlag = dv.getUint8();\r\n\t\t\tp.faceCount = dv.getUint32() / 3;\r\n\t\t\tp.fileName = dv.getSjisStringsAsUnicode( 20 );\r\n\t\t\treturn p;\r\n\r\n\t\t};\r\n\r\n\t\tvar metadata = pmd.metadata;\r\n\t\tmetadata.materialCount = dv.getUint32();\r\n\r\n\t\tpmd.materials = [];\r\n\r\n\t\tfor ( var i = 0; i < metadata.materialCount; i++ ) {\r\n\r\n\t\t\tpmd.materials.push( parseMaterial() );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tvar parseBones = function () {\r\n\r\n\t\tvar parseBone = function () {\r\n\r\n\t\t\tvar p = {};\r\n\t\t\tp.name = dv.getSjisStringsAsUnicode( 20 );\r\n\t\t\tp.parentIndex = dv.getInt16();\r\n\t\t\tp.tailIndex = dv.getInt16();\r\n\t\t\tp.type = dv.getUint8();\r\n\t\t\tp.ikIndex = dv.getInt16();\r\n\t\t\tp.position = dv.getFloat32Array( 3 );\r\n\t\t\treturn p;\r\n\r\n\t\t};\r\n\r\n\t\tvar metadata = pmd.metadata;\r\n\t\tmetadata.boneCount = dv.getUint16();\r\n\r\n\t\tpmd.bones = [];\r\n\r\n\t\tfor ( var i = 0; i < metadata.boneCount; i++ ) {\r\n\r\n\t\t\tpmd.bones.push( parseBone() );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tvar parseIks = function () {\r\n\r\n\t\tvar parseIk = function () {\r\n\r\n\t\t\tvar p = {};\r\n\t\t\tp.target = dv.getUint16();\r\n\t\t\tp.effector = dv.getUint16();\r\n\t\t\tp.linkCount = dv.getUint8();\r\n\t\t\tp.iteration = dv.getUint16();\r\n\t\t\tp.maxAngle = dv.getFloat32();\r\n\r\n\t\t\tp.links = [];\r\n\t\t\tfor ( var i = 0; i < p.linkCount; i++ ) {\r\n\r\n\t\t\t\tvar link = {};\r\n\t\t\t\tlink.index = dv.getUint16();\r\n\t\t\t\tp.links.push( link );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn p;\r\n\r\n\t\t};\r\n\r\n\t\tvar metadata = pmd.metadata;\r\n\t\tmetadata.ikCount = dv.getUint16();\r\n\r\n\t\tpmd.iks = [];\r\n\r\n\t\tfor ( var i = 0; i < metadata.ikCount; i++ ) {\r\n\r\n\t\t\tpmd.iks.push( parseIk() );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tvar parseMorphs = function () {\r\n\r\n\t\tvar parseMorph = function () {\r\n\r\n\t\t\tvar p = {};\r\n\t\t\tp.name = dv.getSjisStringsAsUnicode( 20 );\r\n\t\t\tp.elementCount = dv.getUint32();\r\n\t\t\tp.type = dv.getUint8();\r\n\r\n\t\t\tp.elements = [];\r\n\t\t\tfor ( var i = 0; i < p.elementCount; i++ ) {\r\n\r\n\t\t\t\tp.elements.push( {\r\n\t\t\t\t\tindex: dv.getUint32(),\r\n\t\t\t\t\tposition: dv.getFloat32Array( 3 )\r\n\t\t\t\t} ) ;\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn p;\r\n\r\n\t\t};\r\n\r\n\t\tvar metadata = pmd.metadata;\r\n\t\tmetadata.morphCount = dv.getUint16();\r\n\r\n\t\tpmd.morphs = [];\r\n\r\n\t\tfor ( var i = 0; i < metadata.morphCount; i++ ) {\r\n\r\n\t\t\tpmd.morphs.push( parseMorph() );\r\n\r\n\t\t}\r\n\r\n\r\n\t};\r\n\r\n\tvar parseMorphFrames = function () {\r\n\r\n\t\tvar parseMorphFrame = function () {\r\n\r\n\t\t\tvar p = {};\r\n\t\t\tp.index = dv.getUint16();\r\n\t\t\treturn p;\r\n\r\n\t\t};\r\n\r\n\t\tvar metadata = pmd.metadata;\r\n\t\tmetadata.morphFrameCount = dv.getUint8();\r\n\r\n\t\tpmd.morphFrames = [];\r\n\r\n\t\tfor ( var i = 0; i < metadata.morphFrameCount; i++ ) {\r\n\r\n\t\t\tpmd.morphFrames.push( parseMorphFrame() );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tvar parseBoneFrameNames = function () {\r\n\r\n\t\tvar parseBoneFrameName = function () {\r\n\r\n\t\t\tvar p = {};\r\n\t\t\tp.name = dv.getSjisStringsAsUnicode( 50 );\r\n\t\t\treturn p;\r\n\r\n\t\t};\r\n\r\n\t\tvar metadata = pmd.metadata;\r\n\t\tmetadata.boneFrameNameCount = dv.getUint8();\r\n\r\n\t\tpmd.boneFrameNames = [];\r\n\r\n\t\tfor ( var i = 0; i < metadata.boneFrameNameCount; i++ ) {\r\n\r\n\t\t\tpmd.boneFrameNames.push( parseBoneFrameName() );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tvar parseBoneFrames = function () {\r\n\r\n\t\tvar parseBoneFrame = function () {\r\n\r\n\t\t\tvar p = {};\r\n\t\t\tp.boneIndex = dv.getInt16();\r\n\t\t\tp.frameIndex = dv.getUint8();\r\n\t\t\treturn p;\r\n\r\n\t\t};\r\n\r\n\t\tvar metadata = pmd.metadata;\r\n\t\tmetadata.boneFrameCount = dv.getUint32();\r\n\r\n\t\tpmd.boneFrames = [];\r\n\r\n\t\tfor ( var i = 0; i < metadata.boneFrameCount; i++ ) {\r\n\r\n\t\t\tpmd.boneFrames.push( parseBoneFrame() );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tvar parseEnglishHeader = function () {\r\n\r\n\t\tvar metadata = pmd.metadata;\r\n\t\tmetadata.englishCompatibility = dv.getUint8();\r\n\r\n\t\tif ( metadata.englishCompatibility > 0 ) {\r\n\r\n\t\t\tmetadata.englishModelName = dv.getSjisStringsAsUnicode( 20 );\r\n\t\t\tmetadata.englishComment = dv.getSjisStringsAsUnicode( 256 );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tvar parseEnglishBoneNames = function () {\r\n\r\n\t\tvar parseEnglishBoneName = function () {\r\n\r\n\t\t\tvar p = {};\r\n\t\t\tp.name = dv.getSjisStringsAsUnicode( 20 );\r\n\t\t\treturn p;\r\n\r\n\t\t};\r\n\r\n\t\tvar metadata = pmd.metadata;\r\n\r\n\t\tif ( metadata.englishCompatibility === 0 ) {\r\n\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tpmd.englishBoneNames = [];\r\n\r\n\t\tfor ( var i = 0; i < metadata.boneCount; i++ ) {\r\n\r\n\t\t\tpmd.englishBoneNames.push( parseEnglishBoneName() );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tvar parseEnglishMorphNames = function () {\r\n\r\n\t\tvar parseEnglishMorphName = function () {\r\n\r\n\t\t\tvar p = {};\r\n\t\t\tp.name = dv.getSjisStringsAsUnicode( 20 );\r\n\t\t\treturn p;\r\n\r\n\t\t};\r\n\r\n\t\tvar metadata = pmd.metadata;\r\n\r\n\t\tif ( metadata.englishCompatibility === 0 ) {\r\n\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tpmd.englishMorphNames = [];\r\n\r\n\t\tfor ( var i = 0; i < metadata.morphCount - 1; i++ ) {\r\n\r\n\t\t\tpmd.englishMorphNames.push( parseEnglishMorphName() );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tvar parseEnglishBoneFrameNames = function () {\r\n\r\n\t\tvar parseEnglishBoneFrameName = function () {\r\n\r\n\t\t\tvar p = {};\r\n\t\t\tp.name = dv.getSjisStringsAsUnicode( 50 );\r\n\t\t\treturn p;\r\n\r\n\t\t};\r\n\r\n\t\tvar metadata = pmd.metadata;\r\n\r\n\t\tif ( metadata.englishCompatibility === 0 ) {\r\n\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tpmd.englishBoneFrameNames = [];\r\n\r\n\t\tfor ( var i = 0; i < metadata.boneFrameNameCount; i++ ) {\r\n\r\n\t\t\tpmd.englishBoneFrameNames.push( parseEnglishBoneFrameName() );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tvar parseToonTextures = function () {\r\n\r\n\t\tvar parseToonTexture = function () {\r\n\r\n\t\t\tvar p = {};\r\n\t\t\tp.fileName = dv.getSjisStringsAsUnicode( 100 );\r\n\t\t\treturn p;\r\n\r\n\t\t};\r\n\r\n\t\tpmd.toonTextures = [];\r\n\r\n\t\tfor ( var i = 0; i < 10; i++ ) {\r\n\r\n\t\t\tpmd.toonTextures.push( parseToonTexture() );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tvar parseRigidBodies = function () {\r\n\r\n\t\tvar parseRigidBody = function () {\r\n\r\n\t\t\tvar p = {};\r\n\t\t\tp.name = dv.getSjisStringsAsUnicode( 20 );\r\n\t\t\tp.boneIndex = dv.getInt16();\r\n\t\t\tp.groupIndex = dv.getUint8();\r\n\t\t\tp.groupTarget = dv.getUint16();\r\n\t\t\tp.shapeType = dv.getUint8();\r\n\t\t\tp.width = dv.getFloat32();\r\n\t\t\tp.height = dv.getFloat32();\r\n\t\t\tp.depth = dv.getFloat32();\r\n\t\t\tp.position = dv.getFloat32Array( 3 );\r\n\t\t\tp.rotation = dv.getFloat32Array( 3 );\r\n\t\t\tp.weight = dv.getFloat32();\r\n\t\t\tp.positionDamping = dv.getFloat32();\r\n\t\t\tp.rotationDamping = dv.getFloat32();\r\n\t\t\tp.restitution = dv.getFloat32();\r\n\t\t\tp.friction = dv.getFloat32();\r\n\t\t\tp.type = dv.getUint8();\r\n\t\t\treturn p;\r\n\r\n\t\t};\r\n\r\n\t\tvar metadata = pmd.metadata;\r\n\t\tmetadata.rigidBodyCount = dv.getUint32();\r\n\r\n\t\tpmd.rigidBodies = [];\r\n\r\n\t\tfor ( var i = 0; i < metadata.rigidBodyCount; i++ ) {\r\n\r\n\t\t\tpmd.rigidBodies.push( parseRigidBody() );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tvar parseConstraints = function () {\r\n\r\n\t\tvar parseConstraint = function () {\r\n\r\n\t\t\tvar p = {};\r\n\t\t\tp.name = dv.getSjisStringsAsUnicode( 20 );\r\n\t\t\tp.rigidBodyIndex1 = dv.getUint32();\r\n\t\t\tp.rigidBodyIndex2 = dv.getUint32();\r\n\t\t\tp.position = dv.getFloat32Array( 3 );\r\n\t\t\tp.rotation = dv.getFloat32Array( 3 );\r\n\t\t\tp.translationLimitation1 = dv.getFloat32Array( 3 );\r\n\t\t\tp.translationLimitation2 = dv.getFloat32Array( 3 );\r\n\t\t\tp.rotationLimitation1 = dv.getFloat32Array( 3 );\r\n\t\t\tp.rotationLimitation2 = dv.getFloat32Array( 3 );\r\n\t\t\tp.springPosition = dv.getFloat32Array( 3 );\r\n\t\t\tp.springRotation = dv.getFloat32Array( 3 );\r\n\t\t\treturn p;\r\n\r\n\t\t};\r\n\r\n\t\tvar metadata = pmd.metadata;\r\n\t\tmetadata.constraintCount = dv.getUint32();\r\n\r\n\t\tpmd.constraints = [];\r\n\r\n\t\tfor ( var i = 0; i < metadata.constraintCount; i++ ) {\r\n\r\n\t\t\tpmd.constraints.push( parseConstraint() );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tparseHeader();\r\n\tparseVertices();\r\n\tparseFaces();\r\n\tparseMaterials();\r\n\tparseBones();\r\n\tparseIks();\r\n\tparseMorphs();\r\n\tparseMorphFrames();\r\n\tparseBoneFrameNames();\r\n\tparseBoneFrames();\r\n\tparseEnglishHeader();\r\n\tparseEnglishBoneNames();\r\n\tparseEnglishMorphNames();\r\n\tparseEnglishBoneFrameNames();\r\n\tparseToonTextures();\r\n\tparseRigidBodies();\r\n\tparseConstraints();\r\n\r\n\tif ( leftToRight === true ) this.leftToRightModel( pmd );\r\n\r\n\t// console.log( pmd ); // for console debug\r\n\r\n\treturn pmd;\r\n\r\n};\r\n\r\nParser.prototype.parsePmx = function ( buffer, leftToRight ) {\r\n\r\n\tvar pmx = {};\r\n\tvar dv = new DataViewEx( buffer );\r\n\r\n\tpmx.metadata = {};\r\n\tpmx.metadata.format = 'pmx';\r\n\tpmx.metadata.coordinateSystem = 'left';\r\n\r\n\tvar parseHeader = function () {\r\n\r\n\t\tvar metadata = pmx.metadata;\r\n\t\tmetadata.magic = dv.getChars( 4 );\r\n\r\n\t\t// Note: don't remove the last blank space.\r\n\t\tif ( metadata.magic !== 'PMX ' ) {\r\n\r\n\t\t\tthrow 'PMX file magic is not PMX , but ' + metadata.magic;\r\n\r\n\t\t}\r\n\r\n\t\tmetadata.version = dv.getFloat32();\r\n\r\n\t\tif ( metadata.version !== 2.0 && metadata.version !== 2.1 ) {\r\n\r\n\t\t\tthrow 'PMX version ' + metadata.version + ' is not supported.';\r\n\r\n\t\t}\r\n\r\n\t\tmetadata.headerSize = dv.getUint8();\r\n\t\tmetadata.encoding = dv.getUint8();\r\n\t\tmetadata.additionalUvNum = dv.getUint8();\r\n\t\tmetadata.vertexIndexSize = dv.getUint8();\r\n\t\tmetadata.textureIndexSize = dv.getUint8();\r\n\t\tmetadata.materialIndexSize = dv.getUint8();\r\n\t\tmetadata.boneIndexSize = dv.getUint8();\r\n\t\tmetadata.morphIndexSize = dv.getUint8();\r\n\t\tmetadata.rigidBodyIndexSize = dv.getUint8();\r\n\t\tmetadata.modelName = dv.getTextBuffer();\r\n\t\tmetadata.englishModelName = dv.getTextBuffer();\r\n\t\tmetadata.comment = dv.getTextBuffer();\r\n\t\tmetadata.englishComment = dv.getTextBuffer();\r\n\r\n\t};\r\n\r\n\tvar parseVertices = function () {\r\n\r\n\t\tvar parseVertex = function () {\r\n\r\n\t\t\tvar p = {};\r\n\t\t\tp.position = dv.getFloat32Array( 3 );\r\n\t\t\tp.normal = dv.getFloat32Array( 3 );\r\n\t\t\tp.uv = dv.getFloat32Array( 2 );\r\n\r\n\t\t\tp.auvs = [];\r\n\r\n\t\t\tfor ( var i = 0; i < pmx.metadata.additionalUvNum; i++ ) {\r\n\r\n\t\t\t\tp.auvs.push( dv.getFloat32Array( 4 ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tp.type = dv.getUint8();\r\n\r\n\t\t\tvar indexSize = metadata.boneIndexSize;\r\n\r\n\t\t\tif ( p.type === 0 ) {  // BDEF1\r\n\r\n\t\t\t\tp.skinIndices = dv.getIndexArray( indexSize, 1 );\r\n\t\t\t\tp.skinWeights = [ 1.0 ];\r\n\r\n\t\t\t} else if ( p.type === 1 ) {  // BDEF2\r\n\r\n\t\t\t\tp.skinIndices = dv.getIndexArray( indexSize, 2 );\r\n\t\t\t\tp.skinWeights = dv.getFloat32Array( 1 );\r\n\t\t\t\tp.skinWeights.push( 1.0 - p.skinWeights[ 0 ] );\r\n\r\n\t\t\t} else if ( p.type === 2 ) {  // BDEF4\r\n\r\n\t\t\t\tp.skinIndices = dv.getIndexArray( indexSize, 4 );\r\n\t\t\t\tp.skinWeights = dv.getFloat32Array( 4 );\r\n\r\n\t\t\t} else if ( p.type === 3 ) {  // SDEF\r\n\r\n\t\t\t\tp.skinIndices = dv.getIndexArray( indexSize, 2 );\r\n\t\t\t\tp.skinWeights = dv.getFloat32Array( 1 );\r\n\t\t\t\tp.skinWeights.push( 1.0 - p.skinWeights[ 0 ] );\r\n\r\n\t\t\t\tp.skinC = dv.getFloat32Array( 3 );\r\n\t\t\t\tp.skinR0 = dv.getFloat32Array( 3 );\r\n\t\t\t\tp.skinR1 = dv.getFloat32Array( 3 );\r\n\r\n\t\t\t\t// SDEF is not supported yet and is handled as BDEF2 so far.\r\n\t\t\t\t// TODO: SDEF support\r\n\t\t\t\tp.type = 1;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthrow 'unsupport bone type ' + p.type + ' exception.';\r\n\r\n\t\t\t}\r\n\r\n\t\t\tp.edgeRatio = dv.getFloat32();\r\n\t\t\treturn p;\r\n\r\n\t\t};\r\n\r\n\t\tvar metadata = pmx.metadata;\r\n\t\tmetadata.vertexCount = dv.getUint32();\r\n\r\n\t\tpmx.vertices = [];\r\n\r\n\t\tfor ( var i = 0; i < metadata.vertexCount; i++ ) {\r\n\r\n\t\t\tpmx.vertices.push( parseVertex() );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tvar parseFaces = function () {\r\n\r\n\t\tvar parseFace = function () {\r\n\r\n\t\t\tvar p = {};\r\n\t\t\tp.indices = dv.getIndexArray( metadata.vertexIndexSize, 3, true );\r\n\t\t\treturn p;\r\n\r\n\t\t};\r\n\r\n\t\tvar metadata = pmx.metadata;\r\n\t\tmetadata.faceCount = dv.getUint32() / 3;\r\n\r\n\t\tpmx.faces = [];\r\n\r\n\t\tfor ( var i = 0; i < metadata.faceCount; i++ ) {\r\n\r\n\t\t\tpmx.faces.push( parseFace() );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tvar parseTextures = function () {\r\n\r\n\t\tvar parseTexture = function () {\r\n\r\n\t\t\treturn dv.getTextBuffer();\r\n\r\n\t\t};\r\n\r\n\t\tvar metadata = pmx.metadata;\r\n\t\tmetadata.textureCount = dv.getUint32();\r\n\r\n\t\tpmx.textures = [];\r\n\r\n\t\tfor ( var i = 0; i < metadata.textureCount; i++ ) {\r\n\r\n\t\t\tpmx.textures.push( parseTexture() );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tvar parseMaterials = function () {\r\n\r\n\t\tvar parseMaterial = function () {\r\n\r\n\t\t\tvar p = {};\r\n\t\t\tp.name = dv.getTextBuffer();\r\n\t\t\tp.englishName = dv.getTextBuffer();\r\n\t\t\tp.diffuse = dv.getFloat32Array( 4 );\r\n\t\t\tp.specular = dv.getFloat32Array( 3 );\r\n\t\t\tp.shininess = dv.getFloat32();\r\n\t\t\tp.ambient = dv.getFloat32Array( 3 );\r\n\t\t\tp.flag = dv.getUint8();\r\n\t\t\tp.edgeColor = dv.getFloat32Array( 4 );\r\n\t\t\tp.edgeSize = dv.getFloat32();\r\n\t\t\tp.textureIndex = dv.getIndex( pmx.metadata.textureIndexSize );\r\n\t\t\tp.envTextureIndex = dv.getIndex( pmx.metadata.textureIndexSize );\r\n\t\t\tp.envFlag = dv.getUint8();\r\n\t\t\tp.toonFlag = dv.getUint8();\r\n\r\n\t\t\tif ( p.toonFlag === 0 ) {\r\n\r\n\t\t\t\tp.toonIndex = dv.getIndex( pmx.metadata.textureIndexSize );\r\n\r\n\t\t\t} else if ( p.toonFlag === 1 ) {\r\n\r\n\t\t\t\tp.toonIndex = dv.getInt8();\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthrow 'unknown toon flag ' + p.toonFlag + ' exception.';\r\n\r\n\t\t\t}\r\n\r\n\t\t\tp.comment = dv.getTextBuffer();\r\n\t\t\tp.faceCount = dv.getUint32() / 3;\r\n\t\t\treturn p;\r\n\r\n\t\t};\r\n\r\n\t\tvar metadata = pmx.metadata;\r\n\t\tmetadata.materialCount = dv.getUint32();\r\n\r\n\t\tpmx.materials = [];\r\n\r\n\t\tfor ( var i = 0; i < metadata.materialCount; i++ ) {\r\n\r\n\t\t\tpmx.materials.push( parseMaterial() );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tvar parseBones = function () {\r\n\r\n\t\tvar parseBone = function () {\r\n\r\n\t\t\tvar p = {};\r\n\t\t\tp.name = dv.getTextBuffer();\r\n\t\t\tp.englishName = dv.getTextBuffer();\r\n\t\t\tp.position = dv.getFloat32Array( 3 );\r\n\t\t\tp.parentIndex = dv.getIndex( pmx.metadata.boneIndexSize );\r\n\t\t\tp.transformationClass = dv.getUint32();\r\n\t\t\tp.flag = dv.getUint16();\r\n\r\n\t\t\tif ( p.flag & 0x1 ) {\r\n\r\n\t\t\t\tp.connectIndex = dv.getIndex( pmx.metadata.boneIndexSize );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tp.offsetPosition = dv.getFloat32Array( 3 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( p.flag & 0x100 || p.flag & 0x200 ) {\r\n\r\n\t\t\t\t// Note: I don't think Grant is an appropriate name\r\n\t\t\t\t//       but I found that some English translated MMD tools use this term\r\n\t\t\t\t//       so I've named it Grant so far.\r\n\t\t\t\t//       I'd rename to more appropriate name from Grant later.\r\n\t\t\t\tvar grant = {};\r\n\r\n\t\t\t\tgrant.isLocal = ( p.flag & 0x80 ) !== 0 ? true : false;\r\n\t\t\t\tgrant.affectRotation = ( p.flag & 0x100 ) !== 0 ? true : false;\r\n\t\t\t\tgrant.affectPosition = ( p.flag & 0x200 ) !== 0 ? true : false;\r\n\t\t\t\tgrant.parentIndex = dv.getIndex( pmx.metadata.boneIndexSize );\r\n\t\t\t\tgrant.ratio = dv.getFloat32();\r\n\r\n\t\t\t\tp.grant = grant;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( p.flag & 0x400 ) {\r\n\r\n\t\t\t\tp.fixAxis = dv.getFloat32Array( 3 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( p.flag & 0x800 ) {\r\n\r\n\t\t\t\tp.localXVector = dv.getFloat32Array( 3 );\r\n\t\t\t\tp.localZVector = dv.getFloat32Array( 3 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( p.flag & 0x2000 ) {\r\n\r\n\t\t\t\tp.key = dv.getUint32();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( p.flag & 0x20 ) {\r\n\r\n\t\t\t\tvar ik = {};\r\n\r\n\t\t\t\tik.effector = dv.getIndex( pmx.metadata.boneIndexSize );\r\n\t\t\t\tik.target = null;\r\n\t\t\t\tik.iteration = dv.getUint32();\r\n\t\t\t\tik.maxAngle = dv.getFloat32();\r\n\t\t\t\tik.linkCount = dv.getUint32();\r\n\t\t\t\tik.links = [];\r\n\r\n\t\t\t\tfor ( var i = 0; i < ik.linkCount; i++ ) {\r\n\r\n\t\t\t\t\tvar link = {};\r\n\t\t\t\t\tlink.index = dv.getIndex( pmx.metadata.boneIndexSize );\r\n\t\t\t\t\tlink.angleLimitation = dv.getUint8();\r\n\r\n\t\t\t\t\tif ( link.angleLimitation === 1 ) {\r\n\r\n\t\t\t\t\t\tlink.lowerLimitationAngle = dv.getFloat32Array( 3 );\r\n\t\t\t\t\t\tlink.upperLimitationAngle = dv.getFloat32Array( 3 );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tik.links.push( link );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tp.ik = ik;\r\n\t\t\t}\r\n\r\n\t\t\treturn p;\r\n\r\n\t\t};\r\n\r\n\t\tvar metadata = pmx.metadata;\r\n\t\tmetadata.boneCount = dv.getUint32();\r\n\r\n\t\tpmx.bones = [];\r\n\r\n\t\tfor ( var i = 0; i < metadata.boneCount; i++ ) {\r\n\r\n\t\t\tpmx.bones.push( parseBone() );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tvar parseMorphs = function () {\r\n\r\n\t\tvar parseMorph = function () {\r\n\r\n\t\t\tvar p = {};\r\n\t\t\tp.name = dv.getTextBuffer();\r\n\t\t\tp.englishName = dv.getTextBuffer();\r\n\t\t\tp.panel = dv.getUint8();\r\n\t\t\tp.type = dv.getUint8();\r\n\t\t\tp.elementCount = dv.getUint32();\r\n\t\t\tp.elements = [];\r\n\r\n\t\t\tfor ( var i = 0; i < p.elementCount; i++ ) {\r\n\r\n\t\t\t\tif ( p.type === 0 ) {  // group morph\r\n\r\n\t\t\t\t\tvar m = {};\r\n\t\t\t\t\tm.index = dv.getIndex( pmx.metadata.morphIndexSize );\r\n\t\t\t\t\tm.ratio = dv.getFloat32();\r\n\t\t\t\t\tp.elements.push( m );\r\n\r\n\t\t\t\t} else if ( p.type === 1 ) {  // vertex morph\r\n\r\n\t\t\t\t\tvar m = {};\r\n\t\t\t\t\tm.index = dv.getIndex( pmx.metadata.vertexIndexSize, true );\r\n\t\t\t\t\tm.position = dv.getFloat32Array( 3 );\r\n\t\t\t\t\tp.elements.push( m );\r\n\r\n\t\t\t\t} else if ( p.type === 2 ) {  // bone morph\r\n\r\n\t\t\t\t\tvar m = {};\r\n\t\t\t\t\tm.index = dv.getIndex( pmx.metadata.boneIndexSize );\r\n\t\t\t\t\tm.position = dv.getFloat32Array( 3 );\r\n\t\t\t\t\tm.rotation = dv.getFloat32Array( 4 );\r\n\t\t\t\t\tp.elements.push( m );\r\n\r\n\t\t\t\t} else if ( p.type === 3 ) {  // uv morph\r\n\r\n\t\t\t\t\tvar m = {};\r\n\t\t\t\t\tm.index = dv.getIndex( pmx.metadata.vertexIndexSize, true );\r\n\t\t\t\t\tm.uv = dv.getFloat32Array( 4 );\r\n\t\t\t\t\tp.elements.push( m );\r\n\r\n\t\t\t\t} else if ( p.type === 4 ) {  // additional uv1\r\n\r\n\t\t\t\t\t// TODO: implement\r\n\r\n\t\t\t\t} else if ( p.type === 5 ) {  // additional uv2\r\n\r\n\t\t\t\t\t// TODO: implement\r\n\r\n\t\t\t\t} else if ( p.type === 6 ) {  // additional uv3\r\n\r\n\t\t\t\t\t// TODO: implement\r\n\r\n\t\t\t\t} else if ( p.type === 7 ) {  // additional uv4\r\n\r\n\t\t\t\t\t// TODO: implement\r\n\r\n\t\t\t\t} else if ( p.type === 8 ) {  // material morph\r\n\r\n\t\t\t\t\tvar m = {};\r\n\t\t\t\t\tm.index = dv.getIndex( pmx.metadata.materialIndexSize );\r\n\t\t\t\t\tm.type = dv.getUint8();\r\n\t\t\t\t\tm.diffuse = dv.getFloat32Array( 4 );\r\n\t\t\t\t\tm.specular = dv.getFloat32Array( 3 );\r\n\t\t\t\t\tm.shininess = dv.getFloat32();\r\n\t\t\t\t\tm.ambient = dv.getFloat32Array( 3 );\r\n\t\t\t\t\tm.edgeColor = dv.getFloat32Array( 4 );\r\n\t\t\t\t\tm.edgeSize = dv.getFloat32();\r\n\t\t\t\t\tm.textureColor = dv.getFloat32Array( 4 );\r\n\t\t\t\t\tm.sphereTextureColor = dv.getFloat32Array( 4 );\r\n\t\t\t\t\tm.toonColor = dv.getFloat32Array( 4 );\r\n\t\t\t\t\tp.elements.push( m );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn p;\r\n\r\n\t\t};\r\n\r\n\t\tvar metadata = pmx.metadata;\r\n\t\tmetadata.morphCount = dv.getUint32();\r\n\r\n\t\tpmx.morphs = [];\r\n\r\n\t\tfor ( var i = 0; i < metadata.morphCount; i++ ) {\r\n\r\n\t\t\tpmx.morphs.push( parseMorph() );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tvar parseFrames = function () {\r\n\r\n\t\tvar parseFrame = function () {\r\n\r\n\t\t\tvar p = {};\r\n\t\t\tp.name = dv.getTextBuffer();\r\n\t\t\tp.englishName = dv.getTextBuffer();\r\n\t\t\tp.type = dv.getUint8();\r\n\t\t\tp.elementCount = dv.getUint32();\r\n\t\t\tp.elements = [];\r\n\r\n\t\t\tfor ( var i = 0; i < p.elementCount; i++ ) {\r\n\r\n\t\t\t\tvar e = {};\r\n\t\t\t\te.target = dv.getUint8();\r\n\t\t\t\te.index = ( e.target === 0 ) ? dv.getIndex( pmx.metadata.boneIndexSize ) : dv.getIndex( pmx.metadata.morphIndexSize );\r\n\t\t\t\tp.elements.push( e );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn p;\r\n\r\n\t\t};\r\n\r\n\t\tvar metadata = pmx.metadata;\r\n\t\tmetadata.frameCount = dv.getUint32();\r\n\r\n\t\tpmx.frames = [];\r\n\r\n\t\tfor ( var i = 0; i < metadata.frameCount; i++ ) {\r\n\r\n\t\t\tpmx.frames.push( parseFrame() );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tvar parseRigidBodies = function () {\r\n\r\n\t\tvar parseRigidBody = function () {\r\n\r\n\t\t\tvar p = {};\r\n\t\t\tp.name = dv.getTextBuffer();\r\n\t\t\tp.englishName = dv.getTextBuffer();\r\n\t\t\tp.boneIndex = dv.getIndex( pmx.metadata.boneIndexSize );\r\n\t\t\tp.groupIndex = dv.getUint8();\r\n\t\t\tp.groupTarget = dv.getUint16();\r\n\t\t\tp.shapeType = dv.getUint8();\r\n\t\t\tp.width = dv.getFloat32();\r\n\t\t\tp.height = dv.getFloat32();\r\n\t\t\tp.depth = dv.getFloat32();\r\n\t\t\tp.position = dv.getFloat32Array( 3 );\r\n\t\t\tp.rotation = dv.getFloat32Array( 3 );\r\n\t\t\tp.weight = dv.getFloat32();\r\n\t\t\tp.positionDamping = dv.getFloat32();\r\n\t\t\tp.rotationDamping = dv.getFloat32();\r\n\t\t\tp.restitution = dv.getFloat32();\r\n\t\t\tp.friction = dv.getFloat32();\r\n\t\t\tp.type = dv.getUint8();\r\n\t\t\treturn p;\r\n\r\n\t\t};\r\n\r\n\t\tvar metadata = pmx.metadata;\r\n\t\tmetadata.rigidBodyCount = dv.getUint32();\r\n\r\n\t\tpmx.rigidBodies = [];\r\n\r\n\t\tfor ( var i = 0; i < metadata.rigidBodyCount; i++ ) {\r\n\r\n\t\t\tpmx.rigidBodies.push( parseRigidBody() );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tvar parseConstraints = function () {\r\n\r\n\t\tvar parseConstraint = function () {\r\n\r\n\t\t\tvar p = {};\r\n\t\t\tp.name = dv.getTextBuffer();\r\n\t\t\tp.englishName = dv.getTextBuffer();\r\n\t\t\tp.type = dv.getUint8();\r\n\t\t\tp.rigidBodyIndex1 = dv.getIndex( pmx.metadata.rigidBodyIndexSize );\r\n\t\t\tp.rigidBodyIndex2 = dv.getIndex( pmx.metadata.rigidBodyIndexSize );\r\n\t\t\tp.position = dv.getFloat32Array( 3 );\r\n\t\t\tp.rotation = dv.getFloat32Array( 3 );\r\n\t\t\tp.translationLimitation1 = dv.getFloat32Array( 3 );\r\n\t\t\tp.translationLimitation2 = dv.getFloat32Array( 3 );\r\n\t\t\tp.rotationLimitation1 = dv.getFloat32Array( 3 );\r\n\t\t\tp.rotationLimitation2 = dv.getFloat32Array( 3 );\r\n\t\t\tp.springPosition = dv.getFloat32Array( 3 );\r\n\t\t\tp.springRotation = dv.getFloat32Array( 3 );\r\n\t\t\treturn p;\r\n\r\n\t\t};\r\n\r\n\t\tvar metadata = pmx.metadata;\r\n\t\tmetadata.constraintCount = dv.getUint32();\r\n\r\n\t\tpmx.constraints = [];\r\n\r\n\t\tfor ( var i = 0; i < metadata.constraintCount; i++ ) {\r\n\r\n\t\t\tpmx.constraints.push( parseConstraint() );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tparseHeader();\r\n\tparseVertices();\r\n\tparseFaces();\r\n\tparseTextures();\r\n\tparseMaterials();\r\n\tparseBones();\r\n\tparseMorphs();\r\n\tparseFrames();\r\n\tparseRigidBodies();\r\n\tparseConstraints();\r\n\r\n\tif ( leftToRight === true ) this.leftToRightModel( pmx );\r\n\r\n\t// console.log( pmx ); // for console debug\r\n\r\n\treturn pmx;\r\n\r\n};\r\n\r\nParser.prototype.parseVmd = function ( buffer, leftToRight ) {\r\n\r\n\tvar vmd = {};\r\n\tvar dv = new DataViewEx( buffer );\r\n\r\n\tvmd.metadata = {};\r\n\tvmd.metadata.coordinateSystem = 'left';\r\n\r\n\tvar parseHeader = function () {\r\n\r\n\t\tvar metadata = vmd.metadata;\r\n\t\tmetadata.magic = dv.getChars( 30 );\r\n\r\n\t\tif ( metadata.magic !== 'Vocaloid Motion Data 0002' ) {\r\n\r\n\t\t\tthrow 'VMD file magic is not Vocaloid Motion Data 0002, but ' + metadata.magic;\r\n\r\n\t\t}\r\n\r\n\t\tmetadata.name = dv.getSjisStringsAsUnicode( 20 );\r\n\r\n\t};\r\n\r\n\tvar parseMotions = function () {\r\n\r\n\t\tvar parseMotion = function () {\r\n\r\n\t\t\tvar p = {};\r\n\t\t\tp.boneName = dv.getSjisStringsAsUnicode( 15 );\r\n\t\t\tp.frameNum = dv.getUint32();\r\n\t\t\tp.position = dv.getFloat32Array( 3 );\r\n\t\t\tp.rotation = dv.getFloat32Array( 4 );\r\n\t\t\tp.interpolation = dv.getUint8Array( 64 );\r\n\t\t\treturn p;\r\n\r\n\t\t};\r\n\r\n\t\tvar metadata = vmd.metadata;\r\n\t\tmetadata.motionCount = dv.getUint32();\r\n\r\n\t\tvmd.motions = [];\r\n\t\tfor ( var i = 0; i < metadata.motionCount; i++ ) {\r\n\r\n\t\t\tvmd.motions.push( parseMotion() );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tvar parseMorphs = function () {\r\n\r\n\t\tvar parseMorph = function () {\r\n\r\n\t\t\tvar p = {};\r\n\t\t\tp.morphName = dv.getSjisStringsAsUnicode( 15 );\r\n\t\t\tp.frameNum = dv.getUint32();\r\n\t\t\tp.weight = dv.getFloat32();\r\n\t\t\treturn p;\r\n\r\n\t\t};\r\n\r\n\t\tvar metadata = vmd.metadata;\r\n\t\tmetadata.morphCount = dv.getUint32();\r\n\r\n\t\tvmd.morphs = [];\r\n\t\tfor ( var i = 0; i < metadata.morphCount; i++ ) {\r\n\r\n\t\t\tvmd.morphs.push( parseMorph() );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tvar parseCameras = function () {\r\n\r\n\t\tvar parseCamera = function () {\r\n\r\n\t\t\tvar p = {};\r\n\t\t\tp.frameNum = dv.getUint32();\r\n\t\t\tp.distance = dv.getFloat32();\r\n\t\t\tp.position = dv.getFloat32Array( 3 );\r\n\t\t\tp.rotation = dv.getFloat32Array( 3 );\r\n\t\t\tp.interpolation = dv.getUint8Array( 24 );\r\n\t\t\tp.fov = dv.getUint32();\r\n\t\t\tp.perspective = dv.getUint8();\r\n\t\t\treturn p;\r\n\r\n\t\t};\r\n\r\n\t\tvar metadata = vmd.metadata;\r\n\t\tmetadata.cameraCount = dv.getUint32();\r\n\r\n\t\tvmd.cameras = [];\r\n\t\tfor ( var i = 0; i < metadata.cameraCount; i++ ) {\r\n\r\n\t\t\tvmd.cameras.push( parseCamera() );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tparseHeader();\r\n\tparseMotions();\r\n\tparseMorphs();\r\n\tparseCameras();\r\n\r\n\tif ( leftToRight === true ) this.leftToRightVmd( vmd );\r\n\r\n\t// console.log( vmd ); // for console debug\r\n\r\n\treturn vmd;\r\n\r\n};\r\n\r\nParser.prototype.parseVpd = function ( text, leftToRight ) {\r\n\r\n\tvar vpd = {};\r\n\r\n\tvpd.metadata = {};\r\n\tvpd.metadata.coordinateSystem = 'left';\r\n\r\n\tvpd.bones = [];\r\n\r\n\tvar commentPatternG = /\\/\\/\\w*(\\r|\\n|\\r\\n)/g;\r\n\tvar newlinePattern = /\\r|\\n|\\r\\n/;\r\n\r\n\tvar lines = text.replace( commentPatternG, '' ).split( newlinePattern );\r\n\r\n\tfunction throwError () {\r\n\r\n\t\tthrow 'the file seems not vpd file.';\r\n\r\n\t}\r\n\r\n\tfunction checkMagic () {\r\n\r\n\t\tif ( lines[ 0 ] !== 'Vocaloid Pose Data file' ) {\r\n\r\n\t\t\tthrowError();\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction parseHeader () {\r\n\r\n\t\tif ( lines.length < 4 ) {\r\n\r\n\t\t\tthrowError();\r\n\r\n\t\t}\r\n\r\n\t\tvpd.metadata.parentFile = lines[ 2 ];\r\n\t\tvpd.metadata.boneCount = parseInt( lines[ 3 ] );\r\n\r\n\t}\r\n\r\n\tfunction parseBones () {\r\n\r\n\t\tvar boneHeaderPattern = /^\\s*(Bone[0-9]+)\\s*\\{\\s*(.*)$/;\r\n\t\tvar boneVectorPattern = /^\\s*(-?[0-9]+\\.[0-9]+)\\s*,\\s*(-?[0-9]+\\.[0-9]+)\\s*,\\s*(-?[0-9]+\\.[0-9]+)\\s*;/;\r\n\t\tvar boneQuaternionPattern = /^\\s*(-?[0-9]+\\.[0-9]+)\\s*,\\s*(-?[0-9]+\\.[0-9]+)\\s*,\\s*(-?[0-9]+\\.[0-9]+)\\s*,\\s*(-?[0-9]+\\.[0-9]+)\\s*;/;\r\n\t\tvar boneFooterPattern = /^\\s*}/;\r\n\r\n\t\tvar bones = vpd.bones;\r\n\t\tvar n = null;\r\n\t\tvar v = null;\r\n\t\tvar q = null;\r\n\r\n\t\tfor ( var i = 4; i < lines.length; i++ ) {\r\n\r\n\t\t\tvar line = lines[ i ];\r\n\r\n\t\t\tvar result;\r\n\r\n\t\t\tresult = line.match( boneHeaderPattern );\r\n\r\n\t\t\tif ( result !== null ) {\r\n\r\n\t\t\t\tif ( n !== null ) {\r\n\r\n\t\t\t\t\tthrowError();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tn = result[ 2 ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tresult = line.match( boneVectorPattern );\r\n\r\n\t\t\tif ( result !== null ) {\r\n\r\n\t\t\t\tif ( v !== null ) {\r\n\r\n\t\t\t\t\tthrowError();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tv = [\r\n\r\n\t\t\t\t\tparseFloat( result[ 1 ] ),\r\n\t\t\t\t\tparseFloat( result[ 2 ] ),\r\n\t\t\t\t\tparseFloat( result[ 3 ] )\r\n\r\n\t\t\t\t];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tresult = line.match( boneQuaternionPattern );\r\n\r\n\t\t\tif ( result !== null ) {\r\n\r\n\t\t\t\tif ( q !== null ) {\r\n\r\n\t\t\t\t\tthrowError();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tq = [\r\n\r\n\t\t\t\t\tparseFloat( result[ 1 ] ),\r\n\t\t\t\t\tparseFloat( result[ 2 ] ),\r\n\t\t\t\t\tparseFloat( result[ 3 ] ),\r\n\t\t\t\t\tparseFloat( result[ 4 ] )\r\n\r\n\t\t\t\t];\r\n\r\n\r\n\t\t\t}\r\n\r\n\t\t\tresult = line.match( boneFooterPattern );\r\n\r\n\t\t\tif ( result !== null ) {\r\n\r\n\t\t\t\tif ( n === null || v === null || q === null ) {\r\n\r\n\t\t\t\t\tthrowError();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbones.push( {\r\n\r\n\t\t\t\t\tname: n,\r\n\t\t\t\t\ttranslation: v,\r\n\t\t\t\t\tquaternion: q\r\n\r\n\t\t\t\t} );\r\n\r\n\t\t\t\tn = null;\r\n\t\t\t\tv = null;\r\n\t\t\t\tq = null;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( n !== null || v !== null || q !== null ) {\r\n\r\n\t\t\tthrowError();\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tcheckMagic();\r\n\tparseHeader();\r\n\tparseBones();\r\n\r\n\tif ( leftToRight === true ) this.leftToRightVpd( vpd );\r\n\r\n\t// console.log( vpd );  // for console debug\r\n\r\n\treturn vpd;\r\n\r\n};\r\n\r\nParser.prototype.mergeVmds = function ( vmds ) {\r\n\r\n\tvar v = {};\r\n\tv.metadata = {};\r\n\tv.metadata.name = vmds[ 0 ].metadata.name;\r\n\tv.metadata.coordinateSystem = vmds[ 0 ].metadata.coordinateSystem;\r\n\tv.metadata.motionCount = 0;\r\n\tv.metadata.morphCount = 0;\r\n\tv.metadata.cameraCount = 0;\r\n\tv.motions = [];\r\n\tv.morphs = [];\r\n\tv.cameras = [];\r\n\r\n\tfor ( var i = 0; i < vmds.length; i++ ) {\r\n\r\n\t\tvar v2 = vmds[ i ];\r\n\r\n\t\tv.metadata.motionCount += v2.metadata.motionCount;\r\n\t\tv.metadata.morphCount += v2.metadata.morphCount;\r\n\t\tv.metadata.cameraCount += v2.metadata.cameraCount;\r\n\r\n\t\tfor ( var j = 0; j < v2.metadata.motionCount; j++ ) {\r\n\r\n\t\t\tv.motions.push( v2.motions[ j ] );\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var j = 0; j < v2.metadata.morphCount; j++ ) {\r\n\r\n\t\t\tv.morphs.push( v2.morphs[ j ] );\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var j = 0; j < v2.metadata.cameraCount; j++ ) {\r\n\r\n\t\t\tv.cameras.push( v2.cameras[ j ] );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn v;\r\n\r\n};\r\n\r\nParser.prototype.leftToRightModel = function ( model ) {\r\n\r\n\tif ( model.metadata.coordinateSystem === 'right' ) {\r\n\r\n\t\treturn;\r\n\r\n\t}\r\n\r\n\tmodel.metadata.coordinateSystem = 'right';\r\n\r\n\tvar helper = new DataCreationHelper();\r\n\r\n\tfor ( var i = 0; i < model.metadata.vertexCount; i++ ) {\r\n\r\n\t\thelper.leftToRightVector3( model.vertices[ i ].position );\r\n\t\thelper.leftToRightVector3( model.vertices[ i ].normal );\r\n\r\n\t}\r\n\r\n\tfor ( var i = 0; i < model.metadata.faceCount; i++ ) {\r\n\r\n\t\thelper.leftToRightIndexOrder( model.faces[ i ].indices );\r\n\r\n\t}\r\n\r\n\tfor ( var i = 0; i < model.metadata.boneCount; i++ ) {\r\n\r\n\t\thelper.leftToRightVector3( model.bones[ i ].position );\r\n\r\n\t}\r\n\r\n\t// TODO: support other morph for PMX\r\n\tfor ( var i = 0; i < model.metadata.morphCount; i++ ) {\r\n\r\n\t\tvar m = model.morphs[ i ];\r\n\r\n\t\tif ( model.metadata.format === 'pmx' && m.type !== 1 ) {\r\n\r\n\t\t\t// TODO: implement\r\n\t\t\tcontinue;\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var j = 0; j < m.elements.length; j++ ) {\r\n\r\n\t\t\thelper.leftToRightVector3( m.elements[ j ].position );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfor ( var i = 0; i < model.metadata.rigidBodyCount; i++ ) {\r\n\r\n\t\thelper.leftToRightVector3( model.rigidBodies[ i ].position );\r\n\t\thelper.leftToRightEuler( model.rigidBodies[ i ].rotation );\r\n\r\n\t}\r\n\r\n\tfor ( var i = 0; i < model.metadata.constraintCount; i++ ) {\r\n\r\n\t\thelper.leftToRightVector3( model.constraints[ i ].position );\r\n\t\thelper.leftToRightEuler( model.constraints[ i ].rotation );\r\n\t\thelper.leftToRightVector3Range( model.constraints[ i ].translationLimitation1, model.constraints[ i ].translationLimitation2 );\r\n\t\thelper.leftToRightEulerRange( model.constraints[ i ].rotationLimitation1, model.constraints[ i ].rotationLimitation2 );\r\n\r\n\t}\r\n\r\n};\r\n\r\nParser.prototype.leftToRightVmd = function ( vmd ) {\r\n\r\n\tif ( vmd.metadata.coordinateSystem === 'right' ) {\r\n\r\n\t\treturn;\r\n\r\n\t}\r\n\r\n\tvmd.metadata.coordinateSystem = 'right';\r\n\r\n\tvar helper = new DataCreationHelper();\r\n\r\n\tfor ( var i = 0; i < vmd.metadata.motionCount; i++ ) {\r\n\r\n\t\thelper.leftToRightVector3( vmd.motions[ i ].position );\r\n\t\thelper.leftToRightQuaternion( vmd.motions[ i ].rotation );\r\n\r\n\t}\r\n\r\n\tfor ( var i = 0; i < vmd.metadata.cameraCount; i++ ) {\r\n\r\n\t\thelper.leftToRightVector3( vmd.cameras[ i ].position );\r\n\t\thelper.leftToRightEuler( vmd.cameras[ i ].rotation );\r\n\r\n\t}\r\n\r\n};\r\n\r\nParser.prototype.leftToRightVpd = function ( vpd ) {\r\n\r\n\tif ( vpd.metadata.coordinateSystem === 'right' ) {\r\n\r\n\t\treturn;\r\n\r\n\t}\r\n\r\n\tvpd.metadata.coordinateSystem = 'right';\r\n\r\n\tvar helper = new DataCreationHelper();\r\n\r\n\tfor ( var i = 0; i < vpd.bones.length; i++ ) {\r\n\r\n\t\thelper.leftToRightVector3( vpd.bones[ i ].translation );\r\n\t\thelper.leftToRightQuaternion( vpd.bones[ i ].quaternion );\r\n\r\n\t}\r\n\r\n};\r\n\r\nvar MMDParser = {\r\n  CharsetEncoder: CharsetEncoder,\r\n  Parser: Parser\r\n};\r\n\r\nexport { MMDParser, CharsetEncoder, Parser };\r\n", "import { Quaternion, Vector3, Matrix4, Object3D, SphereGeometry, MeshBasicMaterial, Color, LineBasicMaterial, BufferGeometry, BufferAttribute, Mesh, Line } from \"three\";\r\nconst _q = /* @__PURE__ */ new Quaternion();\r\nconst _targetPos = /* @__PURE__ */ new Vector3();\r\nconst _targetVec = /* @__PURE__ */ new Vector3();\r\nconst _effectorPos = /* @__PURE__ */ new Vector3();\r\nconst _effectorVec = /* @__PURE__ */ new Vector3();\r\nconst _linkPos = /* @__PURE__ */ new Vector3();\r\nconst _invLinkQ = /* @__PURE__ */ new Quaternion();\r\nconst _linkScale = /* @__PURE__ */ new Vector3();\r\nconst _axis = /* @__PURE__ */ new Vector3();\r\nconst _vector = /* @__PURE__ */ new Vector3();\r\nconst _matrix = /* @__PURE__ */ new Matrix4();\r\nclass CCDIKSolver {\r\n  /**\r\n   * @param {THREE.SkinnedMesh} mesh\r\n   * @param {Array<Object>} iks\r\n   */\r\n  constructor(mesh, iks = []) {\r\n    this.mesh = mesh;\r\n    this.iks = iks;\r\n    this._valid();\r\n  }\r\n  /**\r\n   * Update all IK bones.\r\n   *\r\n   * @return {CCDIKSolver}\r\n   */\r\n  update() {\r\n    const iks = this.iks;\r\n    for (let i = 0, il = iks.length; i < il; i++) {\r\n      this.updateOne(iks[i]);\r\n    }\r\n    return this;\r\n  }\r\n  /**\r\n   * Update one IK bone\r\n   *\r\n   * @param {Object} ik parameter\r\n   * @return {CCDIKSolver}\r\n   */\r\n  updateOne(ik) {\r\n    const bones = this.mesh.skeleton.bones;\r\n    const math = Math;\r\n    const effector = bones[ik.effector];\r\n    const target = bones[ik.target];\r\n    _targetPos.setFromMatrixPosition(target.matrixWorld);\r\n    const links = ik.links;\r\n    const iteration = ik.iteration !== void 0 ? ik.iteration : 1;\r\n    for (let i = 0; i < iteration; i++) {\r\n      let rotated = false;\r\n      for (let j = 0, jl = links.length; j < jl; j++) {\r\n        const link = bones[links[j].index];\r\n        if (links[j].enabled === false)\r\n          break;\r\n        const limitation = links[j].limitation;\r\n        const rotationMin = links[j].rotationMin;\r\n        const rotationMax = links[j].rotationMax;\r\n        link.matrixWorld.decompose(_linkPos, _invLinkQ, _linkScale);\r\n        _invLinkQ.invert();\r\n        _effectorPos.setFromMatrixPosition(effector.matrixWorld);\r\n        _effectorVec.subVectors(_effectorPos, _linkPos);\r\n        _effectorVec.applyQuaternion(_invLinkQ);\r\n        _effectorVec.normalize();\r\n        _targetVec.subVectors(_targetPos, _linkPos);\r\n        _targetVec.applyQuaternion(_invLinkQ);\r\n        _targetVec.normalize();\r\n        let angle = _targetVec.dot(_effectorVec);\r\n        if (angle > 1) {\r\n          angle = 1;\r\n        } else if (angle < -1) {\r\n          angle = -1;\r\n        }\r\n        angle = math.acos(angle);\r\n        if (angle < 1e-5)\r\n          continue;\r\n        if (ik.minAngle !== void 0 && angle < ik.minAngle) {\r\n          angle = ik.minAngle;\r\n        }\r\n        if (ik.maxAngle !== void 0 && angle > ik.maxAngle) {\r\n          angle = ik.maxAngle;\r\n        }\r\n        _axis.crossVectors(_effectorVec, _targetVec);\r\n        _axis.normalize();\r\n        _q.setFromAxisAngle(_axis, angle);\r\n        link.quaternion.multiply(_q);\r\n        if (limitation !== void 0) {\r\n          let c = link.quaternion.w;\r\n          if (c > 1)\r\n            c = 1;\r\n          const c2 = math.sqrt(1 - c * c);\r\n          link.quaternion.set(limitation.x * c2, limitation.y * c2, limitation.z * c2, c);\r\n        }\r\n        if (rotationMin !== void 0) {\r\n          link.rotation.setFromVector3(_vector.setFromEuler(link.rotation).max(rotationMin));\r\n        }\r\n        if (rotationMax !== void 0) {\r\n          link.rotation.setFromVector3(_vector.setFromEuler(link.rotation).min(rotationMax));\r\n        }\r\n        link.updateMatrixWorld(true);\r\n        rotated = true;\r\n      }\r\n      if (!rotated)\r\n        break;\r\n    }\r\n    return this;\r\n  }\r\n  /**\r\n   * Creates Helper\r\n   *\r\n   * @return {CCDIKHelper}\r\n   */\r\n  createHelper() {\r\n    return new CCDIKHelper(this.mesh, this.iks);\r\n  }\r\n  // private methods\r\n  _valid() {\r\n    const iks = this.iks;\r\n    const bones = this.mesh.skeleton.bones;\r\n    for (let i = 0, il = iks.length; i < il; i++) {\r\n      const ik = iks[i];\r\n      const effector = bones[ik.effector];\r\n      const links = ik.links;\r\n      let link0, link1;\r\n      link0 = effector;\r\n      for (let j = 0, jl = links.length; j < jl; j++) {\r\n        link1 = bones[links[j].index];\r\n        if (link0.parent !== link1) {\r\n          console.warn(\"THREE.CCDIKSolver: bone \" + link0.name + \" is not the child of bone \" + link1.name);\r\n        }\r\n        link0 = link1;\r\n      }\r\n    }\r\n  }\r\n}\r\nfunction getPosition(bone, matrixWorldInv) {\r\n  return _vector.setFromMatrixPosition(bone.matrixWorld).applyMatrix4(matrixWorldInv);\r\n}\r\nfunction setPositionOfBoneToAttributeArray(array, index, bone, matrixWorldInv) {\r\n  const v = getPosition(bone, matrixWorldInv);\r\n  array[index * 3 + 0] = v.x;\r\n  array[index * 3 + 1] = v.y;\r\n  array[index * 3 + 2] = v.z;\r\n}\r\nclass CCDIKHelper extends Object3D {\r\n  constructor(mesh, iks = [], sphereSize = 0.25) {\r\n    super();\r\n    this.root = mesh;\r\n    this.iks = iks;\r\n    this.matrix.copy(mesh.matrixWorld);\r\n    this.matrixAutoUpdate = false;\r\n    this.sphereGeometry = new SphereGeometry(sphereSize, 16, 8);\r\n    this.targetSphereMaterial = new MeshBasicMaterial({\r\n      color: new Color(16746632),\r\n      depthTest: false,\r\n      depthWrite: false,\r\n      transparent: true\r\n    });\r\n    this.effectorSphereMaterial = new MeshBasicMaterial({\r\n      color: new Color(8978312),\r\n      depthTest: false,\r\n      depthWrite: false,\r\n      transparent: true\r\n    });\r\n    this.linkSphereMaterial = new MeshBasicMaterial({\r\n      color: new Color(8947967),\r\n      depthTest: false,\r\n      depthWrite: false,\r\n      transparent: true\r\n    });\r\n    this.lineMaterial = new LineBasicMaterial({\r\n      color: new Color(16711680),\r\n      depthTest: false,\r\n      depthWrite: false,\r\n      transparent: true\r\n    });\r\n    this._init();\r\n  }\r\n  /**\r\n   * Updates IK bones visualization.\r\n   */\r\n  updateMatrixWorld(force) {\r\n    const mesh = this.root;\r\n    if (this.visible) {\r\n      let offset = 0;\r\n      const iks = this.iks;\r\n      const bones = mesh.skeleton.bones;\r\n      _matrix.copy(mesh.matrixWorld).invert();\r\n      for (let i = 0, il = iks.length; i < il; i++) {\r\n        const ik = iks[i];\r\n        const targetBone = bones[ik.target];\r\n        const effectorBone = bones[ik.effector];\r\n        const targetMesh = this.children[offset++];\r\n        const effectorMesh = this.children[offset++];\r\n        targetMesh.position.copy(getPosition(targetBone, _matrix));\r\n        effectorMesh.position.copy(getPosition(effectorBone, _matrix));\r\n        for (let j = 0, jl = ik.links.length; j < jl; j++) {\r\n          const link = ik.links[j];\r\n          const linkBone = bones[link.index];\r\n          const linkMesh = this.children[offset++];\r\n          linkMesh.position.copy(getPosition(linkBone, _matrix));\r\n        }\r\n        const line = this.children[offset++];\r\n        const array = line.geometry.attributes.position.array;\r\n        setPositionOfBoneToAttributeArray(array, 0, targetBone, _matrix);\r\n        setPositionOfBoneToAttributeArray(array, 1, effectorBone, _matrix);\r\n        for (let j = 0, jl = ik.links.length; j < jl; j++) {\r\n          const link = ik.links[j];\r\n          const linkBone = bones[link.index];\r\n          setPositionOfBoneToAttributeArray(array, j + 2, linkBone, _matrix);\r\n        }\r\n        line.geometry.attributes.position.needsUpdate = true;\r\n      }\r\n    }\r\n    this.matrix.copy(mesh.matrixWorld);\r\n    super.updateMatrixWorld(force);\r\n  }\r\n  /**\r\n   * Frees the GPU-related resources allocated by this instance. Call this method whenever this instance is no longer used in your app.\r\n   */\r\n  dispose() {\r\n    this.sphereGeometry.dispose();\r\n    this.targetSphereMaterial.dispose();\r\n    this.effectorSphereMaterial.dispose();\r\n    this.linkSphereMaterial.dispose();\r\n    this.lineMaterial.dispose();\r\n    const children = this.children;\r\n    for (let i = 0; i < children.length; i++) {\r\n      const child = children[i];\r\n      if (child.isLine)\r\n        child.geometry.dispose();\r\n    }\r\n  }\r\n  // private method\r\n  _init() {\r\n    const scope = this;\r\n    const iks = this.iks;\r\n    function createLineGeometry(ik) {\r\n      const geometry = new BufferGeometry();\r\n      const vertices = new Float32Array((2 + ik.links.length) * 3);\r\n      geometry.setAttribute(\"position\", new BufferAttribute(vertices, 3));\r\n      return geometry;\r\n    }\r\n    function createTargetMesh() {\r\n      return new Mesh(scope.sphereGeometry, scope.targetSphereMaterial);\r\n    }\r\n    function createEffectorMesh() {\r\n      return new Mesh(scope.sphereGeometry, scope.effectorSphereMaterial);\r\n    }\r\n    function createLinkMesh() {\r\n      return new Mesh(scope.sphereGeometry, scope.linkSphereMaterial);\r\n    }\r\n    function createLine(ik) {\r\n      return new Line(createLineGeometry(ik), scope.lineMaterial);\r\n    }\r\n    for (let i = 0, il = iks.length; i < il; i++) {\r\n      const ik = iks[i];\r\n      this.add(createTargetMesh());\r\n      this.add(createEffectorMesh());\r\n      for (let j = 0, jl = ik.links.length; j < jl; j++) {\r\n        this.add(createLinkMesh());\r\n      }\r\n      this.add(createLine(ik));\r\n    }\r\n  }\r\n}\r\nexport {\r\n  CCDIKHelper,\r\n  CCDIKSolver\r\n};\r\n", "import { Vector3, Matrix4, Quaternion, Euler, Bone, Object3D, MeshBasicMaterial, Color, BoxGeometry, SphereGeometry, Mesh } from \"three\";\r\nimport { CapsuleGeometry } from \"../_polyfill/CapsuleGeometry.js\";\r\nclass MMDPhysics {\r\n  /**\r\n   * @param {THREE.SkinnedMesh} mesh\r\n   * @param {Array<Object>} rigidBodyParams\r\n   * @param {Array<Object>} (optional) constraintParams\r\n   * @param {Object} params - (optional)\r\n   * @param {Number} params.unitStep - Default is 1 / 65.\r\n   * @param {Integer} params.maxStepNum - Default is 3.\r\n   * @param {Vector3} params.gravity - Default is ( 0, - 9.8 * 10, 0 )\r\n   */\r\n  constructor(mesh, rigidBodyParams, constraintParams = [], params = {}) {\r\n    if (typeof Ammo === \"undefined\") {\r\n      throw new Error(\"THREE.MMDPhysics: Import ammo.js https://github.com/kripken/ammo.js\");\r\n    }\r\n    this.manager = new ResourceManager();\r\n    this.mesh = mesh;\r\n    this.unitStep = params.unitStep !== void 0 ? params.unitStep : 1 / 65;\r\n    this.maxStepNum = params.maxStepNum !== void 0 ? params.maxStepNum : 3;\r\n    this.gravity = new Vector3(0, -9.8 * 10, 0);\r\n    if (params.gravity !== void 0)\r\n      this.gravity.copy(params.gravity);\r\n    this.world = params.world !== void 0 ? params.world : null;\r\n    this.bodies = [];\r\n    this.constraints = [];\r\n    this._init(mesh, rigidBodyParams, constraintParams);\r\n  }\r\n  /**\r\n   * Advances Physics calculation and updates bones.\r\n   *\r\n   * @param {Number} delta - time in second\r\n   * @return {MMDPhysics}\r\n   */\r\n  update(delta) {\r\n    const manager = this.manager;\r\n    const mesh = this.mesh;\r\n    let isNonDefaultScale = false;\r\n    const position = manager.allocThreeVector3();\r\n    const quaternion = manager.allocThreeQuaternion();\r\n    const scale = manager.allocThreeVector3();\r\n    mesh.matrixWorld.decompose(position, quaternion, scale);\r\n    if (scale.x !== 1 || scale.y !== 1 || scale.z !== 1) {\r\n      isNonDefaultScale = true;\r\n    }\r\n    let parent;\r\n    if (isNonDefaultScale) {\r\n      parent = mesh.parent;\r\n      if (parent !== null)\r\n        mesh.parent = null;\r\n      scale.copy(this.mesh.scale);\r\n      mesh.scale.set(1, 1, 1);\r\n      mesh.updateMatrixWorld(true);\r\n    }\r\n    this._updateRigidBodies();\r\n    this._stepSimulation(delta);\r\n    this._updateBones();\r\n    if (isNonDefaultScale) {\r\n      if (parent !== null)\r\n        mesh.parent = parent;\r\n      mesh.scale.copy(scale);\r\n    }\r\n    manager.freeThreeVector3(scale);\r\n    manager.freeThreeQuaternion(quaternion);\r\n    manager.freeThreeVector3(position);\r\n    return this;\r\n  }\r\n  /**\r\n   * Resets rigid bodies transorm to current bone's.\r\n   *\r\n   * @return {MMDPhysics}\r\n   */\r\n  reset() {\r\n    for (let i = 0, il = this.bodies.length; i < il; i++) {\r\n      this.bodies[i].reset();\r\n    }\r\n    return this;\r\n  }\r\n  /**\r\n   * Warm ups Rigid bodies. Calculates cycles steps.\r\n   *\r\n   * @param {Integer} cycles\r\n   * @return {MMDPhysics}\r\n   */\r\n  warmup(cycles) {\r\n    for (let i = 0; i < cycles; i++) {\r\n      this.update(1 / 60);\r\n    }\r\n    return this;\r\n  }\r\n  /**\r\n   * Sets gravity.\r\n   *\r\n   * @param {Vector3} gravity\r\n   * @return {MMDPhysicsHelper}\r\n   */\r\n  setGravity(gravity) {\r\n    this.world.setGravity(new Ammo.btVector3(gravity.x, gravity.y, gravity.z));\r\n    this.gravity.copy(gravity);\r\n    return this;\r\n  }\r\n  /**\r\n   * Creates MMDPhysicsHelper\r\n   *\r\n   * @return {MMDPhysicsHelper}\r\n   */\r\n  createHelper() {\r\n    return new MMDPhysicsHelper(this.mesh, this);\r\n  }\r\n  // private methods\r\n  _init(mesh, rigidBodyParams, constraintParams) {\r\n    const manager = this.manager;\r\n    const parent = mesh.parent;\r\n    if (parent !== null)\r\n      mesh.parent = null;\r\n    const currentPosition = manager.allocThreeVector3();\r\n    const currentQuaternion = manager.allocThreeQuaternion();\r\n    const currentScale = manager.allocThreeVector3();\r\n    currentPosition.copy(mesh.position);\r\n    currentQuaternion.copy(mesh.quaternion);\r\n    currentScale.copy(mesh.scale);\r\n    mesh.position.set(0, 0, 0);\r\n    mesh.quaternion.set(0, 0, 0, 1);\r\n    mesh.scale.set(1, 1, 1);\r\n    mesh.updateMatrixWorld(true);\r\n    if (this.world === null) {\r\n      this.world = this._createWorld();\r\n      this.setGravity(this.gravity);\r\n    }\r\n    this._initRigidBodies(rigidBodyParams);\r\n    this._initConstraints(constraintParams);\r\n    if (parent !== null)\r\n      mesh.parent = parent;\r\n    mesh.position.copy(currentPosition);\r\n    mesh.quaternion.copy(currentQuaternion);\r\n    mesh.scale.copy(currentScale);\r\n    mesh.updateMatrixWorld(true);\r\n    this.reset();\r\n    manager.freeThreeVector3(currentPosition);\r\n    manager.freeThreeQuaternion(currentQuaternion);\r\n    manager.freeThreeVector3(currentScale);\r\n  }\r\n  _createWorld() {\r\n    const config = new Ammo.btDefaultCollisionConfiguration();\r\n    const dispatcher = new Ammo.btCollisionDispatcher(config);\r\n    const cache = new Ammo.btDbvtBroadphase();\r\n    const solver = new Ammo.btSequentialImpulseConstraintSolver();\r\n    const world = new Ammo.btDiscreteDynamicsWorld(dispatcher, cache, solver, config);\r\n    return world;\r\n  }\r\n  _initRigidBodies(rigidBodies) {\r\n    for (let i = 0, il = rigidBodies.length; i < il; i++) {\r\n      this.bodies.push(new RigidBody(this.mesh, this.world, rigidBodies[i], this.manager));\r\n    }\r\n  }\r\n  _initConstraints(constraints) {\r\n    for (let i = 0, il = constraints.length; i < il; i++) {\r\n      const params = constraints[i];\r\n      const bodyA = this.bodies[params.rigidBodyIndex1];\r\n      const bodyB = this.bodies[params.rigidBodyIndex2];\r\n      this.constraints.push(new Constraint(this.mesh, this.world, bodyA, bodyB, params, this.manager));\r\n    }\r\n  }\r\n  _stepSimulation(delta) {\r\n    const unitStep = this.unitStep;\r\n    let stepTime = delta;\r\n    let maxStepNum = (delta / unitStep | 0) + 1;\r\n    if (stepTime < unitStep) {\r\n      stepTime = unitStep;\r\n      maxStepNum = 1;\r\n    }\r\n    if (maxStepNum > this.maxStepNum) {\r\n      maxStepNum = this.maxStepNum;\r\n    }\r\n    this.world.stepSimulation(stepTime, maxStepNum, unitStep);\r\n  }\r\n  _updateRigidBodies() {\r\n    for (let i = 0, il = this.bodies.length; i < il; i++) {\r\n      this.bodies[i].updateFromBone();\r\n    }\r\n  }\r\n  _updateBones() {\r\n    for (let i = 0, il = this.bodies.length; i < il; i++) {\r\n      this.bodies[i].updateBone();\r\n    }\r\n  }\r\n}\r\nclass ResourceManager {\r\n  constructor() {\r\n    this.threeVector3s = [];\r\n    this.threeMatrix4s = [];\r\n    this.threeQuaternions = [];\r\n    this.threeEulers = [];\r\n    this.transforms = [];\r\n    this.quaternions = [];\r\n    this.vector3s = [];\r\n  }\r\n  allocThreeVector3() {\r\n    return this.threeVector3s.length > 0 ? this.threeVector3s.pop() : new Vector3();\r\n  }\r\n  freeThreeVector3(v) {\r\n    this.threeVector3s.push(v);\r\n  }\r\n  allocThreeMatrix4() {\r\n    return this.threeMatrix4s.length > 0 ? this.threeMatrix4s.pop() : new Matrix4();\r\n  }\r\n  freeThreeMatrix4(m) {\r\n    this.threeMatrix4s.push(m);\r\n  }\r\n  allocThreeQuaternion() {\r\n    return this.threeQuaternions.length > 0 ? this.threeQuaternions.pop() : new Quaternion();\r\n  }\r\n  freeThreeQuaternion(q) {\r\n    this.threeQuaternions.push(q);\r\n  }\r\n  allocThreeEuler() {\r\n    return this.threeEulers.length > 0 ? this.threeEulers.pop() : new Euler();\r\n  }\r\n  freeThreeEuler(e) {\r\n    this.threeEulers.push(e);\r\n  }\r\n  allocTransform() {\r\n    return this.transforms.length > 0 ? this.transforms.pop() : new Ammo.btTransform();\r\n  }\r\n  freeTransform(t) {\r\n    this.transforms.push(t);\r\n  }\r\n  allocQuaternion() {\r\n    return this.quaternions.length > 0 ? this.quaternions.pop() : new Ammo.btQuaternion();\r\n  }\r\n  freeQuaternion(q) {\r\n    this.quaternions.push(q);\r\n  }\r\n  allocVector3() {\r\n    return this.vector3s.length > 0 ? this.vector3s.pop() : new Ammo.btVector3();\r\n  }\r\n  freeVector3(v) {\r\n    this.vector3s.push(v);\r\n  }\r\n  setIdentity(t) {\r\n    t.setIdentity();\r\n  }\r\n  getBasis(t) {\r\n    var q = this.allocQuaternion();\r\n    t.getBasis().getRotation(q);\r\n    return q;\r\n  }\r\n  getBasisAsMatrix3(t) {\r\n    var q = this.getBasis(t);\r\n    var m = this.quaternionToMatrix3(q);\r\n    this.freeQuaternion(q);\r\n    return m;\r\n  }\r\n  getOrigin(t) {\r\n    return t.getOrigin();\r\n  }\r\n  setOrigin(t, v) {\r\n    t.getOrigin().setValue(v.x(), v.y(), v.z());\r\n  }\r\n  copyOrigin(t1, t2) {\r\n    var o = t2.getOrigin();\r\n    this.setOrigin(t1, o);\r\n  }\r\n  setBasis(t, q) {\r\n    t.setRotation(q);\r\n  }\r\n  setBasisFromMatrix3(t, m) {\r\n    var q = this.matrix3ToQuaternion(m);\r\n    this.setBasis(t, q);\r\n    this.freeQuaternion(q);\r\n  }\r\n  setOriginFromArray3(t, a) {\r\n    t.getOrigin().setValue(a[0], a[1], a[2]);\r\n  }\r\n  setOriginFromThreeVector3(t, v) {\r\n    t.getOrigin().setValue(v.x, v.y, v.z);\r\n  }\r\n  setBasisFromArray3(t, a) {\r\n    var thQ = this.allocThreeQuaternion();\r\n    var thE = this.allocThreeEuler();\r\n    thE.set(a[0], a[1], a[2]);\r\n    this.setBasisFromThreeQuaternion(t, thQ.setFromEuler(thE));\r\n    this.freeThreeEuler(thE);\r\n    this.freeThreeQuaternion(thQ);\r\n  }\r\n  setBasisFromThreeQuaternion(t, a) {\r\n    var q = this.allocQuaternion();\r\n    q.setX(a.x);\r\n    q.setY(a.y);\r\n    q.setZ(a.z);\r\n    q.setW(a.w);\r\n    this.setBasis(t, q);\r\n    this.freeQuaternion(q);\r\n  }\r\n  multiplyTransforms(t1, t2) {\r\n    var t = this.allocTransform();\r\n    this.setIdentity(t);\r\n    var m1 = this.getBasisAsMatrix3(t1);\r\n    var m2 = this.getBasisAsMatrix3(t2);\r\n    var o1 = this.getOrigin(t1);\r\n    var o2 = this.getOrigin(t2);\r\n    var v1 = this.multiplyMatrix3ByVector3(m1, o2);\r\n    var v2 = this.addVector3(v1, o1);\r\n    this.setOrigin(t, v2);\r\n    var m3 = this.multiplyMatrices3(m1, m2);\r\n    this.setBasisFromMatrix3(t, m3);\r\n    this.freeVector3(v1);\r\n    this.freeVector3(v2);\r\n    return t;\r\n  }\r\n  inverseTransform(t) {\r\n    var t2 = this.allocTransform();\r\n    var m1 = this.getBasisAsMatrix3(t);\r\n    var o = this.getOrigin(t);\r\n    var m2 = this.transposeMatrix3(m1);\r\n    var v1 = this.negativeVector3(o);\r\n    var v2 = this.multiplyMatrix3ByVector3(m2, v1);\r\n    this.setOrigin(t2, v2);\r\n    this.setBasisFromMatrix3(t2, m2);\r\n    this.freeVector3(v1);\r\n    this.freeVector3(v2);\r\n    return t2;\r\n  }\r\n  multiplyMatrices3(m1, m2) {\r\n    var m3 = [];\r\n    var v10 = this.rowOfMatrix3(m1, 0);\r\n    var v11 = this.rowOfMatrix3(m1, 1);\r\n    var v12 = this.rowOfMatrix3(m1, 2);\r\n    var v20 = this.columnOfMatrix3(m2, 0);\r\n    var v21 = this.columnOfMatrix3(m2, 1);\r\n    var v22 = this.columnOfMatrix3(m2, 2);\r\n    m3[0] = this.dotVectors3(v10, v20);\r\n    m3[1] = this.dotVectors3(v10, v21);\r\n    m3[2] = this.dotVectors3(v10, v22);\r\n    m3[3] = this.dotVectors3(v11, v20);\r\n    m3[4] = this.dotVectors3(v11, v21);\r\n    m3[5] = this.dotVectors3(v11, v22);\r\n    m3[6] = this.dotVectors3(v12, v20);\r\n    m3[7] = this.dotVectors3(v12, v21);\r\n    m3[8] = this.dotVectors3(v12, v22);\r\n    this.freeVector3(v10);\r\n    this.freeVector3(v11);\r\n    this.freeVector3(v12);\r\n    this.freeVector3(v20);\r\n    this.freeVector3(v21);\r\n    this.freeVector3(v22);\r\n    return m3;\r\n  }\r\n  addVector3(v1, v2) {\r\n    var v = this.allocVector3();\r\n    v.setValue(v1.x() + v2.x(), v1.y() + v2.y(), v1.z() + v2.z());\r\n    return v;\r\n  }\r\n  dotVectors3(v1, v2) {\r\n    return v1.x() * v2.x() + v1.y() * v2.y() + v1.z() * v2.z();\r\n  }\r\n  rowOfMatrix3(m, i) {\r\n    var v = this.allocVector3();\r\n    v.setValue(m[i * 3 + 0], m[i * 3 + 1], m[i * 3 + 2]);\r\n    return v;\r\n  }\r\n  columnOfMatrix3(m, i) {\r\n    var v = this.allocVector3();\r\n    v.setValue(m[i + 0], m[i + 3], m[i + 6]);\r\n    return v;\r\n  }\r\n  negativeVector3(v) {\r\n    var v2 = this.allocVector3();\r\n    v2.setValue(-v.x(), -v.y(), -v.z());\r\n    return v2;\r\n  }\r\n  multiplyMatrix3ByVector3(m, v) {\r\n    var v4 = this.allocVector3();\r\n    var v0 = this.rowOfMatrix3(m, 0);\r\n    var v1 = this.rowOfMatrix3(m, 1);\r\n    var v2 = this.rowOfMatrix3(m, 2);\r\n    var x = this.dotVectors3(v0, v);\r\n    var y = this.dotVectors3(v1, v);\r\n    var z = this.dotVectors3(v2, v);\r\n    v4.setValue(x, y, z);\r\n    this.freeVector3(v0);\r\n    this.freeVector3(v1);\r\n    this.freeVector3(v2);\r\n    return v4;\r\n  }\r\n  transposeMatrix3(m) {\r\n    var m2 = [];\r\n    m2[0] = m[0];\r\n    m2[1] = m[3];\r\n    m2[2] = m[6];\r\n    m2[3] = m[1];\r\n    m2[4] = m[4];\r\n    m2[5] = m[7];\r\n    m2[6] = m[2];\r\n    m2[7] = m[5];\r\n    m2[8] = m[8];\r\n    return m2;\r\n  }\r\n  quaternionToMatrix3(q) {\r\n    var m = [];\r\n    var x = q.x();\r\n    var y = q.y();\r\n    var z = q.z();\r\n    var w = q.w();\r\n    var xx = x * x;\r\n    var yy = y * y;\r\n    var zz = z * z;\r\n    var xy = x * y;\r\n    var yz = y * z;\r\n    var zx = z * x;\r\n    var xw = x * w;\r\n    var yw = y * w;\r\n    var zw = z * w;\r\n    m[0] = 1 - 2 * (yy + zz);\r\n    m[1] = 2 * (xy - zw);\r\n    m[2] = 2 * (zx + yw);\r\n    m[3] = 2 * (xy + zw);\r\n    m[4] = 1 - 2 * (zz + xx);\r\n    m[5] = 2 * (yz - xw);\r\n    m[6] = 2 * (zx - yw);\r\n    m[7] = 2 * (yz + xw);\r\n    m[8] = 1 - 2 * (xx + yy);\r\n    return m;\r\n  }\r\n  matrix3ToQuaternion(m) {\r\n    var t = m[0] + m[4] + m[8];\r\n    var s, x, y, z, w;\r\n    if (t > 0) {\r\n      s = Math.sqrt(t + 1) * 2;\r\n      w = 0.25 * s;\r\n      x = (m[7] - m[5]) / s;\r\n      y = (m[2] - m[6]) / s;\r\n      z = (m[3] - m[1]) / s;\r\n    } else if (m[0] > m[4] && m[0] > m[8]) {\r\n      s = Math.sqrt(1 + m[0] - m[4] - m[8]) * 2;\r\n      w = (m[7] - m[5]) / s;\r\n      x = 0.25 * s;\r\n      y = (m[1] + m[3]) / s;\r\n      z = (m[2] + m[6]) / s;\r\n    } else if (m[4] > m[8]) {\r\n      s = Math.sqrt(1 + m[4] - m[0] - m[8]) * 2;\r\n      w = (m[2] - m[6]) / s;\r\n      x = (m[1] + m[3]) / s;\r\n      y = 0.25 * s;\r\n      z = (m[5] + m[7]) / s;\r\n    } else {\r\n      s = Math.sqrt(1 + m[8] - m[0] - m[4]) * 2;\r\n      w = (m[3] - m[1]) / s;\r\n      x = (m[2] + m[6]) / s;\r\n      y = (m[5] + m[7]) / s;\r\n      z = 0.25 * s;\r\n    }\r\n    var q = this.allocQuaternion();\r\n    q.setX(x);\r\n    q.setY(y);\r\n    q.setZ(z);\r\n    q.setW(w);\r\n    return q;\r\n  }\r\n}\r\nclass RigidBody {\r\n  constructor(mesh, world, params, manager) {\r\n    this.mesh = mesh;\r\n    this.world = world;\r\n    this.params = params;\r\n    this.manager = manager;\r\n    this.body = null;\r\n    this.bone = null;\r\n    this.boneOffsetForm = null;\r\n    this.boneOffsetFormInverse = null;\r\n    this._init();\r\n  }\r\n  /**\r\n   * Resets rigid body transform to the current bone's.\r\n   *\r\n   * @return {RigidBody}\r\n   */\r\n  reset() {\r\n    this._setTransformFromBone();\r\n    return this;\r\n  }\r\n  /**\r\n   * Updates rigid body's transform from the current bone.\r\n   *\r\n   * @return {RidigBody}\r\n   */\r\n  updateFromBone() {\r\n    if (this.params.boneIndex !== -1 && this.params.type === 0) {\r\n      this._setTransformFromBone();\r\n    }\r\n    return this;\r\n  }\r\n  /**\r\n   * Updates bone from the current ridid body's transform.\r\n   *\r\n   * @return {RidigBody}\r\n   */\r\n  updateBone() {\r\n    if (this.params.type === 0 || this.params.boneIndex === -1) {\r\n      return this;\r\n    }\r\n    this._updateBoneRotation();\r\n    if (this.params.type === 1) {\r\n      this._updateBonePosition();\r\n    }\r\n    this.bone.updateMatrixWorld(true);\r\n    if (this.params.type === 2) {\r\n      this._setPositionFromBone();\r\n    }\r\n    return this;\r\n  }\r\n  // private methods\r\n  _init() {\r\n    function generateShape(p) {\r\n      switch (p.shapeType) {\r\n        case 0:\r\n          return new Ammo.btSphereShape(p.width);\r\n        case 1:\r\n          return new Ammo.btBoxShape(new Ammo.btVector3(p.width, p.height, p.depth));\r\n        case 2:\r\n          return new Ammo.btCapsuleShape(p.width, p.height);\r\n        default:\r\n          throw new Error(\"unknown shape type \" + p.shapeType);\r\n      }\r\n    }\r\n    const manager = this.manager;\r\n    const params = this.params;\r\n    const bones = this.mesh.skeleton.bones;\r\n    const bone = params.boneIndex === -1 ? new Bone() : bones[params.boneIndex];\r\n    const shape = generateShape(params);\r\n    const weight = params.type === 0 ? 0 : params.weight;\r\n    const localInertia = manager.allocVector3();\r\n    localInertia.setValue(0, 0, 0);\r\n    if (weight !== 0) {\r\n      shape.calculateLocalInertia(weight, localInertia);\r\n    }\r\n    const boneOffsetForm = manager.allocTransform();\r\n    manager.setIdentity(boneOffsetForm);\r\n    manager.setOriginFromArray3(boneOffsetForm, params.position);\r\n    manager.setBasisFromArray3(boneOffsetForm, params.rotation);\r\n    const vector = manager.allocThreeVector3();\r\n    const boneForm = manager.allocTransform();\r\n    manager.setIdentity(boneForm);\r\n    manager.setOriginFromThreeVector3(boneForm, bone.getWorldPosition(vector));\r\n    const form = manager.multiplyTransforms(boneForm, boneOffsetForm);\r\n    const state = new Ammo.btDefaultMotionState(form);\r\n    const info = new Ammo.btRigidBodyConstructionInfo(weight, state, shape, localInertia);\r\n    info.set_m_friction(params.friction);\r\n    info.set_m_restitution(params.restitution);\r\n    const body = new Ammo.btRigidBody(info);\r\n    if (params.type === 0) {\r\n      body.setCollisionFlags(body.getCollisionFlags() | 2);\r\n      body.setActivationState(4);\r\n    }\r\n    body.setDamping(params.positionDamping, params.rotationDamping);\r\n    body.setSleepingThresholds(0, 0);\r\n    this.world.addRigidBody(body, 1 << params.groupIndex, params.groupTarget);\r\n    this.body = body;\r\n    this.bone = bone;\r\n    this.boneOffsetForm = boneOffsetForm;\r\n    this.boneOffsetFormInverse = manager.inverseTransform(boneOffsetForm);\r\n    manager.freeVector3(localInertia);\r\n    manager.freeTransform(form);\r\n    manager.freeTransform(boneForm);\r\n    manager.freeThreeVector3(vector);\r\n  }\r\n  _getBoneTransform() {\r\n    const manager = this.manager;\r\n    const p = manager.allocThreeVector3();\r\n    const q = manager.allocThreeQuaternion();\r\n    const s = manager.allocThreeVector3();\r\n    this.bone.matrixWorld.decompose(p, q, s);\r\n    const tr = manager.allocTransform();\r\n    manager.setOriginFromThreeVector3(tr, p);\r\n    manager.setBasisFromThreeQuaternion(tr, q);\r\n    const form = manager.multiplyTransforms(tr, this.boneOffsetForm);\r\n    manager.freeTransform(tr);\r\n    manager.freeThreeVector3(s);\r\n    manager.freeThreeQuaternion(q);\r\n    manager.freeThreeVector3(p);\r\n    return form;\r\n  }\r\n  _getWorldTransformForBone() {\r\n    const manager = this.manager;\r\n    const tr = this.body.getCenterOfMassTransform();\r\n    return manager.multiplyTransforms(tr, this.boneOffsetFormInverse);\r\n  }\r\n  _setTransformFromBone() {\r\n    const manager = this.manager;\r\n    const form = this._getBoneTransform();\r\n    this.body.setCenterOfMassTransform(form);\r\n    this.body.getMotionState().setWorldTransform(form);\r\n    manager.freeTransform(form);\r\n  }\r\n  _setPositionFromBone() {\r\n    const manager = this.manager;\r\n    const form = this._getBoneTransform();\r\n    const tr = manager.allocTransform();\r\n    this.body.getMotionState().getWorldTransform(tr);\r\n    manager.copyOrigin(tr, form);\r\n    this.body.setCenterOfMassTransform(tr);\r\n    this.body.getMotionState().setWorldTransform(tr);\r\n    manager.freeTransform(tr);\r\n    manager.freeTransform(form);\r\n  }\r\n  _updateBoneRotation() {\r\n    const manager = this.manager;\r\n    const tr = this._getWorldTransformForBone();\r\n    const q = manager.getBasis(tr);\r\n    const thQ = manager.allocThreeQuaternion();\r\n    const thQ2 = manager.allocThreeQuaternion();\r\n    const thQ3 = manager.allocThreeQuaternion();\r\n    thQ.set(q.x(), q.y(), q.z(), q.w());\r\n    thQ2.setFromRotationMatrix(this.bone.matrixWorld);\r\n    thQ2.conjugate();\r\n    thQ2.multiply(thQ);\r\n    thQ3.setFromRotationMatrix(this.bone.matrix);\r\n    this.bone.quaternion.copy(thQ2.multiply(thQ3).normalize());\r\n    manager.freeThreeQuaternion(thQ);\r\n    manager.freeThreeQuaternion(thQ2);\r\n    manager.freeThreeQuaternion(thQ3);\r\n    manager.freeQuaternion(q);\r\n    manager.freeTransform(tr);\r\n  }\r\n  _updateBonePosition() {\r\n    const manager = this.manager;\r\n    const tr = this._getWorldTransformForBone();\r\n    const thV = manager.allocThreeVector3();\r\n    const o = manager.getOrigin(tr);\r\n    thV.set(o.x(), o.y(), o.z());\r\n    if (this.bone.parent) {\r\n      this.bone.parent.worldToLocal(thV);\r\n    }\r\n    this.bone.position.copy(thV);\r\n    manager.freeThreeVector3(thV);\r\n    manager.freeTransform(tr);\r\n  }\r\n}\r\nclass Constraint {\r\n  /**\r\n   * @param {THREE.SkinnedMesh} mesh\r\n   * @param {Ammo.btDiscreteDynamicsWorld} world\r\n   * @param {RigidBody} bodyA\r\n   * @param {RigidBody} bodyB\r\n   * @param {Object} params\r\n   * @param {ResourceManager} manager\r\n   */\r\n  constructor(mesh, world, bodyA, bodyB, params, manager) {\r\n    this.mesh = mesh;\r\n    this.world = world;\r\n    this.bodyA = bodyA;\r\n    this.bodyB = bodyB;\r\n    this.params = params;\r\n    this.manager = manager;\r\n    this.constraint = null;\r\n    this._init();\r\n  }\r\n  // private method\r\n  _init() {\r\n    const manager = this.manager;\r\n    const params = this.params;\r\n    const bodyA = this.bodyA;\r\n    const bodyB = this.bodyB;\r\n    const form = manager.allocTransform();\r\n    manager.setIdentity(form);\r\n    manager.setOriginFromArray3(form, params.position);\r\n    manager.setBasisFromArray3(form, params.rotation);\r\n    const formA = manager.allocTransform();\r\n    const formB = manager.allocTransform();\r\n    bodyA.body.getMotionState().getWorldTransform(formA);\r\n    bodyB.body.getMotionState().getWorldTransform(formB);\r\n    const formInverseA = manager.inverseTransform(formA);\r\n    const formInverseB = manager.inverseTransform(formB);\r\n    const formA2 = manager.multiplyTransforms(formInverseA, form);\r\n    const formB2 = manager.multiplyTransforms(formInverseB, form);\r\n    const constraint = new Ammo.btGeneric6DofSpringConstraint(bodyA.body, bodyB.body, formA2, formB2, true);\r\n    const lll = manager.allocVector3();\r\n    const lul = manager.allocVector3();\r\n    const all = manager.allocVector3();\r\n    const aul = manager.allocVector3();\r\n    lll.setValue(params.translationLimitation1[0], params.translationLimitation1[1], params.translationLimitation1[2]);\r\n    lul.setValue(params.translationLimitation2[0], params.translationLimitation2[1], params.translationLimitation2[2]);\r\n    all.setValue(params.rotationLimitation1[0], params.rotationLimitation1[1], params.rotationLimitation1[2]);\r\n    aul.setValue(params.rotationLimitation2[0], params.rotationLimitation2[1], params.rotationLimitation2[2]);\r\n    constraint.setLinearLowerLimit(lll);\r\n    constraint.setLinearUpperLimit(lul);\r\n    constraint.setAngularLowerLimit(all);\r\n    constraint.setAngularUpperLimit(aul);\r\n    for (let i = 0; i < 3; i++) {\r\n      if (params.springPosition[i] !== 0) {\r\n        constraint.enableSpring(i, true);\r\n        constraint.setStiffness(i, params.springPosition[i]);\r\n      }\r\n    }\r\n    for (let i = 0; i < 3; i++) {\r\n      if (params.springRotation[i] !== 0) {\r\n        constraint.enableSpring(i + 3, true);\r\n        constraint.setStiffness(i + 3, params.springRotation[i]);\r\n      }\r\n    }\r\n    if (constraint.setParam !== void 0) {\r\n      for (let i = 0; i < 6; i++) {\r\n        constraint.setParam(2, 0.475, i);\r\n      }\r\n    }\r\n    this.world.addConstraint(constraint, true);\r\n    this.constraint = constraint;\r\n    manager.freeTransform(form);\r\n    manager.freeTransform(formA);\r\n    manager.freeTransform(formB);\r\n    manager.freeTransform(formInverseA);\r\n    manager.freeTransform(formInverseB);\r\n    manager.freeTransform(formA2);\r\n    manager.freeTransform(formB2);\r\n    manager.freeVector3(lll);\r\n    manager.freeVector3(lul);\r\n    manager.freeVector3(all);\r\n    manager.freeVector3(aul);\r\n  }\r\n}\r\nconst _position = /* @__PURE__ */ new Vector3();\r\nconst _quaternion = /* @__PURE__ */ new Quaternion();\r\nconst _scale = /* @__PURE__ */ new Vector3();\r\nconst _matrixWorldInv = /* @__PURE__ */ new Matrix4();\r\nclass MMDPhysicsHelper extends Object3D {\r\n  /**\r\n   * Visualize Rigid bodies\r\n   *\r\n   * @param {THREE.SkinnedMesh} mesh\r\n   * @param {Physics} physics\r\n   */\r\n  constructor(mesh, physics) {\r\n    super();\r\n    this.root = mesh;\r\n    this.physics = physics;\r\n    this.matrix.copy(mesh.matrixWorld);\r\n    this.matrixAutoUpdate = false;\r\n    this.materials = [];\r\n    this.materials.push(\r\n      new MeshBasicMaterial({\r\n        color: new Color(16746632),\r\n        wireframe: true,\r\n        depthTest: false,\r\n        depthWrite: false,\r\n        opacity: 0.25,\r\n        transparent: true\r\n      })\r\n    );\r\n    this.materials.push(\r\n      new MeshBasicMaterial({\r\n        color: new Color(8978312),\r\n        wireframe: true,\r\n        depthTest: false,\r\n        depthWrite: false,\r\n        opacity: 0.25,\r\n        transparent: true\r\n      })\r\n    );\r\n    this.materials.push(\r\n      new MeshBasicMaterial({\r\n        color: new Color(8947967),\r\n        wireframe: true,\r\n        depthTest: false,\r\n        depthWrite: false,\r\n        opacity: 0.25,\r\n        transparent: true\r\n      })\r\n    );\r\n    this._init();\r\n  }\r\n  /**\r\n   * Frees the GPU-related resources allocated by this instance. Call this method whenever this instance is no longer used in your app.\r\n   */\r\n  dispose() {\r\n    const materials = this.materials;\r\n    const children = this.children;\r\n    for (let i = 0; i < materials.length; i++) {\r\n      materials[i].dispose();\r\n    }\r\n    for (let i = 0; i < children.length; i++) {\r\n      const child = children[i];\r\n      if (child.isMesh)\r\n        child.geometry.dispose();\r\n    }\r\n  }\r\n  /**\r\n   * Updates Rigid Bodies visualization.\r\n   */\r\n  updateMatrixWorld(force) {\r\n    var mesh = this.root;\r\n    if (this.visible) {\r\n      var bodies = this.physics.bodies;\r\n      _matrixWorldInv.copy(mesh.matrixWorld).decompose(_position, _quaternion, _scale).compose(_position, _quaternion, _scale.set(1, 1, 1)).invert();\r\n      for (var i = 0, il = bodies.length; i < il; i++) {\r\n        var body = bodies[i].body;\r\n        var child = this.children[i];\r\n        var tr = body.getCenterOfMassTransform();\r\n        var origin = tr.getOrigin();\r\n        var rotation = tr.getRotation();\r\n        child.position.set(origin.x(), origin.y(), origin.z()).applyMatrix4(_matrixWorldInv);\r\n        child.quaternion.setFromRotationMatrix(_matrixWorldInv).multiply(_quaternion.set(rotation.x(), rotation.y(), rotation.z(), rotation.w()));\r\n      }\r\n    }\r\n    this.matrix.copy(mesh.matrixWorld).decompose(_position, _quaternion, _scale).compose(_position, _quaternion, _scale.set(1, 1, 1));\r\n    super.updateMatrixWorld(force);\r\n  }\r\n  // private method\r\n  _init() {\r\n    var bodies = this.physics.bodies;\r\n    function createGeometry(param2) {\r\n      switch (param2.shapeType) {\r\n        case 0:\r\n          return new SphereGeometry(param2.width, 16, 8);\r\n        case 1:\r\n          return new BoxGeometry(param2.width * 2, param2.height * 2, param2.depth * 2, 8, 8, 8);\r\n        case 2:\r\n          return new CapsuleGeometry(param2.width, param2.height, 8, 16);\r\n        default:\r\n          return null;\r\n      }\r\n    }\r\n    for (var i = 0, il = bodies.length; i < il; i++) {\r\n      var param = bodies[i].params;\r\n      this.add(new Mesh(createGeometry(param), this.materials[param.type]));\r\n    }\r\n  }\r\n}\r\nexport {\r\n  MMDPhysics\r\n};\r\n", "import { Object3D, Vector3, Quaternion, AnimationMixer } from \"three\";\r\nimport { CCDIKSolver } from \"./CCDIKSolver.js\";\r\nimport { MMDPhysics } from \"./MMDPhysics.js\";\r\nclass MMDAnimationHelper {\r\n  /**\r\n   * @param {Object} params - (optional)\r\n   * @param {boolean} params.sync - Whether animation durations of added objects are synched. Default is true.\r\n   * @param {Number} params.afterglow - Default is 0.0.\r\n   * @param {boolean} params.resetPhysicsOnLoop - Default is true.\r\n   */\r\n  constructor(params = {}) {\r\n    this.meshes = [];\r\n    this.camera = null;\r\n    this.cameraTarget = new Object3D();\r\n    this.cameraTarget.name = \"target\";\r\n    this.audio = null;\r\n    this.audioManager = null;\r\n    this.objects = /* @__PURE__ */ new WeakMap();\r\n    this.configuration = {\r\n      sync: params.sync !== void 0 ? params.sync : true,\r\n      afterglow: params.afterglow !== void 0 ? params.afterglow : 0,\r\n      resetPhysicsOnLoop: params.resetPhysicsOnLoop !== void 0 ? params.resetPhysicsOnLoop : true,\r\n      pmxAnimation: params.pmxAnimation !== void 0 ? params.pmxAnimation : false\r\n    };\r\n    this.enabled = {\r\n      animation: true,\r\n      ik: true,\r\n      grant: true,\r\n      physics: true,\r\n      cameraAnimation: true\r\n    };\r\n    this.onBeforePhysics = function() {\r\n    };\r\n    this.sharedPhysics = false;\r\n    this.masterPhysics = null;\r\n  }\r\n  /**\r\n   * Adds an Three.js Object to helper and setups animation.\r\n   * The anmation durations of added objects are synched\r\n   * if this.configuration.sync is true.\r\n   *\r\n   * @param {THREE.SkinnedMesh|THREE.Camera|THREE.Audio} object\r\n   * @param {Object} params - (optional)\r\n   * @param {THREE.AnimationClip|Array<THREE.AnimationClip>} params.animation - Only for THREE.SkinnedMesh and THREE.Camera. Default is undefined.\r\n   * @param {boolean} params.physics - Only for THREE.SkinnedMesh. Default is true.\r\n   * @param {Integer} params.warmup - Only for THREE.SkinnedMesh and physics is true. Default is 60.\r\n   * @param {Number} params.unitStep - Only for THREE.SkinnedMesh and physics is true. Default is 1 / 65.\r\n   * @param {Integer} params.maxStepNum - Only for THREE.SkinnedMesh and physics is true. Default is 3.\r\n   * @param {Vector3} params.gravity - Only for THREE.SkinnedMesh and physics is true. Default ( 0, - 9.8 * 10, 0 ).\r\n   * @param {Number} params.delayTime - Only for THREE.Audio. Default is 0.0.\r\n   * @return {MMDAnimationHelper}\r\n   */\r\n  add(object, params = {}) {\r\n    if (object.isSkinnedMesh) {\r\n      this._addMesh(object, params);\r\n    } else if (object.isCamera) {\r\n      this._setupCamera(object, params);\r\n    } else if (object.type === \"Audio\") {\r\n      this._setupAudio(object, params);\r\n    } else {\r\n      throw new Error(\r\n        \"THREE.MMDAnimationHelper.add: accepts only THREE.SkinnedMesh or THREE.Camera or THREE.Audio instance.\"\r\n      );\r\n    }\r\n    if (this.configuration.sync)\r\n      this._syncDuration();\r\n    return this;\r\n  }\r\n  /**\r\n   * Removes an Three.js Object from helper.\r\n   *\r\n   * @param {THREE.SkinnedMesh|THREE.Camera|THREE.Audio} object\r\n   * @return {MMDAnimationHelper}\r\n   */\r\n  remove(object) {\r\n    if (object.isSkinnedMesh) {\r\n      this._removeMesh(object);\r\n    } else if (object.isCamera) {\r\n      this._clearCamera(object);\r\n    } else if (object.type === \"Audio\") {\r\n      this._clearAudio(object);\r\n    } else {\r\n      throw new Error(\r\n        \"THREE.MMDAnimationHelper.remove: accepts only THREE.SkinnedMesh or THREE.Camera or THREE.Audio instance.\"\r\n      );\r\n    }\r\n    if (this.configuration.sync)\r\n      this._syncDuration();\r\n    return this;\r\n  }\r\n  /**\r\n   * Updates the animation.\r\n   *\r\n   * @param {Number} delta\r\n   * @return {MMDAnimationHelper}\r\n   */\r\n  update(delta) {\r\n    if (this.audioManager !== null)\r\n      this.audioManager.control(delta);\r\n    for (let i = 0; i < this.meshes.length; i++) {\r\n      this._animateMesh(this.meshes[i], delta);\r\n    }\r\n    if (this.sharedPhysics)\r\n      this._updateSharedPhysics(delta);\r\n    if (this.camera !== null)\r\n      this._animateCamera(this.camera, delta);\r\n    return this;\r\n  }\r\n  /**\r\n   * Changes the pose of SkinnedMesh as VPD specifies.\r\n   *\r\n   * @param {THREE.SkinnedMesh} mesh\r\n   * @param {Object} vpd - VPD content parsed MMDParser\r\n   * @param {Object} params - (optional)\r\n   * @param {boolean} params.resetPose - Default is true.\r\n   * @param {boolean} params.ik - Default is true.\r\n   * @param {boolean} params.grant - Default is true.\r\n   * @return {MMDAnimationHelper}\r\n   */\r\n  pose(mesh, vpd, params = {}) {\r\n    if (params.resetPose !== false)\r\n      mesh.pose();\r\n    const bones = mesh.skeleton.bones;\r\n    const boneParams = vpd.bones;\r\n    const boneNameDictionary = {};\r\n    for (let i = 0, il = bones.length; i < il; i++) {\r\n      boneNameDictionary[bones[i].name] = i;\r\n    }\r\n    const vector = new Vector3();\r\n    const quaternion = new Quaternion();\r\n    for (let i = 0, il = boneParams.length; i < il; i++) {\r\n      const boneParam = boneParams[i];\r\n      const boneIndex = boneNameDictionary[boneParam.name];\r\n      if (boneIndex === void 0)\r\n        continue;\r\n      const bone = bones[boneIndex];\r\n      bone.position.add(vector.fromArray(boneParam.translation));\r\n      bone.quaternion.multiply(quaternion.fromArray(boneParam.quaternion));\r\n    }\r\n    mesh.updateMatrixWorld(true);\r\n    if (this.configuration.pmxAnimation && mesh.geometry.userData.MMD && mesh.geometry.userData.MMD.format === \"pmx\") {\r\n      const sortedBonesData = this._sortBoneDataArray(mesh.geometry.userData.MMD.bones.slice());\r\n      const ikSolver = params.ik !== false ? this._createCCDIKSolver(mesh) : null;\r\n      const grantSolver = params.grant !== false ? this.createGrantSolver(mesh) : null;\r\n      this._animatePMXMesh(mesh, sortedBonesData, ikSolver, grantSolver);\r\n    } else {\r\n      if (params.ik !== false) {\r\n        this._createCCDIKSolver(mesh).update();\r\n      }\r\n      if (params.grant !== false) {\r\n        this.createGrantSolver(mesh).update();\r\n      }\r\n    }\r\n    return this;\r\n  }\r\n  /**\r\n   * Enabes/Disables an animation feature.\r\n   *\r\n   * @param {string} key\r\n   * @param {boolean} enabled\r\n   * @return {MMDAnimationHelper}\r\n   */\r\n  enable(key, enabled) {\r\n    if (this.enabled[key] === void 0) {\r\n      throw new Error(\"THREE.MMDAnimationHelper.enable: unknown key \" + key);\r\n    }\r\n    this.enabled[key] = enabled;\r\n    if (key === \"physics\") {\r\n      for (let i = 0, il = this.meshes.length; i < il; i++) {\r\n        this._optimizeIK(this.meshes[i], enabled);\r\n      }\r\n    }\r\n    return this;\r\n  }\r\n  /**\r\n   * Creates an GrantSolver instance.\r\n   *\r\n   * @param {THREE.SkinnedMesh} mesh\r\n   * @return {GrantSolver}\r\n   */\r\n  createGrantSolver(mesh) {\r\n    return new GrantSolver(mesh, mesh.geometry.userData.MMD.grants);\r\n  }\r\n  // private methods\r\n  _addMesh(mesh, params) {\r\n    if (this.meshes.indexOf(mesh) >= 0) {\r\n      throw new Error(\"THREE.MMDAnimationHelper._addMesh: SkinnedMesh '\" + mesh.name + \"' has already been added.\");\r\n    }\r\n    this.meshes.push(mesh);\r\n    this.objects.set(mesh, { looped: false });\r\n    this._setupMeshAnimation(mesh, params.animation);\r\n    if (params.physics !== false) {\r\n      this._setupMeshPhysics(mesh, params);\r\n    }\r\n    return this;\r\n  }\r\n  _setupCamera(camera, params) {\r\n    if (this.camera === camera) {\r\n      throw new Error(\"THREE.MMDAnimationHelper._setupCamera: Camera '\" + camera.name + \"' has already been set.\");\r\n    }\r\n    if (this.camera)\r\n      this.clearCamera(this.camera);\r\n    this.camera = camera;\r\n    camera.add(this.cameraTarget);\r\n    this.objects.set(camera, {});\r\n    if (params.animation !== void 0) {\r\n      this._setupCameraAnimation(camera, params.animation);\r\n    }\r\n    return this;\r\n  }\r\n  _setupAudio(audio, params) {\r\n    if (this.audio === audio) {\r\n      throw new Error(\"THREE.MMDAnimationHelper._setupAudio: Audio '\" + audio.name + \"' has already been set.\");\r\n    }\r\n    if (this.audio)\r\n      this.clearAudio(this.audio);\r\n    this.audio = audio;\r\n    this.audioManager = new AudioManager(audio, params);\r\n    this.objects.set(this.audioManager, {\r\n      duration: this.audioManager.duration\r\n    });\r\n    return this;\r\n  }\r\n  _removeMesh(mesh) {\r\n    let found = false;\r\n    let writeIndex = 0;\r\n    for (let i = 0, il = this.meshes.length; i < il; i++) {\r\n      if (this.meshes[i] === mesh) {\r\n        this.objects.delete(mesh);\r\n        found = true;\r\n        continue;\r\n      }\r\n      this.meshes[writeIndex++] = this.meshes[i];\r\n    }\r\n    if (!found) {\r\n      throw new Error(\r\n        \"THREE.MMDAnimationHelper._removeMesh: SkinnedMesh '\" + mesh.name + \"' has not been added yet.\"\r\n      );\r\n    }\r\n    this.meshes.length = writeIndex;\r\n    return this;\r\n  }\r\n  _clearCamera(camera) {\r\n    if (camera !== this.camera) {\r\n      throw new Error(\"THREE.MMDAnimationHelper._clearCamera: Camera '\" + camera.name + \"' has not been set yet.\");\r\n    }\r\n    this.camera.remove(this.cameraTarget);\r\n    this.objects.delete(this.camera);\r\n    this.camera = null;\r\n    return this;\r\n  }\r\n  _clearAudio(audio) {\r\n    if (audio !== this.audio) {\r\n      throw new Error(\"THREE.MMDAnimationHelper._clearAudio: Audio '\" + audio.name + \"' has not been set yet.\");\r\n    }\r\n    this.objects.delete(this.audioManager);\r\n    this.audio = null;\r\n    this.audioManager = null;\r\n    return this;\r\n  }\r\n  _setupMeshAnimation(mesh, animation) {\r\n    const objects = this.objects.get(mesh);\r\n    if (animation !== void 0) {\r\n      const animations = Array.isArray(animation) ? animation : [animation];\r\n      objects.mixer = new AnimationMixer(mesh);\r\n      for (let i = 0, il = animations.length; i < il; i++) {\r\n        objects.mixer.clipAction(animations[i]).play();\r\n      }\r\n      objects.mixer.addEventListener(\"loop\", function(event) {\r\n        const tracks = event.action._clip.tracks;\r\n        if (tracks.length > 0 && tracks[0].name.slice(0, 6) !== \".bones\")\r\n          return;\r\n        objects.looped = true;\r\n      });\r\n    }\r\n    objects.ikSolver = this._createCCDIKSolver(mesh);\r\n    objects.grantSolver = this.createGrantSolver(mesh);\r\n    return this;\r\n  }\r\n  _setupCameraAnimation(camera, animation) {\r\n    const animations = Array.isArray(animation) ? animation : [animation];\r\n    const objects = this.objects.get(camera);\r\n    objects.mixer = new AnimationMixer(camera);\r\n    for (let i = 0, il = animations.length; i < il; i++) {\r\n      objects.mixer.clipAction(animations[i]).play();\r\n    }\r\n  }\r\n  _setupMeshPhysics(mesh, params) {\r\n    const objects = this.objects.get(mesh);\r\n    if (params.world === void 0 && this.sharedPhysics) {\r\n      const masterPhysics = this._getMasterPhysics();\r\n      if (masterPhysics !== null)\r\n        world = masterPhysics.world;\r\n    }\r\n    objects.physics = this._createMMDPhysics(mesh, params);\r\n    if (objects.mixer && params.animationWarmup !== false) {\r\n      this._animateMesh(mesh, 0);\r\n      objects.physics.reset();\r\n    }\r\n    objects.physics.warmup(params.warmup !== void 0 ? params.warmup : 60);\r\n    this._optimizeIK(mesh, true);\r\n  }\r\n  _animateMesh(mesh, delta) {\r\n    const objects = this.objects.get(mesh);\r\n    const mixer = objects.mixer;\r\n    const ikSolver = objects.ikSolver;\r\n    const grantSolver = objects.grantSolver;\r\n    const physics = objects.physics;\r\n    const looped = objects.looped;\r\n    if (mixer && this.enabled.animation) {\r\n      this._restoreBones(mesh);\r\n      mixer.update(delta);\r\n      this._saveBones(mesh);\r\n      if (this.configuration.pmxAnimation && mesh.geometry.userData.MMD && mesh.geometry.userData.MMD.format === \"pmx\") {\r\n        if (!objects.sortedBonesData)\r\n          objects.sortedBonesData = this._sortBoneDataArray(mesh.geometry.userData.MMD.bones.slice());\r\n        this._animatePMXMesh(\r\n          mesh,\r\n          objects.sortedBonesData,\r\n          ikSolver && this.enabled.ik ? ikSolver : null,\r\n          grantSolver && this.enabled.grant ? grantSolver : null\r\n        );\r\n      } else {\r\n        if (ikSolver && this.enabled.ik) {\r\n          mesh.updateMatrixWorld(true);\r\n          ikSolver.update();\r\n        }\r\n        if (grantSolver && this.enabled.grant) {\r\n          grantSolver.update();\r\n        }\r\n      }\r\n    }\r\n    if (looped === true && this.enabled.physics) {\r\n      if (physics && this.configuration.resetPhysicsOnLoop)\r\n        physics.reset();\r\n      objects.looped = false;\r\n    }\r\n    if (physics && this.enabled.physics && !this.sharedPhysics) {\r\n      this.onBeforePhysics(mesh);\r\n      physics.update(delta);\r\n    }\r\n  }\r\n  // Sort bones in order by 1. transformationClass and 2. bone index.\r\n  // In PMX animation system, bone transformations should be processed\r\n  // in this order.\r\n  _sortBoneDataArray(boneDataArray) {\r\n    return boneDataArray.sort(function(a, b) {\r\n      if (a.transformationClass !== b.transformationClass) {\r\n        return a.transformationClass - b.transformationClass;\r\n      } else {\r\n        return a.index - b.index;\r\n      }\r\n    });\r\n  }\r\n  // PMX Animation system is a bit too complex and doesn't great match to\r\n  // Three.js Animation system. This method attempts to simulate it as much as\r\n  // possible but doesn't perfectly simulate.\r\n  // This method is more costly than the regular one so\r\n  // you are recommended to set constructor parameter \"pmxAnimation: true\"\r\n  // only if your PMX model animation doesn't work well.\r\n  // If you need better method you would be required to write your own.\r\n  _animatePMXMesh(mesh, sortedBonesData, ikSolver, grantSolver) {\r\n    _quaternionIndex = 0;\r\n    _grantResultMap.clear();\r\n    for (let i = 0, il = sortedBonesData.length; i < il; i++) {\r\n      updateOne(mesh, sortedBonesData[i].index, ikSolver, grantSolver);\r\n    }\r\n    mesh.updateMatrixWorld(true);\r\n    return this;\r\n  }\r\n  _animateCamera(camera, delta) {\r\n    const mixer = this.objects.get(camera).mixer;\r\n    if (mixer && this.enabled.cameraAnimation) {\r\n      mixer.update(delta);\r\n      camera.updateProjectionMatrix();\r\n      camera.up.set(0, 1, 0);\r\n      camera.up.applyQuaternion(camera.quaternion);\r\n      camera.lookAt(this.cameraTarget.position);\r\n    }\r\n  }\r\n  _optimizeIK(mesh, physicsEnabled) {\r\n    const iks = mesh.geometry.userData.MMD.iks;\r\n    const bones = mesh.geometry.userData.MMD.bones;\r\n    for (let i = 0, il = iks.length; i < il; i++) {\r\n      const ik = iks[i];\r\n      const links = ik.links;\r\n      for (let j = 0, jl = links.length; j < jl; j++) {\r\n        const link = links[j];\r\n        if (physicsEnabled === true) {\r\n          link.enabled = bones[link.index].rigidBodyType > 0 ? false : true;\r\n        } else {\r\n          link.enabled = true;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  _createCCDIKSolver(mesh) {\r\n    if (CCDIKSolver === void 0) {\r\n      throw new Error(\"THREE.MMDAnimationHelper: Import CCDIKSolver.\");\r\n    }\r\n    return new CCDIKSolver(mesh, mesh.geometry.userData.MMD.iks);\r\n  }\r\n  _createMMDPhysics(mesh, params) {\r\n    if (MMDPhysics === void 0) {\r\n      throw new Error(\"THREE.MMDPhysics: Import MMDPhysics.\");\r\n    }\r\n    return new MMDPhysics(mesh, mesh.geometry.userData.MMD.rigidBodies, mesh.geometry.userData.MMD.constraints, params);\r\n  }\r\n  /*\r\n   * Detects the longest duration and then sets it to them to sync.\r\n   * TODO: Not to access private properties ( ._actions and ._clip )\r\n   */\r\n  _syncDuration() {\r\n    let max = 0;\r\n    const objects = this.objects;\r\n    const meshes = this.meshes;\r\n    const camera = this.camera;\r\n    const audioManager = this.audioManager;\r\n    for (let i = 0, il = meshes.length; i < il; i++) {\r\n      const mixer = this.objects.get(meshes[i]).mixer;\r\n      if (mixer === void 0)\r\n        continue;\r\n      for (let j = 0; j < mixer._actions.length; j++) {\r\n        const clip = mixer._actions[j]._clip;\r\n        if (!objects.has(clip)) {\r\n          objects.set(clip, {\r\n            duration: clip.duration\r\n          });\r\n        }\r\n        max = Math.max(max, objects.get(clip).duration);\r\n      }\r\n    }\r\n    if (camera !== null) {\r\n      const mixer = this.objects.get(camera).mixer;\r\n      if (mixer !== void 0) {\r\n        for (let i = 0, il = mixer._actions.length; i < il; i++) {\r\n          const clip = mixer._actions[i]._clip;\r\n          if (!objects.has(clip)) {\r\n            objects.set(clip, {\r\n              duration: clip.duration\r\n            });\r\n          }\r\n          max = Math.max(max, objects.get(clip).duration);\r\n        }\r\n      }\r\n    }\r\n    if (audioManager !== null) {\r\n      max = Math.max(max, objects.get(audioManager).duration);\r\n    }\r\n    max += this.configuration.afterglow;\r\n    for (let i = 0, il = this.meshes.length; i < il; i++) {\r\n      const mixer = this.objects.get(this.meshes[i]).mixer;\r\n      if (mixer === void 0)\r\n        continue;\r\n      for (let j = 0, jl = mixer._actions.length; j < jl; j++) {\r\n        mixer._actions[j]._clip.duration = max;\r\n      }\r\n    }\r\n    if (camera !== null) {\r\n      const mixer = this.objects.get(camera).mixer;\r\n      if (mixer !== void 0) {\r\n        for (let i = 0, il = mixer._actions.length; i < il; i++) {\r\n          mixer._actions[i]._clip.duration = max;\r\n        }\r\n      }\r\n    }\r\n    if (audioManager !== null) {\r\n      audioManager.duration = max;\r\n    }\r\n  }\r\n  // workaround\r\n  _updatePropertyMixersBuffer(mesh) {\r\n    const mixer = this.objects.get(mesh).mixer;\r\n    const propertyMixers = mixer._bindings;\r\n    const accuIndex = mixer._accuIndex;\r\n    for (let i = 0, il = propertyMixers.length; i < il; i++) {\r\n      const propertyMixer = propertyMixers[i];\r\n      const buffer = propertyMixer.buffer;\r\n      const stride = propertyMixer.valueSize;\r\n      const offset = (accuIndex + 1) * stride;\r\n      propertyMixer.binding.getValue(buffer, offset);\r\n    }\r\n  }\r\n  /*\r\n   * Avoiding these two issues by restore/save bones before/after mixer animation.\r\n   *\r\n   * 1. PropertyMixer used by AnimationMixer holds cache value in .buffer.\r\n   *    Calculating IK, Grant, and Physics after mixer animation can break\r\n   *    the cache coherency.\r\n   *\r\n   * 2. Applying Grant two or more times without reset the posing breaks model.\r\n   */\r\n  _saveBones(mesh) {\r\n    const objects = this.objects.get(mesh);\r\n    const bones = mesh.skeleton.bones;\r\n    let backupBones = objects.backupBones;\r\n    if (backupBones === void 0) {\r\n      backupBones = new Float32Array(bones.length * 7);\r\n      objects.backupBones = backupBones;\r\n    }\r\n    for (let i = 0, il = bones.length; i < il; i++) {\r\n      const bone = bones[i];\r\n      bone.position.toArray(backupBones, i * 7);\r\n      bone.quaternion.toArray(backupBones, i * 7 + 3);\r\n    }\r\n  }\r\n  _restoreBones(mesh) {\r\n    const objects = this.objects.get(mesh);\r\n    const backupBones = objects.backupBones;\r\n    if (backupBones === void 0)\r\n      return;\r\n    const bones = mesh.skeleton.bones;\r\n    for (let i = 0, il = bones.length; i < il; i++) {\r\n      const bone = bones[i];\r\n      bone.position.fromArray(backupBones, i * 7);\r\n      bone.quaternion.fromArray(backupBones, i * 7 + 3);\r\n    }\r\n  }\r\n  // experimental\r\n  _getMasterPhysics() {\r\n    if (this.masterPhysics !== null)\r\n      return this.masterPhysics;\r\n    for (let i = 0, il = this.meshes.length; i < il; i++) {\r\n      const physics = this.meshes[i].physics;\r\n      if (physics !== void 0 && physics !== null) {\r\n        this.masterPhysics = physics;\r\n        return this.masterPhysics;\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n  _updateSharedPhysics(delta) {\r\n    if (this.meshes.length === 0 || !this.enabled.physics || !this.sharedPhysics)\r\n      return;\r\n    const physics = this._getMasterPhysics();\r\n    if (physics === null)\r\n      return;\r\n    for (let i = 0, il = this.meshes.length; i < il; i++) {\r\n      const p = this.meshes[i].physics;\r\n      if (p !== null && p !== void 0) {\r\n        p.updateRigidBodies();\r\n      }\r\n    }\r\n    physics.stepSimulation(delta);\r\n    for (let i = 0, il = this.meshes.length; i < il; i++) {\r\n      const p = this.meshes[i].physics;\r\n      if (p !== null && p !== void 0) {\r\n        p.updateBones();\r\n      }\r\n    }\r\n  }\r\n}\r\nconst _quaternions = [];\r\nlet _quaternionIndex = 0;\r\nfunction getQuaternion() {\r\n  if (_quaternionIndex >= _quaternions.length) {\r\n    _quaternions.push(new Quaternion());\r\n  }\r\n  return _quaternions[_quaternionIndex++];\r\n}\r\nconst _grantResultMap = /* @__PURE__ */ new Map();\r\nfunction updateOne(mesh, boneIndex, ikSolver, grantSolver) {\r\n  const bones = mesh.skeleton.bones;\r\n  const bonesData = mesh.geometry.userData.MMD.bones;\r\n  const boneData = bonesData[boneIndex];\r\n  const bone = bones[boneIndex];\r\n  if (_grantResultMap.has(boneIndex))\r\n    return;\r\n  const quaternion = getQuaternion();\r\n  _grantResultMap.set(boneIndex, quaternion.copy(bone.quaternion));\r\n  if (grantSolver && boneData.grant && !boneData.grant.isLocal && boneData.grant.affectRotation) {\r\n    const parentIndex = boneData.grant.parentIndex;\r\n    const ratio = boneData.grant.ratio;\r\n    if (!_grantResultMap.has(parentIndex)) {\r\n      updateOne(mesh, parentIndex, ikSolver, grantSolver);\r\n    }\r\n    grantSolver.addGrantRotation(bone, _grantResultMap.get(parentIndex), ratio);\r\n  }\r\n  if (ikSolver && boneData.ik) {\r\n    mesh.updateMatrixWorld(true);\r\n    ikSolver.updateOne(boneData.ik);\r\n    const links = boneData.ik.links;\r\n    for (let i = 0, il = links.length; i < il; i++) {\r\n      const link = links[i];\r\n      if (link.enabled === false)\r\n        continue;\r\n      const linkIndex = link.index;\r\n      if (_grantResultMap.has(linkIndex)) {\r\n        _grantResultMap.set(linkIndex, _grantResultMap.get(linkIndex).copy(bones[linkIndex].quaternion));\r\n      }\r\n    }\r\n  }\r\n  quaternion.copy(bone.quaternion);\r\n}\r\nclass AudioManager {\r\n  /**\r\n   * @param {THREE.Audio} audio\r\n   * @param {Object} params - (optional)\r\n   * @param {Nuumber} params.delayTime\r\n   */\r\n  constructor(audio, params = {}) {\r\n    this.audio = audio;\r\n    this.elapsedTime = 0;\r\n    this.currentTime = 0;\r\n    this.delayTime = params.delayTime !== void 0 ? params.delayTime : 0;\r\n    this.audioDuration = this.audio.buffer.duration;\r\n    this.duration = this.audioDuration + this.delayTime;\r\n  }\r\n  /**\r\n   * @param {Number} delta\r\n   * @return {AudioManager}\r\n   */\r\n  control(delta) {\r\n    this.elapsed += delta;\r\n    this.currentTime += delta;\r\n    if (this._shouldStopAudio())\r\n      this.audio.stop();\r\n    if (this._shouldStartAudio())\r\n      this.audio.play();\r\n    return this;\r\n  }\r\n  // private methods\r\n  _shouldStartAudio() {\r\n    if (this.audio.isPlaying)\r\n      return false;\r\n    while (this.currentTime >= this.duration) {\r\n      this.currentTime -= this.duration;\r\n    }\r\n    if (this.currentTime < this.delayTime)\r\n      return false;\r\n    if (this.currentTime - this.delayTime > this.audioDuration)\r\n      return false;\r\n    return true;\r\n  }\r\n  _shouldStopAudio() {\r\n    return this.audio.isPlaying && this.currentTime >= this.duration;\r\n  }\r\n}\r\nconst _q = /* @__PURE__ */ new Quaternion();\r\nclass GrantSolver {\r\n  constructor(mesh, grants = []) {\r\n    this.mesh = mesh;\r\n    this.grants = grants;\r\n  }\r\n  /**\r\n   * Solve all the grant bones\r\n   * @return {GrantSolver}\r\n   */\r\n  update() {\r\n    const grants = this.grants;\r\n    for (let i = 0, il = grants.length; i < il; i++) {\r\n      this.updateOne(grants[i]);\r\n    }\r\n    return this;\r\n  }\r\n  /**\r\n   * Solve a grant bone\r\n   * @param {Object} grant - grant parameter\r\n   * @return {GrantSolver}\r\n   */\r\n  updateOne(grant) {\r\n    const bones = this.mesh.skeleton.bones;\r\n    const bone = bones[grant.index];\r\n    const parentBone = bones[grant.parentIndex];\r\n    if (grant.isLocal) {\r\n      if (grant.affectPosition) {\r\n      }\r\n      if (grant.affectRotation) {\r\n      }\r\n    } else {\r\n      if (grant.affectPosition) {\r\n      }\r\n      if (grant.affectRotation) {\r\n        this.addGrantRotation(bone, parentBone.quaternion, grant.ratio);\r\n      }\r\n    }\r\n    return this;\r\n  }\r\n  addGrantRotation(bone, q, ratio) {\r\n    _q.set(0, 0, 0, 1);\r\n    _q.slerp(q, ratio);\r\n    bone.quaternion.multiply(_q);\r\n    return this;\r\n  }\r\n}\r\nexport {\r\n  MMDAnimationHelper\r\n};\r\n", "var __defProp = Object.defineProperty;\r\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\r\nvar __publicField = (obj, key, value) => {\r\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\r\n  return value;\r\n};\r\nimport { Mesh, PerspectiveCamera, Color, Plane, Vector3, Matrix4, Vector4, WebGLRenderTarget, HalfFloatType, ShaderMaterial, UniformsUtils, NoToneMapping } from \"three\";\r\nconst _Reflector = class extends Mesh {\r\n  constructor(geometry, options = {}) {\r\n    super(geometry);\r\n    this.isReflector = true;\r\n    this.type = \"Reflector\";\r\n    this.camera = new PerspectiveCamera();\r\n    const scope = this;\r\n    const color = options.color !== void 0 ? new Color(options.color) : new Color(8355711);\r\n    const textureWidth = options.textureWidth || 512;\r\n    const textureHeight = options.textureHeight || 512;\r\n    const clipBias = options.clipBias || 0;\r\n    const shader = options.shader || _Reflector.ReflectorShader;\r\n    const multisample = options.multisample !== void 0 ? options.multisample : 4;\r\n    const reflectorPlane = new Plane();\r\n    const normal = new Vector3();\r\n    const reflectorWorldPosition = new Vector3();\r\n    const cameraWorldPosition = new Vector3();\r\n    const rotationMatrix = new Matrix4();\r\n    const lookAtPosition = new Vector3(0, 0, -1);\r\n    const clipPlane = new Vector4();\r\n    const view = new Vector3();\r\n    const target = new Vector3();\r\n    const q = new Vector4();\r\n    const textureMatrix = new Matrix4();\r\n    const virtualCamera = this.camera;\r\n    const renderTarget = new WebGLRenderTarget(textureWidth, textureHeight, {\r\n      samples: multisample,\r\n      type: HalfFloatType\r\n    });\r\n    const material = new ShaderMaterial({\r\n      uniforms: UniformsUtils.clone(shader.uniforms),\r\n      fragmentShader: shader.fragmentShader,\r\n      vertexShader: shader.vertexShader\r\n    });\r\n    material.uniforms[\"tDiffuse\"].value = renderTarget.texture;\r\n    material.uniforms[\"color\"].value = color;\r\n    material.uniforms[\"textureMatrix\"].value = textureMatrix;\r\n    this.material = material;\r\n    this.onBeforeRender = function(renderer, scene, camera) {\r\n      reflectorWorldPosition.setFromMatrixPosition(scope.matrixWorld);\r\n      cameraWorldPosition.setFromMatrixPosition(camera.matrixWorld);\r\n      rotationMatrix.extractRotation(scope.matrixWorld);\r\n      normal.set(0, 0, 1);\r\n      normal.applyMatrix4(rotationMatrix);\r\n      view.subVectors(reflectorWorldPosition, cameraWorldPosition);\r\n      if (view.dot(normal) > 0)\r\n        return;\r\n      view.reflect(normal).negate();\r\n      view.add(reflectorWorldPosition);\r\n      rotationMatrix.extractRotation(camera.matrixWorld);\r\n      lookAtPosition.set(0, 0, -1);\r\n      lookAtPosition.applyMatrix4(rotationMatrix);\r\n      lookAtPosition.add(cameraWorldPosition);\r\n      target.subVectors(reflectorWorldPosition, lookAtPosition);\r\n      target.reflect(normal).negate();\r\n      target.add(reflectorWorldPosition);\r\n      virtualCamera.position.copy(view);\r\n      virtualCamera.up.set(0, 1, 0);\r\n      virtualCamera.up.applyMatrix4(rotationMatrix);\r\n      virtualCamera.up.reflect(normal);\r\n      virtualCamera.lookAt(target);\r\n      virtualCamera.far = camera.far;\r\n      virtualCamera.updateMatrixWorld();\r\n      virtualCamera.projectionMatrix.copy(camera.projectionMatrix);\r\n      textureMatrix.set(0.5, 0, 0, 0.5, 0, 0.5, 0, 0.5, 0, 0, 0.5, 0.5, 0, 0, 0, 1);\r\n      textureMatrix.multiply(virtualCamera.projectionMatrix);\r\n      textureMatrix.multiply(virtualCamera.matrixWorldInverse);\r\n      textureMatrix.multiply(scope.matrixWorld);\r\n      reflectorPlane.setFromNormalAndCoplanarPoint(normal, reflectorWorldPosition);\r\n      reflectorPlane.applyMatrix4(virtualCamera.matrixWorldInverse);\r\n      clipPlane.set(reflectorPlane.normal.x, reflectorPlane.normal.y, reflectorPlane.normal.z, reflectorPlane.constant);\r\n      const projectionMatrix = virtualCamera.projectionMatrix;\r\n      q.x = (Math.sign(clipPlane.x) + projectionMatrix.elements[8]) / projectionMatrix.elements[0];\r\n      q.y = (Math.sign(clipPlane.y) + projectionMatrix.elements[9]) / projectionMatrix.elements[5];\r\n      q.z = -1;\r\n      q.w = (1 + projectionMatrix.elements[10]) / projectionMatrix.elements[14];\r\n      clipPlane.multiplyScalar(2 / clipPlane.dot(q));\r\n      projectionMatrix.elements[2] = clipPlane.x;\r\n      projectionMatrix.elements[6] = clipPlane.y;\r\n      projectionMatrix.elements[10] = clipPlane.z + 1 - clipBias;\r\n      projectionMatrix.elements[14] = clipPlane.w;\r\n      scope.visible = false;\r\n      const currentRenderTarget = renderer.getRenderTarget();\r\n      const currentXrEnabled = renderer.xr.enabled;\r\n      const currentShadowAutoUpdate = renderer.shadowMap.autoUpdate;\r\n      const currentToneMapping = renderer.toneMapping;\r\n      let isSRGB = false;\r\n      if (\"outputColorSpace\" in renderer)\r\n        isSRGB = renderer.outputColorSpace === \"srgb\";\r\n      else\r\n        isSRGB = renderer.outputEncoding === 3001;\r\n      renderer.xr.enabled = false;\r\n      renderer.shadowMap.autoUpdate = false;\r\n      if (\"outputColorSpace\" in renderer)\r\n        renderer.outputColorSpace = \"linear-srgb\";\r\n      else\r\n        renderer.outputEncoding = 3e3;\r\n      renderer.toneMapping = NoToneMapping;\r\n      renderer.setRenderTarget(renderTarget);\r\n      renderer.state.buffers.depth.setMask(true);\r\n      if (renderer.autoClear === false)\r\n        renderer.clear();\r\n      renderer.render(scene, virtualCamera);\r\n      renderer.xr.enabled = currentXrEnabled;\r\n      renderer.shadowMap.autoUpdate = currentShadowAutoUpdate;\r\n      renderer.toneMapping = currentToneMapping;\r\n      if (\"outputColorSpace\" in renderer)\r\n        renderer.outputColorSpace = isSRGB ? \"srgb\" : \"srgb-linear\";\r\n      else\r\n        renderer.outputEncoding = isSRGB ? 3001 : 3e3;\r\n      renderer.setRenderTarget(currentRenderTarget);\r\n      const viewport = camera.viewport;\r\n      if (viewport !== void 0) {\r\n        renderer.state.viewport(viewport);\r\n      }\r\n      scope.visible = true;\r\n    };\r\n    this.getRenderTarget = function() {\r\n      return renderTarget;\r\n    };\r\n    this.dispose = function() {\r\n      renderTarget.dispose();\r\n      scope.material.dispose();\r\n    };\r\n  }\r\n};\r\nlet Reflector = _Reflector;\r\n__publicField(Reflector, \"ReflectorShader\", {\r\n  uniforms: {\r\n    color: {\r\n      value: null\r\n    },\r\n    tDiffuse: {\r\n      value: null\r\n    },\r\n    textureMatrix: {\r\n      value: null\r\n    }\r\n  },\r\n  vertexShader: (\r\n    /* glsl */\r\n    `\r\n\t\tuniform mat4 textureMatrix;\r\n\t\tvarying vec4 vUv;\r\n\r\n\t\t#include <common>\r\n\t\t#include <logdepthbuf_pars_vertex>\r\n\r\n\t\tvoid main() {\r\n\r\n\t\t\tvUv = textureMatrix * vec4( position, 1.0 );\r\n\r\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\r\n\r\n\t\t\t#include <logdepthbuf_vertex>\r\n\r\n\t\t}`\r\n  ),\r\n  fragmentShader: (\r\n    /* glsl */\r\n    `\r\n\t\tuniform vec3 color;\r\n\t\tuniform sampler2D tDiffuse;\r\n\t\tvarying vec4 vUv;\r\n\r\n\t\t#include <logdepthbuf_pars_fragment>\r\n\r\n\t\tfloat blendOverlay( float base, float blend ) {\r\n\r\n\t\t\treturn( base < 0.5 ? ( 2.0 * base * blend ) : ( 1.0 - 2.0 * ( 1.0 - base ) * ( 1.0 - blend ) ) );\r\n\r\n\t\t}\r\n\r\n\t\tvec3 blendOverlay( vec3 base, vec3 blend ) {\r\n\r\n\t\t\treturn vec3( blendOverlay( base.r, blend.r ), blendOverlay( base.g, blend.g ), blendOverlay( base.b, blend.b ) );\r\n\r\n\t\t}\r\n\r\n\t\tvoid main() {\r\n\r\n\t\t\t#include <logdepthbuf_fragment>\r\n\r\n\t\t\tvec4 base = texture2DProj( tDiffuse, vUv );\r\n\t\t\tgl_FragColor = vec4( blendOverlay( base.rgb, color ), 1.0 );\r\n\r\n\t\t\t#include <tonemapping_fragment>\r\n\t\t\t#include <encodings_fragment>\r\n\r\n\t\t}`\r\n  )\r\n});\r\nexport {\r\n  Reflector\r\n};\r\n", "var __defProp = Object.defineProperty;\r\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\r\nvar __publicField = (obj, key, value) => {\r\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\r\n  return value;\r\n};\r\nimport { Mesh, PerspectiveCamera, Color, Plane, Matrix4, WebGLRenderTarget, HalfFloatType, ShaderMaterial, UniformsUtils, Vector3, Quaternion, Vector4, NoToneMapping } from \"three\";\r\nconst _Refractor = class extends Mesh {\r\n  constructor(geometry, options = {}) {\r\n    super(geometry);\r\n    this.isRefractor = true;\r\n    this.type = \"Refractor\";\r\n    this.camera = new PerspectiveCamera();\r\n    const scope = this;\r\n    const color = options.color !== void 0 ? new Color(options.color) : new Color(8355711);\r\n    const textureWidth = options.textureWidth || 512;\r\n    const textureHeight = options.textureHeight || 512;\r\n    const clipBias = options.clipBias || 0;\r\n    const shader = options.shader || _Refractor.RefractorShader;\r\n    const multisample = options.multisample !== void 0 ? options.multisample : 4;\r\n    const virtualCamera = this.camera;\r\n    virtualCamera.matrixAutoUpdate = false;\r\n    virtualCamera.userData.refractor = true;\r\n    const refractorPlane = new Plane();\r\n    const textureMatrix = new Matrix4();\r\n    const renderTarget = new WebGLRenderTarget(textureWidth, textureHeight, {\r\n      samples: multisample,\r\n      type: HalfFloatType\r\n    });\r\n    this.material = new ShaderMaterial({\r\n      uniforms: UniformsUtils.clone(shader.uniforms),\r\n      vertexShader: shader.vertexShader,\r\n      fragmentShader: shader.fragmentShader,\r\n      transparent: true\r\n      // ensures, refractors are drawn from farthest to closest\r\n    });\r\n    this.material.uniforms[\"color\"].value = color;\r\n    this.material.uniforms[\"tDiffuse\"].value = renderTarget.texture;\r\n    this.material.uniforms[\"textureMatrix\"].value = textureMatrix;\r\n    const visible = function() {\r\n      const refractorWorldPosition = new Vector3();\r\n      const cameraWorldPosition = new Vector3();\r\n      const rotationMatrix = new Matrix4();\r\n      const view = new Vector3();\r\n      const normal = new Vector3();\r\n      return function visible2(camera) {\r\n        refractorWorldPosition.setFromMatrixPosition(scope.matrixWorld);\r\n        cameraWorldPosition.setFromMatrixPosition(camera.matrixWorld);\r\n        view.subVectors(refractorWorldPosition, cameraWorldPosition);\r\n        rotationMatrix.extractRotation(scope.matrixWorld);\r\n        normal.set(0, 0, 1);\r\n        normal.applyMatrix4(rotationMatrix);\r\n        return view.dot(normal) < 0;\r\n      };\r\n    }();\r\n    const updateRefractorPlane = function() {\r\n      const normal = new Vector3();\r\n      const position = new Vector3();\r\n      const quaternion = new Quaternion();\r\n      const scale = new Vector3();\r\n      return function updateRefractorPlane2() {\r\n        scope.matrixWorld.decompose(position, quaternion, scale);\r\n        normal.set(0, 0, 1).applyQuaternion(quaternion).normalize();\r\n        normal.negate();\r\n        refractorPlane.setFromNormalAndCoplanarPoint(normal, position);\r\n      };\r\n    }();\r\n    const updateVirtualCamera = function() {\r\n      const clipPlane = new Plane();\r\n      const clipVector = new Vector4();\r\n      const q = new Vector4();\r\n      return function updateVirtualCamera2(camera) {\r\n        virtualCamera.matrixWorld.copy(camera.matrixWorld);\r\n        virtualCamera.matrixWorldInverse.copy(virtualCamera.matrixWorld).invert();\r\n        virtualCamera.projectionMatrix.copy(camera.projectionMatrix);\r\n        virtualCamera.far = camera.far;\r\n        clipPlane.copy(refractorPlane);\r\n        clipPlane.applyMatrix4(virtualCamera.matrixWorldInverse);\r\n        clipVector.set(clipPlane.normal.x, clipPlane.normal.y, clipPlane.normal.z, clipPlane.constant);\r\n        const projectionMatrix = virtualCamera.projectionMatrix;\r\n        q.x = (Math.sign(clipVector.x) + projectionMatrix.elements[8]) / projectionMatrix.elements[0];\r\n        q.y = (Math.sign(clipVector.y) + projectionMatrix.elements[9]) / projectionMatrix.elements[5];\r\n        q.z = -1;\r\n        q.w = (1 + projectionMatrix.elements[10]) / projectionMatrix.elements[14];\r\n        clipVector.multiplyScalar(2 / clipVector.dot(q));\r\n        projectionMatrix.elements[2] = clipVector.x;\r\n        projectionMatrix.elements[6] = clipVector.y;\r\n        projectionMatrix.elements[10] = clipVector.z + 1 - clipBias;\r\n        projectionMatrix.elements[14] = clipVector.w;\r\n      };\r\n    }();\r\n    function updateTextureMatrix(camera) {\r\n      textureMatrix.set(0.5, 0, 0, 0.5, 0, 0.5, 0, 0.5, 0, 0, 0.5, 0.5, 0, 0, 0, 1);\r\n      textureMatrix.multiply(camera.projectionMatrix);\r\n      textureMatrix.multiply(camera.matrixWorldInverse);\r\n      textureMatrix.multiply(scope.matrixWorld);\r\n    }\r\n    function render(renderer, scene, camera) {\r\n      scope.visible = false;\r\n      const currentRenderTarget = renderer.getRenderTarget();\r\n      const currentXrEnabled = renderer.xr.enabled;\r\n      const currentShadowAutoUpdate = renderer.shadowMap.autoUpdate;\r\n      const currentToneMapping = renderer.toneMapping;\r\n      let isSRGB = false;\r\n      if (\"outputColorSpace\" in renderer)\r\n        isSRGB = renderer.outputColorSpace === \"srgb\";\r\n      else\r\n        isSRGB = renderer.outputEncoding === 3001;\r\n      renderer.xr.enabled = false;\r\n      renderer.shadowMap.autoUpdate = false;\r\n      if (\"outputColorSpace\" in renderer)\r\n        renderer.outputColorSpace = \"linear-srgb\";\r\n      else\r\n        renderer.outputEncoding = 3e3;\r\n      renderer.toneMapping = NoToneMapping;\r\n      renderer.setRenderTarget(renderTarget);\r\n      if (renderer.autoClear === false)\r\n        renderer.clear();\r\n      renderer.render(scene, virtualCamera);\r\n      renderer.xr.enabled = currentXrEnabled;\r\n      renderer.shadowMap.autoUpdate = currentShadowAutoUpdate;\r\n      renderer.toneMapping = currentToneMapping;\r\n      renderer.setRenderTarget(currentRenderTarget);\r\n      if (\"outputColorSpace\" in renderer)\r\n        renderer.outputColorSpace = isSRGB ? \"srgb\" : \"srgb-linear\";\r\n      else\r\n        renderer.outputEncoding = isSRGB ? 3001 : 3e3;\r\n      const viewport = camera.viewport;\r\n      if (viewport !== void 0) {\r\n        renderer.state.viewport(viewport);\r\n      }\r\n      scope.visible = true;\r\n    }\r\n    this.onBeforeRender = function(renderer, scene, camera) {\r\n      if (camera.userData.refractor === true)\r\n        return;\r\n      if (!visible(camera) === true)\r\n        return;\r\n      updateRefractorPlane();\r\n      updateTextureMatrix(camera);\r\n      updateVirtualCamera(camera);\r\n      render(renderer, scene, camera);\r\n    };\r\n    this.getRenderTarget = function() {\r\n      return renderTarget;\r\n    };\r\n    this.dispose = function() {\r\n      renderTarget.dispose();\r\n      scope.material.dispose();\r\n    };\r\n  }\r\n};\r\nlet Refractor = _Refractor;\r\n__publicField(Refractor, \"RefractorShader\", {\r\n  uniforms: {\r\n    color: {\r\n      value: null\r\n    },\r\n    tDiffuse: {\r\n      value: null\r\n    },\r\n    textureMatrix: {\r\n      value: null\r\n    }\r\n  },\r\n  vertexShader: (\r\n    /* glsl */\r\n    `\r\n\r\n\t\tuniform mat4 textureMatrix;\r\n\r\n\t\tvarying vec4 vUv;\r\n\r\n\t\tvoid main() {\r\n\r\n\t\t\tvUv = textureMatrix * vec4( position, 1.0 );\r\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\r\n\r\n\t\t}`\r\n  ),\r\n  fragmentShader: (\r\n    /* glsl */\r\n    `\r\n\r\n\t\tuniform vec3 color;\r\n\t\tuniform sampler2D tDiffuse;\r\n\r\n\t\tvarying vec4 vUv;\r\n\r\n\t\tfloat blendOverlay( float base, float blend ) {\r\n\r\n\t\t\treturn( base < 0.5 ? ( 2.0 * base * blend ) : ( 1.0 - 2.0 * ( 1.0 - base ) * ( 1.0 - blend ) ) );\r\n\r\n\t\t}\r\n\r\n\t\tvec3 blendOverlay( vec3 base, vec3 blend ) {\r\n\r\n\t\t\treturn vec3( blendOverlay( base.r, blend.r ), blendOverlay( base.g, blend.g ), blendOverlay( base.b, blend.b ) );\r\n\r\n\t\t}\r\n\r\n\t\tvoid main() {\r\n\r\n\t\t\tvec4 base = texture2DProj( tDiffuse, vUv );\r\n\t\t\tgl_FragColor = vec4( blendOverlay( base.rgb, color ), 1.0 );\r\n\r\n\t\t\t#include <tonemapping_fragment>\r\n\t\t\t#include <encodings_fragment>\r\n\r\n\t\t}`\r\n  )\r\n});\r\nexport {\r\n  Refractor\r\n};\r\n", "import { Matrix4, Mesh, MeshBasicMaterial, EqualStencilFunc, IncrementStencilOp } from \"three\";\r\nconst _shadowMatrix = /* @__PURE__ */ new Matrix4();\r\nclass ShadowMesh extends Mesh {\r\n  constructor(mesh) {\r\n    const shadowMaterial = new MeshBasicMaterial({\r\n      color: 0,\r\n      transparent: true,\r\n      opacity: 0.6,\r\n      depthWrite: false,\r\n      stencilWrite: true,\r\n      stencilFunc: EqualStencilFunc,\r\n      stencilRef: 0,\r\n      stencilZPass: IncrementStencilOp\r\n    });\r\n    super(mesh.geometry, shadowMaterial);\r\n    this.isShadowMesh = true;\r\n    this.meshMatrix = mesh.matrixWorld;\r\n    this.frustumCulled = false;\r\n    this.matrixAutoUpdate = false;\r\n  }\r\n  update(plane, lightPosition4D) {\r\n    const dot = plane.normal.x * lightPosition4D.x + plane.normal.y * lightPosition4D.y + plane.normal.z * lightPosition4D.z + -plane.constant * lightPosition4D.w;\r\n    const sme = _shadowMatrix.elements;\r\n    sme[0] = dot - lightPosition4D.x * plane.normal.x;\r\n    sme[4] = -lightPosition4D.x * plane.normal.y;\r\n    sme[8] = -lightPosition4D.x * plane.normal.z;\r\n    sme[12] = -lightPosition4D.x * -plane.constant;\r\n    sme[1] = -lightPosition4D.y * plane.normal.x;\r\n    sme[5] = dot - lightPosition4D.y * plane.normal.y;\r\n    sme[9] = -lightPosition4D.y * plane.normal.z;\r\n    sme[13] = -lightPosition4D.y * -plane.constant;\r\n    sme[2] = -lightPosition4D.z * plane.normal.x;\r\n    sme[6] = -lightPosition4D.z * plane.normal.y;\r\n    sme[10] = dot - lightPosition4D.z * plane.normal.z;\r\n    sme[14] = -lightPosition4D.z * -plane.constant;\r\n    sme[3] = -lightPosition4D.w * plane.normal.x;\r\n    sme[7] = -lightPosition4D.w * plane.normal.y;\r\n    sme[11] = -lightPosition4D.w * plane.normal.z;\r\n    sme[15] = dot - lightPosition4D.w * -plane.constant;\r\n    this.matrix.multiplyMatrices(_shadowMatrix, this.meshMatrix);\r\n  }\r\n}\r\nexport {\r\n  ShadowMesh\r\n};\r\n", "var __defProp = Object.defineProperty;\r\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\r\nvar __publicField = (obj, key, value) => {\r\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\r\n  return value;\r\n};\r\nimport { BufferGeometry, InterleavedBuffer, InterleavedBufferAttribute, Mesh, MeshBasicMaterial, Vector3, DataTexture, RGBAFormat, NearestFilter, ClampToEdgeWrapping, RawShaderMaterial, Color, Vector2, AdditiveBlending, Box2, Vector4 } from \"three\";\r\nconst geometry = /* @__PURE__ */ new BufferGeometry();\r\nconst float32Array = /* @__PURE__ */ new Float32Array([-1, -1, 0, 0, 0, 1, -1, 0, 1, 0, 1, 1, 0, 1, 1, -1, 1, 0, 0, 1]);\r\nconst interleavedBuffer = /* @__PURE__ */ new InterleavedBuffer(float32Array, 5);\r\n/* @__PURE__ */ geometry.setIndex([0, 1, 2, 0, 2, 3]);\r\n/* @__PURE__ */ geometry.setAttribute(\r\n  \"position\",\r\n  /* @__PURE__ */ new InterleavedBufferAttribute(interleavedBuffer, 3, 0, false)\r\n);\r\n/* @__PURE__ */ geometry.setAttribute(\r\n  \"uv\",\r\n  /* @__PURE__ */ new InterleavedBufferAttribute(interleavedBuffer, 2, 3, false)\r\n);\r\nconst _Lensflare = class extends Mesh {\r\n  constructor() {\r\n    super(_Lensflare.Geometry, new MeshBasicMaterial({ opacity: 0, transparent: true }));\r\n    this.isLensflare = true;\r\n    this.type = \"Lensflare\";\r\n    this.frustumCulled = false;\r\n    this.renderOrder = Infinity;\r\n    const positionScreen = new Vector3();\r\n    const positionView = new Vector3();\r\n    const tempMap = new DataTexture(new Uint8Array(16 * 16 * 3), 16, 16, RGBAFormat);\r\n    tempMap.minFilter = NearestFilter;\r\n    tempMap.magFilter = NearestFilter;\r\n    tempMap.wrapS = ClampToEdgeWrapping;\r\n    tempMap.wrapT = ClampToEdgeWrapping;\r\n    const occlusionMap = new DataTexture(new Uint8Array(16 * 16 * 3), 16, 16, RGBAFormat);\r\n    occlusionMap.minFilter = NearestFilter;\r\n    occlusionMap.magFilter = NearestFilter;\r\n    occlusionMap.wrapS = ClampToEdgeWrapping;\r\n    occlusionMap.wrapT = ClampToEdgeWrapping;\r\n    const geometry2 = _Lensflare.Geometry;\r\n    const material1a = new RawShaderMaterial({\r\n      uniforms: {\r\n        scale: { value: null },\r\n        screenPosition: { value: null }\r\n      },\r\n      vertexShader: (\r\n        /* glsl */\r\n        `\r\n\r\n\t\t\t\tprecision highp float;\r\n\r\n\t\t\t\tuniform vec3 screenPosition;\r\n\t\t\t\tuniform vec2 scale;\r\n\r\n\t\t\t\tattribute vec3 position;\r\n\r\n\t\t\t\tvoid main() {\r\n\r\n\t\t\t\t\tgl_Position = vec4( position.xy * scale + screenPosition.xy, screenPosition.z, 1.0 );\r\n\r\n\t\t\t\t}`\r\n      ),\r\n      fragmentShader: (\r\n        /* glsl */\r\n        `\r\n\r\n\t\t\t\tprecision highp float;\r\n\r\n\t\t\t\tvoid main() {\r\n\r\n\t\t\t\t\tgl_FragColor = vec4( 1.0, 0.0, 1.0, 1.0 );\r\n\r\n\t\t\t\t}`\r\n      ),\r\n      depthTest: true,\r\n      depthWrite: false,\r\n      transparent: false\r\n    });\r\n    const material1b = new RawShaderMaterial({\r\n      uniforms: {\r\n        map: { value: tempMap },\r\n        scale: { value: null },\r\n        screenPosition: { value: null }\r\n      },\r\n      vertexShader: (\r\n        /* glsl */\r\n        `\r\n\r\n\t\t\t\tprecision highp float;\r\n\r\n\t\t\t\tuniform vec3 screenPosition;\r\n\t\t\t\tuniform vec2 scale;\r\n\r\n\t\t\t\tattribute vec3 position;\r\n\t\t\t\tattribute vec2 uv;\r\n\r\n\t\t\t\tvarying vec2 vUV;\r\n\r\n\t\t\t\tvoid main() {\r\n\r\n\t\t\t\t\tvUV = uv;\r\n\r\n\t\t\t\t\tgl_Position = vec4( position.xy * scale + screenPosition.xy, screenPosition.z, 1.0 );\r\n\r\n\t\t\t\t}`\r\n      ),\r\n      fragmentShader: (\r\n        /* glsl */\r\n        `\r\n\r\n\t\t\t\tprecision highp float;\r\n\r\n\t\t\t\tuniform sampler2D map;\r\n\r\n\t\t\t\tvarying vec2 vUV;\r\n\r\n\t\t\t\tvoid main() {\r\n\r\n\t\t\t\t\tgl_FragColor = texture2D( map, vUV );\r\n\r\n\t\t\t\t}`\r\n      ),\r\n      depthTest: false,\r\n      depthWrite: false,\r\n      transparent: false\r\n    });\r\n    const mesh1 = new Mesh(geometry2, material1a);\r\n    const elements = [];\r\n    const shader = LensflareElement.Shader;\r\n    const material2 = new RawShaderMaterial({\r\n      uniforms: {\r\n        map: { value: null },\r\n        occlusionMap: { value: occlusionMap },\r\n        color: { value: new Color(16777215) },\r\n        scale: { value: new Vector2() },\r\n        screenPosition: { value: new Vector3() }\r\n      },\r\n      vertexShader: shader.vertexShader,\r\n      fragmentShader: shader.fragmentShader,\r\n      blending: AdditiveBlending,\r\n      transparent: true,\r\n      depthWrite: false\r\n    });\r\n    const mesh2 = new Mesh(geometry2, material2);\r\n    this.addElement = function(element) {\r\n      elements.push(element);\r\n    };\r\n    const scale = new Vector2();\r\n    const screenPositionPixels = new Vector2();\r\n    const validArea = new Box2();\r\n    const viewport = new Vector4();\r\n    this.onBeforeRender = function(renderer, scene, camera) {\r\n      renderer.getCurrentViewport(viewport);\r\n      const invAspect = viewport.w / viewport.z;\r\n      const halfViewportWidth = viewport.z / 2;\r\n      const halfViewportHeight = viewport.w / 2;\r\n      let size = 16 / viewport.w;\r\n      scale.set(size * invAspect, size);\r\n      validArea.min.set(viewport.x, viewport.y);\r\n      validArea.max.set(viewport.x + (viewport.z - 16), viewport.y + (viewport.w - 16));\r\n      positionView.setFromMatrixPosition(this.matrixWorld);\r\n      positionView.applyMatrix4(camera.matrixWorldInverse);\r\n      if (positionView.z > 0)\r\n        return;\r\n      positionScreen.copy(positionView).applyMatrix4(camera.projectionMatrix);\r\n      screenPositionPixels.x = viewport.x + positionScreen.x * halfViewportWidth + halfViewportWidth - 8;\r\n      screenPositionPixels.y = viewport.y + positionScreen.y * halfViewportHeight + halfViewportHeight - 8;\r\n      if (validArea.containsPoint(screenPositionPixels)) {\r\n        renderer.copyFramebufferToTexture(screenPositionPixels, tempMap);\r\n        let uniforms = material1a.uniforms;\r\n        uniforms[\"scale\"].value = scale;\r\n        uniforms[\"screenPosition\"].value = positionScreen;\r\n        renderer.renderBufferDirect(camera, null, geometry2, material1a, mesh1, null);\r\n        renderer.copyFramebufferToTexture(screenPositionPixels, occlusionMap);\r\n        uniforms = material1b.uniforms;\r\n        uniforms[\"scale\"].value = scale;\r\n        uniforms[\"screenPosition\"].value = positionScreen;\r\n        renderer.renderBufferDirect(camera, null, geometry2, material1b, mesh1, null);\r\n        const vecX = -positionScreen.x * 2;\r\n        const vecY = -positionScreen.y * 2;\r\n        for (let i = 0, l = elements.length; i < l; i++) {\r\n          const element = elements[i];\r\n          const uniforms2 = material2.uniforms;\r\n          uniforms2[\"color\"].value.copy(element.color);\r\n          uniforms2[\"map\"].value = element.texture;\r\n          uniforms2[\"screenPosition\"].value.x = positionScreen.x + vecX * element.distance;\r\n          uniforms2[\"screenPosition\"].value.y = positionScreen.y + vecY * element.distance;\r\n          size = element.size / viewport.w;\r\n          const invAspect2 = viewport.w / viewport.z;\r\n          uniforms2[\"scale\"].value.set(size * invAspect2, size);\r\n          material2.uniformsNeedUpdate = true;\r\n          renderer.renderBufferDirect(camera, null, geometry2, material2, mesh2, null);\r\n        }\r\n      }\r\n    };\r\n    this.dispose = function() {\r\n      material1a.dispose();\r\n      material1b.dispose();\r\n      material2.dispose();\r\n      tempMap.dispose();\r\n      occlusionMap.dispose();\r\n      for (let i = 0, l = elements.length; i < l; i++) {\r\n        elements[i].texture.dispose();\r\n      }\r\n    };\r\n  }\r\n};\r\nlet Lensflare = _Lensflare;\r\n__publicField(Lensflare, \"Geometry\", geometry);\r\nclass LensflareElement {\r\n  constructor(texture, size = 1, distance = 0, color = new Color(16777215)) {\r\n    this.texture = texture;\r\n    this.size = size;\r\n    this.distance = distance;\r\n    this.color = color;\r\n  }\r\n}\r\n__publicField(LensflareElement, \"Shader\", {\r\n  uniforms: {\r\n    map: { value: null },\r\n    occlusionMap: { value: null },\r\n    color: { value: null },\r\n    scale: { value: null },\r\n    screenPosition: { value: null }\r\n  },\r\n  vertexShader: (\r\n    /* glsl */\r\n    `\r\n\r\n\t\tprecision highp float;\r\n\r\n\t\tuniform vec3 screenPosition;\r\n\t\tuniform vec2 scale;\r\n\r\n\t\tuniform sampler2D occlusionMap;\r\n\r\n\t\tattribute vec3 position;\r\n\t\tattribute vec2 uv;\r\n\r\n\t\tvarying vec2 vUV;\r\n\t\tvarying float vVisibility;\r\n\r\n\t\tvoid main() {\r\n\r\n\t\t\tvUV = uv;\r\n\r\n\t\t\tvec2 pos = position.xy;\r\n\r\n\t\t\tvec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );\r\n\t\t\tvisibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );\r\n\t\t\tvisibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );\r\n\t\t\tvisibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );\r\n\t\t\tvisibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );\r\n\t\t\tvisibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );\r\n\t\t\tvisibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );\r\n\t\t\tvisibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );\r\n\t\t\tvisibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );\r\n\r\n\t\t\tvVisibility =        visibility.r / 9.0;\r\n\t\t\tvVisibility *= 1.0 - visibility.g / 9.0;\r\n\t\t\tvVisibility *=       visibility.b / 9.0;\r\n\r\n\t\t\tgl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\r\n\r\n\t\t}`\r\n  ),\r\n  fragmentShader: (\r\n    /* glsl */\r\n    `\r\n\r\n\t\tprecision highp float;\r\n\r\n\t\tuniform sampler2D map;\r\n\t\tuniform vec3 color;\r\n\r\n\t\tvarying vec2 vUV;\r\n\t\tvarying float vVisibility;\r\n\r\n\t\tvoid main() {\r\n\r\n\t\t\tvec4 texture = texture2D( map, vUV );\r\n\t\t\ttexture.a *= vVisibility;\r\n\t\t\tgl_FragColor = texture;\r\n\t\t\tgl_FragColor.rgb *= color;\r\n\r\n\t\t}`\r\n  )\r\n});\r\nexport {\r\n  Lensflare,\r\n  LensflareElement\r\n};\r\n", "import { Mesh, BufferGeometry, BufferAttribute, DynamicDrawUsage, Sphere, Vector3, Color } from \"three\";\r\nclass MarchingCubes extends Mesh {\r\n  constructor(resolution, material, enableUvs = false, enableColors = false, maxPolyCount = 1e4) {\r\n    const geometry = new BufferGeometry();\r\n    super(geometry, material);\r\n    this.isMarchingCubes = true;\r\n    const scope = this;\r\n    const vlist = new Float32Array(12 * 3);\r\n    const nlist = new Float32Array(12 * 3);\r\n    const clist = new Float32Array(12 * 3);\r\n    this.enableUvs = enableUvs;\r\n    this.enableColors = enableColors;\r\n    this.init = function(resolution2) {\r\n      this.resolution = resolution2;\r\n      this.isolation = 80;\r\n      this.size = resolution2;\r\n      this.size2 = this.size * this.size;\r\n      this.size3 = this.size2 * this.size;\r\n      this.halfsize = this.size / 2;\r\n      this.delta = 2 / this.size;\r\n      this.yd = this.size;\r\n      this.zd = this.size2;\r\n      this.field = new Float32Array(this.size3);\r\n      this.normal_cache = new Float32Array(this.size3 * 3);\r\n      this.palette = new Float32Array(this.size3 * 3);\r\n      this.count = 0;\r\n      const maxVertexCount = maxPolyCount * 3;\r\n      this.positionArray = new Float32Array(maxVertexCount * 3);\r\n      const positionAttribute = new BufferAttribute(this.positionArray, 3);\r\n      positionAttribute.setUsage(DynamicDrawUsage);\r\n      geometry.setAttribute(\"position\", positionAttribute);\r\n      this.normalArray = new Float32Array(maxVertexCount * 3);\r\n      const normalAttribute = new BufferAttribute(this.normalArray, 3);\r\n      normalAttribute.setUsage(DynamicDrawUsage);\r\n      geometry.setAttribute(\"normal\", normalAttribute);\r\n      if (this.enableUvs) {\r\n        this.uvArray = new Float32Array(maxVertexCount * 2);\r\n        const uvAttribute = new BufferAttribute(this.uvArray, 2);\r\n        uvAttribute.setUsage(DynamicDrawUsage);\r\n        geometry.setAttribute(\"uv\", uvAttribute);\r\n      }\r\n      if (this.enableColors) {\r\n        this.colorArray = new Float32Array(maxVertexCount * 3);\r\n        const colorAttribute = new BufferAttribute(this.colorArray, 3);\r\n        colorAttribute.setUsage(DynamicDrawUsage);\r\n        geometry.setAttribute(\"color\", colorAttribute);\r\n      }\r\n      geometry.boundingSphere = new Sphere(new Vector3(), 1);\r\n    };\r\n    function lerp(a, b, t) {\r\n      return a + (b - a) * t;\r\n    }\r\n    function VIntX(q, offset, isol, x, y, z, valp1, valp2, c_offset1, c_offset2) {\r\n      const mu = (isol - valp1) / (valp2 - valp1), nc = scope.normal_cache;\r\n      vlist[offset + 0] = x + mu * scope.delta;\r\n      vlist[offset + 1] = y;\r\n      vlist[offset + 2] = z;\r\n      nlist[offset + 0] = lerp(nc[q + 0], nc[q + 3], mu);\r\n      nlist[offset + 1] = lerp(nc[q + 1], nc[q + 4], mu);\r\n      nlist[offset + 2] = lerp(nc[q + 2], nc[q + 5], mu);\r\n      clist[offset + 0] = lerp(scope.palette[c_offset1 * 3 + 0], scope.palette[c_offset2 * 3 + 0], mu);\r\n      clist[offset + 1] = lerp(scope.palette[c_offset1 * 3 + 1], scope.palette[c_offset2 * 3 + 1], mu);\r\n      clist[offset + 2] = lerp(scope.palette[c_offset1 * 3 + 2], scope.palette[c_offset2 * 3 + 2], mu);\r\n    }\r\n    function VIntY(q, offset, isol, x, y, z, valp1, valp2, c_offset1, c_offset2) {\r\n      const mu = (isol - valp1) / (valp2 - valp1), nc = scope.normal_cache;\r\n      vlist[offset + 0] = x;\r\n      vlist[offset + 1] = y + mu * scope.delta;\r\n      vlist[offset + 2] = z;\r\n      const q2 = q + scope.yd * 3;\r\n      nlist[offset + 0] = lerp(nc[q + 0], nc[q2 + 0], mu);\r\n      nlist[offset + 1] = lerp(nc[q + 1], nc[q2 + 1], mu);\r\n      nlist[offset + 2] = lerp(nc[q + 2], nc[q2 + 2], mu);\r\n      clist[offset + 0] = lerp(scope.palette[c_offset1 * 3 + 0], scope.palette[c_offset2 * 3 + 0], mu);\r\n      clist[offset + 1] = lerp(scope.palette[c_offset1 * 3 + 1], scope.palette[c_offset2 * 3 + 1], mu);\r\n      clist[offset + 2] = lerp(scope.palette[c_offset1 * 3 + 2], scope.palette[c_offset2 * 3 + 2], mu);\r\n    }\r\n    function VIntZ(q, offset, isol, x, y, z, valp1, valp2, c_offset1, c_offset2) {\r\n      const mu = (isol - valp1) / (valp2 - valp1), nc = scope.normal_cache;\r\n      vlist[offset + 0] = x;\r\n      vlist[offset + 1] = y;\r\n      vlist[offset + 2] = z + mu * scope.delta;\r\n      const q2 = q + scope.zd * 3;\r\n      nlist[offset + 0] = lerp(nc[q + 0], nc[q2 + 0], mu);\r\n      nlist[offset + 1] = lerp(nc[q + 1], nc[q2 + 1], mu);\r\n      nlist[offset + 2] = lerp(nc[q + 2], nc[q2 + 2], mu);\r\n      clist[offset + 0] = lerp(scope.palette[c_offset1 * 3 + 0], scope.palette[c_offset2 * 3 + 0], mu);\r\n      clist[offset + 1] = lerp(scope.palette[c_offset1 * 3 + 1], scope.palette[c_offset2 * 3 + 1], mu);\r\n      clist[offset + 2] = lerp(scope.palette[c_offset1 * 3 + 2], scope.palette[c_offset2 * 3 + 2], mu);\r\n    }\r\n    function compNorm(q) {\r\n      const q3 = q * 3;\r\n      if (scope.normal_cache[q3] === 0) {\r\n        scope.normal_cache[q3 + 0] = scope.field[q - 1] - scope.field[q + 1];\r\n        scope.normal_cache[q3 + 1] = scope.field[q - scope.yd] - scope.field[q + scope.yd];\r\n        scope.normal_cache[q3 + 2] = scope.field[q - scope.zd] - scope.field[q + scope.zd];\r\n      }\r\n    }\r\n    function polygonize(fx, fy, fz, q, isol) {\r\n      const q1 = q + 1, qy = q + scope.yd, qz = q + scope.zd, q1y = q1 + scope.yd, q1z = q1 + scope.zd, qyz = q + scope.yd + scope.zd, q1yz = q1 + scope.yd + scope.zd;\r\n      let cubeindex = 0;\r\n      const field0 = scope.field[q], field1 = scope.field[q1], field2 = scope.field[qy], field3 = scope.field[q1y], field4 = scope.field[qz], field5 = scope.field[q1z], field6 = scope.field[qyz], field7 = scope.field[q1yz];\r\n      if (field0 < isol)\r\n        cubeindex |= 1;\r\n      if (field1 < isol)\r\n        cubeindex |= 2;\r\n      if (field2 < isol)\r\n        cubeindex |= 8;\r\n      if (field3 < isol)\r\n        cubeindex |= 4;\r\n      if (field4 < isol)\r\n        cubeindex |= 16;\r\n      if (field5 < isol)\r\n        cubeindex |= 32;\r\n      if (field6 < isol)\r\n        cubeindex |= 128;\r\n      if (field7 < isol)\r\n        cubeindex |= 64;\r\n      const bits = edgeTable[cubeindex];\r\n      if (bits === 0)\r\n        return 0;\r\n      const d = scope.delta, fx2 = fx + d, fy2 = fy + d, fz2 = fz + d;\r\n      if (bits & 1) {\r\n        compNorm(q);\r\n        compNorm(q1);\r\n        VIntX(q * 3, 0, isol, fx, fy, fz, field0, field1, q, q1);\r\n      }\r\n      if (bits & 2) {\r\n        compNorm(q1);\r\n        compNorm(q1y);\r\n        VIntY(q1 * 3, 3, isol, fx2, fy, fz, field1, field3, q1, q1y);\r\n      }\r\n      if (bits & 4) {\r\n        compNorm(qy);\r\n        compNorm(q1y);\r\n        VIntX(qy * 3, 6, isol, fx, fy2, fz, field2, field3, qy, q1y);\r\n      }\r\n      if (bits & 8) {\r\n        compNorm(q);\r\n        compNorm(qy);\r\n        VIntY(q * 3, 9, isol, fx, fy, fz, field0, field2, q, qy);\r\n      }\r\n      if (bits & 16) {\r\n        compNorm(qz);\r\n        compNorm(q1z);\r\n        VIntX(qz * 3, 12, isol, fx, fy, fz2, field4, field5, qz, q1z);\r\n      }\r\n      if (bits & 32) {\r\n        compNorm(q1z);\r\n        compNorm(q1yz);\r\n        VIntY(q1z * 3, 15, isol, fx2, fy, fz2, field5, field7, q1z, q1yz);\r\n      }\r\n      if (bits & 64) {\r\n        compNorm(qyz);\r\n        compNorm(q1yz);\r\n        VIntX(qyz * 3, 18, isol, fx, fy2, fz2, field6, field7, qyz, q1yz);\r\n      }\r\n      if (bits & 128) {\r\n        compNorm(qz);\r\n        compNorm(qyz);\r\n        VIntY(qz * 3, 21, isol, fx, fy, fz2, field4, field6, qz, qyz);\r\n      }\r\n      if (bits & 256) {\r\n        compNorm(q);\r\n        compNorm(qz);\r\n        VIntZ(q * 3, 24, isol, fx, fy, fz, field0, field4, q, qz);\r\n      }\r\n      if (bits & 512) {\r\n        compNorm(q1);\r\n        compNorm(q1z);\r\n        VIntZ(q1 * 3, 27, isol, fx2, fy, fz, field1, field5, q1, q1z);\r\n      }\r\n      if (bits & 1024) {\r\n        compNorm(q1y);\r\n        compNorm(q1yz);\r\n        VIntZ(q1y * 3, 30, isol, fx2, fy2, fz, field3, field7, q1y, q1yz);\r\n      }\r\n      if (bits & 2048) {\r\n        compNorm(qy);\r\n        compNorm(qyz);\r\n        VIntZ(qy * 3, 33, isol, fx, fy2, fz, field2, field6, qy, qyz);\r\n      }\r\n      cubeindex <<= 4;\r\n      let o1, o2, o3, numtris = 0, i = 0;\r\n      while (triTable[cubeindex + i] != -1) {\r\n        o1 = cubeindex + i;\r\n        o2 = o1 + 1;\r\n        o3 = o1 + 2;\r\n        posnormtriv(vlist, nlist, clist, 3 * triTable[o1], 3 * triTable[o2], 3 * triTable[o3]);\r\n        i += 3;\r\n        numtris++;\r\n      }\r\n      return numtris;\r\n    }\r\n    function posnormtriv(pos, norm, colors, o1, o2, o3) {\r\n      const c = scope.count * 3;\r\n      scope.positionArray[c + 0] = pos[o1];\r\n      scope.positionArray[c + 1] = pos[o1 + 1];\r\n      scope.positionArray[c + 2] = pos[o1 + 2];\r\n      scope.positionArray[c + 3] = pos[o2];\r\n      scope.positionArray[c + 4] = pos[o2 + 1];\r\n      scope.positionArray[c + 5] = pos[o2 + 2];\r\n      scope.positionArray[c + 6] = pos[o3];\r\n      scope.positionArray[c + 7] = pos[o3 + 1];\r\n      scope.positionArray[c + 8] = pos[o3 + 2];\r\n      if (scope.material.flatShading === true) {\r\n        const nx = (norm[o1 + 0] + norm[o2 + 0] + norm[o3 + 0]) / 3;\r\n        const ny = (norm[o1 + 1] + norm[o2 + 1] + norm[o3 + 1]) / 3;\r\n        const nz = (norm[o1 + 2] + norm[o2 + 2] + norm[o3 + 2]) / 3;\r\n        scope.normalArray[c + 0] = nx;\r\n        scope.normalArray[c + 1] = ny;\r\n        scope.normalArray[c + 2] = nz;\r\n        scope.normalArray[c + 3] = nx;\r\n        scope.normalArray[c + 4] = ny;\r\n        scope.normalArray[c + 5] = nz;\r\n        scope.normalArray[c + 6] = nx;\r\n        scope.normalArray[c + 7] = ny;\r\n        scope.normalArray[c + 8] = nz;\r\n      } else {\r\n        scope.normalArray[c + 0] = norm[o1 + 0];\r\n        scope.normalArray[c + 1] = norm[o1 + 1];\r\n        scope.normalArray[c + 2] = norm[o1 + 2];\r\n        scope.normalArray[c + 3] = norm[o2 + 0];\r\n        scope.normalArray[c + 4] = norm[o2 + 1];\r\n        scope.normalArray[c + 5] = norm[o2 + 2];\r\n        scope.normalArray[c + 6] = norm[o3 + 0];\r\n        scope.normalArray[c + 7] = norm[o3 + 1];\r\n        scope.normalArray[c + 8] = norm[o3 + 2];\r\n      }\r\n      if (scope.enableUvs) {\r\n        const d = scope.count * 2;\r\n        scope.uvArray[d + 0] = pos[o1 + 0];\r\n        scope.uvArray[d + 1] = pos[o1 + 2];\r\n        scope.uvArray[d + 2] = pos[o2 + 0];\r\n        scope.uvArray[d + 3] = pos[o2 + 2];\r\n        scope.uvArray[d + 4] = pos[o3 + 0];\r\n        scope.uvArray[d + 5] = pos[o3 + 2];\r\n      }\r\n      if (scope.enableColors) {\r\n        scope.colorArray[c + 0] = colors[o1 + 0];\r\n        scope.colorArray[c + 1] = colors[o1 + 1];\r\n        scope.colorArray[c + 2] = colors[o1 + 2];\r\n        scope.colorArray[c + 3] = colors[o2 + 0];\r\n        scope.colorArray[c + 4] = colors[o2 + 1];\r\n        scope.colorArray[c + 5] = colors[o2 + 2];\r\n        scope.colorArray[c + 6] = colors[o3 + 0];\r\n        scope.colorArray[c + 7] = colors[o3 + 1];\r\n        scope.colorArray[c + 8] = colors[o3 + 2];\r\n      }\r\n      scope.count += 3;\r\n    }\r\n    this.addBall = function(ballx, bally, ballz, strength, subtract, colors) {\r\n      const sign = Math.sign(strength);\r\n      strength = Math.abs(strength);\r\n      const userDefineColor = !(colors === void 0 || colors === null);\r\n      let ballColor = new Color(ballx, bally, ballz);\r\n      if (userDefineColor) {\r\n        try {\r\n          ballColor = colors instanceof Color ? colors : Array.isArray(colors) ? new Color(\r\n            Math.min(Math.abs(colors[0]), 1),\r\n            Math.min(Math.abs(colors[1]), 1),\r\n            Math.min(Math.abs(colors[2]), 1)\r\n          ) : new Color(colors);\r\n        } catch (err) {\r\n          ballColor = new Color(ballx, bally, ballz);\r\n        }\r\n      }\r\n      const radius = this.size * Math.sqrt(strength / subtract), zs = ballz * this.size, ys = bally * this.size, xs = ballx * this.size;\r\n      let min_z = Math.floor(zs - radius);\r\n      if (min_z < 1)\r\n        min_z = 1;\r\n      let max_z = Math.floor(zs + radius);\r\n      if (max_z > this.size - 1)\r\n        max_z = this.size - 1;\r\n      let min_y = Math.floor(ys - radius);\r\n      if (min_y < 1)\r\n        min_y = 1;\r\n      let max_y = Math.floor(ys + radius);\r\n      if (max_y > this.size - 1)\r\n        max_y = this.size - 1;\r\n      let min_x = Math.floor(xs - radius);\r\n      if (min_x < 1)\r\n        min_x = 1;\r\n      let max_x = Math.floor(xs + radius);\r\n      if (max_x > this.size - 1)\r\n        max_x = this.size - 1;\r\n      let x, y, z, y_offset, z_offset, fx, fy, fz, fz2, fy2, val;\r\n      for (z = min_z; z < max_z; z++) {\r\n        z_offset = this.size2 * z;\r\n        fz = z / this.size - ballz;\r\n        fz2 = fz * fz;\r\n        for (y = min_y; y < max_y; y++) {\r\n          y_offset = z_offset + this.size * y;\r\n          fy = y / this.size - bally;\r\n          fy2 = fy * fy;\r\n          for (x = min_x; x < max_x; x++) {\r\n            fx = x / this.size - ballx;\r\n            val = strength / (1e-6 + fx * fx + fy2 + fz2) - subtract;\r\n            if (val > 0) {\r\n              this.field[y_offset + x] += val * sign;\r\n              const ratio = Math.sqrt((x - xs) * (x - xs) + (y - ys) * (y - ys) + (z - zs) * (z - zs)) / radius;\r\n              const contrib = 1 - ratio * ratio * ratio * (ratio * (ratio * 6 - 15) + 10);\r\n              this.palette[(y_offset + x) * 3 + 0] += ballColor.r * contrib;\r\n              this.palette[(y_offset + x) * 3 + 1] += ballColor.g * contrib;\r\n              this.palette[(y_offset + x) * 3 + 2] += ballColor.b * contrib;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    };\r\n    this.addPlaneX = function(strength, subtract) {\r\n      const size = this.size, yd = this.yd, zd = this.zd, field = this.field;\r\n      let x, y, z, xx, val, xdiv, cxy, dist = size * Math.sqrt(strength / subtract);\r\n      if (dist > size)\r\n        dist = size;\r\n      for (x = 0; x < dist; x++) {\r\n        xdiv = x / size;\r\n        xx = xdiv * xdiv;\r\n        val = strength / (1e-4 + xx) - subtract;\r\n        if (val > 0) {\r\n          for (y = 0; y < size; y++) {\r\n            cxy = x + y * yd;\r\n            for (z = 0; z < size; z++) {\r\n              field[zd * z + cxy] += val;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    };\r\n    this.addPlaneY = function(strength, subtract) {\r\n      const size = this.size, yd = this.yd, zd = this.zd, field = this.field;\r\n      let x, y, z, yy, val, ydiv, cy, cxy, dist = size * Math.sqrt(strength / subtract);\r\n      if (dist > size)\r\n        dist = size;\r\n      for (y = 0; y < dist; y++) {\r\n        ydiv = y / size;\r\n        yy = ydiv * ydiv;\r\n        val = strength / (1e-4 + yy) - subtract;\r\n        if (val > 0) {\r\n          cy = y * yd;\r\n          for (x = 0; x < size; x++) {\r\n            cxy = cy + x;\r\n            for (z = 0; z < size; z++)\r\n              field[zd * z + cxy] += val;\r\n          }\r\n        }\r\n      }\r\n    };\r\n    this.addPlaneZ = function(strength, subtract) {\r\n      const size = this.size, yd = this.yd, zd = this.zd, field = this.field;\r\n      let x, y, z, zz, val, zdiv, cz, cyz, dist = size * Math.sqrt(strength / subtract);\r\n      if (dist > size)\r\n        dist = size;\r\n      for (z = 0; z < dist; z++) {\r\n        zdiv = z / size;\r\n        zz = zdiv * zdiv;\r\n        val = strength / (1e-4 + zz) - subtract;\r\n        if (val > 0) {\r\n          cz = zd * z;\r\n          for (y = 0; y < size; y++) {\r\n            cyz = cz + y * yd;\r\n            for (x = 0; x < size; x++)\r\n              field[cyz + x] += val;\r\n          }\r\n        }\r\n      }\r\n    };\r\n    this.setCell = function(x, y, z, value) {\r\n      const index = this.size2 * z + this.size * y + x;\r\n      this.field[index] = value;\r\n    };\r\n    this.getCell = function(x, y, z) {\r\n      const index = this.size2 * z + this.size * y + x;\r\n      return this.field[index];\r\n    };\r\n    this.blur = function(intensity = 1) {\r\n      const field = this.field;\r\n      const fieldCopy = field.slice();\r\n      const size = this.size;\r\n      const size2 = this.size2;\r\n      for (let x = 0; x < size; x++) {\r\n        for (let y = 0; y < size; y++) {\r\n          for (let z = 0; z < size; z++) {\r\n            const index = size2 * z + size * y + x;\r\n            let val = fieldCopy[index];\r\n            let count = 1;\r\n            for (let x2 = -1; x2 <= 1; x2 += 2) {\r\n              const x3 = x2 + x;\r\n              if (x3 < 0 || x3 >= size)\r\n                continue;\r\n              for (let y2 = -1; y2 <= 1; y2 += 2) {\r\n                const y3 = y2 + y;\r\n                if (y3 < 0 || y3 >= size)\r\n                  continue;\r\n                for (let z2 = -1; z2 <= 1; z2 += 2) {\r\n                  const z3 = z2 + z;\r\n                  if (z3 < 0 || z3 >= size)\r\n                    continue;\r\n                  const index2 = size2 * z3 + size * y3 + x3;\r\n                  const val2 = fieldCopy[index2];\r\n                  count++;\r\n                  val += intensity * (val2 - val) / count;\r\n                }\r\n              }\r\n            }\r\n            field[index] = val;\r\n          }\r\n        }\r\n      }\r\n    };\r\n    this.reset = function() {\r\n      for (let i = 0; i < this.size3; i++) {\r\n        this.normal_cache[i * 3] = 0;\r\n        this.field[i] = 0;\r\n        this.palette[i * 3] = this.palette[i * 3 + 1] = this.palette[i * 3 + 2] = 0;\r\n      }\r\n    };\r\n    this.update = function() {\r\n      this.count = 0;\r\n      const smin2 = this.size - 2;\r\n      for (let z = 1; z < smin2; z++) {\r\n        const z_offset = this.size2 * z;\r\n        const fz = (z - this.halfsize) / this.halfsize;\r\n        for (let y = 1; y < smin2; y++) {\r\n          const y_offset = z_offset + this.size * y;\r\n          const fy = (y - this.halfsize) / this.halfsize;\r\n          for (let x = 1; x < smin2; x++) {\r\n            const fx = (x - this.halfsize) / this.halfsize;\r\n            const q = y_offset + x;\r\n            polygonize(fx, fy, fz, q, this.isolation);\r\n          }\r\n        }\r\n      }\r\n      this.geometry.setDrawRange(0, this.count);\r\n      geometry.getAttribute(\"position\").needsUpdate = true;\r\n      geometry.getAttribute(\"normal\").needsUpdate = true;\r\n      if (this.enableUvs)\r\n        geometry.getAttribute(\"uv\").needsUpdate = true;\r\n      if (this.enableColors)\r\n        geometry.getAttribute(\"color\").needsUpdate = true;\r\n      if (this.count / 3 > maxPolyCount)\r\n        console.warn(\r\n          \"THREE.MarchingCubes: Geometry buffers too small for rendering. Please create an instance with a higher poly count.\"\r\n        );\r\n    };\r\n    this.init(resolution);\r\n  }\r\n}\r\nconst edgeTable = new Int32Array([\r\n  0,\r\n  265,\r\n  515,\r\n  778,\r\n  1030,\r\n  1295,\r\n  1541,\r\n  1804,\r\n  2060,\r\n  2309,\r\n  2575,\r\n  2822,\r\n  3082,\r\n  3331,\r\n  3593,\r\n  3840,\r\n  400,\r\n  153,\r\n  915,\r\n  666,\r\n  1430,\r\n  1183,\r\n  1941,\r\n  1692,\r\n  2460,\r\n  2197,\r\n  2975,\r\n  2710,\r\n  3482,\r\n  3219,\r\n  3993,\r\n  3728,\r\n  560,\r\n  825,\r\n  51,\r\n  314,\r\n  1590,\r\n  1855,\r\n  1077,\r\n  1340,\r\n  2620,\r\n  2869,\r\n  2111,\r\n  2358,\r\n  3642,\r\n  3891,\r\n  3129,\r\n  3376,\r\n  928,\r\n  681,\r\n  419,\r\n  170,\r\n  1958,\r\n  1711,\r\n  1445,\r\n  1196,\r\n  2988,\r\n  2725,\r\n  2479,\r\n  2214,\r\n  4010,\r\n  3747,\r\n  3497,\r\n  3232,\r\n  1120,\r\n  1385,\r\n  1635,\r\n  1898,\r\n  102,\r\n  367,\r\n  613,\r\n  876,\r\n  3180,\r\n  3429,\r\n  3695,\r\n  3942,\r\n  2154,\r\n  2403,\r\n  2665,\r\n  2912,\r\n  1520,\r\n  1273,\r\n  2035,\r\n  1786,\r\n  502,\r\n  255,\r\n  1013,\r\n  764,\r\n  3580,\r\n  3317,\r\n  4095,\r\n  3830,\r\n  2554,\r\n  2291,\r\n  3065,\r\n  2800,\r\n  1616,\r\n  1881,\r\n  1107,\r\n  1370,\r\n  598,\r\n  863,\r\n  85,\r\n  348,\r\n  3676,\r\n  3925,\r\n  3167,\r\n  3414,\r\n  2650,\r\n  2899,\r\n  2137,\r\n  2384,\r\n  1984,\r\n  1737,\r\n  1475,\r\n  1226,\r\n  966,\r\n  719,\r\n  453,\r\n  204,\r\n  4044,\r\n  3781,\r\n  3535,\r\n  3270,\r\n  3018,\r\n  2755,\r\n  2505,\r\n  2240,\r\n  2240,\r\n  2505,\r\n  2755,\r\n  3018,\r\n  3270,\r\n  3535,\r\n  3781,\r\n  4044,\r\n  204,\r\n  453,\r\n  719,\r\n  966,\r\n  1226,\r\n  1475,\r\n  1737,\r\n  1984,\r\n  2384,\r\n  2137,\r\n  2899,\r\n  2650,\r\n  3414,\r\n  3167,\r\n  3925,\r\n  3676,\r\n  348,\r\n  85,\r\n  863,\r\n  598,\r\n  1370,\r\n  1107,\r\n  1881,\r\n  1616,\r\n  2800,\r\n  3065,\r\n  2291,\r\n  2554,\r\n  3830,\r\n  4095,\r\n  3317,\r\n  3580,\r\n  764,\r\n  1013,\r\n  255,\r\n  502,\r\n  1786,\r\n  2035,\r\n  1273,\r\n  1520,\r\n  2912,\r\n  2665,\r\n  2403,\r\n  2154,\r\n  3942,\r\n  3695,\r\n  3429,\r\n  3180,\r\n  876,\r\n  613,\r\n  367,\r\n  102,\r\n  1898,\r\n  1635,\r\n  1385,\r\n  1120,\r\n  3232,\r\n  3497,\r\n  3747,\r\n  4010,\r\n  2214,\r\n  2479,\r\n  2725,\r\n  2988,\r\n  1196,\r\n  1445,\r\n  1711,\r\n  1958,\r\n  170,\r\n  419,\r\n  681,\r\n  928,\r\n  3376,\r\n  3129,\r\n  3891,\r\n  3642,\r\n  2358,\r\n  2111,\r\n  2869,\r\n  2620,\r\n  1340,\r\n  1077,\r\n  1855,\r\n  1590,\r\n  314,\r\n  51,\r\n  825,\r\n  560,\r\n  3728,\r\n  3993,\r\n  3219,\r\n  3482,\r\n  2710,\r\n  2975,\r\n  2197,\r\n  2460,\r\n  1692,\r\n  1941,\r\n  1183,\r\n  1430,\r\n  666,\r\n  915,\r\n  153,\r\n  400,\r\n  3840,\r\n  3593,\r\n  3331,\r\n  3082,\r\n  2822,\r\n  2575,\r\n  2309,\r\n  2060,\r\n  1804,\r\n  1541,\r\n  1295,\r\n  1030,\r\n  778,\r\n  515,\r\n  265,\r\n  0\r\n]);\r\nconst triTable = new Int32Array([\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  0,\r\n  8,\r\n  3,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  0,\r\n  1,\r\n  9,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  1,\r\n  8,\r\n  3,\r\n  9,\r\n  8,\r\n  1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  1,\r\n  2,\r\n  10,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  0,\r\n  8,\r\n  3,\r\n  1,\r\n  2,\r\n  10,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  9,\r\n  2,\r\n  10,\r\n  0,\r\n  2,\r\n  9,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  2,\r\n  8,\r\n  3,\r\n  2,\r\n  10,\r\n  8,\r\n  10,\r\n  9,\r\n  8,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  3,\r\n  11,\r\n  2,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  0,\r\n  11,\r\n  2,\r\n  8,\r\n  11,\r\n  0,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  1,\r\n  9,\r\n  0,\r\n  2,\r\n  3,\r\n  11,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  1,\r\n  11,\r\n  2,\r\n  1,\r\n  9,\r\n  11,\r\n  9,\r\n  8,\r\n  11,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  3,\r\n  10,\r\n  1,\r\n  11,\r\n  10,\r\n  3,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  0,\r\n  10,\r\n  1,\r\n  0,\r\n  8,\r\n  10,\r\n  8,\r\n  11,\r\n  10,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  3,\r\n  9,\r\n  0,\r\n  3,\r\n  11,\r\n  9,\r\n  11,\r\n  10,\r\n  9,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  9,\r\n  8,\r\n  10,\r\n  10,\r\n  8,\r\n  11,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  4,\r\n  7,\r\n  8,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  4,\r\n  3,\r\n  0,\r\n  7,\r\n  3,\r\n  4,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  0,\r\n  1,\r\n  9,\r\n  8,\r\n  4,\r\n  7,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  4,\r\n  1,\r\n  9,\r\n  4,\r\n  7,\r\n  1,\r\n  7,\r\n  3,\r\n  1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  1,\r\n  2,\r\n  10,\r\n  8,\r\n  4,\r\n  7,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  3,\r\n  4,\r\n  7,\r\n  3,\r\n  0,\r\n  4,\r\n  1,\r\n  2,\r\n  10,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  9,\r\n  2,\r\n  10,\r\n  9,\r\n  0,\r\n  2,\r\n  8,\r\n  4,\r\n  7,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  2,\r\n  10,\r\n  9,\r\n  2,\r\n  9,\r\n  7,\r\n  2,\r\n  7,\r\n  3,\r\n  7,\r\n  9,\r\n  4,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  8,\r\n  4,\r\n  7,\r\n  3,\r\n  11,\r\n  2,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  11,\r\n  4,\r\n  7,\r\n  11,\r\n  2,\r\n  4,\r\n  2,\r\n  0,\r\n  4,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  9,\r\n  0,\r\n  1,\r\n  8,\r\n  4,\r\n  7,\r\n  2,\r\n  3,\r\n  11,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  4,\r\n  7,\r\n  11,\r\n  9,\r\n  4,\r\n  11,\r\n  9,\r\n  11,\r\n  2,\r\n  9,\r\n  2,\r\n  1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  3,\r\n  10,\r\n  1,\r\n  3,\r\n  11,\r\n  10,\r\n  7,\r\n  8,\r\n  4,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  1,\r\n  11,\r\n  10,\r\n  1,\r\n  4,\r\n  11,\r\n  1,\r\n  0,\r\n  4,\r\n  7,\r\n  11,\r\n  4,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  4,\r\n  7,\r\n  8,\r\n  9,\r\n  0,\r\n  11,\r\n  9,\r\n  11,\r\n  10,\r\n  11,\r\n  0,\r\n  3,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  4,\r\n  7,\r\n  11,\r\n  4,\r\n  11,\r\n  9,\r\n  9,\r\n  11,\r\n  10,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  9,\r\n  5,\r\n  4,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  9,\r\n  5,\r\n  4,\r\n  0,\r\n  8,\r\n  3,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  0,\r\n  5,\r\n  4,\r\n  1,\r\n  5,\r\n  0,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  8,\r\n  5,\r\n  4,\r\n  8,\r\n  3,\r\n  5,\r\n  3,\r\n  1,\r\n  5,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  1,\r\n  2,\r\n  10,\r\n  9,\r\n  5,\r\n  4,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  3,\r\n  0,\r\n  8,\r\n  1,\r\n  2,\r\n  10,\r\n  4,\r\n  9,\r\n  5,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  5,\r\n  2,\r\n  10,\r\n  5,\r\n  4,\r\n  2,\r\n  4,\r\n  0,\r\n  2,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  2,\r\n  10,\r\n  5,\r\n  3,\r\n  2,\r\n  5,\r\n  3,\r\n  5,\r\n  4,\r\n  3,\r\n  4,\r\n  8,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  9,\r\n  5,\r\n  4,\r\n  2,\r\n  3,\r\n  11,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  0,\r\n  11,\r\n  2,\r\n  0,\r\n  8,\r\n  11,\r\n  4,\r\n  9,\r\n  5,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  0,\r\n  5,\r\n  4,\r\n  0,\r\n  1,\r\n  5,\r\n  2,\r\n  3,\r\n  11,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  2,\r\n  1,\r\n  5,\r\n  2,\r\n  5,\r\n  8,\r\n  2,\r\n  8,\r\n  11,\r\n  4,\r\n  8,\r\n  5,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  10,\r\n  3,\r\n  11,\r\n  10,\r\n  1,\r\n  3,\r\n  9,\r\n  5,\r\n  4,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  4,\r\n  9,\r\n  5,\r\n  0,\r\n  8,\r\n  1,\r\n  8,\r\n  10,\r\n  1,\r\n  8,\r\n  11,\r\n  10,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  5,\r\n  4,\r\n  0,\r\n  5,\r\n  0,\r\n  11,\r\n  5,\r\n  11,\r\n  10,\r\n  11,\r\n  0,\r\n  3,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  5,\r\n  4,\r\n  8,\r\n  5,\r\n  8,\r\n  10,\r\n  10,\r\n  8,\r\n  11,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  9,\r\n  7,\r\n  8,\r\n  5,\r\n  7,\r\n  9,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  9,\r\n  3,\r\n  0,\r\n  9,\r\n  5,\r\n  3,\r\n  5,\r\n  7,\r\n  3,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  0,\r\n  7,\r\n  8,\r\n  0,\r\n  1,\r\n  7,\r\n  1,\r\n  5,\r\n  7,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  1,\r\n  5,\r\n  3,\r\n  3,\r\n  5,\r\n  7,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  9,\r\n  7,\r\n  8,\r\n  9,\r\n  5,\r\n  7,\r\n  10,\r\n  1,\r\n  2,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  10,\r\n  1,\r\n  2,\r\n  9,\r\n  5,\r\n  0,\r\n  5,\r\n  3,\r\n  0,\r\n  5,\r\n  7,\r\n  3,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  8,\r\n  0,\r\n  2,\r\n  8,\r\n  2,\r\n  5,\r\n  8,\r\n  5,\r\n  7,\r\n  10,\r\n  5,\r\n  2,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  2,\r\n  10,\r\n  5,\r\n  2,\r\n  5,\r\n  3,\r\n  3,\r\n  5,\r\n  7,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  7,\r\n  9,\r\n  5,\r\n  7,\r\n  8,\r\n  9,\r\n  3,\r\n  11,\r\n  2,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  9,\r\n  5,\r\n  7,\r\n  9,\r\n  7,\r\n  2,\r\n  9,\r\n  2,\r\n  0,\r\n  2,\r\n  7,\r\n  11,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  2,\r\n  3,\r\n  11,\r\n  0,\r\n  1,\r\n  8,\r\n  1,\r\n  7,\r\n  8,\r\n  1,\r\n  5,\r\n  7,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  11,\r\n  2,\r\n  1,\r\n  11,\r\n  1,\r\n  7,\r\n  7,\r\n  1,\r\n  5,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  9,\r\n  5,\r\n  8,\r\n  8,\r\n  5,\r\n  7,\r\n  10,\r\n  1,\r\n  3,\r\n  10,\r\n  3,\r\n  11,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  5,\r\n  7,\r\n  0,\r\n  5,\r\n  0,\r\n  9,\r\n  7,\r\n  11,\r\n  0,\r\n  1,\r\n  0,\r\n  10,\r\n  11,\r\n  10,\r\n  0,\r\n  -1,\r\n  11,\r\n  10,\r\n  0,\r\n  11,\r\n  0,\r\n  3,\r\n  10,\r\n  5,\r\n  0,\r\n  8,\r\n  0,\r\n  7,\r\n  5,\r\n  7,\r\n  0,\r\n  -1,\r\n  11,\r\n  10,\r\n  5,\r\n  7,\r\n  11,\r\n  5,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  10,\r\n  6,\r\n  5,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  0,\r\n  8,\r\n  3,\r\n  5,\r\n  10,\r\n  6,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  9,\r\n  0,\r\n  1,\r\n  5,\r\n  10,\r\n  6,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  1,\r\n  8,\r\n  3,\r\n  1,\r\n  9,\r\n  8,\r\n  5,\r\n  10,\r\n  6,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  1,\r\n  6,\r\n  5,\r\n  2,\r\n  6,\r\n  1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  1,\r\n  6,\r\n  5,\r\n  1,\r\n  2,\r\n  6,\r\n  3,\r\n  0,\r\n  8,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  9,\r\n  6,\r\n  5,\r\n  9,\r\n  0,\r\n  6,\r\n  0,\r\n  2,\r\n  6,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  5,\r\n  9,\r\n  8,\r\n  5,\r\n  8,\r\n  2,\r\n  5,\r\n  2,\r\n  6,\r\n  3,\r\n  2,\r\n  8,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  2,\r\n  3,\r\n  11,\r\n  10,\r\n  6,\r\n  5,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  11,\r\n  0,\r\n  8,\r\n  11,\r\n  2,\r\n  0,\r\n  10,\r\n  6,\r\n  5,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  0,\r\n  1,\r\n  9,\r\n  2,\r\n  3,\r\n  11,\r\n  5,\r\n  10,\r\n  6,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  5,\r\n  10,\r\n  6,\r\n  1,\r\n  9,\r\n  2,\r\n  9,\r\n  11,\r\n  2,\r\n  9,\r\n  8,\r\n  11,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  6,\r\n  3,\r\n  11,\r\n  6,\r\n  5,\r\n  3,\r\n  5,\r\n  1,\r\n  3,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  0,\r\n  8,\r\n  11,\r\n  0,\r\n  11,\r\n  5,\r\n  0,\r\n  5,\r\n  1,\r\n  5,\r\n  11,\r\n  6,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  3,\r\n  11,\r\n  6,\r\n  0,\r\n  3,\r\n  6,\r\n  0,\r\n  6,\r\n  5,\r\n  0,\r\n  5,\r\n  9,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  6,\r\n  5,\r\n  9,\r\n  6,\r\n  9,\r\n  11,\r\n  11,\r\n  9,\r\n  8,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  5,\r\n  10,\r\n  6,\r\n  4,\r\n  7,\r\n  8,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  4,\r\n  3,\r\n  0,\r\n  4,\r\n  7,\r\n  3,\r\n  6,\r\n  5,\r\n  10,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  1,\r\n  9,\r\n  0,\r\n  5,\r\n  10,\r\n  6,\r\n  8,\r\n  4,\r\n  7,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  10,\r\n  6,\r\n  5,\r\n  1,\r\n  9,\r\n  7,\r\n  1,\r\n  7,\r\n  3,\r\n  7,\r\n  9,\r\n  4,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  6,\r\n  1,\r\n  2,\r\n  6,\r\n  5,\r\n  1,\r\n  4,\r\n  7,\r\n  8,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  1,\r\n  2,\r\n  5,\r\n  5,\r\n  2,\r\n  6,\r\n  3,\r\n  0,\r\n  4,\r\n  3,\r\n  4,\r\n  7,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  8,\r\n  4,\r\n  7,\r\n  9,\r\n  0,\r\n  5,\r\n  0,\r\n  6,\r\n  5,\r\n  0,\r\n  2,\r\n  6,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  7,\r\n  3,\r\n  9,\r\n  7,\r\n  9,\r\n  4,\r\n  3,\r\n  2,\r\n  9,\r\n  5,\r\n  9,\r\n  6,\r\n  2,\r\n  6,\r\n  9,\r\n  -1,\r\n  3,\r\n  11,\r\n  2,\r\n  7,\r\n  8,\r\n  4,\r\n  10,\r\n  6,\r\n  5,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  5,\r\n  10,\r\n  6,\r\n  4,\r\n  7,\r\n  2,\r\n  4,\r\n  2,\r\n  0,\r\n  2,\r\n  7,\r\n  11,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  0,\r\n  1,\r\n  9,\r\n  4,\r\n  7,\r\n  8,\r\n  2,\r\n  3,\r\n  11,\r\n  5,\r\n  10,\r\n  6,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  9,\r\n  2,\r\n  1,\r\n  9,\r\n  11,\r\n  2,\r\n  9,\r\n  4,\r\n  11,\r\n  7,\r\n  11,\r\n  4,\r\n  5,\r\n  10,\r\n  6,\r\n  -1,\r\n  8,\r\n  4,\r\n  7,\r\n  3,\r\n  11,\r\n  5,\r\n  3,\r\n  5,\r\n  1,\r\n  5,\r\n  11,\r\n  6,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  5,\r\n  1,\r\n  11,\r\n  5,\r\n  11,\r\n  6,\r\n  1,\r\n  0,\r\n  11,\r\n  7,\r\n  11,\r\n  4,\r\n  0,\r\n  4,\r\n  11,\r\n  -1,\r\n  0,\r\n  5,\r\n  9,\r\n  0,\r\n  6,\r\n  5,\r\n  0,\r\n  3,\r\n  6,\r\n  11,\r\n  6,\r\n  3,\r\n  8,\r\n  4,\r\n  7,\r\n  -1,\r\n  6,\r\n  5,\r\n  9,\r\n  6,\r\n  9,\r\n  11,\r\n  4,\r\n  7,\r\n  9,\r\n  7,\r\n  11,\r\n  9,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  10,\r\n  4,\r\n  9,\r\n  6,\r\n  4,\r\n  10,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  4,\r\n  10,\r\n  6,\r\n  4,\r\n  9,\r\n  10,\r\n  0,\r\n  8,\r\n  3,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  10,\r\n  0,\r\n  1,\r\n  10,\r\n  6,\r\n  0,\r\n  6,\r\n  4,\r\n  0,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  8,\r\n  3,\r\n  1,\r\n  8,\r\n  1,\r\n  6,\r\n  8,\r\n  6,\r\n  4,\r\n  6,\r\n  1,\r\n  10,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  1,\r\n  4,\r\n  9,\r\n  1,\r\n  2,\r\n  4,\r\n  2,\r\n  6,\r\n  4,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  3,\r\n  0,\r\n  8,\r\n  1,\r\n  2,\r\n  9,\r\n  2,\r\n  4,\r\n  9,\r\n  2,\r\n  6,\r\n  4,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  0,\r\n  2,\r\n  4,\r\n  4,\r\n  2,\r\n  6,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  8,\r\n  3,\r\n  2,\r\n  8,\r\n  2,\r\n  4,\r\n  4,\r\n  2,\r\n  6,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  10,\r\n  4,\r\n  9,\r\n  10,\r\n  6,\r\n  4,\r\n  11,\r\n  2,\r\n  3,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  0,\r\n  8,\r\n  2,\r\n  2,\r\n  8,\r\n  11,\r\n  4,\r\n  9,\r\n  10,\r\n  4,\r\n  10,\r\n  6,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  3,\r\n  11,\r\n  2,\r\n  0,\r\n  1,\r\n  6,\r\n  0,\r\n  6,\r\n  4,\r\n  6,\r\n  1,\r\n  10,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  6,\r\n  4,\r\n  1,\r\n  6,\r\n  1,\r\n  10,\r\n  4,\r\n  8,\r\n  1,\r\n  2,\r\n  1,\r\n  11,\r\n  8,\r\n  11,\r\n  1,\r\n  -1,\r\n  9,\r\n  6,\r\n  4,\r\n  9,\r\n  3,\r\n  6,\r\n  9,\r\n  1,\r\n  3,\r\n  11,\r\n  6,\r\n  3,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  8,\r\n  11,\r\n  1,\r\n  8,\r\n  1,\r\n  0,\r\n  11,\r\n  6,\r\n  1,\r\n  9,\r\n  1,\r\n  4,\r\n  6,\r\n  4,\r\n  1,\r\n  -1,\r\n  3,\r\n  11,\r\n  6,\r\n  3,\r\n  6,\r\n  0,\r\n  0,\r\n  6,\r\n  4,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  6,\r\n  4,\r\n  8,\r\n  11,\r\n  6,\r\n  8,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  7,\r\n  10,\r\n  6,\r\n  7,\r\n  8,\r\n  10,\r\n  8,\r\n  9,\r\n  10,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  0,\r\n  7,\r\n  3,\r\n  0,\r\n  10,\r\n  7,\r\n  0,\r\n  9,\r\n  10,\r\n  6,\r\n  7,\r\n  10,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  10,\r\n  6,\r\n  7,\r\n  1,\r\n  10,\r\n  7,\r\n  1,\r\n  7,\r\n  8,\r\n  1,\r\n  8,\r\n  0,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  10,\r\n  6,\r\n  7,\r\n  10,\r\n  7,\r\n  1,\r\n  1,\r\n  7,\r\n  3,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  1,\r\n  2,\r\n  6,\r\n  1,\r\n  6,\r\n  8,\r\n  1,\r\n  8,\r\n  9,\r\n  8,\r\n  6,\r\n  7,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  2,\r\n  6,\r\n  9,\r\n  2,\r\n  9,\r\n  1,\r\n  6,\r\n  7,\r\n  9,\r\n  0,\r\n  9,\r\n  3,\r\n  7,\r\n  3,\r\n  9,\r\n  -1,\r\n  7,\r\n  8,\r\n  0,\r\n  7,\r\n  0,\r\n  6,\r\n  6,\r\n  0,\r\n  2,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  7,\r\n  3,\r\n  2,\r\n  6,\r\n  7,\r\n  2,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  2,\r\n  3,\r\n  11,\r\n  10,\r\n  6,\r\n  8,\r\n  10,\r\n  8,\r\n  9,\r\n  8,\r\n  6,\r\n  7,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  2,\r\n  0,\r\n  7,\r\n  2,\r\n  7,\r\n  11,\r\n  0,\r\n  9,\r\n  7,\r\n  6,\r\n  7,\r\n  10,\r\n  9,\r\n  10,\r\n  7,\r\n  -1,\r\n  1,\r\n  8,\r\n  0,\r\n  1,\r\n  7,\r\n  8,\r\n  1,\r\n  10,\r\n  7,\r\n  6,\r\n  7,\r\n  10,\r\n  2,\r\n  3,\r\n  11,\r\n  -1,\r\n  11,\r\n  2,\r\n  1,\r\n  11,\r\n  1,\r\n  7,\r\n  10,\r\n  6,\r\n  1,\r\n  6,\r\n  7,\r\n  1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  8,\r\n  9,\r\n  6,\r\n  8,\r\n  6,\r\n  7,\r\n  9,\r\n  1,\r\n  6,\r\n  11,\r\n  6,\r\n  3,\r\n  1,\r\n  3,\r\n  6,\r\n  -1,\r\n  0,\r\n  9,\r\n  1,\r\n  11,\r\n  6,\r\n  7,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  7,\r\n  8,\r\n  0,\r\n  7,\r\n  0,\r\n  6,\r\n  3,\r\n  11,\r\n  0,\r\n  11,\r\n  6,\r\n  0,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  7,\r\n  11,\r\n  6,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  7,\r\n  6,\r\n  11,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  3,\r\n  0,\r\n  8,\r\n  11,\r\n  7,\r\n  6,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  0,\r\n  1,\r\n  9,\r\n  11,\r\n  7,\r\n  6,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  8,\r\n  1,\r\n  9,\r\n  8,\r\n  3,\r\n  1,\r\n  11,\r\n  7,\r\n  6,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  10,\r\n  1,\r\n  2,\r\n  6,\r\n  11,\r\n  7,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  1,\r\n  2,\r\n  10,\r\n  3,\r\n  0,\r\n  8,\r\n  6,\r\n  11,\r\n  7,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  2,\r\n  9,\r\n  0,\r\n  2,\r\n  10,\r\n  9,\r\n  6,\r\n  11,\r\n  7,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  6,\r\n  11,\r\n  7,\r\n  2,\r\n  10,\r\n  3,\r\n  10,\r\n  8,\r\n  3,\r\n  10,\r\n  9,\r\n  8,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  7,\r\n  2,\r\n  3,\r\n  6,\r\n  2,\r\n  7,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  7,\r\n  0,\r\n  8,\r\n  7,\r\n  6,\r\n  0,\r\n  6,\r\n  2,\r\n  0,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  2,\r\n  7,\r\n  6,\r\n  2,\r\n  3,\r\n  7,\r\n  0,\r\n  1,\r\n  9,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  1,\r\n  6,\r\n  2,\r\n  1,\r\n  8,\r\n  6,\r\n  1,\r\n  9,\r\n  8,\r\n  8,\r\n  7,\r\n  6,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  10,\r\n  7,\r\n  6,\r\n  10,\r\n  1,\r\n  7,\r\n  1,\r\n  3,\r\n  7,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  10,\r\n  7,\r\n  6,\r\n  1,\r\n  7,\r\n  10,\r\n  1,\r\n  8,\r\n  7,\r\n  1,\r\n  0,\r\n  8,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  0,\r\n  3,\r\n  7,\r\n  0,\r\n  7,\r\n  10,\r\n  0,\r\n  10,\r\n  9,\r\n  6,\r\n  10,\r\n  7,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  7,\r\n  6,\r\n  10,\r\n  7,\r\n  10,\r\n  8,\r\n  8,\r\n  10,\r\n  9,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  6,\r\n  8,\r\n  4,\r\n  11,\r\n  8,\r\n  6,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  3,\r\n  6,\r\n  11,\r\n  3,\r\n  0,\r\n  6,\r\n  0,\r\n  4,\r\n  6,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  8,\r\n  6,\r\n  11,\r\n  8,\r\n  4,\r\n  6,\r\n  9,\r\n  0,\r\n  1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  9,\r\n  4,\r\n  6,\r\n  9,\r\n  6,\r\n  3,\r\n  9,\r\n  3,\r\n  1,\r\n  11,\r\n  3,\r\n  6,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  6,\r\n  8,\r\n  4,\r\n  6,\r\n  11,\r\n  8,\r\n  2,\r\n  10,\r\n  1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  1,\r\n  2,\r\n  10,\r\n  3,\r\n  0,\r\n  11,\r\n  0,\r\n  6,\r\n  11,\r\n  0,\r\n  4,\r\n  6,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  4,\r\n  11,\r\n  8,\r\n  4,\r\n  6,\r\n  11,\r\n  0,\r\n  2,\r\n  9,\r\n  2,\r\n  10,\r\n  9,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  10,\r\n  9,\r\n  3,\r\n  10,\r\n  3,\r\n  2,\r\n  9,\r\n  4,\r\n  3,\r\n  11,\r\n  3,\r\n  6,\r\n  4,\r\n  6,\r\n  3,\r\n  -1,\r\n  8,\r\n  2,\r\n  3,\r\n  8,\r\n  4,\r\n  2,\r\n  4,\r\n  6,\r\n  2,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  0,\r\n  4,\r\n  2,\r\n  4,\r\n  6,\r\n  2,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  1,\r\n  9,\r\n  0,\r\n  2,\r\n  3,\r\n  4,\r\n  2,\r\n  4,\r\n  6,\r\n  4,\r\n  3,\r\n  8,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  1,\r\n  9,\r\n  4,\r\n  1,\r\n  4,\r\n  2,\r\n  2,\r\n  4,\r\n  6,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  8,\r\n  1,\r\n  3,\r\n  8,\r\n  6,\r\n  1,\r\n  8,\r\n  4,\r\n  6,\r\n  6,\r\n  10,\r\n  1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  10,\r\n  1,\r\n  0,\r\n  10,\r\n  0,\r\n  6,\r\n  6,\r\n  0,\r\n  4,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  4,\r\n  6,\r\n  3,\r\n  4,\r\n  3,\r\n  8,\r\n  6,\r\n  10,\r\n  3,\r\n  0,\r\n  3,\r\n  9,\r\n  10,\r\n  9,\r\n  3,\r\n  -1,\r\n  10,\r\n  9,\r\n  4,\r\n  6,\r\n  10,\r\n  4,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  4,\r\n  9,\r\n  5,\r\n  7,\r\n  6,\r\n  11,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  0,\r\n  8,\r\n  3,\r\n  4,\r\n  9,\r\n  5,\r\n  11,\r\n  7,\r\n  6,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  5,\r\n  0,\r\n  1,\r\n  5,\r\n  4,\r\n  0,\r\n  7,\r\n  6,\r\n  11,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  11,\r\n  7,\r\n  6,\r\n  8,\r\n  3,\r\n  4,\r\n  3,\r\n  5,\r\n  4,\r\n  3,\r\n  1,\r\n  5,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  9,\r\n  5,\r\n  4,\r\n  10,\r\n  1,\r\n  2,\r\n  7,\r\n  6,\r\n  11,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  6,\r\n  11,\r\n  7,\r\n  1,\r\n  2,\r\n  10,\r\n  0,\r\n  8,\r\n  3,\r\n  4,\r\n  9,\r\n  5,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  7,\r\n  6,\r\n  11,\r\n  5,\r\n  4,\r\n  10,\r\n  4,\r\n  2,\r\n  10,\r\n  4,\r\n  0,\r\n  2,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  3,\r\n  4,\r\n  8,\r\n  3,\r\n  5,\r\n  4,\r\n  3,\r\n  2,\r\n  5,\r\n  10,\r\n  5,\r\n  2,\r\n  11,\r\n  7,\r\n  6,\r\n  -1,\r\n  7,\r\n  2,\r\n  3,\r\n  7,\r\n  6,\r\n  2,\r\n  5,\r\n  4,\r\n  9,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  9,\r\n  5,\r\n  4,\r\n  0,\r\n  8,\r\n  6,\r\n  0,\r\n  6,\r\n  2,\r\n  6,\r\n  8,\r\n  7,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  3,\r\n  6,\r\n  2,\r\n  3,\r\n  7,\r\n  6,\r\n  1,\r\n  5,\r\n  0,\r\n  5,\r\n  4,\r\n  0,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  6,\r\n  2,\r\n  8,\r\n  6,\r\n  8,\r\n  7,\r\n  2,\r\n  1,\r\n  8,\r\n  4,\r\n  8,\r\n  5,\r\n  1,\r\n  5,\r\n  8,\r\n  -1,\r\n  9,\r\n  5,\r\n  4,\r\n  10,\r\n  1,\r\n  6,\r\n  1,\r\n  7,\r\n  6,\r\n  1,\r\n  3,\r\n  7,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  1,\r\n  6,\r\n  10,\r\n  1,\r\n  7,\r\n  6,\r\n  1,\r\n  0,\r\n  7,\r\n  8,\r\n  7,\r\n  0,\r\n  9,\r\n  5,\r\n  4,\r\n  -1,\r\n  4,\r\n  0,\r\n  10,\r\n  4,\r\n  10,\r\n  5,\r\n  0,\r\n  3,\r\n  10,\r\n  6,\r\n  10,\r\n  7,\r\n  3,\r\n  7,\r\n  10,\r\n  -1,\r\n  7,\r\n  6,\r\n  10,\r\n  7,\r\n  10,\r\n  8,\r\n  5,\r\n  4,\r\n  10,\r\n  4,\r\n  8,\r\n  10,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  6,\r\n  9,\r\n  5,\r\n  6,\r\n  11,\r\n  9,\r\n  11,\r\n  8,\r\n  9,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  3,\r\n  6,\r\n  11,\r\n  0,\r\n  6,\r\n  3,\r\n  0,\r\n  5,\r\n  6,\r\n  0,\r\n  9,\r\n  5,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  0,\r\n  11,\r\n  8,\r\n  0,\r\n  5,\r\n  11,\r\n  0,\r\n  1,\r\n  5,\r\n  5,\r\n  6,\r\n  11,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  6,\r\n  11,\r\n  3,\r\n  6,\r\n  3,\r\n  5,\r\n  5,\r\n  3,\r\n  1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  1,\r\n  2,\r\n  10,\r\n  9,\r\n  5,\r\n  11,\r\n  9,\r\n  11,\r\n  8,\r\n  11,\r\n  5,\r\n  6,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  0,\r\n  11,\r\n  3,\r\n  0,\r\n  6,\r\n  11,\r\n  0,\r\n  9,\r\n  6,\r\n  5,\r\n  6,\r\n  9,\r\n  1,\r\n  2,\r\n  10,\r\n  -1,\r\n  11,\r\n  8,\r\n  5,\r\n  11,\r\n  5,\r\n  6,\r\n  8,\r\n  0,\r\n  5,\r\n  10,\r\n  5,\r\n  2,\r\n  0,\r\n  2,\r\n  5,\r\n  -1,\r\n  6,\r\n  11,\r\n  3,\r\n  6,\r\n  3,\r\n  5,\r\n  2,\r\n  10,\r\n  3,\r\n  10,\r\n  5,\r\n  3,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  5,\r\n  8,\r\n  9,\r\n  5,\r\n  2,\r\n  8,\r\n  5,\r\n  6,\r\n  2,\r\n  3,\r\n  8,\r\n  2,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  9,\r\n  5,\r\n  6,\r\n  9,\r\n  6,\r\n  0,\r\n  0,\r\n  6,\r\n  2,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  1,\r\n  5,\r\n  8,\r\n  1,\r\n  8,\r\n  0,\r\n  5,\r\n  6,\r\n  8,\r\n  3,\r\n  8,\r\n  2,\r\n  6,\r\n  2,\r\n  8,\r\n  -1,\r\n  1,\r\n  5,\r\n  6,\r\n  2,\r\n  1,\r\n  6,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  1,\r\n  3,\r\n  6,\r\n  1,\r\n  6,\r\n  10,\r\n  3,\r\n  8,\r\n  6,\r\n  5,\r\n  6,\r\n  9,\r\n  8,\r\n  9,\r\n  6,\r\n  -1,\r\n  10,\r\n  1,\r\n  0,\r\n  10,\r\n  0,\r\n  6,\r\n  9,\r\n  5,\r\n  0,\r\n  5,\r\n  6,\r\n  0,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  0,\r\n  3,\r\n  8,\r\n  5,\r\n  6,\r\n  10,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  10,\r\n  5,\r\n  6,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  11,\r\n  5,\r\n  10,\r\n  7,\r\n  5,\r\n  11,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  11,\r\n  5,\r\n  10,\r\n  11,\r\n  7,\r\n  5,\r\n  8,\r\n  3,\r\n  0,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  5,\r\n  11,\r\n  7,\r\n  5,\r\n  10,\r\n  11,\r\n  1,\r\n  9,\r\n  0,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  10,\r\n  7,\r\n  5,\r\n  10,\r\n  11,\r\n  7,\r\n  9,\r\n  8,\r\n  1,\r\n  8,\r\n  3,\r\n  1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  11,\r\n  1,\r\n  2,\r\n  11,\r\n  7,\r\n  1,\r\n  7,\r\n  5,\r\n  1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  0,\r\n  8,\r\n  3,\r\n  1,\r\n  2,\r\n  7,\r\n  1,\r\n  7,\r\n  5,\r\n  7,\r\n  2,\r\n  11,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  9,\r\n  7,\r\n  5,\r\n  9,\r\n  2,\r\n  7,\r\n  9,\r\n  0,\r\n  2,\r\n  2,\r\n  11,\r\n  7,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  7,\r\n  5,\r\n  2,\r\n  7,\r\n  2,\r\n  11,\r\n  5,\r\n  9,\r\n  2,\r\n  3,\r\n  2,\r\n  8,\r\n  9,\r\n  8,\r\n  2,\r\n  -1,\r\n  2,\r\n  5,\r\n  10,\r\n  2,\r\n  3,\r\n  5,\r\n  3,\r\n  7,\r\n  5,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  8,\r\n  2,\r\n  0,\r\n  8,\r\n  5,\r\n  2,\r\n  8,\r\n  7,\r\n  5,\r\n  10,\r\n  2,\r\n  5,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  9,\r\n  0,\r\n  1,\r\n  5,\r\n  10,\r\n  3,\r\n  5,\r\n  3,\r\n  7,\r\n  3,\r\n  10,\r\n  2,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  9,\r\n  8,\r\n  2,\r\n  9,\r\n  2,\r\n  1,\r\n  8,\r\n  7,\r\n  2,\r\n  10,\r\n  2,\r\n  5,\r\n  7,\r\n  5,\r\n  2,\r\n  -1,\r\n  1,\r\n  3,\r\n  5,\r\n  3,\r\n  7,\r\n  5,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  0,\r\n  8,\r\n  7,\r\n  0,\r\n  7,\r\n  1,\r\n  1,\r\n  7,\r\n  5,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  9,\r\n  0,\r\n  3,\r\n  9,\r\n  3,\r\n  5,\r\n  5,\r\n  3,\r\n  7,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  9,\r\n  8,\r\n  7,\r\n  5,\r\n  9,\r\n  7,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  5,\r\n  8,\r\n  4,\r\n  5,\r\n  10,\r\n  8,\r\n  10,\r\n  11,\r\n  8,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  5,\r\n  0,\r\n  4,\r\n  5,\r\n  11,\r\n  0,\r\n  5,\r\n  10,\r\n  11,\r\n  11,\r\n  3,\r\n  0,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  0,\r\n  1,\r\n  9,\r\n  8,\r\n  4,\r\n  10,\r\n  8,\r\n  10,\r\n  11,\r\n  10,\r\n  4,\r\n  5,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  10,\r\n  11,\r\n  4,\r\n  10,\r\n  4,\r\n  5,\r\n  11,\r\n  3,\r\n  4,\r\n  9,\r\n  4,\r\n  1,\r\n  3,\r\n  1,\r\n  4,\r\n  -1,\r\n  2,\r\n  5,\r\n  1,\r\n  2,\r\n  8,\r\n  5,\r\n  2,\r\n  11,\r\n  8,\r\n  4,\r\n  5,\r\n  8,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  0,\r\n  4,\r\n  11,\r\n  0,\r\n  11,\r\n  3,\r\n  4,\r\n  5,\r\n  11,\r\n  2,\r\n  11,\r\n  1,\r\n  5,\r\n  1,\r\n  11,\r\n  -1,\r\n  0,\r\n  2,\r\n  5,\r\n  0,\r\n  5,\r\n  9,\r\n  2,\r\n  11,\r\n  5,\r\n  4,\r\n  5,\r\n  8,\r\n  11,\r\n  8,\r\n  5,\r\n  -1,\r\n  9,\r\n  4,\r\n  5,\r\n  2,\r\n  11,\r\n  3,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  2,\r\n  5,\r\n  10,\r\n  3,\r\n  5,\r\n  2,\r\n  3,\r\n  4,\r\n  5,\r\n  3,\r\n  8,\r\n  4,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  5,\r\n  10,\r\n  2,\r\n  5,\r\n  2,\r\n  4,\r\n  4,\r\n  2,\r\n  0,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  3,\r\n  10,\r\n  2,\r\n  3,\r\n  5,\r\n  10,\r\n  3,\r\n  8,\r\n  5,\r\n  4,\r\n  5,\r\n  8,\r\n  0,\r\n  1,\r\n  9,\r\n  -1,\r\n  5,\r\n  10,\r\n  2,\r\n  5,\r\n  2,\r\n  4,\r\n  1,\r\n  9,\r\n  2,\r\n  9,\r\n  4,\r\n  2,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  8,\r\n  4,\r\n  5,\r\n  8,\r\n  5,\r\n  3,\r\n  3,\r\n  5,\r\n  1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  0,\r\n  4,\r\n  5,\r\n  1,\r\n  0,\r\n  5,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  8,\r\n  4,\r\n  5,\r\n  8,\r\n  5,\r\n  3,\r\n  9,\r\n  0,\r\n  5,\r\n  0,\r\n  3,\r\n  5,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  9,\r\n  4,\r\n  5,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  4,\r\n  11,\r\n  7,\r\n  4,\r\n  9,\r\n  11,\r\n  9,\r\n  10,\r\n  11,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  0,\r\n  8,\r\n  3,\r\n  4,\r\n  9,\r\n  7,\r\n  9,\r\n  11,\r\n  7,\r\n  9,\r\n  10,\r\n  11,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  1,\r\n  10,\r\n  11,\r\n  1,\r\n  11,\r\n  4,\r\n  1,\r\n  4,\r\n  0,\r\n  7,\r\n  4,\r\n  11,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  3,\r\n  1,\r\n  4,\r\n  3,\r\n  4,\r\n  8,\r\n  1,\r\n  10,\r\n  4,\r\n  7,\r\n  4,\r\n  11,\r\n  10,\r\n  11,\r\n  4,\r\n  -1,\r\n  4,\r\n  11,\r\n  7,\r\n  9,\r\n  11,\r\n  4,\r\n  9,\r\n  2,\r\n  11,\r\n  9,\r\n  1,\r\n  2,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  9,\r\n  7,\r\n  4,\r\n  9,\r\n  11,\r\n  7,\r\n  9,\r\n  1,\r\n  11,\r\n  2,\r\n  11,\r\n  1,\r\n  0,\r\n  8,\r\n  3,\r\n  -1,\r\n  11,\r\n  7,\r\n  4,\r\n  11,\r\n  4,\r\n  2,\r\n  2,\r\n  4,\r\n  0,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  11,\r\n  7,\r\n  4,\r\n  11,\r\n  4,\r\n  2,\r\n  8,\r\n  3,\r\n  4,\r\n  3,\r\n  2,\r\n  4,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  2,\r\n  9,\r\n  10,\r\n  2,\r\n  7,\r\n  9,\r\n  2,\r\n  3,\r\n  7,\r\n  7,\r\n  4,\r\n  9,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  9,\r\n  10,\r\n  7,\r\n  9,\r\n  7,\r\n  4,\r\n  10,\r\n  2,\r\n  7,\r\n  8,\r\n  7,\r\n  0,\r\n  2,\r\n  0,\r\n  7,\r\n  -1,\r\n  3,\r\n  7,\r\n  10,\r\n  3,\r\n  10,\r\n  2,\r\n  7,\r\n  4,\r\n  10,\r\n  1,\r\n  10,\r\n  0,\r\n  4,\r\n  0,\r\n  10,\r\n  -1,\r\n  1,\r\n  10,\r\n  2,\r\n  8,\r\n  7,\r\n  4,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  4,\r\n  9,\r\n  1,\r\n  4,\r\n  1,\r\n  7,\r\n  7,\r\n  1,\r\n  3,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  4,\r\n  9,\r\n  1,\r\n  4,\r\n  1,\r\n  7,\r\n  0,\r\n  8,\r\n  1,\r\n  8,\r\n  7,\r\n  1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  4,\r\n  0,\r\n  3,\r\n  7,\r\n  4,\r\n  3,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  4,\r\n  8,\r\n  7,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  9,\r\n  10,\r\n  8,\r\n  10,\r\n  11,\r\n  8,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  3,\r\n  0,\r\n  9,\r\n  3,\r\n  9,\r\n  11,\r\n  11,\r\n  9,\r\n  10,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  0,\r\n  1,\r\n  10,\r\n  0,\r\n  10,\r\n  8,\r\n  8,\r\n  10,\r\n  11,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  3,\r\n  1,\r\n  10,\r\n  11,\r\n  3,\r\n  10,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  1,\r\n  2,\r\n  11,\r\n  1,\r\n  11,\r\n  9,\r\n  9,\r\n  11,\r\n  8,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  3,\r\n  0,\r\n  9,\r\n  3,\r\n  9,\r\n  11,\r\n  1,\r\n  2,\r\n  9,\r\n  2,\r\n  11,\r\n  9,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  0,\r\n  2,\r\n  11,\r\n  8,\r\n  0,\r\n  11,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  3,\r\n  2,\r\n  11,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  2,\r\n  3,\r\n  8,\r\n  2,\r\n  8,\r\n  10,\r\n  10,\r\n  8,\r\n  9,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  9,\r\n  10,\r\n  2,\r\n  0,\r\n  9,\r\n  2,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  2,\r\n  3,\r\n  8,\r\n  2,\r\n  8,\r\n  10,\r\n  0,\r\n  1,\r\n  8,\r\n  1,\r\n  10,\r\n  8,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  1,\r\n  10,\r\n  2,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  1,\r\n  3,\r\n  8,\r\n  9,\r\n  1,\r\n  8,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  0,\r\n  9,\r\n  1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  0,\r\n  3,\r\n  8,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1,\r\n  -1\r\n]);\r\nexport {\r\n  MarchingCubes,\r\n  edgeTable,\r\n  triTable\r\n};\r\n", "var __defProp = Object.defineProperty;\r\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\r\nvar __publicField = (obj, key, value) => {\r\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\r\n  return value;\r\n};\r\nclass SimplexNoise {\r\n  /**\r\n   * You can pass in a random number generator object if you like.\r\n   * It is assumed to have a random() method.\r\n   */\r\n  constructor(r = Math) {\r\n    __publicField(this, \"grad3\", [\r\n      [1, 1, 0],\r\n      [-1, 1, 0],\r\n      [1, -1, 0],\r\n      [-1, -1, 0],\r\n      [1, 0, 1],\r\n      [-1, 0, 1],\r\n      [1, 0, -1],\r\n      [-1, 0, -1],\r\n      [0, 1, 1],\r\n      [0, -1, 1],\r\n      [0, 1, -1],\r\n      [0, -1, -1]\r\n    ]);\r\n    __publicField(this, \"grad4\", [\r\n      [0, 1, 1, 1],\r\n      [0, 1, 1, -1],\r\n      [0, 1, -1, 1],\r\n      [0, 1, -1, -1],\r\n      [0, -1, 1, 1],\r\n      [0, -1, 1, -1],\r\n      [0, -1, -1, 1],\r\n      [0, -1, -1, -1],\r\n      [1, 0, 1, 1],\r\n      [1, 0, 1, -1],\r\n      [1, 0, -1, 1],\r\n      [1, 0, -1, -1],\r\n      [-1, 0, 1, 1],\r\n      [-1, 0, 1, -1],\r\n      [-1, 0, -1, 1],\r\n      [-1, 0, -1, -1],\r\n      [1, 1, 0, 1],\r\n      [1, 1, 0, -1],\r\n      [1, -1, 0, 1],\r\n      [1, -1, 0, -1],\r\n      [-1, 1, 0, 1],\r\n      [-1, 1, 0, -1],\r\n      [-1, -1, 0, 1],\r\n      [-1, -1, 0, -1],\r\n      [1, 1, 1, 0],\r\n      [1, 1, -1, 0],\r\n      [1, -1, 1, 0],\r\n      [1, -1, -1, 0],\r\n      [-1, 1, 1, 0],\r\n      [-1, 1, -1, 0],\r\n      [-1, -1, 1, 0],\r\n      [-1, -1, -1, 0]\r\n    ]);\r\n    __publicField(this, \"p\", []);\r\n    // To remove the need for index wrapping, double the permutation table length\r\n    __publicField(this, \"perm\", []);\r\n    // A lookup table to traverse the simplex around a given point in 4D.\r\n    // Details can be found where this table is used, in the 4D noise method.\r\n    __publicField(this, \"simplex\", [\r\n      [0, 1, 2, 3],\r\n      [0, 1, 3, 2],\r\n      [0, 0, 0, 0],\r\n      [0, 2, 3, 1],\r\n      [0, 0, 0, 0],\r\n      [0, 0, 0, 0],\r\n      [0, 0, 0, 0],\r\n      [1, 2, 3, 0],\r\n      [0, 2, 1, 3],\r\n      [0, 0, 0, 0],\r\n      [0, 3, 1, 2],\r\n      [0, 3, 2, 1],\r\n      [0, 0, 0, 0],\r\n      [0, 0, 0, 0],\r\n      [0, 0, 0, 0],\r\n      [1, 3, 2, 0],\r\n      [0, 0, 0, 0],\r\n      [0, 0, 0, 0],\r\n      [0, 0, 0, 0],\r\n      [0, 0, 0, 0],\r\n      [0, 0, 0, 0],\r\n      [0, 0, 0, 0],\r\n      [0, 0, 0, 0],\r\n      [0, 0, 0, 0],\r\n      [1, 2, 0, 3],\r\n      [0, 0, 0, 0],\r\n      [1, 3, 0, 2],\r\n      [0, 0, 0, 0],\r\n      [0, 0, 0, 0],\r\n      [0, 0, 0, 0],\r\n      [2, 3, 0, 1],\r\n      [2, 3, 1, 0],\r\n      [1, 0, 2, 3],\r\n      [1, 0, 3, 2],\r\n      [0, 0, 0, 0],\r\n      [0, 0, 0, 0],\r\n      [0, 0, 0, 0],\r\n      [2, 0, 3, 1],\r\n      [0, 0, 0, 0],\r\n      [2, 1, 3, 0],\r\n      [0, 0, 0, 0],\r\n      [0, 0, 0, 0],\r\n      [0, 0, 0, 0],\r\n      [0, 0, 0, 0],\r\n      [0, 0, 0, 0],\r\n      [0, 0, 0, 0],\r\n      [0, 0, 0, 0],\r\n      [0, 0, 0, 0],\r\n      [2, 0, 1, 3],\r\n      [0, 0, 0, 0],\r\n      [0, 0, 0, 0],\r\n      [0, 0, 0, 0],\r\n      [3, 0, 1, 2],\r\n      [3, 0, 2, 1],\r\n      [0, 0, 0, 0],\r\n      [3, 1, 2, 0],\r\n      [2, 1, 0, 3],\r\n      [0, 0, 0, 0],\r\n      [0, 0, 0, 0],\r\n      [0, 0, 0, 0],\r\n      [3, 1, 0, 2],\r\n      [0, 0, 0, 0],\r\n      [3, 2, 0, 1],\r\n      [3, 2, 1, 0]\r\n    ]);\r\n    __publicField(this, \"dot\", (g, x, y) => {\r\n      return g[0] * x + g[1] * y;\r\n    });\r\n    __publicField(this, \"dot3\", (g, x, y, z) => {\r\n      return g[0] * x + g[1] * y + g[2] * z;\r\n    });\r\n    __publicField(this, \"dot4\", (g, x, y, z, w) => {\r\n      return g[0] * x + g[1] * y + g[2] * z + g[3] * w;\r\n    });\r\n    __publicField(this, \"noise\", (xin, yin) => {\r\n      let n0;\r\n      let n1;\r\n      let n2;\r\n      const F2 = 0.5 * (Math.sqrt(3) - 1);\r\n      const s = (xin + yin) * F2;\r\n      const i = Math.floor(xin + s);\r\n      const j = Math.floor(yin + s);\r\n      const G2 = (3 - Math.sqrt(3)) / 6;\r\n      const t = (i + j) * G2;\r\n      const X0 = i - t;\r\n      const Y0 = j - t;\r\n      const x0 = xin - X0;\r\n      const y0 = yin - Y0;\r\n      let i1 = 0;\r\n      let j1 = 1;\r\n      if (x0 > y0) {\r\n        i1 = 1;\r\n        j1 = 0;\r\n      }\r\n      const x1 = x0 - i1 + G2;\r\n      const y1 = y0 - j1 + G2;\r\n      const x2 = x0 - 1 + 2 * G2;\r\n      const y2 = y0 - 1 + 2 * G2;\r\n      const ii = i & 255;\r\n      const jj = j & 255;\r\n      const gi0 = this.perm[ii + this.perm[jj]] % 12;\r\n      const gi1 = this.perm[ii + i1 + this.perm[jj + j1]] % 12;\r\n      const gi2 = this.perm[ii + 1 + this.perm[jj + 1]] % 12;\r\n      let t0 = 0.5 - x0 * x0 - y0 * y0;\r\n      if (t0 < 0) {\r\n        n0 = 0;\r\n      } else {\r\n        t0 *= t0;\r\n        n0 = t0 * t0 * this.dot(this.grad3[gi0], x0, y0);\r\n      }\r\n      let t1 = 0.5 - x1 * x1 - y1 * y1;\r\n      if (t1 < 0) {\r\n        n1 = 0;\r\n      } else {\r\n        t1 *= t1;\r\n        n1 = t1 * t1 * this.dot(this.grad3[gi1], x1, y1);\r\n      }\r\n      let t2 = 0.5 - x2 * x2 - y2 * y2;\r\n      if (t2 < 0) {\r\n        n2 = 0;\r\n      } else {\r\n        t2 *= t2;\r\n        n2 = t2 * t2 * this.dot(this.grad3[gi2], x2, y2);\r\n      }\r\n      return 70 * (n0 + n1 + n2);\r\n    });\r\n    // 3D simplex noise\r\n    __publicField(this, \"noise3d\", (xin, yin, zin) => {\r\n      let n0;\r\n      let n1;\r\n      let n2;\r\n      let n3;\r\n      const F3 = 1 / 3;\r\n      const s = (xin + yin + zin) * F3;\r\n      const i = Math.floor(xin + s);\r\n      const j = Math.floor(yin + s);\r\n      const k = Math.floor(zin + s);\r\n      const G3 = 1 / 6;\r\n      const t = (i + j + k) * G3;\r\n      const X0 = i - t;\r\n      const Y0 = j - t;\r\n      const Z0 = k - t;\r\n      const x0 = xin - X0;\r\n      const y0 = yin - Y0;\r\n      const z0 = zin - Z0;\r\n      let i1;\r\n      let j1;\r\n      let k1;\r\n      let i2;\r\n      let j2;\r\n      let k2;\r\n      if (x0 >= y0) {\r\n        if (y0 >= z0) {\r\n          i1 = 1;\r\n          j1 = 0;\r\n          k1 = 0;\r\n          i2 = 1;\r\n          j2 = 1;\r\n          k2 = 0;\r\n        } else if (x0 >= z0) {\r\n          i1 = 1;\r\n          j1 = 0;\r\n          k1 = 0;\r\n          i2 = 1;\r\n          j2 = 0;\r\n          k2 = 1;\r\n        } else {\r\n          i1 = 0;\r\n          j1 = 0;\r\n          k1 = 1;\r\n          i2 = 1;\r\n          j2 = 0;\r\n          k2 = 1;\r\n        }\r\n      } else {\r\n        if (y0 < z0) {\r\n          i1 = 0;\r\n          j1 = 0;\r\n          k1 = 1;\r\n          i2 = 0;\r\n          j2 = 1;\r\n          k2 = 1;\r\n        } else if (x0 < z0) {\r\n          i1 = 0;\r\n          j1 = 1;\r\n          k1 = 0;\r\n          i2 = 0;\r\n          j2 = 1;\r\n          k2 = 1;\r\n        } else {\r\n          i1 = 0;\r\n          j1 = 1;\r\n          k1 = 0;\r\n          i2 = 1;\r\n          j2 = 1;\r\n          k2 = 0;\r\n        }\r\n      }\r\n      const x1 = x0 - i1 + G3;\r\n      const y1 = y0 - j1 + G3;\r\n      const z1 = z0 - k1 + G3;\r\n      const x2 = x0 - i2 + 2 * G3;\r\n      const y2 = y0 - j2 + 2 * G3;\r\n      const z2 = z0 - k2 + 2 * G3;\r\n      const x3 = x0 - 1 + 3 * G3;\r\n      const y3 = y0 - 1 + 3 * G3;\r\n      const z3 = z0 - 1 + 3 * G3;\r\n      const ii = i & 255;\r\n      const jj = j & 255;\r\n      const kk = k & 255;\r\n      const gi0 = this.perm[ii + this.perm[jj + this.perm[kk]]] % 12;\r\n      const gi1 = this.perm[ii + i1 + this.perm[jj + j1 + this.perm[kk + k1]]] % 12;\r\n      const gi2 = this.perm[ii + i2 + this.perm[jj + j2 + this.perm[kk + k2]]] % 12;\r\n      const gi3 = this.perm[ii + 1 + this.perm[jj + 1 + this.perm[kk + 1]]] % 12;\r\n      let t0 = 0.6 - x0 * x0 - y0 * y0 - z0 * z0;\r\n      if (t0 < 0) {\r\n        n0 = 0;\r\n      } else {\r\n        t0 *= t0;\r\n        n0 = t0 * t0 * this.dot3(this.grad3[gi0], x0, y0, z0);\r\n      }\r\n      let t1 = 0.6 - x1 * x1 - y1 * y1 - z1 * z1;\r\n      if (t1 < 0) {\r\n        n1 = 0;\r\n      } else {\r\n        t1 *= t1;\r\n        n1 = t1 * t1 * this.dot3(this.grad3[gi1], x1, y1, z1);\r\n      }\r\n      let t2 = 0.6 - x2 * x2 - y2 * y2 - z2 * z2;\r\n      if (t2 < 0) {\r\n        n2 = 0;\r\n      } else {\r\n        t2 *= t2;\r\n        n2 = t2 * t2 * this.dot3(this.grad3[gi2], x2, y2, z2);\r\n      }\r\n      let t3 = 0.6 - x3 * x3 - y3 * y3 - z3 * z3;\r\n      if (t3 < 0) {\r\n        n3 = 0;\r\n      } else {\r\n        t3 *= t3;\r\n        n3 = t3 * t3 * this.dot3(this.grad3[gi3], x3, y3, z3);\r\n      }\r\n      return 32 * (n0 + n1 + n2 + n3);\r\n    });\r\n    // 4D simplex noise\r\n    __publicField(this, \"noise4d\", (x, y, z, w) => {\r\n      const grad4 = this.grad4;\r\n      const simplex = this.simplex;\r\n      const perm = this.perm;\r\n      const F4 = (Math.sqrt(5) - 1) / 4;\r\n      const G4 = (5 - Math.sqrt(5)) / 20;\r\n      let n0;\r\n      let n1;\r\n      let n2;\r\n      let n3;\r\n      let n4;\r\n      const s = (x + y + z + w) * F4;\r\n      const i = Math.floor(x + s);\r\n      const j = Math.floor(y + s);\r\n      const k = Math.floor(z + s);\r\n      const l = Math.floor(w + s);\r\n      const t = (i + j + k + l) * G4;\r\n      const X0 = i - t;\r\n      const Y0 = j - t;\r\n      const Z0 = k - t;\r\n      const W0 = l - t;\r\n      const x0 = x - X0;\r\n      const y0 = y - Y0;\r\n      const z0 = z - Z0;\r\n      const w0 = w - W0;\r\n      const c1 = x0 > y0 ? 32 : 0;\r\n      const c2 = x0 > z0 ? 16 : 0;\r\n      const c3 = y0 > z0 ? 8 : 0;\r\n      const c4 = x0 > w0 ? 4 : 0;\r\n      const c5 = y0 > w0 ? 2 : 0;\r\n      const c6 = z0 > w0 ? 1 : 0;\r\n      const c = c1 + c2 + c3 + c4 + c5 + c6;\r\n      let i1;\r\n      let j1;\r\n      let k1;\r\n      let l1;\r\n      let i2;\r\n      let j2;\r\n      let k2;\r\n      let l2;\r\n      let i3;\r\n      let j3;\r\n      let k3;\r\n      let l3;\r\n      i1 = simplex[c][0] >= 3 ? 1 : 0;\r\n      j1 = simplex[c][1] >= 3 ? 1 : 0;\r\n      k1 = simplex[c][2] >= 3 ? 1 : 0;\r\n      l1 = simplex[c][3] >= 3 ? 1 : 0;\r\n      i2 = simplex[c][0] >= 2 ? 1 : 0;\r\n      j2 = simplex[c][1] >= 2 ? 1 : 0;\r\n      k2 = simplex[c][2] >= 2 ? 1 : 0;\r\n      l2 = simplex[c][3] >= 2 ? 1 : 0;\r\n      i3 = simplex[c][0] >= 1 ? 1 : 0;\r\n      j3 = simplex[c][1] >= 1 ? 1 : 0;\r\n      k3 = simplex[c][2] >= 1 ? 1 : 0;\r\n      l3 = simplex[c][3] >= 1 ? 1 : 0;\r\n      const x1 = x0 - i1 + G4;\r\n      const y1 = y0 - j1 + G4;\r\n      const z1 = z0 - k1 + G4;\r\n      const w1 = w0 - l1 + G4;\r\n      const x2 = x0 - i2 + 2 * G4;\r\n      const y2 = y0 - j2 + 2 * G4;\r\n      const z2 = z0 - k2 + 2 * G4;\r\n      const w2 = w0 - l2 + 2 * G4;\r\n      const x3 = x0 - i3 + 3 * G4;\r\n      const y3 = y0 - j3 + 3 * G4;\r\n      const z3 = z0 - k3 + 3 * G4;\r\n      const w3 = w0 - l3 + 3 * G4;\r\n      const x4 = x0 - 1 + 4 * G4;\r\n      const y4 = y0 - 1 + 4 * G4;\r\n      const z4 = z0 - 1 + 4 * G4;\r\n      const w4 = w0 - 1 + 4 * G4;\r\n      const ii = i & 255;\r\n      const jj = j & 255;\r\n      const kk = k & 255;\r\n      const ll = l & 255;\r\n      const gi0 = perm[ii + perm[jj + perm[kk + perm[ll]]]] % 32;\r\n      const gi1 = perm[ii + i1 + perm[jj + j1 + perm[kk + k1 + perm[ll + l1]]]] % 32;\r\n      const gi2 = perm[ii + i2 + perm[jj + j2 + perm[kk + k2 + perm[ll + l2]]]] % 32;\r\n      const gi3 = perm[ii + i3 + perm[jj + j3 + perm[kk + k3 + perm[ll + l3]]]] % 32;\r\n      const gi4 = perm[ii + 1 + perm[jj + 1 + perm[kk + 1 + perm[ll + 1]]]] % 32;\r\n      let t0 = 0.6 - x0 * x0 - y0 * y0 - z0 * z0 - w0 * w0;\r\n      if (t0 < 0) {\r\n        n0 = 0;\r\n      } else {\r\n        t0 *= t0;\r\n        n0 = t0 * t0 * this.dot4(grad4[gi0], x0, y0, z0, w0);\r\n      }\r\n      let t1 = 0.6 - x1 * x1 - y1 * y1 - z1 * z1 - w1 * w1;\r\n      if (t1 < 0) {\r\n        n1 = 0;\r\n      } else {\r\n        t1 *= t1;\r\n        n1 = t1 * t1 * this.dot4(grad4[gi1], x1, y1, z1, w1);\r\n      }\r\n      let t2 = 0.6 - x2 * x2 - y2 * y2 - z2 * z2 - w2 * w2;\r\n      if (t2 < 0) {\r\n        n2 = 0;\r\n      } else {\r\n        t2 *= t2;\r\n        n2 = t2 * t2 * this.dot4(grad4[gi2], x2, y2, z2, w2);\r\n      }\r\n      let t3 = 0.6 - x3 * x3 - y3 * y3 - z3 * z3 - w3 * w3;\r\n      if (t3 < 0) {\r\n        n3 = 0;\r\n      } else {\r\n        t3 *= t3;\r\n        n3 = t3 * t3 * this.dot4(grad4[gi3], x3, y3, z3, w3);\r\n      }\r\n      let t4 = 0.6 - x4 * x4 - y4 * y4 - z4 * z4 - w4 * w4;\r\n      if (t4 < 0) {\r\n        n4 = 0;\r\n      } else {\r\n        t4 *= t4;\r\n        n4 = t4 * t4 * this.dot4(grad4[gi4], x4, y4, z4, w4);\r\n      }\r\n      return 27 * (n0 + n1 + n2 + n3 + n4);\r\n    });\r\n    for (let i = 0; i < 256; i++) {\r\n      this.p[i] = Math.floor(r.random() * 256);\r\n    }\r\n    for (let i = 0; i < 512; i++) {\r\n      this.perm[i] = this.p[i & 255];\r\n    }\r\n  }\r\n}\r\nexport {\r\n  SimplexNoise\r\n};\r\n", "var __defProp = Object.defineProperty;\r\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\r\nvar __publicField = (obj, key, value) => {\r\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\r\n  return value;\r\n};\r\nimport { BufferGeometry, Vector3, Uint32BufferAttribute, Float32BufferAttribute, DynamicDrawUsage, MathUtils } from \"three\";\r\nimport { SimplexNoise } from \"../math/SimplexNoise.js\";\r\nconst _LightningStrike = class extends BufferGeometry {\r\n  constructor(rayParameters = {}) {\r\n    super();\r\n    this.isLightningStrike = true;\r\n    this.type = \"LightningStrike\";\r\n    this.init(_LightningStrike.copyParameters(rayParameters, rayParameters));\r\n    this.createMesh();\r\n  }\r\n  static createRandomGenerator() {\r\n    const numSeeds = 2053;\r\n    const seeds = [];\r\n    for (let i = 0; i < numSeeds; i++) {\r\n      seeds.push(Math.random());\r\n    }\r\n    const generator = {\r\n      currentSeed: 0,\r\n      random: function() {\r\n        const value = seeds[generator.currentSeed];\r\n        generator.currentSeed = (generator.currentSeed + 1) % numSeeds;\r\n        return value;\r\n      },\r\n      getSeed: function() {\r\n        return generator.currentSeed / numSeeds;\r\n      },\r\n      setSeed: function(seed) {\r\n        generator.currentSeed = Math.floor(seed * numSeeds) % numSeeds;\r\n      }\r\n    };\r\n    return generator;\r\n  }\r\n  static copyParameters(dest = {}, source = {}) {\r\n    const vecCopy = function(v) {\r\n      if (source === dest) {\r\n        return v;\r\n      } else {\r\n        return v.clone();\r\n      }\r\n    };\r\n    dest.sourceOffset = source.sourceOffset !== void 0 ? vecCopy(source.sourceOffset) : new Vector3(0, 100, 0), dest.destOffset = source.destOffset !== void 0 ? vecCopy(source.destOffset) : new Vector3(0, 0, 0), dest.timeScale = source.timeScale !== void 0 ? source.timeScale : 1, dest.roughness = source.roughness !== void 0 ? source.roughness : 0.9, dest.straightness = source.straightness !== void 0 ? source.straightness : 0.7, dest.up0 = source.up0 !== void 0 ? vecCopy(source.up0) : new Vector3(0, 0, 1);\r\n    dest.up1 = source.up1 !== void 0 ? vecCopy(source.up1) : new Vector3(0, 0, 1), dest.radius0 = source.radius0 !== void 0 ? source.radius0 : 1, dest.radius1 = source.radius1 !== void 0 ? source.radius1 : 1, dest.radius0Factor = source.radius0Factor !== void 0 ? source.radius0Factor : 0.5, dest.radius1Factor = source.radius1Factor !== void 0 ? source.radius1Factor : 0.2, dest.minRadius = source.minRadius !== void 0 ? source.minRadius : 0.2, // These parameters should not be changed after lightning creation. They can be changed but the ray will change its form abruptly:\r\n    dest.isEternal = source.isEternal !== void 0 ? source.isEternal : source.birthTime === void 0 || source.deathTime === void 0, dest.birthTime = source.birthTime, dest.deathTime = source.deathTime, dest.propagationTimeFactor = source.propagationTimeFactor !== void 0 ? source.propagationTimeFactor : 0.1, dest.vanishingTimeFactor = source.vanishingTimeFactor !== void 0 ? source.vanishingTimeFactor : 0.9, dest.subrayPeriod = source.subrayPeriod !== void 0 ? source.subrayPeriod : 4, dest.subrayDutyCycle = source.subrayDutyCycle !== void 0 ? source.subrayDutyCycle : 0.6;\r\n    dest.maxIterations = source.maxIterations !== void 0 ? source.maxIterations : 9;\r\n    dest.isStatic = source.isStatic !== void 0 ? source.isStatic : false;\r\n    dest.ramification = source.ramification !== void 0 ? source.ramification : 5;\r\n    dest.maxSubrayRecursion = source.maxSubrayRecursion !== void 0 ? source.maxSubrayRecursion : 3;\r\n    dest.recursionProbability = source.recursionProbability !== void 0 ? source.recursionProbability : 0.6;\r\n    dest.generateUVs = source.generateUVs !== void 0 ? source.generateUVs : false;\r\n    dest.randomGenerator = source.randomGenerator, dest.noiseSeed = source.noiseSeed, dest.onDecideSubrayCreation = source.onDecideSubrayCreation, dest.onSubrayCreation = source.onSubrayCreation;\r\n    return dest;\r\n  }\r\n  update(time) {\r\n    if (this.isStatic)\r\n      return;\r\n    if (this.rayParameters.isEternal || this.rayParameters.birthTime <= time && time <= this.rayParameters.deathTime) {\r\n      this.updateMesh(time);\r\n      if (time < this.subrays[0].endPropagationTime) {\r\n        this.state = _LightningStrike.RAY_PROPAGATING;\r\n      } else if (time > this.subrays[0].beginVanishingTime) {\r\n        this.state = _LightningStrike.RAY_VANISHING;\r\n      } else {\r\n        this.state = _LightningStrike.RAY_STEADY;\r\n      }\r\n      this.visible = true;\r\n    } else {\r\n      this.visible = false;\r\n      if (time < this.rayParameters.birthTime) {\r\n        this.state = _LightningStrike.RAY_UNBORN;\r\n      } else {\r\n        this.state = _LightningStrike.RAY_EXTINGUISHED;\r\n      }\r\n    }\r\n  }\r\n  init(rayParameters) {\r\n    this.rayParameters = rayParameters;\r\n    this.maxIterations = rayParameters.maxIterations !== void 0 ? Math.floor(rayParameters.maxIterations) : 9;\r\n    rayParameters.maxIterations = this.maxIterations;\r\n    this.isStatic = rayParameters.isStatic !== void 0 ? rayParameters.isStatic : false;\r\n    rayParameters.isStatic = this.isStatic;\r\n    this.ramification = rayParameters.ramification !== void 0 ? Math.floor(rayParameters.ramification) : 5;\r\n    rayParameters.ramification = this.ramification;\r\n    this.maxSubrayRecursion = rayParameters.maxSubrayRecursion !== void 0 ? Math.floor(rayParameters.maxSubrayRecursion) : 3;\r\n    rayParameters.maxSubrayRecursion = this.maxSubrayRecursion;\r\n    this.recursionProbability = rayParameters.recursionProbability !== void 0 ? rayParameters.recursionProbability : 0.6;\r\n    rayParameters.recursionProbability = this.recursionProbability;\r\n    this.generateUVs = rayParameters.generateUVs !== void 0 ? rayParameters.generateUVs : false;\r\n    rayParameters.generateUVs = this.generateUVs;\r\n    if (rayParameters.randomGenerator !== void 0) {\r\n      this.randomGenerator = rayParameters.randomGenerator;\r\n      this.seedGenerator = rayParameters.randomGenerator;\r\n      if (rayParameters.noiseSeed !== void 0) {\r\n        this.seedGenerator.setSeed(rayParameters.noiseSeed);\r\n      }\r\n    } else {\r\n      this.randomGenerator = _LightningStrike.createRandomGenerator();\r\n      this.seedGenerator = Math;\r\n    }\r\n    if (rayParameters.onDecideSubrayCreation !== void 0) {\r\n      this.onDecideSubrayCreation = rayParameters.onDecideSubrayCreation;\r\n    } else {\r\n      this.createDefaultSubrayCreationCallbacks();\r\n      if (rayParameters.onSubrayCreation !== void 0) {\r\n        this.onSubrayCreation = rayParameters.onSubrayCreation;\r\n      }\r\n    }\r\n    this.state = _LightningStrike.RAY_INITIALIZED;\r\n    this.maxSubrays = Math.ceil(1 + Math.pow(this.ramification, Math.max(0, this.maxSubrayRecursion - 1)));\r\n    rayParameters.maxSubrays = this.maxSubrays;\r\n    this.maxRaySegments = 2 * (1 << this.maxIterations);\r\n    this.subrays = [];\r\n    for (let i = 0; i < this.maxSubrays; i++) {\r\n      this.subrays.push(this.createSubray());\r\n    }\r\n    this.raySegments = [];\r\n    for (let i = 0; i < this.maxRaySegments; i++) {\r\n      this.raySegments.push(this.createSegment());\r\n    }\r\n    this.time = 0;\r\n    this.timeFraction = 0;\r\n    this.currentSegmentCallback = null;\r\n    this.currentCreateTriangleVertices = this.generateUVs ? this.createTriangleVerticesWithUVs : this.createTriangleVerticesWithoutUVs;\r\n    this.numSubrays = 0;\r\n    this.currentSubray = null;\r\n    this.currentSegmentIndex = 0;\r\n    this.isInitialSegment = false;\r\n    this.subrayProbability = 0;\r\n    this.currentVertex = 0;\r\n    this.currentIndex = 0;\r\n    this.currentCoordinate = 0;\r\n    this.currentUVCoordinate = 0;\r\n    this.vertices = null;\r\n    this.uvs = null;\r\n    this.indices = null;\r\n    this.positionAttribute = null;\r\n    this.uvsAttribute = null;\r\n    this.simplexX = new SimplexNoise(this.seedGenerator);\r\n    this.simplexY = new SimplexNoise(this.seedGenerator);\r\n    this.simplexZ = new SimplexNoise(this.seedGenerator);\r\n    this.forwards = new Vector3();\r\n    this.forwardsFill = new Vector3();\r\n    this.side = new Vector3();\r\n    this.down = new Vector3();\r\n    this.middlePos = new Vector3();\r\n    this.middleLinPos = new Vector3();\r\n    this.newPos = new Vector3();\r\n    this.vPos = new Vector3();\r\n    this.cross1 = new Vector3();\r\n  }\r\n  createMesh() {\r\n    const maxDrawableSegmentsPerSubRay = 1 << this.maxIterations;\r\n    const maxVerts = 3 * (maxDrawableSegmentsPerSubRay + 1) * this.maxSubrays;\r\n    const maxIndices = 18 * maxDrawableSegmentsPerSubRay * this.maxSubrays;\r\n    this.vertices = new Float32Array(maxVerts * 3);\r\n    this.indices = new Uint32Array(maxIndices);\r\n    if (this.generateUVs) {\r\n      this.uvs = new Float32Array(maxVerts * 2);\r\n    }\r\n    this.fillMesh(0);\r\n    this.setIndex(new Uint32BufferAttribute(this.indices, 1));\r\n    this.positionAttribute = new Float32BufferAttribute(this.vertices, 3);\r\n    this.setAttribute(\"position\", this.positionAttribute);\r\n    if (this.generateUVs) {\r\n      this.uvsAttribute = new Float32BufferAttribute(new Float32Array(this.uvs), 2);\r\n      this.setAttribute(\"uv\", this.uvsAttribute);\r\n    }\r\n    if (!this.isStatic) {\r\n      this.index.usage = DynamicDrawUsage;\r\n      this.positionAttribute.usage = DynamicDrawUsage;\r\n      if (this.generateUVs) {\r\n        this.uvsAttribute.usage = DynamicDrawUsage;\r\n      }\r\n    }\r\n    this.vertices = this.positionAttribute.array;\r\n    this.indices = this.index.array;\r\n    if (this.generateUVs) {\r\n      this.uvs = this.uvsAttribute.array;\r\n    }\r\n  }\r\n  updateMesh(time) {\r\n    this.fillMesh(time);\r\n    this.drawRange.count = this.currentIndex;\r\n    this.index.needsUpdate = true;\r\n    this.positionAttribute.needsUpdate = true;\r\n    if (this.generateUVs) {\r\n      this.uvsAttribute.needsUpdate = true;\r\n    }\r\n  }\r\n  fillMesh(time) {\r\n    const scope = this;\r\n    this.currentVertex = 0;\r\n    this.currentIndex = 0;\r\n    this.currentCoordinate = 0;\r\n    this.currentUVCoordinate = 0;\r\n    this.fractalRay(time, function fillVertices(segment) {\r\n      const subray = scope.currentSubray;\r\n      if (time < subray.birthTime) {\r\n        return;\r\n      } else if (this.rayParameters.isEternal && scope.currentSubray.recursion == 0) {\r\n        scope.createPrism(segment);\r\n        scope.onDecideSubrayCreation(segment, scope);\r\n      } else if (time < subray.endPropagationTime) {\r\n        if (scope.timeFraction >= segment.fraction0 * subray.propagationTimeFactor) {\r\n          scope.createPrism(segment);\r\n          scope.onDecideSubrayCreation(segment, scope);\r\n        }\r\n      } else if (time < subray.beginVanishingTime) {\r\n        scope.createPrism(segment);\r\n        scope.onDecideSubrayCreation(segment, scope);\r\n      } else {\r\n        if (scope.timeFraction <= subray.vanishingTimeFactor + segment.fraction1 * (1 - subray.vanishingTimeFactor)) {\r\n          scope.createPrism(segment);\r\n        }\r\n        scope.onDecideSubrayCreation(segment, scope);\r\n      }\r\n    });\r\n  }\r\n  addNewSubray() {\r\n    return this.subrays[this.numSubrays++];\r\n  }\r\n  initSubray(subray, rayParameters) {\r\n    subray.pos0.copy(rayParameters.sourceOffset);\r\n    subray.pos1.copy(rayParameters.destOffset);\r\n    subray.up0.copy(rayParameters.up0);\r\n    subray.up1.copy(rayParameters.up1);\r\n    subray.radius0 = rayParameters.radius0;\r\n    subray.radius1 = rayParameters.radius1;\r\n    subray.birthTime = rayParameters.birthTime;\r\n    subray.deathTime = rayParameters.deathTime;\r\n    subray.timeScale = rayParameters.timeScale;\r\n    subray.roughness = rayParameters.roughness;\r\n    subray.straightness = rayParameters.straightness;\r\n    subray.propagationTimeFactor = rayParameters.propagationTimeFactor;\r\n    subray.vanishingTimeFactor = rayParameters.vanishingTimeFactor;\r\n    subray.maxIterations = this.maxIterations;\r\n    subray.seed = rayParameters.noiseSeed !== void 0 ? rayParameters.noiseSeed : 0;\r\n    subray.recursion = 0;\r\n  }\r\n  fractalRay(time, segmentCallback) {\r\n    this.time = time;\r\n    this.currentSegmentCallback = segmentCallback;\r\n    this.numSubrays = 0;\r\n    this.initSubray(this.addNewSubray(), this.rayParameters);\r\n    for (let subrayIndex = 0; subrayIndex < this.numSubrays; subrayIndex++) {\r\n      const subray = this.subrays[subrayIndex];\r\n      this.currentSubray = subray;\r\n      this.randomGenerator.setSeed(subray.seed);\r\n      subray.endPropagationTime = MathUtils.lerp(subray.birthTime, subray.deathTime, subray.propagationTimeFactor);\r\n      subray.beginVanishingTime = MathUtils.lerp(subray.deathTime, subray.birthTime, 1 - subray.vanishingTimeFactor);\r\n      const random1 = this.randomGenerator.random;\r\n      subray.linPos0.set(random1(), random1(), random1()).multiplyScalar(1e3);\r\n      subray.linPos1.set(random1(), random1(), random1()).multiplyScalar(1e3);\r\n      this.timeFraction = (time - subray.birthTime) / (subray.deathTime - subray.birthTime);\r\n      this.currentSegmentIndex = 0;\r\n      this.isInitialSegment = true;\r\n      const segment = this.getNewSegment();\r\n      segment.iteration = 0;\r\n      segment.pos0.copy(subray.pos0);\r\n      segment.pos1.copy(subray.pos1);\r\n      segment.linPos0.copy(subray.linPos0);\r\n      segment.linPos1.copy(subray.linPos1);\r\n      segment.up0.copy(subray.up0);\r\n      segment.up1.copy(subray.up1);\r\n      segment.radius0 = subray.radius0;\r\n      segment.radius1 = subray.radius1;\r\n      segment.fraction0 = 0;\r\n      segment.fraction1 = 1;\r\n      segment.positionVariationFactor = 1 - subray.straightness;\r\n      this.subrayProbability = this.ramification * Math.pow(this.recursionProbability, subray.recursion) / (1 << subray.maxIterations);\r\n      this.fractalRayRecursive(segment);\r\n    }\r\n    this.currentSegmentCallback = null;\r\n    this.currentSubray = null;\r\n  }\r\n  fractalRayRecursive(segment) {\r\n    if (segment.iteration >= this.currentSubray.maxIterations) {\r\n      this.currentSegmentCallback(segment);\r\n      return;\r\n    }\r\n    this.forwards.subVectors(segment.pos1, segment.pos0);\r\n    let lForwards = this.forwards.length();\r\n    if (lForwards < 1e-6) {\r\n      this.forwards.set(0, 0, 0.01);\r\n      lForwards = this.forwards.length();\r\n    }\r\n    const middleRadius = (segment.radius0 + segment.radius1) * 0.5;\r\n    const middleFraction = (segment.fraction0 + segment.fraction1) * 0.5;\r\n    const timeDimension = this.time * this.currentSubray.timeScale * Math.pow(2, segment.iteration);\r\n    this.middlePos.lerpVectors(segment.pos0, segment.pos1, 0.5);\r\n    this.middleLinPos.lerpVectors(segment.linPos0, segment.linPos1, 0.5);\r\n    const p = this.middleLinPos;\r\n    this.newPos.set(\r\n      this.simplexX.noise4d(p.x, p.y, p.z, timeDimension),\r\n      this.simplexY.noise4d(p.x, p.y, p.z, timeDimension),\r\n      this.simplexZ.noise4d(p.x, p.y, p.z, timeDimension)\r\n    );\r\n    this.newPos.multiplyScalar(segment.positionVariationFactor * lForwards);\r\n    this.newPos.add(this.middlePos);\r\n    const newSegment1 = this.getNewSegment();\r\n    newSegment1.pos0.copy(segment.pos0);\r\n    newSegment1.pos1.copy(this.newPos);\r\n    newSegment1.linPos0.copy(segment.linPos0);\r\n    newSegment1.linPos1.copy(this.middleLinPos);\r\n    newSegment1.up0.copy(segment.up0);\r\n    newSegment1.up1.copy(segment.up1);\r\n    newSegment1.radius0 = segment.radius0;\r\n    newSegment1.radius1 = middleRadius;\r\n    newSegment1.fraction0 = segment.fraction0;\r\n    newSegment1.fraction1 = middleFraction;\r\n    newSegment1.positionVariationFactor = segment.positionVariationFactor * this.currentSubray.roughness;\r\n    newSegment1.iteration = segment.iteration + 1;\r\n    const newSegment2 = this.getNewSegment();\r\n    newSegment2.pos0.copy(this.newPos);\r\n    newSegment2.pos1.copy(segment.pos1);\r\n    newSegment2.linPos0.copy(this.middleLinPos);\r\n    newSegment2.linPos1.copy(segment.linPos1);\r\n    this.cross1.crossVectors(segment.up0, this.forwards.normalize());\r\n    newSegment2.up0.crossVectors(this.forwards, this.cross1).normalize();\r\n    newSegment2.up1.copy(segment.up1);\r\n    newSegment2.radius0 = middleRadius;\r\n    newSegment2.radius1 = segment.radius1;\r\n    newSegment2.fraction0 = middleFraction;\r\n    newSegment2.fraction1 = segment.fraction1;\r\n    newSegment2.positionVariationFactor = segment.positionVariationFactor * this.currentSubray.roughness;\r\n    newSegment2.iteration = segment.iteration + 1;\r\n    this.fractalRayRecursive(newSegment1);\r\n    this.fractalRayRecursive(newSegment2);\r\n  }\r\n  createPrism(segment) {\r\n    this.forwardsFill.subVectors(segment.pos1, segment.pos0).normalize();\r\n    if (this.isInitialSegment) {\r\n      this.currentCreateTriangleVertices(segment.pos0, segment.up0, this.forwardsFill, segment.radius0, 0);\r\n      this.isInitialSegment = false;\r\n    }\r\n    this.currentCreateTriangleVertices(segment.pos1, segment.up0, this.forwardsFill, segment.radius1, segment.fraction1);\r\n    this.createPrismFaces();\r\n  }\r\n  createTriangleVerticesWithoutUVs(pos, up, forwards, radius) {\r\n    this.side.crossVectors(up, forwards).multiplyScalar(radius * _LightningStrike.COS30DEG);\r\n    this.down.copy(up).multiplyScalar(-radius * _LightningStrike.SIN30DEG);\r\n    const p = this.vPos;\r\n    const v = this.vertices;\r\n    p.copy(pos).sub(this.side).add(this.down);\r\n    v[this.currentCoordinate++] = p.x;\r\n    v[this.currentCoordinate++] = p.y;\r\n    v[this.currentCoordinate++] = p.z;\r\n    p.copy(pos).add(this.side).add(this.down);\r\n    v[this.currentCoordinate++] = p.x;\r\n    v[this.currentCoordinate++] = p.y;\r\n    v[this.currentCoordinate++] = p.z;\r\n    p.copy(up).multiplyScalar(radius).add(pos);\r\n    v[this.currentCoordinate++] = p.x;\r\n    v[this.currentCoordinate++] = p.y;\r\n    v[this.currentCoordinate++] = p.z;\r\n    this.currentVertex += 3;\r\n  }\r\n  createTriangleVerticesWithUVs(pos, up, forwards, radius, u) {\r\n    this.side.crossVectors(up, forwards).multiplyScalar(radius * _LightningStrike.COS30DEG);\r\n    this.down.copy(up).multiplyScalar(-radius * _LightningStrike.SIN30DEG);\r\n    const p = this.vPos;\r\n    const v = this.vertices;\r\n    const uv = this.uvs;\r\n    p.copy(pos).sub(this.side).add(this.down);\r\n    v[this.currentCoordinate++] = p.x;\r\n    v[this.currentCoordinate++] = p.y;\r\n    v[this.currentCoordinate++] = p.z;\r\n    uv[this.currentUVCoordinate++] = u;\r\n    uv[this.currentUVCoordinate++] = 0;\r\n    p.copy(pos).add(this.side).add(this.down);\r\n    v[this.currentCoordinate++] = p.x;\r\n    v[this.currentCoordinate++] = p.y;\r\n    v[this.currentCoordinate++] = p.z;\r\n    uv[this.currentUVCoordinate++] = u;\r\n    uv[this.currentUVCoordinate++] = 0.5;\r\n    p.copy(up).multiplyScalar(radius).add(pos);\r\n    v[this.currentCoordinate++] = p.x;\r\n    v[this.currentCoordinate++] = p.y;\r\n    v[this.currentCoordinate++] = p.z;\r\n    uv[this.currentUVCoordinate++] = u;\r\n    uv[this.currentUVCoordinate++] = 1;\r\n    this.currentVertex += 3;\r\n  }\r\n  createPrismFaces(vertex) {\r\n    const indices = this.indices;\r\n    vertex = this.currentVertex - 6;\r\n    indices[this.currentIndex++] = vertex + 1;\r\n    indices[this.currentIndex++] = vertex + 2;\r\n    indices[this.currentIndex++] = vertex + 5;\r\n    indices[this.currentIndex++] = vertex + 1;\r\n    indices[this.currentIndex++] = vertex + 5;\r\n    indices[this.currentIndex++] = vertex + 4;\r\n    indices[this.currentIndex++] = vertex + 0;\r\n    indices[this.currentIndex++] = vertex + 1;\r\n    indices[this.currentIndex++] = vertex + 4;\r\n    indices[this.currentIndex++] = vertex + 0;\r\n    indices[this.currentIndex++] = vertex + 4;\r\n    indices[this.currentIndex++] = vertex + 3;\r\n    indices[this.currentIndex++] = vertex + 2;\r\n    indices[this.currentIndex++] = vertex + 0;\r\n    indices[this.currentIndex++] = vertex + 3;\r\n    indices[this.currentIndex++] = vertex + 2;\r\n    indices[this.currentIndex++] = vertex + 3;\r\n    indices[this.currentIndex++] = vertex + 5;\r\n  }\r\n  createDefaultSubrayCreationCallbacks() {\r\n    const random1 = this.randomGenerator.random;\r\n    this.onDecideSubrayCreation = function(segment, lightningStrike) {\r\n      const subray = lightningStrike.currentSubray;\r\n      const period = lightningStrike.rayParameters.subrayPeriod;\r\n      const dutyCycle = lightningStrike.rayParameters.subrayDutyCycle;\r\n      const phase0 = lightningStrike.rayParameters.isEternal && subray.recursion == 0 ? -random1() * period : MathUtils.lerp(subray.birthTime, subray.endPropagationTime, segment.fraction0) - random1() * period;\r\n      const phase = lightningStrike.time - phase0;\r\n      const currentCycle = Math.floor(phase / period);\r\n      const childSubraySeed = random1() * (currentCycle + 1);\r\n      const isActive = phase % period <= dutyCycle * period;\r\n      let probability = 0;\r\n      if (isActive) {\r\n        probability = lightningStrike.subrayProbability;\r\n      }\r\n      if (subray.recursion < lightningStrike.maxSubrayRecursion && lightningStrike.numSubrays < lightningStrike.maxSubrays && random1() < probability) {\r\n        const childSubray = lightningStrike.addNewSubray();\r\n        const parentSeed = lightningStrike.randomGenerator.getSeed();\r\n        childSubray.seed = childSubraySeed;\r\n        lightningStrike.randomGenerator.setSeed(childSubraySeed);\r\n        childSubray.recursion = subray.recursion + 1;\r\n        childSubray.maxIterations = Math.max(1, subray.maxIterations - 1);\r\n        childSubray.linPos0.set(random1(), random1(), random1()).multiplyScalar(1e3);\r\n        childSubray.linPos1.set(random1(), random1(), random1()).multiplyScalar(1e3);\r\n        childSubray.up0.copy(subray.up0);\r\n        childSubray.up1.copy(subray.up1);\r\n        childSubray.radius0 = segment.radius0 * lightningStrike.rayParameters.radius0Factor;\r\n        childSubray.radius1 = Math.min(\r\n          lightningStrike.rayParameters.minRadius,\r\n          segment.radius1 * lightningStrike.rayParameters.radius1Factor\r\n        );\r\n        childSubray.birthTime = phase0 + currentCycle * period;\r\n        childSubray.deathTime = childSubray.birthTime + period * dutyCycle;\r\n        if (!lightningStrike.rayParameters.isEternal && subray.recursion == 0) {\r\n          childSubray.birthTime = Math.max(childSubray.birthTime, subray.birthTime);\r\n          childSubray.deathTime = Math.min(childSubray.deathTime, subray.deathTime);\r\n        }\r\n        childSubray.timeScale = subray.timeScale * 2;\r\n        childSubray.roughness = subray.roughness;\r\n        childSubray.straightness = subray.straightness;\r\n        childSubray.propagationTimeFactor = subray.propagationTimeFactor;\r\n        childSubray.vanishingTimeFactor = subray.vanishingTimeFactor;\r\n        lightningStrike.onSubrayCreation(segment, subray, childSubray, lightningStrike);\r\n        lightningStrike.randomGenerator.setSeed(parentSeed);\r\n      }\r\n    };\r\n    const vec1Pos = new Vector3();\r\n    const vec2Forward = new Vector3();\r\n    const vec3Side = new Vector3();\r\n    const vec4Up = new Vector3();\r\n    this.onSubrayCreation = function(segment, parentSubray, childSubray, lightningStrike) {\r\n      lightningStrike.subrayCylinderPosition(segment, parentSubray, childSubray, 0.5, 0.6, 0.2);\r\n    };\r\n    this.subrayConePosition = function(segment, parentSubray, childSubray, heightFactor, sideWidthFactor, minSideWidthFactor) {\r\n      childSubray.pos0.copy(segment.pos0);\r\n      vec1Pos.subVectors(parentSubray.pos1, parentSubray.pos0);\r\n      vec2Forward.copy(vec1Pos).normalize();\r\n      vec1Pos.multiplyScalar(segment.fraction0 + (1 - segment.fraction0) * (random1() * heightFactor));\r\n      const length = vec1Pos.length();\r\n      vec3Side.crossVectors(parentSubray.up0, vec2Forward);\r\n      const angle = 2 * Math.PI * random1();\r\n      vec3Side.multiplyScalar(Math.cos(angle));\r\n      vec4Up.copy(parentSubray.up0).multiplyScalar(Math.sin(angle));\r\n      childSubray.pos1.copy(vec3Side).add(vec4Up).multiplyScalar(length * sideWidthFactor * (minSideWidthFactor + random1() * (1 - minSideWidthFactor))).add(vec1Pos).add(parentSubray.pos0);\r\n    };\r\n    this.subrayCylinderPosition = function(segment, parentSubray, childSubray, heightFactor, sideWidthFactor, minSideWidthFactor) {\r\n      childSubray.pos0.copy(segment.pos0);\r\n      vec1Pos.subVectors(parentSubray.pos1, parentSubray.pos0);\r\n      vec2Forward.copy(vec1Pos).normalize();\r\n      vec1Pos.multiplyScalar(segment.fraction0 + (1 - segment.fraction0) * ((2 * random1() - 1) * heightFactor));\r\n      const length = vec1Pos.length();\r\n      vec3Side.crossVectors(parentSubray.up0, vec2Forward);\r\n      const angle = 2 * Math.PI * random1();\r\n      vec3Side.multiplyScalar(Math.cos(angle));\r\n      vec4Up.copy(parentSubray.up0).multiplyScalar(Math.sin(angle));\r\n      childSubray.pos1.copy(vec3Side).add(vec4Up).multiplyScalar(length * sideWidthFactor * (minSideWidthFactor + random1() * (1 - minSideWidthFactor))).add(vec1Pos).add(parentSubray.pos0);\r\n    };\r\n  }\r\n  createSubray() {\r\n    return {\r\n      seed: 0,\r\n      maxIterations: 0,\r\n      recursion: 0,\r\n      pos0: new Vector3(),\r\n      pos1: new Vector3(),\r\n      linPos0: new Vector3(),\r\n      linPos1: new Vector3(),\r\n      up0: new Vector3(),\r\n      up1: new Vector3(),\r\n      radius0: 0,\r\n      radius1: 0,\r\n      birthTime: 0,\r\n      deathTime: 0,\r\n      timeScale: 0,\r\n      roughness: 0,\r\n      straightness: 0,\r\n      propagationTimeFactor: 0,\r\n      vanishingTimeFactor: 0,\r\n      endPropagationTime: 0,\r\n      beginVanishingTime: 0\r\n    };\r\n  }\r\n  createSegment() {\r\n    return {\r\n      iteration: 0,\r\n      pos0: new Vector3(),\r\n      pos1: new Vector3(),\r\n      linPos0: new Vector3(),\r\n      linPos1: new Vector3(),\r\n      up0: new Vector3(),\r\n      up1: new Vector3(),\r\n      radius0: 0,\r\n      radius1: 0,\r\n      fraction0: 0,\r\n      fraction1: 0,\r\n      positionVariationFactor: 0\r\n    };\r\n  }\r\n  getNewSegment() {\r\n    return this.raySegments[this.currentSegmentIndex++];\r\n  }\r\n  copy(source) {\r\n    super.copy(source);\r\n    this.init(_LightningStrike.copyParameters({}, source.rayParameters));\r\n    return this;\r\n  }\r\n  clone() {\r\n    return new this.constructor(_LightningStrike.copyParameters({}, this.rayParameters));\r\n  }\r\n};\r\nlet LightningStrike = _LightningStrike;\r\n// Ray states\r\n__publicField(LightningStrike, \"RAY_INITIALIZED\", 0);\r\n__publicField(LightningStrike, \"RAY_UNBORN\", 1);\r\n__publicField(LightningStrike, \"RAY_PROPAGATING\", 2);\r\n__publicField(LightningStrike, \"RAY_STEADY\", 3);\r\n__publicField(LightningStrike, \"RAY_VANISHING\", 4);\r\n__publicField(LightningStrike, \"RAY_EXTINGUISHED\", 5);\r\n__publicField(LightningStrike, \"COS30DEG\", Math.cos(30 * Math.PI / 180));\r\n__publicField(LightningStrike, \"SIN30DEG\", Math.sin(30 * Math.PI / 180));\r\nexport {\r\n  LightningStrike\r\n};\r\n", "var __defProp = Object.defineProperty;\r\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\r\nvar __publicField = (obj, key, value) => {\r\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\r\n  return value;\r\n};\r\nimport { Mesh, Matrix4, Vector2, Color, Vector3, PerspectiveCamera, DepthTexture, UnsignedShortType, NearestFilter, HalfFloatType, WebGLRenderTarget, ShaderMaterial, UniformsUtils, Plane } from \"three\";\r\nconst _ReflectorForSSRPass = class extends Mesh {\r\n  constructor(geometry, options = {}) {\r\n    super(geometry);\r\n    this.isReflectorForSSRPass = true;\r\n    this.type = \"ReflectorForSSRPass\";\r\n    const scope = this;\r\n    const color = options.color !== void 0 ? new Color(options.color) : new Color(8355711);\r\n    const textureWidth = options.textureWidth || 512;\r\n    const textureHeight = options.textureHeight || 512;\r\n    const clipBias = options.clipBias || 0;\r\n    const shader = options.shader || _ReflectorForSSRPass.ReflectorShader;\r\n    const useDepthTexture = options.useDepthTexture === true;\r\n    const yAxis = new Vector3(0, 1, 0);\r\n    const vecTemp0 = new Vector3();\r\n    const vecTemp1 = new Vector3();\r\n    scope.needsUpdate = false;\r\n    scope.maxDistance = _ReflectorForSSRPass.ReflectorShader.uniforms.maxDistance.value;\r\n    scope.opacity = _ReflectorForSSRPass.ReflectorShader.uniforms.opacity.value;\r\n    scope.color = color;\r\n    scope.resolution = options.resolution || new Vector2(window.innerWidth, window.innerHeight);\r\n    scope._distanceAttenuation = _ReflectorForSSRPass.ReflectorShader.defines.DISTANCE_ATTENUATION;\r\n    Object.defineProperty(scope, \"distanceAttenuation\", {\r\n      get() {\r\n        return scope._distanceAttenuation;\r\n      },\r\n      set(val) {\r\n        if (scope._distanceAttenuation === val)\r\n          return;\r\n        scope._distanceAttenuation = val;\r\n        scope.material.defines.DISTANCE_ATTENUATION = val;\r\n        scope.material.needsUpdate = true;\r\n      }\r\n    });\r\n    scope._fresnel = _ReflectorForSSRPass.ReflectorShader.defines.FRESNEL;\r\n    Object.defineProperty(scope, \"fresnel\", {\r\n      get() {\r\n        return scope._fresnel;\r\n      },\r\n      set(val) {\r\n        if (scope._fresnel === val)\r\n          return;\r\n        scope._fresnel = val;\r\n        scope.material.defines.FRESNEL = val;\r\n        scope.material.needsUpdate = true;\r\n      }\r\n    });\r\n    const normal = new Vector3();\r\n    const reflectorWorldPosition = new Vector3();\r\n    const cameraWorldPosition = new Vector3();\r\n    const rotationMatrix = new Matrix4();\r\n    const lookAtPosition = new Vector3(0, 0, -1);\r\n    const view = new Vector3();\r\n    const target = new Vector3();\r\n    const textureMatrix = new Matrix4();\r\n    const virtualCamera = new PerspectiveCamera();\r\n    let depthTexture;\r\n    if (useDepthTexture) {\r\n      depthTexture = new DepthTexture();\r\n      depthTexture.type = UnsignedShortType;\r\n      depthTexture.minFilter = NearestFilter;\r\n      depthTexture.magFilter = NearestFilter;\r\n    }\r\n    const parameters = {\r\n      depthTexture: useDepthTexture ? depthTexture : null,\r\n      type: HalfFloatType\r\n    };\r\n    const renderTarget = new WebGLRenderTarget(textureWidth, textureHeight, parameters);\r\n    const material = new ShaderMaterial({\r\n      transparent: useDepthTexture,\r\n      defines: Object.assign({}, _ReflectorForSSRPass.ReflectorShader.defines, {\r\n        useDepthTexture\r\n      }),\r\n      uniforms: UniformsUtils.clone(shader.uniforms),\r\n      fragmentShader: shader.fragmentShader,\r\n      vertexShader: shader.vertexShader\r\n    });\r\n    material.uniforms[\"tDiffuse\"].value = renderTarget.texture;\r\n    material.uniforms[\"color\"].value = scope.color;\r\n    material.uniforms[\"textureMatrix\"].value = textureMatrix;\r\n    if (useDepthTexture) {\r\n      material.uniforms[\"tDepth\"].value = renderTarget.depthTexture;\r\n    }\r\n    this.material = material;\r\n    const globalPlane = new Plane(new Vector3(0, 1, 0), clipBias);\r\n    const globalPlanes = [globalPlane];\r\n    this.doRender = function(renderer, scene, camera) {\r\n      material.uniforms[\"maxDistance\"].value = scope.maxDistance;\r\n      material.uniforms[\"color\"].value = scope.color;\r\n      material.uniforms[\"opacity\"].value = scope.opacity;\r\n      vecTemp0.copy(camera.position).normalize();\r\n      vecTemp1.copy(vecTemp0).reflect(yAxis);\r\n      material.uniforms[\"fresnelCoe\"].value = (vecTemp0.dot(vecTemp1) + 1) / 2;\r\n      reflectorWorldPosition.setFromMatrixPosition(scope.matrixWorld);\r\n      cameraWorldPosition.setFromMatrixPosition(camera.matrixWorld);\r\n      rotationMatrix.extractRotation(scope.matrixWorld);\r\n      normal.set(0, 0, 1);\r\n      normal.applyMatrix4(rotationMatrix);\r\n      view.subVectors(reflectorWorldPosition, cameraWorldPosition);\r\n      if (view.dot(normal) > 0)\r\n        return;\r\n      view.reflect(normal).negate();\r\n      view.add(reflectorWorldPosition);\r\n      rotationMatrix.extractRotation(camera.matrixWorld);\r\n      lookAtPosition.set(0, 0, -1);\r\n      lookAtPosition.applyMatrix4(rotationMatrix);\r\n      lookAtPosition.add(cameraWorldPosition);\r\n      target.subVectors(reflectorWorldPosition, lookAtPosition);\r\n      target.reflect(normal).negate();\r\n      target.add(reflectorWorldPosition);\r\n      virtualCamera.position.copy(view);\r\n      virtualCamera.up.set(0, 1, 0);\r\n      virtualCamera.up.applyMatrix4(rotationMatrix);\r\n      virtualCamera.up.reflect(normal);\r\n      virtualCamera.lookAt(target);\r\n      virtualCamera.far = camera.far;\r\n      virtualCamera.updateMatrixWorld();\r\n      virtualCamera.projectionMatrix.copy(camera.projectionMatrix);\r\n      material.uniforms[\"virtualCameraNear\"].value = camera.near;\r\n      material.uniforms[\"virtualCameraFar\"].value = camera.far;\r\n      material.uniforms[\"virtualCameraMatrixWorld\"].value = virtualCamera.matrixWorld;\r\n      material.uniforms[\"virtualCameraProjectionMatrix\"].value = camera.projectionMatrix;\r\n      material.uniforms[\"virtualCameraProjectionMatrixInverse\"].value = camera.projectionMatrixInverse;\r\n      material.uniforms[\"resolution\"].value = scope.resolution;\r\n      textureMatrix.set(0.5, 0, 0, 0.5, 0, 0.5, 0, 0.5, 0, 0, 0.5, 0.5, 0, 0, 0, 1);\r\n      textureMatrix.multiply(virtualCamera.projectionMatrix);\r\n      textureMatrix.multiply(virtualCamera.matrixWorldInverse);\r\n      textureMatrix.multiply(scope.matrixWorld);\r\n      const currentRenderTarget = renderer.getRenderTarget();\r\n      const currentXrEnabled = renderer.xr.enabled;\r\n      const currentShadowAutoUpdate = renderer.shadowMap.autoUpdate;\r\n      const currentClippingPlanes = renderer.clippingPlanes;\r\n      renderer.xr.enabled = false;\r\n      renderer.shadowMap.autoUpdate = false;\r\n      renderer.clippingPlanes = globalPlanes;\r\n      renderer.setRenderTarget(renderTarget);\r\n      renderer.state.buffers.depth.setMask(true);\r\n      if (renderer.autoClear === false)\r\n        renderer.clear();\r\n      renderer.render(scene, virtualCamera);\r\n      renderer.xr.enabled = currentXrEnabled;\r\n      renderer.shadowMap.autoUpdate = currentShadowAutoUpdate;\r\n      renderer.clippingPlanes = currentClippingPlanes;\r\n      renderer.setRenderTarget(currentRenderTarget);\r\n      const viewport = camera.viewport;\r\n      if (viewport !== void 0) {\r\n        renderer.state.viewport(viewport);\r\n      }\r\n    };\r\n    this.getRenderTarget = function() {\r\n      return renderTarget;\r\n    };\r\n  }\r\n};\r\nlet ReflectorForSSRPass = _ReflectorForSSRPass;\r\n__publicField(ReflectorForSSRPass, \"ReflectorShader\", {\r\n  defines: {\r\n    DISTANCE_ATTENUATION: true,\r\n    FRESNEL: true\r\n  },\r\n  uniforms: {\r\n    color: { value: null },\r\n    tDiffuse: { value: null },\r\n    tDepth: { value: null },\r\n    textureMatrix: { value: /* @__PURE__ */ new Matrix4() },\r\n    maxDistance: { value: 180 },\r\n    opacity: { value: 0.5 },\r\n    fresnelCoe: { value: null },\r\n    virtualCameraNear: { value: null },\r\n    virtualCameraFar: { value: null },\r\n    virtualCameraProjectionMatrix: { value: /* @__PURE__ */ new Matrix4() },\r\n    virtualCameraMatrixWorld: { value: /* @__PURE__ */ new Matrix4() },\r\n    virtualCameraProjectionMatrixInverse: { value: /* @__PURE__ */ new Matrix4() },\r\n    resolution: { value: /* @__PURE__ */ new Vector2() }\r\n  },\r\n  vertexShader: (\r\n    /* glsl */\r\n    `\r\n\t\tuniform mat4 textureMatrix;\r\n\t\tvarying vec4 vUv;\r\n\r\n\t\tvoid main() {\r\n\r\n\t\t\tvUv = textureMatrix * vec4( position, 1.0 );\r\n\r\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\r\n\r\n\t\t}`\r\n  ),\r\n  fragmentShader: (\r\n    /* glsl */\r\n    `\r\n\t\tuniform vec3 color;\r\n\t\tuniform sampler2D tDiffuse;\r\n\t\tuniform sampler2D tDepth;\r\n\t\tuniform float maxDistance;\r\n\t\tuniform float opacity;\r\n\t\tuniform float fresnelCoe;\r\n\t\tuniform float virtualCameraNear;\r\n\t\tuniform float virtualCameraFar;\r\n\t\tuniform mat4 virtualCameraProjectionMatrix;\r\n\t\tuniform mat4 virtualCameraProjectionMatrixInverse;\r\n\t\tuniform mat4 virtualCameraMatrixWorld;\r\n\t\tuniform vec2 resolution;\r\n\t\tvarying vec4 vUv;\r\n\t\t#include <packing>\r\n\t\tfloat blendOverlay( float base, float blend ) {\r\n\t\t\treturn( base < 0.5 ? ( 2.0 * base * blend ) : ( 1.0 - 2.0 * ( 1.0 - base ) * ( 1.0 - blend ) ) );\r\n\t\t}\r\n\t\tvec3 blendOverlay( vec3 base, vec3 blend ) {\r\n\t\t\treturn vec3( blendOverlay( base.r, blend.r ), blendOverlay( base.g, blend.g ), blendOverlay( base.b, blend.b ) );\r\n\t\t}\r\n\t\tfloat getDepth( const in vec2 uv ) {\r\n\t\t\treturn texture2D( tDepth, uv ).x;\r\n\t\t}\r\n\t\tfloat getViewZ( const in float depth ) {\r\n\t\t\treturn perspectiveDepthToViewZ( depth, virtualCameraNear, virtualCameraFar );\r\n\t\t}\r\n\t\tvec3 getViewPosition( const in vec2 uv, const in float depth/*clip space*/, const in float clipW ) {\r\n\t\t\tvec4 clipPosition = vec4( ( vec3( uv, depth ) - 0.5 ) * 2.0, 1.0 );//ndc\r\n\t\t\tclipPosition *= clipW; //clip\r\n\t\t\treturn ( virtualCameraProjectionMatrixInverse * clipPosition ).xyz;//view\r\n\t\t}\r\n\t\tvoid main() {\r\n\t\t\tvec4 base = texture2DProj( tDiffuse, vUv );\r\n\t\t\t#ifdef useDepthTexture\r\n\t\t\t\tvec2 uv=(gl_FragCoord.xy-.5)/resolution.xy;\r\n\t\t\t\tuv.x=1.-uv.x;\r\n\t\t\t\tfloat depth = texture2DProj( tDepth, vUv ).r;\r\n\t\t\t\tfloat viewZ = getViewZ( depth );\r\n\t\t\t\tfloat clipW = virtualCameraProjectionMatrix[2][3] * viewZ+virtualCameraProjectionMatrix[3][3];\r\n\t\t\t\tvec3 viewPosition=getViewPosition( uv, depth, clipW );\r\n\t\t\t\tvec3 worldPosition=(virtualCameraMatrixWorld*vec4(viewPosition,1)).xyz;\r\n\t\t\t\tif(worldPosition.y>maxDistance) discard;\r\n\t\t\t\tfloat op=opacity;\r\n\t\t\t\t#ifdef DISTANCE_ATTENUATION\r\n\t\t\t\t\tfloat ratio=1.-(worldPosition.y/maxDistance);\r\n\t\t\t\t\tfloat attenuation=ratio*ratio;\r\n\t\t\t\t\top=opacity*attenuation;\r\n\t\t\t\t#endif\r\n\t\t\t\t#ifdef FRESNEL\r\n\t\t\t\t\top*=fresnelCoe;\r\n\t\t\t\t#endif\r\n\t\t\t\tgl_FragColor = vec4( blendOverlay( base.rgb, color ), op );\r\n\t\t\t#else\r\n\t\t\t\tgl_FragColor = vec4( blendOverlay( base.rgb, color ), 1.0 );\r\n\t\t\t#endif\r\n\t\t}\r\n\t`\r\n  )\r\n});\r\nexport {\r\n  ReflectorForSSRPass\r\n};\r\n", "var __defProp = Object.defineProperty;\r\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\r\nvar __publicField = (obj, key, value) => {\r\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\r\n  return value;\r\n};\r\nimport { Vector3, ShaderMaterial, UniformsUtils, BackSide, Mesh, BoxGeometry } from \"three\";\r\nconst SkyShader = {\r\n  uniforms: {\r\n    turbidity: { value: 2 },\r\n    rayleigh: { value: 1 },\r\n    mieCoefficient: { value: 5e-3 },\r\n    mieDirectionalG: { value: 0.8 },\r\n    sunPosition: { value: /* @__PURE__ */ new Vector3() },\r\n    up: { value: /* @__PURE__ */ new Vector3(0, 1, 0) }\r\n  },\r\n  vertexShader: (\r\n    /* glsl */\r\n    `\r\n      uniform vec3 sunPosition;\r\n      uniform float rayleigh;\r\n      uniform float turbidity;\r\n      uniform float mieCoefficient;\r\n      uniform vec3 up;\r\n\r\n      varying vec3 vWorldPosition;\r\n      varying vec3 vSunDirection;\r\n      varying float vSunfade;\r\n      varying vec3 vBetaR;\r\n      varying vec3 vBetaM;\r\n      varying float vSunE;\r\n\r\n      // constants for atmospheric scattering\r\n      const float e = 2.71828182845904523536028747135266249775724709369995957;\r\n      const float pi = 3.141592653589793238462643383279502884197169;\r\n\r\n      // wavelength of used primaries, according to preetham\r\n      const vec3 lambda = vec3( 680E-9, 550E-9, 450E-9 );\r\n      // this pre-calcuation replaces older TotalRayleigh(vec3 lambda) function:\r\n      // (8.0 * pow(pi, 3.0) * pow(pow(n, 2.0) - 1.0, 2.0) * (6.0 + 3.0 * pn)) / (3.0 * N * pow(lambda, vec3(4.0)) * (6.0 - 7.0 * pn))\r\n      const vec3 totalRayleigh = vec3( 5.804542996261093E-6, 1.3562911419845635E-5, 3.0265902468824876E-5 );\r\n\r\n      // mie stuff\r\n      // K coefficient for the primaries\r\n      const float v = 4.0;\r\n      const vec3 K = vec3( 0.686, 0.678, 0.666 );\r\n      // MieConst = pi * pow( ( 2.0 * pi ) / lambda, vec3( v - 2.0 ) ) * K\r\n      const vec3 MieConst = vec3( 1.8399918514433978E14, 2.7798023919660528E14, 4.0790479543861094E14 );\r\n\r\n      // earth shadow hack\r\n      // cutoffAngle = pi / 1.95;\r\n      const float cutoffAngle = 1.6110731556870734;\r\n      const float steepness = 1.5;\r\n      const float EE = 1000.0;\r\n\r\n      float sunIntensity( float zenithAngleCos ) {\r\n        zenithAngleCos = clamp( zenithAngleCos, -1.0, 1.0 );\r\n        return EE * max( 0.0, 1.0 - pow( e, -( ( cutoffAngle - acos( zenithAngleCos ) ) / steepness ) ) );\r\n      }\r\n\r\n      vec3 totalMie( float T ) {\r\n        float c = ( 0.2 * T ) * 10E-18;\r\n        return 0.434 * c * MieConst;\r\n      }\r\n\r\n      void main() {\r\n\r\n        vec4 worldPosition = modelMatrix * vec4( position, 1.0 );\r\n        vWorldPosition = worldPosition.xyz;\r\n\r\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\r\n        gl_Position.z = gl_Position.w; // set z to camera.far\r\n\r\n        vSunDirection = normalize( sunPosition );\r\n\r\n        vSunE = sunIntensity( dot( vSunDirection, up ) );\r\n\r\n        vSunfade = 1.0 - clamp( 1.0 - exp( ( sunPosition.y / 450000.0 ) ), 0.0, 1.0 );\r\n\r\n        float rayleighCoefficient = rayleigh - ( 1.0 * ( 1.0 - vSunfade ) );\r\n\r\n      // extinction (absorbtion + out scattering)\r\n      // rayleigh coefficients\r\n        vBetaR = totalRayleigh * rayleighCoefficient;\r\n\r\n      // mie coefficients\r\n        vBetaM = totalMie( turbidity ) * mieCoefficient;\r\n\r\n      }\r\n    `\r\n  ),\r\n  fragmentShader: (\r\n    /* glsl */\r\n    `\r\n      varying vec3 vWorldPosition;\r\n      varying vec3 vSunDirection;\r\n      varying float vSunfade;\r\n      varying vec3 vBetaR;\r\n      varying vec3 vBetaM;\r\n      varying float vSunE;\r\n\r\n      uniform float mieDirectionalG;\r\n      uniform vec3 up;\r\n\r\n      const vec3 cameraPos = vec3( 0.0, 0.0, 0.0 );\r\n\r\n      // constants for atmospheric scattering\r\n      const float pi = 3.141592653589793238462643383279502884197169;\r\n\r\n      const float n = 1.0003; // refractive index of air\r\n      const float N = 2.545E25; // number of molecules per unit volume for air at 288.15K and 1013mb (sea level -45 celsius)\r\n\r\n      // optical length at zenith for molecules\r\n      const float rayleighZenithLength = 8.4E3;\r\n      const float mieZenithLength = 1.25E3;\r\n      // 66 arc seconds -> degrees, and the cosine of that\r\n      const float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;\r\n\r\n      // 3.0 / ( 16.0 * pi )\r\n      const float THREE_OVER_SIXTEENPI = 0.05968310365946075;\r\n      // 1.0 / ( 4.0 * pi )\r\n      const float ONE_OVER_FOURPI = 0.07957747154594767;\r\n\r\n      float rayleighPhase( float cosTheta ) {\r\n        return THREE_OVER_SIXTEENPI * ( 1.0 + pow( cosTheta, 2.0 ) );\r\n      }\r\n\r\n      float hgPhase( float cosTheta, float g ) {\r\n        float g2 = pow( g, 2.0 );\r\n        float inverse = 1.0 / pow( 1.0 - 2.0 * g * cosTheta + g2, 1.5 );\r\n        return ONE_OVER_FOURPI * ( ( 1.0 - g2 ) * inverse );\r\n      }\r\n\r\n      void main() {\r\n\r\n        vec3 direction = normalize( vWorldPosition - cameraPos );\r\n\r\n      // optical length\r\n      // cutoff angle at 90 to avoid singularity in next formula.\r\n        float zenithAngle = acos( max( 0.0, dot( up, direction ) ) );\r\n        float inverse = 1.0 / ( cos( zenithAngle ) + 0.15 * pow( 93.885 - ( ( zenithAngle * 180.0 ) / pi ), -1.253 ) );\r\n        float sR = rayleighZenithLength * inverse;\r\n        float sM = mieZenithLength * inverse;\r\n\r\n      // combined extinction factor\r\n        vec3 Fex = exp( -( vBetaR * sR + vBetaM * sM ) );\r\n\r\n      // in scattering\r\n        float cosTheta = dot( direction, vSunDirection );\r\n\r\n        float rPhase = rayleighPhase( cosTheta * 0.5 + 0.5 );\r\n        vec3 betaRTheta = vBetaR * rPhase;\r\n\r\n        float mPhase = hgPhase( cosTheta, mieDirectionalG );\r\n        vec3 betaMTheta = vBetaM * mPhase;\r\n\r\n        vec3 Lin = pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * ( 1.0 - Fex ), vec3( 1.5 ) );\r\n        Lin *= mix( vec3( 1.0 ), pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * Fex, vec3( 1.0 / 2.0 ) ), clamp( pow( 1.0 - dot( up, vSunDirection ), 5.0 ), 0.0, 1.0 ) );\r\n\r\n      // nightsky\r\n        float theta = acos( direction.y ); // elevation --> y-axis, [-pi/2, pi/2]\r\n        float phi = atan( direction.z, direction.x ); // azimuth --> x-axis [-pi/2, pi/2]\r\n        vec2 uv = vec2( phi, theta ) / vec2( 2.0 * pi, pi ) + vec2( 0.5, 0.0 );\r\n        vec3 L0 = vec3( 0.1 ) * Fex;\r\n\r\n      // composition + solar disc\r\n        float sundisk = smoothstep( sunAngularDiameterCos, sunAngularDiameterCos + 0.00002, cosTheta );\r\n        L0 += ( vSunE * 19000.0 * Fex ) * sundisk;\r\n\r\n        vec3 texColor = ( Lin + L0 ) * 0.04 + vec3( 0.0, 0.0003, 0.00075 );\r\n\r\n        vec3 retColor = pow( texColor, vec3( 1.0 / ( 1.2 + ( 1.2 * vSunfade ) ) ) );\r\n\r\n        gl_FragColor = vec4( retColor, 1.0 );\r\n\r\n      #include <tonemapping_fragment>\r\n      #include <encodings_fragment>\r\n\r\n      }\r\n    `\r\n  )\r\n};\r\nconst material = /* @__PURE__ */ new ShaderMaterial({\r\n  name: \"SkyShader\",\r\n  fragmentShader: SkyShader.fragmentShader,\r\n  vertexShader: SkyShader.vertexShader,\r\n  uniforms: /* @__PURE__ */ UniformsUtils.clone(SkyShader.uniforms),\r\n  side: BackSide,\r\n  depthWrite: false\r\n});\r\nclass Sky extends Mesh {\r\n  constructor() {\r\n    super(new BoxGeometry(1, 1, 1), material);\r\n  }\r\n}\r\n__publicField(Sky, \"SkyShader\", SkyShader);\r\n__publicField(Sky, \"material\", material);\r\nexport {\r\n  Sky\r\n};\r\n", "var __defProp = Object.defineProperty;\r\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\r\nvar __publicField = (obj, key, value) => {\r\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\r\n  return value;\r\n};\r\nimport { Mesh, Vector4, Color, Vector2, Matrix4, Clock, ShaderMaterial, UniformsUtils, UniformsLib, RepeatWrapping } from \"three\";\r\nimport { Reflector } from \"./Reflector.js\";\r\nimport { Refractor } from \"./Refractor.js\";\r\nconst _Water2 = class extends Mesh {\r\n  constructor(geometry, options = {}) {\r\n    super(geometry);\r\n    this.isWater = true;\r\n    this.type = \"Water\";\r\n    const scope = this;\r\n    const color = options.color !== void 0 ? new Color(options.color) : new Color(16777215);\r\n    const textureWidth = options.textureWidth || 512;\r\n    const textureHeight = options.textureHeight || 512;\r\n    const clipBias = options.clipBias || 0;\r\n    const flowDirection = options.flowDirection || new Vector2(1, 0);\r\n    const flowSpeed = options.flowSpeed || 0.03;\r\n    const reflectivity = options.reflectivity || 0.02;\r\n    const scale = options.scale || 1;\r\n    const shader = options.shader || _Water2.WaterShader;\r\n    const encoding = options.encoding !== void 0 ? options.encoding : 3e3;\r\n    const flowMap = options.flowMap || void 0;\r\n    const normalMap0 = options.normalMap0;\r\n    const normalMap1 = options.normalMap1;\r\n    const cycle = 0.15;\r\n    const halfCycle = cycle * 0.5;\r\n    const textureMatrix = new Matrix4();\r\n    const clock = new Clock();\r\n    if (Reflector === void 0) {\r\n      console.error(\"THREE.Water: Required component Reflector not found.\");\r\n      return;\r\n    }\r\n    if (Refractor === void 0) {\r\n      console.error(\"THREE.Water: Required component Refractor not found.\");\r\n      return;\r\n    }\r\n    const reflector = new Reflector(geometry, {\r\n      textureWidth,\r\n      textureHeight,\r\n      clipBias,\r\n      encoding\r\n    });\r\n    const refractor = new Refractor(geometry, {\r\n      textureWidth,\r\n      textureHeight,\r\n      clipBias,\r\n      encoding\r\n    });\r\n    reflector.matrixAutoUpdate = false;\r\n    refractor.matrixAutoUpdate = false;\r\n    this.material = new ShaderMaterial({\r\n      uniforms: UniformsUtils.merge([UniformsLib[\"fog\"], shader.uniforms]),\r\n      vertexShader: shader.vertexShader,\r\n      fragmentShader: shader.fragmentShader,\r\n      transparent: true,\r\n      fog: true\r\n    });\r\n    if (flowMap !== void 0) {\r\n      this.material.defines.USE_FLOWMAP = \"\";\r\n      this.material.uniforms[\"tFlowMap\"] = {\r\n        type: \"t\",\r\n        value: flowMap\r\n      };\r\n    } else {\r\n      this.material.uniforms[\"flowDirection\"] = {\r\n        type: \"v2\",\r\n        value: flowDirection\r\n      };\r\n    }\r\n    normalMap0.wrapS = normalMap0.wrapT = RepeatWrapping;\r\n    normalMap1.wrapS = normalMap1.wrapT = RepeatWrapping;\r\n    this.material.uniforms[\"tReflectionMap\"].value = reflector.getRenderTarget().texture;\r\n    this.material.uniforms[\"tRefractionMap\"].value = refractor.getRenderTarget().texture;\r\n    this.material.uniforms[\"tNormalMap0\"].value = normalMap0;\r\n    this.material.uniforms[\"tNormalMap1\"].value = normalMap1;\r\n    this.material.uniforms[\"color\"].value = color;\r\n    this.material.uniforms[\"reflectivity\"].value = reflectivity;\r\n    this.material.uniforms[\"textureMatrix\"].value = textureMatrix;\r\n    this.material.uniforms[\"config\"].value.x = 0;\r\n    this.material.uniforms[\"config\"].value.y = halfCycle;\r\n    this.material.uniforms[\"config\"].value.z = halfCycle;\r\n    this.material.uniforms[\"config\"].value.w = scale;\r\n    function updateTextureMatrix(camera) {\r\n      textureMatrix.set(0.5, 0, 0, 0.5, 0, 0.5, 0, 0.5, 0, 0, 0.5, 0.5, 0, 0, 0, 1);\r\n      textureMatrix.multiply(camera.projectionMatrix);\r\n      textureMatrix.multiply(camera.matrixWorldInverse);\r\n      textureMatrix.multiply(scope.matrixWorld);\r\n    }\r\n    function updateFlow() {\r\n      const delta = clock.getDelta();\r\n      const config = scope.material.uniforms[\"config\"];\r\n      config.value.x += flowSpeed * delta;\r\n      config.value.y = config.value.x + halfCycle;\r\n      if (config.value.x >= cycle) {\r\n        config.value.x = 0;\r\n        config.value.y = halfCycle;\r\n      } else if (config.value.y >= cycle) {\r\n        config.value.y = config.value.y - cycle;\r\n      }\r\n    }\r\n    this.onBeforeRender = function(renderer, scene, camera) {\r\n      updateTextureMatrix(camera);\r\n      updateFlow();\r\n      scope.visible = false;\r\n      reflector.matrixWorld.copy(scope.matrixWorld);\r\n      refractor.matrixWorld.copy(scope.matrixWorld);\r\n      reflector.onBeforeRender(renderer, scene, camera);\r\n      refractor.onBeforeRender(renderer, scene, camera);\r\n      scope.visible = true;\r\n    };\r\n  }\r\n};\r\nlet Water2 = _Water2;\r\n__publicField(Water2, \"WaterShader\", {\r\n  uniforms: {\r\n    color: {\r\n      value: null\r\n    },\r\n    reflectivity: {\r\n      value: 0\r\n    },\r\n    tReflectionMap: {\r\n      value: null\r\n    },\r\n    tRefractionMap: {\r\n      value: null\r\n    },\r\n    tNormalMap0: {\r\n      value: null\r\n    },\r\n    tNormalMap1: {\r\n      value: null\r\n    },\r\n    textureMatrix: {\r\n      value: null\r\n    },\r\n    config: {\r\n      value: /* @__PURE__ */ new Vector4()\r\n    }\r\n  },\r\n  vertexShader: (\r\n    /* glsl */\r\n    `\r\n\r\n\t\t#include <common>\r\n\t\t#include <fog_pars_vertex>\r\n\t\t#include <logdepthbuf_pars_vertex>\r\n\r\n\t\tuniform mat4 textureMatrix;\r\n\r\n\t\tvarying vec4 vCoord;\r\n\t\tvarying vec2 vUv;\r\n\t\tvarying vec3 vToEye;\r\n\r\n\t\tvoid main() {\r\n\r\n\t\t\tvUv = uv;\r\n\t\t\tvCoord = textureMatrix * vec4( position, 1.0 );\r\n\r\n\t\t\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\r\n\t\t\tvToEye = cameraPosition - worldPosition.xyz;\r\n\r\n\t\t\tvec4 mvPosition =  viewMatrix * worldPosition; // used in fog_vertex\r\n\t\t\tgl_Position = projectionMatrix * mvPosition;\r\n\r\n\t\t\t#include <logdepthbuf_vertex>\r\n\t\t\t#include <fog_vertex>\r\n\r\n\t\t}`\r\n  ),\r\n  fragmentShader: (\r\n    /* glsl */\r\n    `\r\n\r\n\t\t#include <common>\r\n\t\t#include <fog_pars_fragment>\r\n\t\t#include <logdepthbuf_pars_fragment>\r\n\r\n\t\tuniform sampler2D tReflectionMap;\r\n\t\tuniform sampler2D tRefractionMap;\r\n\t\tuniform sampler2D tNormalMap0;\r\n\t\tuniform sampler2D tNormalMap1;\r\n\r\n\t\t#ifdef USE_FLOWMAP\r\n\t\t\tuniform sampler2D tFlowMap;\r\n\t\t#else\r\n\t\t\tuniform vec2 flowDirection;\r\n\t\t#endif\r\n\r\n\t\tuniform vec3 color;\r\n\t\tuniform float reflectivity;\r\n\t\tuniform vec4 config;\r\n\r\n\t\tvarying vec4 vCoord;\r\n\t\tvarying vec2 vUv;\r\n\t\tvarying vec3 vToEye;\r\n\r\n\t\tvoid main() {\r\n\r\n\t\t\t#include <logdepthbuf_fragment>\r\n\r\n\t\t\tfloat flowMapOffset0 = config.x;\r\n\t\t\tfloat flowMapOffset1 = config.y;\r\n\t\t\tfloat halfCycle = config.z;\r\n\t\t\tfloat scale = config.w;\r\n\r\n\t\t\tvec3 toEye = normalize( vToEye );\r\n\r\n\t\t\t// determine flow direction\r\n\t\t\tvec2 flow;\r\n\t\t\t#ifdef USE_FLOWMAP\r\n\t\t\t\tflow = texture2D( tFlowMap, vUv ).rg * 2.0 - 1.0;\r\n\t\t\t#else\r\n\t\t\t\tflow = flowDirection;\r\n\t\t\t#endif\r\n\t\t\tflow.x *= - 1.0;\r\n\r\n\t\t\t// sample normal maps (distort uvs with flowdata)\r\n\t\t\tvec4 normalColor0 = texture2D( tNormalMap0, ( vUv * scale ) + flow * flowMapOffset0 );\r\n\t\t\tvec4 normalColor1 = texture2D( tNormalMap1, ( vUv * scale ) + flow * flowMapOffset1 );\r\n\r\n\t\t\t// linear interpolate to get the final normal color\r\n\t\t\tfloat flowLerp = abs( halfCycle - flowMapOffset0 ) / halfCycle;\r\n\t\t\tvec4 normalColor = mix( normalColor0, normalColor1, flowLerp );\r\n\r\n\t\t\t// calculate normal vector\r\n\t\t\tvec3 normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\r\n\r\n\t\t\t// calculate the fresnel term to blend reflection and refraction maps\r\n\t\t\tfloat theta = max( dot( toEye, normal ), 0.0 );\r\n\t\t\tfloat reflectance = reflectivity + ( 1.0 - reflectivity ) * pow( ( 1.0 - theta ), 5.0 );\r\n\r\n\t\t\t// calculate final uv coords\r\n\t\t\tvec3 coord = vCoord.xyz / vCoord.w;\r\n\t\t\tvec2 uv = coord.xy + coord.z * normal.xz * 0.05;\r\n\r\n\t\t\tvec4 reflectColor = texture2D( tReflectionMap, vec2( 1.0 - uv.x, uv.y ) );\r\n\t\t\tvec4 refractColor = texture2D( tRefractionMap, uv );\r\n\r\n\t\t\t// multiply water color with the mix of both textures\r\n\t\t\tgl_FragColor = vec4( color, 1.0 ) * mix( refractColor, reflectColor, reflectance );\r\n\r\n\t\t\t#include <tonemapping_fragment>\r\n\t\t\t#include <encodings_fragment>\r\n\t\t\t#include <fog_fragment>\r\n\r\n\t\t}`\r\n  )\r\n});\r\nexport {\r\n  Water2\r\n};\r\n", "var __defProp = Object.defineProperty;\r\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\r\nvar __publicField = (obj, key, value) => {\r\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\r\n  return value;\r\n};\r\nimport { Mesh, PlaneGeometry, OrthographicCamera, MathUtils, WebGLRenderTarget, Vector2, RawShaderMaterial, NoBlending } from \"three\";\r\nvar _mipmapMaterial = /* @__PURE__ */ _getMipmapMaterial();\r\nvar _mesh = /* @__PURE__ */ new Mesh(/* @__PURE__ */ new PlaneGeometry(2, 2), _mipmapMaterial);\r\nvar _flatCamera = /* @__PURE__ */ new OrthographicCamera(0, 1, 0, 1, 0, 1);\r\nvar _tempTarget = null;\r\nclass RoughnessMipmapper {\r\n  constructor(renderer) {\r\n    __publicField(this, \"generateMipmaps\", function(material) {\r\n      if (\"roughnessMap\" in material === false)\r\n        return;\r\n      var { roughnessMap, normalMap } = material;\r\n      if (roughnessMap === null || normalMap === null || !roughnessMap.generateMipmaps || material.userData.roughnessUpdated) {\r\n        return;\r\n      }\r\n      material.userData.roughnessUpdated = true;\r\n      var width = Math.max(roughnessMap.image.width, normalMap.image.width);\r\n      var height = Math.max(roughnessMap.image.height, normalMap.image.height);\r\n      if (!MathUtils.isPowerOfTwo(width) || !MathUtils.isPowerOfTwo(height))\r\n        return;\r\n      var oldTarget = this._renderer.getRenderTarget();\r\n      var autoClear = this._renderer.autoClear;\r\n      this._renderer.autoClear = false;\r\n      if (_tempTarget === null || _tempTarget.width !== width || _tempTarget.height !== height) {\r\n        if (_tempTarget !== null)\r\n          _tempTarget.dispose();\r\n        _tempTarget = new WebGLRenderTarget(width, height, {\r\n          depthBuffer: false\r\n        });\r\n        _tempTarget.scissorTest = true;\r\n      }\r\n      if (width !== roughnessMap.image.width || height !== roughnessMap.image.height) {\r\n        var params = {\r\n          wrapS: roughnessMap.wrapS,\r\n          wrapT: roughnessMap.wrapT,\r\n          magFilter: roughnessMap.magFilter,\r\n          minFilter: roughnessMap.minFilter,\r\n          depthBuffer: false\r\n        };\r\n        var newRoughnessTarget = new WebGLRenderTarget(width, height, params);\r\n        newRoughnessTarget.texture.generateMipmaps = true;\r\n        this._renderer.setRenderTarget(newRoughnessTarget);\r\n        material.roughnessMap = newRoughnessTarget.texture;\r\n        if (material.metalnessMap == roughnessMap)\r\n          material.metalnessMap = material.roughnessMap;\r\n        if (material.aoMap == roughnessMap)\r\n          material.aoMap = material.roughnessMap;\r\n      }\r\n      _mipmapMaterial.uniforms.roughnessMap.value = roughnessMap;\r\n      _mipmapMaterial.uniforms.normalMap.value = normalMap;\r\n      var position = new Vector2(0, 0);\r\n      var texelSize = _mipmapMaterial.uniforms.texelSize.value;\r\n      for (let mip = 0; width >= 1 && height >= 1; ++mip, width /= 2, height /= 2) {\r\n        texelSize.set(1 / width, 1 / height);\r\n        if (mip == 0)\r\n          texelSize.set(0, 0);\r\n        _tempTarget.viewport.set(position.x, position.y, width, height);\r\n        _tempTarget.scissor.set(position.x, position.y, width, height);\r\n        this._renderer.setRenderTarget(_tempTarget);\r\n        this._renderer.render(_mesh, _flatCamera);\r\n        this._renderer.copyFramebufferToTexture(position, material.roughnessMap, mip);\r\n        _mipmapMaterial.uniforms.roughnessMap.value = material.roughnessMap;\r\n      }\r\n      if (roughnessMap !== material.roughnessMap)\r\n        roughnessMap.dispose();\r\n      this._renderer.setRenderTarget(oldTarget);\r\n      this._renderer.autoClear = autoClear;\r\n    });\r\n    __publicField(this, \"dispose\", function() {\r\n      _mipmapMaterial.dispose();\r\n      _mesh.geometry.dispose();\r\n      if (_tempTarget != null)\r\n        _tempTarget.dispose();\r\n    });\r\n    this._renderer = renderer;\r\n    this._renderer.compile(_mesh, _flatCamera);\r\n  }\r\n}\r\nfunction _getMipmapMaterial() {\r\n  var shaderMaterial = new RawShaderMaterial({\r\n    uniforms: {\r\n      roughnessMap: { value: null },\r\n      normalMap: { value: null },\r\n      texelSize: { value: new Vector2(1, 1) }\r\n    },\r\n    vertexShader: (\r\n      /* glsl */\r\n      `\r\n\t\t\tprecision mediump float;\r\n\t\t\tprecision mediump int;\r\n\r\n\t\t\tattribute vec3 position;\r\n\t\t\tattribute vec2 uv;\r\n\r\n\t\t\tvarying vec2 vUv;\r\n\r\n\t\t\tvoid main() {\r\n\r\n\t\t\t\tvUv = uv;\r\n\r\n\t\t\t\tgl_Position = vec4( position, 1.0 );\r\n\r\n\t\t\t}\r\n\t\t`\r\n    ),\r\n    fragmentShader: (\r\n      /* glsl */\r\n      `\r\n\t\t\tprecision mediump float;\r\n\t\t\tprecision mediump int;\r\n\r\n\t\t\tvarying vec2 vUv;\r\n\r\n\t\t\tuniform sampler2D roughnessMap;\r\n\t\t\tuniform sampler2D normalMap;\r\n\t\t\tuniform vec2 texelSize;\r\n\r\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\r\n\r\n\t\t\tvec4 envMapTexelToLinear( vec4 a ) { return a; }\r\n\r\n\t\t\t#include <cube_uv_reflection_fragment>\r\n\r\n\t\t\tfloat roughnessToVariance( float roughness ) {\r\n\r\n\t\t\t\tfloat variance = 0.0;\r\n\r\n\t\t\t\tif ( roughness >= r1 ) {\r\n\r\n\t\t\t\t\tvariance = ( r0 - roughness ) * ( v1 - v0 ) / ( r0 - r1 ) + v0;\r\n\r\n\t\t\t\t} else if ( roughness >= r4 ) {\r\n\r\n\t\t\t\t\tvariance = ( r1 - roughness ) * ( v4 - v1 ) / ( r1 - r4 ) + v1;\r\n\r\n\t\t\t\t} else if ( roughness >= r5 ) {\r\n\r\n\t\t\t\t\tvariance = ( r4 - roughness ) * ( v5 - v4 ) / ( r4 - r5 ) + v4;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tfloat roughness2 = roughness * roughness;\r\n\r\n\t\t\t\t\tvariance = 1.79 * roughness2 * roughness2;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn variance;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfloat varianceToRoughness( float variance ) {\r\n\r\n\t\t\t\tfloat roughness = 0.0;\r\n\r\n\t\t\t\tif ( variance >= v1 ) {\r\n\r\n\t\t\t\t\troughness = ( v0 - variance ) * ( r1 - r0 ) / ( v0 - v1 ) + r0;\r\n\r\n\t\t\t\t} else if ( variance >= v4 ) {\r\n\r\n\t\t\t\t\troughness = ( v1 - variance ) * ( r4 - r1 ) / ( v1 - v4 ) + r1;\r\n\r\n\t\t\t\t} else if ( variance >= v5 ) {\r\n\r\n\t\t\t\t\troughness = ( v4 - variance ) * ( r5 - r4 ) / ( v4 - v5 ) + r4;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\troughness = pow( 0.559 * variance, 0.25 ); // 0.559 = 1.0 / 1.79\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn roughness;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvoid main() {\r\n\r\n\t\t\t\tgl_FragColor = texture2D( roughnessMap, vUv, - 1.0 );\r\n\r\n\t\t\t\tif ( texelSize.x == 0.0 ) return;\r\n\r\n\t\t\t\tfloat roughness = gl_FragColor.g;\r\n\r\n\t\t\t\tfloat variance = roughnessToVariance( roughness );\r\n\r\n\t\t\t\tvec3 avgNormal;\r\n\r\n\t\t\t\tfor ( float x = - 1.0; x < 2.0; x += 2.0 ) {\r\n\r\n\t\t\t\t\tfor ( float y = - 1.0; y < 2.0; y += 2.0 ) {\r\n\r\n\t\t\t\t\t\tvec2 uv = vUv + vec2( x, y ) * 0.25 * texelSize;\r\n\r\n\t\t\t\t\t\tavgNormal += normalize( texture2D( normalMap, uv, - 1.0 ).xyz - 0.5 );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvariance += 1.0 - 0.25 * length( avgNormal );\r\n\r\n\t\t\t\tgl_FragColor.g = varianceToRoughness( variance );\r\n\r\n\t\t\t}\r\n\t\t`\r\n    ),\r\n    blending: NoBlending,\r\n    depthTest: false,\r\n    depthWrite: false\r\n  });\r\n  shaderMaterial.type = \"RoughnessMipmapper\";\r\n  return shaderMaterial;\r\n}\r\nexport {\r\n  RoughnessMipmapper\r\n};\r\n", "const UnpackDepthRGBAShader = {\r\n  uniforms: {\r\n    tDiffuse: { value: null },\r\n    opacity: { value: 1 }\r\n  },\r\n  vertexShader: [\r\n    \"varying vec2 vUv;\",\r\n    \"void main() {\",\r\n    \"\tvUv = uv;\",\r\n    \"\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\r\n    \"}\"\r\n  ].join(\"\\n\"),\r\n  fragmentShader: [\r\n    \"uniform float opacity;\",\r\n    \"uniform sampler2D tDiffuse;\",\r\n    \"varying vec2 vUv;\",\r\n    \"#include <packing>\",\r\n    \"void main() {\",\r\n    \"\tfloat depth = 1.0 - unpackRGBAToDepth( texture2D( tDiffuse, vUv ) );\",\r\n    \"\tgl_FragColor = vec4( vec3( depth ), opacity );\",\r\n    \"}\"\r\n  ].join(\"\\n\")\r\n};\r\nexport {\r\n  UnpackDepthRGBAShader\r\n};\r\n", "import { Vector2 } from \"three\";\r\nconst BokehShader2 = {\r\n  uniforms: {\r\n    textureWidth: { value: 1 },\r\n    textureHeight: { value: 1 },\r\n    focalDepth: { value: 1 },\r\n    focalLength: { value: 24 },\r\n    fstop: { value: 0.9 },\r\n    tColor: { value: null },\r\n    tDepth: { value: null },\r\n    maxblur: { value: 1 },\r\n    showFocus: { value: 0 },\r\n    manualdof: { value: 0 },\r\n    vignetting: { value: 0 },\r\n    depthblur: { value: 0 },\r\n    threshold: { value: 0.5 },\r\n    gain: { value: 2 },\r\n    bias: { value: 0.5 },\r\n    fringe: { value: 0.7 },\r\n    znear: { value: 0.1 },\r\n    zfar: { value: 100 },\r\n    noise: { value: 1 },\r\n    dithering: { value: 1e-4 },\r\n    pentagon: { value: 0 },\r\n    shaderFocus: { value: 1 },\r\n    focusCoords: { value: /* @__PURE__ */ new Vector2() }\r\n  },\r\n  vertexShader: [\r\n    \"varying vec2 vUv;\",\r\n    \"void main() {\",\r\n    \"\tvUv = uv;\",\r\n    \"\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\r\n    \"}\"\r\n  ].join(\"\\n\"),\r\n  fragmentShader: [\r\n    \"#include <common>\",\r\n    \"varying vec2 vUv;\",\r\n    \"uniform sampler2D tColor;\",\r\n    \"uniform sampler2D tDepth;\",\r\n    \"uniform float textureWidth;\",\r\n    \"uniform float textureHeight;\",\r\n    \"uniform float focalDepth;  //focal distance value in meters, but you may use autofocus option below\",\r\n    \"uniform float focalLength; //focal length in mm\",\r\n    \"uniform float fstop; //f-stop value\",\r\n    \"uniform bool showFocus; //show debug focus point and focal range (red = focal point, green = focal range)\",\r\n    \"/*\",\r\n    \"make sure that these two values are the same for your camera, otherwise distances will be wrong.\",\r\n    \"*/\",\r\n    \"uniform float znear; // camera clipping start\",\r\n    \"uniform float zfar; // camera clipping end\",\r\n    \"//------------------------------------------\",\r\n    \"//user variables\",\r\n    \"const int samples = SAMPLES; //samples on the first ring\",\r\n    \"const int rings = RINGS; //ring count\",\r\n    \"const int maxringsamples = rings * samples;\",\r\n    \"uniform bool manualdof; // manual dof calculation\",\r\n    \"float ndofstart = 1.0; // near dof blur start\",\r\n    \"float ndofdist = 2.0; // near dof blur falloff distance\",\r\n    \"float fdofstart = 1.0; // far dof blur start\",\r\n    \"float fdofdist = 3.0; // far dof blur falloff distance\",\r\n    \"float CoC = 0.03; //circle of confusion size in mm (35mm film = 0.03mm)\",\r\n    \"uniform bool vignetting; // use optical lens vignetting\",\r\n    \"float vignout = 1.3; // vignetting outer border\",\r\n    \"float vignin = 0.0; // vignetting inner border\",\r\n    \"float vignfade = 22.0; // f-stops till vignete fades\",\r\n    \"uniform bool shaderFocus;\",\r\n    \"// disable if you use external focalDepth value\",\r\n    \"uniform vec2 focusCoords;\",\r\n    \"// autofocus point on screen (0.0,0.0 - left lower corner, 1.0,1.0 - upper right)\",\r\n    \"// if center of screen use vec2(0.5, 0.5);\",\r\n    \"uniform float maxblur;\",\r\n    \"//clamp value of max blur (0.0 = no blur, 1.0 default)\",\r\n    \"uniform float threshold; // highlight threshold;\",\r\n    \"uniform float gain; // highlight gain;\",\r\n    \"uniform float bias; // bokeh edge bias\",\r\n    \"uniform float fringe; // bokeh chromatic aberration / fringing\",\r\n    \"uniform bool noise; //use noise instead of pattern for sample dithering\",\r\n    \"uniform float dithering;\",\r\n    \"uniform bool depthblur; // blur the depth buffer\",\r\n    \"float dbsize = 1.25; // depth blur size\",\r\n    \"/*\",\r\n    \"next part is experimental\",\r\n    \"not looking good with small sample and ring count\",\r\n    \"looks okay starting from samples = 4, rings = 4\",\r\n    \"*/\",\r\n    \"uniform bool pentagon; //use pentagon as bokeh shape?\",\r\n    \"float feather = 0.4; //pentagon shape feather\",\r\n    \"//------------------------------------------\",\r\n    \"float penta(vec2 coords) {\",\r\n    \"\t//pentagonal shape\",\r\n    \"\tfloat scale = float(rings) - 1.3;\",\r\n    \"\tvec4  HS0 = vec4( 1.0,         0.0,         0.0,  1.0);\",\r\n    \"\tvec4  HS1 = vec4( 0.309016994, 0.951056516, 0.0,  1.0);\",\r\n    \"\tvec4  HS2 = vec4(-0.809016994, 0.587785252, 0.0,  1.0);\",\r\n    \"\tvec4  HS3 = vec4(-0.809016994,-0.587785252, 0.0,  1.0);\",\r\n    \"\tvec4  HS4 = vec4( 0.309016994,-0.951056516, 0.0,  1.0);\",\r\n    \"\tvec4  HS5 = vec4( 0.0        ,0.0         , 1.0,  1.0);\",\r\n    \"\tvec4  one = vec4( 1.0 );\",\r\n    \"\tvec4 P = vec4((coords),vec2(scale, scale));\",\r\n    \"\tvec4 dist = vec4(0.0);\",\r\n    \"\tfloat inorout = -4.0;\",\r\n    \"\tdist.x = dot( P, HS0 );\",\r\n    \"\tdist.y = dot( P, HS1 );\",\r\n    \"\tdist.z = dot( P, HS2 );\",\r\n    \"\tdist.w = dot( P, HS3 );\",\r\n    \"\tdist = smoothstep( -feather, feather, dist );\",\r\n    \"\tinorout += dot( dist, one );\",\r\n    \"\tdist.x = dot( P, HS4 );\",\r\n    \"\tdist.y = HS5.w - abs( P.z );\",\r\n    \"\tdist = smoothstep( -feather, feather, dist );\",\r\n    \"\tinorout += dist.x;\",\r\n    \"\treturn clamp( inorout, 0.0, 1.0 );\",\r\n    \"}\",\r\n    \"float bdepth(vec2 coords) {\",\r\n    \"\t// Depth buffer blur\",\r\n    \"\tfloat d = 0.0;\",\r\n    \"\tfloat kernel[9];\",\r\n    \"\tvec2 offset[9];\",\r\n    \"\tvec2 wh = vec2(1.0/textureWidth,1.0/textureHeight) * dbsize;\",\r\n    \"\toffset[0] = vec2(-wh.x,-wh.y);\",\r\n    \"\toffset[1] = vec2( 0.0, -wh.y);\",\r\n    \"\toffset[2] = vec2( wh.x -wh.y);\",\r\n    \"\toffset[3] = vec2(-wh.x,  0.0);\",\r\n    \"\toffset[4] = vec2( 0.0,   0.0);\",\r\n    \"\toffset[5] = vec2( wh.x,  0.0);\",\r\n    \"\toffset[6] = vec2(-wh.x, wh.y);\",\r\n    \"\toffset[7] = vec2( 0.0,  wh.y);\",\r\n    \"\toffset[8] = vec2( wh.x, wh.y);\",\r\n    \"\tkernel[0] = 1.0/16.0;   kernel[1] = 2.0/16.0;   kernel[2] = 1.0/16.0;\",\r\n    \"\tkernel[3] = 2.0/16.0;   kernel[4] = 4.0/16.0;   kernel[5] = 2.0/16.0;\",\r\n    \"\tkernel[6] = 1.0/16.0;   kernel[7] = 2.0/16.0;   kernel[8] = 1.0/16.0;\",\r\n    \"\tfor( int i=0; i<9; i++ ) {\",\r\n    \"\t\tfloat tmp = texture2D(tDepth, coords + offset[i]).r;\",\r\n    \"\t\td += tmp * kernel[i];\",\r\n    \"\t}\",\r\n    \"\treturn d;\",\r\n    \"}\",\r\n    \"vec3 color(vec2 coords,float blur) {\",\r\n    \"\t//processing the sample\",\r\n    \"\tvec3 col = vec3(0.0);\",\r\n    \"\tvec2 texel = vec2(1.0/textureWidth,1.0/textureHeight);\",\r\n    \"\tcol.r = texture2D(tColor,coords + vec2(0.0,1.0)*texel*fringe*blur).r;\",\r\n    \"\tcol.g = texture2D(tColor,coords + vec2(-0.866,-0.5)*texel*fringe*blur).g;\",\r\n    \"\tcol.b = texture2D(tColor,coords + vec2(0.866,-0.5)*texel*fringe*blur).b;\",\r\n    \"\tvec3 lumcoeff = vec3(0.299,0.587,0.114);\",\r\n    \"\tfloat lum = dot(col.rgb, lumcoeff);\",\r\n    \"\tfloat thresh = max((lum-threshold)*gain, 0.0);\",\r\n    \"\treturn col+mix(vec3(0.0),col,thresh*blur);\",\r\n    \"}\",\r\n    \"vec3 debugFocus(vec3 col, float blur, float depth) {\",\r\n    \"\tfloat edge = 0.002*depth; //distance based edge smoothing\",\r\n    \"\tfloat m = clamp(smoothstep(0.0,edge,blur),0.0,1.0);\",\r\n    \"\tfloat e = clamp(smoothstep(1.0-edge,1.0,blur),0.0,1.0);\",\r\n    \"\tcol = mix(col,vec3(1.0,0.5,0.0),(1.0-m)*0.6);\",\r\n    \"\tcol = mix(col,vec3(0.0,0.5,1.0),((1.0-e)-(1.0-m))*0.2);\",\r\n    \"\treturn col;\",\r\n    \"}\",\r\n    \"float linearize(float depth) {\",\r\n    \"\treturn -zfar * znear / (depth * (zfar - znear) - zfar);\",\r\n    \"}\",\r\n    \"float vignette() {\",\r\n    \"\tfloat dist = distance(vUv.xy, vec2(0.5,0.5));\",\r\n    \"\tdist = smoothstep(vignout+(fstop/vignfade), vignin+(fstop/vignfade), dist);\",\r\n    \"\treturn clamp(dist,0.0,1.0);\",\r\n    \"}\",\r\n    \"float gather(float i, float j, int ringsamples, inout vec3 col, float w, float h, float blur) {\",\r\n    \"\tfloat rings2 = float(rings);\",\r\n    \"\tfloat step = PI*2.0 / float(ringsamples);\",\r\n    \"\tfloat pw = cos(j*step)*i;\",\r\n    \"\tfloat ph = sin(j*step)*i;\",\r\n    \"\tfloat p = 1.0;\",\r\n    \"\tif (pentagon) {\",\r\n    \"\t\tp = penta(vec2(pw,ph));\",\r\n    \"\t}\",\r\n    \"\tcol += color(vUv.xy + vec2(pw*w,ph*h), blur) * mix(1.0, i/rings2, bias) * p;\",\r\n    \"\treturn 1.0 * mix(1.0, i /rings2, bias) * p;\",\r\n    \"}\",\r\n    \"void main() {\",\r\n    \"\t//scene depth calculation\",\r\n    \"\tfloat depth = linearize(texture2D(tDepth,vUv.xy).x);\",\r\n    \"\t// Blur depth?\",\r\n    \"\tif ( depthblur ) {\",\r\n    \"\t\tdepth = linearize(bdepth(vUv.xy));\",\r\n    \"\t}\",\r\n    \"\t//focal plane calculation\",\r\n    \"\tfloat fDepth = focalDepth;\",\r\n    \"\tif (shaderFocus) {\",\r\n    \"\t\tfDepth = linearize(texture2D(tDepth,focusCoords).x);\",\r\n    \"\t}\",\r\n    \"\t// dof blur factor calculation\",\r\n    \"\tfloat blur = 0.0;\",\r\n    \"\tif (manualdof) {\",\r\n    \"\t\tfloat a = depth-fDepth; // Focal plane\",\r\n    \"\t\tfloat b = (a-fdofstart)/fdofdist; // Far DoF\",\r\n    \"\t\tfloat c = (-a-ndofstart)/ndofdist; // Near Dof\",\r\n    \"\t\tblur = (a>0.0) ? b : c;\",\r\n    \"\t} else {\",\r\n    \"\t\tfloat f = focalLength; // focal length in mm\",\r\n    \"\t\tfloat d = fDepth*1000.0; // focal plane in mm\",\r\n    \"\t\tfloat o = depth*1000.0; // depth in mm\",\r\n    \"\t\tfloat a = (o*f)/(o-f);\",\r\n    \"\t\tfloat b = (d*f)/(d-f);\",\r\n    \"\t\tfloat c = (d-f)/(d*fstop*CoC);\",\r\n    \"\t\tblur = abs(a-b)*c;\",\r\n    \"\t}\",\r\n    \"\tblur = clamp(blur,0.0,1.0);\",\r\n    \"\t// calculation of pattern for dithering\",\r\n    \"\tvec2 noise = vec2(rand(vUv.xy), rand( vUv.xy + vec2( 0.4, 0.6 ) ) )*dithering*blur;\",\r\n    \"\t// getting blur x and y step factor\",\r\n    \"\tfloat w = (1.0/textureWidth)*blur*maxblur+noise.x;\",\r\n    \"\tfloat h = (1.0/textureHeight)*blur*maxblur+noise.y;\",\r\n    \"\t// calculation of final color\",\r\n    \"\tvec3 col = vec3(0.0);\",\r\n    \"\tif(blur < 0.05) {\",\r\n    \"\t\t//some optimization thingy\",\r\n    \"\t\tcol = texture2D(tColor, vUv.xy).rgb;\",\r\n    \"\t} else {\",\r\n    \"\t\tcol = texture2D(tColor, vUv.xy).rgb;\",\r\n    \"\t\tfloat s = 1.0;\",\r\n    \"\t\tint ringsamples;\",\r\n    \"\t\tfor (int i = 1; i <= rings; i++) {\",\r\n    \"\t\t\t/*unboxstart*/\",\r\n    \"\t\t\tringsamples = i * samples;\",\r\n    \"\t\t\tfor (int j = 0 ; j < maxringsamples ; j++) {\",\r\n    \"\t\t\t\tif (j >= ringsamples) break;\",\r\n    \"\t\t\t\ts += gather(float(i), float(j), ringsamples, col, w, h, blur);\",\r\n    \"\t\t\t}\",\r\n    \"\t\t\t/*unboxend*/\",\r\n    \"\t\t}\",\r\n    \"\t\tcol /= s; //divide by sample count\",\r\n    \"\t}\",\r\n    \"\tif (showFocus) {\",\r\n    \"\t\tcol = debugFocus(col, blur, depth);\",\r\n    \"\t}\",\r\n    \"\tif (vignetting) {\",\r\n    \"\t\tcol *= vignette();\",\r\n    \"\t}\",\r\n    \"\tgl_FragColor.rgb = col;\",\r\n    \"\tgl_FragColor.a = 1.0;\",\r\n    \"} \"\r\n  ].join(\"\\n\")\r\n};\r\nconst BokehDepthShader = {\r\n  uniforms: {\r\n    mNear: { value: 1 },\r\n    mFar: { value: 1e3 }\r\n  },\r\n  vertexShader: [\r\n    \"varying float vViewZDepth;\",\r\n    \"void main() {\",\r\n    \"\t#include <begin_vertex>\",\r\n    \"\t#include <project_vertex>\",\r\n    \"\tvViewZDepth = - mvPosition.z;\",\r\n    \"}\"\r\n  ].join(\"\\n\"),\r\n  fragmentShader: [\r\n    \"uniform float mNear;\",\r\n    \"uniform float mFar;\",\r\n    \"varying float vViewZDepth;\",\r\n    \"void main() {\",\r\n    \"\tfloat color = 1.0 - smoothstep( mNear, mFar, vViewZDepth );\",\r\n    \"\tgl_FragColor = vec4( vec3( color ), 1.0 );\",\r\n    \"} \"\r\n  ].join(\"\\n\")\r\n};\r\nexport {\r\n  BokehDepthShader,\r\n  BokehShader2\r\n};\r\n", "import { Triangle, Vector3 } from \"three\";\r\nconst _face = /* @__PURE__ */ new Triangle();\r\nconst _color = /* @__PURE__ */ new Vector3();\r\nclass MeshSurfaceSampler {\r\n  constructor(mesh) {\r\n    let geometry = mesh.geometry;\r\n    if (geometry.index) {\r\n      console.warn(\"THREE.MeshSurfaceSampler: Converting geometry to non-indexed BufferGeometry.\");\r\n      geometry = geometry.toNonIndexed();\r\n    }\r\n    this.geometry = geometry;\r\n    this.randomFunction = Math.random;\r\n    this.positionAttribute = this.geometry.getAttribute(\"position\");\r\n    this.colorAttribute = this.geometry.getAttribute(\"color\");\r\n    this.weightAttribute = null;\r\n    this.distribution = null;\r\n  }\r\n  setWeightAttribute(name) {\r\n    this.weightAttribute = name ? this.geometry.getAttribute(name) : null;\r\n    return this;\r\n  }\r\n  build() {\r\n    const positionAttribute = this.positionAttribute;\r\n    const weightAttribute = this.weightAttribute;\r\n    const faceWeights = new Float32Array(positionAttribute.count / 3);\r\n    for (let i = 0; i < positionAttribute.count; i += 3) {\r\n      let faceWeight = 1;\r\n      if (weightAttribute) {\r\n        faceWeight = weightAttribute.getX(i) + weightAttribute.getX(i + 1) + weightAttribute.getX(i + 2);\r\n      }\r\n      _face.a.fromBufferAttribute(positionAttribute, i);\r\n      _face.b.fromBufferAttribute(positionAttribute, i + 1);\r\n      _face.c.fromBufferAttribute(positionAttribute, i + 2);\r\n      faceWeight *= _face.getArea();\r\n      faceWeights[i / 3] = faceWeight;\r\n    }\r\n    this.distribution = new Float32Array(positionAttribute.count / 3);\r\n    let cumulativeTotal = 0;\r\n    for (let i = 0; i < faceWeights.length; i++) {\r\n      cumulativeTotal += faceWeights[i];\r\n      this.distribution[i] = cumulativeTotal;\r\n    }\r\n    return this;\r\n  }\r\n  setRandomGenerator(randomFunction) {\r\n    this.randomFunction = randomFunction;\r\n    return this;\r\n  }\r\n  sample(targetPosition, targetNormal, targetColor) {\r\n    const faceIndex = this.sampleFaceIndex();\r\n    return this.sampleFace(faceIndex, targetPosition, targetNormal, targetColor);\r\n  }\r\n  sampleFaceIndex() {\r\n    const cumulativeTotal = this.distribution[this.distribution.length - 1];\r\n    return this.binarySearch(this.randomFunction() * cumulativeTotal);\r\n  }\r\n  binarySearch(x) {\r\n    const dist = this.distribution;\r\n    let start = 0;\r\n    let end = dist.length - 1;\r\n    let index = -1;\r\n    while (start <= end) {\r\n      const mid = Math.ceil((start + end) / 2);\r\n      if (mid === 0 || dist[mid - 1] <= x && dist[mid] > x) {\r\n        index = mid;\r\n        break;\r\n      } else if (x < dist[mid]) {\r\n        end = mid - 1;\r\n      } else {\r\n        start = mid + 1;\r\n      }\r\n    }\r\n    return index;\r\n  }\r\n  sampleFace(faceIndex, targetPosition, targetNormal, targetColor) {\r\n    let u = this.randomFunction();\r\n    let v = this.randomFunction();\r\n    if (u + v > 1) {\r\n      u = 1 - u;\r\n      v = 1 - v;\r\n    }\r\n    _face.a.fromBufferAttribute(this.positionAttribute, faceIndex * 3);\r\n    _face.b.fromBufferAttribute(this.positionAttribute, faceIndex * 3 + 1);\r\n    _face.c.fromBufferAttribute(this.positionAttribute, faceIndex * 3 + 2);\r\n    targetPosition.set(0, 0, 0).addScaledVector(_face.a, u).addScaledVector(_face.b, v).addScaledVector(_face.c, 1 - (u + v));\r\n    if (targetNormal !== void 0) {\r\n      _face.getNormal(targetNormal);\r\n    }\r\n    if (targetColor !== void 0 && this.colorAttribute !== void 0) {\r\n      _face.a.fromBufferAttribute(this.colorAttribute, faceIndex * 3);\r\n      _face.b.fromBufferAttribute(this.colorAttribute, faceIndex * 3 + 1);\r\n      _face.c.fromBufferAttribute(this.colorAttribute, faceIndex * 3 + 2);\r\n      _color.set(0, 0, 0).addScaledVector(_face.a, u).addScaledVector(_face.b, v).addScaledVector(_face.c, 1 - (u + v));\r\n      targetColor.r = _color.x;\r\n      targetColor.g = _color.y;\r\n      targetColor.b = _color.z;\r\n    }\r\n    return this;\r\n  }\r\n}\r\nexport {\r\n  MeshSurfaceSampler\r\n};\r\n", "import { Vector3, Matrix3, Box3, Matrix4, Ray, MathUtils } from \"three\";\r\nconst a = {\r\n  c: null,\r\n  // center\r\n  u: [/* @__PURE__ */ new Vector3(), /* @__PURE__ */ new Vector3(), /* @__PURE__ */ new Vector3()],\r\n  // basis vectors\r\n  e: []\r\n  // half width\r\n};\r\nconst b = {\r\n  c: null,\r\n  // center\r\n  u: [/* @__PURE__ */ new Vector3(), /* @__PURE__ */ new Vector3(), /* @__PURE__ */ new Vector3()],\r\n  // basis vectors\r\n  e: []\r\n  // half width\r\n};\r\nconst R = [[], [], []];\r\nconst AbsR = [[], [], []];\r\nconst t = [];\r\nconst xAxis = /* @__PURE__ */ new Vector3();\r\nconst yAxis = /* @__PURE__ */ new Vector3();\r\nconst zAxis = /* @__PURE__ */ new Vector3();\r\nconst v1 = /* @__PURE__ */ new Vector3();\r\nconst size = /* @__PURE__ */ new Vector3();\r\nconst closestPoint = /* @__PURE__ */ new Vector3();\r\nconst rotationMatrix = /* @__PURE__ */ new Matrix3();\r\nconst aabb = /* @__PURE__ */ new Box3();\r\nconst matrix = /* @__PURE__ */ new Matrix4();\r\nconst inverse = /* @__PURE__ */ new Matrix4();\r\nconst localRay = /* @__PURE__ */ new Ray();\r\nclass OBB {\r\n  constructor(center = new Vector3(), halfSize = new Vector3(), rotation = new Matrix3()) {\r\n    this.center = center;\r\n    this.halfSize = halfSize;\r\n    this.rotation = rotation;\r\n  }\r\n  set(center, halfSize, rotation) {\r\n    this.center = center;\r\n    this.halfSize = halfSize;\r\n    this.rotation = rotation;\r\n    return this;\r\n  }\r\n  copy(obb2) {\r\n    this.center.copy(obb2.center);\r\n    this.halfSize.copy(obb2.halfSize);\r\n    this.rotation.copy(obb2.rotation);\r\n    return this;\r\n  }\r\n  clone() {\r\n    return new this.constructor().copy(this);\r\n  }\r\n  getSize(result) {\r\n    return result.copy(this.halfSize).multiplyScalar(2);\r\n  }\r\n  /**\r\n   * Reference: Closest Point on OBB to Point in Real-Time Collision Detection\r\n   * by Christer Ericson (chapter 5.1.4)\r\n   */\r\n  clampPoint(point, result) {\r\n    const halfSize = this.halfSize;\r\n    v1.subVectors(point, this.center);\r\n    this.rotation.extractBasis(xAxis, yAxis, zAxis);\r\n    result.copy(this.center);\r\n    const x = MathUtils.clamp(v1.dot(xAxis), -halfSize.x, halfSize.x);\r\n    result.add(xAxis.multiplyScalar(x));\r\n    const y = MathUtils.clamp(v1.dot(yAxis), -halfSize.y, halfSize.y);\r\n    result.add(yAxis.multiplyScalar(y));\r\n    const z = MathUtils.clamp(v1.dot(zAxis), -halfSize.z, halfSize.z);\r\n    result.add(zAxis.multiplyScalar(z));\r\n    return result;\r\n  }\r\n  containsPoint(point) {\r\n    v1.subVectors(point, this.center);\r\n    this.rotation.extractBasis(xAxis, yAxis, zAxis);\r\n    return Math.abs(v1.dot(xAxis)) <= this.halfSize.x && Math.abs(v1.dot(yAxis)) <= this.halfSize.y && Math.abs(v1.dot(zAxis)) <= this.halfSize.z;\r\n  }\r\n  intersectsBox3(box3) {\r\n    return this.intersectsOBB(obb.fromBox3(box3));\r\n  }\r\n  intersectsSphere(sphere) {\r\n    this.clampPoint(sphere.center, closestPoint);\r\n    return closestPoint.distanceToSquared(sphere.center) <= sphere.radius * sphere.radius;\r\n  }\r\n  /**\r\n   * Reference: OBB-OBB Intersection in Real-Time Collision Detection\r\n   * by Christer Ericson (chapter 4.4.1)\r\n   *\r\n   */\r\n  intersectsOBB(obb2, epsilon = Number.EPSILON) {\r\n    a.c = this.center;\r\n    a.e[0] = this.halfSize.x;\r\n    a.e[1] = this.halfSize.y;\r\n    a.e[2] = this.halfSize.z;\r\n    this.rotation.extractBasis(a.u[0], a.u[1], a.u[2]);\r\n    b.c = obb2.center;\r\n    b.e[0] = obb2.halfSize.x;\r\n    b.e[1] = obb2.halfSize.y;\r\n    b.e[2] = obb2.halfSize.z;\r\n    obb2.rotation.extractBasis(b.u[0], b.u[1], b.u[2]);\r\n    for (let i = 0; i < 3; i++) {\r\n      for (let j = 0; j < 3; j++) {\r\n        R[i][j] = a.u[i].dot(b.u[j]);\r\n      }\r\n    }\r\n    v1.subVectors(b.c, a.c);\r\n    t[0] = v1.dot(a.u[0]);\r\n    t[1] = v1.dot(a.u[1]);\r\n    t[2] = v1.dot(a.u[2]);\r\n    for (let i = 0; i < 3; i++) {\r\n      for (let j = 0; j < 3; j++) {\r\n        AbsR[i][j] = Math.abs(R[i][j]) + epsilon;\r\n      }\r\n    }\r\n    let ra, rb;\r\n    for (let i = 0; i < 3; i++) {\r\n      ra = a.e[i];\r\n      rb = b.e[0] * AbsR[i][0] + b.e[1] * AbsR[i][1] + b.e[2] * AbsR[i][2];\r\n      if (Math.abs(t[i]) > ra + rb)\r\n        return false;\r\n    }\r\n    for (let i = 0; i < 3; i++) {\r\n      ra = a.e[0] * AbsR[0][i] + a.e[1] * AbsR[1][i] + a.e[2] * AbsR[2][i];\r\n      rb = b.e[i];\r\n      if (Math.abs(t[0] * R[0][i] + t[1] * R[1][i] + t[2] * R[2][i]) > ra + rb)\r\n        return false;\r\n    }\r\n    ra = a.e[1] * AbsR[2][0] + a.e[2] * AbsR[1][0];\r\n    rb = b.e[1] * AbsR[0][2] + b.e[2] * AbsR[0][1];\r\n    if (Math.abs(t[2] * R[1][0] - t[1] * R[2][0]) > ra + rb)\r\n      return false;\r\n    ra = a.e[1] * AbsR[2][1] + a.e[2] * AbsR[1][1];\r\n    rb = b.e[0] * AbsR[0][2] + b.e[2] * AbsR[0][0];\r\n    if (Math.abs(t[2] * R[1][1] - t[1] * R[2][1]) > ra + rb)\r\n      return false;\r\n    ra = a.e[1] * AbsR[2][2] + a.e[2] * AbsR[1][2];\r\n    rb = b.e[0] * AbsR[0][1] + b.e[1] * AbsR[0][0];\r\n    if (Math.abs(t[2] * R[1][2] - t[1] * R[2][2]) > ra + rb)\r\n      return false;\r\n    ra = a.e[0] * AbsR[2][0] + a.e[2] * AbsR[0][0];\r\n    rb = b.e[1] * AbsR[1][2] + b.e[2] * AbsR[1][1];\r\n    if (Math.abs(t[0] * R[2][0] - t[2] * R[0][0]) > ra + rb)\r\n      return false;\r\n    ra = a.e[0] * AbsR[2][1] + a.e[2] * AbsR[0][1];\r\n    rb = b.e[0] * AbsR[1][2] + b.e[2] * AbsR[1][0];\r\n    if (Math.abs(t[0] * R[2][1] - t[2] * R[0][1]) > ra + rb)\r\n      return false;\r\n    ra = a.e[0] * AbsR[2][2] + a.e[2] * AbsR[0][2];\r\n    rb = b.e[0] * AbsR[1][1] + b.e[1] * AbsR[1][0];\r\n    if (Math.abs(t[0] * R[2][2] - t[2] * R[0][2]) > ra + rb)\r\n      return false;\r\n    ra = a.e[0] * AbsR[1][0] + a.e[1] * AbsR[0][0];\r\n    rb = b.e[1] * AbsR[2][2] + b.e[2] * AbsR[2][1];\r\n    if (Math.abs(t[1] * R[0][0] - t[0] * R[1][0]) > ra + rb)\r\n      return false;\r\n    ra = a.e[0] * AbsR[1][1] + a.e[1] * AbsR[0][1];\r\n    rb = b.e[0] * AbsR[2][2] + b.e[2] * AbsR[2][0];\r\n    if (Math.abs(t[1] * R[0][1] - t[0] * R[1][1]) > ra + rb)\r\n      return false;\r\n    ra = a.e[0] * AbsR[1][2] + a.e[1] * AbsR[0][2];\r\n    rb = b.e[0] * AbsR[2][1] + b.e[1] * AbsR[2][0];\r\n    if (Math.abs(t[1] * R[0][2] - t[0] * R[1][2]) > ra + rb)\r\n      return false;\r\n    return true;\r\n  }\r\n  /**\r\n   * Reference: Testing Box Against Plane in Real-Time Collision Detection\r\n   * by Christer Ericson (chapter 5.2.3)\r\n   */\r\n  intersectsPlane(plane) {\r\n    this.rotation.extractBasis(xAxis, yAxis, zAxis);\r\n    const r = this.halfSize.x * Math.abs(plane.normal.dot(xAxis)) + this.halfSize.y * Math.abs(plane.normal.dot(yAxis)) + this.halfSize.z * Math.abs(plane.normal.dot(zAxis));\r\n    const d = plane.normal.dot(this.center) - plane.constant;\r\n    return Math.abs(d) <= r;\r\n  }\r\n  /**\r\n   * Performs a ray/OBB intersection test and stores the intersection point\r\n   * to the given 3D vector. If no intersection is detected, *null* is returned.\r\n   */\r\n  intersectRay(ray, result) {\r\n    this.getSize(size);\r\n    aabb.setFromCenterAndSize(v1.set(0, 0, 0), size);\r\n    matrix.setFromMatrix3(this.rotation);\r\n    matrix.setPosition(this.center);\r\n    inverse.copy(matrix).invert();\r\n    localRay.copy(ray).applyMatrix4(inverse);\r\n    if (localRay.intersectBox(aabb, result)) {\r\n      return result.applyMatrix4(matrix);\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n  /**\r\n   * Performs a ray/OBB intersection test. Returns either true or false if\r\n   * there is a intersection or not.\r\n   */\r\n  intersectsRay(ray) {\r\n    return this.intersectRay(ray, v1) !== null;\r\n  }\r\n  fromBox3(box3) {\r\n    box3.getCenter(this.center);\r\n    box3.getSize(this.halfSize).multiplyScalar(0.5);\r\n    this.rotation.identity();\r\n    return this;\r\n  }\r\n  equals(obb2) {\r\n    return obb2.center.equals(this.center) && obb2.halfSize.equals(this.halfSize) && obb2.rotation.equals(this.rotation);\r\n  }\r\n  applyMatrix4(matrix2) {\r\n    const e = matrix2.elements;\r\n    let sx = v1.set(e[0], e[1], e[2]).length();\r\n    const sy = v1.set(e[4], e[5], e[6]).length();\r\n    const sz = v1.set(e[8], e[9], e[10]).length();\r\n    const det = matrix2.determinant();\r\n    if (det < 0)\r\n      sx = -sx;\r\n    rotationMatrix.setFromMatrix4(matrix2);\r\n    const invSX = 1 / sx;\r\n    const invSY = 1 / sy;\r\n    const invSZ = 1 / sz;\r\n    rotationMatrix.elements[0] *= invSX;\r\n    rotationMatrix.elements[1] *= invSX;\r\n    rotationMatrix.elements[2] *= invSX;\r\n    rotationMatrix.elements[3] *= invSY;\r\n    rotationMatrix.elements[4] *= invSY;\r\n    rotationMatrix.elements[5] *= invSY;\r\n    rotationMatrix.elements[6] *= invSZ;\r\n    rotationMatrix.elements[7] *= invSZ;\r\n    rotationMatrix.elements[8] *= invSZ;\r\n    this.rotation.multiply(rotationMatrix);\r\n    this.halfSize.x *= sx;\r\n    this.halfSize.y *= sy;\r\n    this.halfSize.z *= sz;\r\n    v1.setFromMatrixPosition(matrix2);\r\n    this.center.add(v1);\r\n    return this;\r\n  }\r\n}\r\nconst obb = /* @__PURE__ */ new OBB();\r\nexport {\r\n  OBB\r\n};\r\n", "import { Vector3 } from \"three\";\r\nconst _v1 = /* @__PURE__ */ new Vector3();\r\nconst _v2 = /* @__PURE__ */ new Vector3();\r\nconst _v3 = /* @__PURE__ */ new Vector3();\r\nconst EPS = 1e-10;\r\nclass Capsule {\r\n  constructor(start = new Vector3(0, 0, 0), end = new Vector3(0, 1, 0), radius = 1) {\r\n    this.start = start;\r\n    this.end = end;\r\n    this.radius = radius;\r\n  }\r\n  clone() {\r\n    return new Capsule(this.start.clone(), this.end.clone(), this.radius);\r\n  }\r\n  set(start, end, radius) {\r\n    this.start.copy(start);\r\n    this.end.copy(end);\r\n    this.radius = radius;\r\n  }\r\n  copy(capsule) {\r\n    this.start.copy(capsule.start);\r\n    this.end.copy(capsule.end);\r\n    this.radius = capsule.radius;\r\n  }\r\n  getCenter(target) {\r\n    return target.copy(this.end).add(this.start).multiplyScalar(0.5);\r\n  }\r\n  translate(v) {\r\n    this.start.add(v);\r\n    this.end.add(v);\r\n  }\r\n  checkAABBAxis(p1x, p1y, p2x, p2y, minx, maxx, miny, maxy, radius) {\r\n    return (minx - p1x < radius || minx - p2x < radius) && (p1x - maxx < radius || p2x - maxx < radius) && (miny - p1y < radius || miny - p2y < radius) && (p1y - maxy < radius || p2y - maxy < radius);\r\n  }\r\n  intersectsBox(box) {\r\n    return this.checkAABBAxis(\r\n      this.start.x,\r\n      this.start.y,\r\n      this.end.x,\r\n      this.end.y,\r\n      box.min.x,\r\n      box.max.x,\r\n      box.min.y,\r\n      box.max.y,\r\n      this.radius\r\n    ) && this.checkAABBAxis(\r\n      this.start.x,\r\n      this.start.z,\r\n      this.end.x,\r\n      this.end.z,\r\n      box.min.x,\r\n      box.max.x,\r\n      box.min.z,\r\n      box.max.z,\r\n      this.radius\r\n    ) && this.checkAABBAxis(\r\n      this.start.y,\r\n      this.start.z,\r\n      this.end.y,\r\n      this.end.z,\r\n      box.min.y,\r\n      box.max.y,\r\n      box.min.z,\r\n      box.max.z,\r\n      this.radius\r\n    );\r\n  }\r\n  lineLineMinimumPoints(line1, line2) {\r\n    const r = _v1.copy(line1.end).sub(line1.start);\r\n    const s = _v2.copy(line2.end).sub(line2.start);\r\n    const w = _v3.copy(line2.start).sub(line1.start);\r\n    const a = r.dot(s), b = r.dot(r), c = s.dot(s), d = s.dot(w), e = r.dot(w);\r\n    let t1, t2;\r\n    const divisor = b * c - a * a;\r\n    if (Math.abs(divisor) < EPS) {\r\n      const d1 = -d / c;\r\n      const d2 = (a - d) / c;\r\n      if (Math.abs(d1 - 0.5) < Math.abs(d2 - 0.5)) {\r\n        t1 = 0;\r\n        t2 = d1;\r\n      } else {\r\n        t1 = 1;\r\n        t2 = d2;\r\n      }\r\n    } else {\r\n      t1 = (d * a + e * c) / divisor;\r\n      t2 = (t1 * a - d) / c;\r\n    }\r\n    t2 = Math.max(0, Math.min(1, t2));\r\n    t1 = Math.max(0, Math.min(1, t1));\r\n    const point1 = r.multiplyScalar(t1).add(line1.start);\r\n    const point2 = s.multiplyScalar(t2).add(line2.start);\r\n    return [point1, point2];\r\n  }\r\n}\r\nexport {\r\n  Capsule\r\n};\r\n", "function init() {\r\n  const _p2 = [\r\n    151,\r\n    160,\r\n    137,\r\n    91,\r\n    90,\r\n    15,\r\n    131,\r\n    13,\r\n    201,\r\n    95,\r\n    96,\r\n    53,\r\n    194,\r\n    233,\r\n    7,\r\n    225,\r\n    140,\r\n    36,\r\n    103,\r\n    30,\r\n    69,\r\n    142,\r\n    8,\r\n    99,\r\n    37,\r\n    240,\r\n    21,\r\n    10,\r\n    23,\r\n    190,\r\n    6,\r\n    148,\r\n    247,\r\n    120,\r\n    234,\r\n    75,\r\n    0,\r\n    26,\r\n    197,\r\n    62,\r\n    94,\r\n    252,\r\n    219,\r\n    203,\r\n    117,\r\n    35,\r\n    11,\r\n    32,\r\n    57,\r\n    177,\r\n    33,\r\n    88,\r\n    237,\r\n    149,\r\n    56,\r\n    87,\r\n    174,\r\n    20,\r\n    125,\r\n    136,\r\n    171,\r\n    168,\r\n    68,\r\n    175,\r\n    74,\r\n    165,\r\n    71,\r\n    134,\r\n    139,\r\n    48,\r\n    27,\r\n    166,\r\n    77,\r\n    146,\r\n    158,\r\n    231,\r\n    83,\r\n    111,\r\n    229,\r\n    122,\r\n    60,\r\n    211,\r\n    133,\r\n    230,\r\n    220,\r\n    105,\r\n    92,\r\n    41,\r\n    55,\r\n    46,\r\n    245,\r\n    40,\r\n    244,\r\n    102,\r\n    143,\r\n    54,\r\n    65,\r\n    25,\r\n    63,\r\n    161,\r\n    1,\r\n    216,\r\n    80,\r\n    73,\r\n    209,\r\n    76,\r\n    132,\r\n    187,\r\n    208,\r\n    89,\r\n    18,\r\n    169,\r\n    200,\r\n    196,\r\n    135,\r\n    130,\r\n    116,\r\n    188,\r\n    159,\r\n    86,\r\n    164,\r\n    100,\r\n    109,\r\n    198,\r\n    173,\r\n    186,\r\n    3,\r\n    64,\r\n    52,\r\n    217,\r\n    226,\r\n    250,\r\n    124,\r\n    123,\r\n    5,\r\n    202,\r\n    38,\r\n    147,\r\n    118,\r\n    126,\r\n    255,\r\n    82,\r\n    85,\r\n    212,\r\n    207,\r\n    206,\r\n    59,\r\n    227,\r\n    47,\r\n    16,\r\n    58,\r\n    17,\r\n    182,\r\n    189,\r\n    28,\r\n    42,\r\n    223,\r\n    183,\r\n    170,\r\n    213,\r\n    119,\r\n    248,\r\n    152,\r\n    2,\r\n    44,\r\n    154,\r\n    163,\r\n    70,\r\n    221,\r\n    153,\r\n    101,\r\n    155,\r\n    167,\r\n    43,\r\n    172,\r\n    9,\r\n    129,\r\n    22,\r\n    39,\r\n    253,\r\n    19,\r\n    98,\r\n    108,\r\n    110,\r\n    79,\r\n    113,\r\n    224,\r\n    232,\r\n    178,\r\n    185,\r\n    112,\r\n    104,\r\n    218,\r\n    246,\r\n    97,\r\n    228,\r\n    251,\r\n    34,\r\n    242,\r\n    193,\r\n    238,\r\n    210,\r\n    144,\r\n    12,\r\n    191,\r\n    179,\r\n    162,\r\n    241,\r\n    81,\r\n    51,\r\n    145,\r\n    235,\r\n    249,\r\n    14,\r\n    239,\r\n    107,\r\n    49,\r\n    192,\r\n    214,\r\n    31,\r\n    181,\r\n    199,\r\n    106,\r\n    157,\r\n    184,\r\n    84,\r\n    204,\r\n    176,\r\n    115,\r\n    121,\r\n    50,\r\n    45,\r\n    127,\r\n    4,\r\n    150,\r\n    254,\r\n    138,\r\n    236,\r\n    205,\r\n    93,\r\n    222,\r\n    114,\r\n    67,\r\n    29,\r\n    24,\r\n    72,\r\n    243,\r\n    141,\r\n    128,\r\n    195,\r\n    78,\r\n    66,\r\n    215,\r\n    61,\r\n    156,\r\n    180\r\n  ];\r\n  for (let i = 0; i < 256; i++) {\r\n    _p2[256 + i] = _p2[i];\r\n  }\r\n  return _p2;\r\n}\r\nconst _p = /* @__PURE__ */ init();\r\nfunction fade(t) {\r\n  return t * t * t * (t * (t * 6 - 15) + 10);\r\n}\r\nfunction lerp(t, a, b) {\r\n  return a + t * (b - a);\r\n}\r\nfunction grad(hash, x, y, z) {\r\n  const h = hash & 15;\r\n  const u = h < 8 ? x : y, v = h < 4 ? y : h == 12 || h == 14 ? x : z;\r\n  return ((h & 1) == 0 ? u : -u) + ((h & 2) == 0 ? v : -v);\r\n}\r\nclass ImprovedNoise {\r\n  noise(x, y, z) {\r\n    const floorX = Math.floor(x), floorY = Math.floor(y), floorZ = Math.floor(z);\r\n    const X = floorX & 255, Y = floorY & 255, Z = floorZ & 255;\r\n    x -= floorX;\r\n    y -= floorY;\r\n    z -= floorZ;\r\n    const xMinus1 = x - 1, yMinus1 = y - 1, zMinus1 = z - 1;\r\n    const u = fade(x), v = fade(y), w = fade(z);\r\n    const A = _p[X] + Y, AA = _p[A] + Z, AB = _p[A + 1] + Z, B = _p[X + 1] + Y, BA = _p[B] + Z, BB = _p[B + 1] + Z;\r\n    return lerp(\r\n      w,\r\n      lerp(\r\n        v,\r\n        lerp(u, grad(_p[AA], x, y, z), grad(_p[BA], xMinus1, y, z)),\r\n        lerp(u, grad(_p[AB], x, yMinus1, z), grad(_p[BB], xMinus1, yMinus1, z))\r\n      ),\r\n      lerp(\r\n        v,\r\n        lerp(u, grad(_p[AA + 1], x, y, zMinus1), grad(_p[BA + 1], xMinus1, y, zMinus1)),\r\n        lerp(u, grad(_p[AB + 1], x, yMinus1, zMinus1), grad(_p[BB + 1], xMinus1, yMinus1, zMinus1))\r\n      )\r\n    );\r\n  }\r\n}\r\nexport {\r\n  ImprovedNoise\r\n};\r\n", "import { Vector3, Plane, Line3, Sphere, Box3, Triangle } from \"three\";\r\nimport { Capsule } from \"./Capsule.js\";\r\nconst _v1 = /* @__PURE__ */ new Vector3();\r\nconst _v2 = /* @__PURE__ */ new Vector3();\r\nconst _plane = /* @__PURE__ */ new Plane();\r\nconst _line1 = /* @__PURE__ */ new Line3();\r\nconst _line2 = /* @__PURE__ */ new Line3();\r\nconst _sphere = /* @__PURE__ */ new Sphere();\r\nconst _capsule = /* @__PURE__ */ new Capsule();\r\nclass Octree {\r\n  constructor(box) {\r\n    this.triangles = [];\r\n    this.box = box;\r\n    this.subTrees = [];\r\n  }\r\n  addTriangle(triangle) {\r\n    if (!this.bounds)\r\n      this.bounds = new Box3();\r\n    this.bounds.min.x = Math.min(this.bounds.min.x, triangle.a.x, triangle.b.x, triangle.c.x);\r\n    this.bounds.min.y = Math.min(this.bounds.min.y, triangle.a.y, triangle.b.y, triangle.c.y);\r\n    this.bounds.min.z = Math.min(this.bounds.min.z, triangle.a.z, triangle.b.z, triangle.c.z);\r\n    this.bounds.max.x = Math.max(this.bounds.max.x, triangle.a.x, triangle.b.x, triangle.c.x);\r\n    this.bounds.max.y = Math.max(this.bounds.max.y, triangle.a.y, triangle.b.y, triangle.c.y);\r\n    this.bounds.max.z = Math.max(this.bounds.max.z, triangle.a.z, triangle.b.z, triangle.c.z);\r\n    this.triangles.push(triangle);\r\n    return this;\r\n  }\r\n  calcBox() {\r\n    this.box = this.bounds.clone();\r\n    this.box.min.x -= 0.01;\r\n    this.box.min.y -= 0.01;\r\n    this.box.min.z -= 0.01;\r\n    return this;\r\n  }\r\n  split(level) {\r\n    if (!this.box)\r\n      return;\r\n    const subTrees = [];\r\n    const halfsize = _v2.copy(this.box.max).sub(this.box.min).multiplyScalar(0.5);\r\n    for (let x = 0; x < 2; x++) {\r\n      for (let y = 0; y < 2; y++) {\r\n        for (let z = 0; z < 2; z++) {\r\n          const box = new Box3();\r\n          const v = _v1.set(x, y, z);\r\n          box.min.copy(this.box.min).add(v.multiply(halfsize));\r\n          box.max.copy(box.min).add(halfsize);\r\n          subTrees.push(new Octree(box));\r\n        }\r\n      }\r\n    }\r\n    let triangle;\r\n    while (triangle = this.triangles.pop()) {\r\n      for (let i = 0; i < subTrees.length; i++) {\r\n        if (subTrees[i].box.intersectsTriangle(triangle)) {\r\n          subTrees[i].triangles.push(triangle);\r\n        }\r\n      }\r\n    }\r\n    for (let i = 0; i < subTrees.length; i++) {\r\n      const len = subTrees[i].triangles.length;\r\n      if (len > 8 && level < 16) {\r\n        subTrees[i].split(level + 1);\r\n      }\r\n      if (len !== 0) {\r\n        this.subTrees.push(subTrees[i]);\r\n      }\r\n    }\r\n    return this;\r\n  }\r\n  build() {\r\n    this.calcBox();\r\n    this.split(0);\r\n    return this;\r\n  }\r\n  getRayTriangles(ray, triangles) {\r\n    for (let i = 0; i < this.subTrees.length; i++) {\r\n      const subTree = this.subTrees[i];\r\n      if (!ray.intersectsBox(subTree.box))\r\n        continue;\r\n      if (subTree.triangles.length > 0) {\r\n        for (let j = 0; j < subTree.triangles.length; j++) {\r\n          if (triangles.indexOf(subTree.triangles[j]) === -1)\r\n            triangles.push(subTree.triangles[j]);\r\n        }\r\n      } else {\r\n        subTree.getRayTriangles(ray, triangles);\r\n      }\r\n    }\r\n    return triangles;\r\n  }\r\n  triangleCapsuleIntersect(capsule, triangle) {\r\n    triangle.getPlane(_plane);\r\n    const d1 = _plane.distanceToPoint(capsule.start) - capsule.radius;\r\n    const d2 = _plane.distanceToPoint(capsule.end) - capsule.radius;\r\n    if (d1 > 0 && d2 > 0 || d1 < -capsule.radius && d2 < -capsule.radius) {\r\n      return false;\r\n    }\r\n    const delta = Math.abs(d1 / (Math.abs(d1) + Math.abs(d2)));\r\n    const intersectPoint = _v1.copy(capsule.start).lerp(capsule.end, delta);\r\n    if (triangle.containsPoint(intersectPoint)) {\r\n      return { normal: _plane.normal.clone(), point: intersectPoint.clone(), depth: Math.abs(Math.min(d1, d2)) };\r\n    }\r\n    const r2 = capsule.radius * capsule.radius;\r\n    const line1 = _line1.set(capsule.start, capsule.end);\r\n    const lines = [\r\n      [triangle.a, triangle.b],\r\n      [triangle.b, triangle.c],\r\n      [triangle.c, triangle.a]\r\n    ];\r\n    for (let i = 0; i < lines.length; i++) {\r\n      const line2 = _line2.set(lines[i][0], lines[i][1]);\r\n      const [point1, point2] = capsule.lineLineMinimumPoints(line1, line2);\r\n      if (point1.distanceToSquared(point2) < r2) {\r\n        return {\r\n          normal: point1.clone().sub(point2).normalize(),\r\n          point: point2.clone(),\r\n          depth: capsule.radius - point1.distanceTo(point2)\r\n        };\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n  triangleSphereIntersect(sphere, triangle) {\r\n    triangle.getPlane(_plane);\r\n    if (!sphere.intersectsPlane(_plane))\r\n      return false;\r\n    const depth = Math.abs(_plane.distanceToSphere(sphere));\r\n    const r2 = sphere.radius * sphere.radius - depth * depth;\r\n    const plainPoint = _plane.projectPoint(sphere.center, _v1);\r\n    if (triangle.containsPoint(sphere.center)) {\r\n      return {\r\n        normal: _plane.normal.clone(),\r\n        point: plainPoint.clone(),\r\n        depth: Math.abs(_plane.distanceToSphere(sphere))\r\n      };\r\n    }\r\n    const lines = [\r\n      [triangle.a, triangle.b],\r\n      [triangle.b, triangle.c],\r\n      [triangle.c, triangle.a]\r\n    ];\r\n    for (let i = 0; i < lines.length; i++) {\r\n      _line1.set(lines[i][0], lines[i][1]);\r\n      _line1.closestPointToPoint(plainPoint, true, _v2);\r\n      const d = _v2.distanceToSquared(sphere.center);\r\n      if (d < r2) {\r\n        return {\r\n          normal: sphere.center.clone().sub(_v2).normalize(),\r\n          point: _v2.clone(),\r\n          depth: sphere.radius - Math.sqrt(d)\r\n        };\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n  getSphereTriangles(sphere, triangles) {\r\n    for (let i = 0; i < this.subTrees.length; i++) {\r\n      const subTree = this.subTrees[i];\r\n      if (!sphere.intersectsBox(subTree.box))\r\n        continue;\r\n      if (subTree.triangles.length > 0) {\r\n        for (let j = 0; j < subTree.triangles.length; j++) {\r\n          if (triangles.indexOf(subTree.triangles[j]) === -1)\r\n            triangles.push(subTree.triangles[j]);\r\n        }\r\n      } else {\r\n        subTree.getSphereTriangles(sphere, triangles);\r\n      }\r\n    }\r\n  }\r\n  getCapsuleTriangles(capsule, triangles) {\r\n    for (let i = 0; i < this.subTrees.length; i++) {\r\n      const subTree = this.subTrees[i];\r\n      if (!capsule.intersectsBox(subTree.box))\r\n        continue;\r\n      if (subTree.triangles.length > 0) {\r\n        for (let j = 0; j < subTree.triangles.length; j++) {\r\n          if (triangles.indexOf(subTree.triangles[j]) === -1)\r\n            triangles.push(subTree.triangles[j]);\r\n        }\r\n      } else {\r\n        subTree.getCapsuleTriangles(capsule, triangles);\r\n      }\r\n    }\r\n  }\r\n  sphereIntersect(sphere) {\r\n    _sphere.copy(sphere);\r\n    const triangles = [];\r\n    let result, hit = false;\r\n    this.getSphereTriangles(sphere, triangles);\r\n    for (let i = 0; i < triangles.length; i++) {\r\n      if (result = this.triangleSphereIntersect(_sphere, triangles[i])) {\r\n        hit = true;\r\n        _sphere.center.add(result.normal.multiplyScalar(result.depth));\r\n      }\r\n    }\r\n    if (hit) {\r\n      const collisionVector = _sphere.center.clone().sub(sphere.center);\r\n      const depth = collisionVector.length();\r\n      return { normal: collisionVector.normalize(), depth };\r\n    }\r\n    return false;\r\n  }\r\n  capsuleIntersect(capsule) {\r\n    _capsule.copy(capsule);\r\n    const triangles = [];\r\n    let result, hit = false;\r\n    this.getCapsuleTriangles(_capsule, triangles);\r\n    for (let i = 0; i < triangles.length; i++) {\r\n      if (result = this.triangleCapsuleIntersect(_capsule, triangles[i])) {\r\n        hit = true;\r\n        _capsule.translate(result.normal.multiplyScalar(result.depth));\r\n      }\r\n    }\r\n    if (hit) {\r\n      const collisionVector = _capsule.getCenter(new Vector3()).sub(capsule.getCenter(_v1));\r\n      const depth = collisionVector.length();\r\n      return { normal: collisionVector.normalize(), depth };\r\n    }\r\n    return false;\r\n  }\r\n  rayIntersect(ray) {\r\n    if (ray.direction.length() === 0)\r\n      return;\r\n    const triangles = [];\r\n    let triangle, position, distance = 1e100;\r\n    this.getRayTriangles(ray, triangles);\r\n    for (let i = 0; i < triangles.length; i++) {\r\n      const result = ray.intersectTriangle(triangles[i].a, triangles[i].b, triangles[i].c, true, _v1);\r\n      if (result) {\r\n        const newdistance = result.sub(ray.origin).length();\r\n        if (distance > newdistance) {\r\n          position = result.clone().add(ray.origin);\r\n          distance = newdistance;\r\n          triangle = triangles[i];\r\n        }\r\n      }\r\n    }\r\n    return distance < 1e100 ? { distance, triangle, position } : false;\r\n  }\r\n  fromGraphNode(group) {\r\n    group.updateWorldMatrix(true, true);\r\n    group.traverse((obj) => {\r\n      if (obj.isMesh === true) {\r\n        let geometry, isTemp = false;\r\n        if (obj.geometry.index !== null) {\r\n          isTemp = true;\r\n          geometry = obj.geometry.toNonIndexed();\r\n        } else {\r\n          geometry = obj.geometry;\r\n        }\r\n        const positionAttribute = geometry.getAttribute(\"position\");\r\n        for (let i = 0; i < positionAttribute.count; i += 3) {\r\n          const v1 = new Vector3().fromBufferAttribute(positionAttribute, i);\r\n          const v2 = new Vector3().fromBufferAttribute(positionAttribute, i + 1);\r\n          const v3 = new Vector3().fromBufferAttribute(positionAttribute, i + 2);\r\n          v1.applyMatrix4(obj.matrixWorld);\r\n          v2.applyMatrix4(obj.matrixWorld);\r\n          v3.applyMatrix4(obj.matrixWorld);\r\n          this.addTriangle(new Triangle(v1, v2, v3));\r\n        }\r\n        if (isTemp) {\r\n          geometry.dispose();\r\n        }\r\n      }\r\n    });\r\n    this.build();\r\n    return this;\r\n  }\r\n}\r\nexport {\r\n  Octree\r\n};\r\n", "var __defProp = Object.defineProperty;\r\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\r\nvar __publicField = (obj, key, value) => {\r\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\r\n  return value;\r\n};\r\nimport { EventDispatcher, Vector3, TOUCH, Spherical, Vector2, Quaternion, MOUSE, PerspectiveCamera, OrthographicCamera } from \"three\";\r\nvar STATE = /* @__PURE__ */ ((STATE2) => {\r\n  STATE2[STATE2[\"NONE\"] = -1] = \"NONE\";\r\n  STATE2[STATE2[\"ROTATE\"] = 0] = \"ROTATE\";\r\n  STATE2[STATE2[\"DOLLY\"] = 1] = \"DOLLY\";\r\n  STATE2[STATE2[\"PAN\"] = 2] = \"PAN\";\r\n  STATE2[STATE2[\"TOUCH_ROTATE\"] = 3] = \"TOUCH_ROTATE\";\r\n  STATE2[STATE2[\"TOUCH_PAN\"] = 4] = \"TOUCH_PAN\";\r\n  STATE2[STATE2[\"TOUCH_DOLLY_PAN\"] = 5] = \"TOUCH_DOLLY_PAN\";\r\n  STATE2[STATE2[\"TOUCH_DOLLY_ROTATE\"] = 6] = \"TOUCH_DOLLY_ROTATE\";\r\n  return STATE2;\r\n})(STATE || {});\r\nclass CameraControls extends EventDispatcher {\r\n  constructor(object, domElement) {\r\n    super();\r\n    __publicField(this, \"object\");\r\n    __publicField(this, \"domElement\");\r\n    /** Set to false to disable this control */\r\n    __publicField(this, \"enabled\", true);\r\n    /** \"target\" sets the location of focus, where the object orbits around */\r\n    __publicField(this, \"target\", new Vector3());\r\n    /** Set to true to enable trackball behavior */\r\n    __publicField(this, \"trackball\", false);\r\n    /** How far you can dolly in ( PerspectiveCamera only ) */\r\n    __publicField(this, \"minDistance\", 0);\r\n    /** How far you can dolly out ( PerspectiveCamera only ) */\r\n    __publicField(this, \"maxDistance\", Infinity);\r\n    // How far you can zoom in and out ( OrthographicCamera only )\r\n    __publicField(this, \"minZoom\", 0);\r\n    __publicField(this, \"maxZoom\", Infinity);\r\n    // How far you can orbit vertically, upper and lower limits.\r\n    // Range is 0 to Math.PI radians.\r\n    __publicField(this, \"minPolarAngle\", 0);\r\n    __publicField(this, \"maxPolarAngle\", Math.PI);\r\n    // How far you can orbit horizontally, upper and lower limits.\r\n    // If set, must be a sub-interval of the interval [ - Math.PI, Math.PI ].\r\n    __publicField(this, \"minAzimuthAngle\", -Infinity);\r\n    // radians\r\n    __publicField(this, \"maxAzimuthAngle\", Infinity);\r\n    // radians\r\n    // Set to true to enable damping (inertia)\r\n    // If damping is enabled, you must call controls.update() in your animation loop\r\n    __publicField(this, \"enableDamping\", false);\r\n    __publicField(this, \"dampingFactor\", 0.05);\r\n    /**\r\n     * This option enables dollying in and out; property named as \"zoom\" for backwards compatibility\r\n     * Set to false to disable zooming\r\n     */\r\n    __publicField(this, \"enableZoom\", true);\r\n    __publicField(this, \"zoomSpeed\", 1);\r\n    /** Set to false to disable rotating */\r\n    __publicField(this, \"enableRotate\", true);\r\n    __publicField(this, \"rotateSpeed\", 1);\r\n    /** Set to false to disable panning */\r\n    __publicField(this, \"enablePan\", true);\r\n    __publicField(this, \"panSpeed\", 1);\r\n    /** if true, pan in screen-space */\r\n    __publicField(this, \"screenSpacePanning\", false);\r\n    /** pixels moved per arrow key push */\r\n    __publicField(this, \"keyPanSpeed\", 7);\r\n    /**\r\n     * Set to true to automatically rotate around the target\r\n     * If auto-rotate is enabled, you must call controls.update() in your animation loop\r\n     * auto-rotate is not supported for trackball behavior\r\n     */\r\n    __publicField(this, \"autoRotate\", false);\r\n    __publicField(this, \"autoRotateSpeed\", 2);\r\n    // 30 seconds per round when fps is 60\r\n    /** Set to false to disable use of the keys */\r\n    __publicField(this, \"enableKeys\", true);\r\n    /** The four arrow keys */\r\n    __publicField(this, \"keys\", { LEFT: \"ArrowLeft\", UP: \"ArrowUp\", RIGHT: \"ArrowRight\", BOTTOM: \"ArrowDown\" });\r\n    __publicField(this, \"mouseButtons\");\r\n    /** Touch fingers */\r\n    __publicField(this, \"touches\", { ONE: TOUCH.ROTATE, TWO: TOUCH.DOLLY_PAN });\r\n    // for reset\r\n    __publicField(this, \"target0\");\r\n    __publicField(this, \"position0\");\r\n    __publicField(this, \"quaternion0\");\r\n    __publicField(this, \"zoom0\");\r\n    // current position in spherical coordinates\r\n    __publicField(this, \"spherical\", new Spherical());\r\n    __publicField(this, \"sphericalDelta\", new Spherical());\r\n    __publicField(this, \"changeEvent\", { type: \"change\" });\r\n    __publicField(this, \"startEvent\", { type: \"start\" });\r\n    __publicField(this, \"endEvent\", { type: \"end\" });\r\n    __publicField(this, \"state\", -1);\r\n    __publicField(this, \"EPS\", 1e-6);\r\n    __publicField(this, \"scale\", 1);\r\n    __publicField(this, \"panOffset\", new Vector3());\r\n    __publicField(this, \"zoomChanged\", false);\r\n    __publicField(this, \"rotateStart\", new Vector2());\r\n    __publicField(this, \"rotateEnd\", new Vector2());\r\n    __publicField(this, \"rotateDelta\", new Vector2());\r\n    __publicField(this, \"panStart\", new Vector2());\r\n    __publicField(this, \"panEnd\", new Vector2());\r\n    __publicField(this, \"panDelta\", new Vector2());\r\n    __publicField(this, \"dollyStart\", new Vector2());\r\n    __publicField(this, \"dollyEnd\", new Vector2());\r\n    __publicField(this, \"dollyDelta\", new Vector2());\r\n    __publicField(this, \"offset\", new Vector3());\r\n    __publicField(this, \"lastPosition\", new Vector3());\r\n    __publicField(this, \"lastQuaternion\", new Quaternion());\r\n    __publicField(this, \"q\", new Quaternion());\r\n    __publicField(this, \"v\", new Vector3());\r\n    __publicField(this, \"vec\", new Vector3());\r\n    __publicField(this, \"quat\");\r\n    __publicField(this, \"quatInverse\");\r\n    __publicField(this, \"getPolarAngle\", () => this.spherical.phi);\r\n    __publicField(this, \"getAzimuthalAngle\", () => this.spherical.theta);\r\n    __publicField(this, \"saveState\", () => {\r\n      this.target0.copy(this.target);\r\n      this.position0.copy(this.object.position);\r\n      this.quaternion0.copy(this.object.quaternion);\r\n      this.zoom0 = this.object.zoom;\r\n    });\r\n    __publicField(this, \"reset\", () => {\r\n      this.target.copy(this.target0);\r\n      this.object.position.copy(this.position0);\r\n      this.object.quaternion.copy(this.quaternion0);\r\n      this.object.zoom = this.zoom0;\r\n      this.object.updateProjectionMatrix();\r\n      this.dispatchEvent(this.changeEvent);\r\n      this.update();\r\n      this.state = -1;\r\n    });\r\n    __publicField(this, \"dispose\", () => {\r\n      this.domElement.removeEventListener(\"contextmenu\", this.onContextMenu, false);\r\n      this.domElement.removeEventListener(\"mousedown\", this.onMouseDown, false);\r\n      this.domElement.removeEventListener(\"wheel\", this.onMouseWheel, false);\r\n      this.domElement.removeEventListener(\"touchstart\", this.onTouchStart, false);\r\n      this.domElement.removeEventListener(\"touchend\", this.onTouchEnd, false);\r\n      this.domElement.removeEventListener(\"touchmove\", this.onTouchMove, false);\r\n      document.removeEventListener(\"mousemove\", this.onMouseMove, false);\r\n      document.removeEventListener(\"mouseup\", this.onMouseUp, false);\r\n      this.domElement.removeEventListener(\"keydown\", this.onKeyDown, false);\r\n    });\r\n    __publicField(this, \"update\", () => {\r\n      const position = this.object.position;\r\n      this.offset.copy(position).sub(this.target);\r\n      if (this.trackball) {\r\n        if (this.sphericalDelta.theta) {\r\n          this.vec.set(0, 1, 0).applyQuaternion(this.object.quaternion);\r\n          const factor = this.enableDamping ? this.dampingFactor : 1;\r\n          this.q.setFromAxisAngle(this.vec, this.sphericalDelta.theta * factor);\r\n          this.object.quaternion.premultiply(this.q);\r\n          this.offset.applyQuaternion(this.q);\r\n        }\r\n        if (this.sphericalDelta.phi) {\r\n          this.vec.set(1, 0, 0).applyQuaternion(this.object.quaternion);\r\n          const factor = this.enableDamping ? this.dampingFactor : 1;\r\n          this.q.setFromAxisAngle(this.vec, this.sphericalDelta.phi * factor);\r\n          this.object.quaternion.premultiply(this.q);\r\n          this.offset.applyQuaternion(this.q);\r\n        }\r\n        this.offset.multiplyScalar(this.scale);\r\n        this.offset.clampLength(this.minDistance, this.maxDistance);\r\n      } else {\r\n        this.offset.applyQuaternion(this.quat);\r\n        if (this.autoRotate && this.state === -1) {\r\n          this.rotateLeft(this.getAutoRotationAngle());\r\n        }\r\n        this.spherical.setFromVector3(this.offset);\r\n        if (this.enableDamping) {\r\n          this.spherical.theta += this.sphericalDelta.theta * this.dampingFactor;\r\n          this.spherical.phi += this.sphericalDelta.phi * this.dampingFactor;\r\n        } else {\r\n          this.spherical.theta += this.sphericalDelta.theta;\r\n          this.spherical.phi += this.sphericalDelta.phi;\r\n        }\r\n        this.spherical.theta = Math.max(this.minAzimuthAngle, Math.min(this.maxAzimuthAngle, this.spherical.theta));\r\n        this.spherical.phi = Math.max(this.minPolarAngle, Math.min(this.maxPolarAngle, this.spherical.phi));\r\n        this.spherical.makeSafe();\r\n        this.spherical.radius *= this.scale;\r\n        this.spherical.radius = Math.max(this.minDistance, Math.min(this.maxDistance, this.spherical.radius));\r\n        this.offset.setFromSpherical(this.spherical);\r\n        this.offset.applyQuaternion(this.quatInverse);\r\n      }\r\n      if (this.enableDamping === true) {\r\n        this.target.addScaledVector(this.panOffset, this.dampingFactor);\r\n      } else {\r\n        this.target.add(this.panOffset);\r\n      }\r\n      position.copy(this.target).add(this.offset);\r\n      if (this.trackball === false) {\r\n        this.object.lookAt(this.target);\r\n      }\r\n      if (this.enableDamping === true) {\r\n        this.sphericalDelta.theta *= 1 - this.dampingFactor;\r\n        this.sphericalDelta.phi *= 1 - this.dampingFactor;\r\n        this.panOffset.multiplyScalar(1 - this.dampingFactor);\r\n      } else {\r\n        this.sphericalDelta.set(0, 0, 0);\r\n        this.panOffset.set(0, 0, 0);\r\n      }\r\n      this.scale = 1;\r\n      if (this.zoomChanged || this.lastPosition.distanceToSquared(this.object.position) > this.EPS || 8 * (1 - this.lastQuaternion.dot(this.object.quaternion)) > this.EPS) {\r\n        this.dispatchEvent(this.changeEvent);\r\n        this.lastPosition.copy(this.object.position);\r\n        this.lastQuaternion.copy(this.object.quaternion);\r\n        this.zoomChanged = false;\r\n        return true;\r\n      }\r\n      return false;\r\n    });\r\n    __publicField(this, \"getAutoRotationAngle\", () => 2 * Math.PI / 60 / 60 * this.autoRotateSpeed);\r\n    __publicField(this, \"getZoomScale\", () => Math.pow(0.95, this.zoomSpeed));\r\n    __publicField(this, \"rotateLeft\", (angle) => {\r\n      this.sphericalDelta.theta -= angle;\r\n    });\r\n    __publicField(this, \"rotateUp\", (angle) => {\r\n      this.sphericalDelta.phi -= angle;\r\n    });\r\n    __publicField(this, \"panLeft\", (distance, objectMatrix) => {\r\n      this.v.setFromMatrixColumn(objectMatrix, 0);\r\n      this.v.multiplyScalar(-distance);\r\n      this.panOffset.add(this.v);\r\n    });\r\n    __publicField(this, \"panUp\", (distance, objectMatrix) => {\r\n      if (this.screenSpacePanning === true) {\r\n        this.v.setFromMatrixColumn(objectMatrix, 1);\r\n      } else {\r\n        this.v.setFromMatrixColumn(objectMatrix, 0);\r\n        this.v.crossVectors(this.object.up, this.v);\r\n      }\r\n      this.v.multiplyScalar(distance);\r\n      this.panOffset.add(this.v);\r\n    });\r\n    // deltaX and deltaY are in pixels; right and down are positive\r\n    __publicField(this, \"pan\", (deltaX, deltaY) => {\r\n      const element = this.domElement;\r\n      if (this.object instanceof PerspectiveCamera) {\r\n        const position = this.object.position;\r\n        this.offset.copy(position).sub(this.target);\r\n        let targetDistance = this.offset.length();\r\n        targetDistance *= Math.tan(this.object.fov / 2 * Math.PI / 180);\r\n        this.panLeft(2 * deltaX * targetDistance / element.clientHeight, this.object.matrix);\r\n        this.panUp(2 * deltaY * targetDistance / element.clientHeight, this.object.matrix);\r\n      } else if (this.object.isOrthographicCamera) {\r\n        this.panLeft(\r\n          deltaX * (this.object.right - this.object.left) / this.object.zoom / element.clientWidth,\r\n          this.object.matrix\r\n        );\r\n        this.panUp(\r\n          deltaY * (this.object.top - this.object.bottom) / this.object.zoom / element.clientHeight,\r\n          this.object.matrix\r\n        );\r\n      } else {\r\n        console.warn(\"WARNING: CameraControls.js encountered an unknown camera type - pan disabled.\");\r\n        this.enablePan = false;\r\n      }\r\n    });\r\n    __publicField(this, \"dollyIn\", (dollyScale) => {\r\n      if (this.object instanceof PerspectiveCamera) {\r\n        this.scale /= dollyScale;\r\n      } else if (this.object instanceof OrthographicCamera) {\r\n        this.object.zoom = Math.max(this.minZoom, Math.min(this.maxZoom, this.object.zoom * dollyScale));\r\n        this.object.updateProjectionMatrix();\r\n        this.zoomChanged = true;\r\n      } else {\r\n        console.warn(\"WARNING: CameraControls.js encountered an unknown camera type - dolly/zoom disabled.\");\r\n        this.enableZoom = false;\r\n      }\r\n    });\r\n    __publicField(this, \"dollyOut\", (dollyScale) => {\r\n      if (this.object instanceof PerspectiveCamera) {\r\n        this.scale *= dollyScale;\r\n      } else if (this.object instanceof OrthographicCamera) {\r\n        this.object.zoom = Math.max(this.minZoom, Math.min(this.maxZoom, this.object.zoom / dollyScale));\r\n        this.object.updateProjectionMatrix();\r\n        this.zoomChanged = true;\r\n      } else {\r\n        console.warn(\"WARNING: CameraControls.js encountered an unknown camera type - dolly/zoom disabled.\");\r\n        this.enableZoom = false;\r\n      }\r\n    });\r\n    // event callbacks - update the object state\r\n    __publicField(this, \"handleMouseDownRotate\", (event) => {\r\n      this.rotateStart.set(event.clientX, event.clientY);\r\n    });\r\n    // TODO: confirm if worthwhile to return the Vector2 instead of void\r\n    __publicField(this, \"handleMouseDownDolly\", (event) => {\r\n      this.dollyStart.set(event.clientX, event.clientY);\r\n    });\r\n    __publicField(this, \"handleMouseDownPan\", (event) => {\r\n      this.panStart.set(event.clientX, event.clientY);\r\n    });\r\n    __publicField(this, \"handleMouseMoveRotate\", (event) => {\r\n      this.rotateEnd.set(event.clientX, event.clientY);\r\n      this.rotateDelta.subVectors(this.rotateEnd, this.rotateStart).multiplyScalar(this.rotateSpeed);\r\n      const element = this.domElement;\r\n      this.rotateLeft(2 * Math.PI * this.rotateDelta.x / element.clientHeight);\r\n      this.rotateUp(2 * Math.PI * this.rotateDelta.y / element.clientHeight);\r\n      this.rotateStart.copy(this.rotateEnd);\r\n      this.update();\r\n    });\r\n    __publicField(this, \"handleMouseMoveDolly\", (event) => {\r\n      this.dollyEnd.set(event.clientX, event.clientY);\r\n      this.dollyDelta.subVectors(this.dollyEnd, this.dollyStart);\r\n      if (this.dollyDelta.y > 0) {\r\n        this.dollyIn(this.getZoomScale());\r\n      } else if (this.dollyDelta.y < 0) {\r\n        this.dollyOut(this.getZoomScale());\r\n      }\r\n      this.dollyStart.copy(this.dollyEnd);\r\n      this.update();\r\n    });\r\n    __publicField(this, \"handleMouseMovePan\", (event) => {\r\n      this.panEnd.set(event.clientX, event.clientY);\r\n      this.panDelta.subVectors(this.panEnd, this.panStart).multiplyScalar(this.panSpeed);\r\n      this.pan(this.panDelta.x, this.panDelta.y);\r\n      this.panStart.copy(this.panEnd);\r\n      this.update();\r\n    });\r\n    __publicField(this, \"handleMouseWheel\", (event) => {\r\n      if (event.deltaY < 0) {\r\n        this.dollyOut(this.getZoomScale());\r\n      } else if (event.deltaY > 0) {\r\n        this.dollyIn(this.getZoomScale());\r\n      }\r\n      this.update();\r\n    });\r\n    __publicField(this, \"handleKeyDown\", (event) => {\r\n      let needsUpdate = false;\r\n      switch (event.code) {\r\n        case this.keys.UP:\r\n          this.pan(0, this.keyPanSpeed);\r\n          needsUpdate = true;\r\n          break;\r\n        case this.keys.BOTTOM:\r\n          this.pan(0, -this.keyPanSpeed);\r\n          needsUpdate = true;\r\n          break;\r\n        case this.keys.LEFT:\r\n          this.pan(this.keyPanSpeed, 0);\r\n          needsUpdate = true;\r\n          break;\r\n        case this.keys.RIGHT:\r\n          this.pan(-this.keyPanSpeed, 0);\r\n          needsUpdate = true;\r\n          break;\r\n      }\r\n      if (needsUpdate) {\r\n        event.preventDefault();\r\n        this.update();\r\n      }\r\n    });\r\n    __publicField(this, \"handleTouchStartRotate\", (event) => {\r\n      if (event.touches.length == 1) {\r\n        this.rotateStart.set(event.touches[0].pageX, event.touches[0].pageY);\r\n      } else {\r\n        const x = 0.5 * (event.touches[0].pageX + event.touches[1].pageX);\r\n        const y = 0.5 * (event.touches[0].pageY + event.touches[1].pageY);\r\n        this.rotateStart.set(x, y);\r\n      }\r\n    });\r\n    __publicField(this, \"handleTouchStartPan\", (event) => {\r\n      if (event.touches.length == 1) {\r\n        this.panStart.set(event.touches[0].pageX, event.touches[0].pageY);\r\n      } else {\r\n        const x = 0.5 * (event.touches[0].pageX + event.touches[1].pageX);\r\n        const y = 0.5 * (event.touches[0].pageY + event.touches[1].pageY);\r\n        this.panStart.set(x, y);\r\n      }\r\n    });\r\n    __publicField(this, \"handleTouchStartDolly\", (event) => {\r\n      const dx = event.touches[0].pageX - event.touches[1].pageX;\r\n      const dy = event.touches[0].pageY - event.touches[1].pageY;\r\n      const distance = Math.sqrt(dx * dx + dy * dy);\r\n      this.dollyStart.set(0, distance);\r\n    });\r\n    __publicField(this, \"handleTouchStartDollyPan\", (event) => {\r\n      if (this.enableZoom)\r\n        this.handleTouchStartDolly(event);\r\n      if (this.enablePan)\r\n        this.handleTouchStartPan(event);\r\n    });\r\n    __publicField(this, \"handleTouchStartDollyRotate\", (event) => {\r\n      if (this.enableZoom)\r\n        this.handleTouchStartDolly(event);\r\n      if (this.enableRotate)\r\n        this.handleTouchStartRotate(event);\r\n    });\r\n    __publicField(this, \"handleTouchMoveRotate\", (event) => {\r\n      if (event.touches.length == 1) {\r\n        this.rotateEnd.set(event.touches[0].pageX, event.touches[0].pageY);\r\n      } else {\r\n        const x = 0.5 * (event.touches[0].pageX + event.touches[1].pageX);\r\n        const y = 0.5 * (event.touches[0].pageY + event.touches[1].pageY);\r\n        this.rotateEnd.set(x, y);\r\n      }\r\n      this.rotateDelta.subVectors(this.rotateEnd, this.rotateStart).multiplyScalar(this.rotateSpeed);\r\n      const element = this.domElement;\r\n      this.rotateLeft(2 * Math.PI * this.rotateDelta.x / element.clientHeight);\r\n      this.rotateUp(2 * Math.PI * this.rotateDelta.y / element.clientHeight);\r\n      this.rotateStart.copy(this.rotateEnd);\r\n    });\r\n    __publicField(this, \"handleTouchMovePan\", (event) => {\r\n      if (event.touches.length == 1) {\r\n        this.panEnd.set(event.touches[0].pageX, event.touches[0].pageY);\r\n      } else {\r\n        const x = 0.5 * (event.touches[0].pageX + event.touches[1].pageX);\r\n        const y = 0.5 * (event.touches[0].pageY + event.touches[1].pageY);\r\n        this.panEnd.set(x, y);\r\n      }\r\n      this.panDelta.subVectors(this.panEnd, this.panStart).multiplyScalar(this.panSpeed);\r\n      this.pan(this.panDelta.x, this.panDelta.y);\r\n      this.panStart.copy(this.panEnd);\r\n    });\r\n    __publicField(this, \"handleTouchMoveDolly\", (event) => {\r\n      const dx = event.touches[0].pageX - event.touches[1].pageX;\r\n      const dy = event.touches[0].pageY - event.touches[1].pageY;\r\n      const distance = Math.sqrt(dx * dx + dy * dy);\r\n      this.dollyEnd.set(0, distance);\r\n      this.dollyDelta.set(0, Math.pow(this.dollyEnd.y / this.dollyStart.y, this.zoomSpeed));\r\n      this.dollyIn(this.dollyDelta.y);\r\n      this.dollyStart.copy(this.dollyEnd);\r\n    });\r\n    __publicField(this, \"handleTouchMoveDollyPan\", (event) => {\r\n      if (this.enableZoom)\r\n        this.handleTouchMoveDolly(event);\r\n      if (this.enablePan)\r\n        this.handleTouchMovePan(event);\r\n    });\r\n    __publicField(this, \"handleTouchMoveDollyRotate\", (event) => {\r\n      if (this.enableZoom)\r\n        this.handleTouchMoveDolly(event);\r\n      if (this.enableRotate)\r\n        this.handleTouchMoveRotate(event);\r\n    });\r\n    //\r\n    // event handlers - FSM: listen for events and reset state\r\n    //\r\n    __publicField(this, \"onMouseDown\", (event) => {\r\n      if (this.enabled === false)\r\n        return;\r\n      event.preventDefault();\r\n      this.domElement.focus ? this.domElement.focus() : window.focus();\r\n      let mouseAction;\r\n      switch (event.button) {\r\n        case 0:\r\n          mouseAction = this.mouseButtons.LEFT;\r\n          break;\r\n        case 1:\r\n          mouseAction = this.mouseButtons.MIDDLE;\r\n          break;\r\n        case 2:\r\n          mouseAction = this.mouseButtons.RIGHT;\r\n          break;\r\n        default:\r\n          mouseAction = -1;\r\n      }\r\n      switch (mouseAction) {\r\n        case MOUSE.DOLLY:\r\n          if (this.enableZoom === false)\r\n            return;\r\n          this.handleMouseDownDolly(event);\r\n          this.state = 1;\r\n          break;\r\n        case MOUSE.ROTATE:\r\n          if (event.ctrlKey || event.metaKey || event.shiftKey) {\r\n            if (this.enablePan === false)\r\n              return;\r\n            this.handleMouseDownPan(event);\r\n            this.state = 2;\r\n          } else {\r\n            if (this.enableRotate === false)\r\n              return;\r\n            this.handleMouseDownRotate(event);\r\n            this.state = 0;\r\n          }\r\n          break;\r\n        case MOUSE.PAN:\r\n          if (event.ctrlKey || event.metaKey || event.shiftKey) {\r\n            if (this.enableRotate === false)\r\n              return;\r\n            this.handleMouseDownRotate(event);\r\n            this.state = 0;\r\n          } else {\r\n            if (this.enablePan === false)\r\n              return;\r\n            this.handleMouseDownPan(event);\r\n            this.state = 2;\r\n          }\r\n          break;\r\n        default:\r\n          this.state = -1;\r\n      }\r\n      if (this.state !== -1) {\r\n        document.addEventListener(\"mousemove\", this.onMouseMove, false);\r\n        document.addEventListener(\"mouseup\", this.onMouseUp, false);\r\n        this.dispatchEvent(this.startEvent);\r\n      }\r\n    });\r\n    __publicField(this, \"onMouseMove\", (event) => {\r\n      if (this.enabled === false)\r\n        return;\r\n      event.preventDefault();\r\n      switch (this.state) {\r\n        case 0:\r\n          if (this.enableRotate === false)\r\n            return;\r\n          this.handleMouseMoveRotate(event);\r\n          break;\r\n        case 1:\r\n          if (this.enableZoom === false)\r\n            return;\r\n          this.handleMouseMoveDolly(event);\r\n          break;\r\n        case 2:\r\n          if (this.enablePan === false)\r\n            return;\r\n          this.handleMouseMovePan(event);\r\n          break;\r\n      }\r\n    });\r\n    __publicField(this, \"onMouseUp\", () => {\r\n      if (this.enabled === false)\r\n        return;\r\n      document.removeEventListener(\"mousemove\", this.onMouseMove, false);\r\n      document.removeEventListener(\"mouseup\", this.onMouseUp, false);\r\n      this.dispatchEvent(this.endEvent);\r\n      this.state = -1;\r\n    });\r\n    __publicField(this, \"onMouseWheel\", (event) => {\r\n      if (this.enabled === false || this.enableZoom === false || this.state !== -1 && this.state !== 0) {\r\n        return;\r\n      }\r\n      event.preventDefault();\r\n      this.dispatchEvent(this.startEvent);\r\n      this.handleMouseWheel(event);\r\n      this.dispatchEvent(this.endEvent);\r\n    });\r\n    __publicField(this, \"onKeyDown\", (event) => {\r\n      if (this.enabled === false || this.enableKeys === false || this.enablePan === false)\r\n        return;\r\n      this.handleKeyDown(event);\r\n    });\r\n    __publicField(this, \"onTouchStart\", (event) => {\r\n      if (this.enabled === false)\r\n        return;\r\n      event.preventDefault();\r\n      switch (event.touches.length) {\r\n        case 1:\r\n          switch (this.touches.ONE) {\r\n            case TOUCH.ROTATE:\r\n              if (this.enableRotate === false)\r\n                return;\r\n              this.handleTouchStartRotate(event);\r\n              this.state = 3;\r\n              break;\r\n            case TOUCH.PAN:\r\n              if (this.enablePan === false)\r\n                return;\r\n              this.handleTouchStartPan(event);\r\n              this.state = 4;\r\n              break;\r\n            default:\r\n              this.state = -1;\r\n          }\r\n          break;\r\n        case 2:\r\n          switch (this.touches.TWO) {\r\n            case TOUCH.DOLLY_PAN:\r\n              if (this.enableZoom === false && this.enablePan === false)\r\n                return;\r\n              this.handleTouchStartDollyPan(event);\r\n              this.state = 5;\r\n              break;\r\n            case TOUCH.DOLLY_ROTATE:\r\n              if (this.enableZoom === false && this.enableRotate === false)\r\n                return;\r\n              this.handleTouchStartDollyRotate(event);\r\n              this.state = 6;\r\n              break;\r\n            default:\r\n              this.state = -1;\r\n          }\r\n          break;\r\n        default:\r\n          this.state = -1;\r\n      }\r\n      if (this.state !== -1) {\r\n        this.dispatchEvent(this.startEvent);\r\n      }\r\n    });\r\n    __publicField(this, \"onTouchMove\", (event) => {\r\n      if (this.enabled === false)\r\n        return;\r\n      event.preventDefault();\r\n      switch (this.state) {\r\n        case 3:\r\n          if (this.enableRotate === false)\r\n            return;\r\n          this.handleTouchMoveRotate(event);\r\n          this.update();\r\n          break;\r\n        case 4:\r\n          if (this.enablePan === false)\r\n            return;\r\n          this.handleTouchMovePan(event);\r\n          this.update();\r\n          break;\r\n        case 5:\r\n          if (this.enableZoom === false && this.enablePan === false)\r\n            return;\r\n          this.handleTouchMoveDollyPan(event);\r\n          this.update();\r\n          break;\r\n        case 6:\r\n          if (this.enableZoom === false && this.enableRotate === false)\r\n            return;\r\n          this.handleTouchMoveDollyRotate(event);\r\n          this.update();\r\n          break;\r\n        default:\r\n          this.state = -1;\r\n      }\r\n    });\r\n    __publicField(this, \"onTouchEnd\", () => {\r\n      if (this.enabled === false)\r\n        return;\r\n      this.dispatchEvent(this.endEvent);\r\n      this.state = -1;\r\n    });\r\n    __publicField(this, \"onContextMenu\", (event) => {\r\n      if (this.enabled === false)\r\n        return;\r\n      event.preventDefault();\r\n    });\r\n    if (domElement === void 0) {\r\n      console.warn('THREE.CameraControls: The second parameter \"domElement\" is now mandatory.');\r\n    }\r\n    if (domElement instanceof Document) {\r\n      console.error(\r\n        'THREE.CameraControls: \"document\" should not be used as the target \"domElement\". Please use \"renderer.domElement\" instead.'\r\n      );\r\n    }\r\n    this.object = object;\r\n    this.domElement = domElement;\r\n    this.mouseButtons = {\r\n      LEFT: MOUSE.ROTATE,\r\n      MIDDLE: MOUSE.DOLLY,\r\n      RIGHT: MOUSE.PAN\r\n    };\r\n    this.target0 = this.target.clone();\r\n    this.position0 = this.object.position.clone();\r\n    this.quaternion0 = this.object.quaternion.clone();\r\n    this.zoom0 = this.object.zoom;\r\n    this.quat = new Quaternion().setFromUnitVectors(this.object.up, new Vector3(0, 1, 0));\r\n    this.quatInverse = this.quat.clone().invert();\r\n    this.lastPosition = new Vector3();\r\n    this.lastQuaternion = new Quaternion();\r\n    this.domElement.addEventListener(\"contextmenu\", this.onContextMenu, false);\r\n    this.domElement.addEventListener(\"mousedown\", this.onMouseDown, false);\r\n    this.domElement.addEventListener(\"wheel\", this.onMouseWheel, false);\r\n    this.domElement.addEventListener(\"touchstart\", this.onTouchStart, false);\r\n    this.domElement.addEventListener(\"touchend\", this.onTouchEnd, false);\r\n    this.domElement.addEventListener(\"touchmove\", this.onTouchMove, false);\r\n    this.domElement.addEventListener(\"keydown\", this.onKeyDown, false);\r\n    if (this.domElement.tabIndex === -1) {\r\n      this.domElement.tabIndex = 0;\r\n    }\r\n    this.object.lookAt(this.target);\r\n    this.update();\r\n    this.saveState();\r\n  }\r\n  handleMouseUp() {\r\n  }\r\n  handleTouchEnd() {\r\n  }\r\n}\r\nclass OrbitControlsExp extends CameraControls {\r\n  constructor(object, domElement) {\r\n    super(object, domElement);\r\n    __publicField(this, \"mouseButtons\");\r\n    __publicField(this, \"touches\");\r\n    this.mouseButtons = {\r\n      LEFT: MOUSE.ROTATE,\r\n      RIGHT: MOUSE.PAN\r\n    };\r\n    this.touches = {\r\n      ONE: TOUCH.ROTATE,\r\n      TWO: TOUCH.DOLLY_PAN\r\n    };\r\n  }\r\n}\r\nclass MapControlsExp extends CameraControls {\r\n  constructor(object, domElement) {\r\n    super(object, domElement);\r\n    __publicField(this, \"mouseButtons\");\r\n    __publicField(this, \"touches\");\r\n    this.mouseButtons = {\r\n      LEFT: MOUSE.PAN,\r\n      RIGHT: MOUSE.ROTATE\r\n    };\r\n    this.touches = {\r\n      ONE: TOUCH.PAN,\r\n      TWO: TOUCH.DOLLY_ROTATE\r\n    };\r\n  }\r\n}\r\nclass TrackballControlsExp extends CameraControls {\r\n  constructor(object, domElement) {\r\n    super(object, domElement);\r\n    __publicField(this, \"trackball\");\r\n    __publicField(this, \"screenSpacePanning\");\r\n    __publicField(this, \"autoRotate\");\r\n    __publicField(this, \"mouseButtons\");\r\n    __publicField(this, \"touches\");\r\n    this.trackball = true;\r\n    this.screenSpacePanning = true;\r\n    this.autoRotate = false;\r\n    this.mouseButtons = {\r\n      LEFT: MOUSE.ROTATE,\r\n      RIGHT: MOUSE.PAN\r\n    };\r\n    this.touches = {\r\n      ONE: TOUCH.ROTATE,\r\n      TWO: TOUCH.DOLLY_PAN\r\n    };\r\n  }\r\n}\r\nexport {\r\n  CameraControls,\r\n  MapControlsExp,\r\n  OrbitControlsExp,\r\n  STATE,\r\n  TrackballControlsExp\r\n};\r\n", "var __defProp = Object.defineProperty;\r\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\r\nvar __publicField = (obj, key, value) => {\r\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\r\n  return value;\r\n};\r\nimport { Vector3, EventDispatcher, Spherical, MathUtils } from \"three\";\r\nconst targetPosition = /* @__PURE__ */ new Vector3();\r\nclass FirstPersonControls extends EventDispatcher {\r\n  constructor(object, domElement) {\r\n    super();\r\n    __publicField(this, \"object\");\r\n    __publicField(this, \"domElement\");\r\n    __publicField(this, \"enabled\", true);\r\n    __publicField(this, \"movementSpeed\", 1);\r\n    __publicField(this, \"lookSpeed\", 5e-3);\r\n    __publicField(this, \"lookVertical\", true);\r\n    __publicField(this, \"autoForward\", false);\r\n    __publicField(this, \"activeLook\", true);\r\n    __publicField(this, \"heightSpeed\", false);\r\n    __publicField(this, \"heightCoef\", 1);\r\n    __publicField(this, \"heightMin\", 0);\r\n    __publicField(this, \"heightMax\", 1);\r\n    __publicField(this, \"constrainVertical\", false);\r\n    __publicField(this, \"verticalMin\", 0);\r\n    __publicField(this, \"verticalMax\", Math.PI);\r\n    __publicField(this, \"mouseDragOn\", false);\r\n    // internals\r\n    __publicField(this, \"autoSpeedFactor\", 0);\r\n    __publicField(this, \"mouseX\", 0);\r\n    __publicField(this, \"mouseY\", 0);\r\n    __publicField(this, \"moveForward\", false);\r\n    __publicField(this, \"moveBackward\", false);\r\n    __publicField(this, \"moveLeft\", false);\r\n    __publicField(this, \"moveRight\", false);\r\n    __publicField(this, \"moveUp\", false);\r\n    __publicField(this, \"moveDown\", false);\r\n    __publicField(this, \"viewHalfX\", 0);\r\n    __publicField(this, \"viewHalfY\", 0);\r\n    __publicField(this, \"lat\", 0);\r\n    __publicField(this, \"lon\", 0);\r\n    __publicField(this, \"lookDirection\", new Vector3());\r\n    __publicField(this, \"spherical\", new Spherical());\r\n    __publicField(this, \"target\", new Vector3());\r\n    __publicField(this, \"connect\", (domElement) => {\r\n      domElement.setAttribute(\"tabindex\", \"-1\");\r\n      domElement.style.touchAction = \"none\";\r\n      domElement.addEventListener(\"contextmenu\", this.contextmenu);\r\n      domElement.addEventListener(\"mousemove\", this.onMouseMove);\r\n      domElement.addEventListener(\"mousedown\", this.onMouseDown);\r\n      domElement.addEventListener(\"mouseup\", this.onMouseUp);\r\n      this.domElement = domElement;\r\n      window.addEventListener(\"keydown\", this.onKeyDown);\r\n      window.addEventListener(\"keyup\", this.onKeyUp);\r\n      this.handleResize();\r\n    });\r\n    __publicField(this, \"dispose\", () => {\r\n      var _a, _b, _c, _d;\r\n      (_a = this.domElement) == null ? void 0 : _a.removeEventListener(\"contextmenu\", this.contextmenu);\r\n      (_b = this.domElement) == null ? void 0 : _b.removeEventListener(\"mousedown\", this.onMouseDown);\r\n      (_c = this.domElement) == null ? void 0 : _c.removeEventListener(\"mousemove\", this.onMouseMove);\r\n      (_d = this.domElement) == null ? void 0 : _d.removeEventListener(\"mouseup\", this.onMouseUp);\r\n      window.removeEventListener(\"keydown\", this.onKeyDown);\r\n      window.removeEventListener(\"keyup\", this.onKeyUp);\r\n    });\r\n    __publicField(this, \"handleResize\", () => {\r\n      if (this.domElement) {\r\n        this.viewHalfX = this.domElement.offsetWidth / 2;\r\n        this.viewHalfY = this.domElement.offsetHeight / 2;\r\n      }\r\n    });\r\n    __publicField(this, \"onMouseDown\", (event) => {\r\n      var _a;\r\n      (_a = this.domElement) == null ? void 0 : _a.focus();\r\n      if (this.activeLook) {\r\n        switch (event.button) {\r\n          case 0:\r\n            this.moveForward = true;\r\n            break;\r\n          case 2:\r\n            this.moveBackward = true;\r\n            break;\r\n        }\r\n      }\r\n      this.mouseDragOn = true;\r\n    });\r\n    __publicField(this, \"onMouseUp\", (event) => {\r\n      if (this.activeLook) {\r\n        switch (event.button) {\r\n          case 0:\r\n            this.moveForward = false;\r\n            break;\r\n          case 2:\r\n            this.moveBackward = false;\r\n            break;\r\n        }\r\n      }\r\n      this.mouseDragOn = false;\r\n    });\r\n    __publicField(this, \"onMouseMove\", (event) => {\r\n      if (this.domElement) {\r\n        this.mouseX = event.pageX - this.domElement.offsetLeft - this.viewHalfX;\r\n        this.mouseY = event.pageY - this.domElement.offsetTop - this.viewHalfY;\r\n      }\r\n    });\r\n    __publicField(this, \"onKeyDown\", (event) => {\r\n      switch (event.code) {\r\n        case \"ArrowUp\":\r\n        case \"KeyW\":\r\n          this.moveForward = true;\r\n          break;\r\n        case \"ArrowLeft\":\r\n        case \"KeyA\":\r\n          this.moveLeft = true;\r\n          break;\r\n        case \"ArrowDown\":\r\n        case \"KeyS\":\r\n          this.moveBackward = true;\r\n          break;\r\n        case \"ArrowRight\":\r\n        case \"KeyD\":\r\n          this.moveRight = true;\r\n          break;\r\n        case \"KeyR\":\r\n          this.moveUp = true;\r\n          break;\r\n        case \"KeyF\":\r\n          this.moveDown = true;\r\n          break;\r\n      }\r\n    });\r\n    __publicField(this, \"onKeyUp\", (event) => {\r\n      switch (event.code) {\r\n        case \"ArrowUp\":\r\n        case \"KeyW\":\r\n          this.moveForward = false;\r\n          break;\r\n        case \"ArrowLeft\":\r\n        case \"KeyA\":\r\n          this.moveLeft = false;\r\n          break;\r\n        case \"ArrowDown\":\r\n        case \"KeyS\":\r\n          this.moveBackward = false;\r\n          break;\r\n        case \"ArrowRight\":\r\n        case \"KeyD\":\r\n          this.moveRight = false;\r\n          break;\r\n        case \"KeyR\":\r\n          this.moveUp = false;\r\n          break;\r\n        case \"KeyF\":\r\n          this.moveDown = false;\r\n          break;\r\n      }\r\n    });\r\n    __publicField(this, \"lookAt\", (x, y, z) => {\r\n      if (x instanceof Vector3) {\r\n        this.target.copy(x);\r\n      } else if (y && z) {\r\n        this.target.set(x, y, z);\r\n      }\r\n      this.object.lookAt(this.target);\r\n      this.setOrientation();\r\n      return this;\r\n    });\r\n    __publicField(this, \"update\", (delta) => {\r\n      if (!this.enabled)\r\n        return;\r\n      if (this.heightSpeed) {\r\n        const y = MathUtils.clamp(this.object.position.y, this.heightMin, this.heightMax);\r\n        const heightDelta = y - this.heightMin;\r\n        this.autoSpeedFactor = delta * (heightDelta * this.heightCoef);\r\n      } else {\r\n        this.autoSpeedFactor = 0;\r\n      }\r\n      const actualMoveSpeed = delta * this.movementSpeed;\r\n      if (this.moveForward || this.autoForward && !this.moveBackward) {\r\n        this.object.translateZ(-(actualMoveSpeed + this.autoSpeedFactor));\r\n      }\r\n      if (this.moveBackward)\r\n        this.object.translateZ(actualMoveSpeed);\r\n      if (this.moveLeft)\r\n        this.object.translateX(-actualMoveSpeed);\r\n      if (this.moveRight)\r\n        this.object.translateX(actualMoveSpeed);\r\n      if (this.moveUp)\r\n        this.object.translateY(actualMoveSpeed);\r\n      if (this.moveDown)\r\n        this.object.translateY(-actualMoveSpeed);\r\n      let actualLookSpeed = delta * this.lookSpeed;\r\n      if (!this.activeLook) {\r\n        actualLookSpeed = 0;\r\n      }\r\n      let verticalLookRatio = 1;\r\n      if (this.constrainVertical) {\r\n        verticalLookRatio = Math.PI / (this.verticalMax - this.verticalMin);\r\n      }\r\n      this.lon -= this.mouseX * actualLookSpeed;\r\n      if (this.lookVertical)\r\n        this.lat -= this.mouseY * actualLookSpeed * verticalLookRatio;\r\n      this.lat = Math.max(-85, Math.min(85, this.lat));\r\n      let phi = MathUtils.degToRad(90 - this.lat);\r\n      const theta = MathUtils.degToRad(this.lon);\r\n      if (this.constrainVertical) {\r\n        phi = MathUtils.mapLinear(phi, 0, Math.PI, this.verticalMin, this.verticalMax);\r\n      }\r\n      const position = this.object.position;\r\n      targetPosition.setFromSphericalCoords(1, phi, theta).add(position);\r\n      this.object.lookAt(targetPosition);\r\n    });\r\n    __publicField(this, \"contextmenu\", (event) => event.preventDefault());\r\n    __publicField(this, \"setOrientation\", () => {\r\n      this.lookDirection.set(0, 0, -1).applyQuaternion(this.object.quaternion);\r\n      this.spherical.setFromVector3(this.lookDirection);\r\n      this.lat = 90 - MathUtils.radToDeg(this.spherical.phi);\r\n      this.lon = MathUtils.radToDeg(this.spherical.theta);\r\n    });\r\n    this.object = object;\r\n    this.domElement = domElement;\r\n    this.setOrientation();\r\n    if (domElement)\r\n      this.connect(domElement);\r\n  }\r\n}\r\nexport {\r\n  FirstPersonControls\r\n};\r\n", "var __defProp = Object.defineProperty;\r\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\r\nvar __publicField = (obj, key, value) => {\r\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\r\n  return value;\r\n};\r\nimport { Euler, Vector3, EventDispatcher } from \"three\";\r\nconst _euler = /* @__PURE__ */ new Euler(0, 0, 0, \"YXZ\");\r\nconst _vector = /* @__PURE__ */ new Vector3();\r\nconst _changeEvent = { type: \"change\" };\r\nconst _lockEvent = { type: \"lock\" };\r\nconst _unlockEvent = { type: \"unlock\" };\r\nconst _PI_2 = Math.PI / 2;\r\nclass PointerLockControls extends EventDispatcher {\r\n  constructor(camera, domElement) {\r\n    super();\r\n    __publicField(this, \"camera\");\r\n    __publicField(this, \"domElement\");\r\n    __publicField(this, \"isLocked\");\r\n    __publicField(this, \"minPolarAngle\");\r\n    __publicField(this, \"maxPolarAngle\");\r\n    __publicField(this, \"pointerSpeed\");\r\n    __publicField(this, \"onMouseMove\", (event) => {\r\n      if (!this.domElement || this.isLocked === false)\r\n        return;\r\n      const movementX = event.movementX || event.mozMovementX || event.webkitMovementX || 0;\r\n      const movementY = event.movementY || event.mozMovementY || event.webkitMovementY || 0;\r\n      _euler.setFromQuaternion(this.camera.quaternion);\r\n      _euler.y -= movementX * 2e-3 * this.pointerSpeed;\r\n      _euler.x -= movementY * 2e-3 * this.pointerSpeed;\r\n      _euler.x = Math.max(_PI_2 - this.maxPolarAngle, Math.min(_PI_2 - this.minPolarAngle, _euler.x));\r\n      this.camera.quaternion.setFromEuler(_euler);\r\n      this.dispatchEvent(_changeEvent);\r\n    });\r\n    __publicField(this, \"onPointerlockChange\", () => {\r\n      if (!this.domElement)\r\n        return;\r\n      if (this.domElement.ownerDocument.pointerLockElement === this.domElement) {\r\n        this.dispatchEvent(_lockEvent);\r\n        this.isLocked = true;\r\n      } else {\r\n        this.dispatchEvent(_unlockEvent);\r\n        this.isLocked = false;\r\n      }\r\n    });\r\n    __publicField(this, \"onPointerlockError\", () => {\r\n      console.error(\"THREE.PointerLockControls: Unable to use Pointer Lock API\");\r\n    });\r\n    __publicField(this, \"connect\", (domElement) => {\r\n      this.domElement = domElement || this.domElement;\r\n      if (!this.domElement)\r\n        return;\r\n      this.domElement.ownerDocument.addEventListener(\"mousemove\", this.onMouseMove);\r\n      this.domElement.ownerDocument.addEventListener(\"pointerlockchange\", this.onPointerlockChange);\r\n      this.domElement.ownerDocument.addEventListener(\"pointerlockerror\", this.onPointerlockError);\r\n    });\r\n    __publicField(this, \"disconnect\", () => {\r\n      if (!this.domElement)\r\n        return;\r\n      this.domElement.ownerDocument.removeEventListener(\"mousemove\", this.onMouseMove);\r\n      this.domElement.ownerDocument.removeEventListener(\"pointerlockchange\", this.onPointerlockChange);\r\n      this.domElement.ownerDocument.removeEventListener(\"pointerlockerror\", this.onPointerlockError);\r\n    });\r\n    __publicField(this, \"dispose\", () => {\r\n      this.disconnect();\r\n    });\r\n    __publicField(this, \"getObject\", () => {\r\n      return this.camera;\r\n    });\r\n    __publicField(this, \"direction\", new Vector3(0, 0, -1));\r\n    __publicField(this, \"getDirection\", (v) => {\r\n      return v.copy(this.direction).applyQuaternion(this.camera.quaternion);\r\n    });\r\n    __publicField(this, \"moveForward\", (distance) => {\r\n      _vector.setFromMatrixColumn(this.camera.matrix, 0);\r\n      _vector.crossVectors(this.camera.up, _vector);\r\n      this.camera.position.addScaledVector(_vector, distance);\r\n    });\r\n    __publicField(this, \"moveRight\", (distance) => {\r\n      _vector.setFromMatrixColumn(this.camera.matrix, 0);\r\n      this.camera.position.addScaledVector(_vector, distance);\r\n    });\r\n    __publicField(this, \"lock\", () => {\r\n      if (this.domElement)\r\n        this.domElement.requestPointerLock();\r\n    });\r\n    __publicField(this, \"unlock\", () => {\r\n      if (this.domElement)\r\n        this.domElement.ownerDocument.exitPointerLock();\r\n    });\r\n    this.camera = camera;\r\n    this.domElement = domElement;\r\n    this.isLocked = false;\r\n    this.minPolarAngle = 0;\r\n    this.maxPolarAngle = Math.PI;\r\n    this.pointerSpeed = 1;\r\n    if (domElement)\r\n      this.connect(domElement);\r\n  }\r\n}\r\nexport {\r\n  PointerLockControls\r\n};\r\n", "var __defProp = Object.defineProperty;\r\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\r\nvar __publicField = (obj, key, value) => {\r\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\r\n  return value;\r\n};\r\nimport { Matrix4, EventDispatcher, Vector2, Vector3, Quaternion, Group, EllipseCurve, BufferGeometry, PerspectiveCamera, MathUtils, OrthographicCamera, Box3, Sphere, GridHelper, LineBasicMaterial, Line, Raycaster } from \"three\";\r\nconst STATE = {\r\n  IDLE: Symbol(),\r\n  ROTATE: Symbol(),\r\n  PAN: Symbol(),\r\n  SCALE: Symbol(),\r\n  FOV: Symbol(),\r\n  FOCUS: Symbol(),\r\n  ZROTATE: Symbol(),\r\n  TOUCH_MULTI: Symbol(),\r\n  ANIMATION_FOCUS: Symbol(),\r\n  ANIMATION_ROTATE: Symbol()\r\n};\r\nconst INPUT = {\r\n  NONE: Symbol(),\r\n  ONE_FINGER: Symbol(),\r\n  ONE_FINGER_SWITCHED: Symbol(),\r\n  TWO_FINGER: Symbol(),\r\n  MULT_FINGER: Symbol(),\r\n  CURSOR: Symbol()\r\n};\r\nconst _center = {\r\n  x: 0,\r\n  y: 0\r\n};\r\nconst _transformation = {\r\n  camera: /* @__PURE__ */ new Matrix4(),\r\n  gizmos: /* @__PURE__ */ new Matrix4()\r\n};\r\nconst _changeEvent = { type: \"change\" };\r\nconst _startEvent = { type: \"start\" };\r\nconst _endEvent = { type: \"end\" };\r\nclass ArcballControls extends EventDispatcher {\r\n  constructor(camera, domElement = null, scene = null) {\r\n    super();\r\n    __publicField(this, \"camera\");\r\n    __publicField(this, \"domElement\");\r\n    __publicField(this, \"scene\");\r\n    __publicField(this, \"mouseActions\");\r\n    __publicField(this, \"_mouseOp\");\r\n    __publicField(this, \"_v2_1\");\r\n    __publicField(this, \"_v3_1\");\r\n    __publicField(this, \"_v3_2\");\r\n    __publicField(this, \"_m4_1\");\r\n    __publicField(this, \"_m4_2\");\r\n    __publicField(this, \"_quat\");\r\n    __publicField(this, \"_translationMatrix\");\r\n    __publicField(this, \"_rotationMatrix\");\r\n    __publicField(this, \"_scaleMatrix\");\r\n    __publicField(this, \"_rotationAxis\");\r\n    __publicField(this, \"_cameraMatrixState\");\r\n    __publicField(this, \"_cameraProjectionState\");\r\n    __publicField(this, \"_fovState\");\r\n    __publicField(this, \"_upState\");\r\n    __publicField(this, \"_zoomState\");\r\n    __publicField(this, \"_nearPos\");\r\n    __publicField(this, \"_farPos\");\r\n    __publicField(this, \"_gizmoMatrixState\");\r\n    __publicField(this, \"_up0\");\r\n    __publicField(this, \"_zoom0\");\r\n    __publicField(this, \"_fov0\");\r\n    __publicField(this, \"_initialNear\");\r\n    __publicField(this, \"_nearPos0\");\r\n    __publicField(this, \"_initialFar\");\r\n    __publicField(this, \"_farPos0\");\r\n    __publicField(this, \"_cameraMatrixState0\");\r\n    __publicField(this, \"_gizmoMatrixState0\");\r\n    __publicField(this, \"_button\");\r\n    __publicField(this, \"_touchStart\");\r\n    __publicField(this, \"_touchCurrent\");\r\n    __publicField(this, \"_input\");\r\n    __publicField(this, \"_switchSensibility\");\r\n    __publicField(this, \"_startFingerDistance\");\r\n    __publicField(this, \"_currentFingerDistance\");\r\n    __publicField(this, \"_startFingerRotation\");\r\n    __publicField(this, \"_currentFingerRotation\");\r\n    __publicField(this, \"_devPxRatio\");\r\n    __publicField(this, \"_downValid\");\r\n    __publicField(this, \"_nclicks\");\r\n    __publicField(this, \"_downEvents\");\r\n    __publicField(this, \"_clickStart\");\r\n    __publicField(this, \"_maxDownTime\");\r\n    __publicField(this, \"_maxInterval\");\r\n    __publicField(this, \"_posThreshold\");\r\n    __publicField(this, \"_movementThreshold\");\r\n    __publicField(this, \"_currentCursorPosition\");\r\n    __publicField(this, \"_startCursorPosition\");\r\n    __publicField(this, \"_grid\");\r\n    __publicField(this, \"_gridPosition\");\r\n    __publicField(this, \"_gizmos\");\r\n    __publicField(this, \"_curvePts\");\r\n    __publicField(this, \"_timeStart\");\r\n    __publicField(this, \"_animationId\");\r\n    __publicField(this, \"focusAnimationTime\");\r\n    __publicField(this, \"_timePrev\");\r\n    __publicField(this, \"_timeCurrent\");\r\n    __publicField(this, \"_anglePrev\");\r\n    __publicField(this, \"_angleCurrent\");\r\n    __publicField(this, \"_cursorPosPrev\");\r\n    __publicField(this, \"_cursorPosCurr\");\r\n    __publicField(this, \"_wPrev\");\r\n    __publicField(this, \"_wCurr\");\r\n    __publicField(this, \"adjustNearFar\");\r\n    __publicField(this, \"scaleFactor\");\r\n    __publicField(this, \"dampingFactor\");\r\n    __publicField(this, \"wMax\");\r\n    __publicField(this, \"enableAnimations\");\r\n    __publicField(this, \"enableGrid\");\r\n    __publicField(this, \"cursorZoom\");\r\n    __publicField(this, \"minFov\");\r\n    __publicField(this, \"maxFov\");\r\n    __publicField(this, \"enabled\");\r\n    __publicField(this, \"enablePan\");\r\n    __publicField(this, \"enableRotate\");\r\n    __publicField(this, \"enableZoom\");\r\n    __publicField(this, \"minDistance\");\r\n    __publicField(this, \"maxDistance\");\r\n    __publicField(this, \"minZoom\");\r\n    __publicField(this, \"maxZoom\");\r\n    __publicField(this, \"target\");\r\n    __publicField(this, \"_currentTarget\");\r\n    __publicField(this, \"_tbRadius\");\r\n    __publicField(this, \"_state\");\r\n    //listeners\r\n    __publicField(this, \"onWindowResize\", () => {\r\n      const scale = (this._gizmos.scale.x + this._gizmos.scale.y + this._gizmos.scale.z) / 3;\r\n      if (this.camera) {\r\n        const tbRadius = this.calculateTbRadius(this.camera);\r\n        if (tbRadius !== void 0) {\r\n          this._tbRadius = tbRadius;\r\n        }\r\n      }\r\n      const newRadius = this._tbRadius / scale;\r\n      const curve = new EllipseCurve(0, 0, newRadius, newRadius);\r\n      const points = curve.getPoints(this._curvePts);\r\n      const curveGeometry = new BufferGeometry().setFromPoints(points);\r\n      for (const gizmo in this._gizmos.children) {\r\n        const child = this._gizmos.children[gizmo];\r\n        child.geometry = curveGeometry;\r\n      }\r\n      this.dispatchEvent(_changeEvent);\r\n    });\r\n    __publicField(this, \"onContextMenu\", (event) => {\r\n      if (!this.enabled) {\r\n        return;\r\n      }\r\n      for (let i = 0; i < this.mouseActions.length; i++) {\r\n        if (this.mouseActions[i].mouse == 2) {\r\n          event.preventDefault();\r\n          break;\r\n        }\r\n      }\r\n    });\r\n    __publicField(this, \"onPointerCancel\", () => {\r\n      this._touchStart.splice(0, this._touchStart.length);\r\n      this._touchCurrent.splice(0, this._touchCurrent.length);\r\n      this._input = INPUT.NONE;\r\n    });\r\n    __publicField(this, \"onPointerDown\", (event) => {\r\n      if (event.button == 0 && event.isPrimary) {\r\n        this._downValid = true;\r\n        this._downEvents.push(event);\r\n      } else {\r\n        this._downValid = false;\r\n      }\r\n      if (event.pointerType == \"touch\" && this._input != INPUT.CURSOR) {\r\n        this._touchStart.push(event);\r\n        this._touchCurrent.push(event);\r\n        switch (this._input) {\r\n          case INPUT.NONE:\r\n            this._input = INPUT.ONE_FINGER;\r\n            this.onSinglePanStart(event, \"ROTATE\");\r\n            window.addEventListener(\"pointermove\", this.onPointerMove);\r\n            window.addEventListener(\"pointerup\", this.onPointerUp);\r\n            break;\r\n          case INPUT.ONE_FINGER:\r\n          case INPUT.ONE_FINGER_SWITCHED:\r\n            this._input = INPUT.TWO_FINGER;\r\n            this.onRotateStart();\r\n            this.onPinchStart();\r\n            this.onDoublePanStart();\r\n            break;\r\n          case INPUT.TWO_FINGER:\r\n            this._input = INPUT.MULT_FINGER;\r\n            this.onTriplePanStart();\r\n            break;\r\n        }\r\n      } else if (event.pointerType != \"touch\" && this._input == INPUT.NONE) {\r\n        let modifier = null;\r\n        if (event.ctrlKey || event.metaKey) {\r\n          modifier = \"CTRL\";\r\n        } else if (event.shiftKey) {\r\n          modifier = \"SHIFT\";\r\n        }\r\n        this._mouseOp = this.getOpFromAction(event.button, modifier);\r\n        if (this._mouseOp) {\r\n          window.addEventListener(\"pointermove\", this.onPointerMove);\r\n          window.addEventListener(\"pointerup\", this.onPointerUp);\r\n          this._input = INPUT.CURSOR;\r\n          this._button = event.button;\r\n          this.onSinglePanStart(event, this._mouseOp);\r\n        }\r\n      }\r\n    });\r\n    __publicField(this, \"onPointerMove\", (event) => {\r\n      if (event.pointerType == \"touch\" && this._input != INPUT.CURSOR) {\r\n        switch (this._input) {\r\n          case INPUT.ONE_FINGER:\r\n            this.updateTouchEvent(event);\r\n            this.onSinglePanMove(event, STATE.ROTATE);\r\n            break;\r\n          case INPUT.ONE_FINGER_SWITCHED:\r\n            const movement = this.calculatePointersDistance(this._touchCurrent[0], event) * this._devPxRatio;\r\n            if (movement >= this._switchSensibility) {\r\n              this._input = INPUT.ONE_FINGER;\r\n              this.updateTouchEvent(event);\r\n              this.onSinglePanStart(event, \"ROTATE\");\r\n              break;\r\n            }\r\n            break;\r\n          case INPUT.TWO_FINGER:\r\n            this.updateTouchEvent(event);\r\n            this.onRotateMove();\r\n            this.onPinchMove();\r\n            this.onDoublePanMove();\r\n            break;\r\n          case INPUT.MULT_FINGER:\r\n            this.updateTouchEvent(event);\r\n            this.onTriplePanMove();\r\n            break;\r\n        }\r\n      } else if (event.pointerType != \"touch\" && this._input == INPUT.CURSOR) {\r\n        let modifier = null;\r\n        if (event.ctrlKey || event.metaKey) {\r\n          modifier = \"CTRL\";\r\n        } else if (event.shiftKey) {\r\n          modifier = \"SHIFT\";\r\n        }\r\n        const mouseOpState = this.getOpStateFromAction(this._button, modifier);\r\n        if (mouseOpState) {\r\n          this.onSinglePanMove(event, mouseOpState);\r\n        }\r\n      }\r\n      if (this._downValid) {\r\n        const movement = this.calculatePointersDistance(this._downEvents[this._downEvents.length - 1], event) * this._devPxRatio;\r\n        if (movement > this._movementThreshold) {\r\n          this._downValid = false;\r\n        }\r\n      }\r\n    });\r\n    __publicField(this, \"onPointerUp\", (event) => {\r\n      if (event.pointerType == \"touch\" && this._input != INPUT.CURSOR) {\r\n        const nTouch = this._touchCurrent.length;\r\n        for (let i = 0; i < nTouch; i++) {\r\n          if (this._touchCurrent[i].pointerId == event.pointerId) {\r\n            this._touchCurrent.splice(i, 1);\r\n            this._touchStart.splice(i, 1);\r\n            break;\r\n          }\r\n        }\r\n        switch (this._input) {\r\n          case INPUT.ONE_FINGER:\r\n          case INPUT.ONE_FINGER_SWITCHED:\r\n            window.removeEventListener(\"pointermove\", this.onPointerMove);\r\n            window.removeEventListener(\"pointerup\", this.onPointerUp);\r\n            this._input = INPUT.NONE;\r\n            this.onSinglePanEnd();\r\n            break;\r\n          case INPUT.TWO_FINGER:\r\n            this.onDoublePanEnd();\r\n            this.onPinchEnd();\r\n            this.onRotateEnd();\r\n            this._input = INPUT.ONE_FINGER_SWITCHED;\r\n            break;\r\n          case INPUT.MULT_FINGER:\r\n            if (this._touchCurrent.length == 0) {\r\n              window.removeEventListener(\"pointermove\", this.onPointerMove);\r\n              window.removeEventListener(\"pointerup\", this.onPointerUp);\r\n              this._input = INPUT.NONE;\r\n              this.onTriplePanEnd();\r\n            }\r\n            break;\r\n        }\r\n      } else if (event.pointerType != \"touch\" && this._input == INPUT.CURSOR) {\r\n        window.removeEventListener(\"pointermove\", this.onPointerMove);\r\n        window.removeEventListener(\"pointerup\", this.onPointerUp);\r\n        this._input = INPUT.NONE;\r\n        this.onSinglePanEnd();\r\n        this._button = -1;\r\n      }\r\n      if (event.isPrimary) {\r\n        if (this._downValid) {\r\n          const downTime = event.timeStamp - this._downEvents[this._downEvents.length - 1].timeStamp;\r\n          if (downTime <= this._maxDownTime) {\r\n            if (this._nclicks == 0) {\r\n              this._nclicks = 1;\r\n              this._clickStart = performance.now();\r\n            } else {\r\n              const clickInterval = event.timeStamp - this._clickStart;\r\n              const movement = this.calculatePointersDistance(this._downEvents[1], this._downEvents[0]) * this._devPxRatio;\r\n              if (clickInterval <= this._maxInterval && movement <= this._posThreshold) {\r\n                this._nclicks = 0;\r\n                this._downEvents.splice(0, this._downEvents.length);\r\n                this.onDoubleTap(event);\r\n              } else {\r\n                this._nclicks = 1;\r\n                this._downEvents.shift();\r\n                this._clickStart = performance.now();\r\n              }\r\n            }\r\n          } else {\r\n            this._downValid = false;\r\n            this._nclicks = 0;\r\n            this._downEvents.splice(0, this._downEvents.length);\r\n          }\r\n        } else {\r\n          this._nclicks = 0;\r\n          this._downEvents.splice(0, this._downEvents.length);\r\n        }\r\n      }\r\n    });\r\n    __publicField(this, \"onWheel\", (event) => {\r\n      var _a, _b;\r\n      if (this.enabled && this.enableZoom && this.domElement) {\r\n        let modifier = null;\r\n        if (event.ctrlKey || event.metaKey) {\r\n          modifier = \"CTRL\";\r\n        } else if (event.shiftKey) {\r\n          modifier = \"SHIFT\";\r\n        }\r\n        const mouseOp = this.getOpFromAction(\"WHEEL\", modifier);\r\n        if (mouseOp) {\r\n          event.preventDefault();\r\n          this.dispatchEvent(_startEvent);\r\n          const notchDeltaY = 125;\r\n          let sgn = event.deltaY / notchDeltaY;\r\n          let size = 1;\r\n          if (sgn > 0) {\r\n            size = 1 / this.scaleFactor;\r\n          } else if (sgn < 0) {\r\n            size = this.scaleFactor;\r\n          }\r\n          switch (mouseOp) {\r\n            case \"ZOOM\":\r\n              this.updateTbState(STATE.SCALE, true);\r\n              if (sgn > 0) {\r\n                size = 1 / Math.pow(this.scaleFactor, sgn);\r\n              } else if (sgn < 0) {\r\n                size = Math.pow(this.scaleFactor, -sgn);\r\n              }\r\n              if (this.cursorZoom && this.enablePan) {\r\n                let scalePoint;\r\n                if (this.camera instanceof OrthographicCamera) {\r\n                  scalePoint = (_a = this.unprojectOnTbPlane(this.camera, event.clientX, event.clientY, this.domElement)) == null ? void 0 : _a.applyQuaternion(this.camera.quaternion).multiplyScalar(1 / this.camera.zoom).add(this._gizmos.position);\r\n                }\r\n                if (this.camera instanceof PerspectiveCamera) {\r\n                  scalePoint = (_b = this.unprojectOnTbPlane(this.camera, event.clientX, event.clientY, this.domElement)) == null ? void 0 : _b.applyQuaternion(this.camera.quaternion).add(this._gizmos.position);\r\n                }\r\n                if (scalePoint !== void 0)\r\n                  this.applyTransformMatrix(this.applyScale(size, scalePoint));\r\n              } else {\r\n                this.applyTransformMatrix(this.applyScale(size, this._gizmos.position));\r\n              }\r\n              if (this._grid) {\r\n                this.disposeGrid();\r\n                this.drawGrid();\r\n              }\r\n              this.updateTbState(STATE.IDLE, false);\r\n              this.dispatchEvent(_changeEvent);\r\n              this.dispatchEvent(_endEvent);\r\n              break;\r\n            case \"FOV\":\r\n              if (this.camera instanceof PerspectiveCamera) {\r\n                this.updateTbState(STATE.FOV, true);\r\n                if (event.deltaX != 0) {\r\n                  sgn = event.deltaX / notchDeltaY;\r\n                  size = 1;\r\n                  if (sgn > 0) {\r\n                    size = 1 / Math.pow(this.scaleFactor, sgn);\r\n                  } else if (sgn < 0) {\r\n                    size = Math.pow(this.scaleFactor, -sgn);\r\n                  }\r\n                }\r\n                this._v3_1.setFromMatrixPosition(this._cameraMatrixState);\r\n                const x = this._v3_1.distanceTo(this._gizmos.position);\r\n                let xNew = x / size;\r\n                xNew = MathUtils.clamp(xNew, this.minDistance, this.maxDistance);\r\n                const y = x * Math.tan(MathUtils.DEG2RAD * this.camera.fov * 0.5);\r\n                let newFov = MathUtils.RAD2DEG * (Math.atan(y / xNew) * 2);\r\n                if (newFov > this.maxFov) {\r\n                  newFov = this.maxFov;\r\n                } else if (newFov < this.minFov) {\r\n                  newFov = this.minFov;\r\n                }\r\n                const newDistance = y / Math.tan(MathUtils.DEG2RAD * (newFov / 2));\r\n                size = x / newDistance;\r\n                this.setFov(newFov);\r\n                this.applyTransformMatrix(this.applyScale(size, this._gizmos.position, false));\r\n              }\r\n              if (this._grid) {\r\n                this.disposeGrid();\r\n                this.drawGrid();\r\n              }\r\n              this.updateTbState(STATE.IDLE, false);\r\n              this.dispatchEvent(_changeEvent);\r\n              this.dispatchEvent(_endEvent);\r\n              break;\r\n          }\r\n        }\r\n      }\r\n    });\r\n    __publicField(this, \"onSinglePanStart\", (event, operation) => {\r\n      if (this.enabled && this.domElement) {\r\n        this.dispatchEvent(_startEvent);\r\n        this.setCenter(event.clientX, event.clientY);\r\n        switch (operation) {\r\n          case \"PAN\":\r\n            if (!this.enablePan)\r\n              return;\r\n            if (this._animationId != -1) {\r\n              cancelAnimationFrame(this._animationId);\r\n              this._animationId = -1;\r\n              this._timeStart = -1;\r\n              this.activateGizmos(false);\r\n              this.dispatchEvent(_changeEvent);\r\n            }\r\n            if (this.camera) {\r\n              this.updateTbState(STATE.PAN, true);\r\n              const rayDir = this.unprojectOnTbPlane(this.camera, _center.x, _center.y, this.domElement);\r\n              if (rayDir !== void 0) {\r\n                this._startCursorPosition.copy(rayDir);\r\n              }\r\n              if (this.enableGrid) {\r\n                this.drawGrid();\r\n                this.dispatchEvent(_changeEvent);\r\n              }\r\n            }\r\n            break;\r\n          case \"ROTATE\":\r\n            if (!this.enableRotate)\r\n              return;\r\n            if (this._animationId != -1) {\r\n              cancelAnimationFrame(this._animationId);\r\n              this._animationId = -1;\r\n              this._timeStart = -1;\r\n            }\r\n            if (this.camera) {\r\n              this.updateTbState(STATE.ROTATE, true);\r\n              const rayDir = this.unprojectOnTbSurface(this.camera, _center.x, _center.y, this.domElement, this._tbRadius);\r\n              if (rayDir !== void 0) {\r\n                this._startCursorPosition.copy(rayDir);\r\n              }\r\n              this.activateGizmos(true);\r\n              if (this.enableAnimations) {\r\n                this._timePrev = this._timeCurrent = performance.now();\r\n                this._angleCurrent = this._anglePrev = 0;\r\n                this._cursorPosPrev.copy(this._startCursorPosition);\r\n                this._cursorPosCurr.copy(this._cursorPosPrev);\r\n                this._wCurr = 0;\r\n                this._wPrev = this._wCurr;\r\n              }\r\n            }\r\n            this.dispatchEvent(_changeEvent);\r\n            break;\r\n          case \"FOV\":\r\n            if (!this.enableZoom)\r\n              return;\r\n            if (this.camera instanceof PerspectiveCamera) {\r\n              if (this._animationId != -1) {\r\n                cancelAnimationFrame(this._animationId);\r\n                this._animationId = -1;\r\n                this._timeStart = -1;\r\n                this.activateGizmos(false);\r\n                this.dispatchEvent(_changeEvent);\r\n              }\r\n              this.updateTbState(STATE.FOV, true);\r\n              this._startCursorPosition.setY(this.getCursorNDC(_center.x, _center.y, this.domElement).y * 0.5);\r\n              this._currentCursorPosition.copy(this._startCursorPosition);\r\n            }\r\n            break;\r\n          case \"ZOOM\":\r\n            if (!this.enableZoom)\r\n              return;\r\n            if (this._animationId != -1) {\r\n              cancelAnimationFrame(this._animationId);\r\n              this._animationId = -1;\r\n              this._timeStart = -1;\r\n              this.activateGizmos(false);\r\n              this.dispatchEvent(_changeEvent);\r\n            }\r\n            this.updateTbState(STATE.SCALE, true);\r\n            this._startCursorPosition.setY(this.getCursorNDC(_center.x, _center.y, this.domElement).y * 0.5);\r\n            this._currentCursorPosition.copy(this._startCursorPosition);\r\n            break;\r\n        }\r\n      }\r\n    });\r\n    __publicField(this, \"onSinglePanMove\", (event, opState) => {\r\n      if (this.enabled && this.domElement) {\r\n        const restart = opState != this._state;\r\n        this.setCenter(event.clientX, event.clientY);\r\n        switch (opState) {\r\n          case STATE.PAN:\r\n            if (this.enablePan && this.camera) {\r\n              if (restart) {\r\n                this.dispatchEvent(_endEvent);\r\n                this.dispatchEvent(_startEvent);\r\n                this.updateTbState(opState, true);\r\n                const rayDir = this.unprojectOnTbPlane(this.camera, _center.x, _center.y, this.domElement);\r\n                if (rayDir !== void 0) {\r\n                  this._startCursorPosition.copy(rayDir);\r\n                }\r\n                if (this.enableGrid) {\r\n                  this.drawGrid();\r\n                }\r\n                this.activateGizmos(false);\r\n              } else {\r\n                const rayDir = this.unprojectOnTbPlane(this.camera, _center.x, _center.y, this.domElement);\r\n                if (rayDir !== void 0) {\r\n                  this._currentCursorPosition.copy(rayDir);\r\n                }\r\n                this.applyTransformMatrix(this.pan(this._startCursorPosition, this._currentCursorPosition));\r\n              }\r\n            }\r\n            break;\r\n          case STATE.ROTATE:\r\n            if (this.enableRotate && this.camera) {\r\n              if (restart) {\r\n                this.dispatchEvent(_endEvent);\r\n                this.dispatchEvent(_startEvent);\r\n                this.updateTbState(opState, true);\r\n                const rayDir = this.unprojectOnTbSurface(\r\n                  this.camera,\r\n                  _center.x,\r\n                  _center.y,\r\n                  this.domElement,\r\n                  this._tbRadius\r\n                );\r\n                if (rayDir !== void 0) {\r\n                  this._startCursorPosition.copy(rayDir);\r\n                }\r\n                if (this.enableGrid) {\r\n                  this.disposeGrid();\r\n                }\r\n                this.activateGizmos(true);\r\n              } else {\r\n                const rayDir = this.unprojectOnTbSurface(\r\n                  this.camera,\r\n                  _center.x,\r\n                  _center.y,\r\n                  this.domElement,\r\n                  this._tbRadius\r\n                );\r\n                if (rayDir !== void 0) {\r\n                  this._currentCursorPosition.copy(rayDir);\r\n                }\r\n                const distance = this._startCursorPosition.distanceTo(this._currentCursorPosition);\r\n                const angle = this._startCursorPosition.angleTo(this._currentCursorPosition);\r\n                const amount = Math.max(distance / this._tbRadius, angle);\r\n                this.applyTransformMatrix(\r\n                  this.rotate(this.calculateRotationAxis(this._startCursorPosition, this._currentCursorPosition), amount)\r\n                );\r\n                if (this.enableAnimations) {\r\n                  this._timePrev = this._timeCurrent;\r\n                  this._timeCurrent = performance.now();\r\n                  this._anglePrev = this._angleCurrent;\r\n                  this._angleCurrent = amount;\r\n                  this._cursorPosPrev.copy(this._cursorPosCurr);\r\n                  this._cursorPosCurr.copy(this._currentCursorPosition);\r\n                  this._wPrev = this._wCurr;\r\n                  this._wCurr = this.calculateAngularSpeed(\r\n                    this._anglePrev,\r\n                    this._angleCurrent,\r\n                    this._timePrev,\r\n                    this._timeCurrent\r\n                  );\r\n                }\r\n              }\r\n            }\r\n            break;\r\n          case STATE.SCALE:\r\n            if (this.enableZoom) {\r\n              if (restart) {\r\n                this.dispatchEvent(_endEvent);\r\n                this.dispatchEvent(_startEvent);\r\n                this.updateTbState(opState, true);\r\n                this._startCursorPosition.setY(this.getCursorNDC(_center.x, _center.y, this.domElement).y * 0.5);\r\n                this._currentCursorPosition.copy(this._startCursorPosition);\r\n                if (this.enableGrid) {\r\n                  this.disposeGrid();\r\n                }\r\n                this.activateGizmos(false);\r\n              } else {\r\n                const screenNotches = 8;\r\n                this._currentCursorPosition.setY(this.getCursorNDC(_center.x, _center.y, this.domElement).y * 0.5);\r\n                const movement = this._currentCursorPosition.y - this._startCursorPosition.y;\r\n                let size = 1;\r\n                if (movement < 0) {\r\n                  size = 1 / Math.pow(this.scaleFactor, -movement * screenNotches);\r\n                } else if (movement > 0) {\r\n                  size = Math.pow(this.scaleFactor, movement * screenNotches);\r\n                }\r\n                this.applyTransformMatrix(this.applyScale(size, this._gizmos.position));\r\n              }\r\n            }\r\n            break;\r\n          case STATE.FOV:\r\n            if (this.enableZoom && this.camera instanceof PerspectiveCamera) {\r\n              if (restart) {\r\n                this.dispatchEvent(_endEvent);\r\n                this.dispatchEvent(_startEvent);\r\n                this.updateTbState(opState, true);\r\n                this._startCursorPosition.setY(this.getCursorNDC(_center.x, _center.y, this.domElement).y * 0.5);\r\n                this._currentCursorPosition.copy(this._startCursorPosition);\r\n                if (this.enableGrid) {\r\n                  this.disposeGrid();\r\n                }\r\n                this.activateGizmos(false);\r\n              } else {\r\n                const screenNotches = 8;\r\n                this._currentCursorPosition.setY(this.getCursorNDC(_center.x, _center.y, this.domElement).y * 0.5);\r\n                const movement = this._currentCursorPosition.y - this._startCursorPosition.y;\r\n                let size = 1;\r\n                if (movement < 0) {\r\n                  size = 1 / Math.pow(this.scaleFactor, -movement * screenNotches);\r\n                } else if (movement > 0) {\r\n                  size = Math.pow(this.scaleFactor, movement * screenNotches);\r\n                }\r\n                this._v3_1.setFromMatrixPosition(this._cameraMatrixState);\r\n                const x = this._v3_1.distanceTo(this._gizmos.position);\r\n                let xNew = x / size;\r\n                xNew = MathUtils.clamp(xNew, this.minDistance, this.maxDistance);\r\n                const y = x * Math.tan(MathUtils.DEG2RAD * this._fovState * 0.5);\r\n                let newFov = MathUtils.RAD2DEG * (Math.atan(y / xNew) * 2);\r\n                newFov = MathUtils.clamp(newFov, this.minFov, this.maxFov);\r\n                const newDistance = y / Math.tan(MathUtils.DEG2RAD * (newFov / 2));\r\n                size = x / newDistance;\r\n                this._v3_2.setFromMatrixPosition(this._gizmoMatrixState);\r\n                this.setFov(newFov);\r\n                this.applyTransformMatrix(this.applyScale(size, this._v3_2, false));\r\n                const direction = this._gizmos.position.clone().sub(this.camera.position).normalize().multiplyScalar(newDistance / x);\r\n                this._m4_1.makeTranslation(direction.x, direction.y, direction.z);\r\n              }\r\n            }\r\n            break;\r\n        }\r\n        this.dispatchEvent(_changeEvent);\r\n      }\r\n    });\r\n    __publicField(this, \"onSinglePanEnd\", () => {\r\n      if (this._state == STATE.ROTATE) {\r\n        if (!this.enableRotate) {\r\n          return;\r\n        }\r\n        if (this.enableAnimations) {\r\n          const deltaTime = performance.now() - this._timeCurrent;\r\n          if (deltaTime < 120) {\r\n            const w = Math.abs((this._wPrev + this._wCurr) / 2);\r\n            const self = this;\r\n            this._animationId = window.requestAnimationFrame(function(t) {\r\n              self.updateTbState(STATE.ANIMATION_ROTATE, true);\r\n              const rotationAxis = self.calculateRotationAxis(self._cursorPosPrev, self._cursorPosCurr);\r\n              self.onRotationAnim(t, rotationAxis, Math.min(w, self.wMax));\r\n            });\r\n          } else {\r\n            this.updateTbState(STATE.IDLE, false);\r\n            this.activateGizmos(false);\r\n            this.dispatchEvent(_changeEvent);\r\n          }\r\n        } else {\r\n          this.updateTbState(STATE.IDLE, false);\r\n          this.activateGizmos(false);\r\n          this.dispatchEvent(_changeEvent);\r\n        }\r\n      } else if (this._state == STATE.PAN || this._state == STATE.IDLE) {\r\n        this.updateTbState(STATE.IDLE, false);\r\n        if (this.enableGrid) {\r\n          this.disposeGrid();\r\n        }\r\n        this.activateGizmos(false);\r\n        this.dispatchEvent(_changeEvent);\r\n      }\r\n      this.dispatchEvent(_endEvent);\r\n    });\r\n    __publicField(this, \"onDoubleTap\", (event) => {\r\n      if (this.enabled && this.enablePan && this.scene && this.camera && this.domElement) {\r\n        this.dispatchEvent(_startEvent);\r\n        this.setCenter(event.clientX, event.clientY);\r\n        const hitP = this.unprojectOnObj(this.getCursorNDC(_center.x, _center.y, this.domElement), this.camera);\r\n        if (hitP && this.enableAnimations) {\r\n          const self = this;\r\n          if (this._animationId != -1) {\r\n            window.cancelAnimationFrame(this._animationId);\r\n          }\r\n          this._timeStart = -1;\r\n          this._animationId = window.requestAnimationFrame(function(t) {\r\n            self.updateTbState(STATE.ANIMATION_FOCUS, true);\r\n            self.onFocusAnim(t, hitP, self._cameraMatrixState, self._gizmoMatrixState);\r\n          });\r\n        } else if (hitP && !this.enableAnimations) {\r\n          this.updateTbState(STATE.FOCUS, true);\r\n          this.focus(hitP, this.scaleFactor);\r\n          this.updateTbState(STATE.IDLE, false);\r\n          this.dispatchEvent(_changeEvent);\r\n        }\r\n      }\r\n      this.dispatchEvent(_endEvent);\r\n    });\r\n    __publicField(this, \"onDoublePanStart\", () => {\r\n      if (this.enabled && this.enablePan && this.camera && this.domElement) {\r\n        this.dispatchEvent(_startEvent);\r\n        this.updateTbState(STATE.PAN, true);\r\n        this.setCenter(\r\n          (this._touchCurrent[0].clientX + this._touchCurrent[1].clientX) / 2,\r\n          (this._touchCurrent[0].clientY + this._touchCurrent[1].clientY) / 2\r\n        );\r\n        const rayDir = this.unprojectOnTbPlane(this.camera, _center.x, _center.y, this.domElement, true);\r\n        if (rayDir !== void 0) {\r\n          this._startCursorPosition.copy(rayDir);\r\n        }\r\n        this._currentCursorPosition.copy(this._startCursorPosition);\r\n        this.activateGizmos(false);\r\n      }\r\n    });\r\n    __publicField(this, \"onDoublePanMove\", () => {\r\n      if (this.enabled && this.enablePan && this.camera && this.domElement) {\r\n        this.setCenter(\r\n          (this._touchCurrent[0].clientX + this._touchCurrent[1].clientX) / 2,\r\n          (this._touchCurrent[0].clientY + this._touchCurrent[1].clientY) / 2\r\n        );\r\n        if (this._state != STATE.PAN) {\r\n          this.updateTbState(STATE.PAN, true);\r\n          this._startCursorPosition.copy(this._currentCursorPosition);\r\n        }\r\n        const rayDir = this.unprojectOnTbPlane(this.camera, _center.x, _center.y, this.domElement, true);\r\n        if (rayDir !== void 0)\r\n          this._currentCursorPosition.copy(rayDir);\r\n        this.applyTransformMatrix(this.pan(this._startCursorPosition, this._currentCursorPosition, true));\r\n        this.dispatchEvent(_changeEvent);\r\n      }\r\n    });\r\n    __publicField(this, \"onDoublePanEnd\", () => {\r\n      this.updateTbState(STATE.IDLE, false);\r\n      this.dispatchEvent(_endEvent);\r\n    });\r\n    __publicField(this, \"onRotateStart\", () => {\r\n      var _a;\r\n      if (this.enabled && this.enableRotate) {\r\n        this.dispatchEvent(_startEvent);\r\n        this.updateTbState(STATE.ZROTATE, true);\r\n        this._startFingerRotation = this.getAngle(this._touchCurrent[1], this._touchCurrent[0]) + this.getAngle(this._touchStart[1], this._touchStart[0]);\r\n        this._currentFingerRotation = this._startFingerRotation;\r\n        (_a = this.camera) == null ? void 0 : _a.getWorldDirection(this._rotationAxis);\r\n        if (!this.enablePan && !this.enableZoom) {\r\n          this.activateGizmos(true);\r\n        }\r\n      }\r\n    });\r\n    __publicField(this, \"onRotateMove\", () => {\r\n      var _a;\r\n      if (this.enabled && this.enableRotate && this.camera && this.domElement) {\r\n        this.setCenter(\r\n          (this._touchCurrent[0].clientX + this._touchCurrent[1].clientX) / 2,\r\n          (this._touchCurrent[0].clientY + this._touchCurrent[1].clientY) / 2\r\n        );\r\n        let rotationPoint;\r\n        if (this._state != STATE.ZROTATE) {\r\n          this.updateTbState(STATE.ZROTATE, true);\r\n          this._startFingerRotation = this._currentFingerRotation;\r\n        }\r\n        this._currentFingerRotation = this.getAngle(this._touchCurrent[1], this._touchCurrent[0]) + this.getAngle(this._touchStart[1], this._touchStart[0]);\r\n        if (!this.enablePan) {\r\n          rotationPoint = new Vector3().setFromMatrixPosition(this._gizmoMatrixState);\r\n        } else if (this.camera) {\r\n          this._v3_2.setFromMatrixPosition(this._gizmoMatrixState);\r\n          rotationPoint = (_a = this.unprojectOnTbPlane(this.camera, _center.x, _center.y, this.domElement)) == null ? void 0 : _a.applyQuaternion(this.camera.quaternion).multiplyScalar(1 / this.camera.zoom).add(this._v3_2);\r\n        }\r\n        const amount = MathUtils.DEG2RAD * (this._startFingerRotation - this._currentFingerRotation);\r\n        if (rotationPoint !== void 0) {\r\n          this.applyTransformMatrix(this.zRotate(rotationPoint, amount));\r\n        }\r\n        this.dispatchEvent(_changeEvent);\r\n      }\r\n    });\r\n    __publicField(this, \"onRotateEnd\", () => {\r\n      this.updateTbState(STATE.IDLE, false);\r\n      this.activateGizmos(false);\r\n      this.dispatchEvent(_endEvent);\r\n    });\r\n    __publicField(this, \"onPinchStart\", () => {\r\n      if (this.enabled && this.enableZoom) {\r\n        this.dispatchEvent(_startEvent);\r\n        this.updateTbState(STATE.SCALE, true);\r\n        this._startFingerDistance = this.calculatePointersDistance(this._touchCurrent[0], this._touchCurrent[1]);\r\n        this._currentFingerDistance = this._startFingerDistance;\r\n        this.activateGizmos(false);\r\n      }\r\n    });\r\n    __publicField(this, \"onPinchMove\", () => {\r\n      var _a, _b;\r\n      if (this.enabled && this.enableZoom && this.domElement) {\r\n        this.setCenter(\r\n          (this._touchCurrent[0].clientX + this._touchCurrent[1].clientX) / 2,\r\n          (this._touchCurrent[0].clientY + this._touchCurrent[1].clientY) / 2\r\n        );\r\n        const minDistance = 12;\r\n        if (this._state != STATE.SCALE) {\r\n          this._startFingerDistance = this._currentFingerDistance;\r\n          this.updateTbState(STATE.SCALE, true);\r\n        }\r\n        this._currentFingerDistance = Math.max(\r\n          this.calculatePointersDistance(this._touchCurrent[0], this._touchCurrent[1]),\r\n          minDistance * this._devPxRatio\r\n        );\r\n        const amount = this._currentFingerDistance / this._startFingerDistance;\r\n        let scalePoint;\r\n        if (!this.enablePan) {\r\n          scalePoint = this._gizmos.position;\r\n        } else {\r\n          if (this.camera instanceof OrthographicCamera) {\r\n            scalePoint = (_a = this.unprojectOnTbPlane(this.camera, _center.x, _center.y, this.domElement)) == null ? void 0 : _a.applyQuaternion(this.camera.quaternion).multiplyScalar(1 / this.camera.zoom).add(this._gizmos.position);\r\n          } else if (this.camera instanceof PerspectiveCamera) {\r\n            scalePoint = (_b = this.unprojectOnTbPlane(this.camera, _center.x, _center.y, this.domElement)) == null ? void 0 : _b.applyQuaternion(this.camera.quaternion).add(this._gizmos.position);\r\n          }\r\n        }\r\n        if (scalePoint !== void 0) {\r\n          this.applyTransformMatrix(this.applyScale(amount, scalePoint));\r\n        }\r\n        this.dispatchEvent(_changeEvent);\r\n      }\r\n    });\r\n    __publicField(this, \"onPinchEnd\", () => {\r\n      this.updateTbState(STATE.IDLE, false);\r\n      this.dispatchEvent(_endEvent);\r\n    });\r\n    __publicField(this, \"onTriplePanStart\", () => {\r\n      if (this.enabled && this.enableZoom && this.domElement) {\r\n        this.dispatchEvent(_startEvent);\r\n        this.updateTbState(STATE.SCALE, true);\r\n        let clientX = 0;\r\n        let clientY = 0;\r\n        const nFingers = this._touchCurrent.length;\r\n        for (let i = 0; i < nFingers; i++) {\r\n          clientX += this._touchCurrent[i].clientX;\r\n          clientY += this._touchCurrent[i].clientY;\r\n        }\r\n        this.setCenter(clientX / nFingers, clientY / nFingers);\r\n        this._startCursorPosition.setY(this.getCursorNDC(_center.x, _center.y, this.domElement).y * 0.5);\r\n        this._currentCursorPosition.copy(this._startCursorPosition);\r\n      }\r\n    });\r\n    __publicField(this, \"onTriplePanMove\", () => {\r\n      if (this.enabled && this.enableZoom && this.camera && this.domElement) {\r\n        let clientX = 0;\r\n        let clientY = 0;\r\n        const nFingers = this._touchCurrent.length;\r\n        for (let i = 0; i < nFingers; i++) {\r\n          clientX += this._touchCurrent[i].clientX;\r\n          clientY += this._touchCurrent[i].clientY;\r\n        }\r\n        this.setCenter(clientX / nFingers, clientY / nFingers);\r\n        const screenNotches = 8;\r\n        this._currentCursorPosition.setY(this.getCursorNDC(_center.x, _center.y, this.domElement).y * 0.5);\r\n        const movement = this._currentCursorPosition.y - this._startCursorPosition.y;\r\n        let size = 1;\r\n        if (movement < 0) {\r\n          size = 1 / Math.pow(this.scaleFactor, -movement * screenNotches);\r\n        } else if (movement > 0) {\r\n          size = Math.pow(this.scaleFactor, movement * screenNotches);\r\n        }\r\n        this._v3_1.setFromMatrixPosition(this._cameraMatrixState);\r\n        const x = this._v3_1.distanceTo(this._gizmos.position);\r\n        let xNew = x / size;\r\n        xNew = MathUtils.clamp(xNew, this.minDistance, this.maxDistance);\r\n        const y = x * Math.tan(MathUtils.DEG2RAD * this._fovState * 0.5);\r\n        let newFov = MathUtils.RAD2DEG * (Math.atan(y / xNew) * 2);\r\n        newFov = MathUtils.clamp(newFov, this.minFov, this.maxFov);\r\n        const newDistance = y / Math.tan(MathUtils.DEG2RAD * (newFov / 2));\r\n        size = x / newDistance;\r\n        this._v3_2.setFromMatrixPosition(this._gizmoMatrixState);\r\n        this.setFov(newFov);\r\n        this.applyTransformMatrix(this.applyScale(size, this._v3_2, false));\r\n        const direction = this._gizmos.position.clone().sub(this.camera.position).normalize().multiplyScalar(newDistance / x);\r\n        this._m4_1.makeTranslation(direction.x, direction.y, direction.z);\r\n        this.dispatchEvent(_changeEvent);\r\n      }\r\n    });\r\n    __publicField(this, \"onTriplePanEnd\", () => {\r\n      this.updateTbState(STATE.IDLE, false);\r\n      this.dispatchEvent(_endEvent);\r\n    });\r\n    /**\r\n     * Set _center's x/y coordinates\r\n     * @param {Number} clientX\r\n     * @param {Number} clientY\r\n     */\r\n    __publicField(this, \"setCenter\", (clientX, clientY) => {\r\n      _center.x = clientX;\r\n      _center.y = clientY;\r\n    });\r\n    /**\r\n     * Set default mouse actions\r\n     */\r\n    __publicField(this, \"initializeMouseActions\", () => {\r\n      this.setMouseAction(\"PAN\", 0, \"CTRL\");\r\n      this.setMouseAction(\"PAN\", 2);\r\n      this.setMouseAction(\"ROTATE\", 0);\r\n      this.setMouseAction(\"ZOOM\", \"WHEEL\");\r\n      this.setMouseAction(\"ZOOM\", 1);\r\n      this.setMouseAction(\"FOV\", \"WHEEL\", \"SHIFT\");\r\n      this.setMouseAction(\"FOV\", 1, \"SHIFT\");\r\n    });\r\n    /**\r\n     * Set a new mouse action by specifying the operation to be performed and a mouse/key combination. In case of conflict, replaces the existing one\r\n     * @param {String} operation The operation to be performed ('PAN', 'ROTATE', 'ZOOM', 'FOV)\r\n     * @param {*} mouse A mouse button (0, 1, 2) or 'WHEEL' for wheel notches\r\n     * @param {*} key The keyboard modifier ('CTRL', 'SHIFT') or null if key is not needed\r\n     * @returns {Boolean} True if the mouse action has been successfully added, false otherwise\r\n     */\r\n    __publicField(this, \"setMouseAction\", (operation, mouse, key = null) => {\r\n      const operationInput = [\"PAN\", \"ROTATE\", \"ZOOM\", \"FOV\"];\r\n      const mouseInput = [0, 1, 2, \"WHEEL\"];\r\n      const keyInput = [\"CTRL\", \"SHIFT\", null];\r\n      let state;\r\n      if (!operationInput.includes(operation) || !mouseInput.includes(mouse) || !keyInput.includes(key)) {\r\n        return false;\r\n      }\r\n      if (mouse == \"WHEEL\") {\r\n        if (operation != \"ZOOM\" && operation != \"FOV\") {\r\n          return false;\r\n        }\r\n      }\r\n      switch (operation) {\r\n        case \"PAN\":\r\n          state = STATE.PAN;\r\n          break;\r\n        case \"ROTATE\":\r\n          state = STATE.ROTATE;\r\n          break;\r\n        case \"ZOOM\":\r\n          state = STATE.SCALE;\r\n          break;\r\n        case \"FOV\":\r\n          state = STATE.FOV;\r\n          break;\r\n      }\r\n      const action = {\r\n        operation,\r\n        mouse,\r\n        key,\r\n        state\r\n      };\r\n      for (let i = 0; i < this.mouseActions.length; i++) {\r\n        if (this.mouseActions[i].mouse == action.mouse && this.mouseActions[i].key == action.key) {\r\n          this.mouseActions.splice(i, 1, action);\r\n          return true;\r\n        }\r\n      }\r\n      this.mouseActions.push(action);\r\n      return true;\r\n    });\r\n    /**\r\n     * Return the operation associated to a mouse/keyboard combination\r\n     * @param {*} mouse A mouse button (0, 1, 2) or 'WHEEL' for wheel notches\r\n     * @param {*} key The keyboard modifier ('CTRL', 'SHIFT') or null if key is not needed\r\n     * @returns The operation if it has been found, null otherwise\r\n     */\r\n    __publicField(this, \"getOpFromAction\", (mouse, key) => {\r\n      let action;\r\n      for (let i = 0; i < this.mouseActions.length; i++) {\r\n        action = this.mouseActions[i];\r\n        if (action.mouse == mouse && action.key == key) {\r\n          return action.operation;\r\n        }\r\n      }\r\n      if (key) {\r\n        for (let i = 0; i < this.mouseActions.length; i++) {\r\n          action = this.mouseActions[i];\r\n          if (action.mouse == mouse && action.key == null) {\r\n            return action.operation;\r\n          }\r\n        }\r\n      }\r\n      return null;\r\n    });\r\n    /**\r\n     * Get the operation associated to mouse and key combination and returns the corresponding FSA state\r\n     * @param {Number} mouse Mouse button\r\n     * @param {String} key Keyboard modifier\r\n     * @returns The FSA state obtained from the operation associated to mouse/keyboard combination\r\n     */\r\n    __publicField(this, \"getOpStateFromAction\", (mouse, key) => {\r\n      let action;\r\n      for (let i = 0; i < this.mouseActions.length; i++) {\r\n        action = this.mouseActions[i];\r\n        if (action.mouse == mouse && action.key == key) {\r\n          return action.state;\r\n        }\r\n      }\r\n      if (key) {\r\n        for (let i = 0; i < this.mouseActions.length; i++) {\r\n          action = this.mouseActions[i];\r\n          if (action.mouse == mouse && action.key == null) {\r\n            return action.state;\r\n          }\r\n        }\r\n      }\r\n      return null;\r\n    });\r\n    /**\r\n     * Calculate the angle between two pointers\r\n     * @param {PointerEvent} p1\r\n     * @param {PointerEvent} p2\r\n     * @returns {Number} The angle between two pointers in degrees\r\n     */\r\n    __publicField(this, \"getAngle\", (p1, p2) => {\r\n      return Math.atan2(p2.clientY - p1.clientY, p2.clientX - p1.clientX) * 180 / Math.PI;\r\n    });\r\n    /**\r\n     * Update a PointerEvent inside current pointerevents array\r\n     * @param {PointerEvent} event\r\n     */\r\n    __publicField(this, \"updateTouchEvent\", (event) => {\r\n      for (let i = 0; i < this._touchCurrent.length; i++) {\r\n        if (this._touchCurrent[i].pointerId == event.pointerId) {\r\n          this._touchCurrent.splice(i, 1, event);\r\n          break;\r\n        }\r\n      }\r\n    });\r\n    /**\r\n     * Calculate the angular speed\r\n     * @param {Number} p0 Position at t0\r\n     * @param {Number} p1 Position at t1\r\n     * @param {Number} t0 Initial time in milliseconds\r\n     * @param {Number} t1 Ending time in milliseconds\r\n     */\r\n    __publicField(this, \"calculateAngularSpeed\", (p0, p1, t0, t1) => {\r\n      const s = p1 - p0;\r\n      const t = (t1 - t0) / 1e3;\r\n      if (t == 0) {\r\n        return 0;\r\n      }\r\n      return s / t;\r\n    });\r\n    /**\r\n     * Calculate the distance between two pointers\r\n     * @param {PointerEvent} p0 The first pointer\r\n     * @param {PointerEvent} p1 The second pointer\r\n     * @returns {number} The distance between the two pointers\r\n     */\r\n    __publicField(this, \"calculatePointersDistance\", (p0, p1) => {\r\n      return Math.sqrt(Math.pow(p1.clientX - p0.clientX, 2) + Math.pow(p1.clientY - p0.clientY, 2));\r\n    });\r\n    /**\r\n     * Calculate the rotation axis as the vector perpendicular between two vectors\r\n     * @param {Vector3} vec1 The first vector\r\n     * @param {Vector3} vec2 The second vector\r\n     * @returns {Vector3} The normalized rotation axis\r\n     */\r\n    __publicField(this, \"calculateRotationAxis\", (vec1, vec2) => {\r\n      this._rotationMatrix.extractRotation(this._cameraMatrixState);\r\n      this._quat.setFromRotationMatrix(this._rotationMatrix);\r\n      this._rotationAxis.crossVectors(vec1, vec2).applyQuaternion(this._quat);\r\n      return this._rotationAxis.normalize().clone();\r\n    });\r\n    /**\r\n     * Calculate the trackball radius so that gizmo's diamater will be 2/3 of the minimum side of the camera frustum\r\n     * @param {Camera} camera\r\n     * @returns {Number} The trackball radius\r\n     */\r\n    __publicField(this, \"calculateTbRadius\", (camera) => {\r\n      const factor = 0.67;\r\n      const distance = camera.position.distanceTo(this._gizmos.position);\r\n      if (camera instanceof PerspectiveCamera) {\r\n        const halfFovV = MathUtils.DEG2RAD * camera.fov * 0.5;\r\n        const halfFovH = Math.atan(camera.aspect * Math.tan(halfFovV));\r\n        return Math.tan(Math.min(halfFovV, halfFovH)) * distance * factor;\r\n      } else if (camera instanceof OrthographicCamera) {\r\n        return Math.min(camera.top, camera.right) * factor;\r\n      }\r\n    });\r\n    /**\r\n     * Focus operation consist of positioning the point of interest in front of the camera and a slightly zoom in\r\n     * @param {Vector3} point The point of interest\r\n     * @param {Number} size Scale factor\r\n     * @param {Number} amount Amount of operation to be completed (used for focus animations, default is complete full operation)\r\n     */\r\n    __publicField(this, \"focus\", (point, size, amount = 1) => {\r\n      if (this.camera) {\r\n        const focusPoint = point.clone();\r\n        focusPoint.sub(this._gizmos.position).multiplyScalar(amount);\r\n        this._translationMatrix.makeTranslation(focusPoint.x, focusPoint.y, focusPoint.z);\r\n        const gizmoStateTemp = this._gizmoMatrixState.clone();\r\n        this._gizmoMatrixState.premultiply(this._translationMatrix);\r\n        this._gizmoMatrixState.decompose(this._gizmos.position, this._gizmos.quaternion, this._gizmos.scale);\r\n        const cameraStateTemp = this._cameraMatrixState.clone();\r\n        this._cameraMatrixState.premultiply(this._translationMatrix);\r\n        this._cameraMatrixState.decompose(this.camera.position, this.camera.quaternion, this.camera.scale);\r\n        if (this.enableZoom) {\r\n          this.applyTransformMatrix(this.applyScale(size, this._gizmos.position));\r\n        }\r\n        this._gizmoMatrixState.copy(gizmoStateTemp);\r\n        this._cameraMatrixState.copy(cameraStateTemp);\r\n      }\r\n    });\r\n    /**\r\n     * Draw a grid and add it to the scene\r\n     */\r\n    __publicField(this, \"drawGrid\", () => {\r\n      if (this.scene) {\r\n        const color = 8947848;\r\n        const multiplier = 3;\r\n        let size, divisions, maxLength, tick;\r\n        if (this.camera instanceof OrthographicCamera) {\r\n          const width = this.camera.right - this.camera.left;\r\n          const height = this.camera.bottom - this.camera.top;\r\n          maxLength = Math.max(width, height);\r\n          tick = maxLength / 20;\r\n          size = maxLength / this.camera.zoom * multiplier;\r\n          divisions = size / tick * this.camera.zoom;\r\n        } else if (this.camera instanceof PerspectiveCamera) {\r\n          const distance = this.camera.position.distanceTo(this._gizmos.position);\r\n          const halfFovV = MathUtils.DEG2RAD * this.camera.fov * 0.5;\r\n          const halfFovH = Math.atan(this.camera.aspect * Math.tan(halfFovV));\r\n          maxLength = Math.tan(Math.max(halfFovV, halfFovH)) * distance * 2;\r\n          tick = maxLength / 20;\r\n          size = maxLength * multiplier;\r\n          divisions = size / tick;\r\n        }\r\n        if (this._grid == null && this.camera) {\r\n          this._grid = new GridHelper(size, divisions, color, color);\r\n          this._grid.position.copy(this._gizmos.position);\r\n          this._gridPosition.copy(this._grid.position);\r\n          this._grid.quaternion.copy(this.camera.quaternion);\r\n          this._grid.rotateX(Math.PI * 0.5);\r\n          this.scene.add(this._grid);\r\n        }\r\n      }\r\n    });\r\n    __publicField(this, \"connect\", (domElement) => {\r\n      if (domElement === document) {\r\n        console.error(\r\n          'THREE.ArcballControls: \"document\" should not be used as the target \"domElement\". Please use \"renderer.domElement\" instead.'\r\n        );\r\n      }\r\n      this.domElement = domElement;\r\n      this.domElement.style.touchAction = \"none\";\r\n      this.domElement.addEventListener(\"contextmenu\", this.onContextMenu);\r\n      this.domElement.addEventListener(\"pointerdown\", this.onPointerDown);\r\n      this.domElement.addEventListener(\"pointercancel\", this.onPointerCancel);\r\n      this.domElement.addEventListener(\"wheel\", this.onWheel);\r\n    });\r\n    /**\r\n     * Remove all listeners, stop animations and clean scene\r\n     */\r\n    __publicField(this, \"dispose\", () => {\r\n      var _a, _b, _c, _d, _e;\r\n      if (this._animationId != -1) {\r\n        window.cancelAnimationFrame(this._animationId);\r\n      }\r\n      (_a = this.domElement) == null ? void 0 : _a.removeEventListener(\"pointerdown\", this.onPointerDown);\r\n      (_b = this.domElement) == null ? void 0 : _b.removeEventListener(\"pointercancel\", this.onPointerCancel);\r\n      (_c = this.domElement) == null ? void 0 : _c.removeEventListener(\"wheel\", this.onWheel);\r\n      (_d = this.domElement) == null ? void 0 : _d.removeEventListener(\"contextmenu\", this.onContextMenu);\r\n      window.removeEventListener(\"pointermove\", this.onPointerMove);\r\n      window.removeEventListener(\"pointerup\", this.onPointerUp);\r\n      window.removeEventListener(\"resize\", this.onWindowResize);\r\n      (_e = this.scene) == null ? void 0 : _e.remove(this._gizmos);\r\n      this.disposeGrid();\r\n    });\r\n    /**\r\n     * remove the grid from the scene\r\n     */\r\n    __publicField(this, \"disposeGrid\", () => {\r\n      if (this._grid && this.scene) {\r\n        this.scene.remove(this._grid);\r\n        this._grid = null;\r\n      }\r\n    });\r\n    /**\r\n     * Compute the easing out cubic function for ease out effect in animation\r\n     * @param {Number} t The absolute progress of the animation in the bound of 0 (beginning of the) and 1 (ending of animation)\r\n     * @returns {Number} Result of easing out cubic at time t\r\n     */\r\n    __publicField(this, \"easeOutCubic\", (t) => {\r\n      return 1 - Math.pow(1 - t, 3);\r\n    });\r\n    /**\r\n     * Make rotation gizmos more or less visible\r\n     * @param {Boolean} isActive If true, make gizmos more visible\r\n     */\r\n    __publicField(this, \"activateGizmos\", (isActive) => {\r\n      for (const gizmo of this._gizmos.children) {\r\n        ;\r\n        gizmo.material.setValues({ opacity: isActive ? 1 : 0.6 });\r\n      }\r\n    });\r\n    /**\r\n     * Calculate the cursor position in NDC\r\n     * @param {number} x Cursor horizontal coordinate within the canvas\r\n     * @param {number} y Cursor vertical coordinate within the canvas\r\n     * @param {HTMLElement} canvas The canvas where the renderer draws its output\r\n     * @returns {Vector2} Cursor normalized position inside the canvas\r\n     */\r\n    __publicField(this, \"getCursorNDC\", (cursorX, cursorY, canvas) => {\r\n      const canvasRect = canvas.getBoundingClientRect();\r\n      this._v2_1.setX((cursorX - canvasRect.left) / canvasRect.width * 2 - 1);\r\n      this._v2_1.setY((canvasRect.bottom - cursorY) / canvasRect.height * 2 - 1);\r\n      return this._v2_1.clone();\r\n    });\r\n    /**\r\n     * Calculate the cursor position inside the canvas x/y coordinates with the origin being in the center of the canvas\r\n     * @param {Number} x Cursor horizontal coordinate within the canvas\r\n     * @param {Number} y Cursor vertical coordinate within the canvas\r\n     * @param {HTMLElement} canvas The canvas where the renderer draws its output\r\n     * @returns {Vector2} Cursor position inside the canvas\r\n     */\r\n    __publicField(this, \"getCursorPosition\", (cursorX, cursorY, canvas) => {\r\n      this._v2_1.copy(this.getCursorNDC(cursorX, cursorY, canvas));\r\n      if (this.camera instanceof OrthographicCamera) {\r\n        this._v2_1.x *= (this.camera.right - this.camera.left) * 0.5;\r\n        this._v2_1.y *= (this.camera.top - this.camera.bottom) * 0.5;\r\n      }\r\n      return this._v2_1.clone();\r\n    });\r\n    /**\r\n     * Set the camera to be controlled\r\n     * @param {Camera} camera The virtual camera to be controlled\r\n     */\r\n    __publicField(this, \"setCamera\", (camera) => {\r\n      if (camera) {\r\n        camera.lookAt(this.target);\r\n        camera.updateMatrix();\r\n        if (camera instanceof PerspectiveCamera) {\r\n          this._fov0 = camera.fov;\r\n          this._fovState = camera.fov;\r\n        }\r\n        this._cameraMatrixState0.copy(camera.matrix);\r\n        this._cameraMatrixState.copy(this._cameraMatrixState0);\r\n        this._cameraProjectionState.copy(camera.projectionMatrix);\r\n        this._zoom0 = camera.zoom;\r\n        this._zoomState = this._zoom0;\r\n        this._initialNear = camera.near;\r\n        this._nearPos0 = camera.position.distanceTo(this.target) - camera.near;\r\n        this._nearPos = this._initialNear;\r\n        this._initialFar = camera.far;\r\n        this._farPos0 = camera.position.distanceTo(this.target) - camera.far;\r\n        this._farPos = this._initialFar;\r\n        this._up0.copy(camera.up);\r\n        this._upState.copy(camera.up);\r\n        this.camera = camera;\r\n        this.camera.updateProjectionMatrix();\r\n        const tbRadius = this.calculateTbRadius(camera);\r\n        if (tbRadius !== void 0) {\r\n          this._tbRadius = tbRadius;\r\n        }\r\n        this.makeGizmos(this.target, this._tbRadius);\r\n      }\r\n    });\r\n    /**\r\n     * Creates the rotation gizmos matching trackball center and radius\r\n     * @param {Vector3} tbCenter The trackball center\r\n     * @param {number} tbRadius The trackball radius\r\n     */\r\n    __publicField(this, \"makeGizmos\", (tbCenter, tbRadius) => {\r\n      const curve = new EllipseCurve(0, 0, tbRadius, tbRadius);\r\n      const points = curve.getPoints(this._curvePts);\r\n      const curveGeometry = new BufferGeometry().setFromPoints(points);\r\n      const curveMaterialX = new LineBasicMaterial({ color: 16744576, fog: false, transparent: true, opacity: 0.6 });\r\n      const curveMaterialY = new LineBasicMaterial({ color: 8454016, fog: false, transparent: true, opacity: 0.6 });\r\n      const curveMaterialZ = new LineBasicMaterial({ color: 8421631, fog: false, transparent: true, opacity: 0.6 });\r\n      const gizmoX = new Line(curveGeometry, curveMaterialX);\r\n      const gizmoY = new Line(curveGeometry, curveMaterialY);\r\n      const gizmoZ = new Line(curveGeometry, curveMaterialZ);\r\n      const rotation = Math.PI * 0.5;\r\n      gizmoX.rotation.x = rotation;\r\n      gizmoY.rotation.y = rotation;\r\n      this._gizmoMatrixState0.identity().setPosition(tbCenter);\r\n      this._gizmoMatrixState.copy(this._gizmoMatrixState0);\r\n      if (this.camera && this.camera.zoom != 1) {\r\n        const size = 1 / this.camera.zoom;\r\n        this._scaleMatrix.makeScale(size, size, size);\r\n        this._translationMatrix.makeTranslation(-tbCenter.x, -tbCenter.y, -tbCenter.z);\r\n        this._gizmoMatrixState.premultiply(this._translationMatrix).premultiply(this._scaleMatrix);\r\n        this._translationMatrix.makeTranslation(tbCenter.x, tbCenter.y, tbCenter.z);\r\n        this._gizmoMatrixState.premultiply(this._translationMatrix);\r\n      }\r\n      this._gizmoMatrixState.decompose(this._gizmos.position, this._gizmos.quaternion, this._gizmos.scale);\r\n      this._gizmos.clear();\r\n      this._gizmos.add(gizmoX);\r\n      this._gizmos.add(gizmoY);\r\n      this._gizmos.add(gizmoZ);\r\n    });\r\n    /**\r\n     * Perform animation for focus operation\r\n     * @param {Number} time Instant in which this function is called as performance.now()\r\n     * @param {Vector3} point Point of interest for focus operation\r\n     * @param {Matrix4} cameraMatrix Camera matrix\r\n     * @param {Matrix4} gizmoMatrix Gizmos matrix\r\n     */\r\n    __publicField(this, \"onFocusAnim\", (time, point, cameraMatrix, gizmoMatrix) => {\r\n      if (this._timeStart == -1) {\r\n        this._timeStart = time;\r\n      }\r\n      if (this._state == STATE.ANIMATION_FOCUS) {\r\n        const deltaTime = time - this._timeStart;\r\n        const animTime = deltaTime / this.focusAnimationTime;\r\n        this._gizmoMatrixState.copy(gizmoMatrix);\r\n        if (animTime >= 1) {\r\n          this._gizmoMatrixState.decompose(this._gizmos.position, this._gizmos.quaternion, this._gizmos.scale);\r\n          this.focus(point, this.scaleFactor);\r\n          this._timeStart = -1;\r\n          this.updateTbState(STATE.IDLE, false);\r\n          this.activateGizmos(false);\r\n          this.dispatchEvent(_changeEvent);\r\n        } else {\r\n          const amount = this.easeOutCubic(animTime);\r\n          const size = 1 - amount + this.scaleFactor * amount;\r\n          this._gizmoMatrixState.decompose(this._gizmos.position, this._gizmos.quaternion, this._gizmos.scale);\r\n          this.focus(point, size, amount);\r\n          this.dispatchEvent(_changeEvent);\r\n          const self = this;\r\n          this._animationId = window.requestAnimationFrame(function(t) {\r\n            self.onFocusAnim(t, point, cameraMatrix, gizmoMatrix.clone());\r\n          });\r\n        }\r\n      } else {\r\n        this._animationId = -1;\r\n        this._timeStart = -1;\r\n      }\r\n    });\r\n    /**\r\n     * Perform animation for rotation operation\r\n     * @param {Number} time Instant in which this function is called as performance.now()\r\n     * @param {Vector3} rotationAxis Rotation axis\r\n     * @param {number} w0 Initial angular velocity\r\n     */\r\n    __publicField(this, \"onRotationAnim\", (time, rotationAxis, w0) => {\r\n      if (this._timeStart == -1) {\r\n        this._anglePrev = 0;\r\n        this._angleCurrent = 0;\r\n        this._timeStart = time;\r\n      }\r\n      if (this._state == STATE.ANIMATION_ROTATE) {\r\n        const deltaTime = (time - this._timeStart) / 1e3;\r\n        const w = w0 + -this.dampingFactor * deltaTime;\r\n        if (w > 0) {\r\n          this._angleCurrent = 0.5 * -this.dampingFactor * Math.pow(deltaTime, 2) + w0 * deltaTime + 0;\r\n          this.applyTransformMatrix(this.rotate(rotationAxis, this._angleCurrent));\r\n          this.dispatchEvent(_changeEvent);\r\n          const self = this;\r\n          this._animationId = window.requestAnimationFrame(function(t) {\r\n            self.onRotationAnim(t, rotationAxis, w0);\r\n          });\r\n        } else {\r\n          this._animationId = -1;\r\n          this._timeStart = -1;\r\n          this.updateTbState(STATE.IDLE, false);\r\n          this.activateGizmos(false);\r\n          this.dispatchEvent(_changeEvent);\r\n        }\r\n      } else {\r\n        this._animationId = -1;\r\n        this._timeStart = -1;\r\n        if (this._state != STATE.ROTATE) {\r\n          this.activateGizmos(false);\r\n          this.dispatchEvent(_changeEvent);\r\n        }\r\n      }\r\n    });\r\n    /**\r\n     * Perform pan operation moving camera between two points\r\n     * @param {Vector3} p0 Initial point\r\n     * @param {Vector3} p1 Ending point\r\n     * @param {Boolean} adjust If movement should be adjusted considering camera distance (Perspective only)\r\n     */\r\n    __publicField(this, \"pan\", (p0, p1, adjust = false) => {\r\n      if (this.camera) {\r\n        const movement = p0.clone().sub(p1);\r\n        if (this.camera instanceof OrthographicCamera) {\r\n          movement.multiplyScalar(1 / this.camera.zoom);\r\n        }\r\n        if (this.camera instanceof PerspectiveCamera && adjust) {\r\n          this._v3_1.setFromMatrixPosition(this._cameraMatrixState0);\r\n          this._v3_2.setFromMatrixPosition(this._gizmoMatrixState0);\r\n          const distanceFactor = this._v3_1.distanceTo(this._v3_2) / this.camera.position.distanceTo(this._gizmos.position);\r\n          movement.multiplyScalar(1 / distanceFactor);\r\n        }\r\n        this._v3_1.set(movement.x, movement.y, 0).applyQuaternion(this.camera.quaternion);\r\n        this._m4_1.makeTranslation(this._v3_1.x, this._v3_1.y, this._v3_1.z);\r\n        this.setTransformationMatrices(this._m4_1, this._m4_1);\r\n      }\r\n      return _transformation;\r\n    });\r\n    /**\r\n     * Reset trackball\r\n     */\r\n    __publicField(this, \"reset\", () => {\r\n      if (this.camera) {\r\n        this.camera.zoom = this._zoom0;\r\n        if (this.camera instanceof PerspectiveCamera) {\r\n          this.camera.fov = this._fov0;\r\n        }\r\n        this.camera.near = this._nearPos;\r\n        this.camera.far = this._farPos;\r\n        this._cameraMatrixState.copy(this._cameraMatrixState0);\r\n        this._cameraMatrixState.decompose(this.camera.position, this.camera.quaternion, this.camera.scale);\r\n        this.camera.up.copy(this._up0);\r\n        this.camera.updateMatrix();\r\n        this.camera.updateProjectionMatrix();\r\n        this._gizmoMatrixState.copy(this._gizmoMatrixState0);\r\n        this._gizmoMatrixState0.decompose(this._gizmos.position, this._gizmos.quaternion, this._gizmos.scale);\r\n        this._gizmos.updateMatrix();\r\n        const tbRadius = this.calculateTbRadius(this.camera);\r\n        if (tbRadius !== void 0) {\r\n          this._tbRadius = tbRadius;\r\n        }\r\n        this.makeGizmos(this._gizmos.position, this._tbRadius);\r\n        this.camera.lookAt(this._gizmos.position);\r\n        this.updateTbState(STATE.IDLE, false);\r\n        this.dispatchEvent(_changeEvent);\r\n      }\r\n    });\r\n    /**\r\n     * Rotate the camera around an axis passing by trackball's center\r\n     * @param {Vector3} axis Rotation axis\r\n     * @param {number} angle Angle in radians\r\n     * @returns {Object} Object with 'camera' field containing transformation matrix resulting from the operation to be applied to the camera\r\n     */\r\n    __publicField(this, \"rotate\", (axis, angle) => {\r\n      const point = this._gizmos.position;\r\n      this._translationMatrix.makeTranslation(-point.x, -point.y, -point.z);\r\n      this._rotationMatrix.makeRotationAxis(axis, -angle);\r\n      this._m4_1.makeTranslation(point.x, point.y, point.z);\r\n      this._m4_1.multiply(this._rotationMatrix);\r\n      this._m4_1.multiply(this._translationMatrix);\r\n      this.setTransformationMatrices(this._m4_1);\r\n      return _transformation;\r\n    });\r\n    __publicField(this, \"copyState\", () => {\r\n      if (this.camera) {\r\n        const state = JSON.stringify(\r\n          this.camera instanceof OrthographicCamera ? {\r\n            arcballState: {\r\n              cameraFar: this.camera.far,\r\n              cameraMatrix: this.camera.matrix,\r\n              cameraNear: this.camera.near,\r\n              cameraUp: this.camera.up,\r\n              cameraZoom: this.camera.zoom,\r\n              gizmoMatrix: this._gizmos.matrix\r\n            }\r\n          } : {\r\n            arcballState: {\r\n              cameraFar: this.camera.far,\r\n              cameraFov: this.camera.fov,\r\n              cameraMatrix: this.camera.matrix,\r\n              cameraNear: this.camera.near,\r\n              cameraUp: this.camera.up,\r\n              cameraZoom: this.camera.zoom,\r\n              gizmoMatrix: this._gizmos.matrix\r\n            }\r\n          }\r\n        );\r\n        navigator.clipboard.writeText(state);\r\n      }\r\n    });\r\n    __publicField(this, \"pasteState\", () => {\r\n      const self = this;\r\n      navigator.clipboard.readText().then(function resolved(value) {\r\n        self.setStateFromJSON(value);\r\n      });\r\n    });\r\n    /**\r\n     * Save the current state of the control. This can later be recovered with .reset\r\n     */\r\n    __publicField(this, \"saveState\", () => {\r\n      if (!this.camera)\r\n        return;\r\n      this._cameraMatrixState0.copy(this.camera.matrix);\r\n      this._gizmoMatrixState0.copy(this._gizmos.matrix);\r\n      this._nearPos = this.camera.near;\r\n      this._farPos = this.camera.far;\r\n      this._zoom0 = this.camera.zoom;\r\n      this._up0.copy(this.camera.up);\r\n      if (this.camera instanceof PerspectiveCamera) {\r\n        this._fov0 = this.camera.fov;\r\n      }\r\n    });\r\n    /**\r\n     * Perform uniform scale operation around a given point\r\n     * @param {Number} size Scale factor\r\n     * @param {Vector3} point Point around which scale\r\n     * @param {Boolean} scaleGizmos If gizmos should be scaled (Perspective only)\r\n     * @returns {Object} Object with 'camera' and 'gizmo' fields containing transformation matrices resulting from the operation to be applied to the camera and gizmos\r\n     */\r\n    __publicField(this, \"applyScale\", (size, point, scaleGizmos = true) => {\r\n      if (!this.camera)\r\n        return;\r\n      const scalePoint = point.clone();\r\n      let sizeInverse = 1 / size;\r\n      if (this.camera instanceof OrthographicCamera) {\r\n        this.camera.zoom = this._zoomState;\r\n        this.camera.zoom *= size;\r\n        if (this.camera.zoom > this.maxZoom) {\r\n          this.camera.zoom = this.maxZoom;\r\n          sizeInverse = this._zoomState / this.maxZoom;\r\n        } else if (this.camera.zoom < this.minZoom) {\r\n          this.camera.zoom = this.minZoom;\r\n          sizeInverse = this._zoomState / this.minZoom;\r\n        }\r\n        this.camera.updateProjectionMatrix();\r\n        this._v3_1.setFromMatrixPosition(this._gizmoMatrixState);\r\n        this._scaleMatrix.makeScale(sizeInverse, sizeInverse, sizeInverse);\r\n        this._translationMatrix.makeTranslation(-this._v3_1.x, -this._v3_1.y, -this._v3_1.z);\r\n        this._m4_2.makeTranslation(this._v3_1.x, this._v3_1.y, this._v3_1.z).multiply(this._scaleMatrix);\r\n        this._m4_2.multiply(this._translationMatrix);\r\n        scalePoint.sub(this._v3_1);\r\n        const amount = scalePoint.clone().multiplyScalar(sizeInverse);\r\n        scalePoint.sub(amount);\r\n        this._m4_1.makeTranslation(scalePoint.x, scalePoint.y, scalePoint.z);\r\n        this._m4_2.premultiply(this._m4_1);\r\n        this.setTransformationMatrices(this._m4_1, this._m4_2);\r\n        return _transformation;\r\n      }\r\n      if (this.camera instanceof PerspectiveCamera) {\r\n        this._v3_1.setFromMatrixPosition(this._cameraMatrixState);\r\n        this._v3_2.setFromMatrixPosition(this._gizmoMatrixState);\r\n        let distance = this._v3_1.distanceTo(scalePoint);\r\n        let amount = distance - distance * sizeInverse;\r\n        const newDistance = distance - amount;\r\n        if (newDistance < this.minDistance) {\r\n          sizeInverse = this.minDistance / distance;\r\n          amount = distance - distance * sizeInverse;\r\n        } else if (newDistance > this.maxDistance) {\r\n          sizeInverse = this.maxDistance / distance;\r\n          amount = distance - distance * sizeInverse;\r\n        }\r\n        let direction = scalePoint.clone().sub(this._v3_1).normalize().multiplyScalar(amount);\r\n        this._m4_1.makeTranslation(direction.x, direction.y, direction.z);\r\n        if (scaleGizmos) {\r\n          const pos = this._v3_2;\r\n          distance = pos.distanceTo(scalePoint);\r\n          amount = distance - distance * sizeInverse;\r\n          direction = scalePoint.clone().sub(this._v3_2).normalize().multiplyScalar(amount);\r\n          this._translationMatrix.makeTranslation(pos.x, pos.y, pos.z);\r\n          this._scaleMatrix.makeScale(sizeInverse, sizeInverse, sizeInverse);\r\n          this._m4_2.makeTranslation(direction.x, direction.y, direction.z).multiply(this._translationMatrix);\r\n          this._m4_2.multiply(this._scaleMatrix);\r\n          this._translationMatrix.makeTranslation(-pos.x, -pos.y, -pos.z);\r\n          this._m4_2.multiply(this._translationMatrix);\r\n          this.setTransformationMatrices(this._m4_1, this._m4_2);\r\n        } else {\r\n          this.setTransformationMatrices(this._m4_1);\r\n        }\r\n        return _transformation;\r\n      }\r\n    });\r\n    /**\r\n     * Set camera fov\r\n     * @param {Number} value fov to be setted\r\n     */\r\n    __publicField(this, \"setFov\", (value) => {\r\n      if (this.camera instanceof PerspectiveCamera) {\r\n        this.camera.fov = MathUtils.clamp(value, this.minFov, this.maxFov);\r\n        this.camera.updateProjectionMatrix();\r\n      }\r\n    });\r\n    /**\r\n     * Set the trackball's center point\r\n     * @param {Number} x X coordinate\r\n     * @param {Number} y Y coordinate\r\n     * @param {Number} z Z coordinate\r\n     */\r\n    __publicField(this, \"setTarget\", (x, y, z) => {\r\n      if (this.camera) {\r\n        this.target.set(x, y, z);\r\n        this._gizmos.position.set(x, y, z);\r\n        const tbRadius = this.calculateTbRadius(this.camera);\r\n        if (tbRadius !== void 0) {\r\n          this._tbRadius = tbRadius;\r\n        }\r\n        this.makeGizmos(this.target, this._tbRadius);\r\n        this.camera.lookAt(this.target);\r\n      }\r\n    });\r\n    /**\r\n     * Rotate camera around its direction axis passing by a given point by a given angle\r\n     * @param {Vector3} point The point where the rotation axis is passing trough\r\n     * @param {Number} angle Angle in radians\r\n     * @returns The computed transormation matix\r\n     */\r\n    __publicField(this, \"zRotate\", (point, angle) => {\r\n      this._rotationMatrix.makeRotationAxis(this._rotationAxis, angle);\r\n      this._translationMatrix.makeTranslation(-point.x, -point.y, -point.z);\r\n      this._m4_1.makeTranslation(point.x, point.y, point.z);\r\n      this._m4_1.multiply(this._rotationMatrix);\r\n      this._m4_1.multiply(this._translationMatrix);\r\n      this._v3_1.setFromMatrixPosition(this._gizmoMatrixState).sub(point);\r\n      this._v3_2.copy(this._v3_1).applyAxisAngle(this._rotationAxis, angle);\r\n      this._v3_2.sub(this._v3_1);\r\n      this._m4_2.makeTranslation(this._v3_2.x, this._v3_2.y, this._v3_2.z);\r\n      this.setTransformationMatrices(this._m4_1, this._m4_2);\r\n      return _transformation;\r\n    });\r\n    /**\r\n     * Unproject the cursor on the 3D object surface\r\n     * @param {Vector2} cursor Cursor coordinates in NDC\r\n     * @param {Camera} camera Virtual camera\r\n     * @returns {Vector3} The point of intersection with the model, if exist, null otherwise\r\n     */\r\n    __publicField(this, \"unprojectOnObj\", (cursor, camera) => {\r\n      if (!this.scene)\r\n        return null;\r\n      const raycaster = new Raycaster();\r\n      raycaster.near = camera.near;\r\n      raycaster.far = camera.far;\r\n      raycaster.setFromCamera(cursor, camera);\r\n      const intersect = raycaster.intersectObjects(this.scene.children, true);\r\n      for (let i = 0; i < intersect.length; i++) {\r\n        if (intersect[i].object.uuid != this._gizmos.uuid && intersect[i].face) {\r\n          return intersect[i].point.clone();\r\n        }\r\n      }\r\n      return null;\r\n    });\r\n    /**\r\n     * Unproject the cursor on the trackball surface\r\n     * @param {Camera} camera The virtual camera\r\n     * @param {Number} cursorX Cursor horizontal coordinate on screen\r\n     * @param {Number} cursorY Cursor vertical coordinate on screen\r\n     * @param {HTMLElement} canvas The canvas where the renderer draws its output\r\n     * @param {number} tbRadius The trackball radius\r\n     * @returns {Vector3} The unprojected point on the trackball surface\r\n     */\r\n    __publicField(this, \"unprojectOnTbSurface\", (camera, cursorX, cursorY, canvas, tbRadius) => {\r\n      if (camera instanceof OrthographicCamera) {\r\n        this._v2_1.copy(this.getCursorPosition(cursorX, cursorY, canvas));\r\n        this._v3_1.set(this._v2_1.x, this._v2_1.y, 0);\r\n        const x2 = Math.pow(this._v2_1.x, 2);\r\n        const y2 = Math.pow(this._v2_1.y, 2);\r\n        const r2 = Math.pow(this._tbRadius, 2);\r\n        if (x2 + y2 <= r2 * 0.5) {\r\n          this._v3_1.setZ(Math.sqrt(r2 - (x2 + y2)));\r\n        } else {\r\n          this._v3_1.setZ(r2 * 0.5 / Math.sqrt(x2 + y2));\r\n        }\r\n        return this._v3_1;\r\n      }\r\n      if (camera instanceof PerspectiveCamera) {\r\n        this._v2_1.copy(this.getCursorNDC(cursorX, cursorY, canvas));\r\n        this._v3_1.set(this._v2_1.x, this._v2_1.y, -1);\r\n        this._v3_1.applyMatrix4(camera.projectionMatrixInverse);\r\n        const rayDir = this._v3_1.clone().normalize();\r\n        const cameraGizmoDistance = camera.position.distanceTo(this._gizmos.position);\r\n        const radius2 = Math.pow(tbRadius, 2);\r\n        const h = this._v3_1.z;\r\n        const l = Math.sqrt(Math.pow(this._v3_1.x, 2) + Math.pow(this._v3_1.y, 2));\r\n        if (l == 0) {\r\n          rayDir.set(this._v3_1.x, this._v3_1.y, tbRadius);\r\n          return rayDir;\r\n        }\r\n        const m = h / l;\r\n        const q = cameraGizmoDistance;\r\n        let a = Math.pow(m, 2) + 1;\r\n        let b = 2 * m * q;\r\n        let c = Math.pow(q, 2) - radius2;\r\n        let delta = Math.pow(b, 2) - 4 * a * c;\r\n        if (delta >= 0) {\r\n          this._v2_1.setX((-b - Math.sqrt(delta)) / (2 * a));\r\n          this._v2_1.setY(m * this._v2_1.x + q);\r\n          const angle = MathUtils.RAD2DEG * this._v2_1.angle();\r\n          if (angle >= 45) {\r\n            const rayLength2 = Math.sqrt(Math.pow(this._v2_1.x, 2) + Math.pow(cameraGizmoDistance - this._v2_1.y, 2));\r\n            rayDir.multiplyScalar(rayLength2);\r\n            rayDir.z += cameraGizmoDistance;\r\n            return rayDir;\r\n          }\r\n        }\r\n        a = m;\r\n        b = q;\r\n        c = -radius2 * 0.5;\r\n        delta = Math.pow(b, 2) - 4 * a * c;\r\n        this._v2_1.setX((-b - Math.sqrt(delta)) / (2 * a));\r\n        this._v2_1.setY(m * this._v2_1.x + q);\r\n        const rayLength = Math.sqrt(Math.pow(this._v2_1.x, 2) + Math.pow(cameraGizmoDistance - this._v2_1.y, 2));\r\n        rayDir.multiplyScalar(rayLength);\r\n        rayDir.z += cameraGizmoDistance;\r\n        return rayDir;\r\n      }\r\n    });\r\n    /**\r\n     * Unproject the cursor on the plane passing through the center of the trackball orthogonal to the camera\r\n     * @param {Camera} camera The virtual camera\r\n     * @param {Number} cursorX Cursor horizontal coordinate on screen\r\n     * @param {Number} cursorY Cursor vertical coordinate on screen\r\n     * @param {HTMLElement} canvas The canvas where the renderer draws its output\r\n     * @param {Boolean} initialDistance If initial distance between camera and gizmos should be used for calculations instead of current (Perspective only)\r\n     * @returns {Vector3} The unprojected point on the trackball plane\r\n     */\r\n    __publicField(this, \"unprojectOnTbPlane\", (camera, cursorX, cursorY, canvas, initialDistance = false) => {\r\n      if (camera instanceof OrthographicCamera) {\r\n        this._v2_1.copy(this.getCursorPosition(cursorX, cursorY, canvas));\r\n        this._v3_1.set(this._v2_1.x, this._v2_1.y, 0);\r\n        return this._v3_1.clone();\r\n      }\r\n      if (camera instanceof PerspectiveCamera) {\r\n        this._v2_1.copy(this.getCursorNDC(cursorX, cursorY, canvas));\r\n        this._v3_1.set(this._v2_1.x, this._v2_1.y, -1);\r\n        this._v3_1.applyMatrix4(camera.projectionMatrixInverse);\r\n        const rayDir = this._v3_1.clone().normalize();\r\n        const h = this._v3_1.z;\r\n        const l = Math.sqrt(Math.pow(this._v3_1.x, 2) + Math.pow(this._v3_1.y, 2));\r\n        let cameraGizmoDistance;\r\n        if (initialDistance) {\r\n          cameraGizmoDistance = this._v3_1.setFromMatrixPosition(this._cameraMatrixState0).distanceTo(this._v3_2.setFromMatrixPosition(this._gizmoMatrixState0));\r\n        } else {\r\n          cameraGizmoDistance = camera.position.distanceTo(this._gizmos.position);\r\n        }\r\n        if (l == 0) {\r\n          rayDir.set(0, 0, 0);\r\n          return rayDir;\r\n        }\r\n        const m = h / l;\r\n        const q = cameraGizmoDistance;\r\n        const x = -q / m;\r\n        const rayLength = Math.sqrt(Math.pow(q, 2) + Math.pow(x, 2));\r\n        rayDir.multiplyScalar(rayLength);\r\n        rayDir.z = 0;\r\n        return rayDir;\r\n      }\r\n    });\r\n    /**\r\n     * Update camera and gizmos state\r\n     */\r\n    __publicField(this, \"updateMatrixState\", () => {\r\n      if (!this.camera)\r\n        return;\r\n      this._cameraMatrixState.copy(this.camera.matrix);\r\n      this._gizmoMatrixState.copy(this._gizmos.matrix);\r\n      if (this.camera instanceof OrthographicCamera) {\r\n        this._cameraProjectionState.copy(this.camera.projectionMatrix);\r\n        this.camera.updateProjectionMatrix();\r\n        this._zoomState = this.camera.zoom;\r\n      }\r\n      if (this.camera instanceof PerspectiveCamera) {\r\n        this._fovState = this.camera.fov;\r\n      }\r\n    });\r\n    /**\r\n     * Update the trackball FSA\r\n     * @param {STATE} newState New state of the FSA\r\n     * @param {Boolean} updateMatrices If matriices state should be updated\r\n     */\r\n    __publicField(this, \"updateTbState\", (newState, updateMatrices) => {\r\n      this._state = newState;\r\n      if (updateMatrices) {\r\n        this.updateMatrixState();\r\n      }\r\n    });\r\n    __publicField(this, \"update\", () => {\r\n      const EPS = 1e-6;\r\n      if (!this.target.equals(this._currentTarget) && this.camera) {\r\n        this._gizmos.position.set(this.target.x, this.target.y, this.target.z);\r\n        const tbRadius = this.calculateTbRadius(this.camera);\r\n        if (tbRadius !== void 0) {\r\n          this._tbRadius = tbRadius;\r\n        }\r\n        this.makeGizmos(this.target, this._tbRadius);\r\n        this._currentTarget.copy(this.target);\r\n      }\r\n      if (!this.camera)\r\n        return;\r\n      if (this.camera instanceof OrthographicCamera) {\r\n        if (this.camera.zoom > this.maxZoom || this.camera.zoom < this.minZoom) {\r\n          const newZoom = MathUtils.clamp(this.camera.zoom, this.minZoom, this.maxZoom);\r\n          this.applyTransformMatrix(this.applyScale(newZoom / this.camera.zoom, this._gizmos.position, true));\r\n        }\r\n      }\r\n      if (this.camera instanceof PerspectiveCamera) {\r\n        const distance = this.camera.position.distanceTo(this._gizmos.position);\r\n        if (distance > this.maxDistance + EPS || distance < this.minDistance - EPS) {\r\n          const newDistance = MathUtils.clamp(distance, this.minDistance, this.maxDistance);\r\n          this.applyTransformMatrix(this.applyScale(newDistance / distance, this._gizmos.position));\r\n          this.updateMatrixState();\r\n        }\r\n        if (this.camera.fov < this.minFov || this.camera.fov > this.maxFov) {\r\n          this.camera.fov = MathUtils.clamp(this.camera.fov, this.minFov, this.maxFov);\r\n          this.camera.updateProjectionMatrix();\r\n        }\r\n        const oldRadius = this._tbRadius;\r\n        const tbRadius = this.calculateTbRadius(this.camera);\r\n        if (tbRadius !== void 0) {\r\n          this._tbRadius = tbRadius;\r\n        }\r\n        if (oldRadius < this._tbRadius - EPS || oldRadius > this._tbRadius + EPS) {\r\n          const scale = (this._gizmos.scale.x + this._gizmos.scale.y + this._gizmos.scale.z) / 3;\r\n          const newRadius = this._tbRadius / scale;\r\n          const curve = new EllipseCurve(0, 0, newRadius, newRadius);\r\n          const points = curve.getPoints(this._curvePts);\r\n          const curveGeometry = new BufferGeometry().setFromPoints(points);\r\n          for (const gizmo in this._gizmos.children) {\r\n            const child = this._gizmos.children[gizmo];\r\n            child.geometry = curveGeometry;\r\n          }\r\n        }\r\n      }\r\n      this.camera.lookAt(this._gizmos.position);\r\n    });\r\n    __publicField(this, \"setStateFromJSON\", (json) => {\r\n      const state = JSON.parse(json);\r\n      if (state.arcballState && this.camera) {\r\n        this._cameraMatrixState.fromArray(state.arcballState.cameraMatrix.elements);\r\n        this._cameraMatrixState.decompose(this.camera.position, this.camera.quaternion, this.camera.scale);\r\n        this.camera.up.copy(state.arcballState.cameraUp);\r\n        this.camera.near = state.arcballState.cameraNear;\r\n        this.camera.far = state.arcballState.cameraFar;\r\n        this.camera.zoom = state.arcballState.cameraZoom;\r\n        if (this.camera instanceof PerspectiveCamera) {\r\n          this.camera.fov = state.arcballState.cameraFov;\r\n        }\r\n        this._gizmoMatrixState.fromArray(state.arcballState.gizmoMatrix.elements);\r\n        this._gizmoMatrixState.decompose(this._gizmos.position, this._gizmos.quaternion, this._gizmos.scale);\r\n        this.camera.updateMatrix();\r\n        this.camera.updateProjectionMatrix();\r\n        this._gizmos.updateMatrix();\r\n        const tbRadius = this.calculateTbRadius(this.camera);\r\n        if (tbRadius !== void 0) {\r\n          this._tbRadius = tbRadius;\r\n        }\r\n        const gizmoTmp = new Matrix4().copy(this._gizmoMatrixState0);\r\n        this.makeGizmos(this._gizmos.position, this._tbRadius);\r\n        this._gizmoMatrixState0.copy(gizmoTmp);\r\n        this.camera.lookAt(this._gizmos.position);\r\n        this.updateTbState(STATE.IDLE, false);\r\n        this.dispatchEvent(_changeEvent);\r\n      }\r\n    });\r\n    this.camera = null;\r\n    this.domElement = domElement;\r\n    this.scene = scene;\r\n    this.mouseActions = [];\r\n    this._mouseOp = null;\r\n    this._v2_1 = new Vector2();\r\n    this._v3_1 = new Vector3();\r\n    this._v3_2 = new Vector3();\r\n    this._m4_1 = new Matrix4();\r\n    this._m4_2 = new Matrix4();\r\n    this._quat = new Quaternion();\r\n    this._translationMatrix = new Matrix4();\r\n    this._rotationMatrix = new Matrix4();\r\n    this._scaleMatrix = new Matrix4();\r\n    this._rotationAxis = new Vector3();\r\n    this._cameraMatrixState = new Matrix4();\r\n    this._cameraProjectionState = new Matrix4();\r\n    this._fovState = 1;\r\n    this._upState = new Vector3();\r\n    this._zoomState = 1;\r\n    this._nearPos = 0;\r\n    this._farPos = 0;\r\n    this._gizmoMatrixState = new Matrix4();\r\n    this._up0 = new Vector3();\r\n    this._zoom0 = 1;\r\n    this._fov0 = 0;\r\n    this._initialNear = 0;\r\n    this._nearPos0 = 0;\r\n    this._initialFar = 0;\r\n    this._farPos0 = 0;\r\n    this._cameraMatrixState0 = new Matrix4();\r\n    this._gizmoMatrixState0 = new Matrix4();\r\n    this._button = -1;\r\n    this._touchStart = [];\r\n    this._touchCurrent = [];\r\n    this._input = INPUT.NONE;\r\n    this._switchSensibility = 32;\r\n    this._startFingerDistance = 0;\r\n    this._currentFingerDistance = 0;\r\n    this._startFingerRotation = 0;\r\n    this._currentFingerRotation = 0;\r\n    this._devPxRatio = 0;\r\n    this._downValid = true;\r\n    this._nclicks = 0;\r\n    this._downEvents = [];\r\n    this._clickStart = 0;\r\n    this._maxDownTime = 250;\r\n    this._maxInterval = 300;\r\n    this._posThreshold = 24;\r\n    this._movementThreshold = 24;\r\n    this._currentCursorPosition = new Vector3();\r\n    this._startCursorPosition = new Vector3();\r\n    this._grid = null;\r\n    this._gridPosition = new Vector3();\r\n    this._gizmos = new Group();\r\n    this._curvePts = 128;\r\n    this._timeStart = -1;\r\n    this._animationId = -1;\r\n    this.focusAnimationTime = 500;\r\n    this._timePrev = 0;\r\n    this._timeCurrent = 0;\r\n    this._anglePrev = 0;\r\n    this._angleCurrent = 0;\r\n    this._cursorPosPrev = new Vector3();\r\n    this._cursorPosCurr = new Vector3();\r\n    this._wPrev = 0;\r\n    this._wCurr = 0;\r\n    this.adjustNearFar = false;\r\n    this.scaleFactor = 1.1;\r\n    this.dampingFactor = 25;\r\n    this.wMax = 20;\r\n    this.enableAnimations = true;\r\n    this.enableGrid = false;\r\n    this.cursorZoom = false;\r\n    this.minFov = 5;\r\n    this.maxFov = 90;\r\n    this.enabled = true;\r\n    this.enablePan = true;\r\n    this.enableRotate = true;\r\n    this.enableZoom = true;\r\n    this.minDistance = 0;\r\n    this.maxDistance = Infinity;\r\n    this.minZoom = 0;\r\n    this.maxZoom = Infinity;\r\n    this.target = new Vector3(0, 0, 0);\r\n    this._currentTarget = new Vector3(0, 0, 0);\r\n    this._tbRadius = 1;\r\n    this._state = STATE.IDLE;\r\n    this.setCamera(camera);\r\n    if (this.scene) {\r\n      this.scene.add(this._gizmos);\r\n    }\r\n    this._devPxRatio = window.devicePixelRatio;\r\n    this.initializeMouseActions();\r\n    if (this.domElement)\r\n      this.connect(this.domElement);\r\n    window.addEventListener(\"resize\", this.onWindowResize);\r\n  }\r\n  /**\r\n   * Apply a transformation matrix, to the camera and gizmos\r\n   * @param {Object} transformation Object containing matrices to apply to camera and gizmos\r\n   */\r\n  applyTransformMatrix(transformation) {\r\n    if ((transformation == null ? void 0 : transformation.camera) && this.camera) {\r\n      this._m4_1.copy(this._cameraMatrixState).premultiply(transformation.camera);\r\n      this._m4_1.decompose(this.camera.position, this.camera.quaternion, this.camera.scale);\r\n      this.camera.updateMatrix();\r\n      if (this._state == STATE.ROTATE || this._state == STATE.ZROTATE || this._state == STATE.ANIMATION_ROTATE) {\r\n        this.camera.up.copy(this._upState).applyQuaternion(this.camera.quaternion);\r\n      }\r\n    }\r\n    if (transformation == null ? void 0 : transformation.gizmos) {\r\n      this._m4_1.copy(this._gizmoMatrixState).premultiply(transformation.gizmos);\r\n      this._m4_1.decompose(this._gizmos.position, this._gizmos.quaternion, this._gizmos.scale);\r\n      this._gizmos.updateMatrix();\r\n    }\r\n    if ((this._state == STATE.SCALE || this._state == STATE.FOCUS || this._state == STATE.ANIMATION_FOCUS) && this.camera) {\r\n      const tbRadius = this.calculateTbRadius(this.camera);\r\n      if (tbRadius !== void 0) {\r\n        this._tbRadius = tbRadius;\r\n      }\r\n      if (this.adjustNearFar) {\r\n        const cameraDistance = this.camera.position.distanceTo(this._gizmos.position);\r\n        const bb = new Box3();\r\n        bb.setFromObject(this._gizmos);\r\n        const sphere = new Sphere();\r\n        bb.getBoundingSphere(sphere);\r\n        const adjustedNearPosition = Math.max(this._nearPos0, sphere.radius + sphere.center.length());\r\n        const regularNearPosition = cameraDistance - this._initialNear;\r\n        const minNearPos = Math.min(adjustedNearPosition, regularNearPosition);\r\n        this.camera.near = cameraDistance - minNearPos;\r\n        const adjustedFarPosition = Math.min(this._farPos0, -sphere.radius + sphere.center.length());\r\n        const regularFarPosition = cameraDistance - this._initialFar;\r\n        const minFarPos = Math.min(adjustedFarPosition, regularFarPosition);\r\n        this.camera.far = cameraDistance - minFarPos;\r\n        this.camera.updateProjectionMatrix();\r\n      } else {\r\n        let update = false;\r\n        if (this.camera.near != this._initialNear) {\r\n          this.camera.near = this._initialNear;\r\n          update = true;\r\n        }\r\n        if (this.camera.far != this._initialFar) {\r\n          this.camera.far = this._initialFar;\r\n          update = true;\r\n        }\r\n        if (update) {\r\n          this.camera.updateProjectionMatrix();\r\n        }\r\n      }\r\n    }\r\n  }\r\n  /**\r\n   * Set gizmos visibility\r\n   * @param {Boolean} value Value of gizmos visibility\r\n   */\r\n  setGizmosVisible(value) {\r\n    this._gizmos.visible = value;\r\n    this.dispatchEvent(_changeEvent);\r\n  }\r\n  /**\r\n   * Set values in transformation object\r\n   * @param {Matrix4} camera Transformation to be applied to the camera\r\n   * @param {Matrix4} gizmos Transformation to be applied to gizmos\r\n   */\r\n  setTransformationMatrices(camera = null, gizmos = null) {\r\n    if (camera) {\r\n      if (_transformation.camera) {\r\n        _transformation.camera.copy(camera);\r\n      } else {\r\n        _transformation.camera = camera.clone();\r\n      }\r\n    } else {\r\n      _transformation.camera = null;\r\n    }\r\n    if (gizmos) {\r\n      if (_transformation.gizmos) {\r\n        _transformation.gizmos.copy(gizmos);\r\n      } else {\r\n        _transformation.gizmos = gizmos.clone();\r\n      }\r\n    } else {\r\n      _transformation.gizmos = null;\r\n    }\r\n  }\r\n}\r\nexport {\r\n  ArcballControls\r\n};\r\n", "var __defProp = Object.defineProperty;\r\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\r\nvar __publicField = (obj, key, value) => {\r\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\r\n  return value;\r\n};\r\nimport { OrthographicCamera, PlaneGeometry, Mesh } from \"three\";\r\nclass Pass {\r\n  constructor() {\r\n    // if set to true, the pass is processed by the composer\r\n    __publicField(this, \"enabled\", true);\r\n    // if set to true, the pass indicates to swap read and write buffer after rendering\r\n    __publicField(this, \"needsSwap\", true);\r\n    // if set to true, the pass clears its buffer before rendering\r\n    __publicField(this, \"clear\", false);\r\n    // if set to true, the result of the pass is rendered to screen. This is set automatically by EffectComposer.\r\n    __publicField(this, \"renderToScreen\", false);\r\n  }\r\n  setSize(width, height) {\r\n  }\r\n  render(renderer, writeBuffer, readBuffer, deltaTime, maskActive) {\r\n    console.error(\"THREE.Pass: .render() must be implemented in derived pass.\");\r\n  }\r\n}\r\nclass FullScreenQuad {\r\n  constructor(material) {\r\n    __publicField(this, \"camera\", new OrthographicCamera(-1, 1, 1, -1, 0, 1));\r\n    __publicField(this, \"geometry\", new PlaneGeometry(2, 2));\r\n    __publicField(this, \"mesh\");\r\n    this.mesh = new Mesh(this.geometry, material);\r\n  }\r\n  get material() {\r\n    return this.mesh.material;\r\n  }\r\n  set material(value) {\r\n    this.mesh.material = value;\r\n  }\r\n  dispose() {\r\n    this.mesh.geometry.dispose();\r\n  }\r\n  render(renderer) {\r\n    renderer.render(this.mesh, this.camera);\r\n  }\r\n}\r\nexport {\r\n  FullScreenQuad,\r\n  Pass\r\n};\r\n", "const HalftoneShader = {\r\n  uniforms: {\r\n    tDiffuse: { value: null },\r\n    shape: { value: 1 },\r\n    radius: { value: 4 },\r\n    rotateR: { value: Math.PI / 12 * 1 },\r\n    rotateG: { value: Math.PI / 12 * 2 },\r\n    rotateB: { value: Math.PI / 12 * 3 },\r\n    scatter: { value: 0 },\r\n    width: { value: 1 },\r\n    height: { value: 1 },\r\n    blending: { value: 1 },\r\n    blendingMode: { value: 1 },\r\n    greyscale: { value: false },\r\n    disable: { value: false }\r\n  },\r\n  vertexShader: [\r\n    \"varying vec2 vUV;\",\r\n    \"void main() {\",\r\n    \"\tvUV = uv;\",\r\n    \"\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\",\r\n    \"}\"\r\n  ].join(\"\\n\"),\r\n  fragmentShader: [\r\n    \"#define SQRT2_MINUS_ONE 0.41421356\",\r\n    \"#define SQRT2_HALF_MINUS_ONE 0.20710678\",\r\n    \"#define PI2 6.28318531\",\r\n    \"#define SHAPE_DOT 1\",\r\n    \"#define SHAPE_ELLIPSE 2\",\r\n    \"#define SHAPE_LINE 3\",\r\n    \"#define SHAPE_SQUARE 4\",\r\n    \"#define BLENDING_LINEAR 1\",\r\n    \"#define BLENDING_MULTIPLY 2\",\r\n    \"#define BLENDING_ADD 3\",\r\n    \"#define BLENDING_LIGHTER 4\",\r\n    \"#define BLENDING_DARKER 5\",\r\n    \"uniform sampler2D tDiffuse;\",\r\n    \"uniform float radius;\",\r\n    \"uniform float rotateR;\",\r\n    \"uniform float rotateG;\",\r\n    \"uniform float rotateB;\",\r\n    \"uniform float scatter;\",\r\n    \"uniform float width;\",\r\n    \"uniform float height;\",\r\n    \"uniform int shape;\",\r\n    \"uniform bool disable;\",\r\n    \"uniform float blending;\",\r\n    \"uniform int blendingMode;\",\r\n    \"varying vec2 vUV;\",\r\n    \"uniform bool greyscale;\",\r\n    \"const int samples = 8;\",\r\n    \"float blend( float a, float b, float t ) {\",\r\n    // linear blend\r\n    \"\treturn a * ( 1.0 - t ) + b * t;\",\r\n    \"}\",\r\n    \"float hypot( float x, float y ) {\",\r\n    // vector magnitude\r\n    \"\treturn sqrt( x * x + y * y );\",\r\n    \"}\",\r\n    \"float rand( vec2 seed ){\",\r\n    // get pseudo-random number\r\n    \"return fract( sin( dot( seed.xy, vec2( 12.9898, 78.233 ) ) ) * 43758.5453 );\",\r\n    \"}\",\r\n    \"float distanceToDotRadius( float channel, vec2 coord, vec2 normal, vec2 p, float angle, float rad_max ) {\",\r\n    // apply shape-specific transforms\r\n    \"\tfloat dist = hypot( coord.x - p.x, coord.y - p.y );\",\r\n    \"\tfloat rad = channel;\",\r\n    \"\tif ( shape == SHAPE_DOT ) {\",\r\n    \"\t\trad = pow( abs( rad ), 1.125 ) * rad_max;\",\r\n    \"\t} else if ( shape == SHAPE_ELLIPSE ) {\",\r\n    \"\t\trad = pow( abs( rad ), 1.125 ) * rad_max;\",\r\n    \"\t\tif ( dist != 0.0 ) {\",\r\n    \"\t\t\tfloat dot_p = abs( ( p.x - coord.x ) / dist * normal.x + ( p.y - coord.y ) / dist * normal.y );\",\r\n    \"\t\t\tdist = ( dist * ( 1.0 - SQRT2_HALF_MINUS_ONE ) ) + dot_p * dist * SQRT2_MINUS_ONE;\",\r\n    \"\t\t}\",\r\n    \"\t} else if ( shape == SHAPE_LINE ) {\",\r\n    \"\t\trad = pow( abs( rad ), 1.5) * rad_max;\",\r\n    \"\t\tfloat dot_p = ( p.x - coord.x ) * normal.x + ( p.y - coord.y ) * normal.y;\",\r\n    \"\t\tdist = hypot( normal.x * dot_p, normal.y * dot_p );\",\r\n    \"\t} else if ( shape == SHAPE_SQUARE ) {\",\r\n    \"\t\tfloat theta = atan( p.y - coord.y, p.x - coord.x ) - angle;\",\r\n    \"\t\tfloat sin_t = abs( sin( theta ) );\",\r\n    \"\t\tfloat cos_t = abs( cos( theta ) );\",\r\n    \"\t\trad = pow( abs( rad ), 1.4 );\",\r\n    \"\t\trad = rad_max * ( rad + ( ( sin_t > cos_t ) ? rad - sin_t * rad : rad - cos_t * rad ) );\",\r\n    \"\t}\",\r\n    \"\treturn rad - dist;\",\r\n    \"}\",\r\n    \"struct Cell {\",\r\n    // grid sample positions\r\n    \"\tvec2 normal;\",\r\n    \"\tvec2 p1;\",\r\n    \"\tvec2 p2;\",\r\n    \"\tvec2 p3;\",\r\n    \"\tvec2 p4;\",\r\n    \"\tfloat samp2;\",\r\n    \"\tfloat samp1;\",\r\n    \"\tfloat samp3;\",\r\n    \"\tfloat samp4;\",\r\n    \"};\",\r\n    \"vec4 getSample( vec2 point ) {\",\r\n    // multi-sampled point\r\n    \"\tvec4 tex = texture2D( tDiffuse, vec2( point.x / width, point.y / height ) );\",\r\n    \"\tfloat base = rand( vec2( floor( point.x ), floor( point.y ) ) ) * PI2;\",\r\n    \"\tfloat step = PI2 / float( samples );\",\r\n    \"\tfloat dist = radius * 0.66;\",\r\n    \"\tfor ( int i = 0; i < samples; ++i ) {\",\r\n    \"\t\tfloat r = base + step * float( i );\",\r\n    \"\t\tvec2 coord = point + vec2( cos( r ) * dist, sin( r ) * dist );\",\r\n    \"\t\ttex += texture2D( tDiffuse, vec2( coord.x / width, coord.y / height ) );\",\r\n    \"\t}\",\r\n    \"\ttex /= float( samples ) + 1.0;\",\r\n    \"\treturn tex;\",\r\n    \"}\",\r\n    \"float getDotColour( Cell c, vec2 p, int channel, float angle, float aa ) {\",\r\n    // get colour for given point\r\n    \"\tfloat dist_c_1, dist_c_2, dist_c_3, dist_c_4, res;\",\r\n    \"\tif ( channel == 0 ) {\",\r\n    \"\t\tc.samp1 = getSample( c.p1 ).r;\",\r\n    \"\t\tc.samp2 = getSample( c.p2 ).r;\",\r\n    \"\t\tc.samp3 = getSample( c.p3 ).r;\",\r\n    \"\t\tc.samp4 = getSample( c.p4 ).r;\",\r\n    \"\t} else if (channel == 1) {\",\r\n    \"\t\tc.samp1 = getSample( c.p1 ).g;\",\r\n    \"\t\tc.samp2 = getSample( c.p2 ).g;\",\r\n    \"\t\tc.samp3 = getSample( c.p3 ).g;\",\r\n    \"\t\tc.samp4 = getSample( c.p4 ).g;\",\r\n    \"\t} else {\",\r\n    \"\t\tc.samp1 = getSample( c.p1 ).b;\",\r\n    \"\t\tc.samp3 = getSample( c.p3 ).b;\",\r\n    \"\t\tc.samp2 = getSample( c.p2 ).b;\",\r\n    \"\t\tc.samp4 = getSample( c.p4 ).b;\",\r\n    \"\t}\",\r\n    \"\tdist_c_1 = distanceToDotRadius( c.samp1, c.p1, c.normal, p, angle, radius );\",\r\n    \"\tdist_c_2 = distanceToDotRadius( c.samp2, c.p2, c.normal, p, angle, radius );\",\r\n    \"\tdist_c_3 = distanceToDotRadius( c.samp3, c.p3, c.normal, p, angle, radius );\",\r\n    \"\tdist_c_4 = distanceToDotRadius( c.samp4, c.p4, c.normal, p, angle, radius );\",\r\n    \"\tres = ( dist_c_1 > 0.0 ) ? clamp( dist_c_1 / aa, 0.0, 1.0 ) : 0.0;\",\r\n    \"\tres += ( dist_c_2 > 0.0 ) ? clamp( dist_c_2 / aa, 0.0, 1.0 ) : 0.0;\",\r\n    \"\tres += ( dist_c_3 > 0.0 ) ? clamp( dist_c_3 / aa, 0.0, 1.0 ) : 0.0;\",\r\n    \"\tres += ( dist_c_4 > 0.0 ) ? clamp( dist_c_4 / aa, 0.0, 1.0 ) : 0.0;\",\r\n    \"\tres = clamp( res, 0.0, 1.0 );\",\r\n    \"\treturn res;\",\r\n    \"}\",\r\n    \"Cell getReferenceCell( vec2 p, vec2 origin, float grid_angle, float step ) {\",\r\n    // get containing cell\r\n    \"\tCell c;\",\r\n    // calc grid\r\n    \"\tvec2 n = vec2( cos( grid_angle ), sin( grid_angle ) );\",\r\n    \"\tfloat threshold = step * 0.5;\",\r\n    \"\tfloat dot_normal = n.x * ( p.x - origin.x ) + n.y * ( p.y - origin.y );\",\r\n    \"\tfloat dot_line = -n.y * ( p.x - origin.x ) + n.x * ( p.y - origin.y );\",\r\n    \"\tvec2 offset = vec2( n.x * dot_normal, n.y * dot_normal );\",\r\n    \"\tfloat offset_normal = mod( hypot( offset.x, offset.y ), step );\",\r\n    \"\tfloat normal_dir = ( dot_normal < 0.0 ) ? 1.0 : -1.0;\",\r\n    \"\tfloat normal_scale = ( ( offset_normal < threshold ) ? -offset_normal : step - offset_normal ) * normal_dir;\",\r\n    \"\tfloat offset_line = mod( hypot( ( p.x - offset.x ) - origin.x, ( p.y - offset.y ) - origin.y ), step );\",\r\n    \"\tfloat line_dir = ( dot_line < 0.0 ) ? 1.0 : -1.0;\",\r\n    \"\tfloat line_scale = ( ( offset_line < threshold ) ? -offset_line : step - offset_line ) * line_dir;\",\r\n    // get closest corner\r\n    \"\tc.normal = n;\",\r\n    \"\tc.p1.x = p.x - n.x * normal_scale + n.y * line_scale;\",\r\n    \"\tc.p1.y = p.y - n.y * normal_scale - n.x * line_scale;\",\r\n    // scatter\r\n    \"\tif ( scatter != 0.0 ) {\",\r\n    \"\t\tfloat off_mag = scatter * threshold * 0.5;\",\r\n    \"\t\tfloat off_angle = rand( vec2( floor( c.p1.x ), floor( c.p1.y ) ) ) * PI2;\",\r\n    \"\t\tc.p1.x += cos( off_angle ) * off_mag;\",\r\n    \"\t\tc.p1.y += sin( off_angle ) * off_mag;\",\r\n    \"\t}\",\r\n    // find corners\r\n    \"\tfloat normal_step = normal_dir * ( ( offset_normal < threshold ) ? step : -step );\",\r\n    \"\tfloat line_step = line_dir * ( ( offset_line < threshold ) ? step : -step );\",\r\n    \"\tc.p2.x = c.p1.x - n.x * normal_step;\",\r\n    \"\tc.p2.y = c.p1.y - n.y * normal_step;\",\r\n    \"\tc.p3.x = c.p1.x + n.y * line_step;\",\r\n    \"\tc.p3.y = c.p1.y - n.x * line_step;\",\r\n    \"\tc.p4.x = c.p1.x - n.x * normal_step + n.y * line_step;\",\r\n    \"\tc.p4.y = c.p1.y - n.y * normal_step - n.x * line_step;\",\r\n    \"\treturn c;\",\r\n    \"}\",\r\n    \"float blendColour( float a, float b, float t ) {\",\r\n    // blend colours\r\n    \"\tif ( blendingMode == BLENDING_LINEAR ) {\",\r\n    \"\t\treturn blend( a, b, 1.0 - t );\",\r\n    \"\t} else if ( blendingMode == BLENDING_ADD ) {\",\r\n    \"\t\treturn blend( a, min( 1.0, a + b ), t );\",\r\n    \"\t} else if ( blendingMode == BLENDING_MULTIPLY ) {\",\r\n    \"\t\treturn blend( a, max( 0.0, a * b ), t );\",\r\n    \"\t} else if ( blendingMode == BLENDING_LIGHTER ) {\",\r\n    \"\t\treturn blend( a, max( a, b ), t );\",\r\n    \"\t} else if ( blendingMode == BLENDING_DARKER ) {\",\r\n    \"\t\treturn blend( a, min( a, b ), t );\",\r\n    \"\t} else {\",\r\n    \"\t\treturn blend( a, b, 1.0 - t );\",\r\n    \"\t}\",\r\n    \"}\",\r\n    \"void main() {\",\r\n    \"\tif ( ! disable ) {\",\r\n    // setup\r\n    \"\t\tvec2 p = vec2( vUV.x * width, vUV.y * height );\",\r\n    \"\t\tvec2 origin = vec2( 0, 0 );\",\r\n    \"\t\tfloat aa = ( radius < 2.5 ) ? radius * 0.5 : 1.25;\",\r\n    // get channel samples\r\n    \"\t\tCell cell_r = getReferenceCell( p, origin, rotateR, radius );\",\r\n    \"\t\tCell cell_g = getReferenceCell( p, origin, rotateG, radius );\",\r\n    \"\t\tCell cell_b = getReferenceCell( p, origin, rotateB, radius );\",\r\n    \"\t\tfloat r = getDotColour( cell_r, p, 0, rotateR, aa );\",\r\n    \"\t\tfloat g = getDotColour( cell_g, p, 1, rotateG, aa );\",\r\n    \"\t\tfloat b = getDotColour( cell_b, p, 2, rotateB, aa );\",\r\n    // blend with original\r\n    \"\t\tvec4 colour = texture2D( tDiffuse, vUV );\",\r\n    \"\t\tr = blendColour( r, colour.r, blending );\",\r\n    \"\t\tg = blendColour( g, colour.g, blending );\",\r\n    \"\t\tb = blendColour( b, colour.b, blending );\",\r\n    \"\t\tif ( greyscale ) {\",\r\n    \"\t\t\tr = g = b = (r + b + g) / 3.0;\",\r\n    \"\t\t}\",\r\n    \"\t\tgl_FragColor = vec4( r, g, b, 1.0 );\",\r\n    \"\t} else {\",\r\n    \"\t\tgl_FragColor = texture2D( tDiffuse, vUV );\",\r\n    \"\t}\",\r\n    \"}\"\r\n  ].join(\"\\n\")\r\n};\r\nexport {\r\n  HalftoneShader\r\n};\r\n", "import { Vector2 } from \"three\";\r\nconst SMAAEdgesShader = {\r\n  defines: {\r\n    SMAA_THRESHOLD: \"0.1\"\r\n  },\r\n  uniforms: {\r\n    tDiffuse: { value: null },\r\n    resolution: { value: /* @__PURE__ */ new Vector2(1 / 1024, 1 / 512) }\r\n  },\r\n  vertexShader: [\r\n    \"uniform vec2 resolution;\",\r\n    \"varying vec2 vUv;\",\r\n    \"varying vec4 vOffset[ 3 ];\",\r\n    \"void SMAAEdgeDetectionVS( vec2 texcoord ) {\",\r\n    \"\tvOffset[ 0 ] = texcoord.xyxy + resolution.xyxy * vec4( -1.0, 0.0, 0.0,  1.0 );\",\r\n    // WebGL port note: Changed sign in W component\r\n    \"\tvOffset[ 1 ] = texcoord.xyxy + resolution.xyxy * vec4(  1.0, 0.0, 0.0, -1.0 );\",\r\n    // WebGL port note: Changed sign in W component\r\n    \"\tvOffset[ 2 ] = texcoord.xyxy + resolution.xyxy * vec4( -2.0, 0.0, 0.0,  2.0 );\",\r\n    // WebGL port note: Changed sign in W component\r\n    \"}\",\r\n    \"void main() {\",\r\n    \"\tvUv = uv;\",\r\n    \"\tSMAAEdgeDetectionVS( vUv );\",\r\n    \"\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\r\n    \"}\"\r\n  ].join(\"\\n\"),\r\n  fragmentShader: [\r\n    \"uniform sampler2D tDiffuse;\",\r\n    \"varying vec2 vUv;\",\r\n    \"varying vec4 vOffset[ 3 ];\",\r\n    \"vec4 SMAAColorEdgeDetectionPS( vec2 texcoord, vec4 offset[3], sampler2D colorTex ) {\",\r\n    \"\tvec2 threshold = vec2( SMAA_THRESHOLD, SMAA_THRESHOLD );\",\r\n    // Calculate color deltas:\r\n    \"\tvec4 delta;\",\r\n    \"\tvec3 C = texture2D( colorTex, texcoord ).rgb;\",\r\n    \"\tvec3 Cleft = texture2D( colorTex, offset[0].xy ).rgb;\",\r\n    \"\tvec3 t = abs( C - Cleft );\",\r\n    \"\tdelta.x = max( max( t.r, t.g ), t.b );\",\r\n    \"\tvec3 Ctop = texture2D( colorTex, offset[0].zw ).rgb;\",\r\n    \"\tt = abs( C - Ctop );\",\r\n    \"\tdelta.y = max( max( t.r, t.g ), t.b );\",\r\n    // We do the usual threshold:\r\n    \"\tvec2 edges = step( threshold, delta.xy );\",\r\n    // Then discard if there is no edge:\r\n    \"\tif ( dot( edges, vec2( 1.0, 1.0 ) ) == 0.0 )\",\r\n    \"\t\tdiscard;\",\r\n    // Calculate right and bottom deltas:\r\n    \"\tvec3 Cright = texture2D( colorTex, offset[1].xy ).rgb;\",\r\n    \"\tt = abs( C - Cright );\",\r\n    \"\tdelta.z = max( max( t.r, t.g ), t.b );\",\r\n    \"\tvec3 Cbottom  = texture2D( colorTex, offset[1].zw ).rgb;\",\r\n    \"\tt = abs( C - Cbottom );\",\r\n    \"\tdelta.w = max( max( t.r, t.g ), t.b );\",\r\n    // Calculate the maximum delta in the direct neighborhood:\r\n    \"\tfloat maxDelta = max( max( max( delta.x, delta.y ), delta.z ), delta.w );\",\r\n    // Calculate left-left and top-top deltas:\r\n    \"\tvec3 Cleftleft  = texture2D( colorTex, offset[2].xy ).rgb;\",\r\n    \"\tt = abs( C - Cleftleft );\",\r\n    \"\tdelta.z = max( max( t.r, t.g ), t.b );\",\r\n    \"\tvec3 Ctoptop = texture2D( colorTex, offset[2].zw ).rgb;\",\r\n    \"\tt = abs( C - Ctoptop );\",\r\n    \"\tdelta.w = max( max( t.r, t.g ), t.b );\",\r\n    // Calculate the final maximum delta:\r\n    \"\tmaxDelta = max( max( maxDelta, delta.z ), delta.w );\",\r\n    // Local contrast adaptation in action:\r\n    \"\tedges.xy *= step( 0.5 * maxDelta, delta.xy );\",\r\n    \"\treturn vec4( edges, 0.0, 0.0 );\",\r\n    \"}\",\r\n    \"void main() {\",\r\n    \"\tgl_FragColor = SMAAColorEdgeDetectionPS( vUv, vOffset, tDiffuse );\",\r\n    \"}\"\r\n  ].join(\"\\n\")\r\n};\r\nconst SMAAWeightsShader = {\r\n  defines: {\r\n    SMAA_MAX_SEARCH_STEPS: \"8\",\r\n    SMAA_AREATEX_MAX_DISTANCE: \"16\",\r\n    SMAA_AREATEX_PIXEL_SIZE: \"( 1.0 / vec2( 160.0, 560.0 ) )\",\r\n    SMAA_AREATEX_SUBTEX_SIZE: \"( 1.0 / 7.0 )\"\r\n  },\r\n  uniforms: {\r\n    tDiffuse: { value: null },\r\n    tArea: { value: null },\r\n    tSearch: { value: null },\r\n    resolution: { value: /* @__PURE__ */ new Vector2(1 / 1024, 1 / 512) }\r\n  },\r\n  vertexShader: [\r\n    \"uniform vec2 resolution;\",\r\n    \"varying vec2 vUv;\",\r\n    \"varying vec4 vOffset[ 3 ];\",\r\n    \"varying vec2 vPixcoord;\",\r\n    \"void SMAABlendingWeightCalculationVS( vec2 texcoord ) {\",\r\n    \"\tvPixcoord = texcoord / resolution;\",\r\n    // We will use these offsets for the searches later on (see @PSEUDO_GATHER4):\r\n    \"\tvOffset[ 0 ] = texcoord.xyxy + resolution.xyxy * vec4( -0.25, 0.125, 1.25, 0.125 );\",\r\n    // WebGL port note: Changed sign in Y and W components\r\n    \"\tvOffset[ 1 ] = texcoord.xyxy + resolution.xyxy * vec4( -0.125, 0.25, -0.125, -1.25 );\",\r\n    // WebGL port note: Changed sign in Y and W components\r\n    // And these for the searches, they indicate the ends of the loops:\r\n    \"\tvOffset[ 2 ] = vec4( vOffset[ 0 ].xz, vOffset[ 1 ].yw ) + vec4( -2.0, 2.0, -2.0, 2.0 ) * resolution.xxyy * float( SMAA_MAX_SEARCH_STEPS );\",\r\n    \"}\",\r\n    \"void main() {\",\r\n    \"\tvUv = uv;\",\r\n    \"\tSMAABlendingWeightCalculationVS( vUv );\",\r\n    \"\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\r\n    \"}\"\r\n  ].join(\"\\n\"),\r\n  fragmentShader: [\r\n    \"#define SMAASampleLevelZeroOffset( tex, coord, offset ) texture2D( tex, coord + float( offset ) * resolution, 0.0 )\",\r\n    \"uniform sampler2D tDiffuse;\",\r\n    \"uniform sampler2D tArea;\",\r\n    \"uniform sampler2D tSearch;\",\r\n    \"uniform vec2 resolution;\",\r\n    \"varying vec2 vUv;\",\r\n    \"varying vec4 vOffset[3];\",\r\n    \"varying vec2 vPixcoord;\",\r\n    \"#if __VERSION__ == 100\",\r\n    \"vec2 round( vec2 x ) {\",\r\n    \"\treturn sign( x ) * floor( abs( x ) + 0.5 );\",\r\n    \"}\",\r\n    \"#endif\",\r\n    \"float SMAASearchLength( sampler2D searchTex, vec2 e, float bias, float scale ) {\",\r\n    // Not required if searchTex accesses are set to point:\r\n    // float2 SEARCH_TEX_PIXEL_SIZE = 1.0 / float2(66.0, 33.0);\r\n    // e = float2(bias, 0.0) + 0.5 * SEARCH_TEX_PIXEL_SIZE +\r\n    //     e * float2(scale, 1.0) * float2(64.0, 32.0) * SEARCH_TEX_PIXEL_SIZE;\r\n    \"\te.r = bias + e.r * scale;\",\r\n    \"\treturn 255.0 * texture2D( searchTex, e, 0.0 ).r;\",\r\n    \"}\",\r\n    \"float SMAASearchXLeft( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {\",\r\n    /**\r\n     * @PSEUDO_GATHER4\r\n     * This texcoord has been offset by (-0.25, -0.125) in the vertex shader to\r\n     * sample between edge, thus fetching four edges in a row.\r\n     * Sampling with different offsets in each direction allows to disambiguate\r\n     * which edges are active from the four fetched ones.\r\n     */\r\n    \"\tvec2 e = vec2( 0.0, 1.0 );\",\r\n    \"\tfor ( int i = 0; i < SMAA_MAX_SEARCH_STEPS; i ++ ) {\",\r\n    // WebGL port note: Changed while to for\r\n    \"\t\te = texture2D( edgesTex, texcoord, 0.0 ).rg;\",\r\n    \"\t\ttexcoord -= vec2( 2.0, 0.0 ) * resolution;\",\r\n    \"\t\tif ( ! ( texcoord.x > end && e.g > 0.8281 && e.r == 0.0 ) ) break;\",\r\n    \"\t}\",\r\n    // We correct the previous (-0.25, -0.125) offset we applied:\r\n    \"\ttexcoord.x += 0.25 * resolution.x;\",\r\n    // The searches are bias by 1, so adjust the coords accordingly:\r\n    \"\ttexcoord.x += resolution.x;\",\r\n    // Disambiguate the length added by the last step:\r\n    \"\ttexcoord.x += 2.0 * resolution.x;\",\r\n    // Undo last step\r\n    \"\ttexcoord.x -= resolution.x * SMAASearchLength(searchTex, e, 0.0, 0.5);\",\r\n    \"\treturn texcoord.x;\",\r\n    \"}\",\r\n    \"float SMAASearchXRight( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {\",\r\n    \"\tvec2 e = vec2( 0.0, 1.0 );\",\r\n    \"\tfor ( int i = 0; i < SMAA_MAX_SEARCH_STEPS; i ++ ) {\",\r\n    // WebGL port note: Changed while to for\r\n    \"\t\te = texture2D( edgesTex, texcoord, 0.0 ).rg;\",\r\n    \"\t\ttexcoord += vec2( 2.0, 0.0 ) * resolution;\",\r\n    \"\t\tif ( ! ( texcoord.x < end && e.g > 0.8281 && e.r == 0.0 ) ) break;\",\r\n    \"\t}\",\r\n    \"\ttexcoord.x -= 0.25 * resolution.x;\",\r\n    \"\ttexcoord.x -= resolution.x;\",\r\n    \"\ttexcoord.x -= 2.0 * resolution.x;\",\r\n    \"\ttexcoord.x += resolution.x * SMAASearchLength( searchTex, e, 0.5, 0.5 );\",\r\n    \"\treturn texcoord.x;\",\r\n    \"}\",\r\n    \"float SMAASearchYUp( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {\",\r\n    \"\tvec2 e = vec2( 1.0, 0.0 );\",\r\n    \"\tfor ( int i = 0; i < SMAA_MAX_SEARCH_STEPS; i ++ ) {\",\r\n    // WebGL port note: Changed while to for\r\n    \"\t\te = texture2D( edgesTex, texcoord, 0.0 ).rg;\",\r\n    \"\t\ttexcoord += vec2( 0.0, 2.0 ) * resolution;\",\r\n    // WebGL port note: Changed sign\r\n    \"\t\tif ( ! ( texcoord.y > end && e.r > 0.8281 && e.g == 0.0 ) ) break;\",\r\n    \"\t}\",\r\n    \"\ttexcoord.y -= 0.25 * resolution.y;\",\r\n    // WebGL port note: Changed sign\r\n    \"\ttexcoord.y -= resolution.y;\",\r\n    // WebGL port note: Changed sign\r\n    \"\ttexcoord.y -= 2.0 * resolution.y;\",\r\n    // WebGL port note: Changed sign\r\n    \"\ttexcoord.y += resolution.y * SMAASearchLength( searchTex, e.gr, 0.0, 0.5 );\",\r\n    // WebGL port note: Changed sign\r\n    \"\treturn texcoord.y;\",\r\n    \"}\",\r\n    \"float SMAASearchYDown( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {\",\r\n    \"\tvec2 e = vec2( 1.0, 0.0 );\",\r\n    \"\tfor ( int i = 0; i < SMAA_MAX_SEARCH_STEPS; i ++ ) {\",\r\n    // WebGL port note: Changed while to for\r\n    \"\t\te = texture2D( edgesTex, texcoord, 0.0 ).rg;\",\r\n    \"\t\ttexcoord -= vec2( 0.0, 2.0 ) * resolution;\",\r\n    // WebGL port note: Changed sign\r\n    \"\t\tif ( ! ( texcoord.y < end && e.r > 0.8281 && e.g == 0.0 ) ) break;\",\r\n    \"\t}\",\r\n    \"\ttexcoord.y += 0.25 * resolution.y;\",\r\n    // WebGL port note: Changed sign\r\n    \"\ttexcoord.y += resolution.y;\",\r\n    // WebGL port note: Changed sign\r\n    \"\ttexcoord.y += 2.0 * resolution.y;\",\r\n    // WebGL port note: Changed sign\r\n    \"\ttexcoord.y -= resolution.y * SMAASearchLength( searchTex, e.gr, 0.5, 0.5 );\",\r\n    // WebGL port note: Changed sign\r\n    \"\treturn texcoord.y;\",\r\n    \"}\",\r\n    \"vec2 SMAAArea( sampler2D areaTex, vec2 dist, float e1, float e2, float offset ) {\",\r\n    // Rounding prevents precision errors of bilinear filtering:\r\n    \"\tvec2 texcoord = float( SMAA_AREATEX_MAX_DISTANCE ) * round( 4.0 * vec2( e1, e2 ) ) + dist;\",\r\n    // We do a scale and bias for mapping to texel space:\r\n    \"\ttexcoord = SMAA_AREATEX_PIXEL_SIZE * texcoord + ( 0.5 * SMAA_AREATEX_PIXEL_SIZE );\",\r\n    // Move to proper place, according to the subpixel offset:\r\n    \"\ttexcoord.y += SMAA_AREATEX_SUBTEX_SIZE * offset;\",\r\n    \"\treturn texture2D( areaTex, texcoord, 0.0 ).rg;\",\r\n    \"}\",\r\n    \"vec4 SMAABlendingWeightCalculationPS( vec2 texcoord, vec2 pixcoord, vec4 offset[ 3 ], sampler2D edgesTex, sampler2D areaTex, sampler2D searchTex, ivec4 subsampleIndices ) {\",\r\n    \"\tvec4 weights = vec4( 0.0, 0.0, 0.0, 0.0 );\",\r\n    \"\tvec2 e = texture2D( edgesTex, texcoord ).rg;\",\r\n    \"\tif ( e.g > 0.0 ) {\",\r\n    // Edge at north\r\n    \"\t\tvec2 d;\",\r\n    // Find the distance to the left:\r\n    \"\t\tvec2 coords;\",\r\n    \"\t\tcoords.x = SMAASearchXLeft( edgesTex, searchTex, offset[ 0 ].xy, offset[ 2 ].x );\",\r\n    \"\t\tcoords.y = offset[ 1 ].y;\",\r\n    // offset[1].y = texcoord.y - 0.25 * resolution.y (@CROSSING_OFFSET)\r\n    \"\t\td.x = coords.x;\",\r\n    // Now fetch the left crossing edges, two at a time using bilinear\r\n    // filtering. Sampling at -0.25 (see @CROSSING_OFFSET) enables to\r\n    // discern what value each edge has:\r\n    \"\t\tfloat e1 = texture2D( edgesTex, coords, 0.0 ).r;\",\r\n    // Find the distance to the right:\r\n    \"\t\tcoords.x = SMAASearchXRight( edgesTex, searchTex, offset[ 0 ].zw, offset[ 2 ].y );\",\r\n    \"\t\td.y = coords.x;\",\r\n    // We want the distances to be in pixel units (doing this here allow to\r\n    // better interleave arithmetic and memory accesses):\r\n    \"\t\td = d / resolution.x - pixcoord.x;\",\r\n    // SMAAArea below needs a sqrt, as the areas texture is compressed\r\n    // quadratically:\r\n    \"\t\tvec2 sqrt_d = sqrt( abs( d ) );\",\r\n    // Fetch the right crossing edges:\r\n    \"\t\tcoords.y -= 1.0 * resolution.y;\",\r\n    // WebGL port note: Added\r\n    \"\t\tfloat e2 = SMAASampleLevelZeroOffset( edgesTex, coords, ivec2( 1, 0 ) ).r;\",\r\n    // Ok, we know how this pattern looks like, now it is time for getting\r\n    // the actual area:\r\n    \"\t\tweights.rg = SMAAArea( areaTex, sqrt_d, e1, e2, float( subsampleIndices.y ) );\",\r\n    \"\t}\",\r\n    \"\tif ( e.r > 0.0 ) {\",\r\n    // Edge at west\r\n    \"\t\tvec2 d;\",\r\n    // Find the distance to the top:\r\n    \"\t\tvec2 coords;\",\r\n    \"\t\tcoords.y = SMAASearchYUp( edgesTex, searchTex, offset[ 1 ].xy, offset[ 2 ].z );\",\r\n    \"\t\tcoords.x = offset[ 0 ].x;\",\r\n    // offset[1].x = texcoord.x - 0.25 * resolution.x;\r\n    \"\t\td.x = coords.y;\",\r\n    // Fetch the top crossing edges:\r\n    \"\t\tfloat e1 = texture2D( edgesTex, coords, 0.0 ).g;\",\r\n    // Find the distance to the bottom:\r\n    \"\t\tcoords.y = SMAASearchYDown( edgesTex, searchTex, offset[ 1 ].zw, offset[ 2 ].w );\",\r\n    \"\t\td.y = coords.y;\",\r\n    // We want the distances to be in pixel units:\r\n    \"\t\td = d / resolution.y - pixcoord.y;\",\r\n    // SMAAArea below needs a sqrt, as the areas texture is compressed\r\n    // quadratically:\r\n    \"\t\tvec2 sqrt_d = sqrt( abs( d ) );\",\r\n    // Fetch the bottom crossing edges:\r\n    \"\t\tcoords.y -= 1.0 * resolution.y;\",\r\n    // WebGL port note: Added\r\n    \"\t\tfloat e2 = SMAASampleLevelZeroOffset( edgesTex, coords, ivec2( 0, 1 ) ).g;\",\r\n    // Get the area for this direction:\r\n    \"\t\tweights.ba = SMAAArea( areaTex, sqrt_d, e1, e2, float( subsampleIndices.x ) );\",\r\n    \"\t}\",\r\n    \"\treturn weights;\",\r\n    \"}\",\r\n    \"void main() {\",\r\n    \"\tgl_FragColor = SMAABlendingWeightCalculationPS( vUv, vPixcoord, vOffset, tDiffuse, tArea, tSearch, ivec4( 0.0 ) );\",\r\n    \"}\"\r\n  ].join(\"\\n\")\r\n};\r\nconst SMAABlendShader = {\r\n  uniforms: {\r\n    tDiffuse: { value: null },\r\n    tColor: { value: null },\r\n    resolution: { value: /* @__PURE__ */ new Vector2(1 / 1024, 1 / 512) }\r\n  },\r\n  vertexShader: [\r\n    \"uniform vec2 resolution;\",\r\n    \"varying vec2 vUv;\",\r\n    \"varying vec4 vOffset[ 2 ];\",\r\n    \"void SMAANeighborhoodBlendingVS( vec2 texcoord ) {\",\r\n    \"\tvOffset[ 0 ] = texcoord.xyxy + resolution.xyxy * vec4( -1.0, 0.0, 0.0, 1.0 );\",\r\n    // WebGL port note: Changed sign in W component\r\n    \"\tvOffset[ 1 ] = texcoord.xyxy + resolution.xyxy * vec4( 1.0, 0.0, 0.0, -1.0 );\",\r\n    // WebGL port note: Changed sign in W component\r\n    \"}\",\r\n    \"void main() {\",\r\n    \"\tvUv = uv;\",\r\n    \"\tSMAANeighborhoodBlendingVS( vUv );\",\r\n    \"\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\r\n    \"}\"\r\n  ].join(\"\\n\"),\r\n  fragmentShader: [\r\n    \"uniform sampler2D tDiffuse;\",\r\n    \"uniform sampler2D tColor;\",\r\n    \"uniform vec2 resolution;\",\r\n    \"varying vec2 vUv;\",\r\n    \"varying vec4 vOffset[ 2 ];\",\r\n    \"vec4 SMAANeighborhoodBlendingPS( vec2 texcoord, vec4 offset[ 2 ], sampler2D colorTex, sampler2D blendTex ) {\",\r\n    // Fetch the blending weights for current pixel:\r\n    \"\tvec4 a;\",\r\n    \"\ta.xz = texture2D( blendTex, texcoord ).xz;\",\r\n    \"\ta.y = texture2D( blendTex, offset[ 1 ].zw ).g;\",\r\n    \"\ta.w = texture2D( blendTex, offset[ 1 ].xy ).a;\",\r\n    // Is there any blending weight with a value greater than 0.0?\r\n    \"\tif ( dot(a, vec4( 1.0, 1.0, 1.0, 1.0 )) < 1e-5 ) {\",\r\n    \"\t\treturn texture2D( colorTex, texcoord, 0.0 );\",\r\n    \"\t} else {\",\r\n    // Up to 4 lines can be crossing a pixel (one through each edge). We\r\n    // favor blending by choosing the line with the maximum weight for each\r\n    // direction:\r\n    \"\t\tvec2 offset;\",\r\n    \"\t\toffset.x = a.a > a.b ? a.a : -a.b;\",\r\n    // left vs. right\r\n    \"\t\toffset.y = a.g > a.r ? -a.g : a.r;\",\r\n    // top vs. bottom // WebGL port note: Changed signs\r\n    // Then we go in the direction that has the maximum weight:\r\n    \"\t\tif ( abs( offset.x ) > abs( offset.y )) {\",\r\n    // horizontal vs. vertical\r\n    \"\t\t\toffset.y = 0.0;\",\r\n    \"\t\t} else {\",\r\n    \"\t\t\toffset.x = 0.0;\",\r\n    \"\t\t}\",\r\n    // Fetch the opposite color and lerp by hand:\r\n    \"\t\tvec4 C = texture2D( colorTex, texcoord, 0.0 );\",\r\n    \"\t\ttexcoord += sign( offset ) * resolution;\",\r\n    \"\t\tvec4 Cop = texture2D( colorTex, texcoord, 0.0 );\",\r\n    \"\t\tfloat s = abs( offset.x ) > abs( offset.y ) ? abs( offset.x ) : abs( offset.y );\",\r\n    // WebGL port note: Added gamma correction\r\n    \"\t\tC.xyz = pow(C.xyz, vec3(2.2));\",\r\n    \"\t\tCop.xyz = pow(Cop.xyz, vec3(2.2));\",\r\n    \"\t\tvec4 mixed = mix(C, Cop, s);\",\r\n    \"\t\tmixed.xyz = pow(mixed.xyz, vec3(1.0 / 2.2));\",\r\n    \"\t\treturn mixed;\",\r\n    \"\t}\",\r\n    \"}\",\r\n    \"void main() {\",\r\n    \"\tgl_FragColor = SMAANeighborhoodBlendingPS( vUv, vOffset, tColor, tDiffuse );\",\r\n    \"}\"\r\n  ].join(\"\\n\")\r\n};\r\nexport {\r\n  SMAABlendShader,\r\n  SMAAEdgesShader,\r\n  SMAAWeightsShader\r\n};\r\n", "const FilmShader = {\r\n  uniforms: {\r\n    tDiffuse: { value: null },\r\n    time: { value: 0 },\r\n    nIntensity: { value: 0.5 },\r\n    sIntensity: { value: 0.05 },\r\n    sCount: { value: 4096 },\r\n    grayscale: { value: 1 }\r\n  },\r\n  vertexShader: [\r\n    \"varying vec2 vUv;\",\r\n    \"void main() {\",\r\n    \"\tvUv = uv;\",\r\n    \"\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\r\n    \"}\"\r\n  ].join(\"\\n\"),\r\n  fragmentShader: [\r\n    \"#include <common>\",\r\n    // control parameter\r\n    \"uniform float time;\",\r\n    \"uniform bool grayscale;\",\r\n    // noise effect intensity value (0 = no effect, 1 = full effect)\r\n    \"uniform float nIntensity;\",\r\n    // scanlines effect intensity value (0 = no effect, 1 = full effect)\r\n    \"uniform float sIntensity;\",\r\n    // scanlines effect count value (0 = no effect, 4096 = full effect)\r\n    \"uniform float sCount;\",\r\n    \"uniform sampler2D tDiffuse;\",\r\n    \"varying vec2 vUv;\",\r\n    \"void main() {\",\r\n    // sample the source\r\n    \"\tvec4 cTextureScreen = texture2D( tDiffuse, vUv );\",\r\n    // make some noise\r\n    \"\tfloat dx = rand( vUv + time );\",\r\n    // add noise\r\n    \"\tvec3 cResult = cTextureScreen.rgb + cTextureScreen.rgb * clamp( 0.1 + dx, 0.0, 1.0 );\",\r\n    // get us a sine and cosine\r\n    \"\tvec2 sc = vec2( sin( vUv.y * sCount ), cos( vUv.y * sCount ) );\",\r\n    // add scanlines\r\n    \"\tcResult += cTextureScreen.rgb * vec3( sc.x, sc.y, sc.x ) * sIntensity;\",\r\n    // interpolate between source and result by intensity\r\n    \"\tcResult = cTextureScreen.rgb + clamp( nIntensity, 0.0,1.0 ) * ( cResult - cTextureScreen.rgb );\",\r\n    // convert to grayscale if desired\r\n    \"\tif( grayscale ) {\",\r\n    \"\t\tcResult = vec3( cResult.r * 0.3 + cResult.g * 0.59 + cResult.b * 0.11 );\",\r\n    \"\t}\",\r\n    \"\tgl_FragColor =  vec4( cResult, cTextureScreen.a );\",\r\n    \"}\"\r\n  ].join(\"\\n\")\r\n};\r\nexport {\r\n  FilmShader\r\n};\r\n", "const CopyShader = {\r\n  uniforms: {\r\n    tDiffuse: { value: null },\r\n    opacity: { value: 1 }\r\n  },\r\n  vertexShader: [\r\n    \"varying vec2 vUv;\",\r\n    \"void main() {\",\r\n    \"\tvUv = uv;\",\r\n    \"\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\r\n    \"}\"\r\n  ].join(\"\\n\"),\r\n  fragmentShader: [\r\n    \"uniform float opacity;\",\r\n    \"uniform sampler2D tDiffuse;\",\r\n    \"varying vec2 vUv;\",\r\n    \"void main() {\",\r\n    \"\tvec4 texel = texture2D( tDiffuse, vUv );\",\r\n    \"\tgl_FragColor = opacity * texel;\",\r\n    \"}\"\r\n  ].join(\"\\n\")\r\n};\r\nexport {\r\n  CopyShader\r\n};\r\n", "import { Vector2, Matrix4 } from \"three\";\r\nconst SSAOShader = {\r\n  defines: {\r\n    PERSPECTIVE_CAMERA: 1,\r\n    KERNEL_SIZE: 32\r\n  },\r\n  uniforms: {\r\n    tDiffuse: { value: null },\r\n    tNormal: { value: null },\r\n    tDepth: { value: null },\r\n    tNoise: { value: null },\r\n    kernel: { value: null },\r\n    cameraNear: { value: null },\r\n    cameraFar: { value: null },\r\n    resolution: { value: /* @__PURE__ */ new Vector2() },\r\n    cameraProjectionMatrix: { value: /* @__PURE__ */ new Matrix4() },\r\n    cameraInverseProjectionMatrix: { value: /* @__PURE__ */ new Matrix4() },\r\n    kernelRadius: { value: 8 },\r\n    minDistance: { value: 5e-3 },\r\n    maxDistance: { value: 0.05 }\r\n  },\r\n  vertexShader: [\r\n    \"varying vec2 vUv;\",\r\n    \"void main() {\",\r\n    \"\tvUv = uv;\",\r\n    \"\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\r\n    \"}\"\r\n  ].join(\"\\n\"),\r\n  fragmentShader: [\r\n    \"uniform sampler2D tDiffuse;\",\r\n    \"uniform sampler2D tNormal;\",\r\n    \"uniform sampler2D tDepth;\",\r\n    \"uniform sampler2D tNoise;\",\r\n    \"uniform vec3 kernel[ KERNEL_SIZE ];\",\r\n    \"uniform vec2 resolution;\",\r\n    \"uniform float cameraNear;\",\r\n    \"uniform float cameraFar;\",\r\n    \"uniform mat4 cameraProjectionMatrix;\",\r\n    \"uniform mat4 cameraInverseProjectionMatrix;\",\r\n    \"uniform float kernelRadius;\",\r\n    \"uniform float minDistance;\",\r\n    // avoid artifacts caused by neighbour fragments with minimal depth difference\r\n    \"uniform float maxDistance;\",\r\n    // avoid the influence of fragments which are too far away\r\n    \"varying vec2 vUv;\",\r\n    \"#include <packing>\",\r\n    \"float getDepth( const in vec2 screenPosition ) {\",\r\n    \"\treturn texture2D( tDepth, screenPosition ).x;\",\r\n    \"}\",\r\n    \"float getLinearDepth( const in vec2 screenPosition ) {\",\r\n    \"\t#if PERSPECTIVE_CAMERA == 1\",\r\n    \"\t\tfloat fragCoordZ = texture2D( tDepth, screenPosition ).x;\",\r\n    \"\t\tfloat viewZ = perspectiveDepthToViewZ( fragCoordZ, cameraNear, cameraFar );\",\r\n    \"\t\treturn viewZToOrthographicDepth( viewZ, cameraNear, cameraFar );\",\r\n    \"\t#else\",\r\n    \"\t\treturn texture2D( tDepth, screenPosition ).x;\",\r\n    \"\t#endif\",\r\n    \"}\",\r\n    \"float getViewZ( const in float depth ) {\",\r\n    \"\t#if PERSPECTIVE_CAMERA == 1\",\r\n    \"\t\treturn perspectiveDepthToViewZ( depth, cameraNear, cameraFar );\",\r\n    \"\t#else\",\r\n    \"\t\treturn orthographicDepthToViewZ( depth, cameraNear, cameraFar );\",\r\n    \"\t#endif\",\r\n    \"}\",\r\n    \"vec3 getViewPosition( const in vec2 screenPosition, const in float depth, const in float viewZ ) {\",\r\n    \"\tfloat clipW = cameraProjectionMatrix[2][3] * viewZ + cameraProjectionMatrix[3][3];\",\r\n    \"\tvec4 clipPosition = vec4( ( vec3( screenPosition, depth ) - 0.5 ) * 2.0, 1.0 );\",\r\n    \"\tclipPosition *= clipW; // unprojection.\",\r\n    \"\treturn ( cameraInverseProjectionMatrix * clipPosition ).xyz;\",\r\n    \"}\",\r\n    \"vec3 getViewNormal( const in vec2 screenPosition ) {\",\r\n    \"\treturn unpackRGBToNormal( texture2D( tNormal, screenPosition ).xyz );\",\r\n    \"}\",\r\n    \"void main() {\",\r\n    \"\tfloat depth = getDepth( vUv );\",\r\n    \"\tfloat viewZ = getViewZ( depth );\",\r\n    \"\tvec3 viewPosition = getViewPosition( vUv, depth, viewZ );\",\r\n    \"\tvec3 viewNormal = getViewNormal( vUv );\",\r\n    \" vec2 noiseScale = vec2( resolution.x / 4.0, resolution.y / 4.0 );\",\r\n    \"\tvec3 random = texture2D( tNoise, vUv * noiseScale ).xyz;\",\r\n    // compute matrix used to reorient a kernel vector\r\n    \"\tvec3 tangent = normalize( random - viewNormal * dot( random, viewNormal ) );\",\r\n    \"\tvec3 bitangent = cross( viewNormal, tangent );\",\r\n    \"\tmat3 kernelMatrix = mat3( tangent, bitangent, viewNormal );\",\r\n    \" float occlusion = 0.0;\",\r\n    \" for ( int i = 0; i < KERNEL_SIZE; i ++ ) {\",\r\n    \"\t\tvec3 sampleVector = kernelMatrix * kernel[ i ];\",\r\n    // reorient sample vector in view space\r\n    \"\t\tvec3 samplePoint = viewPosition + ( sampleVector * kernelRadius );\",\r\n    // calculate sample point\r\n    \"\t\tvec4 samplePointNDC = cameraProjectionMatrix * vec4( samplePoint, 1.0 );\",\r\n    // project point and calculate NDC\r\n    \"\t\tsamplePointNDC /= samplePointNDC.w;\",\r\n    \"\t\tvec2 samplePointUv = samplePointNDC.xy * 0.5 + 0.5;\",\r\n    // compute uv coordinates\r\n    \"\t\tfloat realDepth = getLinearDepth( samplePointUv );\",\r\n    // get linear depth from depth texture\r\n    \"\t\tfloat sampleDepth = viewZToOrthographicDepth( samplePoint.z, cameraNear, cameraFar );\",\r\n    // compute linear depth of the sample view Z value\r\n    \"\t\tfloat delta = sampleDepth - realDepth;\",\r\n    \"\t\tif ( delta > minDistance && delta < maxDistance ) {\",\r\n    // if fragment is before sample point, increase occlusion\r\n    \"\t\t\tocclusion += 1.0;\",\r\n    \"\t\t}\",\r\n    \"\t}\",\r\n    \"\tocclusion = clamp( occlusion / float( KERNEL_SIZE ), 0.0, 1.0 );\",\r\n    \"\tgl_FragColor = vec4( vec3( 1.0 - occlusion ), 1.0 );\",\r\n    \"}\"\r\n  ].join(\"\\n\")\r\n};\r\nconst SSAODepthShader = {\r\n  defines: {\r\n    PERSPECTIVE_CAMERA: 1\r\n  },\r\n  uniforms: {\r\n    tDepth: { value: null },\r\n    cameraNear: { value: null },\r\n    cameraFar: { value: null }\r\n  },\r\n  vertexShader: [\r\n    \"varying vec2 vUv;\",\r\n    \"void main() {\",\r\n    \"\tvUv = uv;\",\r\n    \"\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\r\n    \"}\"\r\n  ].join(\"\\n\"),\r\n  fragmentShader: [\r\n    \"uniform sampler2D tDepth;\",\r\n    \"uniform float cameraNear;\",\r\n    \"uniform float cameraFar;\",\r\n    \"varying vec2 vUv;\",\r\n    \"#include <packing>\",\r\n    \"float getLinearDepth( const in vec2 screenPosition ) {\",\r\n    \"\t#if PERSPECTIVE_CAMERA == 1\",\r\n    \"\t\tfloat fragCoordZ = texture2D( tDepth, screenPosition ).x;\",\r\n    \"\t\tfloat viewZ = perspectiveDepthToViewZ( fragCoordZ, cameraNear, cameraFar );\",\r\n    \"\t\treturn viewZToOrthographicDepth( viewZ, cameraNear, cameraFar );\",\r\n    \"\t#else\",\r\n    \"\t\treturn texture2D( tDepth, screenPosition ).x;\",\r\n    \"\t#endif\",\r\n    \"}\",\r\n    \"void main() {\",\r\n    \"\tfloat depth = getLinearDepth( vUv );\",\r\n    \"\tgl_FragColor = vec4( vec3( 1.0 - depth ), 1.0 );\",\r\n    \"}\"\r\n  ].join(\"\\n\")\r\n};\r\nconst SSAOBlurShader = {\r\n  uniforms: {\r\n    tDiffuse: { value: null },\r\n    resolution: { value: /* @__PURE__ */ new Vector2() }\r\n  },\r\n  vertexShader: [\r\n    \"varying vec2 vUv;\",\r\n    \"void main() {\",\r\n    \"\tvUv = uv;\",\r\n    \"\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\r\n    \"}\"\r\n  ].join(\"\\n\"),\r\n  fragmentShader: [\r\n    \"uniform sampler2D tDiffuse;\",\r\n    \"uniform vec2 resolution;\",\r\n    \"varying vec2 vUv;\",\r\n    \"void main() {\",\r\n    \"\tvec2 texelSize = ( 1.0 / resolution );\",\r\n    \"\tfloat result = 0.0;\",\r\n    \"\tfor ( int i = - 2; i <= 2; i ++ ) {\",\r\n    \"\t\tfor ( int j = - 2; j <= 2; j ++ ) {\",\r\n    \"\t\t\tvec2 offset = ( vec2( float( i ), float( j ) ) ) * texelSize;\",\r\n    \"\t\t\tresult += texture2D( tDiffuse, vUv + offset ).r;\",\r\n    \"\t\t}\",\r\n    \"\t}\",\r\n    \"\tgl_FragColor = vec4( vec3( result / ( 5.0 * 5.0 ) ), 1.0 );\",\r\n    \"}\"\r\n  ].join(\"\\n\")\r\n};\r\nexport {\r\n  SSAOBlurShader,\r\n  SSAODepthShader,\r\n  SSAOShader\r\n};\r\n", "var __defProp = Object.defineProperty;\r\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\r\nvar __publicField = (obj, key, value) => {\r\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\r\n  return value;\r\n};\r\nimport { DepthTexture, DepthStencilFormat, UnsignedInt248Type, WebGLRenderTarget, NearestFilter, ShaderMaterial, UniformsUtils, NoBlending, MeshNormalMaterial, DstColorFactor, ZeroFactor, AddEquation, DstAlphaFactor, Color, LuminanceFormat, CustomBlending, Vector3, MathUtils, DataTexture, RedFormat, FloatType, RepeatWrapping } from \"three\";\r\nimport { Pass, FullScreenQuad } from \"./Pass.js\";\r\nimport { SimplexNoise } from \"../math/SimplexNoise.js\";\r\nimport { SSAOShader, SSAOBlurShader, SSAODepthShader } from \"../shaders/SSAOShader.js\";\r\nimport { CopyShader } from \"../shaders/CopyShader.js\";\r\nconst _SSAOPass = class extends Pass {\r\n  constructor(scene, camera, width, height) {\r\n    super();\r\n    this.width = width !== void 0 ? width : 512;\r\n    this.height = height !== void 0 ? height : 512;\r\n    this.clear = true;\r\n    this.camera = camera;\r\n    this.scene = scene;\r\n    this.kernelRadius = 8;\r\n    this.kernelSize = 32;\r\n    this.kernel = [];\r\n    this.noiseTexture = null;\r\n    this.output = 0;\r\n    this.minDistance = 5e-3;\r\n    this.maxDistance = 0.1;\r\n    this._visibilityCache = /* @__PURE__ */ new Map();\r\n    this.generateSampleKernel();\r\n    this.generateRandomKernelRotations();\r\n    const depthTexture = new DepthTexture();\r\n    depthTexture.format = DepthStencilFormat;\r\n    depthTexture.type = UnsignedInt248Type;\r\n    this.beautyRenderTarget = new WebGLRenderTarget(this.width, this.height);\r\n    this.normalRenderTarget = new WebGLRenderTarget(this.width, this.height, {\r\n      minFilter: NearestFilter,\r\n      magFilter: NearestFilter,\r\n      depthTexture\r\n    });\r\n    this.ssaoRenderTarget = new WebGLRenderTarget(this.width, this.height);\r\n    this.blurRenderTarget = this.ssaoRenderTarget.clone();\r\n    if (SSAOShader === void 0) {\r\n      console.error(\"THREE.SSAOPass: The pass relies on SSAOShader.\");\r\n    }\r\n    this.ssaoMaterial = new ShaderMaterial({\r\n      defines: Object.assign({}, SSAOShader.defines),\r\n      uniforms: UniformsUtils.clone(SSAOShader.uniforms),\r\n      vertexShader: SSAOShader.vertexShader,\r\n      fragmentShader: SSAOShader.fragmentShader,\r\n      blending: NoBlending\r\n    });\r\n    this.ssaoMaterial.uniforms[\"tDiffuse\"].value = this.beautyRenderTarget.texture;\r\n    this.ssaoMaterial.uniforms[\"tNormal\"].value = this.normalRenderTarget.texture;\r\n    this.ssaoMaterial.uniforms[\"tDepth\"].value = this.normalRenderTarget.depthTexture;\r\n    this.ssaoMaterial.uniforms[\"tNoise\"].value = this.noiseTexture;\r\n    this.ssaoMaterial.uniforms[\"kernel\"].value = this.kernel;\r\n    this.ssaoMaterial.uniforms[\"cameraNear\"].value = this.camera.near;\r\n    this.ssaoMaterial.uniforms[\"cameraFar\"].value = this.camera.far;\r\n    this.ssaoMaterial.uniforms[\"resolution\"].value.set(this.width, this.height);\r\n    this.ssaoMaterial.uniforms[\"cameraProjectionMatrix\"].value.copy(this.camera.projectionMatrix);\r\n    this.ssaoMaterial.uniforms[\"cameraInverseProjectionMatrix\"].value.copy(this.camera.projectionMatrixInverse);\r\n    this.normalMaterial = new MeshNormalMaterial();\r\n    this.normalMaterial.blending = NoBlending;\r\n    this.blurMaterial = new ShaderMaterial({\r\n      defines: Object.assign({}, SSAOBlurShader.defines),\r\n      uniforms: UniformsUtils.clone(SSAOBlurShader.uniforms),\r\n      vertexShader: SSAOBlurShader.vertexShader,\r\n      fragmentShader: SSAOBlurShader.fragmentShader\r\n    });\r\n    this.blurMaterial.uniforms[\"tDiffuse\"].value = this.ssaoRenderTarget.texture;\r\n    this.blurMaterial.uniforms[\"resolution\"].value.set(this.width, this.height);\r\n    this.depthRenderMaterial = new ShaderMaterial({\r\n      defines: Object.assign({}, SSAODepthShader.defines),\r\n      uniforms: UniformsUtils.clone(SSAODepthShader.uniforms),\r\n      vertexShader: SSAODepthShader.vertexShader,\r\n      fragmentShader: SSAODepthShader.fragmentShader,\r\n      blending: NoBlending\r\n    });\r\n    this.depthRenderMaterial.uniforms[\"tDepth\"].value = this.normalRenderTarget.depthTexture;\r\n    this.depthRenderMaterial.uniforms[\"cameraNear\"].value = this.camera.near;\r\n    this.depthRenderMaterial.uniforms[\"cameraFar\"].value = this.camera.far;\r\n    this.copyMaterial = new ShaderMaterial({\r\n      uniforms: UniformsUtils.clone(CopyShader.uniforms),\r\n      vertexShader: CopyShader.vertexShader,\r\n      fragmentShader: CopyShader.fragmentShader,\r\n      transparent: true,\r\n      depthTest: false,\r\n      depthWrite: false,\r\n      blendSrc: DstColorFactor,\r\n      blendDst: ZeroFactor,\r\n      blendEquation: AddEquation,\r\n      blendSrcAlpha: DstAlphaFactor,\r\n      blendDstAlpha: ZeroFactor,\r\n      blendEquationAlpha: AddEquation\r\n    });\r\n    this.fsQuad = new FullScreenQuad(null);\r\n    this.originalClearColor = new Color();\r\n  }\r\n  dispose() {\r\n    this.beautyRenderTarget.dispose();\r\n    this.normalRenderTarget.dispose();\r\n    this.ssaoRenderTarget.dispose();\r\n    this.blurRenderTarget.dispose();\r\n    this.normalMaterial.dispose();\r\n    this.blurMaterial.dispose();\r\n    this.copyMaterial.dispose();\r\n    this.depthRenderMaterial.dispose();\r\n    this.fsQuad.dispose();\r\n  }\r\n  render(renderer, writeBuffer) {\r\n    if (renderer.capabilities.isWebGL2 === false)\r\n      this.noiseTexture.format = LuminanceFormat;\r\n    renderer.setRenderTarget(this.beautyRenderTarget);\r\n    renderer.clear();\r\n    renderer.render(this.scene, this.camera);\r\n    this.overrideVisibility();\r\n    this.renderOverride(renderer, this.normalMaterial, this.normalRenderTarget, 7829503, 1);\r\n    this.restoreVisibility();\r\n    this.ssaoMaterial.uniforms[\"kernelRadius\"].value = this.kernelRadius;\r\n    this.ssaoMaterial.uniforms[\"minDistance\"].value = this.minDistance;\r\n    this.ssaoMaterial.uniforms[\"maxDistance\"].value = this.maxDistance;\r\n    this.renderPass(renderer, this.ssaoMaterial, this.ssaoRenderTarget);\r\n    this.renderPass(renderer, this.blurMaterial, this.blurRenderTarget);\r\n    switch (this.output) {\r\n      case _SSAOPass.OUTPUT.SSAO:\r\n        this.copyMaterial.uniforms[\"tDiffuse\"].value = this.ssaoRenderTarget.texture;\r\n        this.copyMaterial.blending = NoBlending;\r\n        this.renderPass(renderer, this.copyMaterial, this.renderToScreen ? null : writeBuffer);\r\n        break;\r\n      case _SSAOPass.OUTPUT.Blur:\r\n        this.copyMaterial.uniforms[\"tDiffuse\"].value = this.blurRenderTarget.texture;\r\n        this.copyMaterial.blending = NoBlending;\r\n        this.renderPass(renderer, this.copyMaterial, this.renderToScreen ? null : writeBuffer);\r\n        break;\r\n      case _SSAOPass.OUTPUT.Beauty:\r\n        this.copyMaterial.uniforms[\"tDiffuse\"].value = this.beautyRenderTarget.texture;\r\n        this.copyMaterial.blending = NoBlending;\r\n        this.renderPass(renderer, this.copyMaterial, this.renderToScreen ? null : writeBuffer);\r\n        break;\r\n      case _SSAOPass.OUTPUT.Depth:\r\n        this.renderPass(renderer, this.depthRenderMaterial, this.renderToScreen ? null : writeBuffer);\r\n        break;\r\n      case _SSAOPass.OUTPUT.Normal:\r\n        this.copyMaterial.uniforms[\"tDiffuse\"].value = this.normalRenderTarget.texture;\r\n        this.copyMaterial.blending = NoBlending;\r\n        this.renderPass(renderer, this.copyMaterial, this.renderToScreen ? null : writeBuffer);\r\n        break;\r\n      case _SSAOPass.OUTPUT.Default:\r\n        this.copyMaterial.uniforms[\"tDiffuse\"].value = this.beautyRenderTarget.texture;\r\n        this.copyMaterial.blending = NoBlending;\r\n        this.renderPass(renderer, this.copyMaterial, this.renderToScreen ? null : writeBuffer);\r\n        this.copyMaterial.uniforms[\"tDiffuse\"].value = this.blurRenderTarget.texture;\r\n        this.copyMaterial.blending = CustomBlending;\r\n        this.renderPass(renderer, this.copyMaterial, this.renderToScreen ? null : writeBuffer);\r\n        break;\r\n      default:\r\n        console.warn(\"THREE.SSAOPass: Unknown output type.\");\r\n    }\r\n  }\r\n  renderPass(renderer, passMaterial, renderTarget, clearColor, clearAlpha) {\r\n    renderer.getClearColor(this.originalClearColor);\r\n    const originalClearAlpha = renderer.getClearAlpha();\r\n    const originalAutoClear = renderer.autoClear;\r\n    renderer.setRenderTarget(renderTarget);\r\n    renderer.autoClear = false;\r\n    if (clearColor !== void 0 && clearColor !== null) {\r\n      renderer.setClearColor(clearColor);\r\n      renderer.setClearAlpha(clearAlpha || 0);\r\n      renderer.clear();\r\n    }\r\n    this.fsQuad.material = passMaterial;\r\n    this.fsQuad.render(renderer);\r\n    renderer.autoClear = originalAutoClear;\r\n    renderer.setClearColor(this.originalClearColor);\r\n    renderer.setClearAlpha(originalClearAlpha);\r\n  }\r\n  renderOverride(renderer, overrideMaterial, renderTarget, clearColor, clearAlpha) {\r\n    renderer.getClearColor(this.originalClearColor);\r\n    const originalClearAlpha = renderer.getClearAlpha();\r\n    const originalAutoClear = renderer.autoClear;\r\n    renderer.setRenderTarget(renderTarget);\r\n    renderer.autoClear = false;\r\n    clearColor = overrideMaterial.clearColor || clearColor;\r\n    clearAlpha = overrideMaterial.clearAlpha || clearAlpha;\r\n    if (clearColor !== void 0 && clearColor !== null) {\r\n      renderer.setClearColor(clearColor);\r\n      renderer.setClearAlpha(clearAlpha || 0);\r\n      renderer.clear();\r\n    }\r\n    this.scene.overrideMaterial = overrideMaterial;\r\n    renderer.render(this.scene, this.camera);\r\n    this.scene.overrideMaterial = null;\r\n    renderer.autoClear = originalAutoClear;\r\n    renderer.setClearColor(this.originalClearColor);\r\n    renderer.setClearAlpha(originalClearAlpha);\r\n  }\r\n  setSize(width, height) {\r\n    this.width = width;\r\n    this.height = height;\r\n    this.beautyRenderTarget.setSize(width, height);\r\n    this.ssaoRenderTarget.setSize(width, height);\r\n    this.normalRenderTarget.setSize(width, height);\r\n    this.blurRenderTarget.setSize(width, height);\r\n    this.ssaoMaterial.uniforms[\"resolution\"].value.set(width, height);\r\n    this.ssaoMaterial.uniforms[\"cameraProjectionMatrix\"].value.copy(this.camera.projectionMatrix);\r\n    this.ssaoMaterial.uniforms[\"cameraInverseProjectionMatrix\"].value.copy(this.camera.projectionMatrixInverse);\r\n    this.blurMaterial.uniforms[\"resolution\"].value.set(width, height);\r\n  }\r\n  generateSampleKernel() {\r\n    const kernelSize = this.kernelSize;\r\n    const kernel = this.kernel;\r\n    for (let i = 0; i < kernelSize; i++) {\r\n      const sample = new Vector3();\r\n      sample.x = Math.random() * 2 - 1;\r\n      sample.y = Math.random() * 2 - 1;\r\n      sample.z = Math.random();\r\n      sample.normalize();\r\n      let scale = i / kernelSize;\r\n      scale = MathUtils.lerp(0.1, 1, scale * scale);\r\n      sample.multiplyScalar(scale);\r\n      kernel.push(sample);\r\n    }\r\n  }\r\n  generateRandomKernelRotations() {\r\n    const width = 4, height = 4;\r\n    if (SimplexNoise === void 0) {\r\n      console.error(\"THREE.SSAOPass: The pass relies on SimplexNoise.\");\r\n    }\r\n    const simplex = new SimplexNoise();\r\n    const size = width * height;\r\n    const data = new Float32Array(size);\r\n    for (let i = 0; i < size; i++) {\r\n      const x = Math.random() * 2 - 1;\r\n      const y = Math.random() * 2 - 1;\r\n      const z = 0;\r\n      data[i] = simplex.noise3d(x, y, z);\r\n    }\r\n    this.noiseTexture = new DataTexture(data, width, height, RedFormat, FloatType);\r\n    this.noiseTexture.wrapS = RepeatWrapping;\r\n    this.noiseTexture.wrapT = RepeatWrapping;\r\n    this.noiseTexture.needsUpdate = true;\r\n  }\r\n  overrideVisibility() {\r\n    const scene = this.scene;\r\n    const cache = this._visibilityCache;\r\n    scene.traverse(function(object) {\r\n      cache.set(object, object.visible);\r\n      if (object.isPoints || object.isLine)\r\n        object.visible = false;\r\n    });\r\n  }\r\n  restoreVisibility() {\r\n    const scene = this.scene;\r\n    const cache = this._visibilityCache;\r\n    scene.traverse(function(object) {\r\n      const visible = cache.get(object);\r\n      object.visible = visible;\r\n    });\r\n    cache.clear();\r\n  }\r\n};\r\nlet SSAOPass = _SSAOPass;\r\n__publicField(SSAOPass, \"OUTPUT\", {\r\n  Default: 0,\r\n  SSAO: 1,\r\n  Blur: 2,\r\n  Beauty: 3,\r\n  Depth: 4,\r\n  Normal: 5\r\n});\r\nexport {\r\n  SSAOPass\r\n};\r\n", "const BokehShader = {\r\n  defines: {\r\n    DEPTH_PACKING: 1,\r\n    PERSPECTIVE_CAMERA: 1\r\n  },\r\n  uniforms: {\r\n    tColor: { value: null },\r\n    tDepth: { value: null },\r\n    focus: { value: 1 },\r\n    aspect: { value: 1 },\r\n    aperture: { value: 0.025 },\r\n    maxblur: { value: 0.01 },\r\n    nearClip: { value: 1 },\r\n    farClip: { value: 1e3 }\r\n  },\r\n  vertexShader: [\r\n    \"varying vec2 vUv;\",\r\n    \"void main() {\",\r\n    \"\tvUv = uv;\",\r\n    \"\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\r\n    \"}\"\r\n  ].join(\"\\n\"),\r\n  fragmentShader: [\r\n    \"#include <common>\",\r\n    \"varying vec2 vUv;\",\r\n    \"uniform sampler2D tColor;\",\r\n    \"uniform sampler2D tDepth;\",\r\n    \"uniform float maxblur;\",\r\n    // max blur amount\r\n    \"uniform float aperture;\",\r\n    // aperture - bigger values for shallower depth of field\r\n    \"uniform float nearClip;\",\r\n    \"uniform float farClip;\",\r\n    \"uniform float focus;\",\r\n    \"uniform float aspect;\",\r\n    \"#include <packing>\",\r\n    \"float getDepth( const in vec2 screenPosition ) {\",\r\n    \"\t#if DEPTH_PACKING == 1\",\r\n    \"\treturn unpackRGBAToDepth( texture2D( tDepth, screenPosition ) );\",\r\n    \"\t#else\",\r\n    \"\treturn texture2D( tDepth, screenPosition ).x;\",\r\n    \"\t#endif\",\r\n    \"}\",\r\n    \"float getViewZ( const in float depth ) {\",\r\n    \"\t#if PERSPECTIVE_CAMERA == 1\",\r\n    \"\treturn perspectiveDepthToViewZ( depth, nearClip, farClip );\",\r\n    \"\t#else\",\r\n    \"\treturn orthographicDepthToViewZ( depth, nearClip, farClip );\",\r\n    \"\t#endif\",\r\n    \"}\",\r\n    \"void main() {\",\r\n    \"\tvec2 aspectcorrect = vec2( 1.0, aspect );\",\r\n    \"\tfloat viewZ = getViewZ( getDepth( vUv ) );\",\r\n    \"\tfloat factor = ( focus + viewZ );\",\r\n    // viewZ is <= 0, so this is a difference equation\r\n    \"\tvec2 dofblur = vec2 ( clamp( factor * aperture, -maxblur, maxblur ) );\",\r\n    \"\tvec2 dofblur9 = dofblur * 0.9;\",\r\n    \"\tvec2 dofblur7 = dofblur * 0.7;\",\r\n    \"\tvec2 dofblur4 = dofblur * 0.4;\",\r\n    \"\tvec4 col = vec4( 0.0 );\",\r\n    \"\tcol += texture2D( tColor, vUv.xy );\",\r\n    \"\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.0,   0.4  ) * aspectcorrect ) * dofblur );\",\r\n    \"\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.15,  0.37 ) * aspectcorrect ) * dofblur );\",\r\n    \"\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.29,  0.29 ) * aspectcorrect ) * dofblur );\",\r\n    \"\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.37,  0.15 ) * aspectcorrect ) * dofblur );\",\r\n    \"\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.40,  0.0  ) * aspectcorrect ) * dofblur );\",\r\n    \"\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.37, -0.15 ) * aspectcorrect ) * dofblur );\",\r\n    \"\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.29, -0.29 ) * aspectcorrect ) * dofblur );\",\r\n    \"\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.15, -0.37 ) * aspectcorrect ) * dofblur );\",\r\n    \"\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.0,  -0.4  ) * aspectcorrect ) * dofblur );\",\r\n    \"\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.15,  0.37 ) * aspectcorrect ) * dofblur );\",\r\n    \"\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.29,  0.29 ) * aspectcorrect ) * dofblur );\",\r\n    \"\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.37,  0.15 ) * aspectcorrect ) * dofblur );\",\r\n    \"\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.4,   0.0  ) * aspectcorrect ) * dofblur );\",\r\n    \"\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.37, -0.15 ) * aspectcorrect ) * dofblur );\",\r\n    \"\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.29, -0.29 ) * aspectcorrect ) * dofblur );\",\r\n    \"\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.15, -0.37 ) * aspectcorrect ) * dofblur );\",\r\n    \"\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.15,  0.37 ) * aspectcorrect ) * dofblur9 );\",\r\n    \"\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.37,  0.15 ) * aspectcorrect ) * dofblur9 );\",\r\n    \"\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.37, -0.15 ) * aspectcorrect ) * dofblur9 );\",\r\n    \"\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.15, -0.37 ) * aspectcorrect ) * dofblur9 );\",\r\n    \"\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.15,  0.37 ) * aspectcorrect ) * dofblur9 );\",\r\n    \"\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.37,  0.15 ) * aspectcorrect ) * dofblur9 );\",\r\n    \"\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.37, -0.15 ) * aspectcorrect ) * dofblur9 );\",\r\n    \"\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.15, -0.37 ) * aspectcorrect ) * dofblur9 );\",\r\n    \"\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.29,  0.29 ) * aspectcorrect ) * dofblur7 );\",\r\n    \"\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.40,  0.0  ) * aspectcorrect ) * dofblur7 );\",\r\n    \"\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.29, -0.29 ) * aspectcorrect ) * dofblur7 );\",\r\n    \"\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.0,  -0.4  ) * aspectcorrect ) * dofblur7 );\",\r\n    \"\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.29,  0.29 ) * aspectcorrect ) * dofblur7 );\",\r\n    \"\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.4,   0.0  ) * aspectcorrect ) * dofblur7 );\",\r\n    \"\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.29, -0.29 ) * aspectcorrect ) * dofblur7 );\",\r\n    \"\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.0,   0.4  ) * aspectcorrect ) * dofblur7 );\",\r\n    \"\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.29,  0.29 ) * aspectcorrect ) * dofblur4 );\",\r\n    \"\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.4,   0.0  ) * aspectcorrect ) * dofblur4 );\",\r\n    \"\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.29, -0.29 ) * aspectcorrect ) * dofblur4 );\",\r\n    \"\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.0,  -0.4  ) * aspectcorrect ) * dofblur4 );\",\r\n    \"\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.29,  0.29 ) * aspectcorrect ) * dofblur4 );\",\r\n    \"\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.4,   0.0  ) * aspectcorrect ) * dofblur4 );\",\r\n    \"\tcol += texture2D( tColor, vUv.xy + ( vec2( -0.29, -0.29 ) * aspectcorrect ) * dofblur4 );\",\r\n    \"\tcol += texture2D( tColor, vUv.xy + ( vec2(  0.0,   0.4  ) * aspectcorrect ) * dofblur4 );\",\r\n    \"\tgl_FragColor = col / 41.0;\",\r\n    \"\tgl_FragColor.a = 1.0;\",\r\n    \"}\"\r\n  ].join(\"\\n\")\r\n};\r\nexport {\r\n  BokehShader\r\n};\r\n", "const LuminosityShader = {\r\n  uniforms: {\r\n    tDiffuse: { value: null }\r\n  },\r\n  vertexShader: [\r\n    \"varying vec2 vUv;\",\r\n    \"void main() {\",\r\n    \"\tvUv = uv;\",\r\n    \"\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\r\n    \"}\"\r\n  ].join(\"\\n\"),\r\n  fragmentShader: [\r\n    \"#include <common>\",\r\n    \"uniform sampler2D tDiffuse;\",\r\n    \"varying vec2 vUv;\",\r\n    \"void main() {\",\r\n    \"\tvec4 texel = texture2D( tDiffuse, vUv );\",\r\n    \"\tfloat l = linearToRelativeLuminance( texel.rgb );\",\r\n    \"\tgl_FragColor = vec4( l, l, l, texel.w );\",\r\n    \"}\"\r\n  ].join(\"\\n\")\r\n};\r\nexport {\r\n  LuminosityShader\r\n};\r\n", "const ToneMapShader = {\r\n  uniforms: {\r\n    tDiffuse: { value: null },\r\n    averageLuminance: { value: 1 },\r\n    luminanceMap: { value: null },\r\n    maxLuminance: { value: 16 },\r\n    minLuminance: { value: 0.01 },\r\n    middleGrey: { value: 0.6 }\r\n  },\r\n  vertexShader: [\r\n    \"varying vec2 vUv;\",\r\n    \"void main() {\",\r\n    \"\tvUv = uv;\",\r\n    \"\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\r\n    \"}\"\r\n  ].join(\"\\n\"),\r\n  fragmentShader: [\r\n    \"#include <common>\",\r\n    \"uniform sampler2D tDiffuse;\",\r\n    \"varying vec2 vUv;\",\r\n    \"uniform float middleGrey;\",\r\n    \"uniform float minLuminance;\",\r\n    \"uniform float maxLuminance;\",\r\n    \"#ifdef ADAPTED_LUMINANCE\",\r\n    \"\tuniform sampler2D luminanceMap;\",\r\n    \"#else\",\r\n    \"\tuniform float averageLuminance;\",\r\n    \"#endif\",\r\n    \"vec3 ToneMap( vec3 vColor ) {\",\r\n    \"\t#ifdef ADAPTED_LUMINANCE\",\r\n    // Get the calculated average luminance\r\n    \"\t\tfloat fLumAvg = texture2D(luminanceMap, vec2(0.5, 0.5)).r;\",\r\n    \"\t#else\",\r\n    \"\t\tfloat fLumAvg = averageLuminance;\",\r\n    \"\t#endif\",\r\n    // Calculate the luminance of the current pixel\r\n    \"\tfloat fLumPixel = linearToRelativeLuminance( vColor );\",\r\n    // Apply the modified operator (Eq. 4)\r\n    \"\tfloat fLumScaled = (fLumPixel * middleGrey) / max( minLuminance, fLumAvg );\",\r\n    \"\tfloat fLumCompressed = (fLumScaled * (1.0 + (fLumScaled / (maxLuminance * maxLuminance)))) / (1.0 + fLumScaled);\",\r\n    \"\treturn fLumCompressed * vColor;\",\r\n    \"}\",\r\n    \"void main() {\",\r\n    \"\tvec4 texel = texture2D( tDiffuse, vUv );\",\r\n    \"\tgl_FragColor = vec4( ToneMap( texel.xyz ), texel.w );\",\r\n    \"}\"\r\n  ].join(\"\\n\")\r\n};\r\nexport {\r\n  ToneMapShader\r\n};\r\n", "import { Color } from \"three\";\r\nconst LuminosityHighPassShader = {\r\n  shaderID: \"luminosityHighPass\",\r\n  uniforms: {\r\n    tDiffuse: { value: null },\r\n    luminosityThreshold: { value: 1 },\r\n    smoothWidth: { value: 1 },\r\n    defaultColor: { value: /* @__PURE__ */ new Color(0) },\r\n    defaultOpacity: { value: 0 }\r\n  },\r\n  vertexShader: [\r\n    \"varying vec2 vUv;\",\r\n    \"void main() {\",\r\n    \"\tvUv = uv;\",\r\n    \"\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\r\n    \"}\"\r\n  ].join(\"\\n\"),\r\n  fragmentShader: [\r\n    \"uniform sampler2D tDiffuse;\",\r\n    \"uniform vec3 defaultColor;\",\r\n    \"uniform float defaultOpacity;\",\r\n    \"uniform float luminosityThreshold;\",\r\n    \"uniform float smoothWidth;\",\r\n    \"varying vec2 vUv;\",\r\n    \"void main() {\",\r\n    \"\tvec4 texel = texture2D( tDiffuse, vUv );\",\r\n    \"\tvec3 luma = vec3( 0.299, 0.587, 0.114 );\",\r\n    \"\tfloat v = dot( texel.xyz, luma );\",\r\n    \"\tvec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );\",\r\n    \"\tfloat alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );\",\r\n    \"\tgl_FragColor = mix( outputColor, texel, alpha );\",\r\n    \"}\"\r\n  ].join(\"\\n\")\r\n};\r\nexport {\r\n  LuminosityHighPassShader\r\n};\r\n", "var __defProp = Object.defineProperty;\r\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\r\nvar __publicField = (obj, key, value) => {\r\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\r\n  return value;\r\n};\r\nimport { Vector2, Color, WebGLRenderTarget, HalfFloatType, UniformsUtils, ShaderMaterial, Vector3, AdditiveBlending, MeshBasicMaterial } from \"three\";\r\nimport { Pass, FullScreenQuad } from \"./Pass.js\";\r\nimport { CopyShader } from \"../shaders/CopyShader.js\";\r\nimport { LuminosityHighPassShader } from \"../shaders/LuminosityHighPassShader.js\";\r\nconst _UnrealBloomPass = class extends Pass {\r\n  constructor(resolution, strength, radius, threshold) {\r\n    super();\r\n    this.strength = strength !== void 0 ? strength : 1;\r\n    this.radius = radius;\r\n    this.threshold = threshold;\r\n    this.resolution = resolution !== void 0 ? new Vector2(resolution.x, resolution.y) : new Vector2(256, 256);\r\n    this.clearColor = new Color(0, 0, 0);\r\n    this.renderTargetsHorizontal = [];\r\n    this.renderTargetsVertical = [];\r\n    this.nMips = 5;\r\n    let resx = Math.round(this.resolution.x / 2);\r\n    let resy = Math.round(this.resolution.y / 2);\r\n    this.renderTargetBright = new WebGLRenderTarget(resx, resy, { type: HalfFloatType });\r\n    this.renderTargetBright.texture.name = \"UnrealBloomPass.bright\";\r\n    this.renderTargetBright.texture.generateMipmaps = false;\r\n    for (let i = 0; i < this.nMips; i++) {\r\n      const renderTargetHorizonal = new WebGLRenderTarget(resx, resy, { type: HalfFloatType });\r\n      renderTargetHorizonal.texture.name = \"UnrealBloomPass.h\" + i;\r\n      renderTargetHorizonal.texture.generateMipmaps = false;\r\n      this.renderTargetsHorizontal.push(renderTargetHorizonal);\r\n      const renderTargetVertical = new WebGLRenderTarget(resx, resy, { type: HalfFloatType });\r\n      renderTargetVertical.texture.name = \"UnrealBloomPass.v\" + i;\r\n      renderTargetVertical.texture.generateMipmaps = false;\r\n      this.renderTargetsVertical.push(renderTargetVertical);\r\n      resx = Math.round(resx / 2);\r\n      resy = Math.round(resy / 2);\r\n    }\r\n    const highPassShader = LuminosityHighPassShader;\r\n    this.highPassUniforms = UniformsUtils.clone(highPassShader.uniforms);\r\n    this.highPassUniforms[\"luminosityThreshold\"].value = threshold;\r\n    this.highPassUniforms[\"smoothWidth\"].value = 0.01;\r\n    this.materialHighPassFilter = new ShaderMaterial({\r\n      uniforms: this.highPassUniforms,\r\n      vertexShader: highPassShader.vertexShader,\r\n      fragmentShader: highPassShader.fragmentShader,\r\n      defines: {}\r\n    });\r\n    this.separableBlurMaterials = [];\r\n    const kernelSizeArray = [3, 5, 7, 9, 11];\r\n    resx = Math.round(this.resolution.x / 2);\r\n    resy = Math.round(this.resolution.y / 2);\r\n    for (let i = 0; i < this.nMips; i++) {\r\n      this.separableBlurMaterials.push(this.getSeperableBlurMaterial(kernelSizeArray[i]));\r\n      this.separableBlurMaterials[i].uniforms[\"texSize\"].value = new Vector2(resx, resy);\r\n      resx = Math.round(resx / 2);\r\n      resy = Math.round(resy / 2);\r\n    }\r\n    this.compositeMaterial = this.getCompositeMaterial(this.nMips);\r\n    this.compositeMaterial.uniforms[\"blurTexture1\"].value = this.renderTargetsVertical[0].texture;\r\n    this.compositeMaterial.uniforms[\"blurTexture2\"].value = this.renderTargetsVertical[1].texture;\r\n    this.compositeMaterial.uniforms[\"blurTexture3\"].value = this.renderTargetsVertical[2].texture;\r\n    this.compositeMaterial.uniforms[\"blurTexture4\"].value = this.renderTargetsVertical[3].texture;\r\n    this.compositeMaterial.uniforms[\"blurTexture5\"].value = this.renderTargetsVertical[4].texture;\r\n    this.compositeMaterial.uniforms[\"bloomStrength\"].value = strength;\r\n    this.compositeMaterial.uniforms[\"bloomRadius\"].value = 0.1;\r\n    this.compositeMaterial.needsUpdate = true;\r\n    const bloomFactors = [1, 0.8, 0.6, 0.4, 0.2];\r\n    this.compositeMaterial.uniforms[\"bloomFactors\"].value = bloomFactors;\r\n    this.bloomTintColors = [\r\n      new Vector3(1, 1, 1),\r\n      new Vector3(1, 1, 1),\r\n      new Vector3(1, 1, 1),\r\n      new Vector3(1, 1, 1),\r\n      new Vector3(1, 1, 1)\r\n    ];\r\n    this.compositeMaterial.uniforms[\"bloomTintColors\"].value = this.bloomTintColors;\r\n    const copyShader = CopyShader;\r\n    this.copyUniforms = UniformsUtils.clone(copyShader.uniforms);\r\n    this.copyUniforms[\"opacity\"].value = 1;\r\n    this.materialCopy = new ShaderMaterial({\r\n      uniforms: this.copyUniforms,\r\n      vertexShader: copyShader.vertexShader,\r\n      fragmentShader: copyShader.fragmentShader,\r\n      blending: AdditiveBlending,\r\n      depthTest: false,\r\n      depthWrite: false,\r\n      transparent: true\r\n    });\r\n    this.enabled = true;\r\n    this.needsSwap = false;\r\n    this._oldClearColor = new Color();\r\n    this.oldClearAlpha = 1;\r\n    this.basic = new MeshBasicMaterial();\r\n    this.fsQuad = new FullScreenQuad(null);\r\n  }\r\n  dispose() {\r\n    for (let i = 0; i < this.renderTargetsHorizontal.length; i++) {\r\n      this.renderTargetsHorizontal[i].dispose();\r\n    }\r\n    for (let i = 0; i < this.renderTargetsVertical.length; i++) {\r\n      this.renderTargetsVertical[i].dispose();\r\n    }\r\n    this.renderTargetBright.dispose();\r\n    for (let i = 0; i < this.separableBlurMaterials.length; i++) {\r\n      this.separableBlurMaterials[i].dispose();\r\n    }\r\n    this.compositeMaterial.dispose();\r\n    this.materialCopy.dispose();\r\n    this.basic.dispose();\r\n    this.fsQuad.dispose();\r\n  }\r\n  setSize(width, height) {\r\n    let resx = Math.round(width / 2);\r\n    let resy = Math.round(height / 2);\r\n    this.renderTargetBright.setSize(resx, resy);\r\n    for (let i = 0; i < this.nMips; i++) {\r\n      this.renderTargetsHorizontal[i].setSize(resx, resy);\r\n      this.renderTargetsVertical[i].setSize(resx, resy);\r\n      this.separableBlurMaterials[i].uniforms[\"texSize\"].value = new Vector2(resx, resy);\r\n      resx = Math.round(resx / 2);\r\n      resy = Math.round(resy / 2);\r\n    }\r\n  }\r\n  render(renderer, writeBuffer, readBuffer, deltaTime, maskActive) {\r\n    renderer.getClearColor(this._oldClearColor);\r\n    this.oldClearAlpha = renderer.getClearAlpha();\r\n    const oldAutoClear = renderer.autoClear;\r\n    renderer.autoClear = false;\r\n    renderer.setClearColor(this.clearColor, 0);\r\n    if (maskActive)\r\n      renderer.state.buffers.stencil.setTest(false);\r\n    if (this.renderToScreen) {\r\n      this.fsQuad.material = this.basic;\r\n      this.basic.map = readBuffer.texture;\r\n      renderer.setRenderTarget(null);\r\n      renderer.clear();\r\n      this.fsQuad.render(renderer);\r\n    }\r\n    this.highPassUniforms[\"tDiffuse\"].value = readBuffer.texture;\r\n    this.highPassUniforms[\"luminosityThreshold\"].value = this.threshold;\r\n    this.fsQuad.material = this.materialHighPassFilter;\r\n    renderer.setRenderTarget(this.renderTargetBright);\r\n    renderer.clear();\r\n    this.fsQuad.render(renderer);\r\n    let inputRenderTarget = this.renderTargetBright;\r\n    for (let i = 0; i < this.nMips; i++) {\r\n      this.fsQuad.material = this.separableBlurMaterials[i];\r\n      this.separableBlurMaterials[i].uniforms[\"colorTexture\"].value = inputRenderTarget.texture;\r\n      this.separableBlurMaterials[i].uniforms[\"direction\"].value = _UnrealBloomPass.BlurDirectionX;\r\n      renderer.setRenderTarget(this.renderTargetsHorizontal[i]);\r\n      renderer.clear();\r\n      this.fsQuad.render(renderer);\r\n      this.separableBlurMaterials[i].uniforms[\"colorTexture\"].value = this.renderTargetsHorizontal[i].texture;\r\n      this.separableBlurMaterials[i].uniforms[\"direction\"].value = _UnrealBloomPass.BlurDirectionY;\r\n      renderer.setRenderTarget(this.renderTargetsVertical[i]);\r\n      renderer.clear();\r\n      this.fsQuad.render(renderer);\r\n      inputRenderTarget = this.renderTargetsVertical[i];\r\n    }\r\n    this.fsQuad.material = this.compositeMaterial;\r\n    this.compositeMaterial.uniforms[\"bloomStrength\"].value = this.strength;\r\n    this.compositeMaterial.uniforms[\"bloomRadius\"].value = this.radius;\r\n    this.compositeMaterial.uniforms[\"bloomTintColors\"].value = this.bloomTintColors;\r\n    renderer.setRenderTarget(this.renderTargetsHorizontal[0]);\r\n    renderer.clear();\r\n    this.fsQuad.render(renderer);\r\n    this.fsQuad.material = this.materialCopy;\r\n    this.copyUniforms[\"tDiffuse\"].value = this.renderTargetsHorizontal[0].texture;\r\n    if (maskActive)\r\n      renderer.state.buffers.stencil.setTest(true);\r\n    if (this.renderToScreen) {\r\n      renderer.setRenderTarget(null);\r\n      this.fsQuad.render(renderer);\r\n    } else {\r\n      renderer.setRenderTarget(readBuffer);\r\n      this.fsQuad.render(renderer);\r\n    }\r\n    renderer.setClearColor(this._oldClearColor, this.oldClearAlpha);\r\n    renderer.autoClear = oldAutoClear;\r\n  }\r\n  getSeperableBlurMaterial(kernelRadius) {\r\n    return new ShaderMaterial({\r\n      defines: {\r\n        KERNEL_RADIUS: kernelRadius,\r\n        SIGMA: kernelRadius\r\n      },\r\n      uniforms: {\r\n        colorTexture: { value: null },\r\n        texSize: { value: new Vector2(0.5, 0.5) },\r\n        direction: { value: new Vector2(0.5, 0.5) }\r\n      },\r\n      vertexShader: `varying vec2 vUv;\r\n\t\t\t\tvoid main() {\r\n\t\t\t\t\tvUv = uv;\r\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\r\n\t\t\t\t}`,\r\n      fragmentShader: `#include <common>\r\n\t\t\t\tvarying vec2 vUv;\r\n\t\t\t\tuniform sampler2D colorTexture;\r\n\t\t\t\tuniform vec2 texSize;\r\n\t\t\t\tuniform vec2 direction;\r\n\r\n\t\t\t\tfloat gaussianPdf(in float x, in float sigma) {\r\n\t\t\t\t\treturn 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;\r\n\t\t\t\t}\r\n\t\t\t\tvoid main() {\r\n\t\t\t\t\tvec2 invSize = 1.0 / texSize;\r\n\t\t\t\t\tfloat fSigma = float(SIGMA);\r\n\t\t\t\t\tfloat weightSum = gaussianPdf(0.0, fSigma);\r\n\t\t\t\t\tvec3 diffuseSum = texture2D( colorTexture, vUv).rgb * weightSum;\r\n\t\t\t\t\tfor( int i = 1; i < KERNEL_RADIUS; i ++ ) {\r\n\t\t\t\t\t\tfloat x = float(i);\r\n\t\t\t\t\t\tfloat w = gaussianPdf(x, fSigma);\r\n\t\t\t\t\t\tvec2 uvOffset = direction * invSize * x;\r\n\t\t\t\t\t\tvec3 sample1 = texture2D( colorTexture, vUv + uvOffset).rgb;\r\n\t\t\t\t\t\tvec3 sample2 = texture2D( colorTexture, vUv - uvOffset).rgb;\r\n\t\t\t\t\t\tdiffuseSum += (sample1 + sample2) * w;\r\n\t\t\t\t\t\tweightSum += 2.0 * w;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tgl_FragColor = vec4(diffuseSum/weightSum, 1.0);\r\n\t\t\t\t}`\r\n    });\r\n  }\r\n  getCompositeMaterial(nMips) {\r\n    return new ShaderMaterial({\r\n      defines: {\r\n        NUM_MIPS: nMips\r\n      },\r\n      uniforms: {\r\n        blurTexture1: { value: null },\r\n        blurTexture2: { value: null },\r\n        blurTexture3: { value: null },\r\n        blurTexture4: { value: null },\r\n        blurTexture5: { value: null },\r\n        bloomStrength: { value: 1 },\r\n        bloomFactors: { value: null },\r\n        bloomTintColors: { value: null },\r\n        bloomRadius: { value: 0 }\r\n      },\r\n      vertexShader: `varying vec2 vUv;\r\n\t\t\t\tvoid main() {\r\n\t\t\t\t\tvUv = uv;\r\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\r\n\t\t\t\t}`,\r\n      fragmentShader: `varying vec2 vUv;\r\n\t\t\t\tuniform sampler2D blurTexture1;\r\n\t\t\t\tuniform sampler2D blurTexture2;\r\n\t\t\t\tuniform sampler2D blurTexture3;\r\n\t\t\t\tuniform sampler2D blurTexture4;\r\n\t\t\t\tuniform sampler2D blurTexture5;\r\n\t\t\t\tuniform float bloomStrength;\r\n\t\t\t\tuniform float bloomRadius;\r\n\t\t\t\tuniform float bloomFactors[NUM_MIPS];\r\n\t\t\t\tuniform vec3 bloomTintColors[NUM_MIPS];\r\n\r\n\t\t\t\tfloat lerpBloomFactor(const in float factor) {\r\n\t\t\t\t\tfloat mirrorFactor = 1.2 - factor;\r\n\t\t\t\t\treturn mix(factor, mirrorFactor, bloomRadius);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvoid main() {\r\n\t\t\t\t\tgl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) +\r\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) +\r\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) +\r\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) +\r\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );\r\n\t\t\t\t}`\r\n    });\r\n  }\r\n};\r\nlet UnrealBloomPass = _UnrealBloomPass;\r\n__publicField(UnrealBloomPass, \"BlurDirectionX\", /* @__PURE__ */ new Vector2(1, 0));\r\n__publicField(UnrealBloomPass, \"BlurDirectionY\", /* @__PURE__ */ new Vector2(0, 1));\r\nexport {\r\n  UnrealBloomPass\r\n};\r\n", "import { Vector2, Matrix4 } from \"three\";\r\nconst SAOShader = {\r\n  defines: {\r\n    NUM_SAMPLES: 7,\r\n    NUM_RINGS: 4,\r\n    NORMAL_TEXTURE: 0,\r\n    DIFFUSE_TEXTURE: 0,\r\n    DEPTH_PACKING: 1,\r\n    PERSPECTIVE_CAMERA: 1\r\n  },\r\n  uniforms: {\r\n    tDepth: { value: null },\r\n    tDiffuse: { value: null },\r\n    tNormal: { value: null },\r\n    size: { value: /* @__PURE__ */ new Vector2(512, 512) },\r\n    cameraNear: { value: 1 },\r\n    cameraFar: { value: 100 },\r\n    cameraProjectionMatrix: { value: /* @__PURE__ */ new Matrix4() },\r\n    cameraInverseProjectionMatrix: { value: /* @__PURE__ */ new Matrix4() },\r\n    scale: { value: 1 },\r\n    intensity: { value: 0.1 },\r\n    bias: { value: 0.5 },\r\n    minResolution: { value: 0 },\r\n    kernelRadius: { value: 100 },\r\n    randomSeed: { value: 0 }\r\n  },\r\n  vertexShader: [\r\n    \"varying vec2 vUv;\",\r\n    \"void main() {\",\r\n    \"\tvUv = uv;\",\r\n    \"\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\r\n    \"}\"\r\n  ].join(\"\\n\"),\r\n  fragmentShader: [\r\n    \"#include <common>\",\r\n    \"varying vec2 vUv;\",\r\n    \"#if DIFFUSE_TEXTURE == 1\",\r\n    \"uniform sampler2D tDiffuse;\",\r\n    \"#endif\",\r\n    \"uniform sampler2D tDepth;\",\r\n    \"#if NORMAL_TEXTURE == 1\",\r\n    \"uniform sampler2D tNormal;\",\r\n    \"#endif\",\r\n    \"uniform float cameraNear;\",\r\n    \"uniform float cameraFar;\",\r\n    \"uniform mat4 cameraProjectionMatrix;\",\r\n    \"uniform mat4 cameraInverseProjectionMatrix;\",\r\n    \"uniform float scale;\",\r\n    \"uniform float intensity;\",\r\n    \"uniform float bias;\",\r\n    \"uniform float kernelRadius;\",\r\n    \"uniform float minResolution;\",\r\n    \"uniform vec2 size;\",\r\n    \"uniform float randomSeed;\",\r\n    \"// RGBA depth\",\r\n    \"#include <packing>\",\r\n    \"vec4 getDefaultColor( const in vec2 screenPosition ) {\",\r\n    \"\t#if DIFFUSE_TEXTURE == 1\",\r\n    \"\treturn texture2D( tDiffuse, vUv );\",\r\n    \"\t#else\",\r\n    \"\treturn vec4( 1.0 );\",\r\n    \"\t#endif\",\r\n    \"}\",\r\n    \"float getDepth( const in vec2 screenPosition ) {\",\r\n    \"\t#if DEPTH_PACKING == 1\",\r\n    \"\treturn unpackRGBAToDepth( texture2D( tDepth, screenPosition ) );\",\r\n    \"\t#else\",\r\n    \"\treturn texture2D( tDepth, screenPosition ).x;\",\r\n    \"\t#endif\",\r\n    \"}\",\r\n    \"float getViewZ( const in float depth ) {\",\r\n    \"\t#if PERSPECTIVE_CAMERA == 1\",\r\n    \"\treturn perspectiveDepthToViewZ( depth, cameraNear, cameraFar );\",\r\n    \"\t#else\",\r\n    \"\treturn orthographicDepthToViewZ( depth, cameraNear, cameraFar );\",\r\n    \"\t#endif\",\r\n    \"}\",\r\n    \"vec3 getViewPosition( const in vec2 screenPosition, const in float depth, const in float viewZ ) {\",\r\n    \"\tfloat clipW = cameraProjectionMatrix[2][3] * viewZ + cameraProjectionMatrix[3][3];\",\r\n    \"\tvec4 clipPosition = vec4( ( vec3( screenPosition, depth ) - 0.5 ) * 2.0, 1.0 );\",\r\n    \"\tclipPosition *= clipW; // unprojection.\",\r\n    \"\treturn ( cameraInverseProjectionMatrix * clipPosition ).xyz;\",\r\n    \"}\",\r\n    \"vec3 getViewNormal( const in vec3 viewPosition, const in vec2 screenPosition ) {\",\r\n    \"\t#if NORMAL_TEXTURE == 1\",\r\n    \"\treturn unpackRGBToNormal( texture2D( tNormal, screenPosition ).xyz );\",\r\n    \"\t#else\",\r\n    \"\treturn normalize( cross( dFdx( viewPosition ), dFdy( viewPosition ) ) );\",\r\n    \"\t#endif\",\r\n    \"}\",\r\n    \"float scaleDividedByCameraFar;\",\r\n    \"float minResolutionMultipliedByCameraFar;\",\r\n    \"float getOcclusion( const in vec3 centerViewPosition, const in vec3 centerViewNormal, const in vec3 sampleViewPosition ) {\",\r\n    \"\tvec3 viewDelta = sampleViewPosition - centerViewPosition;\",\r\n    \"\tfloat viewDistance = length( viewDelta );\",\r\n    \"\tfloat scaledScreenDistance = scaleDividedByCameraFar * viewDistance;\",\r\n    \"\treturn max(0.0, (dot(centerViewNormal, viewDelta) - minResolutionMultipliedByCameraFar) / scaledScreenDistance - bias) / (1.0 + pow2( scaledScreenDistance ) );\",\r\n    \"}\",\r\n    \"// moving costly divides into consts\",\r\n    \"const float ANGLE_STEP = PI2 * float( NUM_RINGS ) / float( NUM_SAMPLES );\",\r\n    \"const float INV_NUM_SAMPLES = 1.0 / float( NUM_SAMPLES );\",\r\n    \"float getAmbientOcclusion( const in vec3 centerViewPosition ) {\",\r\n    \"\t// precompute some variables require in getOcclusion.\",\r\n    \"\tscaleDividedByCameraFar = scale / cameraFar;\",\r\n    \"\tminResolutionMultipliedByCameraFar = minResolution * cameraFar;\",\r\n    \"\tvec3 centerViewNormal = getViewNormal( centerViewPosition, vUv );\",\r\n    \"\t// jsfiddle that shows sample pattern: https://jsfiddle.net/a16ff1p7/\",\r\n    \"\tfloat angle = rand( vUv + randomSeed ) * PI2;\",\r\n    \"\tvec2 radius = vec2( kernelRadius * INV_NUM_SAMPLES ) / size;\",\r\n    \"\tvec2 radiusStep = radius;\",\r\n    \"\tfloat occlusionSum = 0.0;\",\r\n    \"\tfloat weightSum = 0.0;\",\r\n    \"\tfor( int i = 0; i < NUM_SAMPLES; i ++ ) {\",\r\n    \"\t\tvec2 sampleUv = vUv + vec2( cos( angle ), sin( angle ) ) * radius;\",\r\n    \"\t\tradius += radiusStep;\",\r\n    \"\t\tangle += ANGLE_STEP;\",\r\n    \"\t\tfloat sampleDepth = getDepth( sampleUv );\",\r\n    \"\t\tif( sampleDepth >= ( 1.0 - EPSILON ) ) {\",\r\n    \"\t\t\tcontinue;\",\r\n    \"\t\t}\",\r\n    \"\t\tfloat sampleViewZ = getViewZ( sampleDepth );\",\r\n    \"\t\tvec3 sampleViewPosition = getViewPosition( sampleUv, sampleDepth, sampleViewZ );\",\r\n    \"\t\tocclusionSum += getOcclusion( centerViewPosition, centerViewNormal, sampleViewPosition );\",\r\n    \"\t\tweightSum += 1.0;\",\r\n    \"\t}\",\r\n    \"\tif( weightSum == 0.0 ) discard;\",\r\n    \"\treturn occlusionSum * ( intensity / weightSum );\",\r\n    \"}\",\r\n    \"void main() {\",\r\n    \"\tfloat centerDepth = getDepth( vUv );\",\r\n    \"\tif( centerDepth >= ( 1.0 - EPSILON ) ) {\",\r\n    \"\t\tdiscard;\",\r\n    \"\t}\",\r\n    \"\tfloat centerViewZ = getViewZ( centerDepth );\",\r\n    \"\tvec3 viewPosition = getViewPosition( vUv, centerDepth, centerViewZ );\",\r\n    \"\tfloat ambientOcclusion = getAmbientOcclusion( viewPosition );\",\r\n    \"\tgl_FragColor = getDefaultColor( vUv );\",\r\n    \"\tgl_FragColor.xyz *=  1.0 - ambientOcclusion;\",\r\n    \"}\"\r\n  ].join(\"\\n\")\r\n};\r\nexport {\r\n  SAOShader\r\n};\r\n", "import { Vector2 } from \"three\";\r\nconst DepthLimitedBlurShader = {\r\n  defines: {\r\n    KERNEL_RADIUS: 4,\r\n    DEPTH_PACKING: 1,\r\n    PERSPECTIVE_CAMERA: 1\r\n  },\r\n  uniforms: {\r\n    tDiffuse: { value: null },\r\n    size: { value: /* @__PURE__ */ new Vector2(512, 512) },\r\n    sampleUvOffsets: { value: [/* @__PURE__ */ new Vector2(0, 0)] },\r\n    sampleWeights: { value: [1] },\r\n    tDepth: { value: null },\r\n    cameraNear: { value: 10 },\r\n    cameraFar: { value: 1e3 },\r\n    depthCutoff: { value: 10 }\r\n  },\r\n  vertexShader: [\r\n    \"#include <common>\",\r\n    \"uniform vec2 size;\",\r\n    \"varying vec2 vUv;\",\r\n    \"varying vec2 vInvSize;\",\r\n    \"void main() {\",\r\n    \"\tvUv = uv;\",\r\n    \"\tvInvSize = 1.0 / size;\",\r\n    \"\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\r\n    \"}\"\r\n  ].join(\"\\n\"),\r\n  fragmentShader: [\r\n    \"#include <common>\",\r\n    \"#include <packing>\",\r\n    \"uniform sampler2D tDiffuse;\",\r\n    \"uniform sampler2D tDepth;\",\r\n    \"uniform float cameraNear;\",\r\n    \"uniform float cameraFar;\",\r\n    \"uniform float depthCutoff;\",\r\n    \"uniform vec2 sampleUvOffsets[ KERNEL_RADIUS + 1 ];\",\r\n    \"uniform float sampleWeights[ KERNEL_RADIUS + 1 ];\",\r\n    \"varying vec2 vUv;\",\r\n    \"varying vec2 vInvSize;\",\r\n    \"float getDepth( const in vec2 screenPosition ) {\",\r\n    \"\t#if DEPTH_PACKING == 1\",\r\n    \"\treturn unpackRGBAToDepth( texture2D( tDepth, screenPosition ) );\",\r\n    \"\t#else\",\r\n    \"\treturn texture2D( tDepth, screenPosition ).x;\",\r\n    \"\t#endif\",\r\n    \"}\",\r\n    \"float getViewZ( const in float depth ) {\",\r\n    \"\t#if PERSPECTIVE_CAMERA == 1\",\r\n    \"\treturn perspectiveDepthToViewZ( depth, cameraNear, cameraFar );\",\r\n    \"\t#else\",\r\n    \"\treturn orthographicDepthToViewZ( depth, cameraNear, cameraFar );\",\r\n    \"\t#endif\",\r\n    \"}\",\r\n    \"void main() {\",\r\n    \"\tfloat depth = getDepth( vUv );\",\r\n    \"\tif( depth >= ( 1.0 - EPSILON ) ) {\",\r\n    \"\t\tdiscard;\",\r\n    \"\t}\",\r\n    \"\tfloat centerViewZ = -getViewZ( depth );\",\r\n    \"\tbool rBreak = false, lBreak = false;\",\r\n    \"\tfloat weightSum = sampleWeights[0];\",\r\n    \"\tvec4 diffuseSum = texture2D( tDiffuse, vUv ) * weightSum;\",\r\n    \"\tfor( int i = 1; i <= KERNEL_RADIUS; i ++ ) {\",\r\n    \"\t\tfloat sampleWeight = sampleWeights[i];\",\r\n    \"\t\tvec2 sampleUvOffset = sampleUvOffsets[i] * vInvSize;\",\r\n    \"\t\tvec2 sampleUv = vUv + sampleUvOffset;\",\r\n    \"\t\tfloat viewZ = -getViewZ( getDepth( sampleUv ) );\",\r\n    \"\t\tif( abs( viewZ - centerViewZ ) > depthCutoff ) rBreak = true;\",\r\n    \"\t\tif( ! rBreak ) {\",\r\n    \"\t\t\tdiffuseSum += texture2D( tDiffuse, sampleUv ) * sampleWeight;\",\r\n    \"\t\t\tweightSum += sampleWeight;\",\r\n    \"\t\t}\",\r\n    \"\t\tsampleUv = vUv - sampleUvOffset;\",\r\n    \"\t\tviewZ = -getViewZ( getDepth( sampleUv ) );\",\r\n    \"\t\tif( abs( viewZ - centerViewZ ) > depthCutoff ) lBreak = true;\",\r\n    \"\t\tif( ! lBreak ) {\",\r\n    \"\t\t\tdiffuseSum += texture2D( tDiffuse, sampleUv ) * sampleWeight;\",\r\n    \"\t\t\tweightSum += sampleWeight;\",\r\n    \"\t\t}\",\r\n    \"\t}\",\r\n    \"\tgl_FragColor = diffuseSum / weightSum;\",\r\n    \"}\"\r\n  ].join(\"\\n\")\r\n};\r\nconst BlurShaderUtils = {\r\n  createSampleWeights: (kernelRadius, stdDev) => {\r\n    const gaussian = (x, stdDev2) => {\r\n      return Math.exp(-(x * x) / (2 * (stdDev2 * stdDev2))) / (Math.sqrt(2 * Math.PI) * stdDev2);\r\n    };\r\n    const weights = [];\r\n    for (let i = 0; i <= kernelRadius; i++) {\r\n      weights.push(gaussian(i, stdDev));\r\n    }\r\n    return weights;\r\n  },\r\n  createSampleOffsets: (kernelRadius, uvIncrement) => {\r\n    const offsets = [];\r\n    for (let i = 0; i <= kernelRadius; i++) {\r\n      offsets.push(uvIncrement.clone().multiplyScalar(i));\r\n    }\r\n    return offsets;\r\n  },\r\n  configure: (shader, kernelRadius, stdDev, uvIncrement) => {\r\n    shader.defines[\"KERNEL_RADIUS\"] = kernelRadius;\r\n    shader.uniforms[\"sampleUvOffsets\"].value = BlurShaderUtils.createSampleOffsets(kernelRadius, uvIncrement);\r\n    shader.uniforms[\"sampleWeights\"].value = BlurShaderUtils.createSampleWeights(kernelRadius, stdDev);\r\n    shader.needsUpdate = true;\r\n  }\r\n};\r\nexport {\r\n  BlurShaderUtils,\r\n  DepthLimitedBlurShader\r\n};\r\n", "var __defProp = Object.defineProperty;\r\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\r\nvar __publicField = (obj, key, value) => {\r\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\r\n  return value;\r\n};\r\nimport { Color, Vector2, WebGLRenderTarget, HalfFloatType, NearestFilter, DepthTexture, UnsignedShortType, MeshDepthMaterial, RGBADepthPacking, NoBlending, MeshNormalMaterial, ShaderMaterial, UniformsUtils, CustomBlending, DstColorFactor, ZeroFactor, AddEquation, DstAlphaFactor } from \"three\";\r\nimport { Pass, FullScreenQuad } from \"./Pass.js\";\r\nimport { SAOShader } from \"../shaders/SAOShader.js\";\r\nimport { DepthLimitedBlurShader, BlurShaderUtils } from \"../shaders/DepthLimitedBlurShader.js\";\r\nimport { CopyShader } from \"../shaders/CopyShader.js\";\r\nimport { UnpackDepthRGBAShader } from \"../shaders/UnpackDepthRGBAShader.js\";\r\nclass SAOPass extends Pass {\r\n  constructor(scene, camera, useDepthTexture = false, useNormals = false, resolution = new Vector2(256, 256)) {\r\n    super();\r\n    this.scene = scene;\r\n    this.camera = camera;\r\n    this.clear = true;\r\n    this.needsSwap = false;\r\n    this.supportsDepthTextureExtension = useDepthTexture;\r\n    this.supportsNormalTexture = useNormals;\r\n    this.originalClearColor = new Color();\r\n    this._oldClearColor = new Color();\r\n    this.oldClearAlpha = 1;\r\n    this.params = {\r\n      output: 0,\r\n      saoBias: 0.5,\r\n      saoIntensity: 0.18,\r\n      saoScale: 1,\r\n      saoKernelRadius: 100,\r\n      saoMinResolution: 0,\r\n      saoBlur: true,\r\n      saoBlurRadius: 8,\r\n      saoBlurStdDev: 4,\r\n      saoBlurDepthCutoff: 0.01\r\n    };\r\n    this.resolution = new Vector2(resolution.x, resolution.y);\r\n    this.saoRenderTarget = new WebGLRenderTarget(this.resolution.x, this.resolution.y, { type: HalfFloatType });\r\n    this.blurIntermediateRenderTarget = this.saoRenderTarget.clone();\r\n    this.beautyRenderTarget = this.saoRenderTarget.clone();\r\n    this.normalRenderTarget = new WebGLRenderTarget(this.resolution.x, this.resolution.y, {\r\n      minFilter: NearestFilter,\r\n      magFilter: NearestFilter,\r\n      type: HalfFloatType\r\n    });\r\n    this.depthRenderTarget = this.normalRenderTarget.clone();\r\n    let depthTexture;\r\n    if (this.supportsDepthTextureExtension) {\r\n      depthTexture = new DepthTexture();\r\n      depthTexture.type = UnsignedShortType;\r\n      this.beautyRenderTarget.depthTexture = depthTexture;\r\n      this.beautyRenderTarget.depthBuffer = true;\r\n    }\r\n    this.depthMaterial = new MeshDepthMaterial();\r\n    this.depthMaterial.depthPacking = RGBADepthPacking;\r\n    this.depthMaterial.blending = NoBlending;\r\n    this.normalMaterial = new MeshNormalMaterial();\r\n    this.normalMaterial.blending = NoBlending;\r\n    this.saoMaterial = new ShaderMaterial({\r\n      defines: Object.assign({}, SAOShader.defines),\r\n      fragmentShader: SAOShader.fragmentShader,\r\n      vertexShader: SAOShader.vertexShader,\r\n      uniforms: UniformsUtils.clone(SAOShader.uniforms)\r\n    });\r\n    this.saoMaterial.extensions.derivatives = true;\r\n    this.saoMaterial.defines[\"DEPTH_PACKING\"] = this.supportsDepthTextureExtension ? 0 : 1;\r\n    this.saoMaterial.defines[\"NORMAL_TEXTURE\"] = this.supportsNormalTexture ? 1 : 0;\r\n    this.saoMaterial.defines[\"PERSPECTIVE_CAMERA\"] = this.camera.isPerspectiveCamera ? 1 : 0;\r\n    this.saoMaterial.uniforms[\"tDepth\"].value = this.supportsDepthTextureExtension ? depthTexture : this.depthRenderTarget.texture;\r\n    this.saoMaterial.uniforms[\"tNormal\"].value = this.normalRenderTarget.texture;\r\n    this.saoMaterial.uniforms[\"size\"].value.set(this.resolution.x, this.resolution.y);\r\n    this.saoMaterial.uniforms[\"cameraInverseProjectionMatrix\"].value.copy(this.camera.projectionMatrixInverse);\r\n    this.saoMaterial.uniforms[\"cameraProjectionMatrix\"].value = this.camera.projectionMatrix;\r\n    this.saoMaterial.blending = NoBlending;\r\n    this.vBlurMaterial = new ShaderMaterial({\r\n      uniforms: UniformsUtils.clone(DepthLimitedBlurShader.uniforms),\r\n      defines: Object.assign({}, DepthLimitedBlurShader.defines),\r\n      vertexShader: DepthLimitedBlurShader.vertexShader,\r\n      fragmentShader: DepthLimitedBlurShader.fragmentShader\r\n    });\r\n    this.vBlurMaterial.defines[\"DEPTH_PACKING\"] = this.supportsDepthTextureExtension ? 0 : 1;\r\n    this.vBlurMaterial.defines[\"PERSPECTIVE_CAMERA\"] = this.camera.isPerspectiveCamera ? 1 : 0;\r\n    this.vBlurMaterial.uniforms[\"tDiffuse\"].value = this.saoRenderTarget.texture;\r\n    this.vBlurMaterial.uniforms[\"tDepth\"].value = this.supportsDepthTextureExtension ? depthTexture : this.depthRenderTarget.texture;\r\n    this.vBlurMaterial.uniforms[\"size\"].value.set(this.resolution.x, this.resolution.y);\r\n    this.vBlurMaterial.blending = NoBlending;\r\n    this.hBlurMaterial = new ShaderMaterial({\r\n      uniforms: UniformsUtils.clone(DepthLimitedBlurShader.uniforms),\r\n      defines: Object.assign({}, DepthLimitedBlurShader.defines),\r\n      vertexShader: DepthLimitedBlurShader.vertexShader,\r\n      fragmentShader: DepthLimitedBlurShader.fragmentShader\r\n    });\r\n    this.hBlurMaterial.defines[\"DEPTH_PACKING\"] = this.supportsDepthTextureExtension ? 0 : 1;\r\n    this.hBlurMaterial.defines[\"PERSPECTIVE_CAMERA\"] = this.camera.isPerspectiveCamera ? 1 : 0;\r\n    this.hBlurMaterial.uniforms[\"tDiffuse\"].value = this.blurIntermediateRenderTarget.texture;\r\n    this.hBlurMaterial.uniforms[\"tDepth\"].value = this.supportsDepthTextureExtension ? depthTexture : this.depthRenderTarget.texture;\r\n    this.hBlurMaterial.uniforms[\"size\"].value.set(this.resolution.x, this.resolution.y);\r\n    this.hBlurMaterial.blending = NoBlending;\r\n    this.materialCopy = new ShaderMaterial({\r\n      uniforms: UniformsUtils.clone(CopyShader.uniforms),\r\n      vertexShader: CopyShader.vertexShader,\r\n      fragmentShader: CopyShader.fragmentShader,\r\n      blending: NoBlending\r\n    });\r\n    this.materialCopy.transparent = true;\r\n    this.materialCopy.depthTest = false;\r\n    this.materialCopy.depthWrite = false;\r\n    this.materialCopy.blending = CustomBlending;\r\n    this.materialCopy.blendSrc = DstColorFactor;\r\n    this.materialCopy.blendDst = ZeroFactor;\r\n    this.materialCopy.blendEquation = AddEquation;\r\n    this.materialCopy.blendSrcAlpha = DstAlphaFactor;\r\n    this.materialCopy.blendDstAlpha = ZeroFactor;\r\n    this.materialCopy.blendEquationAlpha = AddEquation;\r\n    this.depthCopy = new ShaderMaterial({\r\n      uniforms: UniformsUtils.clone(UnpackDepthRGBAShader.uniforms),\r\n      vertexShader: UnpackDepthRGBAShader.vertexShader,\r\n      fragmentShader: UnpackDepthRGBAShader.fragmentShader,\r\n      blending: NoBlending\r\n    });\r\n    this.fsQuad = new FullScreenQuad(null);\r\n  }\r\n  render(renderer, writeBuffer, readBuffer) {\r\n    if (this.renderToScreen) {\r\n      this.materialCopy.blending = NoBlending;\r\n      this.materialCopy.uniforms[\"tDiffuse\"].value = readBuffer.texture;\r\n      this.materialCopy.needsUpdate = true;\r\n      this.renderPass(renderer, this.materialCopy, null);\r\n    }\r\n    if (this.params.output === 1) {\r\n      return;\r\n    }\r\n    renderer.getClearColor(this._oldClearColor);\r\n    this.oldClearAlpha = renderer.getClearAlpha();\r\n    const oldAutoClear = renderer.autoClear;\r\n    renderer.autoClear = false;\r\n    renderer.setRenderTarget(this.depthRenderTarget);\r\n    renderer.clear();\r\n    this.saoMaterial.uniforms[\"bias\"].value = this.params.saoBias;\r\n    this.saoMaterial.uniforms[\"intensity\"].value = this.params.saoIntensity;\r\n    this.saoMaterial.uniforms[\"scale\"].value = this.params.saoScale;\r\n    this.saoMaterial.uniforms[\"kernelRadius\"].value = this.params.saoKernelRadius;\r\n    this.saoMaterial.uniforms[\"minResolution\"].value = this.params.saoMinResolution;\r\n    this.saoMaterial.uniforms[\"cameraNear\"].value = this.camera.near;\r\n    this.saoMaterial.uniforms[\"cameraFar\"].value = this.camera.far;\r\n    const depthCutoff = this.params.saoBlurDepthCutoff * (this.camera.far - this.camera.near);\r\n    this.vBlurMaterial.uniforms[\"depthCutoff\"].value = depthCutoff;\r\n    this.hBlurMaterial.uniforms[\"depthCutoff\"].value = depthCutoff;\r\n    this.vBlurMaterial.uniforms[\"cameraNear\"].value = this.camera.near;\r\n    this.vBlurMaterial.uniforms[\"cameraFar\"].value = this.camera.far;\r\n    this.hBlurMaterial.uniforms[\"cameraNear\"].value = this.camera.near;\r\n    this.hBlurMaterial.uniforms[\"cameraFar\"].value = this.camera.far;\r\n    this.params.saoBlurRadius = Math.floor(this.params.saoBlurRadius);\r\n    if (this.prevStdDev !== this.params.saoBlurStdDev || this.prevNumSamples !== this.params.saoBlurRadius) {\r\n      BlurShaderUtils.configure(\r\n        this.vBlurMaterial,\r\n        this.params.saoBlurRadius,\r\n        this.params.saoBlurStdDev,\r\n        new Vector2(0, 1)\r\n      );\r\n      BlurShaderUtils.configure(\r\n        this.hBlurMaterial,\r\n        this.params.saoBlurRadius,\r\n        this.params.saoBlurStdDev,\r\n        new Vector2(1, 0)\r\n      );\r\n      this.prevStdDev = this.params.saoBlurStdDev;\r\n      this.prevNumSamples = this.params.saoBlurRadius;\r\n    }\r\n    renderer.setClearColor(0);\r\n    renderer.setRenderTarget(this.beautyRenderTarget);\r\n    renderer.clear();\r\n    renderer.render(this.scene, this.camera);\r\n    if (!this.supportsDepthTextureExtension) {\r\n      this.renderOverride(renderer, this.depthMaterial, this.depthRenderTarget, 0, 1);\r\n    }\r\n    if (this.supportsNormalTexture) {\r\n      this.renderOverride(renderer, this.normalMaterial, this.normalRenderTarget, 7829503, 1);\r\n    }\r\n    this.renderPass(renderer, this.saoMaterial, this.saoRenderTarget, 16777215, 1);\r\n    if (this.params.saoBlur) {\r\n      this.renderPass(renderer, this.vBlurMaterial, this.blurIntermediateRenderTarget, 16777215, 1);\r\n      this.renderPass(renderer, this.hBlurMaterial, this.saoRenderTarget, 16777215, 1);\r\n    }\r\n    let outputMaterial = this.materialCopy;\r\n    if (this.params.output === 3) {\r\n      if (this.supportsDepthTextureExtension) {\r\n        this.materialCopy.uniforms[\"tDiffuse\"].value = this.beautyRenderTarget.depthTexture;\r\n        this.materialCopy.needsUpdate = true;\r\n      } else {\r\n        this.depthCopy.uniforms[\"tDiffuse\"].value = this.depthRenderTarget.texture;\r\n        this.depthCopy.needsUpdate = true;\r\n        outputMaterial = this.depthCopy;\r\n      }\r\n    } else if (this.params.output === 4) {\r\n      this.materialCopy.uniforms[\"tDiffuse\"].value = this.normalRenderTarget.texture;\r\n      this.materialCopy.needsUpdate = true;\r\n    } else {\r\n      this.materialCopy.uniforms[\"tDiffuse\"].value = this.saoRenderTarget.texture;\r\n      this.materialCopy.needsUpdate = true;\r\n    }\r\n    if (this.params.output === 0) {\r\n      outputMaterial.blending = CustomBlending;\r\n    } else {\r\n      outputMaterial.blending = NoBlending;\r\n    }\r\n    this.renderPass(renderer, outputMaterial, this.renderToScreen ? null : readBuffer);\r\n    renderer.setClearColor(this._oldClearColor, this.oldClearAlpha);\r\n    renderer.autoClear = oldAutoClear;\r\n  }\r\n  renderPass(renderer, passMaterial, renderTarget, clearColor, clearAlpha) {\r\n    renderer.getClearColor(this.originalClearColor);\r\n    const originalClearAlpha = renderer.getClearAlpha();\r\n    const originalAutoClear = renderer.autoClear;\r\n    renderer.setRenderTarget(renderTarget);\r\n    renderer.autoClear = false;\r\n    if (clearColor !== void 0 && clearColor !== null) {\r\n      renderer.setClearColor(clearColor);\r\n      renderer.setClearAlpha(clearAlpha || 0);\r\n      renderer.clear();\r\n    }\r\n    this.fsQuad.material = passMaterial;\r\n    this.fsQuad.render(renderer);\r\n    renderer.autoClear = originalAutoClear;\r\n    renderer.setClearColor(this.originalClearColor);\r\n    renderer.setClearAlpha(originalClearAlpha);\r\n  }\r\n  renderOverride(renderer, overrideMaterial, renderTarget, clearColor, clearAlpha) {\r\n    renderer.getClearColor(this.originalClearColor);\r\n    const originalClearAlpha = renderer.getClearAlpha();\r\n    const originalAutoClear = renderer.autoClear;\r\n    renderer.setRenderTarget(renderTarget);\r\n    renderer.autoClear = false;\r\n    clearColor = overrideMaterial.clearColor || clearColor;\r\n    clearAlpha = overrideMaterial.clearAlpha || clearAlpha;\r\n    if (clearColor !== void 0 && clearColor !== null) {\r\n      renderer.setClearColor(clearColor);\r\n      renderer.setClearAlpha(clearAlpha || 0);\r\n      renderer.clear();\r\n    }\r\n    this.scene.overrideMaterial = overrideMaterial;\r\n    renderer.render(this.scene, this.camera);\r\n    this.scene.overrideMaterial = null;\r\n    renderer.autoClear = originalAutoClear;\r\n    renderer.setClearColor(this.originalClearColor);\r\n    renderer.setClearAlpha(originalClearAlpha);\r\n  }\r\n  setSize(width, height) {\r\n    this.beautyRenderTarget.setSize(width, height);\r\n    this.saoRenderTarget.setSize(width, height);\r\n    this.blurIntermediateRenderTarget.setSize(width, height);\r\n    this.normalRenderTarget.setSize(width, height);\r\n    this.depthRenderTarget.setSize(width, height);\r\n    this.saoMaterial.uniforms[\"size\"].value.set(width, height);\r\n    this.saoMaterial.uniforms[\"cameraInverseProjectionMatrix\"].value.copy(this.camera.projectionMatrixInverse);\r\n    this.saoMaterial.uniforms[\"cameraProjectionMatrix\"].value = this.camera.projectionMatrix;\r\n    this.saoMaterial.needsUpdate = true;\r\n    this.vBlurMaterial.uniforms[\"size\"].value.set(width, height);\r\n    this.vBlurMaterial.needsUpdate = true;\r\n    this.hBlurMaterial.uniforms[\"size\"].value.set(width, height);\r\n    this.hBlurMaterial.needsUpdate = true;\r\n  }\r\n  dispose() {\r\n    this.saoRenderTarget.dispose();\r\n    this.blurIntermediateRenderTarget.dispose();\r\n    this.beautyRenderTarget.dispose();\r\n    this.normalRenderTarget.dispose();\r\n    this.depthRenderTarget.dispose();\r\n    this.depthMaterial.dispose();\r\n    this.normalMaterial.dispose();\r\n    this.saoMaterial.dispose();\r\n    this.vBlurMaterial.dispose();\r\n    this.hBlurMaterial.dispose();\r\n    this.materialCopy.dispose();\r\n    this.depthCopy.dispose();\r\n    this.fsQuad.dispose();\r\n  }\r\n}\r\n__publicField(SAOPass, \"OUTPUT\", {\r\n  Beauty: 1,\r\n  Default: 0,\r\n  SAO: 2,\r\n  Depth: 3,\r\n  Normal: 4\r\n});\r\nexport {\r\n  SAOPass\r\n};\r\n", "const AfterimageShader = {\r\n  uniforms: {\r\n    damp: { value: 0.96 },\r\n    tOld: { value: null },\r\n    tNew: { value: null }\r\n  },\r\n  vertexShader: [\r\n    \"varying vec2 vUv;\",\r\n    \"void main() {\",\r\n    \"\tvUv = uv;\",\r\n    \"\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\r\n    \"}\"\r\n  ].join(\"\\n\"),\r\n  fragmentShader: [\r\n    \"uniform float damp;\",\r\n    \"uniform sampler2D tOld;\",\r\n    \"uniform sampler2D tNew;\",\r\n    \"varying vec2 vUv;\",\r\n    \"vec4 when_gt( vec4 x, float y ) {\",\r\n    \"\treturn max( sign( x - y ), 0.0 );\",\r\n    \"}\",\r\n    \"void main() {\",\r\n    \"\tvec4 texelOld = texture2D( tOld, vUv );\",\r\n    \"\tvec4 texelNew = texture2D( tNew, vUv );\",\r\n    \"\ttexelOld *= damp * when_gt( texelOld, 0.1 );\",\r\n    \"\tgl_FragColor = max(texelNew, texelOld);\",\r\n    \"}\"\r\n  ].join(\"\\n\")\r\n};\r\nexport {\r\n  AfterimageShader\r\n};\r\n", "import { Vector2 } from \"three\";\r\nconst DotScreenShader = {\r\n  uniforms: {\r\n    tDiffuse: { value: null },\r\n    tSize: { value: /* @__PURE__ */ new Vector2(256, 256) },\r\n    center: { value: /* @__PURE__ */ new Vector2(0.5, 0.5) },\r\n    angle: { value: 1.57 },\r\n    scale: { value: 1 }\r\n  },\r\n  vertexShader: [\r\n    \"varying vec2 vUv;\",\r\n    \"void main() {\",\r\n    \"\tvUv = uv;\",\r\n    \"\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\r\n    \"}\"\r\n  ].join(\"\\n\"),\r\n  fragmentShader: [\r\n    \"uniform vec2 center;\",\r\n    \"uniform float angle;\",\r\n    \"uniform float scale;\",\r\n    \"uniform vec2 tSize;\",\r\n    \"uniform sampler2D tDiffuse;\",\r\n    \"varying vec2 vUv;\",\r\n    \"float pattern() {\",\r\n    \"\tfloat s = sin( angle ), c = cos( angle );\",\r\n    \"\tvec2 tex = vUv * tSize - center;\",\r\n    \"\tvec2 point = vec2( c * tex.x - s * tex.y, s * tex.x + c * tex.y ) * scale;\",\r\n    \"\treturn ( sin( point.x ) * sin( point.y ) ) * 4.0;\",\r\n    \"}\",\r\n    \"void main() {\",\r\n    \"\tvec4 color = texture2D( tDiffuse, vUv );\",\r\n    \"\tfloat average = ( color.r + color.g + color.b ) / 3.0;\",\r\n    \"\tgl_FragColor = vec4( vec3( average * 10.0 - 5.0 + pattern() ), color.a );\",\r\n    \"}\"\r\n  ].join(\"\\n\")\r\n};\r\nexport {\r\n  DotScreenShader\r\n};\r\n", "import { Vector2, Matrix4 } from \"three\";\r\nconst SSRShader = {\r\n  defines: {\r\n    MAX_STEP: 0,\r\n    isPerspectiveCamera: true,\r\n    isDistanceAttenuation: true,\r\n    isFresnel: true,\r\n    isInfiniteThick: false,\r\n    isSelective: false\r\n  },\r\n  uniforms: {\r\n    tDiffuse: { value: null },\r\n    tNormal: { value: null },\r\n    tMetalness: { value: null },\r\n    tDepth: { value: null },\r\n    cameraNear: { value: null },\r\n    cameraFar: { value: null },\r\n    resolution: { value: /* @__PURE__ */ new Vector2() },\r\n    cameraProjectionMatrix: { value: /* @__PURE__ */ new Matrix4() },\r\n    cameraInverseProjectionMatrix: { value: /* @__PURE__ */ new Matrix4() },\r\n    opacity: { value: 0.5 },\r\n    maxDistance: { value: 180 },\r\n    cameraRange: { value: 0 },\r\n    surfDist: { value: 7e-3 },\r\n    thickTolerance: { value: 0.03 }\r\n  },\r\n  vertexShader: (\r\n    /* glsl */\r\n    `\r\n\r\n    varying vec2 vUv;\r\n\r\n    void main() {\r\n\r\n\t\t\tvUv = uv;\r\n\r\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\r\n\r\n    }\r\n\r\n  `\r\n  ),\r\n  fragmentShader: (\r\n    /* glsl */\r\n    `\r\n\t\t// precision highp float;\r\n\t\tprecision highp sampler2D;\r\n\t\tvarying vec2 vUv;\r\n\t\tuniform sampler2D tDepth;\r\n\t\tuniform sampler2D tNormal;\r\n\t\tuniform sampler2D tMetalness;\r\n\t\tuniform sampler2D tDiffuse;\r\n\t\tuniform float cameraRange;\r\n\t\tuniform vec2 resolution;\r\n\t\tuniform float opacity;\r\n\t\tuniform float cameraNear;\r\n\t\tuniform float cameraFar;\r\n\t\tuniform float maxDistance;\r\n\t\tuniform float surfDist;\r\n\t\tuniform mat4 cameraProjectionMatrix;\r\n\t\tuniform mat4 cameraInverseProjectionMatrix;\r\n\t\tuniform float thickTolerance;\r\n\t\t#include <packing>\r\n\t\tfloat pointToLineDistance(vec3 x0, vec3 x1, vec3 x2) {\r\n\t\t\t//x0: point, x1: linePointA, x2: linePointB\r\n\t\t\t//https://mathworld.wolfram.com/Point-LineDistance3-Dimensional.html\r\n\t\t\treturn length(cross(x0-x1,x0-x2))/length(x2-x1);\r\n\t\t}\r\n\t\tfloat pointPlaneDistance(vec3 point,vec3 planePoint,vec3 planeNormal){\r\n\t\t\t// https://mathworld.wolfram.com/Point-PlaneDistance.html\r\n\t\t\t//// https://en.wikipedia.org/wiki/Plane_(geometry)\r\n\t\t\t//// http://paulbourke.net/geometry/pointlineplane/\r\n\t\t\tfloat a=planeNormal.x,b=planeNormal.y,c=planeNormal.z;\r\n\t\t\tfloat x0=point.x,y0=point.y,z0=point.z;\r\n\t\t\tfloat x=planePoint.x,y=planePoint.y,z=planePoint.z;\r\n\t\t\tfloat d=-(a*x+b*y+c*z);\r\n\t\t\tfloat distance=(a*x0+b*y0+c*z0+d)/sqrt(a*a+b*b+c*c);\r\n\t\t\treturn distance;\r\n\t\t}\r\n\t\tfloat getDepth( const in vec2 uv ) {\r\n\t\t\treturn texture2D( tDepth, uv ).x;\r\n\t\t}\r\n\t\tfloat getViewZ( const in float depth ) {\r\n\t\t\t#ifdef isPerspectiveCamera\r\n\t\t\t\treturn perspectiveDepthToViewZ( depth, cameraNear, cameraFar );\r\n\t\t\t#else\r\n\t\t\t\treturn orthographicDepthToViewZ( depth, cameraNear, cameraFar );\r\n\t\t\t#endif\r\n\t\t}\r\n\t\tvec3 getViewPosition( const in vec2 uv, const in float depth/*clip space*/, const in float clipW ) {\r\n\t\t\tvec4 clipPosition = vec4( ( vec3( uv, depth ) - 0.5 ) * 2.0, 1.0 );//ndc\r\n\t\t\tclipPosition *= clipW; //clip\r\n\t\t\treturn ( cameraInverseProjectionMatrix * clipPosition ).xyz;//view\r\n\t\t}\r\n\t\tvec3 getViewNormal( const in vec2 uv ) {\r\n\t\t\treturn unpackRGBToNormal( texture2D( tNormal, uv ).xyz );\r\n\t\t}\r\n\t\tvec2 viewPositionToXY(vec3 viewPosition){\r\n\t\t\tvec2 xy;\r\n\t\t\tvec4 clip=cameraProjectionMatrix*vec4(viewPosition,1);\r\n\t\t\txy=clip.xy;//clip\r\n\t\t\tfloat clipW=clip.w;\r\n\t\t\txy/=clipW;//NDC\r\n\t\t\txy=(xy+1.)/2.;//uv\r\n\t\t\txy*=resolution;//screen\r\n\t\t\treturn xy;\r\n\t\t}\r\n\t\tvoid main(){\r\n\t\t\t#ifdef isSelective\r\n\t\t\t\tfloat metalness=texture2D(tMetalness,vUv).r;\r\n\t\t\t\tif(metalness==0.) return;\r\n\t\t\t#endif\r\n\r\n\t\t\tfloat depth = getDepth( vUv );\r\n\t\t\tfloat viewZ = getViewZ( depth );\r\n\t\t\tif(-viewZ>=cameraFar) return;\r\n\r\n\t\t\tfloat clipW = cameraProjectionMatrix[2][3] * viewZ+cameraProjectionMatrix[3][3];\r\n\t\t\tvec3 viewPosition=getViewPosition( vUv, depth, clipW );\r\n\r\n\t\t\tvec2 d0=gl_FragCoord.xy;\r\n\t\t\tvec2 d1;\r\n\r\n\t\t\tvec3 viewNormal=getViewNormal( vUv );\r\n\r\n\t\t\t#ifdef isPerspectiveCamera\r\n\t\t\t\tvec3 viewIncidenceDir=normalize(viewPosition);\r\n\t\t\t\tvec3 viewReflectDir=reflect(viewIncidenceDir,viewNormal);\r\n\t\t\t#else\r\n\t\t\t\tvec3 viewIncidenceDir=vec3(0,0,-1);\r\n\t\t\t\tvec3 viewReflectDir=reflect(viewIncidenceDir,viewNormal);\r\n\t\t\t#endif\r\n\r\n\t\t\tfloat maxReflectRayLen=maxDistance/dot(-viewIncidenceDir,viewNormal);\r\n\t\t\t// dot(a,b)==length(a)*length(b)*cos(theta) // https://www.mathsisfun.com/algebra/vectors-dot-product.html\r\n\t\t\t// if(a.isNormalized&&b.isNormalized) dot(a,b)==cos(theta)\r\n\t\t\t// maxDistance/maxReflectRayLen=cos(theta)\r\n\t\t\t// maxDistance/maxReflectRayLen==dot(a,b)\r\n\t\t\t// maxReflectRayLen==maxDistance/dot(a,b)\r\n\r\n\t\t\tvec3 d1viewPosition=viewPosition+viewReflectDir*maxReflectRayLen;\r\n\t\t\t#ifdef isPerspectiveCamera\r\n\t\t\t\tif(d1viewPosition.z>-cameraNear){\r\n\t\t\t\t\t//https://tutorial.math.lamar.edu/Classes/CalcIII/EqnsOfLines.aspx\r\n\t\t\t\t\tfloat t=(-cameraNear-viewPosition.z)/viewReflectDir.z;\r\n\t\t\t\t\td1viewPosition=viewPosition+viewReflectDir*t;\r\n\t\t\t\t}\r\n\t\t\t#endif\r\n\t\t\td1=viewPositionToXY(d1viewPosition);\r\n\r\n\t\t\tfloat totalLen=length(d1-d0);\r\n\t\t\tfloat xLen=d1.x-d0.x;\r\n\t\t\tfloat yLen=d1.y-d0.y;\r\n\t\t\tfloat totalStep=max(abs(xLen),abs(yLen));\r\n\t\t\tfloat xSpan=xLen/totalStep;\r\n\t\t\tfloat ySpan=yLen/totalStep;\r\n\t\t\tfor(float i=0.;i<MAX_STEP;i++){\r\n\t\t\t\tif(i>=totalStep) break;\r\n\t\t\t\tvec2 xy=vec2(d0.x+i*xSpan,d0.y+i*ySpan);\r\n\t\t\t\tif(xy.x<0.||xy.x>resolution.x||xy.y<0.||xy.y>resolution.y) break;\r\n\t\t\t\tfloat s=length(xy-d0)/totalLen;\r\n\t\t\t\tvec2 uv=xy/resolution;\r\n\r\n\t\t\t\tfloat d = getDepth(uv);\r\n\t\t\t\tfloat vZ = getViewZ( d );\r\n\t\t\t\tif(-vZ>=cameraFar) continue;\r\n\t\t\t\tfloat cW = cameraProjectionMatrix[2][3] * vZ+cameraProjectionMatrix[3][3];\r\n\t\t\t\tvec3 vP=getViewPosition( uv, d, cW );\r\n\r\n\t\t\t\t#ifdef isPerspectiveCamera\r\n\t\t\t\t\t// https://www.comp.nus.edu.sg/~lowkl/publications/lowk_persp_interp_techrep.pdf\r\n\t\t\t\t\tfloat recipVPZ=1./viewPosition.z;\r\n\t\t\t\t\tfloat viewReflectRayZ=1./(recipVPZ+s*(1./d1viewPosition.z-recipVPZ));\r\n\t\t\t\t\tfloat sD=surfDist*cW;\r\n\t\t\t\t#else\r\n\t\t\t\t\tfloat viewReflectRayZ=viewPosition.z+s*(d1viewPosition.z-viewPosition.z);\r\n\t\t\t\t\tfloat sD=surfDist;\r\n\t\t\t\t#endif\r\n\t\t\t\tif(viewReflectRayZ-sD>vZ) continue;\r\n\r\n\t\t\t\t#ifdef isInfiniteThick\r\n\t\t\t\t\tif(viewReflectRayZ+thickTolerance*clipW<vP.z) break;\r\n\t\t\t\t#endif\r\n\t\t\t\tfloat away=pointToLineDistance(vP,viewPosition,d1viewPosition);\r\n\r\n\t\t\t\tfloat op=opacity;\r\n\r\n\t\t\t\tif(away<sD){\r\n\t\t\t\t\tvec3 vN=getViewNormal( uv );\r\n\t\t\t\t\tif(dot(viewReflectDir,vN)>=0.) continue;\r\n\t\t\t\t\tfloat distance=pointPlaneDistance(vP,viewPosition,viewNormal);\r\n\t\t\t\t\tif(distance>maxDistance) break;\r\n\t\t\t\t\t#ifdef isDistanceAttenuation\r\n\t\t\t\t\t\tfloat ratio=1.-(distance/maxDistance);\r\n\t\t\t\t\t\tfloat attenuation=ratio*ratio;\r\n\t\t\t\t\t\top=opacity*attenuation;\r\n\t\t\t\t\t#endif\r\n\t\t\t\t\t#ifdef isFresnel\r\n\t\t\t\t\t\tfloat fresnel=(dot(viewIncidenceDir,viewReflectDir)+1.)/2.;\r\n\t\t\t\t\t\top*=fresnel;\r\n\t\t\t\t\t#endif\r\n\t\t\t\t\tvec4 reflectColor=texture2D(tDiffuse,uv);\r\n\t\t\t\t\tgl_FragColor.xyz=reflectColor.xyz;\r\n\t\t\t\t\tgl_FragColor.a=op;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t`\r\n  )\r\n};\r\nconst SSRDepthShader = {\r\n  defines: {\r\n    PERSPECTIVE_CAMERA: 1\r\n  },\r\n  uniforms: {\r\n    tDepth: { value: null },\r\n    cameraNear: { value: null },\r\n    cameraFar: { value: null }\r\n  },\r\n  vertexShader: (\r\n    /* glsl */\r\n    `\r\n\r\n    varying vec2 vUv;\r\n\r\n    void main() {\r\n\r\n    \tvUv = uv;\r\n    \tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\r\n\r\n    }\r\n\r\n  `\r\n  ),\r\n  fragmentShader: (\r\n    /* glsl */\r\n    `\r\n\r\n    uniform sampler2D tDepth;\r\n\r\n    uniform float cameraNear;\r\n    uniform float cameraFar;\r\n\r\n    varying vec2 vUv;\r\n\r\n    #include <packing>\r\n\r\n\t\tfloat getLinearDepth( const in vec2 uv ) {\r\n\r\n\t\t\t#if PERSPECTIVE_CAMERA == 1\r\n\r\n\t\t\t\tfloat fragCoordZ = texture2D( tDepth, uv ).x;\r\n\t\t\t\tfloat viewZ = perspectiveDepthToViewZ( fragCoordZ, cameraNear, cameraFar );\r\n\t\t\t\treturn viewZToOrthographicDepth( viewZ, cameraNear, cameraFar );\r\n\r\n\t\t\t#else\r\n\r\n\t\t\t\treturn texture2D( tDepth, uv ).x;\r\n\r\n\t\t\t#endif\r\n\r\n\t\t}\r\n\r\n    void main() {\r\n\r\n    \tfloat depth = getLinearDepth( vUv );\r\n\t\t\tfloat d = 1.0 - depth;\r\n\t\t\t// d=(d-.999)*1000.;\r\n    \tgl_FragColor = vec4( vec3( d ), 1.0 );\r\n\r\n    }\r\n\r\n  `\r\n  )\r\n};\r\nconst SSRBlurShader = {\r\n  uniforms: {\r\n    tDiffuse: { value: null },\r\n    resolution: { value: /* @__PURE__ */ new Vector2() },\r\n    opacity: { value: 0.5 }\r\n  },\r\n  vertexShader: (\r\n    /* glsl */\r\n    `\r\n\r\n    varying vec2 vUv;\r\n\r\n    void main() {\r\n\r\n    \tvUv = uv;\r\n    \tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\r\n\r\n    }\r\n\r\n  `\r\n  ),\r\n  fragmentShader: (\r\n    /* glsl */\r\n    `\r\n\r\n    uniform sampler2D tDiffuse;\r\n    uniform vec2 resolution;\r\n    varying vec2 vUv;\r\n    void main() {\r\n\t\t\t//reverse engineering from PhotoShop blur filter, then change coefficient\r\n\r\n    \tvec2 texelSize = ( 1.0 / resolution );\r\n\r\n\t\t\tvec4 c=texture2D(tDiffuse,vUv);\r\n\r\n\t\t\tvec2 offset;\r\n\r\n\t\t\toffset=(vec2(-1,0))*texelSize;\r\n\t\t\tvec4 cl=texture2D(tDiffuse,vUv+offset);\r\n\r\n\t\t\toffset=(vec2(1,0))*texelSize;\r\n\t\t\tvec4 cr=texture2D(tDiffuse,vUv+offset);\r\n\r\n\t\t\toffset=(vec2(0,-1))*texelSize;\r\n\t\t\tvec4 cb=texture2D(tDiffuse,vUv+offset);\r\n\r\n\t\t\toffset=(vec2(0,1))*texelSize;\r\n\t\t\tvec4 ct=texture2D(tDiffuse,vUv+offset);\r\n\r\n\t\t\t// float coeCenter=.5;\r\n\t\t\t// float coeSide=.125;\r\n\t\t\tfloat coeCenter=.2;\r\n\t\t\tfloat coeSide=.2;\r\n\t\t\tfloat a=c.a*coeCenter+cl.a*coeSide+cr.a*coeSide+cb.a*coeSide+ct.a*coeSide;\r\n\t\t\tvec3 rgb=(c.rgb*c.a*coeCenter+cl.rgb*cl.a*coeSide+cr.rgb*cr.a*coeSide+cb.rgb*cb.a*coeSide+ct.rgb*ct.a*coeSide)/a;\r\n\t\t\tgl_FragColor=vec4(rgb,a);\r\n\r\n\t\t}\r\n\t`\r\n  )\r\n};\r\nexport {\r\n  SSRBlurShader,\r\n  SSRDepthShader,\r\n  SSRShader\r\n};\r\n", "var __defProp = Object.defineProperty;\r\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\r\nvar __publicField = (obj, key, value) => {\r\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\r\n  return value;\r\n};\r\nimport { Color, DepthTexture, UnsignedShortType, NearestFilter, WebGLRenderTarget, HalfFloatType, ShaderMaterial, UniformsUtils, NoBlending, MeshNormalMaterial, MeshBasicMaterial, SrcAlphaFactor, OneMinusSrcAlphaFactor, AddEquation, NormalBlending } from \"three\";\r\nimport { Pass, FullScreenQuad } from \"./Pass.js\";\r\nimport { SSRShader, SSRBlurShader, SSRDepthShader } from \"../shaders/SSRShader.js\";\r\nimport { CopyShader } from \"../shaders/CopyShader.js\";\r\nconst _SSRPass = class extends Pass {\r\n  constructor({ renderer, scene, camera, width, height, selects, bouncing = false, groundReflector }) {\r\n    super();\r\n    this.width = width !== void 0 ? width : 512;\r\n    this.height = height !== void 0 ? height : 512;\r\n    this.clear = true;\r\n    this.renderer = renderer;\r\n    this.scene = scene;\r\n    this.camera = camera;\r\n    this.groundReflector = groundReflector;\r\n    this.opacity = SSRShader.uniforms.opacity.value;\r\n    this.output = 0;\r\n    this.maxDistance = SSRShader.uniforms.maxDistance.value;\r\n    this.thickness = SSRShader.uniforms.thickness.value;\r\n    this.tempColor = new Color();\r\n    this._selects = selects;\r\n    this.selective = Array.isArray(this._selects);\r\n    Object.defineProperty(this, \"selects\", {\r\n      get() {\r\n        return this._selects;\r\n      },\r\n      set(val) {\r\n        if (this._selects === val)\r\n          return;\r\n        this._selects = val;\r\n        if (Array.isArray(val)) {\r\n          this.selective = true;\r\n          this.ssrMaterial.defines.SELECTIVE = true;\r\n          this.ssrMaterial.needsUpdate = true;\r\n        } else {\r\n          this.selective = false;\r\n          this.ssrMaterial.defines.SELECTIVE = false;\r\n          this.ssrMaterial.needsUpdate = true;\r\n        }\r\n      }\r\n    });\r\n    this._bouncing = bouncing;\r\n    Object.defineProperty(this, \"bouncing\", {\r\n      get() {\r\n        return this._bouncing;\r\n      },\r\n      set(val) {\r\n        if (this._bouncing === val)\r\n          return;\r\n        this._bouncing = val;\r\n        if (val) {\r\n          this.ssrMaterial.uniforms[\"tDiffuse\"].value = this.prevRenderTarget.texture;\r\n        } else {\r\n          this.ssrMaterial.uniforms[\"tDiffuse\"].value = this.beautyRenderTarget.texture;\r\n        }\r\n      }\r\n    });\r\n    this.blur = true;\r\n    this._distanceAttenuation = SSRShader.defines.DISTANCE_ATTENUATION;\r\n    Object.defineProperty(this, \"distanceAttenuation\", {\r\n      get() {\r\n        return this._distanceAttenuation;\r\n      },\r\n      set(val) {\r\n        if (this._distanceAttenuation === val)\r\n          return;\r\n        this._distanceAttenuation = val;\r\n        this.ssrMaterial.defines.DISTANCE_ATTENUATION = val;\r\n        this.ssrMaterial.needsUpdate = true;\r\n      }\r\n    });\r\n    this._fresnel = SSRShader.defines.FRESNEL;\r\n    Object.defineProperty(this, \"fresnel\", {\r\n      get() {\r\n        return this._fresnel;\r\n      },\r\n      set(val) {\r\n        if (this._fresnel === val)\r\n          return;\r\n        this._fresnel = val;\r\n        this.ssrMaterial.defines.FRESNEL = val;\r\n        this.ssrMaterial.needsUpdate = true;\r\n      }\r\n    });\r\n    this._infiniteThick = SSRShader.defines.INFINITE_THICK;\r\n    Object.defineProperty(this, \"infiniteThick\", {\r\n      get() {\r\n        return this._infiniteThick;\r\n      },\r\n      set(val) {\r\n        if (this._infiniteThick === val)\r\n          return;\r\n        this._infiniteThick = val;\r\n        this.ssrMaterial.defines.INFINITE_THICK = val;\r\n        this.ssrMaterial.needsUpdate = true;\r\n      }\r\n    });\r\n    const depthTexture = new DepthTexture();\r\n    depthTexture.type = UnsignedShortType;\r\n    depthTexture.minFilter = NearestFilter;\r\n    depthTexture.magFilter = NearestFilter;\r\n    this.beautyRenderTarget = new WebGLRenderTarget(this.width, this.height, {\r\n      minFilter: NearestFilter,\r\n      magFilter: NearestFilter,\r\n      type: HalfFloatType,\r\n      depthTexture,\r\n      depthBuffer: true\r\n    });\r\n    this.prevRenderTarget = new WebGLRenderTarget(this.width, this.height, {\r\n      minFilter: NearestFilter,\r\n      magFilter: NearestFilter\r\n    });\r\n    this.normalRenderTarget = new WebGLRenderTarget(this.width, this.height, {\r\n      minFilter: NearestFilter,\r\n      magFilter: NearestFilter,\r\n      type: HalfFloatType\r\n    });\r\n    this.metalnessRenderTarget = new WebGLRenderTarget(this.width, this.height, {\r\n      minFilter: NearestFilter,\r\n      magFilter: NearestFilter,\r\n      type: HalfFloatType\r\n    });\r\n    this.ssrRenderTarget = new WebGLRenderTarget(this.width, this.height, {\r\n      minFilter: NearestFilter,\r\n      magFilter: NearestFilter\r\n    });\r\n    this.blurRenderTarget = this.ssrRenderTarget.clone();\r\n    this.blurRenderTarget2 = this.ssrRenderTarget.clone();\r\n    this.ssrMaterial = new ShaderMaterial({\r\n      defines: Object.assign({}, SSRShader.defines, {\r\n        MAX_STEP: Math.sqrt(this.width * this.width + this.height * this.height)\r\n      }),\r\n      uniforms: UniformsUtils.clone(SSRShader.uniforms),\r\n      vertexShader: SSRShader.vertexShader,\r\n      fragmentShader: SSRShader.fragmentShader,\r\n      blending: NoBlending\r\n    });\r\n    this.ssrMaterial.uniforms[\"tDiffuse\"].value = this.beautyRenderTarget.texture;\r\n    this.ssrMaterial.uniforms[\"tNormal\"].value = this.normalRenderTarget.texture;\r\n    this.ssrMaterial.defines.SELECTIVE = this.selective;\r\n    this.ssrMaterial.needsUpdate = true;\r\n    this.ssrMaterial.uniforms[\"tMetalness\"].value = this.metalnessRenderTarget.texture;\r\n    this.ssrMaterial.uniforms[\"tDepth\"].value = this.beautyRenderTarget.depthTexture;\r\n    this.ssrMaterial.uniforms[\"cameraNear\"].value = this.camera.near;\r\n    this.ssrMaterial.uniforms[\"cameraFar\"].value = this.camera.far;\r\n    this.ssrMaterial.uniforms[\"thickness\"].value = this.thickness;\r\n    this.ssrMaterial.uniforms[\"resolution\"].value.set(this.width, this.height);\r\n    this.ssrMaterial.uniforms[\"cameraProjectionMatrix\"].value.copy(this.camera.projectionMatrix);\r\n    this.ssrMaterial.uniforms[\"cameraInverseProjectionMatrix\"].value.copy(this.camera.projectionMatrixInverse);\r\n    this.normalMaterial = new MeshNormalMaterial();\r\n    this.normalMaterial.blending = NoBlending;\r\n    this.metalnessOnMaterial = new MeshBasicMaterial({\r\n      color: \"white\"\r\n    });\r\n    this.metalnessOffMaterial = new MeshBasicMaterial({\r\n      color: \"black\"\r\n    });\r\n    this.blurMaterial = new ShaderMaterial({\r\n      defines: Object.assign({}, SSRBlurShader.defines),\r\n      uniforms: UniformsUtils.clone(SSRBlurShader.uniforms),\r\n      vertexShader: SSRBlurShader.vertexShader,\r\n      fragmentShader: SSRBlurShader.fragmentShader\r\n    });\r\n    this.blurMaterial.uniforms[\"tDiffuse\"].value = this.ssrRenderTarget.texture;\r\n    this.blurMaterial.uniforms[\"resolution\"].value.set(this.width, this.height);\r\n    this.blurMaterial2 = new ShaderMaterial({\r\n      defines: Object.assign({}, SSRBlurShader.defines),\r\n      uniforms: UniformsUtils.clone(SSRBlurShader.uniforms),\r\n      vertexShader: SSRBlurShader.vertexShader,\r\n      fragmentShader: SSRBlurShader.fragmentShader\r\n    });\r\n    this.blurMaterial2.uniforms[\"tDiffuse\"].value = this.blurRenderTarget.texture;\r\n    this.blurMaterial2.uniforms[\"resolution\"].value.set(this.width, this.height);\r\n    this.depthRenderMaterial = new ShaderMaterial({\r\n      defines: Object.assign({}, SSRDepthShader.defines),\r\n      uniforms: UniformsUtils.clone(SSRDepthShader.uniforms),\r\n      vertexShader: SSRDepthShader.vertexShader,\r\n      fragmentShader: SSRDepthShader.fragmentShader,\r\n      blending: NoBlending\r\n    });\r\n    this.depthRenderMaterial.uniforms[\"tDepth\"].value = this.beautyRenderTarget.depthTexture;\r\n    this.depthRenderMaterial.uniforms[\"cameraNear\"].value = this.camera.near;\r\n    this.depthRenderMaterial.uniforms[\"cameraFar\"].value = this.camera.far;\r\n    this.copyMaterial = new ShaderMaterial({\r\n      uniforms: UniformsUtils.clone(CopyShader.uniforms),\r\n      vertexShader: CopyShader.vertexShader,\r\n      fragmentShader: CopyShader.fragmentShader,\r\n      transparent: true,\r\n      depthTest: false,\r\n      depthWrite: false,\r\n      blendSrc: SrcAlphaFactor,\r\n      blendDst: OneMinusSrcAlphaFactor,\r\n      blendEquation: AddEquation,\r\n      blendSrcAlpha: SrcAlphaFactor,\r\n      blendDstAlpha: OneMinusSrcAlphaFactor,\r\n      blendEquationAlpha: AddEquation\r\n      // premultipliedAlpha:true,\r\n    });\r\n    this.fsQuad = new FullScreenQuad(null);\r\n    this.originalClearColor = new Color();\r\n  }\r\n  dispose() {\r\n    this.beautyRenderTarget.dispose();\r\n    this.prevRenderTarget.dispose();\r\n    this.normalRenderTarget.dispose();\r\n    this.metalnessRenderTarget.dispose();\r\n    this.ssrRenderTarget.dispose();\r\n    this.blurRenderTarget.dispose();\r\n    this.blurRenderTarget2.dispose();\r\n    this.normalMaterial.dispose();\r\n    this.metalnessOnMaterial.dispose();\r\n    this.metalnessOffMaterial.dispose();\r\n    this.blurMaterial.dispose();\r\n    this.blurMaterial2.dispose();\r\n    this.copyMaterial.dispose();\r\n    this.depthRenderMaterial.dispose();\r\n    this.fsQuad.dispose();\r\n  }\r\n  render(renderer, writeBuffer) {\r\n    renderer.setRenderTarget(this.beautyRenderTarget);\r\n    renderer.clear();\r\n    if (this.groundReflector) {\r\n      this.groundReflector.visible = false;\r\n      this.groundReflector.doRender(this.renderer, this.scene, this.camera);\r\n      this.groundReflector.visible = true;\r\n    }\r\n    renderer.render(this.scene, this.camera);\r\n    if (this.groundReflector)\r\n      this.groundReflector.visible = false;\r\n    this.renderOverride(renderer, this.normalMaterial, this.normalRenderTarget, 0, 0);\r\n    if (this.selective) {\r\n      this.renderMetalness(renderer, this.metalnessOnMaterial, this.metalnessRenderTarget, 0, 0);\r\n    }\r\n    this.ssrMaterial.uniforms[\"opacity\"].value = this.opacity;\r\n    this.ssrMaterial.uniforms[\"maxDistance\"].value = this.maxDistance;\r\n    this.ssrMaterial.uniforms[\"thickness\"].value = this.thickness;\r\n    this.renderPass(renderer, this.ssrMaterial, this.ssrRenderTarget);\r\n    if (this.blur) {\r\n      this.renderPass(renderer, this.blurMaterial, this.blurRenderTarget);\r\n      this.renderPass(renderer, this.blurMaterial2, this.blurRenderTarget2);\r\n    }\r\n    switch (this.output) {\r\n      case _SSRPass.OUTPUT.Default:\r\n        if (this.bouncing) {\r\n          this.copyMaterial.uniforms[\"tDiffuse\"].value = this.beautyRenderTarget.texture;\r\n          this.copyMaterial.blending = NoBlending;\r\n          this.renderPass(renderer, this.copyMaterial, this.prevRenderTarget);\r\n          if (this.blur)\r\n            this.copyMaterial.uniforms[\"tDiffuse\"].value = this.blurRenderTarget2.texture;\r\n          else\r\n            this.copyMaterial.uniforms[\"tDiffuse\"].value = this.ssrRenderTarget.texture;\r\n          this.copyMaterial.blending = NormalBlending;\r\n          this.renderPass(renderer, this.copyMaterial, this.prevRenderTarget);\r\n          this.copyMaterial.uniforms[\"tDiffuse\"].value = this.prevRenderTarget.texture;\r\n          this.copyMaterial.blending = NoBlending;\r\n          this.renderPass(renderer, this.copyMaterial, this.renderToScreen ? null : writeBuffer);\r\n        } else {\r\n          this.copyMaterial.uniforms[\"tDiffuse\"].value = this.beautyRenderTarget.texture;\r\n          this.copyMaterial.blending = NoBlending;\r\n          this.renderPass(renderer, this.copyMaterial, this.renderToScreen ? null : writeBuffer);\r\n          if (this.blur)\r\n            this.copyMaterial.uniforms[\"tDiffuse\"].value = this.blurRenderTarget2.texture;\r\n          else\r\n            this.copyMaterial.uniforms[\"tDiffuse\"].value = this.ssrRenderTarget.texture;\r\n          this.copyMaterial.blending = NormalBlending;\r\n          this.renderPass(renderer, this.copyMaterial, this.renderToScreen ? null : writeBuffer);\r\n        }\r\n        break;\r\n      case _SSRPass.OUTPUT.SSR:\r\n        if (this.blur)\r\n          this.copyMaterial.uniforms[\"tDiffuse\"].value = this.blurRenderTarget2.texture;\r\n        else\r\n          this.copyMaterial.uniforms[\"tDiffuse\"].value = this.ssrRenderTarget.texture;\r\n        this.copyMaterial.blending = NoBlending;\r\n        this.renderPass(renderer, this.copyMaterial, this.renderToScreen ? null : writeBuffer);\r\n        if (this.bouncing) {\r\n          if (this.blur)\r\n            this.copyMaterial.uniforms[\"tDiffuse\"].value = this.blurRenderTarget2.texture;\r\n          else\r\n            this.copyMaterial.uniforms[\"tDiffuse\"].value = this.beautyRenderTarget.texture;\r\n          this.copyMaterial.blending = NoBlending;\r\n          this.renderPass(renderer, this.copyMaterial, this.prevRenderTarget);\r\n          this.copyMaterial.uniforms[\"tDiffuse\"].value = this.ssrRenderTarget.texture;\r\n          this.copyMaterial.blending = NormalBlending;\r\n          this.renderPass(renderer, this.copyMaterial, this.prevRenderTarget);\r\n        }\r\n        break;\r\n      case _SSRPass.OUTPUT.Beauty:\r\n        this.copyMaterial.uniforms[\"tDiffuse\"].value = this.beautyRenderTarget.texture;\r\n        this.copyMaterial.blending = NoBlending;\r\n        this.renderPass(renderer, this.copyMaterial, this.renderToScreen ? null : writeBuffer);\r\n        break;\r\n      case _SSRPass.OUTPUT.Depth:\r\n        this.renderPass(renderer, this.depthRenderMaterial, this.renderToScreen ? null : writeBuffer);\r\n        break;\r\n      case _SSRPass.OUTPUT.Normal:\r\n        this.copyMaterial.uniforms[\"tDiffuse\"].value = this.normalRenderTarget.texture;\r\n        this.copyMaterial.blending = NoBlending;\r\n        this.renderPass(renderer, this.copyMaterial, this.renderToScreen ? null : writeBuffer);\r\n        break;\r\n      case _SSRPass.OUTPUT.Metalness:\r\n        this.copyMaterial.uniforms[\"tDiffuse\"].value = this.metalnessRenderTarget.texture;\r\n        this.copyMaterial.blending = NoBlending;\r\n        this.renderPass(renderer, this.copyMaterial, this.renderToScreen ? null : writeBuffer);\r\n        break;\r\n      default:\r\n        console.warn(\"THREE.SSRPass: Unknown output type.\");\r\n    }\r\n  }\r\n  renderPass(renderer, passMaterial, renderTarget, clearColor, clearAlpha) {\r\n    this.originalClearColor.copy(renderer.getClearColor(this.tempColor));\r\n    const originalClearAlpha = renderer.getClearAlpha(this.tempColor);\r\n    const originalAutoClear = renderer.autoClear;\r\n    renderer.setRenderTarget(renderTarget);\r\n    renderer.autoClear = false;\r\n    if (clearColor !== void 0 && clearColor !== null) {\r\n      renderer.setClearColor(clearColor);\r\n      renderer.setClearAlpha(clearAlpha || 0);\r\n      renderer.clear();\r\n    }\r\n    this.fsQuad.material = passMaterial;\r\n    this.fsQuad.render(renderer);\r\n    renderer.autoClear = originalAutoClear;\r\n    renderer.setClearColor(this.originalClearColor);\r\n    renderer.setClearAlpha(originalClearAlpha);\r\n  }\r\n  renderOverride(renderer, overrideMaterial, renderTarget, clearColor, clearAlpha) {\r\n    this.originalClearColor.copy(renderer.getClearColor(this.tempColor));\r\n    const originalClearAlpha = renderer.getClearAlpha(this.tempColor);\r\n    const originalAutoClear = renderer.autoClear;\r\n    renderer.setRenderTarget(renderTarget);\r\n    renderer.autoClear = false;\r\n    clearColor = overrideMaterial.clearColor || clearColor;\r\n    clearAlpha = overrideMaterial.clearAlpha || clearAlpha;\r\n    if (clearColor !== void 0 && clearColor !== null) {\r\n      renderer.setClearColor(clearColor);\r\n      renderer.setClearAlpha(clearAlpha || 0);\r\n      renderer.clear();\r\n    }\r\n    this.scene.overrideMaterial = overrideMaterial;\r\n    renderer.render(this.scene, this.camera);\r\n    this.scene.overrideMaterial = null;\r\n    renderer.autoClear = originalAutoClear;\r\n    renderer.setClearColor(this.originalClearColor);\r\n    renderer.setClearAlpha(originalClearAlpha);\r\n  }\r\n  renderMetalness(renderer, overrideMaterial, renderTarget, clearColor, clearAlpha) {\r\n    this.originalClearColor.copy(renderer.getClearColor(this.tempColor));\r\n    const originalClearAlpha = renderer.getClearAlpha(this.tempColor);\r\n    const originalAutoClear = renderer.autoClear;\r\n    renderer.setRenderTarget(renderTarget);\r\n    renderer.autoClear = false;\r\n    clearColor = overrideMaterial.clearColor || clearColor;\r\n    clearAlpha = overrideMaterial.clearAlpha || clearAlpha;\r\n    if (clearColor !== void 0 && clearColor !== null) {\r\n      renderer.setClearColor(clearColor);\r\n      renderer.setClearAlpha(clearAlpha || 0);\r\n      renderer.clear();\r\n    }\r\n    this.scene.traverseVisible((child) => {\r\n      child._SSRPassBackupMaterial = child.material;\r\n      if (this._selects.includes(child)) {\r\n        child.material = this.metalnessOnMaterial;\r\n      } else {\r\n        child.material = this.metalnessOffMaterial;\r\n      }\r\n    });\r\n    renderer.render(this.scene, this.camera);\r\n    this.scene.traverseVisible((child) => {\r\n      child.material = child._SSRPassBackupMaterial;\r\n    });\r\n    renderer.autoClear = originalAutoClear;\r\n    renderer.setClearColor(this.originalClearColor);\r\n    renderer.setClearAlpha(originalClearAlpha);\r\n  }\r\n  setSize(width, height) {\r\n    this.width = width;\r\n    this.height = height;\r\n    this.ssrMaterial.defines.MAX_STEP = Math.sqrt(width * width + height * height);\r\n    this.ssrMaterial.needsUpdate = true;\r\n    this.beautyRenderTarget.setSize(width, height);\r\n    this.prevRenderTarget.setSize(width, height);\r\n    this.ssrRenderTarget.setSize(width, height);\r\n    this.normalRenderTarget.setSize(width, height);\r\n    this.metalnessRenderTarget.setSize(width, height);\r\n    this.blurRenderTarget.setSize(width, height);\r\n    this.blurRenderTarget2.setSize(width, height);\r\n    this.ssrMaterial.uniforms[\"resolution\"].value.set(width, height);\r\n    this.ssrMaterial.uniforms[\"cameraProjectionMatrix\"].value.copy(this.camera.projectionMatrix);\r\n    this.ssrMaterial.uniforms[\"cameraInverseProjectionMatrix\"].value.copy(this.camera.projectionMatrixInverse);\r\n    this.blurMaterial.uniforms[\"resolution\"].value.set(width, height);\r\n    this.blurMaterial2.uniforms[\"resolution\"].value.set(width, height);\r\n  }\r\n};\r\nlet SSRPass = _SSRPass;\r\n__publicField(SSRPass, \"OUTPUT\", {\r\n  Default: 0,\r\n  SSR: 1,\r\n  Beauty: 3,\r\n  Depth: 4,\r\n  Normal: 5,\r\n  Metalness: 7\r\n});\r\nexport {\r\n  SSRPass\r\n};\r\n", "import { Vector2 } from \"three\";\r\nconst ConvolutionShader = {\r\n  defines: {\r\n    KERNEL_SIZE_FLOAT: \"25.0\",\r\n    KERNEL_SIZE_INT: \"25\"\r\n  },\r\n  uniforms: {\r\n    tDiffuse: { value: null },\r\n    uImageIncrement: { value: /* @__PURE__ */ new Vector2(1953125e-9, 0) },\r\n    cKernel: { value: [] }\r\n  },\r\n  vertexShader: [\r\n    \"uniform vec2 uImageIncrement;\",\r\n    \"varying vec2 vUv;\",\r\n    \"void main() {\",\r\n    \"\tvUv = uv - ( ( KERNEL_SIZE_FLOAT - 1.0 ) / 2.0 ) * uImageIncrement;\",\r\n    \"\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\r\n    \"}\"\r\n  ].join(\"\\n\"),\r\n  fragmentShader: [\r\n    \"uniform float cKernel[ KERNEL_SIZE_INT ];\",\r\n    \"uniform sampler2D tDiffuse;\",\r\n    \"uniform vec2 uImageIncrement;\",\r\n    \"varying vec2 vUv;\",\r\n    \"void main() {\",\r\n    \"\tvec2 imageCoord = vUv;\",\r\n    \"\tvec4 sum = vec4( 0.0, 0.0, 0.0, 0.0 );\",\r\n    \"\tfor( int i = 0; i < KERNEL_SIZE_INT; i ++ ) {\",\r\n    \"\t\tsum += texture2D( tDiffuse, imageCoord ) * cKernel[ i ];\",\r\n    \"\t\timageCoord += uImageIncrement;\",\r\n    \"\t}\",\r\n    \"\tgl_FragColor = sum;\",\r\n    \"}\"\r\n  ].join(\"\\n\"),\r\n  buildKernel: function(sigma) {\r\n    function gauss(x, sigma2) {\r\n      return Math.exp(-(x * x) / (2 * sigma2 * sigma2));\r\n    }\r\n    const kMaxKernelSize = 25;\r\n    const kernelSize = Math.min(2 * Math.ceil(sigma * 3) + 1, kMaxKernelSize);\r\n    const halfWidth = (kernelSize - 1) * 0.5;\r\n    const values = new Array(kernelSize);\r\n    let sum = 0;\r\n    for (let i = 0; i < kernelSize; ++i) {\r\n      values[i] = gauss(i - halfWidth, sigma);\r\n      sum += values[i];\r\n    }\r\n    for (let i = 0; i < kernelSize; ++i)\r\n      values[i] /= sum;\r\n    return values;\r\n  }\r\n};\r\nexport {\r\n  ConvolutionShader\r\n};\r\n", "import { Loader, LoaderUtils, FileLoader, Color, SpotLight, PointLight, DirectionalLight, MeshBasicMaterial, MeshPhysicalMaterial, Vector2, Matrix4, Vector3, Quaternion, InstancedMesh, Object3D, Interpolant, NearestFilter, LinearFilter, NearestMipmapNearestFilter, LinearMipmapNearestFilter, NearestMipmapLinearFilter, LinearMipmapLinearFilter, ClampToEdgeWrapping, MirroredRepeatWrapping, RepeatWrapping, REVISION, InterpolateLinear, InterpolateDiscrete, MeshStandardMaterial, FrontSide, TextureLoader, ImageBitmapLoader, BufferAttribute, InterleavedBuffer, InterleavedBufferAttribute, Texture, PointsMaterial, Material, LineBasicMaterial, DoubleSide, PropertyBinding, BufferGeometry, SkinnedMesh, Mesh, TriangleStripDrawMode, TriangleFanDrawMode, LineSegments, Line, LineLoop, Points, Group, PerspectiveCamera, MathUtils, OrthographicCamera, Skeleton, VectorKeyframeTrack, QuaternionKeyframeTrack, NumberKeyframeTrack, AnimationClip, Bone, Box3, Sphere } from \"three\";\r\nimport { toTrianglesDrawMode } from \"../utils/BufferGeometryUtils.js\";\r\nclass GLTFLoader extends Loader {\r\n  constructor(manager) {\r\n    super(manager);\r\n    this.dracoLoader = null;\r\n    this.ktx2Loader = null;\r\n    this.meshoptDecoder = null;\r\n    this.pluginCallbacks = [];\r\n    this.register(function(parser) {\r\n      return new GLTFMaterialsClearcoatExtension(parser);\r\n    });\r\n    this.register(function(parser) {\r\n      return new GLTFTextureBasisUExtension(parser);\r\n    });\r\n    this.register(function(parser) {\r\n      return new GLTFTextureWebPExtension(parser);\r\n    });\r\n    this.register(function(parser) {\r\n      return new GLTFTextureAVIFExtension(parser);\r\n    });\r\n    this.register(function(parser) {\r\n      return new GLTFMaterialsSheenExtension(parser);\r\n    });\r\n    this.register(function(parser) {\r\n      return new GLTFMaterialsTransmissionExtension(parser);\r\n    });\r\n    this.register(function(parser) {\r\n      return new GLTFMaterialsVolumeExtension(parser);\r\n    });\r\n    this.register(function(parser) {\r\n      return new GLTFMaterialsIorExtension(parser);\r\n    });\r\n    this.register(function(parser) {\r\n      return new GLTFMaterialsEmissiveStrengthExtension(parser);\r\n    });\r\n    this.register(function(parser) {\r\n      return new GLTFMaterialsSpecularExtension(parser);\r\n    });\r\n    this.register(function(parser) {\r\n      return new GLTFMaterialsIridescenceExtension(parser);\r\n    });\r\n    this.register(function(parser) {\r\n      return new GLTFMaterialsAnisotropyExtension(parser);\r\n    });\r\n    this.register(function(parser) {\r\n      return new GLTFLightsExtension(parser);\r\n    });\r\n    this.register(function(parser) {\r\n      return new GLTFMeshoptCompression(parser);\r\n    });\r\n    this.register(function(parser) {\r\n      return new GLTFMeshGpuInstancing(parser);\r\n    });\r\n  }\r\n  load(url, onLoad, onProgress, onError) {\r\n    const scope = this;\r\n    let resourcePath;\r\n    if (this.resourcePath !== \"\") {\r\n      resourcePath = this.resourcePath;\r\n    } else if (this.path !== \"\") {\r\n      resourcePath = this.path;\r\n    } else {\r\n      resourcePath = LoaderUtils.extractUrlBase(url);\r\n    }\r\n    this.manager.itemStart(url);\r\n    const _onError = function(e) {\r\n      if (onError) {\r\n        onError(e);\r\n      } else {\r\n        console.error(e);\r\n      }\r\n      scope.manager.itemError(url);\r\n      scope.manager.itemEnd(url);\r\n    };\r\n    const loader = new FileLoader(this.manager);\r\n    loader.setPath(this.path);\r\n    loader.setResponseType(\"arraybuffer\");\r\n    loader.setRequestHeader(this.requestHeader);\r\n    loader.setWithCredentials(this.withCredentials);\r\n    loader.load(\r\n      url,\r\n      function(data) {\r\n        try {\r\n          scope.parse(\r\n            data,\r\n            resourcePath,\r\n            function(gltf) {\r\n              onLoad(gltf);\r\n              scope.manager.itemEnd(url);\r\n            },\r\n            _onError\r\n          );\r\n        } catch (e) {\r\n          _onError(e);\r\n        }\r\n      },\r\n      onProgress,\r\n      _onError\r\n    );\r\n  }\r\n  setDRACOLoader(dracoLoader) {\r\n    this.dracoLoader = dracoLoader;\r\n    return this;\r\n  }\r\n  setDDSLoader() {\r\n    throw new Error('THREE.GLTFLoader: \"MSFT_texture_dds\" no longer supported. Please update to \"KHR_texture_basisu\".');\r\n  }\r\n  setKTX2Loader(ktx2Loader) {\r\n    this.ktx2Loader = ktx2Loader;\r\n    return this;\r\n  }\r\n  setMeshoptDecoder(meshoptDecoder) {\r\n    this.meshoptDecoder = meshoptDecoder;\r\n    return this;\r\n  }\r\n  register(callback) {\r\n    if (this.pluginCallbacks.indexOf(callback) === -1) {\r\n      this.pluginCallbacks.push(callback);\r\n    }\r\n    return this;\r\n  }\r\n  unregister(callback) {\r\n    if (this.pluginCallbacks.indexOf(callback) !== -1) {\r\n      this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(callback), 1);\r\n    }\r\n    return this;\r\n  }\r\n  parse(data, path, onLoad, onError) {\r\n    let json;\r\n    const extensions = {};\r\n    const plugins = {};\r\n    if (typeof data === \"string\") {\r\n      json = JSON.parse(data);\r\n    } else if (data instanceof ArrayBuffer) {\r\n      const magic = LoaderUtils.decodeText(new Uint8Array(data.slice(0, 4)));\r\n      if (magic === BINARY_EXTENSION_HEADER_MAGIC) {\r\n        try {\r\n          extensions[EXTENSIONS.KHR_BINARY_GLTF] = new GLTFBinaryExtension(data);\r\n        } catch (error) {\r\n          if (onError)\r\n            onError(error);\r\n          return;\r\n        }\r\n        json = JSON.parse(extensions[EXTENSIONS.KHR_BINARY_GLTF].content);\r\n      } else {\r\n        json = JSON.parse(LoaderUtils.decodeText(new Uint8Array(data)));\r\n      }\r\n    } else {\r\n      json = data;\r\n    }\r\n    if (json.asset === void 0 || json.asset.version[0] < 2) {\r\n      if (onError)\r\n        onError(new Error(\"THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.\"));\r\n      return;\r\n    }\r\n    const parser = new GLTFParser(json, {\r\n      path: path || this.resourcePath || \"\",\r\n      crossOrigin: this.crossOrigin,\r\n      requestHeader: this.requestHeader,\r\n      manager: this.manager,\r\n      ktx2Loader: this.ktx2Loader,\r\n      meshoptDecoder: this.meshoptDecoder\r\n    });\r\n    parser.fileLoader.setRequestHeader(this.requestHeader);\r\n    for (let i = 0; i < this.pluginCallbacks.length; i++) {\r\n      const plugin = this.pluginCallbacks[i](parser);\r\n      plugins[plugin.name] = plugin;\r\n      extensions[plugin.name] = true;\r\n    }\r\n    if (json.extensionsUsed) {\r\n      for (let i = 0; i < json.extensionsUsed.length; ++i) {\r\n        const extensionName = json.extensionsUsed[i];\r\n        const extensionsRequired = json.extensionsRequired || [];\r\n        switch (extensionName) {\r\n          case EXTENSIONS.KHR_MATERIALS_UNLIT:\r\n            extensions[extensionName] = new GLTFMaterialsUnlitExtension();\r\n            break;\r\n          case EXTENSIONS.KHR_DRACO_MESH_COMPRESSION:\r\n            extensions[extensionName] = new GLTFDracoMeshCompressionExtension(json, this.dracoLoader);\r\n            break;\r\n          case EXTENSIONS.KHR_TEXTURE_TRANSFORM:\r\n            extensions[extensionName] = new GLTFTextureTransformExtension();\r\n            break;\r\n          case EXTENSIONS.KHR_MESH_QUANTIZATION:\r\n            extensions[extensionName] = new GLTFMeshQuantizationExtension();\r\n            break;\r\n          default:\r\n            if (extensionsRequired.indexOf(extensionName) >= 0 && plugins[extensionName] === void 0) {\r\n              console.warn('THREE.GLTFLoader: Unknown extension \"' + extensionName + '\".');\r\n            }\r\n        }\r\n      }\r\n    }\r\n    parser.setExtensions(extensions);\r\n    parser.setPlugins(plugins);\r\n    parser.parse(onLoad, onError);\r\n  }\r\n  parseAsync(data, path) {\r\n    const scope = this;\r\n    return new Promise(function(resolve, reject) {\r\n      scope.parse(data, path, resolve, reject);\r\n    });\r\n  }\r\n}\r\nfunction GLTFRegistry() {\r\n  let objects = {};\r\n  return {\r\n    get: function(key) {\r\n      return objects[key];\r\n    },\r\n    add: function(key, object) {\r\n      objects[key] = object;\r\n    },\r\n    remove: function(key) {\r\n      delete objects[key];\r\n    },\r\n    removeAll: function() {\r\n      objects = {};\r\n    }\r\n  };\r\n}\r\nconst EXTENSIONS = {\r\n  KHR_BINARY_GLTF: \"KHR_binary_glTF\",\r\n  KHR_DRACO_MESH_COMPRESSION: \"KHR_draco_mesh_compression\",\r\n  KHR_LIGHTS_PUNCTUAL: \"KHR_lights_punctual\",\r\n  KHR_MATERIALS_CLEARCOAT: \"KHR_materials_clearcoat\",\r\n  KHR_MATERIALS_IOR: \"KHR_materials_ior\",\r\n  KHR_MATERIALS_SHEEN: \"KHR_materials_sheen\",\r\n  KHR_MATERIALS_SPECULAR: \"KHR_materials_specular\",\r\n  KHR_MATERIALS_TRANSMISSION: \"KHR_materials_transmission\",\r\n  KHR_MATERIALS_IRIDESCENCE: \"KHR_materials_iridescence\",\r\n  KHR_MATERIALS_ANISOTROPY: \"KHR_materials_anisotropy\",\r\n  KHR_MATERIALS_UNLIT: \"KHR_materials_unlit\",\r\n  KHR_MATERIALS_VOLUME: \"KHR_materials_volume\",\r\n  KHR_TEXTURE_BASISU: \"KHR_texture_basisu\",\r\n  KHR_TEXTURE_TRANSFORM: \"KHR_texture_transform\",\r\n  KHR_MESH_QUANTIZATION: \"KHR_mesh_quantization\",\r\n  KHR_MATERIALS_EMISSIVE_STRENGTH: \"KHR_materials_emissive_strength\",\r\n  EXT_TEXTURE_WEBP: \"EXT_texture_webp\",\r\n  EXT_TEXTURE_AVIF: \"EXT_texture_avif\",\r\n  EXT_MESHOPT_COMPRESSION: \"EXT_meshopt_compression\",\r\n  EXT_MESH_GPU_INSTANCING: \"EXT_mesh_gpu_instancing\"\r\n};\r\nclass GLTFLightsExtension {\r\n  constructor(parser) {\r\n    this.parser = parser;\r\n    this.name = EXTENSIONS.KHR_LIGHTS_PUNCTUAL;\r\n    this.cache = { refs: {}, uses: {} };\r\n  }\r\n  _markDefs() {\r\n    const parser = this.parser;\r\n    const nodeDefs = this.parser.json.nodes || [];\r\n    for (let nodeIndex = 0, nodeLength = nodeDefs.length; nodeIndex < nodeLength; nodeIndex++) {\r\n      const nodeDef = nodeDefs[nodeIndex];\r\n      if (nodeDef.extensions && nodeDef.extensions[this.name] && nodeDef.extensions[this.name].light !== void 0) {\r\n        parser._addNodeRef(this.cache, nodeDef.extensions[this.name].light);\r\n      }\r\n    }\r\n  }\r\n  _loadLight(lightIndex) {\r\n    const parser = this.parser;\r\n    const cacheKey = \"light:\" + lightIndex;\r\n    let dependency = parser.cache.get(cacheKey);\r\n    if (dependency)\r\n      return dependency;\r\n    const json = parser.json;\r\n    const extensions = json.extensions && json.extensions[this.name] || {};\r\n    const lightDefs = extensions.lights || [];\r\n    const lightDef = lightDefs[lightIndex];\r\n    let lightNode;\r\n    const color = new Color(16777215);\r\n    if (lightDef.color !== void 0)\r\n      color.fromArray(lightDef.color);\r\n    const range = lightDef.range !== void 0 ? lightDef.range : 0;\r\n    switch (lightDef.type) {\r\n      case \"directional\":\r\n        lightNode = new DirectionalLight(color);\r\n        lightNode.target.position.set(0, 0, -1);\r\n        lightNode.add(lightNode.target);\r\n        break;\r\n      case \"point\":\r\n        lightNode = new PointLight(color);\r\n        lightNode.distance = range;\r\n        break;\r\n      case \"spot\":\r\n        lightNode = new SpotLight(color);\r\n        lightNode.distance = range;\r\n        lightDef.spot = lightDef.spot || {};\r\n        lightDef.spot.innerConeAngle = lightDef.spot.innerConeAngle !== void 0 ? lightDef.spot.innerConeAngle : 0;\r\n        lightDef.spot.outerConeAngle = lightDef.spot.outerConeAngle !== void 0 ? lightDef.spot.outerConeAngle : Math.PI / 4;\r\n        lightNode.angle = lightDef.spot.outerConeAngle;\r\n        lightNode.penumbra = 1 - lightDef.spot.innerConeAngle / lightDef.spot.outerConeAngle;\r\n        lightNode.target.position.set(0, 0, -1);\r\n        lightNode.add(lightNode.target);\r\n        break;\r\n      default:\r\n        throw new Error(\"THREE.GLTFLoader: Unexpected light type: \" + lightDef.type);\r\n    }\r\n    lightNode.position.set(0, 0, 0);\r\n    lightNode.decay = 2;\r\n    assignExtrasToUserData(lightNode, lightDef);\r\n    if (lightDef.intensity !== void 0)\r\n      lightNode.intensity = lightDef.intensity;\r\n    lightNode.name = parser.createUniqueName(lightDef.name || \"light_\" + lightIndex);\r\n    dependency = Promise.resolve(lightNode);\r\n    parser.cache.add(cacheKey, dependency);\r\n    return dependency;\r\n  }\r\n  getDependency(type, index) {\r\n    if (type !== \"light\")\r\n      return;\r\n    return this._loadLight(index);\r\n  }\r\n  createNodeAttachment(nodeIndex) {\r\n    const self2 = this;\r\n    const parser = this.parser;\r\n    const json = parser.json;\r\n    const nodeDef = json.nodes[nodeIndex];\r\n    const lightDef = nodeDef.extensions && nodeDef.extensions[this.name] || {};\r\n    const lightIndex = lightDef.light;\r\n    if (lightIndex === void 0)\r\n      return null;\r\n    return this._loadLight(lightIndex).then(function(light) {\r\n      return parser._getNodeRef(self2.cache, lightIndex, light);\r\n    });\r\n  }\r\n}\r\nclass GLTFMaterialsUnlitExtension {\r\n  constructor() {\r\n    this.name = EXTENSIONS.KHR_MATERIALS_UNLIT;\r\n  }\r\n  getMaterialType() {\r\n    return MeshBasicMaterial;\r\n  }\r\n  extendParams(materialParams, materialDef, parser) {\r\n    const pending = [];\r\n    materialParams.color = new Color(1, 1, 1);\r\n    materialParams.opacity = 1;\r\n    const metallicRoughness = materialDef.pbrMetallicRoughness;\r\n    if (metallicRoughness) {\r\n      if (Array.isArray(metallicRoughness.baseColorFactor)) {\r\n        const array = metallicRoughness.baseColorFactor;\r\n        materialParams.color.fromArray(array);\r\n        materialParams.opacity = array[3];\r\n      }\r\n      if (metallicRoughness.baseColorTexture !== void 0) {\r\n        pending.push(parser.assignTexture(materialParams, \"map\", metallicRoughness.baseColorTexture, 3001));\r\n      }\r\n    }\r\n    return Promise.all(pending);\r\n  }\r\n}\r\nclass GLTFMaterialsEmissiveStrengthExtension {\r\n  constructor(parser) {\r\n    this.parser = parser;\r\n    this.name = EXTENSIONS.KHR_MATERIALS_EMISSIVE_STRENGTH;\r\n  }\r\n  extendMaterialParams(materialIndex, materialParams) {\r\n    const parser = this.parser;\r\n    const materialDef = parser.json.materials[materialIndex];\r\n    if (!materialDef.extensions || !materialDef.extensions[this.name]) {\r\n      return Promise.resolve();\r\n    }\r\n    const emissiveStrength = materialDef.extensions[this.name].emissiveStrength;\r\n    if (emissiveStrength !== void 0) {\r\n      materialParams.emissiveIntensity = emissiveStrength;\r\n    }\r\n    return Promise.resolve();\r\n  }\r\n}\r\nclass GLTFMaterialsClearcoatExtension {\r\n  constructor(parser) {\r\n    this.parser = parser;\r\n    this.name = EXTENSIONS.KHR_MATERIALS_CLEARCOAT;\r\n  }\r\n  getMaterialType(materialIndex) {\r\n    const parser = this.parser;\r\n    const materialDef = parser.json.materials[materialIndex];\r\n    if (!materialDef.extensions || !materialDef.extensions[this.name])\r\n      return null;\r\n    return MeshPhysicalMaterial;\r\n  }\r\n  extendMaterialParams(materialIndex, materialParams) {\r\n    const parser = this.parser;\r\n    const materialDef = parser.json.materials[materialIndex];\r\n    if (!materialDef.extensions || !materialDef.extensions[this.name]) {\r\n      return Promise.resolve();\r\n    }\r\n    const pending = [];\r\n    const extension = materialDef.extensions[this.name];\r\n    if (extension.clearcoatFactor !== void 0) {\r\n      materialParams.clearcoat = extension.clearcoatFactor;\r\n    }\r\n    if (extension.clearcoatTexture !== void 0) {\r\n      pending.push(parser.assignTexture(materialParams, \"clearcoatMap\", extension.clearcoatTexture));\r\n    }\r\n    if (extension.clearcoatRoughnessFactor !== void 0) {\r\n      materialParams.clearcoatRoughness = extension.clearcoatRoughnessFactor;\r\n    }\r\n    if (extension.clearcoatRoughnessTexture !== void 0) {\r\n      pending.push(parser.assignTexture(materialParams, \"clearcoatRoughnessMap\", extension.clearcoatRoughnessTexture));\r\n    }\r\n    if (extension.clearcoatNormalTexture !== void 0) {\r\n      pending.push(parser.assignTexture(materialParams, \"clearcoatNormalMap\", extension.clearcoatNormalTexture));\r\n      if (extension.clearcoatNormalTexture.scale !== void 0) {\r\n        const scale = extension.clearcoatNormalTexture.scale;\r\n        materialParams.clearcoatNormalScale = new Vector2(scale, scale);\r\n      }\r\n    }\r\n    return Promise.all(pending);\r\n  }\r\n}\r\nclass GLTFMaterialsIridescenceExtension {\r\n  constructor(parser) {\r\n    this.parser = parser;\r\n    this.name = EXTENSIONS.KHR_MATERIALS_IRIDESCENCE;\r\n  }\r\n  getMaterialType(materialIndex) {\r\n    const parser = this.parser;\r\n    const materialDef = parser.json.materials[materialIndex];\r\n    if (!materialDef.extensions || !materialDef.extensions[this.name])\r\n      return null;\r\n    return MeshPhysicalMaterial;\r\n  }\r\n  extendMaterialParams(materialIndex, materialParams) {\r\n    const parser = this.parser;\r\n    const materialDef = parser.json.materials[materialIndex];\r\n    if (!materialDef.extensions || !materialDef.extensions[this.name]) {\r\n      return Promise.resolve();\r\n    }\r\n    const pending = [];\r\n    const extension = materialDef.extensions[this.name];\r\n    if (extension.iridescenceFactor !== void 0) {\r\n      materialParams.iridescence = extension.iridescenceFactor;\r\n    }\r\n    if (extension.iridescenceTexture !== void 0) {\r\n      pending.push(parser.assignTexture(materialParams, \"iridescenceMap\", extension.iridescenceTexture));\r\n    }\r\n    if (extension.iridescenceIor !== void 0) {\r\n      materialParams.iridescenceIOR = extension.iridescenceIor;\r\n    }\r\n    if (materialParams.iridescenceThicknessRange === void 0) {\r\n      materialParams.iridescenceThicknessRange = [100, 400];\r\n    }\r\n    if (extension.iridescenceThicknessMinimum !== void 0) {\r\n      materialParams.iridescenceThicknessRange[0] = extension.iridescenceThicknessMinimum;\r\n    }\r\n    if (extension.iridescenceThicknessMaximum !== void 0) {\r\n      materialParams.iridescenceThicknessRange[1] = extension.iridescenceThicknessMaximum;\r\n    }\r\n    if (extension.iridescenceThicknessTexture !== void 0) {\r\n      pending.push(\r\n        parser.assignTexture(materialParams, \"iridescenceThicknessMap\", extension.iridescenceThicknessTexture)\r\n      );\r\n    }\r\n    return Promise.all(pending);\r\n  }\r\n}\r\nclass GLTFMaterialsSheenExtension {\r\n  constructor(parser) {\r\n    this.parser = parser;\r\n    this.name = EXTENSIONS.KHR_MATERIALS_SHEEN;\r\n  }\r\n  getMaterialType(materialIndex) {\r\n    const parser = this.parser;\r\n    const materialDef = parser.json.materials[materialIndex];\r\n    if (!materialDef.extensions || !materialDef.extensions[this.name])\r\n      return null;\r\n    return MeshPhysicalMaterial;\r\n  }\r\n  extendMaterialParams(materialIndex, materialParams) {\r\n    const parser = this.parser;\r\n    const materialDef = parser.json.materials[materialIndex];\r\n    if (!materialDef.extensions || !materialDef.extensions[this.name]) {\r\n      return Promise.resolve();\r\n    }\r\n    const pending = [];\r\n    materialParams.sheenColor = new Color(0, 0, 0);\r\n    materialParams.sheenRoughness = 0;\r\n    materialParams.sheen = 1;\r\n    const extension = materialDef.extensions[this.name];\r\n    if (extension.sheenColorFactor !== void 0) {\r\n      materialParams.sheenColor.fromArray(extension.sheenColorFactor);\r\n    }\r\n    if (extension.sheenRoughnessFactor !== void 0) {\r\n      materialParams.sheenRoughness = extension.sheenRoughnessFactor;\r\n    }\r\n    if (extension.sheenColorTexture !== void 0) {\r\n      pending.push(parser.assignTexture(materialParams, \"sheenColorMap\", extension.sheenColorTexture, 3001));\r\n    }\r\n    if (extension.sheenRoughnessTexture !== void 0) {\r\n      pending.push(parser.assignTexture(materialParams, \"sheenRoughnessMap\", extension.sheenRoughnessTexture));\r\n    }\r\n    return Promise.all(pending);\r\n  }\r\n}\r\nclass GLTFMaterialsTransmissionExtension {\r\n  constructor(parser) {\r\n    this.parser = parser;\r\n    this.name = EXTENSIONS.KHR_MATERIALS_TRANSMISSION;\r\n  }\r\n  getMaterialType(materialIndex) {\r\n    const parser = this.parser;\r\n    const materialDef = parser.json.materials[materialIndex];\r\n    if (!materialDef.extensions || !materialDef.extensions[this.name])\r\n      return null;\r\n    return MeshPhysicalMaterial;\r\n  }\r\n  extendMaterialParams(materialIndex, materialParams) {\r\n    const parser = this.parser;\r\n    const materialDef = parser.json.materials[materialIndex];\r\n    if (!materialDef.extensions || !materialDef.extensions[this.name]) {\r\n      return Promise.resolve();\r\n    }\r\n    const pending = [];\r\n    const extension = materialDef.extensions[this.name];\r\n    if (extension.transmissionFactor !== void 0) {\r\n      materialParams.transmission = extension.transmissionFactor;\r\n    }\r\n    if (extension.transmissionTexture !== void 0) {\r\n      pending.push(parser.assignTexture(materialParams, \"transmissionMap\", extension.transmissionTexture));\r\n    }\r\n    return Promise.all(pending);\r\n  }\r\n}\r\nclass GLTFMaterialsVolumeExtension {\r\n  constructor(parser) {\r\n    this.parser = parser;\r\n    this.name = EXTENSIONS.KHR_MATERIALS_VOLUME;\r\n  }\r\n  getMaterialType(materialIndex) {\r\n    const parser = this.parser;\r\n    const materialDef = parser.json.materials[materialIndex];\r\n    if (!materialDef.extensions || !materialDef.extensions[this.name])\r\n      return null;\r\n    return MeshPhysicalMaterial;\r\n  }\r\n  extendMaterialParams(materialIndex, materialParams) {\r\n    const parser = this.parser;\r\n    const materialDef = parser.json.materials[materialIndex];\r\n    if (!materialDef.extensions || !materialDef.extensions[this.name]) {\r\n      return Promise.resolve();\r\n    }\r\n    const pending = [];\r\n    const extension = materialDef.extensions[this.name];\r\n    materialParams.thickness = extension.thicknessFactor !== void 0 ? extension.thicknessFactor : 0;\r\n    if (extension.thicknessTexture !== void 0) {\r\n      pending.push(parser.assignTexture(materialParams, \"thicknessMap\", extension.thicknessTexture));\r\n    }\r\n    materialParams.attenuationDistance = extension.attenuationDistance || Infinity;\r\n    const colorArray = extension.attenuationColor || [1, 1, 1];\r\n    materialParams.attenuationColor = new Color(colorArray[0], colorArray[1], colorArray[2]);\r\n    return Promise.all(pending);\r\n  }\r\n}\r\nclass GLTFMaterialsIorExtension {\r\n  constructor(parser) {\r\n    this.parser = parser;\r\n    this.name = EXTENSIONS.KHR_MATERIALS_IOR;\r\n  }\r\n  getMaterialType(materialIndex) {\r\n    const parser = this.parser;\r\n    const materialDef = parser.json.materials[materialIndex];\r\n    if (!materialDef.extensions || !materialDef.extensions[this.name])\r\n      return null;\r\n    return MeshPhysicalMaterial;\r\n  }\r\n  extendMaterialParams(materialIndex, materialParams) {\r\n    const parser = this.parser;\r\n    const materialDef = parser.json.materials[materialIndex];\r\n    if (!materialDef.extensions || !materialDef.extensions[this.name]) {\r\n      return Promise.resolve();\r\n    }\r\n    const extension = materialDef.extensions[this.name];\r\n    materialParams.ior = extension.ior !== void 0 ? extension.ior : 1.5;\r\n    return Promise.resolve();\r\n  }\r\n}\r\nclass GLTFMaterialsSpecularExtension {\r\n  constructor(parser) {\r\n    this.parser = parser;\r\n    this.name = EXTENSIONS.KHR_MATERIALS_SPECULAR;\r\n  }\r\n  getMaterialType(materialIndex) {\r\n    const parser = this.parser;\r\n    const materialDef = parser.json.materials[materialIndex];\r\n    if (!materialDef.extensions || !materialDef.extensions[this.name])\r\n      return null;\r\n    return MeshPhysicalMaterial;\r\n  }\r\n  extendMaterialParams(materialIndex, materialParams) {\r\n    const parser = this.parser;\r\n    const materialDef = parser.json.materials[materialIndex];\r\n    if (!materialDef.extensions || !materialDef.extensions[this.name]) {\r\n      return Promise.resolve();\r\n    }\r\n    const pending = [];\r\n    const extension = materialDef.extensions[this.name];\r\n    materialParams.specularIntensity = extension.specularFactor !== void 0 ? extension.specularFactor : 1;\r\n    if (extension.specularTexture !== void 0) {\r\n      pending.push(parser.assignTexture(materialParams, \"specularIntensityMap\", extension.specularTexture));\r\n    }\r\n    const colorArray = extension.specularColorFactor || [1, 1, 1];\r\n    materialParams.specularColor = new Color(colorArray[0], colorArray[1], colorArray[2]);\r\n    if (extension.specularColorTexture !== void 0) {\r\n      pending.push(\r\n        parser.assignTexture(materialParams, \"specularColorMap\", extension.specularColorTexture, 3001)\r\n        // sRGBEncoding\r\n      );\r\n    }\r\n    return Promise.all(pending);\r\n  }\r\n}\r\nclass GLTFMaterialsAnisotropyExtension {\r\n  constructor(parser) {\r\n    this.parser = parser;\r\n    this.name = EXTENSIONS.KHR_MATERIALS_ANISOTROPY;\r\n  }\r\n  getMaterialType(materialIndex) {\r\n    const parser = this.parser;\r\n    const materialDef = parser.json.materials[materialIndex];\r\n    if (!materialDef.extensions || !materialDef.extensions[this.name])\r\n      return null;\r\n    return MeshPhysicalMaterial;\r\n  }\r\n  extendMaterialParams(materialIndex, materialParams) {\r\n    const parser = this.parser;\r\n    const materialDef = parser.json.materials[materialIndex];\r\n    if (!materialDef.extensions || !materialDef.extensions[this.name]) {\r\n      return Promise.resolve();\r\n    }\r\n    const pending = [];\r\n    const extension = materialDef.extensions[this.name];\r\n    if (extension.anisotropyStrength !== void 0) {\r\n      materialParams.anisotropy = extension.anisotropyStrength;\r\n    }\r\n    if (extension.anisotropyRotation !== void 0) {\r\n      materialParams.anisotropyRotation = extension.anisotropyRotation;\r\n    }\r\n    if (extension.anisotropyTexture !== void 0) {\r\n      pending.push(parser.assignTexture(materialParams, \"anisotropyMap\", extension.anisotropyTexture));\r\n    }\r\n    return Promise.all(pending);\r\n  }\r\n}\r\nclass GLTFTextureBasisUExtension {\r\n  constructor(parser) {\r\n    this.parser = parser;\r\n    this.name = EXTENSIONS.KHR_TEXTURE_BASISU;\r\n  }\r\n  loadTexture(textureIndex) {\r\n    const parser = this.parser;\r\n    const json = parser.json;\r\n    const textureDef = json.textures[textureIndex];\r\n    if (!textureDef.extensions || !textureDef.extensions[this.name]) {\r\n      return null;\r\n    }\r\n    const extension = textureDef.extensions[this.name];\r\n    const loader = parser.options.ktx2Loader;\r\n    if (!loader) {\r\n      if (json.extensionsRequired && json.extensionsRequired.indexOf(this.name) >= 0) {\r\n        throw new Error(\"THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures\");\r\n      } else {\r\n        return null;\r\n      }\r\n    }\r\n    return parser.loadTextureImage(textureIndex, extension.source, loader);\r\n  }\r\n}\r\nclass GLTFTextureWebPExtension {\r\n  constructor(parser) {\r\n    this.parser = parser;\r\n    this.name = EXTENSIONS.EXT_TEXTURE_WEBP;\r\n    this.isSupported = null;\r\n  }\r\n  loadTexture(textureIndex) {\r\n    const name = this.name;\r\n    const parser = this.parser;\r\n    const json = parser.json;\r\n    const textureDef = json.textures[textureIndex];\r\n    if (!textureDef.extensions || !textureDef.extensions[name]) {\r\n      return null;\r\n    }\r\n    const extension = textureDef.extensions[name];\r\n    const source = json.images[extension.source];\r\n    let loader = parser.textureLoader;\r\n    if (source.uri) {\r\n      const handler = parser.options.manager.getHandler(source.uri);\r\n      if (handler !== null)\r\n        loader = handler;\r\n    }\r\n    return this.detectSupport().then(function(isSupported) {\r\n      if (isSupported)\r\n        return parser.loadTextureImage(textureIndex, extension.source, loader);\r\n      if (json.extensionsRequired && json.extensionsRequired.indexOf(name) >= 0) {\r\n        throw new Error(\"THREE.GLTFLoader: WebP required by asset but unsupported.\");\r\n      }\r\n      return parser.loadTexture(textureIndex);\r\n    });\r\n  }\r\n  detectSupport() {\r\n    if (!this.isSupported) {\r\n      this.isSupported = new Promise(function(resolve) {\r\n        const image = new Image();\r\n        image.src = \"data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA\";\r\n        image.onload = image.onerror = function() {\r\n          resolve(image.height === 1);\r\n        };\r\n      });\r\n    }\r\n    return this.isSupported;\r\n  }\r\n}\r\nclass GLTFTextureAVIFExtension {\r\n  constructor(parser) {\r\n    this.parser = parser;\r\n    this.name = EXTENSIONS.EXT_TEXTURE_AVIF;\r\n    this.isSupported = null;\r\n  }\r\n  loadTexture(textureIndex) {\r\n    const name = this.name;\r\n    const parser = this.parser;\r\n    const json = parser.json;\r\n    const textureDef = json.textures[textureIndex];\r\n    if (!textureDef.extensions || !textureDef.extensions[name]) {\r\n      return null;\r\n    }\r\n    const extension = textureDef.extensions[name];\r\n    const source = json.images[extension.source];\r\n    let loader = parser.textureLoader;\r\n    if (source.uri) {\r\n      const handler = parser.options.manager.getHandler(source.uri);\r\n      if (handler !== null)\r\n        loader = handler;\r\n    }\r\n    return this.detectSupport().then(function(isSupported) {\r\n      if (isSupported)\r\n        return parser.loadTextureImage(textureIndex, extension.source, loader);\r\n      if (json.extensionsRequired && json.extensionsRequired.indexOf(name) >= 0) {\r\n        throw new Error(\"THREE.GLTFLoader: AVIF required by asset but unsupported.\");\r\n      }\r\n      return parser.loadTexture(textureIndex);\r\n    });\r\n  }\r\n  detectSupport() {\r\n    if (!this.isSupported) {\r\n      this.isSupported = new Promise(function(resolve) {\r\n        const image = new Image();\r\n        image.src = \"data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=\";\r\n        image.onload = image.onerror = function() {\r\n          resolve(image.height === 1);\r\n        };\r\n      });\r\n    }\r\n    return this.isSupported;\r\n  }\r\n}\r\nclass GLTFMeshoptCompression {\r\n  constructor(parser) {\r\n    this.name = EXTENSIONS.EXT_MESHOPT_COMPRESSION;\r\n    this.parser = parser;\r\n  }\r\n  loadBufferView(index) {\r\n    const json = this.parser.json;\r\n    const bufferView = json.bufferViews[index];\r\n    if (bufferView.extensions && bufferView.extensions[this.name]) {\r\n      const extensionDef = bufferView.extensions[this.name];\r\n      const buffer = this.parser.getDependency(\"buffer\", extensionDef.buffer);\r\n      const decoder = this.parser.options.meshoptDecoder;\r\n      if (!decoder || !decoder.supported) {\r\n        if (json.extensionsRequired && json.extensionsRequired.indexOf(this.name) >= 0) {\r\n          throw new Error(\"THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files\");\r\n        } else {\r\n          return null;\r\n        }\r\n      }\r\n      return buffer.then(function(res) {\r\n        const byteOffset = extensionDef.byteOffset || 0;\r\n        const byteLength = extensionDef.byteLength || 0;\r\n        const count = extensionDef.count;\r\n        const stride = extensionDef.byteStride;\r\n        const source = new Uint8Array(res, byteOffset, byteLength);\r\n        if (decoder.decodeGltfBufferAsync) {\r\n          return decoder.decodeGltfBufferAsync(count, stride, source, extensionDef.mode, extensionDef.filter).then(function(res2) {\r\n            return res2.buffer;\r\n          });\r\n        } else {\r\n          return decoder.ready.then(function() {\r\n            const result = new ArrayBuffer(count * stride);\r\n            decoder.decodeGltfBuffer(\r\n              new Uint8Array(result),\r\n              count,\r\n              stride,\r\n              source,\r\n              extensionDef.mode,\r\n              extensionDef.filter\r\n            );\r\n            return result;\r\n          });\r\n        }\r\n      });\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n}\r\nclass GLTFMeshGpuInstancing {\r\n  constructor(parser) {\r\n    this.name = EXTENSIONS.EXT_MESH_GPU_INSTANCING;\r\n    this.parser = parser;\r\n  }\r\n  createNodeMesh(nodeIndex) {\r\n    const json = this.parser.json;\r\n    const nodeDef = json.nodes[nodeIndex];\r\n    if (!nodeDef.extensions || !nodeDef.extensions[this.name] || nodeDef.mesh === void 0) {\r\n      return null;\r\n    }\r\n    const meshDef = json.meshes[nodeDef.mesh];\r\n    for (const primitive of meshDef.primitives) {\r\n      if (primitive.mode !== WEBGL_CONSTANTS.TRIANGLES && primitive.mode !== WEBGL_CONSTANTS.TRIANGLE_STRIP && primitive.mode !== WEBGL_CONSTANTS.TRIANGLE_FAN && primitive.mode !== void 0) {\r\n        return null;\r\n      }\r\n    }\r\n    const extensionDef = nodeDef.extensions[this.name];\r\n    const attributesDef = extensionDef.attributes;\r\n    const pending = [];\r\n    const attributes = {};\r\n    for (const key in attributesDef) {\r\n      pending.push(\r\n        this.parser.getDependency(\"accessor\", attributesDef[key]).then((accessor) => {\r\n          attributes[key] = accessor;\r\n          return attributes[key];\r\n        })\r\n      );\r\n    }\r\n    if (pending.length < 1) {\r\n      return null;\r\n    }\r\n    pending.push(this.parser.createNodeMesh(nodeIndex));\r\n    return Promise.all(pending).then((results) => {\r\n      const nodeObject = results.pop();\r\n      const meshes = nodeObject.isGroup ? nodeObject.children : [nodeObject];\r\n      const count = results[0].count;\r\n      const instancedMeshes = [];\r\n      for (const mesh of meshes) {\r\n        const m = new Matrix4();\r\n        const p = new Vector3();\r\n        const q = new Quaternion();\r\n        const s = new Vector3(1, 1, 1);\r\n        const instancedMesh = new InstancedMesh(mesh.geometry, mesh.material, count);\r\n        for (let i = 0; i < count; i++) {\r\n          if (attributes.TRANSLATION) {\r\n            p.fromBufferAttribute(attributes.TRANSLATION, i);\r\n          }\r\n          if (attributes.ROTATION) {\r\n            q.fromBufferAttribute(attributes.ROTATION, i);\r\n          }\r\n          if (attributes.SCALE) {\r\n            s.fromBufferAttribute(attributes.SCALE, i);\r\n          }\r\n          instancedMesh.setMatrixAt(i, m.compose(p, q, s));\r\n        }\r\n        for (const attributeName in attributes) {\r\n          if (attributeName !== \"TRANSLATION\" && attributeName !== \"ROTATION\" && attributeName !== \"SCALE\") {\r\n            mesh.geometry.setAttribute(attributeName, attributes[attributeName]);\r\n          }\r\n        }\r\n        Object3D.prototype.copy.call(instancedMesh, mesh);\r\n        this.parser.assignFinalMaterial(instancedMesh);\r\n        instancedMeshes.push(instancedMesh);\r\n      }\r\n      if (nodeObject.isGroup) {\r\n        nodeObject.clear();\r\n        nodeObject.add(...instancedMeshes);\r\n        return nodeObject;\r\n      }\r\n      return instancedMeshes[0];\r\n    });\r\n  }\r\n}\r\nconst BINARY_EXTENSION_HEADER_MAGIC = \"glTF\";\r\nconst BINARY_EXTENSION_HEADER_LENGTH = 12;\r\nconst BINARY_EXTENSION_CHUNK_TYPES = { JSON: 1313821514, BIN: 5130562 };\r\nclass GLTFBinaryExtension {\r\n  constructor(data) {\r\n    this.name = EXTENSIONS.KHR_BINARY_GLTF;\r\n    this.content = null;\r\n    this.body = null;\r\n    const headerView = new DataView(data, 0, BINARY_EXTENSION_HEADER_LENGTH);\r\n    this.header = {\r\n      magic: LoaderUtils.decodeText(new Uint8Array(data.slice(0, 4))),\r\n      version: headerView.getUint32(4, true),\r\n      length: headerView.getUint32(8, true)\r\n    };\r\n    if (this.header.magic !== BINARY_EXTENSION_HEADER_MAGIC) {\r\n      throw new Error(\"THREE.GLTFLoader: Unsupported glTF-Binary header.\");\r\n    } else if (this.header.version < 2) {\r\n      throw new Error(\"THREE.GLTFLoader: Legacy binary file detected.\");\r\n    }\r\n    const chunkContentsLength = this.header.length - BINARY_EXTENSION_HEADER_LENGTH;\r\n    const chunkView = new DataView(data, BINARY_EXTENSION_HEADER_LENGTH);\r\n    let chunkIndex = 0;\r\n    while (chunkIndex < chunkContentsLength) {\r\n      const chunkLength = chunkView.getUint32(chunkIndex, true);\r\n      chunkIndex += 4;\r\n      const chunkType = chunkView.getUint32(chunkIndex, true);\r\n      chunkIndex += 4;\r\n      if (chunkType === BINARY_EXTENSION_CHUNK_TYPES.JSON) {\r\n        const contentArray = new Uint8Array(data, BINARY_EXTENSION_HEADER_LENGTH + chunkIndex, chunkLength);\r\n        this.content = LoaderUtils.decodeText(contentArray);\r\n      } else if (chunkType === BINARY_EXTENSION_CHUNK_TYPES.BIN) {\r\n        const byteOffset = BINARY_EXTENSION_HEADER_LENGTH + chunkIndex;\r\n        this.body = data.slice(byteOffset, byteOffset + chunkLength);\r\n      }\r\n      chunkIndex += chunkLength;\r\n    }\r\n    if (this.content === null) {\r\n      throw new Error(\"THREE.GLTFLoader: JSON content not found.\");\r\n    }\r\n  }\r\n}\r\nclass GLTFDracoMeshCompressionExtension {\r\n  constructor(json, dracoLoader) {\r\n    if (!dracoLoader) {\r\n      throw new Error(\"THREE.GLTFLoader: No DRACOLoader instance provided.\");\r\n    }\r\n    this.name = EXTENSIONS.KHR_DRACO_MESH_COMPRESSION;\r\n    this.json = json;\r\n    this.dracoLoader = dracoLoader;\r\n    this.dracoLoader.preload();\r\n  }\r\n  decodePrimitive(primitive, parser) {\r\n    const json = this.json;\r\n    const dracoLoader = this.dracoLoader;\r\n    const bufferViewIndex = primitive.extensions[this.name].bufferView;\r\n    const gltfAttributeMap = primitive.extensions[this.name].attributes;\r\n    const threeAttributeMap = {};\r\n    const attributeNormalizedMap = {};\r\n    const attributeTypeMap = {};\r\n    for (const attributeName in gltfAttributeMap) {\r\n      const threeAttributeName = ATTRIBUTES[attributeName] || attributeName.toLowerCase();\r\n      threeAttributeMap[threeAttributeName] = gltfAttributeMap[attributeName];\r\n    }\r\n    for (const attributeName in primitive.attributes) {\r\n      const threeAttributeName = ATTRIBUTES[attributeName] || attributeName.toLowerCase();\r\n      if (gltfAttributeMap[attributeName] !== void 0) {\r\n        const accessorDef = json.accessors[primitive.attributes[attributeName]];\r\n        const componentType = WEBGL_COMPONENT_TYPES[accessorDef.componentType];\r\n        attributeTypeMap[threeAttributeName] = componentType.name;\r\n        attributeNormalizedMap[threeAttributeName] = accessorDef.normalized === true;\r\n      }\r\n    }\r\n    return parser.getDependency(\"bufferView\", bufferViewIndex).then(function(bufferView) {\r\n      return new Promise(function(resolve) {\r\n        dracoLoader.decodeDracoFile(\r\n          bufferView,\r\n          function(geometry) {\r\n            for (const attributeName in geometry.attributes) {\r\n              const attribute = geometry.attributes[attributeName];\r\n              const normalized = attributeNormalizedMap[attributeName];\r\n              if (normalized !== void 0)\r\n                attribute.normalized = normalized;\r\n            }\r\n            resolve(geometry);\r\n          },\r\n          threeAttributeMap,\r\n          attributeTypeMap\r\n        );\r\n      });\r\n    });\r\n  }\r\n}\r\nclass GLTFTextureTransformExtension {\r\n  constructor() {\r\n    this.name = EXTENSIONS.KHR_TEXTURE_TRANSFORM;\r\n  }\r\n  extendTexture(texture, transform) {\r\n    if ((transform.texCoord === void 0 || transform.texCoord === texture.channel) && transform.offset === void 0 && transform.rotation === void 0 && transform.scale === void 0) {\r\n      return texture;\r\n    }\r\n    texture = texture.clone();\r\n    if (transform.texCoord !== void 0) {\r\n      texture.channel = transform.texCoord;\r\n    }\r\n    if (transform.offset !== void 0) {\r\n      texture.offset.fromArray(transform.offset);\r\n    }\r\n    if (transform.rotation !== void 0) {\r\n      texture.rotation = transform.rotation;\r\n    }\r\n    if (transform.scale !== void 0) {\r\n      texture.repeat.fromArray(transform.scale);\r\n    }\r\n    texture.needsUpdate = true;\r\n    return texture;\r\n  }\r\n}\r\nclass GLTFMeshQuantizationExtension {\r\n  constructor() {\r\n    this.name = EXTENSIONS.KHR_MESH_QUANTIZATION;\r\n  }\r\n}\r\nclass GLTFCubicSplineInterpolant extends Interpolant {\r\n  constructor(parameterPositions, sampleValues, sampleSize, resultBuffer) {\r\n    super(parameterPositions, sampleValues, sampleSize, resultBuffer);\r\n  }\r\n  copySampleValue_(index) {\r\n    const result = this.resultBuffer, values = this.sampleValues, valueSize = this.valueSize, offset = index * valueSize * 3 + valueSize;\r\n    for (let i = 0; i !== valueSize; i++) {\r\n      result[i] = values[offset + i];\r\n    }\r\n    return result;\r\n  }\r\n  interpolate_(i1, t0, t, t1) {\r\n    const result = this.resultBuffer;\r\n    const values = this.sampleValues;\r\n    const stride = this.valueSize;\r\n    const stride2 = stride * 2;\r\n    const stride3 = stride * 3;\r\n    const td = t1 - t0;\r\n    const p = (t - t0) / td;\r\n    const pp = p * p;\r\n    const ppp = pp * p;\r\n    const offset1 = i1 * stride3;\r\n    const offset0 = offset1 - stride3;\r\n    const s2 = -2 * ppp + 3 * pp;\r\n    const s3 = ppp - pp;\r\n    const s0 = 1 - s2;\r\n    const s1 = s3 - pp + p;\r\n    for (let i = 0; i !== stride; i++) {\r\n      const p0 = values[offset0 + i + stride];\r\n      const m0 = values[offset0 + i + stride2] * td;\r\n      const p1 = values[offset1 + i + stride];\r\n      const m1 = values[offset1 + i] * td;\r\n      result[i] = s0 * p0 + s1 * m0 + s2 * p1 + s3 * m1;\r\n    }\r\n    return result;\r\n  }\r\n}\r\nconst _q = /* @__PURE__ */ new Quaternion();\r\nclass GLTFCubicSplineQuaternionInterpolant extends GLTFCubicSplineInterpolant {\r\n  interpolate_(i1, t0, t, t1) {\r\n    const result = super.interpolate_(i1, t0, t, t1);\r\n    _q.fromArray(result).normalize().toArray(result);\r\n    return result;\r\n  }\r\n}\r\nconst WEBGL_CONSTANTS = {\r\n  FLOAT: 5126,\r\n  //FLOAT_MAT2: 35674,\r\n  FLOAT_MAT3: 35675,\r\n  FLOAT_MAT4: 35676,\r\n  FLOAT_VEC2: 35664,\r\n  FLOAT_VEC3: 35665,\r\n  FLOAT_VEC4: 35666,\r\n  LINEAR: 9729,\r\n  REPEAT: 10497,\r\n  SAMPLER_2D: 35678,\r\n  POINTS: 0,\r\n  LINES: 1,\r\n  LINE_LOOP: 2,\r\n  LINE_STRIP: 3,\r\n  TRIANGLES: 4,\r\n  TRIANGLE_STRIP: 5,\r\n  TRIANGLE_FAN: 6,\r\n  UNSIGNED_BYTE: 5121,\r\n  UNSIGNED_SHORT: 5123\r\n};\r\nconst WEBGL_COMPONENT_TYPES = {\r\n  5120: Int8Array,\r\n  5121: Uint8Array,\r\n  5122: Int16Array,\r\n  5123: Uint16Array,\r\n  5125: Uint32Array,\r\n  5126: Float32Array\r\n};\r\nconst WEBGL_FILTERS = {\r\n  9728: NearestFilter,\r\n  9729: LinearFilter,\r\n  9984: NearestMipmapNearestFilter,\r\n  9985: LinearMipmapNearestFilter,\r\n  9986: NearestMipmapLinearFilter,\r\n  9987: LinearMipmapLinearFilter\r\n};\r\nconst WEBGL_WRAPPINGS = {\r\n  33071: ClampToEdgeWrapping,\r\n  33648: MirroredRepeatWrapping,\r\n  10497: RepeatWrapping\r\n};\r\nconst WEBGL_TYPE_SIZES = {\r\n  SCALAR: 1,\r\n  VEC2: 2,\r\n  VEC3: 3,\r\n  VEC4: 4,\r\n  MAT2: 4,\r\n  MAT3: 9,\r\n  MAT4: 16\r\n};\r\nconst ATTRIBUTES = {\r\n  POSITION: \"position\",\r\n  NORMAL: \"normal\",\r\n  TANGENT: \"tangent\",\r\n  // uv => uv1, 4 uv channels\r\n  // https://github.com/mrdoob/three.js/pull/25943\r\n  // https://github.com/mrdoob/three.js/pull/25788\r\n  ...REVISION.replace(/\\D+/g, \"\") >= 152 ? {\r\n    TEXCOORD_0: \"uv\",\r\n    TEXCOORD_1: \"uv1\",\r\n    TEXCOORD_2: \"uv2\",\r\n    TEXCOORD_3: \"uv3\"\r\n  } : {\r\n    TEXCOORD_0: \"uv\",\r\n    TEXCOORD_1: \"uv2\"\r\n  },\r\n  COLOR_0: \"color\",\r\n  WEIGHTS_0: \"skinWeight\",\r\n  JOINTS_0: \"skinIndex\"\r\n};\r\nconst PATH_PROPERTIES = {\r\n  scale: \"scale\",\r\n  translation: \"position\",\r\n  rotation: \"quaternion\",\r\n  weights: \"morphTargetInfluences\"\r\n};\r\nconst INTERPOLATION = {\r\n  CUBICSPLINE: void 0,\r\n  // We use a custom interpolant (GLTFCubicSplineInterpolation) for CUBICSPLINE tracks. Each\r\n  // keyframe track will be initialized with a default interpolation type, then modified.\r\n  LINEAR: InterpolateLinear,\r\n  STEP: InterpolateDiscrete\r\n};\r\nconst ALPHA_MODES = {\r\n  OPAQUE: \"OPAQUE\",\r\n  MASK: \"MASK\",\r\n  BLEND: \"BLEND\"\r\n};\r\nfunction createDefaultMaterial(cache) {\r\n  if (cache[\"DefaultMaterial\"] === void 0) {\r\n    cache[\"DefaultMaterial\"] = new MeshStandardMaterial({\r\n      color: 16777215,\r\n      emissive: 0,\r\n      metalness: 1,\r\n      roughness: 1,\r\n      transparent: false,\r\n      depthTest: true,\r\n      side: FrontSide\r\n    });\r\n  }\r\n  return cache[\"DefaultMaterial\"];\r\n}\r\nfunction addUnknownExtensionsToUserData(knownExtensions, object, objectDef) {\r\n  for (const name in objectDef.extensions) {\r\n    if (knownExtensions[name] === void 0) {\r\n      object.userData.gltfExtensions = object.userData.gltfExtensions || {};\r\n      object.userData.gltfExtensions[name] = objectDef.extensions[name];\r\n    }\r\n  }\r\n}\r\nfunction assignExtrasToUserData(object, gltfDef) {\r\n  if (gltfDef.extras !== void 0) {\r\n    if (typeof gltfDef.extras === \"object\") {\r\n      Object.assign(object.userData, gltfDef.extras);\r\n    } else {\r\n      console.warn(\"THREE.GLTFLoader: Ignoring primitive type .extras, \" + gltfDef.extras);\r\n    }\r\n  }\r\n}\r\nfunction addMorphTargets(geometry, targets, parser) {\r\n  let hasMorphPosition = false;\r\n  let hasMorphNormal = false;\r\n  let hasMorphColor = false;\r\n  for (let i = 0, il = targets.length; i < il; i++) {\r\n    const target = targets[i];\r\n    if (target.POSITION !== void 0)\r\n      hasMorphPosition = true;\r\n    if (target.NORMAL !== void 0)\r\n      hasMorphNormal = true;\r\n    if (target.COLOR_0 !== void 0)\r\n      hasMorphColor = true;\r\n    if (hasMorphPosition && hasMorphNormal && hasMorphColor)\r\n      break;\r\n  }\r\n  if (!hasMorphPosition && !hasMorphNormal && !hasMorphColor)\r\n    return Promise.resolve(geometry);\r\n  const pendingPositionAccessors = [];\r\n  const pendingNormalAccessors = [];\r\n  const pendingColorAccessors = [];\r\n  for (let i = 0, il = targets.length; i < il; i++) {\r\n    const target = targets[i];\r\n    if (hasMorphPosition) {\r\n      const pendingAccessor = target.POSITION !== void 0 ? parser.getDependency(\"accessor\", target.POSITION) : geometry.attributes.position;\r\n      pendingPositionAccessors.push(pendingAccessor);\r\n    }\r\n    if (hasMorphNormal) {\r\n      const pendingAccessor = target.NORMAL !== void 0 ? parser.getDependency(\"accessor\", target.NORMAL) : geometry.attributes.normal;\r\n      pendingNormalAccessors.push(pendingAccessor);\r\n    }\r\n    if (hasMorphColor) {\r\n      const pendingAccessor = target.COLOR_0 !== void 0 ? parser.getDependency(\"accessor\", target.COLOR_0) : geometry.attributes.color;\r\n      pendingColorAccessors.push(pendingAccessor);\r\n    }\r\n  }\r\n  return Promise.all([\r\n    Promise.all(pendingPositionAccessors),\r\n    Promise.all(pendingNormalAccessors),\r\n    Promise.all(pendingColorAccessors)\r\n  ]).then(function(accessors) {\r\n    const morphPositions = accessors[0];\r\n    const morphNormals = accessors[1];\r\n    const morphColors = accessors[2];\r\n    if (hasMorphPosition)\r\n      geometry.morphAttributes.position = morphPositions;\r\n    if (hasMorphNormal)\r\n      geometry.morphAttributes.normal = morphNormals;\r\n    if (hasMorphColor)\r\n      geometry.morphAttributes.color = morphColors;\r\n    geometry.morphTargetsRelative = true;\r\n    return geometry;\r\n  });\r\n}\r\nfunction updateMorphTargets(mesh, meshDef) {\r\n  mesh.updateMorphTargets();\r\n  if (meshDef.weights !== void 0) {\r\n    for (let i = 0, il = meshDef.weights.length; i < il; i++) {\r\n      mesh.morphTargetInfluences[i] = meshDef.weights[i];\r\n    }\r\n  }\r\n  if (meshDef.extras && Array.isArray(meshDef.extras.targetNames)) {\r\n    const targetNames = meshDef.extras.targetNames;\r\n    if (mesh.morphTargetInfluences.length === targetNames.length) {\r\n      mesh.morphTargetDictionary = {};\r\n      for (let i = 0, il = targetNames.length; i < il; i++) {\r\n        mesh.morphTargetDictionary[targetNames[i]] = i;\r\n      }\r\n    } else {\r\n      console.warn(\"THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.\");\r\n    }\r\n  }\r\n}\r\nfunction createPrimitiveKey(primitiveDef) {\r\n  let geometryKey;\r\n  const dracoExtension = primitiveDef.extensions && primitiveDef.extensions[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION];\r\n  if (dracoExtension) {\r\n    geometryKey = \"draco:\" + dracoExtension.bufferView + \":\" + dracoExtension.indices + \":\" + createAttributesKey(dracoExtension.attributes);\r\n  } else {\r\n    geometryKey = primitiveDef.indices + \":\" + createAttributesKey(primitiveDef.attributes) + \":\" + primitiveDef.mode;\r\n  }\r\n  if (primitiveDef.targets !== void 0) {\r\n    for (let i = 0, il = primitiveDef.targets.length; i < il; i++) {\r\n      geometryKey += \":\" + createAttributesKey(primitiveDef.targets[i]);\r\n    }\r\n  }\r\n  return geometryKey;\r\n}\r\nfunction createAttributesKey(attributes) {\r\n  let attributesKey = \"\";\r\n  const keys = Object.keys(attributes).sort();\r\n  for (let i = 0, il = keys.length; i < il; i++) {\r\n    attributesKey += keys[i] + \":\" + attributes[keys[i]] + \";\";\r\n  }\r\n  return attributesKey;\r\n}\r\nfunction getNormalizedComponentScale(constructor) {\r\n  switch (constructor) {\r\n    case Int8Array:\r\n      return 1 / 127;\r\n    case Uint8Array:\r\n      return 1 / 255;\r\n    case Int16Array:\r\n      return 1 / 32767;\r\n    case Uint16Array:\r\n      return 1 / 65535;\r\n    default:\r\n      throw new Error(\"THREE.GLTFLoader: Unsupported normalized accessor component type.\");\r\n  }\r\n}\r\nfunction getImageURIMimeType(uri) {\r\n  if (uri.search(/\\.jpe?g($|\\?)/i) > 0 || uri.search(/^data\\:image\\/jpeg/) === 0)\r\n    return \"image/jpeg\";\r\n  if (uri.search(/\\.webp($|\\?)/i) > 0 || uri.search(/^data\\:image\\/webp/) === 0)\r\n    return \"image/webp\";\r\n  return \"image/png\";\r\n}\r\nconst _identityMatrix = /* @__PURE__ */ new Matrix4();\r\nclass GLTFParser {\r\n  constructor(json = {}, options = {}) {\r\n    this.json = json;\r\n    this.extensions = {};\r\n    this.plugins = {};\r\n    this.options = options;\r\n    this.cache = new GLTFRegistry();\r\n    this.associations = /* @__PURE__ */ new Map();\r\n    this.primitiveCache = {};\r\n    this.nodeCache = {};\r\n    this.meshCache = { refs: {}, uses: {} };\r\n    this.cameraCache = { refs: {}, uses: {} };\r\n    this.lightCache = { refs: {}, uses: {} };\r\n    this.sourceCache = {};\r\n    this.textureCache = {};\r\n    this.nodeNamesUsed = {};\r\n    let isSafari = false;\r\n    let isFirefox = false;\r\n    let firefoxVersion = -1;\r\n    if (typeof navigator !== \"undefined\") {\r\n      isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent) === true;\r\n      isFirefox = navigator.userAgent.indexOf(\"Firefox\") > -1;\r\n      firefoxVersion = isFirefox ? navigator.userAgent.match(/Firefox\\/([0-9]+)\\./)[1] : -1;\r\n    }\r\n    if (typeof createImageBitmap === \"undefined\" || isSafari || isFirefox && firefoxVersion < 98) {\r\n      this.textureLoader = new TextureLoader(this.options.manager);\r\n    } else {\r\n      this.textureLoader = new ImageBitmapLoader(this.options.manager);\r\n    }\r\n    this.textureLoader.setCrossOrigin(this.options.crossOrigin);\r\n    this.textureLoader.setRequestHeader(this.options.requestHeader);\r\n    this.fileLoader = new FileLoader(this.options.manager);\r\n    this.fileLoader.setResponseType(\"arraybuffer\");\r\n    if (this.options.crossOrigin === \"use-credentials\") {\r\n      this.fileLoader.setWithCredentials(true);\r\n    }\r\n  }\r\n  setExtensions(extensions) {\r\n    this.extensions = extensions;\r\n  }\r\n  setPlugins(plugins) {\r\n    this.plugins = plugins;\r\n  }\r\n  parse(onLoad, onError) {\r\n    const parser = this;\r\n    const json = this.json;\r\n    const extensions = this.extensions;\r\n    this.cache.removeAll();\r\n    this.nodeCache = {};\r\n    this._invokeAll(function(ext) {\r\n      return ext._markDefs && ext._markDefs();\r\n    });\r\n    Promise.all(\r\n      this._invokeAll(function(ext) {\r\n        return ext.beforeRoot && ext.beforeRoot();\r\n      })\r\n    ).then(function() {\r\n      return Promise.all([\r\n        parser.getDependencies(\"scene\"),\r\n        parser.getDependencies(\"animation\"),\r\n        parser.getDependencies(\"camera\")\r\n      ]);\r\n    }).then(function(dependencies) {\r\n      const result = {\r\n        scene: dependencies[0][json.scene || 0],\r\n        scenes: dependencies[0],\r\n        animations: dependencies[1],\r\n        cameras: dependencies[2],\r\n        asset: json.asset,\r\n        parser,\r\n        userData: {}\r\n      };\r\n      addUnknownExtensionsToUserData(extensions, result, json);\r\n      assignExtrasToUserData(result, json);\r\n      Promise.all(\r\n        parser._invokeAll(function(ext) {\r\n          return ext.afterRoot && ext.afterRoot(result);\r\n        })\r\n      ).then(function() {\r\n        onLoad(result);\r\n      });\r\n    }).catch(onError);\r\n  }\r\n  /**\r\n   * Marks the special nodes/meshes in json for efficient parse.\r\n   */\r\n  _markDefs() {\r\n    const nodeDefs = this.json.nodes || [];\r\n    const skinDefs = this.json.skins || [];\r\n    const meshDefs = this.json.meshes || [];\r\n    for (let skinIndex = 0, skinLength = skinDefs.length; skinIndex < skinLength; skinIndex++) {\r\n      const joints = skinDefs[skinIndex].joints;\r\n      for (let i = 0, il = joints.length; i < il; i++) {\r\n        nodeDefs[joints[i]].isBone = true;\r\n      }\r\n    }\r\n    for (let nodeIndex = 0, nodeLength = nodeDefs.length; nodeIndex < nodeLength; nodeIndex++) {\r\n      const nodeDef = nodeDefs[nodeIndex];\r\n      if (nodeDef.mesh !== void 0) {\r\n        this._addNodeRef(this.meshCache, nodeDef.mesh);\r\n        if (nodeDef.skin !== void 0) {\r\n          meshDefs[nodeDef.mesh].isSkinnedMesh = true;\r\n        }\r\n      }\r\n      if (nodeDef.camera !== void 0) {\r\n        this._addNodeRef(this.cameraCache, nodeDef.camera);\r\n      }\r\n    }\r\n  }\r\n  /**\r\n   * Counts references to shared node / Object3D resources. These resources\r\n   * can be reused, or \"instantiated\", at multiple nodes in the scene\r\n   * hierarchy. Mesh, Camera, and Light instances are instantiated and must\r\n   * be marked. Non-scenegraph resources (like Materials, Geometries, and\r\n   * Textures) can be reused directly and are not marked here.\r\n   *\r\n   * Example: CesiumMilkTruck sample model reuses \"Wheel\" meshes.\r\n   */\r\n  _addNodeRef(cache, index) {\r\n    if (index === void 0)\r\n      return;\r\n    if (cache.refs[index] === void 0) {\r\n      cache.refs[index] = cache.uses[index] = 0;\r\n    }\r\n    cache.refs[index]++;\r\n  }\r\n  /** Returns a reference to a shared resource, cloning it if necessary. */\r\n  _getNodeRef(cache, index, object) {\r\n    if (cache.refs[index] <= 1)\r\n      return object;\r\n    const ref = object.clone();\r\n    const updateMappings = (original, clone) => {\r\n      const mappings = this.associations.get(original);\r\n      if (mappings != null) {\r\n        this.associations.set(clone, mappings);\r\n      }\r\n      for (const [i, child] of original.children.entries()) {\r\n        updateMappings(child, clone.children[i]);\r\n      }\r\n    };\r\n    updateMappings(object, ref);\r\n    ref.name += \"_instance_\" + cache.uses[index]++;\r\n    return ref;\r\n  }\r\n  _invokeOne(func) {\r\n    const extensions = Object.values(this.plugins);\r\n    extensions.push(this);\r\n    for (let i = 0; i < extensions.length; i++) {\r\n      const result = func(extensions[i]);\r\n      if (result)\r\n        return result;\r\n    }\r\n    return null;\r\n  }\r\n  _invokeAll(func) {\r\n    const extensions = Object.values(this.plugins);\r\n    extensions.unshift(this);\r\n    const pending = [];\r\n    for (let i = 0; i < extensions.length; i++) {\r\n      const result = func(extensions[i]);\r\n      if (result)\r\n        pending.push(result);\r\n    }\r\n    return pending;\r\n  }\r\n  /**\r\n   * Requests the specified dependency asynchronously, with caching.\r\n   * @param {string} type\r\n   * @param {number} index\r\n   * @return {Promise<Object3D|Material|THREE.Texture|AnimationClip|ArrayBuffer|Object>}\r\n   */\r\n  getDependency(type, index) {\r\n    const cacheKey = type + \":\" + index;\r\n    let dependency = this.cache.get(cacheKey);\r\n    if (!dependency) {\r\n      switch (type) {\r\n        case \"scene\":\r\n          dependency = this.loadScene(index);\r\n          break;\r\n        case \"node\":\r\n          dependency = this._invokeOne(function(ext) {\r\n            return ext.loadNode && ext.loadNode(index);\r\n          });\r\n          break;\r\n        case \"mesh\":\r\n          dependency = this._invokeOne(function(ext) {\r\n            return ext.loadMesh && ext.loadMesh(index);\r\n          });\r\n          break;\r\n        case \"accessor\":\r\n          dependency = this.loadAccessor(index);\r\n          break;\r\n        case \"bufferView\":\r\n          dependency = this._invokeOne(function(ext) {\r\n            return ext.loadBufferView && ext.loadBufferView(index);\r\n          });\r\n          break;\r\n        case \"buffer\":\r\n          dependency = this.loadBuffer(index);\r\n          break;\r\n        case \"material\":\r\n          dependency = this._invokeOne(function(ext) {\r\n            return ext.loadMaterial && ext.loadMaterial(index);\r\n          });\r\n          break;\r\n        case \"texture\":\r\n          dependency = this._invokeOne(function(ext) {\r\n            return ext.loadTexture && ext.loadTexture(index);\r\n          });\r\n          break;\r\n        case \"skin\":\r\n          dependency = this.loadSkin(index);\r\n          break;\r\n        case \"animation\":\r\n          dependency = this._invokeOne(function(ext) {\r\n            return ext.loadAnimation && ext.loadAnimation(index);\r\n          });\r\n          break;\r\n        case \"camera\":\r\n          dependency = this.loadCamera(index);\r\n          break;\r\n        default:\r\n          dependency = this._invokeOne(function(ext) {\r\n            return ext != this && ext.getDependency && ext.getDependency(type, index);\r\n          });\r\n          if (!dependency) {\r\n            throw new Error(\"Unknown type: \" + type);\r\n          }\r\n          break;\r\n      }\r\n      this.cache.add(cacheKey, dependency);\r\n    }\r\n    return dependency;\r\n  }\r\n  /**\r\n   * Requests all dependencies of the specified type asynchronously, with caching.\r\n   * @param {string} type\r\n   * @return {Promise<Array<Object>>}\r\n   */\r\n  getDependencies(type) {\r\n    let dependencies = this.cache.get(type);\r\n    if (!dependencies) {\r\n      const parser = this;\r\n      const defs = this.json[type + (type === \"mesh\" ? \"es\" : \"s\")] || [];\r\n      dependencies = Promise.all(\r\n        defs.map(function(def, index) {\r\n          return parser.getDependency(type, index);\r\n        })\r\n      );\r\n      this.cache.add(type, dependencies);\r\n    }\r\n    return dependencies;\r\n  }\r\n  /**\r\n   * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views\r\n   * @param {number} bufferIndex\r\n   * @return {Promise<ArrayBuffer>}\r\n   */\r\n  loadBuffer(bufferIndex) {\r\n    const bufferDef = this.json.buffers[bufferIndex];\r\n    const loader = this.fileLoader;\r\n    if (bufferDef.type && bufferDef.type !== \"arraybuffer\") {\r\n      throw new Error(\"THREE.GLTFLoader: \" + bufferDef.type + \" buffer type is not supported.\");\r\n    }\r\n    if (bufferDef.uri === void 0 && bufferIndex === 0) {\r\n      return Promise.resolve(this.extensions[EXTENSIONS.KHR_BINARY_GLTF].body);\r\n    }\r\n    const options = this.options;\r\n    return new Promise(function(resolve, reject) {\r\n      loader.load(LoaderUtils.resolveURL(bufferDef.uri, options.path), resolve, void 0, function() {\r\n        reject(new Error('THREE.GLTFLoader: Failed to load buffer \"' + bufferDef.uri + '\".'));\r\n      });\r\n    });\r\n  }\r\n  /**\r\n   * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views\r\n   * @param {number} bufferViewIndex\r\n   * @return {Promise<ArrayBuffer>}\r\n   */\r\n  loadBufferView(bufferViewIndex) {\r\n    const bufferViewDef = this.json.bufferViews[bufferViewIndex];\r\n    return this.getDependency(\"buffer\", bufferViewDef.buffer).then(function(buffer) {\r\n      const byteLength = bufferViewDef.byteLength || 0;\r\n      const byteOffset = bufferViewDef.byteOffset || 0;\r\n      return buffer.slice(byteOffset, byteOffset + byteLength);\r\n    });\r\n  }\r\n  /**\r\n   * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#accessors\r\n   * @param {number} accessorIndex\r\n   * @return {Promise<BufferAttribute|InterleavedBufferAttribute>}\r\n   */\r\n  loadAccessor(accessorIndex) {\r\n    const parser = this;\r\n    const json = this.json;\r\n    const accessorDef = this.json.accessors[accessorIndex];\r\n    if (accessorDef.bufferView === void 0 && accessorDef.sparse === void 0) {\r\n      const itemSize = WEBGL_TYPE_SIZES[accessorDef.type];\r\n      const TypedArray = WEBGL_COMPONENT_TYPES[accessorDef.componentType];\r\n      const normalized = accessorDef.normalized === true;\r\n      const array = new TypedArray(accessorDef.count * itemSize);\r\n      return Promise.resolve(new BufferAttribute(array, itemSize, normalized));\r\n    }\r\n    const pendingBufferViews = [];\r\n    if (accessorDef.bufferView !== void 0) {\r\n      pendingBufferViews.push(this.getDependency(\"bufferView\", accessorDef.bufferView));\r\n    } else {\r\n      pendingBufferViews.push(null);\r\n    }\r\n    if (accessorDef.sparse !== void 0) {\r\n      pendingBufferViews.push(this.getDependency(\"bufferView\", accessorDef.sparse.indices.bufferView));\r\n      pendingBufferViews.push(this.getDependency(\"bufferView\", accessorDef.sparse.values.bufferView));\r\n    }\r\n    return Promise.all(pendingBufferViews).then(function(bufferViews) {\r\n      const bufferView = bufferViews[0];\r\n      const itemSize = WEBGL_TYPE_SIZES[accessorDef.type];\r\n      const TypedArray = WEBGL_COMPONENT_TYPES[accessorDef.componentType];\r\n      const elementBytes = TypedArray.BYTES_PER_ELEMENT;\r\n      const itemBytes = elementBytes * itemSize;\r\n      const byteOffset = accessorDef.byteOffset || 0;\r\n      const byteStride = accessorDef.bufferView !== void 0 ? json.bufferViews[accessorDef.bufferView].byteStride : void 0;\r\n      const normalized = accessorDef.normalized === true;\r\n      let array, bufferAttribute;\r\n      if (byteStride && byteStride !== itemBytes) {\r\n        const ibSlice = Math.floor(byteOffset / byteStride);\r\n        const ibCacheKey = \"InterleavedBuffer:\" + accessorDef.bufferView + \":\" + accessorDef.componentType + \":\" + ibSlice + \":\" + accessorDef.count;\r\n        let ib = parser.cache.get(ibCacheKey);\r\n        if (!ib) {\r\n          array = new TypedArray(bufferView, ibSlice * byteStride, accessorDef.count * byteStride / elementBytes);\r\n          ib = new InterleavedBuffer(array, byteStride / elementBytes);\r\n          parser.cache.add(ibCacheKey, ib);\r\n        }\r\n        bufferAttribute = new InterleavedBufferAttribute(\r\n          ib,\r\n          itemSize,\r\n          byteOffset % byteStride / elementBytes,\r\n          normalized\r\n        );\r\n      } else {\r\n        if (bufferView === null) {\r\n          array = new TypedArray(accessorDef.count * itemSize);\r\n        } else {\r\n          array = new TypedArray(bufferView, byteOffset, accessorDef.count * itemSize);\r\n        }\r\n        bufferAttribute = new BufferAttribute(array, itemSize, normalized);\r\n      }\r\n      if (accessorDef.sparse !== void 0) {\r\n        const itemSizeIndices = WEBGL_TYPE_SIZES.SCALAR;\r\n        const TypedArrayIndices = WEBGL_COMPONENT_TYPES[accessorDef.sparse.indices.componentType];\r\n        const byteOffsetIndices = accessorDef.sparse.indices.byteOffset || 0;\r\n        const byteOffsetValues = accessorDef.sparse.values.byteOffset || 0;\r\n        const sparseIndices = new TypedArrayIndices(\r\n          bufferViews[1],\r\n          byteOffsetIndices,\r\n          accessorDef.sparse.count * itemSizeIndices\r\n        );\r\n        const sparseValues = new TypedArray(bufferViews[2], byteOffsetValues, accessorDef.sparse.count * itemSize);\r\n        if (bufferView !== null) {\r\n          bufferAttribute = new BufferAttribute(\r\n            bufferAttribute.array.slice(),\r\n            bufferAttribute.itemSize,\r\n            bufferAttribute.normalized\r\n          );\r\n        }\r\n        for (let i = 0, il = sparseIndices.length; i < il; i++) {\r\n          const index = sparseIndices[i];\r\n          bufferAttribute.setX(index, sparseValues[i * itemSize]);\r\n          if (itemSize >= 2)\r\n            bufferAttribute.setY(index, sparseValues[i * itemSize + 1]);\r\n          if (itemSize >= 3)\r\n            bufferAttribute.setZ(index, sparseValues[i * itemSize + 2]);\r\n          if (itemSize >= 4)\r\n            bufferAttribute.setW(index, sparseValues[i * itemSize + 3]);\r\n          if (itemSize >= 5)\r\n            throw new Error(\"THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.\");\r\n        }\r\n      }\r\n      return bufferAttribute;\r\n    });\r\n  }\r\n  /**\r\n   * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#textures\r\n   * @param {number} textureIndex\r\n   * @return {Promise<THREE.Texture|null>}\r\n   */\r\n  loadTexture(textureIndex) {\r\n    const json = this.json;\r\n    const options = this.options;\r\n    const textureDef = json.textures[textureIndex];\r\n    const sourceIndex = textureDef.source;\r\n    const sourceDef = json.images[sourceIndex];\r\n    let loader = this.textureLoader;\r\n    if (sourceDef.uri) {\r\n      const handler = options.manager.getHandler(sourceDef.uri);\r\n      if (handler !== null)\r\n        loader = handler;\r\n    }\r\n    return this.loadTextureImage(textureIndex, sourceIndex, loader);\r\n  }\r\n  loadTextureImage(textureIndex, sourceIndex, loader) {\r\n    const parser = this;\r\n    const json = this.json;\r\n    const textureDef = json.textures[textureIndex];\r\n    const sourceDef = json.images[sourceIndex];\r\n    const cacheKey = (sourceDef.uri || sourceDef.bufferView) + \":\" + textureDef.sampler;\r\n    if (this.textureCache[cacheKey]) {\r\n      return this.textureCache[cacheKey];\r\n    }\r\n    const promise = this.loadImageSource(sourceIndex, loader).then(function(texture) {\r\n      texture.flipY = false;\r\n      texture.name = textureDef.name || sourceDef.name || \"\";\r\n      if (texture.name === \"\" && typeof sourceDef.uri === \"string\" && sourceDef.uri.startsWith(\"data:image/\") === false) {\r\n        texture.name = sourceDef.uri;\r\n      }\r\n      const samplers = json.samplers || {};\r\n      const sampler = samplers[textureDef.sampler] || {};\r\n      texture.magFilter = WEBGL_FILTERS[sampler.magFilter] || LinearFilter;\r\n      texture.minFilter = WEBGL_FILTERS[sampler.minFilter] || LinearMipmapLinearFilter;\r\n      texture.wrapS = WEBGL_WRAPPINGS[sampler.wrapS] || RepeatWrapping;\r\n      texture.wrapT = WEBGL_WRAPPINGS[sampler.wrapT] || RepeatWrapping;\r\n      parser.associations.set(texture, { textures: textureIndex });\r\n      return texture;\r\n    }).catch(function() {\r\n      return null;\r\n    });\r\n    this.textureCache[cacheKey] = promise;\r\n    return promise;\r\n  }\r\n  loadImageSource(sourceIndex, loader) {\r\n    const parser = this;\r\n    const json = this.json;\r\n    const options = this.options;\r\n    if (this.sourceCache[sourceIndex] !== void 0) {\r\n      return this.sourceCache[sourceIndex].then((texture) => texture.clone());\r\n    }\r\n    const sourceDef = json.images[sourceIndex];\r\n    const URL = self.URL || self.webkitURL;\r\n    let sourceURI = sourceDef.uri || \"\";\r\n    let isObjectURL = false;\r\n    if (sourceDef.bufferView !== void 0) {\r\n      sourceURI = parser.getDependency(\"bufferView\", sourceDef.bufferView).then(function(bufferView) {\r\n        isObjectURL = true;\r\n        const blob = new Blob([bufferView], { type: sourceDef.mimeType });\r\n        sourceURI = URL.createObjectURL(blob);\r\n        return sourceURI;\r\n      });\r\n    } else if (sourceDef.uri === void 0) {\r\n      throw new Error(\"THREE.GLTFLoader: Image \" + sourceIndex + \" is missing URI and bufferView\");\r\n    }\r\n    const promise = Promise.resolve(sourceURI).then(function(sourceURI2) {\r\n      return new Promise(function(resolve, reject) {\r\n        let onLoad = resolve;\r\n        if (loader.isImageBitmapLoader === true) {\r\n          onLoad = function(imageBitmap) {\r\n            const texture = new Texture(imageBitmap);\r\n            texture.needsUpdate = true;\r\n            resolve(texture);\r\n          };\r\n        }\r\n        loader.load(LoaderUtils.resolveURL(sourceURI2, options.path), onLoad, void 0, reject);\r\n      });\r\n    }).then(function(texture) {\r\n      if (isObjectURL === true) {\r\n        URL.revokeObjectURL(sourceURI);\r\n      }\r\n      texture.userData.mimeType = sourceDef.mimeType || getImageURIMimeType(sourceDef.uri);\r\n      return texture;\r\n    }).catch(function(error) {\r\n      console.error(\"THREE.GLTFLoader: Couldn't load texture\", sourceURI);\r\n      throw error;\r\n    });\r\n    this.sourceCache[sourceIndex] = promise;\r\n    return promise;\r\n  }\r\n  /**\r\n   * Asynchronously assigns a texture to the given material parameters.\r\n   * @param {Object} materialParams\r\n   * @param {string} mapName\r\n   * @param {Object} mapDef\r\n   * @return {Promise<Texture>}\r\n   */\r\n  assignTexture(materialParams, mapName, mapDef, encoding) {\r\n    const parser = this;\r\n    return this.getDependency(\"texture\", mapDef.index).then(function(texture) {\r\n      if (!texture)\r\n        return null;\r\n      if (mapDef.texCoord !== void 0 && mapDef.texCoord > 0) {\r\n        texture = texture.clone();\r\n        texture.channel = mapDef.texCoord;\r\n      }\r\n      if (parser.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM]) {\r\n        const transform = mapDef.extensions !== void 0 ? mapDef.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM] : void 0;\r\n        if (transform) {\r\n          const gltfReference = parser.associations.get(texture);\r\n          texture = parser.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM].extendTexture(texture, transform);\r\n          parser.associations.set(texture, gltfReference);\r\n        }\r\n      }\r\n      if (encoding !== void 0) {\r\n        if (\"colorSpace\" in texture)\r\n          texture.colorSpace = encoding === 3001 ? \"srgb\" : \"srgb-linear\";\r\n        else\r\n          texture.encoding = encoding;\r\n      }\r\n      materialParams[mapName] = texture;\r\n      return texture;\r\n    });\r\n  }\r\n  /**\r\n   * Assigns final material to a Mesh, Line, or Points instance. The instance\r\n   * already has a material (generated from the glTF material options alone)\r\n   * but reuse of the same glTF material may require multiple threejs materials\r\n   * to accommodate different primitive types, defines, etc. New materials will\r\n   * be created if necessary, and reused from a cache.\r\n   * @param  {Object3D} mesh Mesh, Line, or Points instance.\r\n   */\r\n  assignFinalMaterial(mesh) {\r\n    const geometry = mesh.geometry;\r\n    let material = mesh.material;\r\n    const useDerivativeTangents = geometry.attributes.tangent === void 0;\r\n    const useVertexColors = geometry.attributes.color !== void 0;\r\n    const useFlatShading = geometry.attributes.normal === void 0;\r\n    if (mesh.isPoints) {\r\n      const cacheKey = \"PointsMaterial:\" + material.uuid;\r\n      let pointsMaterial = this.cache.get(cacheKey);\r\n      if (!pointsMaterial) {\r\n        pointsMaterial = new PointsMaterial();\r\n        Material.prototype.copy.call(pointsMaterial, material);\r\n        pointsMaterial.color.copy(material.color);\r\n        pointsMaterial.map = material.map;\r\n        pointsMaterial.sizeAttenuation = false;\r\n        this.cache.add(cacheKey, pointsMaterial);\r\n      }\r\n      material = pointsMaterial;\r\n    } else if (mesh.isLine) {\r\n      const cacheKey = \"LineBasicMaterial:\" + material.uuid;\r\n      let lineMaterial = this.cache.get(cacheKey);\r\n      if (!lineMaterial) {\r\n        lineMaterial = new LineBasicMaterial();\r\n        Material.prototype.copy.call(lineMaterial, material);\r\n        lineMaterial.color.copy(material.color);\r\n        lineMaterial.map = material.map;\r\n        this.cache.add(cacheKey, lineMaterial);\r\n      }\r\n      material = lineMaterial;\r\n    }\r\n    if (useDerivativeTangents || useVertexColors || useFlatShading) {\r\n      let cacheKey = \"ClonedMaterial:\" + material.uuid + \":\";\r\n      if (useDerivativeTangents)\r\n        cacheKey += \"derivative-tangents:\";\r\n      if (useVertexColors)\r\n        cacheKey += \"vertex-colors:\";\r\n      if (useFlatShading)\r\n        cacheKey += \"flat-shading:\";\r\n      let cachedMaterial = this.cache.get(cacheKey);\r\n      if (!cachedMaterial) {\r\n        cachedMaterial = material.clone();\r\n        if (useVertexColors)\r\n          cachedMaterial.vertexColors = true;\r\n        if (useFlatShading)\r\n          cachedMaterial.flatShading = true;\r\n        if (useDerivativeTangents) {\r\n          if (cachedMaterial.normalScale)\r\n            cachedMaterial.normalScale.y *= -1;\r\n          if (cachedMaterial.clearcoatNormalScale)\r\n            cachedMaterial.clearcoatNormalScale.y *= -1;\r\n        }\r\n        this.cache.add(cacheKey, cachedMaterial);\r\n        this.associations.set(cachedMaterial, this.associations.get(material));\r\n      }\r\n      material = cachedMaterial;\r\n    }\r\n    mesh.material = material;\r\n  }\r\n  getMaterialType() {\r\n    return MeshStandardMaterial;\r\n  }\r\n  /**\r\n   * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#materials\r\n   * @param {number} materialIndex\r\n   * @return {Promise<Material>}\r\n   */\r\n  loadMaterial(materialIndex) {\r\n    const parser = this;\r\n    const json = this.json;\r\n    const extensions = this.extensions;\r\n    const materialDef = json.materials[materialIndex];\r\n    let materialType;\r\n    const materialParams = {};\r\n    const materialExtensions = materialDef.extensions || {};\r\n    const pending = [];\r\n    if (materialExtensions[EXTENSIONS.KHR_MATERIALS_UNLIT]) {\r\n      const kmuExtension = extensions[EXTENSIONS.KHR_MATERIALS_UNLIT];\r\n      materialType = kmuExtension.getMaterialType();\r\n      pending.push(kmuExtension.extendParams(materialParams, materialDef, parser));\r\n    } else {\r\n      const metallicRoughness = materialDef.pbrMetallicRoughness || {};\r\n      materialParams.color = new Color(1, 1, 1);\r\n      materialParams.opacity = 1;\r\n      if (Array.isArray(metallicRoughness.baseColorFactor)) {\r\n        const array = metallicRoughness.baseColorFactor;\r\n        materialParams.color.fromArray(array);\r\n        materialParams.opacity = array[3];\r\n      }\r\n      if (metallicRoughness.baseColorTexture !== void 0) {\r\n        pending.push(parser.assignTexture(materialParams, \"map\", metallicRoughness.baseColorTexture, 3001));\r\n      }\r\n      materialParams.metalness = metallicRoughness.metallicFactor !== void 0 ? metallicRoughness.metallicFactor : 1;\r\n      materialParams.roughness = metallicRoughness.roughnessFactor !== void 0 ? metallicRoughness.roughnessFactor : 1;\r\n      if (metallicRoughness.metallicRoughnessTexture !== void 0) {\r\n        pending.push(parser.assignTexture(materialParams, \"metalnessMap\", metallicRoughness.metallicRoughnessTexture));\r\n        pending.push(parser.assignTexture(materialParams, \"roughnessMap\", metallicRoughness.metallicRoughnessTexture));\r\n      }\r\n      materialType = this._invokeOne(function(ext) {\r\n        return ext.getMaterialType && ext.getMaterialType(materialIndex);\r\n      });\r\n      pending.push(\r\n        Promise.all(\r\n          this._invokeAll(function(ext) {\r\n            return ext.extendMaterialParams && ext.extendMaterialParams(materialIndex, materialParams);\r\n          })\r\n        )\r\n      );\r\n    }\r\n    if (materialDef.doubleSided === true) {\r\n      materialParams.side = DoubleSide;\r\n    }\r\n    const alphaMode = materialDef.alphaMode || ALPHA_MODES.OPAQUE;\r\n    if (alphaMode === ALPHA_MODES.BLEND) {\r\n      materialParams.transparent = true;\r\n      materialParams.depthWrite = false;\r\n    } else {\r\n      materialParams.transparent = false;\r\n      if (alphaMode === ALPHA_MODES.MASK) {\r\n        materialParams.alphaTest = materialDef.alphaCutoff !== void 0 ? materialDef.alphaCutoff : 0.5;\r\n      }\r\n    }\r\n    if (materialDef.normalTexture !== void 0 && materialType !== MeshBasicMaterial) {\r\n      pending.push(parser.assignTexture(materialParams, \"normalMap\", materialDef.normalTexture));\r\n      materialParams.normalScale = new Vector2(1, 1);\r\n      if (materialDef.normalTexture.scale !== void 0) {\r\n        const scale = materialDef.normalTexture.scale;\r\n        materialParams.normalScale.set(scale, scale);\r\n      }\r\n    }\r\n    if (materialDef.occlusionTexture !== void 0 && materialType !== MeshBasicMaterial) {\r\n      pending.push(parser.assignTexture(materialParams, \"aoMap\", materialDef.occlusionTexture));\r\n      if (materialDef.occlusionTexture.strength !== void 0) {\r\n        materialParams.aoMapIntensity = materialDef.occlusionTexture.strength;\r\n      }\r\n    }\r\n    if (materialDef.emissiveFactor !== void 0 && materialType !== MeshBasicMaterial) {\r\n      materialParams.emissive = new Color().fromArray(materialDef.emissiveFactor);\r\n    }\r\n    if (materialDef.emissiveTexture !== void 0 && materialType !== MeshBasicMaterial) {\r\n      pending.push(parser.assignTexture(materialParams, \"emissiveMap\", materialDef.emissiveTexture, 3001));\r\n    }\r\n    return Promise.all(pending).then(function() {\r\n      const material = new materialType(materialParams);\r\n      if (materialDef.name)\r\n        material.name = materialDef.name;\r\n      assignExtrasToUserData(material, materialDef);\r\n      parser.associations.set(material, { materials: materialIndex });\r\n      if (materialDef.extensions)\r\n        addUnknownExtensionsToUserData(extensions, material, materialDef);\r\n      return material;\r\n    });\r\n  }\r\n  /** When Object3D instances are targeted by animation, they need unique names. */\r\n  createUniqueName(originalName) {\r\n    const sanitizedName = PropertyBinding.sanitizeNodeName(originalName || \"\");\r\n    if (sanitizedName in this.nodeNamesUsed) {\r\n      return sanitizedName + \"_\" + ++this.nodeNamesUsed[sanitizedName];\r\n    } else {\r\n      this.nodeNamesUsed[sanitizedName] = 0;\r\n      return sanitizedName;\r\n    }\r\n  }\r\n  /**\r\n   * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#geometry\r\n   *\r\n   * Creates BufferGeometries from primitives.\r\n   *\r\n   * @param {Array<GLTF.Primitive>} primitives\r\n   * @return {Promise<Array<BufferGeometry>>}\r\n   */\r\n  loadGeometries(primitives) {\r\n    const parser = this;\r\n    const extensions = this.extensions;\r\n    const cache = this.primitiveCache;\r\n    function createDracoPrimitive(primitive) {\r\n      return extensions[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(primitive, parser).then(function(geometry) {\r\n        return addPrimitiveAttributes(geometry, primitive, parser);\r\n      });\r\n    }\r\n    const pending = [];\r\n    for (let i = 0, il = primitives.length; i < il; i++) {\r\n      const primitive = primitives[i];\r\n      const cacheKey = createPrimitiveKey(primitive);\r\n      const cached = cache[cacheKey];\r\n      if (cached) {\r\n        pending.push(cached.promise);\r\n      } else {\r\n        let geometryPromise;\r\n        if (primitive.extensions && primitive.extensions[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION]) {\r\n          geometryPromise = createDracoPrimitive(primitive);\r\n        } else {\r\n          geometryPromise = addPrimitiveAttributes(new BufferGeometry(), primitive, parser);\r\n        }\r\n        cache[cacheKey] = { primitive, promise: geometryPromise };\r\n        pending.push(geometryPromise);\r\n      }\r\n    }\r\n    return Promise.all(pending);\r\n  }\r\n  /**\r\n   * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#meshes\r\n   * @param {number} meshIndex\r\n   * @return {Promise<Group|Mesh|SkinnedMesh>}\r\n   */\r\n  loadMesh(meshIndex) {\r\n    const parser = this;\r\n    const json = this.json;\r\n    const extensions = this.extensions;\r\n    const meshDef = json.meshes[meshIndex];\r\n    const primitives = meshDef.primitives;\r\n    const pending = [];\r\n    for (let i = 0, il = primitives.length; i < il; i++) {\r\n      const material = primitives[i].material === void 0 ? createDefaultMaterial(this.cache) : this.getDependency(\"material\", primitives[i].material);\r\n      pending.push(material);\r\n    }\r\n    pending.push(parser.loadGeometries(primitives));\r\n    return Promise.all(pending).then(function(results) {\r\n      const materials = results.slice(0, results.length - 1);\r\n      const geometries = results[results.length - 1];\r\n      const meshes = [];\r\n      for (let i = 0, il = geometries.length; i < il; i++) {\r\n        const geometry = geometries[i];\r\n        const primitive = primitives[i];\r\n        let mesh;\r\n        const material = materials[i];\r\n        if (primitive.mode === WEBGL_CONSTANTS.TRIANGLES || primitive.mode === WEBGL_CONSTANTS.TRIANGLE_STRIP || primitive.mode === WEBGL_CONSTANTS.TRIANGLE_FAN || primitive.mode === void 0) {\r\n          mesh = meshDef.isSkinnedMesh === true ? new SkinnedMesh(geometry, material) : new Mesh(geometry, material);\r\n          if (mesh.isSkinnedMesh === true) {\r\n            mesh.normalizeSkinWeights();\r\n          }\r\n          if (primitive.mode === WEBGL_CONSTANTS.TRIANGLE_STRIP) {\r\n            mesh.geometry = toTrianglesDrawMode(mesh.geometry, TriangleStripDrawMode);\r\n          } else if (primitive.mode === WEBGL_CONSTANTS.TRIANGLE_FAN) {\r\n            mesh.geometry = toTrianglesDrawMode(mesh.geometry, TriangleFanDrawMode);\r\n          }\r\n        } else if (primitive.mode === WEBGL_CONSTANTS.LINES) {\r\n          mesh = new LineSegments(geometry, material);\r\n        } else if (primitive.mode === WEBGL_CONSTANTS.LINE_STRIP) {\r\n          mesh = new Line(geometry, material);\r\n        } else if (primitive.mode === WEBGL_CONSTANTS.LINE_LOOP) {\r\n          mesh = new LineLoop(geometry, material);\r\n        } else if (primitive.mode === WEBGL_CONSTANTS.POINTS) {\r\n          mesh = new Points(geometry, material);\r\n        } else {\r\n          throw new Error(\"THREE.GLTFLoader: Primitive mode unsupported: \" + primitive.mode);\r\n        }\r\n        if (Object.keys(mesh.geometry.morphAttributes).length > 0) {\r\n          updateMorphTargets(mesh, meshDef);\r\n        }\r\n        mesh.name = parser.createUniqueName(meshDef.name || \"mesh_\" + meshIndex);\r\n        assignExtrasToUserData(mesh, meshDef);\r\n        if (primitive.extensions)\r\n          addUnknownExtensionsToUserData(extensions, mesh, primitive);\r\n        parser.assignFinalMaterial(mesh);\r\n        meshes.push(mesh);\r\n      }\r\n      for (let i = 0, il = meshes.length; i < il; i++) {\r\n        parser.associations.set(meshes[i], {\r\n          meshes: meshIndex,\r\n          primitives: i\r\n        });\r\n      }\r\n      if (meshes.length === 1) {\r\n        if (meshDef.extensions)\r\n          addUnknownExtensionsToUserData(extensions, meshes[0], meshDef);\r\n        return meshes[0];\r\n      }\r\n      const group = new Group();\r\n      if (meshDef.extensions)\r\n        addUnknownExtensionsToUserData(extensions, group, meshDef);\r\n      parser.associations.set(group, { meshes: meshIndex });\r\n      for (let i = 0, il = meshes.length; i < il; i++) {\r\n        group.add(meshes[i]);\r\n      }\r\n      return group;\r\n    });\r\n  }\r\n  /**\r\n   * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#cameras\r\n   * @param {number} cameraIndex\r\n   * @return {Promise<THREE.Camera>}\r\n   */\r\n  loadCamera(cameraIndex) {\r\n    let camera;\r\n    const cameraDef = this.json.cameras[cameraIndex];\r\n    const params = cameraDef[cameraDef.type];\r\n    if (!params) {\r\n      console.warn(\"THREE.GLTFLoader: Missing camera parameters.\");\r\n      return;\r\n    }\r\n    if (cameraDef.type === \"perspective\") {\r\n      camera = new PerspectiveCamera(\r\n        MathUtils.radToDeg(params.yfov),\r\n        params.aspectRatio || 1,\r\n        params.znear || 1,\r\n        params.zfar || 2e6\r\n      );\r\n    } else if (cameraDef.type === \"orthographic\") {\r\n      camera = new OrthographicCamera(-params.xmag, params.xmag, params.ymag, -params.ymag, params.znear, params.zfar);\r\n    }\r\n    if (cameraDef.name)\r\n      camera.name = this.createUniqueName(cameraDef.name);\r\n    assignExtrasToUserData(camera, cameraDef);\r\n    return Promise.resolve(camera);\r\n  }\r\n  /**\r\n   * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#skins\r\n   * @param {number} skinIndex\r\n   * @return {Promise<Skeleton>}\r\n   */\r\n  loadSkin(skinIndex) {\r\n    const skinDef = this.json.skins[skinIndex];\r\n    const pending = [];\r\n    for (let i = 0, il = skinDef.joints.length; i < il; i++) {\r\n      pending.push(this._loadNodeShallow(skinDef.joints[i]));\r\n    }\r\n    if (skinDef.inverseBindMatrices !== void 0) {\r\n      pending.push(this.getDependency(\"accessor\", skinDef.inverseBindMatrices));\r\n    } else {\r\n      pending.push(null);\r\n    }\r\n    return Promise.all(pending).then(function(results) {\r\n      const inverseBindMatrices = results.pop();\r\n      const jointNodes = results;\r\n      const bones = [];\r\n      const boneInverses = [];\r\n      for (let i = 0, il = jointNodes.length; i < il; i++) {\r\n        const jointNode = jointNodes[i];\r\n        if (jointNode) {\r\n          bones.push(jointNode);\r\n          const mat = new Matrix4();\r\n          if (inverseBindMatrices !== null) {\r\n            mat.fromArray(inverseBindMatrices.array, i * 16);\r\n          }\r\n          boneInverses.push(mat);\r\n        } else {\r\n          console.warn('THREE.GLTFLoader: Joint \"%s\" could not be found.', skinDef.joints[i]);\r\n        }\r\n      }\r\n      return new Skeleton(bones, boneInverses);\r\n    });\r\n  }\r\n  /**\r\n   * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#animations\r\n   * @param {number} animationIndex\r\n   * @return {Promise<AnimationClip>}\r\n   */\r\n  loadAnimation(animationIndex) {\r\n    const json = this.json;\r\n    const animationDef = json.animations[animationIndex];\r\n    const animationName = animationDef.name ? animationDef.name : \"animation_\" + animationIndex;\r\n    const pendingNodes = [];\r\n    const pendingInputAccessors = [];\r\n    const pendingOutputAccessors = [];\r\n    const pendingSamplers = [];\r\n    const pendingTargets = [];\r\n    for (let i = 0, il = animationDef.channels.length; i < il; i++) {\r\n      const channel = animationDef.channels[i];\r\n      const sampler = animationDef.samplers[channel.sampler];\r\n      const target = channel.target;\r\n      const name = target.node;\r\n      const input = animationDef.parameters !== void 0 ? animationDef.parameters[sampler.input] : sampler.input;\r\n      const output = animationDef.parameters !== void 0 ? animationDef.parameters[sampler.output] : sampler.output;\r\n      if (target.node === void 0)\r\n        continue;\r\n      pendingNodes.push(this.getDependency(\"node\", name));\r\n      pendingInputAccessors.push(this.getDependency(\"accessor\", input));\r\n      pendingOutputAccessors.push(this.getDependency(\"accessor\", output));\r\n      pendingSamplers.push(sampler);\r\n      pendingTargets.push(target);\r\n    }\r\n    return Promise.all([\r\n      Promise.all(pendingNodes),\r\n      Promise.all(pendingInputAccessors),\r\n      Promise.all(pendingOutputAccessors),\r\n      Promise.all(pendingSamplers),\r\n      Promise.all(pendingTargets)\r\n    ]).then(function(dependencies) {\r\n      const nodes = dependencies[0];\r\n      const inputAccessors = dependencies[1];\r\n      const outputAccessors = dependencies[2];\r\n      const samplers = dependencies[3];\r\n      const targets = dependencies[4];\r\n      const tracks = [];\r\n      for (let i = 0, il = nodes.length; i < il; i++) {\r\n        const node = nodes[i];\r\n        const inputAccessor = inputAccessors[i];\r\n        const outputAccessor = outputAccessors[i];\r\n        const sampler = samplers[i];\r\n        const target = targets[i];\r\n        if (node === void 0)\r\n          continue;\r\n        node.updateMatrix();\r\n        let TypedKeyframeTrack;\r\n        switch (PATH_PROPERTIES[target.path]) {\r\n          case PATH_PROPERTIES.weights:\r\n            TypedKeyframeTrack = NumberKeyframeTrack;\r\n            break;\r\n          case PATH_PROPERTIES.rotation:\r\n            TypedKeyframeTrack = QuaternionKeyframeTrack;\r\n            break;\r\n          case PATH_PROPERTIES.position:\r\n          case PATH_PROPERTIES.scale:\r\n          default:\r\n            TypedKeyframeTrack = VectorKeyframeTrack;\r\n            break;\r\n        }\r\n        const targetName = node.name ? node.name : node.uuid;\r\n        const interpolation = sampler.interpolation !== void 0 ? INTERPOLATION[sampler.interpolation] : InterpolateLinear;\r\n        const targetNames = [];\r\n        if (PATH_PROPERTIES[target.path] === PATH_PROPERTIES.weights) {\r\n          node.traverse(function(object) {\r\n            if (object.morphTargetInfluences) {\r\n              targetNames.push(object.name ? object.name : object.uuid);\r\n            }\r\n          });\r\n        } else {\r\n          targetNames.push(targetName);\r\n        }\r\n        let outputArray = outputAccessor.array;\r\n        if (outputAccessor.normalized) {\r\n          const scale = getNormalizedComponentScale(outputArray.constructor);\r\n          const scaled = new Float32Array(outputArray.length);\r\n          for (let j = 0, jl = outputArray.length; j < jl; j++) {\r\n            scaled[j] = outputArray[j] * scale;\r\n          }\r\n          outputArray = scaled;\r\n        }\r\n        for (let j = 0, jl = targetNames.length; j < jl; j++) {\r\n          const track = new TypedKeyframeTrack(\r\n            targetNames[j] + \".\" + PATH_PROPERTIES[target.path],\r\n            inputAccessor.array,\r\n            outputArray,\r\n            interpolation\r\n          );\r\n          if (sampler.interpolation === \"CUBICSPLINE\") {\r\n            track.createInterpolant = function InterpolantFactoryMethodGLTFCubicSpline(result) {\r\n              const interpolantType = this instanceof QuaternionKeyframeTrack ? GLTFCubicSplineQuaternionInterpolant : GLTFCubicSplineInterpolant;\r\n              return new interpolantType(this.times, this.values, this.getValueSize() / 3, result);\r\n            };\r\n            track.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline = true;\r\n          }\r\n          tracks.push(track);\r\n        }\r\n      }\r\n      return new AnimationClip(animationName, void 0, tracks);\r\n    });\r\n  }\r\n  createNodeMesh(nodeIndex) {\r\n    const json = this.json;\r\n    const parser = this;\r\n    const nodeDef = json.nodes[nodeIndex];\r\n    if (nodeDef.mesh === void 0)\r\n      return null;\r\n    return parser.getDependency(\"mesh\", nodeDef.mesh).then(function(mesh) {\r\n      const node = parser._getNodeRef(parser.meshCache, nodeDef.mesh, mesh);\r\n      if (nodeDef.weights !== void 0) {\r\n        node.traverse(function(o) {\r\n          if (!o.isMesh)\r\n            return;\r\n          for (let i = 0, il = nodeDef.weights.length; i < il; i++) {\r\n            o.morphTargetInfluences[i] = nodeDef.weights[i];\r\n          }\r\n        });\r\n      }\r\n      return node;\r\n    });\r\n  }\r\n  /**\r\n   * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#nodes-and-hierarchy\r\n   * @param {number} nodeIndex\r\n   * @return {Promise<Object3D>}\r\n   */\r\n  loadNode(nodeIndex) {\r\n    const json = this.json;\r\n    const parser = this;\r\n    const nodeDef = json.nodes[nodeIndex];\r\n    const nodePending = parser._loadNodeShallow(nodeIndex);\r\n    const childPending = [];\r\n    const childrenDef = nodeDef.children || [];\r\n    for (let i = 0, il = childrenDef.length; i < il; i++) {\r\n      childPending.push(parser.getDependency(\"node\", childrenDef[i]));\r\n    }\r\n    const skeletonPending = nodeDef.skin === void 0 ? Promise.resolve(null) : parser.getDependency(\"skin\", nodeDef.skin);\r\n    return Promise.all([nodePending, Promise.all(childPending), skeletonPending]).then(function(results) {\r\n      const node = results[0];\r\n      const children = results[1];\r\n      const skeleton = results[2];\r\n      if (skeleton !== null) {\r\n        node.traverse(function(mesh) {\r\n          if (!mesh.isSkinnedMesh)\r\n            return;\r\n          mesh.bind(skeleton, _identityMatrix);\r\n        });\r\n      }\r\n      for (let i = 0, il = children.length; i < il; i++) {\r\n        node.add(children[i]);\r\n      }\r\n      return node;\r\n    });\r\n  }\r\n  // ._loadNodeShallow() parses a single node.\r\n  // skin and child nodes are created and added in .loadNode() (no '_' prefix).\r\n  _loadNodeShallow(nodeIndex) {\r\n    const json = this.json;\r\n    const extensions = this.extensions;\r\n    const parser = this;\r\n    if (this.nodeCache[nodeIndex] !== void 0) {\r\n      return this.nodeCache[nodeIndex];\r\n    }\r\n    const nodeDef = json.nodes[nodeIndex];\r\n    const nodeName = nodeDef.name ? parser.createUniqueName(nodeDef.name) : \"\";\r\n    const pending = [];\r\n    const meshPromise = parser._invokeOne(function(ext) {\r\n      return ext.createNodeMesh && ext.createNodeMesh(nodeIndex);\r\n    });\r\n    if (meshPromise) {\r\n      pending.push(meshPromise);\r\n    }\r\n    if (nodeDef.camera !== void 0) {\r\n      pending.push(\r\n        parser.getDependency(\"camera\", nodeDef.camera).then(function(camera) {\r\n          return parser._getNodeRef(parser.cameraCache, nodeDef.camera, camera);\r\n        })\r\n      );\r\n    }\r\n    parser._invokeAll(function(ext) {\r\n      return ext.createNodeAttachment && ext.createNodeAttachment(nodeIndex);\r\n    }).forEach(function(promise) {\r\n      pending.push(promise);\r\n    });\r\n    this.nodeCache[nodeIndex] = Promise.all(pending).then(function(objects) {\r\n      let node;\r\n      if (nodeDef.isBone === true) {\r\n        node = new Bone();\r\n      } else if (objects.length > 1) {\r\n        node = new Group();\r\n      } else if (objects.length === 1) {\r\n        node = objects[0];\r\n      } else {\r\n        node = new Object3D();\r\n      }\r\n      if (node !== objects[0]) {\r\n        for (let i = 0, il = objects.length; i < il; i++) {\r\n          node.add(objects[i]);\r\n        }\r\n      }\r\n      if (nodeDef.name) {\r\n        node.userData.name = nodeDef.name;\r\n        node.name = nodeName;\r\n      }\r\n      assignExtrasToUserData(node, nodeDef);\r\n      if (nodeDef.extensions)\r\n        addUnknownExtensionsToUserData(extensions, node, nodeDef);\r\n      if (nodeDef.matrix !== void 0) {\r\n        const matrix = new Matrix4();\r\n        matrix.fromArray(nodeDef.matrix);\r\n        node.applyMatrix4(matrix);\r\n      } else {\r\n        if (nodeDef.translation !== void 0) {\r\n          node.position.fromArray(nodeDef.translation);\r\n        }\r\n        if (nodeDef.rotation !== void 0) {\r\n          node.quaternion.fromArray(nodeDef.rotation);\r\n        }\r\n        if (nodeDef.scale !== void 0) {\r\n          node.scale.fromArray(nodeDef.scale);\r\n        }\r\n      }\r\n      if (!parser.associations.has(node)) {\r\n        parser.associations.set(node, {});\r\n      }\r\n      parser.associations.get(node).nodes = nodeIndex;\r\n      return node;\r\n    });\r\n    return this.nodeCache[nodeIndex];\r\n  }\r\n  /**\r\n   * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#scenes\r\n   * @param {number} sceneIndex\r\n   * @return {Promise<Group>}\r\n   */\r\n  loadScene(sceneIndex) {\r\n    const extensions = this.extensions;\r\n    const sceneDef = this.json.scenes[sceneIndex];\r\n    const parser = this;\r\n    const scene = new Group();\r\n    if (sceneDef.name)\r\n      scene.name = parser.createUniqueName(sceneDef.name);\r\n    assignExtrasToUserData(scene, sceneDef);\r\n    if (sceneDef.extensions)\r\n      addUnknownExtensionsToUserData(extensions, scene, sceneDef);\r\n    const nodeIds = sceneDef.nodes || [];\r\n    const pending = [];\r\n    for (let i = 0, il = nodeIds.length; i < il; i++) {\r\n      pending.push(parser.getDependency(\"node\", nodeIds[i]));\r\n    }\r\n    return Promise.all(pending).then(function(nodes) {\r\n      for (let i = 0, il = nodes.length; i < il; i++) {\r\n        scene.add(nodes[i]);\r\n      }\r\n      const reduceAssociations = (node) => {\r\n        const reducedAssociations = /* @__PURE__ */ new Map();\r\n        for (const [key, value] of parser.associations) {\r\n          if (key instanceof Material || key instanceof Texture) {\r\n            reducedAssociations.set(key, value);\r\n          }\r\n        }\r\n        node.traverse((node2) => {\r\n          const mappings = parser.associations.get(node2);\r\n          if (mappings != null) {\r\n            reducedAssociations.set(node2, mappings);\r\n          }\r\n        });\r\n        return reducedAssociations;\r\n      };\r\n      parser.associations = reduceAssociations(scene);\r\n      return scene;\r\n    });\r\n  }\r\n}\r\nfunction computeBounds(geometry, primitiveDef, parser) {\r\n  const attributes = primitiveDef.attributes;\r\n  const box = new Box3();\r\n  if (attributes.POSITION !== void 0) {\r\n    const accessor = parser.json.accessors[attributes.POSITION];\r\n    const min = accessor.min;\r\n    const max = accessor.max;\r\n    if (min !== void 0 && max !== void 0) {\r\n      box.set(new Vector3(min[0], min[1], min[2]), new Vector3(max[0], max[1], max[2]));\r\n      if (accessor.normalized) {\r\n        const boxScale = getNormalizedComponentScale(WEBGL_COMPONENT_TYPES[accessor.componentType]);\r\n        box.min.multiplyScalar(boxScale);\r\n        box.max.multiplyScalar(boxScale);\r\n      }\r\n    } else {\r\n      console.warn(\"THREE.GLTFLoader: Missing min/max properties for accessor POSITION.\");\r\n      return;\r\n    }\r\n  } else {\r\n    return;\r\n  }\r\n  const targets = primitiveDef.targets;\r\n  if (targets !== void 0) {\r\n    const maxDisplacement = new Vector3();\r\n    const vector = new Vector3();\r\n    for (let i = 0, il = targets.length; i < il; i++) {\r\n      const target = targets[i];\r\n      if (target.POSITION !== void 0) {\r\n        const accessor = parser.json.accessors[target.POSITION];\r\n        const min = accessor.min;\r\n        const max = accessor.max;\r\n        if (min !== void 0 && max !== void 0) {\r\n          vector.setX(Math.max(Math.abs(min[0]), Math.abs(max[0])));\r\n          vector.setY(Math.max(Math.abs(min[1]), Math.abs(max[1])));\r\n          vector.setZ(Math.max(Math.abs(min[2]), Math.abs(max[2])));\r\n          if (accessor.normalized) {\r\n            const boxScale = getNormalizedComponentScale(WEBGL_COMPONENT_TYPES[accessor.componentType]);\r\n            vector.multiplyScalar(boxScale);\r\n          }\r\n          maxDisplacement.max(vector);\r\n        } else {\r\n          console.warn(\"THREE.GLTFLoader: Missing min/max properties for accessor POSITION.\");\r\n        }\r\n      }\r\n    }\r\n    box.expandByVector(maxDisplacement);\r\n  }\r\n  geometry.boundingBox = box;\r\n  const sphere = new Sphere();\r\n  box.getCenter(sphere.center);\r\n  sphere.radius = box.min.distanceTo(box.max) / 2;\r\n  geometry.boundingSphere = sphere;\r\n}\r\nfunction addPrimitiveAttributes(geometry, primitiveDef, parser) {\r\n  const attributes = primitiveDef.attributes;\r\n  const pending = [];\r\n  function assignAttributeAccessor(accessorIndex, attributeName) {\r\n    return parser.getDependency(\"accessor\", accessorIndex).then(function(accessor) {\r\n      geometry.setAttribute(attributeName, accessor);\r\n    });\r\n  }\r\n  for (const gltfAttributeName in attributes) {\r\n    const threeAttributeName = ATTRIBUTES[gltfAttributeName] || gltfAttributeName.toLowerCase();\r\n    if (threeAttributeName in geometry.attributes)\r\n      continue;\r\n    pending.push(assignAttributeAccessor(attributes[gltfAttributeName], threeAttributeName));\r\n  }\r\n  if (primitiveDef.indices !== void 0 && !geometry.index) {\r\n    const accessor = parser.getDependency(\"accessor\", primitiveDef.indices).then(function(accessor2) {\r\n      geometry.setIndex(accessor2);\r\n    });\r\n    pending.push(accessor);\r\n  }\r\n  assignExtrasToUserData(geometry, primitiveDef);\r\n  computeBounds(geometry, primitiveDef, parser);\r\n  return Promise.all(pending).then(function() {\r\n    return primitiveDef.targets !== void 0 ? addMorphTargets(geometry, primitiveDef.targets, parser) : geometry;\r\n  });\r\n}\r\nexport {\r\n  GLTFLoader\r\n};\r\n", "import * as THREE from \"three\";\r\nconst PINCH_MAX = 0.05;\r\nconst PINCH_THRESHOLD = 0.02;\r\nconst PINCH_MIN = 0.01;\r\nconst POINTER_ADVANCE_MAX = 0.02;\r\nconst POINTER_OPACITY_MAX = 1;\r\nconst POINTER_OPACITY_MIN = 0.4;\r\nconst POINTER_FRONT_RADIUS = 2e-3;\r\nconst POINTER_REAR_RADIUS = 0.01;\r\nconst POINTER_REAR_RADIUS_MIN = 3e-3;\r\nconst POINTER_LENGTH = 0.035;\r\nconst POINTER_SEGMENTS = 16;\r\nconst POINTER_RINGS = 12;\r\nconst POINTER_HEMISPHERE_ANGLE = 110;\r\nconst YAXIS = /* @__PURE__ */ new THREE.Vector3(0, 1, 0);\r\nconst ZAXIS = /* @__PURE__ */ new THREE.Vector3(0, 0, 1);\r\nconst CURSOR_RADIUS = 0.02;\r\nconst CURSOR_MAX_DISTANCE = 1.5;\r\nclass OculusHandPointerModel extends THREE.Object3D {\r\n  constructor(hand, controller) {\r\n    super();\r\n    this.hand = hand;\r\n    this.controller = controller;\r\n    this.motionController = null;\r\n    this.envMap = null;\r\n    this.mesh = null;\r\n    this.pointerGeometry = null;\r\n    this.pointerMesh = null;\r\n    this.pointerObject = null;\r\n    this.pinched = false;\r\n    this.attached = false;\r\n    this.cursorObject = null;\r\n    this.raycaster = null;\r\n    this._onConnected = this._onConnected.bind(this);\r\n    this._onDisconnected = this._onDisconnected.bind(this);\r\n    this.hand.addEventListener(\"connected\", this._onConnected);\r\n    this.hand.addEventListener(\"disconnected\", this._onDisconnected);\r\n  }\r\n  _onConnected(event) {\r\n    const xrInputSource = event.data;\r\n    if (xrInputSource.hand) {\r\n      this.visible = true;\r\n      this.xrInputSource = xrInputSource;\r\n      this.createPointer();\r\n    }\r\n  }\r\n  _onDisconnected() {\r\n    this.visible = false;\r\n    this.xrInputSource = null;\r\n    this.pointerGeometry.dispose();\r\n    this.pointerMesh.material.dispose();\r\n    this.clear();\r\n  }\r\n  _drawVerticesRing(vertices, baseVector, ringIndex) {\r\n    const segmentVector = baseVector.clone();\r\n    for (var i = 0; i < POINTER_SEGMENTS; i++) {\r\n      segmentVector.applyAxisAngle(ZAXIS, Math.PI * 2 / POINTER_SEGMENTS);\r\n      const vid = ringIndex * POINTER_SEGMENTS + i;\r\n      vertices[3 * vid] = segmentVector.x;\r\n      vertices[3 * vid + 1] = segmentVector.y;\r\n      vertices[3 * vid + 2] = segmentVector.z;\r\n    }\r\n  }\r\n  _updatePointerVertices(rearRadius) {\r\n    const vertices = this.pointerGeometry.attributes.position.array;\r\n    const frontFaceBase = new THREE.Vector3(POINTER_FRONT_RADIUS, 0, -1 * (POINTER_LENGTH - rearRadius));\r\n    this._drawVerticesRing(vertices, frontFaceBase, 0);\r\n    const rearBase = new THREE.Vector3(\r\n      Math.sin(Math.PI * POINTER_HEMISPHERE_ANGLE / 180) * rearRadius,\r\n      Math.cos(Math.PI * POINTER_HEMISPHERE_ANGLE / 180) * rearRadius,\r\n      0\r\n    );\r\n    for (var i = 0; i < POINTER_RINGS; i++) {\r\n      this._drawVerticesRing(vertices, rearBase, i + 1);\r\n      rearBase.applyAxisAngle(YAXIS, Math.PI * POINTER_HEMISPHERE_ANGLE / 180 / (POINTER_RINGS * -2));\r\n    }\r\n    const frontCenterIndex = POINTER_SEGMENTS * (1 + POINTER_RINGS);\r\n    const rearCenterIndex = POINTER_SEGMENTS * (1 + POINTER_RINGS) + 1;\r\n    const frontCenter = new THREE.Vector3(0, 0, -1 * (POINTER_LENGTH - rearRadius));\r\n    vertices[frontCenterIndex * 3] = frontCenter.x;\r\n    vertices[frontCenterIndex * 3 + 1] = frontCenter.y;\r\n    vertices[frontCenterIndex * 3 + 2] = frontCenter.z;\r\n    const rearCenter = new THREE.Vector3(0, 0, rearRadius);\r\n    vertices[rearCenterIndex * 3] = rearCenter.x;\r\n    vertices[rearCenterIndex * 3 + 1] = rearCenter.y;\r\n    vertices[rearCenterIndex * 3 + 2] = rearCenter.z;\r\n    this.pointerGeometry.setAttribute(\"position\", new THREE.Float32BufferAttribute(vertices, 3));\r\n  }\r\n  createPointer() {\r\n    var i, j;\r\n    const vertices = new Array(((POINTER_RINGS + 1) * POINTER_SEGMENTS + 2) * 3).fill(0);\r\n    const indices = [];\r\n    this.pointerGeometry = new THREE.BufferGeometry();\r\n    this.pointerGeometry.setAttribute(\"position\", new THREE.Float32BufferAttribute(vertices, 3));\r\n    this._updatePointerVertices(POINTER_REAR_RADIUS);\r\n    for (i = 0; i < POINTER_RINGS; i++) {\r\n      for (j = 0; j < POINTER_SEGMENTS - 1; j++) {\r\n        indices.push(i * POINTER_SEGMENTS + j, i * POINTER_SEGMENTS + j + 1, (i + 1) * POINTER_SEGMENTS + j);\r\n        indices.push(i * POINTER_SEGMENTS + j + 1, (i + 1) * POINTER_SEGMENTS + j + 1, (i + 1) * POINTER_SEGMENTS + j);\r\n      }\r\n      indices.push((i + 1) * POINTER_SEGMENTS - 1, i * POINTER_SEGMENTS, (i + 2) * POINTER_SEGMENTS - 1);\r\n      indices.push(i * POINTER_SEGMENTS, (i + 1) * POINTER_SEGMENTS, (i + 2) * POINTER_SEGMENTS - 1);\r\n    }\r\n    const frontCenterIndex = POINTER_SEGMENTS * (1 + POINTER_RINGS);\r\n    const rearCenterIndex = POINTER_SEGMENTS * (1 + POINTER_RINGS) + 1;\r\n    for (i = 0; i < POINTER_SEGMENTS - 1; i++) {\r\n      indices.push(frontCenterIndex, i + 1, i);\r\n      indices.push(rearCenterIndex, i + POINTER_SEGMENTS * POINTER_RINGS, i + POINTER_SEGMENTS * POINTER_RINGS + 1);\r\n    }\r\n    indices.push(frontCenterIndex, 0, POINTER_SEGMENTS - 1);\r\n    indices.push(rearCenterIndex, POINTER_SEGMENTS * (POINTER_RINGS + 1) - 1, POINTER_SEGMENTS * POINTER_RINGS);\r\n    const material = new THREE.MeshBasicMaterial();\r\n    material.transparent = true;\r\n    material.opacity = POINTER_OPACITY_MIN;\r\n    this.pointerGeometry.setIndex(indices);\r\n    this.pointerMesh = new THREE.Mesh(this.pointerGeometry, material);\r\n    this.pointerMesh.position.set(0, 0, -1 * POINTER_REAR_RADIUS);\r\n    this.pointerObject = new THREE.Object3D();\r\n    this.pointerObject.add(this.pointerMesh);\r\n    this.raycaster = new THREE.Raycaster();\r\n    const cursorGeometry = new THREE.SphereGeometry(CURSOR_RADIUS, 10, 10);\r\n    const cursorMaterial = new THREE.MeshBasicMaterial();\r\n    cursorMaterial.transparent = true;\r\n    cursorMaterial.opacity = POINTER_OPACITY_MIN;\r\n    this.cursorObject = new THREE.Mesh(cursorGeometry, cursorMaterial);\r\n    this.pointerObject.add(this.cursorObject);\r\n    this.add(this.pointerObject);\r\n  }\r\n  _updateRaycaster() {\r\n    if (this.raycaster) {\r\n      const pointerMatrix = this.pointerObject.matrixWorld;\r\n      const tempMatrix = new THREE.Matrix4();\r\n      tempMatrix.identity().extractRotation(pointerMatrix);\r\n      this.raycaster.ray.origin.setFromMatrixPosition(pointerMatrix);\r\n      this.raycaster.ray.direction.set(0, 0, -1).applyMatrix4(tempMatrix);\r\n    }\r\n  }\r\n  _updatePointer() {\r\n    this.pointerObject.visible = this.controller.visible;\r\n    const indexTip = this.hand.joints[\"index-finger-tip\"];\r\n    const thumbTip = this.hand.joints[\"thumb-tip\"];\r\n    const distance = indexTip.position.distanceTo(thumbTip.position);\r\n    const position = indexTip.position.clone().add(thumbTip.position).multiplyScalar(0.5);\r\n    this.pointerObject.position.copy(position);\r\n    this.pointerObject.quaternion.copy(this.controller.quaternion);\r\n    this.pinched = distance <= PINCH_THRESHOLD;\r\n    const pinchScale = (distance - PINCH_MIN) / (PINCH_MAX - PINCH_MIN);\r\n    const focusScale = (distance - PINCH_MIN) / (PINCH_THRESHOLD - PINCH_MIN);\r\n    if (pinchScale > 1) {\r\n      this._updatePointerVertices(POINTER_REAR_RADIUS);\r\n      this.pointerMesh.position.set(0, 0, -1 * POINTER_REAR_RADIUS);\r\n      this.pointerMesh.material.opacity = POINTER_OPACITY_MIN;\r\n    } else if (pinchScale > 0) {\r\n      const rearRadius = (POINTER_REAR_RADIUS - POINTER_REAR_RADIUS_MIN) * pinchScale + POINTER_REAR_RADIUS_MIN;\r\n      this._updatePointerVertices(rearRadius);\r\n      if (focusScale < 1) {\r\n        this.pointerMesh.position.set(0, 0, -1 * rearRadius - (1 - focusScale) * POINTER_ADVANCE_MAX);\r\n        this.pointerMesh.material.opacity = POINTER_OPACITY_MIN + (1 - focusScale) * (POINTER_OPACITY_MAX - POINTER_OPACITY_MIN);\r\n      } else {\r\n        this.pointerMesh.position.set(0, 0, -1 * rearRadius);\r\n        this.pointerMesh.material.opacity = POINTER_OPACITY_MIN;\r\n      }\r\n    } else {\r\n      this._updatePointerVertices(POINTER_REAR_RADIUS_MIN);\r\n      this.pointerMesh.position.set(0, 0, -1 * POINTER_REAR_RADIUS_MIN - POINTER_ADVANCE_MAX);\r\n      this.pointerMesh.material.opacity = POINTER_OPACITY_MAX;\r\n    }\r\n    this.cursorObject.material.opacity = this.pointerMesh.material.opacity;\r\n  }\r\n  updateMatrixWorld(force) {\r\n    super.updateMatrixWorld(force);\r\n    if (this.pointerGeometry) {\r\n      this._updatePointer();\r\n      this._updateRaycaster();\r\n    }\r\n  }\r\n  isPinched() {\r\n    return this.pinched;\r\n  }\r\n  setAttached(attached) {\r\n    this.attached = attached;\r\n  }\r\n  isAttached() {\r\n    return this.attached;\r\n  }\r\n  intersectObject(object, recursive = true) {\r\n    if (this.raycaster) {\r\n      return this.raycaster.intersectObject(object, recursive);\r\n    }\r\n  }\r\n  intersectObjects(objects, recursive = true) {\r\n    if (this.raycaster) {\r\n      return this.raycaster.intersectObjects(objects, recursive);\r\n    }\r\n  }\r\n  checkIntersections(objects, recursive = false) {\r\n    if (this.raycaster && !this.attached) {\r\n      const intersections = this.raycaster.intersectObjects(objects, recursive);\r\n      const direction = new THREE.Vector3(0, 0, -1);\r\n      if (intersections.length > 0) {\r\n        const intersection = intersections[0];\r\n        const distance = intersection.distance;\r\n        this.cursorObject.position.copy(direction.multiplyScalar(distance));\r\n      } else {\r\n        this.cursorObject.position.copy(direction.multiplyScalar(CURSOR_MAX_DISTANCE));\r\n      }\r\n    }\r\n  }\r\n  setCursor(distance) {\r\n    const direction = new THREE.Vector3(0, 0, -1);\r\n    if (this.raycaster && !this.attached) {\r\n      this.cursorObject.position.copy(direction.multiplyScalar(distance));\r\n    }\r\n  }\r\n  dispose() {\r\n    this._onDisconnected();\r\n    this.hand.removeEventListener(\"connected\", this._onConnected);\r\n    this.hand.removeEventListener(\"disconnected\", this._onDisconnected);\r\n  }\r\n}\r\nexport {\r\n  OculusHandPointerModel\r\n};\r\n", "var __defProp = Object.defineProperty;\r\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\r\nvar __publicField = (obj, key, value) => {\r\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\r\n  return value;\r\n};\r\nconst _VRButton = class {\r\n  static createButton(renderer, sessionInit = {}) {\r\n    const button = document.createElement(\"button\");\r\n    function showEnterVR() {\r\n      let currentSession = null;\r\n      async function onSessionStarted(session) {\r\n        session.addEventListener(\"end\", onSessionEnded);\r\n        await renderer.xr.setSession(session);\r\n        button.textContent = \"EXIT VR\";\r\n        currentSession = session;\r\n      }\r\n      function onSessionEnded() {\r\n        currentSession.removeEventListener(\"end\", onSessionEnded);\r\n        button.textContent = \"ENTER VR\";\r\n        currentSession = null;\r\n      }\r\n      button.style.display = \"\";\r\n      button.style.cursor = \"pointer\";\r\n      button.style.left = \"calc(50% - 50px)\";\r\n      button.style.width = \"100px\";\r\n      button.textContent = \"ENTER VR\";\r\n      button.onmouseenter = () => {\r\n        button.style.opacity = \"1.0\";\r\n      };\r\n      button.onmouseleave = () => {\r\n        button.style.opacity = \"0.5\";\r\n      };\r\n      button.onclick = () => {\r\n        var _a;\r\n        if (currentSession === null) {\r\n          const optionalFeatures = [sessionInit.optionalFeatures, \"local-floor\", \"bounded-floor\", \"hand-tracking\"].flat().filter(Boolean);\r\n          (_a = navigator.xr) == null ? void 0 : _a.requestSession(\"immersive-vr\", { ...sessionInit, optionalFeatures }).then(onSessionStarted);\r\n        } else {\r\n          currentSession.end();\r\n        }\r\n      };\r\n    }\r\n    function disableButton() {\r\n      button.style.display = \"\";\r\n      button.style.cursor = \"auto\";\r\n      button.style.left = \"calc(50% - 75px)\";\r\n      button.style.width = \"150px\";\r\n      button.onmouseenter = null;\r\n      button.onmouseleave = null;\r\n      button.onclick = null;\r\n    }\r\n    function showWebXRNotFound() {\r\n      disableButton();\r\n      button.textContent = \"VR NOT SUPPORTED\";\r\n    }\r\n    function stylizeElement(element) {\r\n      element.style.position = \"absolute\";\r\n      element.style.bottom = \"20px\";\r\n      element.style.padding = \"12px 6px\";\r\n      element.style.border = \"1px solid #fff\";\r\n      element.style.borderRadius = \"4px\";\r\n      element.style.background = \"rgba(0,0,0,0.1)\";\r\n      element.style.color = \"#fff\";\r\n      element.style.font = \"normal 13px sans-serif\";\r\n      element.style.textAlign = \"center\";\r\n      element.style.opacity = \"0.5\";\r\n      element.style.outline = \"none\";\r\n      element.style.zIndex = \"999\";\r\n    }\r\n    if (\"xr\" in navigator) {\r\n      stylizeElement(button);\r\n      button.id = \"VRButton\";\r\n      button.style.display = \"none\";\r\n      navigator.xr.isSessionSupported(\"immersive-vr\").then((supported) => {\r\n        supported ? showEnterVR() : showWebXRNotFound();\r\n        if (supported && _VRButton.xrSessionIsGranted) {\r\n          button.click();\r\n        }\r\n      });\r\n      return button;\r\n    } else {\r\n      const message = document.createElement(\"a\");\r\n      if (window.isSecureContext === false) {\r\n        message.href = document.location.href.replace(/^http:/, \"https:\");\r\n        message.innerHTML = \"WEBXR NEEDS HTTPS\";\r\n      } else {\r\n        message.href = \"https://immersiveweb.dev/\";\r\n        message.innerHTML = \"WEBXR NOT AVAILABLE\";\r\n      }\r\n      message.style.left = \"calc(50% - 90px)\";\r\n      message.style.width = \"180px\";\r\n      message.style.textDecoration = \"none\";\r\n      stylizeElement(message);\r\n      return message;\r\n    }\r\n  }\r\n  static registerSessionGrantedListener() {\r\n    if (\"xr\" in navigator) {\r\n      ;\r\n      navigator.xr.addEventListener(\"sessiongranted\", () => {\r\n        _VRButton.xrSessionIsGranted = true;\r\n      });\r\n    }\r\n  }\r\n};\r\nlet VRButton = _VRButton;\r\n__publicField(VRButton, \"xrSessionIsGranted\", false);\r\nexport {\r\n  VRButton\r\n};\r\n", "var __defProp = Object.defineProperty;\r\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\r\nvar __publicField = (obj, key, value) => {\r\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\r\n  return value;\r\n};\r\nconst MotionControllerConstants = {\r\n  Handedness: {\r\n    NONE: \"none\",\r\n    LEFT: \"left\",\r\n    RIGHT: \"right\"\r\n  },\r\n  ComponentState: {\r\n    DEFAULT: \"default\",\r\n    TOUCHED: \"touched\",\r\n    PRESSED: \"pressed\"\r\n  },\r\n  ComponentProperty: {\r\n    BUTTON: \"button\",\r\n    X_AXIS: \"xAxis\",\r\n    Y_AXIS: \"yAxis\",\r\n    STATE: \"state\"\r\n  },\r\n  ComponentType: {\r\n    TRIGGER: \"trigger\",\r\n    SQUEEZE: \"squeeze\",\r\n    TOUCHPAD: \"touchpad\",\r\n    THUMBSTICK: \"thumbstick\",\r\n    BUTTON: \"button\"\r\n  },\r\n  ButtonTouchThreshold: 0.05,\r\n  AxisTouchThreshold: 0.1,\r\n  VisualResponseProperty: {\r\n    TRANSFORM: \"transform\",\r\n    VISIBILITY: \"visibility\"\r\n  }\r\n};\r\nasync function fetchJsonFile(path) {\r\n  const response = await fetch(path);\r\n  if (!response.ok) {\r\n    throw new Error(response.statusText);\r\n  } else {\r\n    return response.json();\r\n  }\r\n}\r\nasync function fetchProfilesList(basePath) {\r\n  if (!basePath) {\r\n    throw new Error(\"No basePath supplied\");\r\n  }\r\n  const profileListFileName = \"profilesList.json\";\r\n  const profilesList = await fetchJsonFile(`${basePath}/${profileListFileName}`);\r\n  return profilesList;\r\n}\r\nasync function fetchProfile(xrInputSource, basePath, defaultProfile = null, getAssetPath = true) {\r\n  if (!xrInputSource) {\r\n    throw new Error(\"No xrInputSource supplied\");\r\n  }\r\n  if (!basePath) {\r\n    throw new Error(\"No basePath supplied\");\r\n  }\r\n  const supportedProfilesList = await fetchProfilesList(basePath);\r\n  let match = void 0;\r\n  xrInputSource.profiles.some((profileId) => {\r\n    const supportedProfile = supportedProfilesList[profileId];\r\n    if (supportedProfile) {\r\n      match = {\r\n        profileId,\r\n        profilePath: `${basePath}/${supportedProfile.path}`,\r\n        deprecated: !!supportedProfile.deprecated\r\n      };\r\n    }\r\n    return !!match;\r\n  });\r\n  if (!match) {\r\n    if (!defaultProfile) {\r\n      throw new Error(\"No matching profile name found\");\r\n    }\r\n    const supportedProfile = supportedProfilesList[defaultProfile];\r\n    if (!supportedProfile) {\r\n      throw new Error(`No matching profile name found and default profile \"${defaultProfile}\" missing.`);\r\n    }\r\n    match = {\r\n      profileId: defaultProfile,\r\n      profilePath: `${basePath}/${supportedProfile.path}`,\r\n      deprecated: !!supportedProfile.deprecated\r\n    };\r\n  }\r\n  const profile = await fetchJsonFile(match.profilePath);\r\n  let assetPath = void 0;\r\n  if (getAssetPath) {\r\n    let layout;\r\n    if (xrInputSource.handedness === \"any\") {\r\n      layout = profile.layouts[Object.keys(profile.layouts)[0]];\r\n    } else {\r\n      layout = profile.layouts[xrInputSource.handedness];\r\n    }\r\n    if (!layout) {\r\n      throw new Error(`No matching handedness, ${xrInputSource.handedness}, in profile ${match.profileId}`);\r\n    }\r\n    if (layout.assetPath) {\r\n      assetPath = match.profilePath.replace(\"profile.json\", layout.assetPath);\r\n    }\r\n  }\r\n  return { profile, assetPath };\r\n}\r\nconst defaultComponentValues = {\r\n  xAxis: 0,\r\n  yAxis: 0,\r\n  button: 0,\r\n  state: MotionControllerConstants.ComponentState.DEFAULT\r\n};\r\nfunction normalizeAxes(x = 0, y = 0) {\r\n  let xAxis = x;\r\n  let yAxis = y;\r\n  const hypotenuse = Math.sqrt(x * x + y * y);\r\n  if (hypotenuse > 1) {\r\n    const theta = Math.atan2(y, x);\r\n    xAxis = Math.cos(theta);\r\n    yAxis = Math.sin(theta);\r\n  }\r\n  const result = {\r\n    normalizedXAxis: xAxis * 0.5 + 0.5,\r\n    normalizedYAxis: yAxis * 0.5 + 0.5\r\n  };\r\n  return result;\r\n}\r\nclass VisualResponse {\r\n  constructor(visualResponseDescription) {\r\n    __publicField(this, \"value\");\r\n    __publicField(this, \"componentProperty\");\r\n    __publicField(this, \"states\");\r\n    __publicField(this, \"valueNodeName\");\r\n    __publicField(this, \"valueNodeProperty\");\r\n    __publicField(this, \"minNodeName\");\r\n    __publicField(this, \"maxNodeName\");\r\n    __publicField(this, \"valueNode\");\r\n    __publicField(this, \"minNode\");\r\n    __publicField(this, \"maxNode\");\r\n    this.componentProperty = visualResponseDescription.componentProperty;\r\n    this.states = visualResponseDescription.states;\r\n    this.valueNodeName = visualResponseDescription.valueNodeName;\r\n    this.valueNodeProperty = visualResponseDescription.valueNodeProperty;\r\n    if (this.valueNodeProperty === MotionControllerConstants.VisualResponseProperty.TRANSFORM) {\r\n      this.minNodeName = visualResponseDescription.minNodeName;\r\n      this.maxNodeName = visualResponseDescription.maxNodeName;\r\n    }\r\n    this.value = 0;\r\n    this.updateFromComponent(defaultComponentValues);\r\n  }\r\n  /**\r\n   * Computes the visual response's interpolation weight based on component state\r\n   * @param {Object} componentValues - The component from which to update\r\n   * @param {number | undefined} xAxis - The reported X axis value of the component\r\n   * @param {number | undefined} yAxis - The reported Y axis value of the component\r\n   * @param {number | undefined} button - The reported value of the component's button\r\n   * @param {string} state - The component's active state\r\n   */\r\n  updateFromComponent({\r\n    xAxis,\r\n    yAxis,\r\n    button,\r\n    state\r\n  }) {\r\n    const { normalizedXAxis, normalizedYAxis } = normalizeAxes(xAxis, yAxis);\r\n    switch (this.componentProperty) {\r\n      case MotionControllerConstants.ComponentProperty.X_AXIS:\r\n        this.value = this.states.includes(state) ? normalizedXAxis : 0.5;\r\n        break;\r\n      case MotionControllerConstants.ComponentProperty.Y_AXIS:\r\n        this.value = this.states.includes(state) ? normalizedYAxis : 0.5;\r\n        break;\r\n      case MotionControllerConstants.ComponentProperty.BUTTON:\r\n        this.value = this.states.includes(state) && button ? button : 0;\r\n        break;\r\n      case MotionControllerConstants.ComponentProperty.STATE:\r\n        if (this.valueNodeProperty === MotionControllerConstants.VisualResponseProperty.VISIBILITY) {\r\n          this.value = this.states.includes(state);\r\n        } else {\r\n          this.value = this.states.includes(state) ? 1 : 0;\r\n        }\r\n        break;\r\n      default:\r\n        throw new Error(`Unexpected visualResponse componentProperty ${this.componentProperty}`);\r\n    }\r\n  }\r\n}\r\nclass Component {\r\n  /**\r\n   * @param {string} componentId - Id of the component\r\n   * @param {InputProfileComponent} componentDescription - Description of the component to be created\r\n   */\r\n  constructor(componentId, componentDescription) {\r\n    __publicField(this, \"id\");\r\n    __publicField(this, \"values\");\r\n    __publicField(this, \"type\");\r\n    __publicField(this, \"gamepadIndices\");\r\n    __publicField(this, \"rootNodeName\");\r\n    __publicField(this, \"visualResponses\");\r\n    __publicField(this, \"touchPointNodeName\");\r\n    __publicField(this, \"touchPointNode\");\r\n    if (!componentId || !componentDescription || !componentDescription.visualResponses || !componentDescription.gamepadIndices || Object.keys(componentDescription.gamepadIndices).length === 0) {\r\n      throw new Error(\"Invalid arguments supplied\");\r\n    }\r\n    this.id = componentId;\r\n    this.type = componentDescription.type;\r\n    this.rootNodeName = componentDescription.rootNodeName;\r\n    this.touchPointNodeName = componentDescription.touchPointNodeName;\r\n    this.visualResponses = {};\r\n    Object.keys(componentDescription.visualResponses).forEach((responseName) => {\r\n      const visualResponse = new VisualResponse(componentDescription.visualResponses[responseName]);\r\n      this.visualResponses[responseName] = visualResponse;\r\n    });\r\n    this.gamepadIndices = Object.assign({}, componentDescription.gamepadIndices);\r\n    this.values = {\r\n      state: MotionControllerConstants.ComponentState.DEFAULT,\r\n      button: this.gamepadIndices.button !== void 0 ? 0 : void 0,\r\n      xAxis: this.gamepadIndices.xAxis !== void 0 ? 0 : void 0,\r\n      yAxis: this.gamepadIndices.yAxis !== void 0 ? 0 : void 0\r\n    };\r\n  }\r\n  get data() {\r\n    const data = { id: this.id, ...this.values };\r\n    return data;\r\n  }\r\n  /**\r\n   * @description Poll for updated data based on current gamepad state\r\n   * @param {Object} gamepad - The gamepad object from which the component data should be polled\r\n   */\r\n  updateFromGamepad(gamepad) {\r\n    this.values.state = MotionControllerConstants.ComponentState.DEFAULT;\r\n    if (this.gamepadIndices.button !== void 0 && gamepad.buttons.length > this.gamepadIndices.button) {\r\n      const gamepadButton = gamepad.buttons[this.gamepadIndices.button];\r\n      this.values.button = gamepadButton.value;\r\n      this.values.button = this.values.button < 0 ? 0 : this.values.button;\r\n      this.values.button = this.values.button > 1 ? 1 : this.values.button;\r\n      if (gamepadButton.pressed || this.values.button === 1) {\r\n        this.values.state = MotionControllerConstants.ComponentState.PRESSED;\r\n      } else if (gamepadButton.touched || this.values.button > MotionControllerConstants.ButtonTouchThreshold) {\r\n        this.values.state = MotionControllerConstants.ComponentState.TOUCHED;\r\n      }\r\n    }\r\n    if (this.gamepadIndices.xAxis !== void 0 && gamepad.axes.length > this.gamepadIndices.xAxis) {\r\n      this.values.xAxis = gamepad.axes[this.gamepadIndices.xAxis];\r\n      this.values.xAxis = this.values.xAxis < -1 ? -1 : this.values.xAxis;\r\n      this.values.xAxis = this.values.xAxis > 1 ? 1 : this.values.xAxis;\r\n      if (this.values.state === MotionControllerConstants.ComponentState.DEFAULT && Math.abs(this.values.xAxis) > MotionControllerConstants.AxisTouchThreshold) {\r\n        this.values.state = MotionControllerConstants.ComponentState.TOUCHED;\r\n      }\r\n    }\r\n    if (this.gamepadIndices.yAxis !== void 0 && gamepad.axes.length > this.gamepadIndices.yAxis) {\r\n      this.values.yAxis = gamepad.axes[this.gamepadIndices.yAxis];\r\n      this.values.yAxis = this.values.yAxis < -1 ? -1 : this.values.yAxis;\r\n      this.values.yAxis = this.values.yAxis > 1 ? 1 : this.values.yAxis;\r\n      if (this.values.state === MotionControllerConstants.ComponentState.DEFAULT && Math.abs(this.values.yAxis) > MotionControllerConstants.AxisTouchThreshold) {\r\n        this.values.state = MotionControllerConstants.ComponentState.TOUCHED;\r\n      }\r\n    }\r\n    Object.values(this.visualResponses).forEach((visualResponse) => {\r\n      visualResponse.updateFromComponent(this.values);\r\n    });\r\n  }\r\n}\r\nclass MotionController {\r\n  /**\r\n   * @param {XRInputSource} xrInputSource - The XRInputSource to build the MotionController around\r\n   * @param {Profile} profile - The best matched profile description for the supplied xrInputSource\r\n   * @param {string} assetUrl\r\n   */\r\n  constructor(xrInputSource, profile, assetUrl) {\r\n    __publicField(this, \"xrInputSource\");\r\n    __publicField(this, \"assetUrl\");\r\n    __publicField(this, \"layoutDescription\");\r\n    __publicField(this, \"id\");\r\n    __publicField(this, \"components\");\r\n    if (!xrInputSource) {\r\n      throw new Error(\"No xrInputSource supplied\");\r\n    }\r\n    if (!profile) {\r\n      throw new Error(\"No profile supplied\");\r\n    }\r\n    if (!profile.layouts[xrInputSource.handedness]) {\r\n      throw new Error(\"No layout for \" + xrInputSource.handedness + \" handedness\");\r\n    }\r\n    this.xrInputSource = xrInputSource;\r\n    this.assetUrl = assetUrl;\r\n    this.id = profile.profileId;\r\n    this.layoutDescription = profile.layouts[xrInputSource.handedness];\r\n    this.components = {};\r\n    Object.keys(this.layoutDescription.components).forEach((componentId) => {\r\n      const componentDescription = this.layoutDescription.components[componentId];\r\n      this.components[componentId] = new Component(componentId, componentDescription);\r\n    });\r\n    this.updateFromGamepad();\r\n  }\r\n  get gripSpace() {\r\n    return this.xrInputSource.gripSpace;\r\n  }\r\n  get targetRaySpace() {\r\n    return this.xrInputSource.targetRaySpace;\r\n  }\r\n  /**\r\n   * @description Returns a subset of component data for simplified debugging\r\n   */\r\n  get data() {\r\n    const data = [];\r\n    Object.values(this.components).forEach((component) => {\r\n      data.push(component.data);\r\n    });\r\n    return data;\r\n  }\r\n  /**\r\n   * @description Poll for updated data based on current gamepad state\r\n   */\r\n  updateFromGamepad() {\r\n    Object.values(this.components).forEach((component) => {\r\n      component.updateFromGamepad(this.xrInputSource.gamepad);\r\n    });\r\n  }\r\n}\r\nexport {\r\n  MotionController,\r\n  MotionControllerConstants,\r\n  fetchProfile,\r\n  fetchProfilesList\r\n};\r\n", "import { Matrix4, Vector3, SphereGeometry, BoxGeometry, MeshStandardMaterial, InstancedMesh, DynamicDrawUsage } from \"three\";\r\nconst _matrix = /* @__PURE__ */ new Matrix4();\r\nconst _vector = /* @__PURE__ */ new Vector3();\r\nclass XRHandPrimitiveModel {\r\n  constructor(handModel, controller, path, handedness, options) {\r\n    this.controller = controller;\r\n    this.handModel = handModel;\r\n    this.envMap = null;\r\n    let geometry;\r\n    if (!options || !options.primitive || options.primitive === \"sphere\") {\r\n      geometry = new SphereGeometry(1, 10, 10);\r\n    } else if (options.primitive === \"box\") {\r\n      geometry = new BoxGeometry(1, 1, 1);\r\n    }\r\n    const material = new MeshStandardMaterial();\r\n    this.handMesh = new InstancedMesh(geometry, material, 30);\r\n    this.handMesh.instanceMatrix.setUsage(DynamicDrawUsage);\r\n    this.handMesh.castShadow = true;\r\n    this.handMesh.receiveShadow = true;\r\n    this.handModel.add(this.handMesh);\r\n    this.joints = [\r\n      \"wrist\",\r\n      \"thumb-metacarpal\",\r\n      \"thumb-phalanx-proximal\",\r\n      \"thumb-phalanx-distal\",\r\n      \"thumb-tip\",\r\n      \"index-finger-metacarpal\",\r\n      \"index-finger-phalanx-proximal\",\r\n      \"index-finger-phalanx-intermediate\",\r\n      \"index-finger-phalanx-distal\",\r\n      \"index-finger-tip\",\r\n      \"middle-finger-metacarpal\",\r\n      \"middle-finger-phalanx-proximal\",\r\n      \"middle-finger-phalanx-intermediate\",\r\n      \"middle-finger-phalanx-distal\",\r\n      \"middle-finger-tip\",\r\n      \"ring-finger-metacarpal\",\r\n      \"ring-finger-phalanx-proximal\",\r\n      \"ring-finger-phalanx-intermediate\",\r\n      \"ring-finger-phalanx-distal\",\r\n      \"ring-finger-tip\",\r\n      \"pinky-finger-metacarpal\",\r\n      \"pinky-finger-phalanx-proximal\",\r\n      \"pinky-finger-phalanx-intermediate\",\r\n      \"pinky-finger-phalanx-distal\",\r\n      \"pinky-finger-tip\"\r\n    ];\r\n  }\r\n  updateMesh() {\r\n    const defaultRadius = 8e-3;\r\n    const joints = this.controller.joints;\r\n    let count = 0;\r\n    for (let i = 0; i < this.joints.length; i++) {\r\n      const joint = joints[this.joints[i]];\r\n      if (joint.visible) {\r\n        _vector.setScalar(joint.jointRadius || defaultRadius);\r\n        _matrix.compose(joint.position, joint.quaternion, _vector);\r\n        this.handMesh.setMatrixAt(i, _matrix);\r\n        count++;\r\n      }\r\n    }\r\n    this.handMesh.count = count;\r\n    this.handMesh.instanceMatrix.needsUpdate = true;\r\n  }\r\n}\r\nexport {\r\n  XRHandPrimitiveModel\r\n};\r\n", "import { Vector3, BoxGeometry } from \"three\";\r\nconst tempNormal = /* @__PURE__ */ new Vector3();\r\nfunction getUv(faceDirVector, normal, uvAxis, projectionAxis, radius, sideLength) {\r\n  const totArcLength = 2 * Math.PI * radius / 4;\r\n  const centerLength = Math.max(sideLength - 2 * radius, 0);\r\n  const halfArc = Math.PI / 4;\r\n  tempNormal.copy(normal);\r\n  tempNormal[projectionAxis] = 0;\r\n  tempNormal.normalize();\r\n  const arcUvRatio = 0.5 * totArcLength / (totArcLength + centerLength);\r\n  const arcAngleRatio = 1 - tempNormal.angleTo(faceDirVector) / halfArc;\r\n  if (Math.sign(tempNormal[uvAxis]) === 1) {\r\n    return arcAngleRatio * arcUvRatio;\r\n  } else {\r\n    const lenUv = centerLength / (totArcLength + centerLength);\r\n    return lenUv + arcUvRatio + arcUvRatio * (1 - arcAngleRatio);\r\n  }\r\n}\r\nclass RoundedBoxGeometry extends BoxGeometry {\r\n  constructor(width = 1, height = 1, depth = 1, segments = 2, radius = 0.1) {\r\n    segments = segments * 2 + 1;\r\n    radius = Math.min(width / 2, height / 2, depth / 2, radius);\r\n    super(1, 1, 1, segments, segments, segments);\r\n    if (segments === 1)\r\n      return;\r\n    const geometry2 = this.toNonIndexed();\r\n    this.index = null;\r\n    this.attributes.position = geometry2.attributes.position;\r\n    this.attributes.normal = geometry2.attributes.normal;\r\n    this.attributes.uv = geometry2.attributes.uv;\r\n    const position = new Vector3();\r\n    const normal = new Vector3();\r\n    const box = new Vector3(width, height, depth).divideScalar(2).subScalar(radius);\r\n    const positions = this.attributes.position.array;\r\n    const normals = this.attributes.normal.array;\r\n    const uvs = this.attributes.uv.array;\r\n    const faceTris = positions.length / 6;\r\n    const faceDirVector = new Vector3();\r\n    const halfSegmentSize = 0.5 / segments;\r\n    for (let i = 0, j = 0; i < positions.length; i += 3, j += 2) {\r\n      position.fromArray(positions, i);\r\n      normal.copy(position);\r\n      normal.x -= Math.sign(normal.x) * halfSegmentSize;\r\n      normal.y -= Math.sign(normal.y) * halfSegmentSize;\r\n      normal.z -= Math.sign(normal.z) * halfSegmentSize;\r\n      normal.normalize();\r\n      positions[i + 0] = box.x * Math.sign(position.x) + normal.x * radius;\r\n      positions[i + 1] = box.y * Math.sign(position.y) + normal.y * radius;\r\n      positions[i + 2] = box.z * Math.sign(position.z) + normal.z * radius;\r\n      normals[i + 0] = normal.x;\r\n      normals[i + 1] = normal.y;\r\n      normals[i + 2] = normal.z;\r\n      const side = Math.floor(i / faceTris);\r\n      switch (side) {\r\n        case 0:\r\n          faceDirVector.set(1, 0, 0);\r\n          uvs[j + 0] = getUv(faceDirVector, normal, \"z\", \"y\", radius, depth);\r\n          uvs[j + 1] = 1 - getUv(faceDirVector, normal, \"y\", \"z\", radius, height);\r\n          break;\r\n        case 1:\r\n          faceDirVector.set(-1, 0, 0);\r\n          uvs[j + 0] = 1 - getUv(faceDirVector, normal, \"z\", \"y\", radius, depth);\r\n          uvs[j + 1] = 1 - getUv(faceDirVector, normal, \"y\", \"z\", radius, height);\r\n          break;\r\n        case 2:\r\n          faceDirVector.set(0, 1, 0);\r\n          uvs[j + 0] = 1 - getUv(faceDirVector, normal, \"x\", \"z\", radius, width);\r\n          uvs[j + 1] = getUv(faceDirVector, normal, \"z\", \"x\", radius, depth);\r\n          break;\r\n        case 3:\r\n          faceDirVector.set(0, -1, 0);\r\n          uvs[j + 0] = 1 - getUv(faceDirVector, normal, \"x\", \"z\", radius, width);\r\n          uvs[j + 1] = 1 - getUv(faceDirVector, normal, \"z\", \"x\", radius, depth);\r\n          break;\r\n        case 4:\r\n          faceDirVector.set(0, 0, 1);\r\n          uvs[j + 0] = 1 - getUv(faceDirVector, normal, \"x\", \"y\", radius, width);\r\n          uvs[j + 1] = 1 - getUv(faceDirVector, normal, \"y\", \"x\", radius, height);\r\n          break;\r\n        case 5:\r\n          faceDirVector.set(0, 0, -1);\r\n          uvs[j + 0] = getUv(faceDirVector, normal, \"x\", \"y\", radius, width);\r\n          uvs[j + 1] = 1 - getUv(faceDirVector, normal, \"y\", \"x\", radius, height);\r\n          break;\r\n      }\r\n    }\r\n  }\r\n}\r\nexport {\r\n  RoundedBoxGeometry\r\n};\r\n", "import { Matrix4, Vector3 } from \"three\";\r\nconst inverseProjectionMatrix = /* @__PURE__ */ new Matrix4();\r\nclass CSMFrustum {\r\n  constructor(data) {\r\n    data = data || {};\r\n    this.vertices = {\r\n      near: [new Vector3(), new Vector3(), new Vector3(), new Vector3()],\r\n      far: [new Vector3(), new Vector3(), new Vector3(), new Vector3()]\r\n    };\r\n    if (data.projectionMatrix !== void 0) {\r\n      this.setFromProjectionMatrix(data.projectionMatrix, data.maxFar || 1e4);\r\n    }\r\n  }\r\n  setFromProjectionMatrix(projectionMatrix, maxFar) {\r\n    const isOrthographic = projectionMatrix.elements[2 * 4 + 3] === 0;\r\n    inverseProjectionMatrix.copy(projectionMatrix).invert();\r\n    this.vertices.near[0].set(1, 1, -1);\r\n    this.vertices.near[1].set(1, -1, -1);\r\n    this.vertices.near[2].set(-1, -1, -1);\r\n    this.vertices.near[3].set(-1, 1, -1);\r\n    this.vertices.near.forEach(function(v) {\r\n      v.applyMatrix4(inverseProjectionMatrix);\r\n    });\r\n    this.vertices.far[0].set(1, 1, 1);\r\n    this.vertices.far[1].set(1, -1, 1);\r\n    this.vertices.far[2].set(-1, -1, 1);\r\n    this.vertices.far[3].set(-1, 1, 1);\r\n    this.vertices.far.forEach(function(v) {\r\n      v.applyMatrix4(inverseProjectionMatrix);\r\n      const absZ = Math.abs(v.z);\r\n      if (isOrthographic) {\r\n        v.z *= Math.min(maxFar / absZ, 1);\r\n      } else {\r\n        v.multiplyScalar(Math.min(maxFar / absZ, 1));\r\n      }\r\n    });\r\n    return this.vertices;\r\n  }\r\n  split(breaks, target) {\r\n    while (breaks.length > target.length) {\r\n      target.push(new CSMFrustum());\r\n    }\r\n    target.length = breaks.length;\r\n    for (let i = 0; i < breaks.length; i++) {\r\n      const cascade = target[i];\r\n      if (i === 0) {\r\n        for (let j = 0; j < 4; j++) {\r\n          cascade.vertices.near[j].copy(this.vertices.near[j]);\r\n        }\r\n      } else {\r\n        for (let j = 0; j < 4; j++) {\r\n          cascade.vertices.near[j].lerpVectors(this.vertices.near[j], this.vertices.far[j], breaks[i - 1]);\r\n        }\r\n      }\r\n      if (i === breaks.length - 1) {\r\n        for (let j = 0; j < 4; j++) {\r\n          cascade.vertices.far[j].copy(this.vertices.far[j]);\r\n        }\r\n      } else {\r\n        for (let j = 0; j < 4; j++) {\r\n          cascade.vertices.far[j].lerpVectors(this.vertices.near[j], this.vertices.far[j], breaks[i]);\r\n        }\r\n      }\r\n    }\r\n  }\r\n  toSpace(cameraMatrix, target) {\r\n    for (let i = 0; i < 4; i++) {\r\n      target.vertices.near[i].copy(this.vertices.near[i]).applyMatrix4(cameraMatrix);\r\n      target.vertices.far[i].copy(this.vertices.far[i]).applyMatrix4(cameraMatrix);\r\n    }\r\n  }\r\n}\r\nexport {\r\n  CSMFrustum\r\n};\r\n", "import { Matrix4, Vector3, Box3, DirectionalLight, MathUtils, ShaderChunk, Vector2 } from \"three\";\r\nimport { CSMFrustum } from \"./CSMFrustum.js\";\r\nimport { CSMShader } from \"./CSMShader.js\";\r\nconst _cameraToLightMatrix = /* @__PURE__ */ new Matrix4();\r\nconst _lightSpaceFrustum = /* @__PURE__ */ new CSMFrustum();\r\nconst _center = /* @__PURE__ */ new Vector3();\r\nconst _bbox = /* @__PURE__ */ new Box3();\r\nconst _uniformArray = [];\r\nconst _logArray = [];\r\nclass CSM {\r\n  constructor(data) {\r\n    data = data || {};\r\n    this.camera = data.camera;\r\n    this.parent = data.parent;\r\n    this.cascades = data.cascades || 3;\r\n    this.maxFar = data.maxFar || 1e5;\r\n    this.mode = data.mode || \"practical\";\r\n    this.shadowMapSize = data.shadowMapSize || 2048;\r\n    this.shadowBias = data.shadowBias || 1e-6;\r\n    this.lightDirection = data.lightDirection || new Vector3(1, -1, 1).normalize();\r\n    this.lightIntensity = data.lightIntensity || 1;\r\n    this.lightNear = data.lightNear || 1;\r\n    this.lightFar = data.lightFar || 2e3;\r\n    this.lightMargin = data.lightMargin || 200;\r\n    this.customSplitsCallback = data.customSplitsCallback;\r\n    this.fade = false;\r\n    this.mainFrustum = new CSMFrustum();\r\n    this.frustums = [];\r\n    this.breaks = [];\r\n    this.lights = [];\r\n    this.shaders = /* @__PURE__ */ new Map();\r\n    this.createLights();\r\n    this.updateFrustums();\r\n    this.injectInclude();\r\n  }\r\n  createLights() {\r\n    for (let i = 0; i < this.cascades; i++) {\r\n      const light = new DirectionalLight(16777215, this.lightIntensity);\r\n      light.castShadow = true;\r\n      light.shadow.mapSize.width = this.shadowMapSize;\r\n      light.shadow.mapSize.height = this.shadowMapSize;\r\n      light.shadow.camera.near = this.lightNear;\r\n      light.shadow.camera.far = this.lightFar;\r\n      light.shadow.bias = this.shadowBias;\r\n      this.parent.add(light);\r\n      this.parent.add(light.target);\r\n      this.lights.push(light);\r\n    }\r\n  }\r\n  initCascades() {\r\n    const camera = this.camera;\r\n    camera.updateProjectionMatrix();\r\n    this.mainFrustum.setFromProjectionMatrix(camera.projectionMatrix, this.maxFar);\r\n    this.mainFrustum.split(this.breaks, this.frustums);\r\n  }\r\n  updateShadowBounds() {\r\n    const frustums = this.frustums;\r\n    for (let i = 0; i < frustums.length; i++) {\r\n      const light = this.lights[i];\r\n      const shadowCam = light.shadow.camera;\r\n      const frustum = this.frustums[i];\r\n      const nearVerts = frustum.vertices.near;\r\n      const farVerts = frustum.vertices.far;\r\n      const point1 = farVerts[0];\r\n      let point2;\r\n      if (point1.distanceTo(farVerts[2]) > point1.distanceTo(nearVerts[2])) {\r\n        point2 = farVerts[2];\r\n      } else {\r\n        point2 = nearVerts[2];\r\n      }\r\n      let squaredBBWidth = point1.distanceTo(point2);\r\n      if (this.fade) {\r\n        const camera = this.camera;\r\n        const far = Math.max(camera.far, this.maxFar);\r\n        const linearDepth = frustum.vertices.far[0].z / (far - camera.near);\r\n        const margin = 0.25 * Math.pow(linearDepth, 2) * (far - camera.near);\r\n        squaredBBWidth += margin;\r\n      }\r\n      shadowCam.left = -squaredBBWidth / 2;\r\n      shadowCam.right = squaredBBWidth / 2;\r\n      shadowCam.top = squaredBBWidth / 2;\r\n      shadowCam.bottom = -squaredBBWidth / 2;\r\n      shadowCam.updateProjectionMatrix();\r\n    }\r\n  }\r\n  getBreaks() {\r\n    const camera = this.camera;\r\n    const far = Math.min(camera.far, this.maxFar);\r\n    this.breaks.length = 0;\r\n    switch (this.mode) {\r\n      case \"uniform\":\r\n        uniformSplit(this.cascades, camera.near, far, this.breaks);\r\n        break;\r\n      case \"logarithmic\":\r\n        logarithmicSplit(this.cascades, camera.near, far, this.breaks);\r\n        break;\r\n      case \"practical\":\r\n        practicalSplit(this.cascades, camera.near, far, 0.5, this.breaks);\r\n        break;\r\n      case \"custom\":\r\n        if (this.customSplitsCallback === void 0)\r\n          console.error(\"CSM: Custom split scheme callback not defined.\");\r\n        this.customSplitsCallback(this.cascades, camera.near, far, this.breaks);\r\n        break;\r\n    }\r\n    function uniformSplit(amount, near, far2, target) {\r\n      for (let i = 1; i < amount; i++) {\r\n        target.push((near + (far2 - near) * i / amount) / far2);\r\n      }\r\n      target.push(1);\r\n    }\r\n    function logarithmicSplit(amount, near, far2, target) {\r\n      for (let i = 1; i < amount; i++) {\r\n        target.push(near * (far2 / near) ** (i / amount) / far2);\r\n      }\r\n      target.push(1);\r\n    }\r\n    function practicalSplit(amount, near, far2, lambda, target) {\r\n      _uniformArray.length = 0;\r\n      _logArray.length = 0;\r\n      logarithmicSplit(amount, near, far2, _logArray);\r\n      uniformSplit(amount, near, far2, _uniformArray);\r\n      for (let i = 1; i < amount; i++) {\r\n        target.push(MathUtils.lerp(_uniformArray[i - 1], _logArray[i - 1], lambda));\r\n      }\r\n      target.push(1);\r\n    }\r\n  }\r\n  update() {\r\n    const camera = this.camera;\r\n    const frustums = this.frustums;\r\n    for (let i = 0; i < frustums.length; i++) {\r\n      const light = this.lights[i];\r\n      const shadowCam = light.shadow.camera;\r\n      const texelWidth = (shadowCam.right - shadowCam.left) / this.shadowMapSize;\r\n      const texelHeight = (shadowCam.top - shadowCam.bottom) / this.shadowMapSize;\r\n      light.shadow.camera.updateMatrixWorld(true);\r\n      _cameraToLightMatrix.multiplyMatrices(light.shadow.camera.matrixWorldInverse, camera.matrixWorld);\r\n      frustums[i].toSpace(_cameraToLightMatrix, _lightSpaceFrustum);\r\n      const nearVerts = _lightSpaceFrustum.vertices.near;\r\n      const farVerts = _lightSpaceFrustum.vertices.far;\r\n      _bbox.makeEmpty();\r\n      for (let j = 0; j < 4; j++) {\r\n        _bbox.expandByPoint(nearVerts[j]);\r\n        _bbox.expandByPoint(farVerts[j]);\r\n      }\r\n      _bbox.getCenter(_center);\r\n      _center.z = _bbox.max.z + this.lightMargin;\r\n      _center.x = Math.floor(_center.x / texelWidth) * texelWidth;\r\n      _center.y = Math.floor(_center.y / texelHeight) * texelHeight;\r\n      _center.applyMatrix4(light.shadow.camera.matrixWorld);\r\n      light.position.copy(_center);\r\n      light.target.position.copy(_center);\r\n      light.target.position.x += this.lightDirection.x;\r\n      light.target.position.y += this.lightDirection.y;\r\n      light.target.position.z += this.lightDirection.z;\r\n    }\r\n  }\r\n  injectInclude() {\r\n    ShaderChunk.lights_fragment_begin = CSMShader.lights_fragment_begin;\r\n    ShaderChunk.lights_pars_begin = CSMShader.lights_pars_begin;\r\n  }\r\n  setupMaterial(material) {\r\n    material.defines = material.defines || {};\r\n    material.defines.USE_CSM = 1;\r\n    material.defines.CSM_CASCADES = this.cascades;\r\n    if (this.fade) {\r\n      material.defines.CSM_FADE = \"\";\r\n    }\r\n    const breaksVec2 = [];\r\n    const scope = this;\r\n    const shaders = this.shaders;\r\n    material.onBeforeCompile = function(shader) {\r\n      const far = Math.min(scope.camera.far, scope.maxFar);\r\n      scope.getExtendedBreaks(breaksVec2);\r\n      shader.uniforms.CSM_cascades = { value: breaksVec2 };\r\n      shader.uniforms.cameraNear = { value: scope.camera.near };\r\n      shader.uniforms.shadowFar = { value: far };\r\n      shaders.set(material, shader);\r\n    };\r\n    shaders.set(material, null);\r\n  }\r\n  updateUniforms() {\r\n    const far = Math.min(this.camera.far, this.maxFar);\r\n    const shaders = this.shaders;\r\n    shaders.forEach(function(shader, material) {\r\n      if (shader !== null) {\r\n        const uniforms = shader.uniforms;\r\n        this.getExtendedBreaks(uniforms.CSM_cascades.value);\r\n        uniforms.cameraNear.value = this.camera.near;\r\n        uniforms.shadowFar.value = far;\r\n      }\r\n      if (!this.fade && \"CSM_FADE\" in material.defines) {\r\n        delete material.defines.CSM_FADE;\r\n        material.needsUpdate = true;\r\n      } else if (this.fade && !(\"CSM_FADE\" in material.defines)) {\r\n        material.defines.CSM_FADE = \"\";\r\n        material.needsUpdate = true;\r\n      }\r\n    }, this);\r\n  }\r\n  getExtendedBreaks(target) {\r\n    while (target.length < this.breaks.length) {\r\n      target.push(new Vector2());\r\n    }\r\n    target.length = this.breaks.length;\r\n    for (let i = 0; i < this.cascades; i++) {\r\n      const amount = this.breaks[i];\r\n      const prev = this.breaks[i - 1] || 0;\r\n      target[i].x = prev;\r\n      target[i].y = amount;\r\n    }\r\n  }\r\n  updateFrustums() {\r\n    this.getBreaks();\r\n    this.initCascades();\r\n    this.updateShadowBounds();\r\n    this.updateUniforms();\r\n  }\r\n  remove() {\r\n    for (let i = 0; i < this.lights.length; i++) {\r\n      this.parent.remove(this.lights[i]);\r\n    }\r\n  }\r\n  dispose() {\r\n    const shaders = this.shaders;\r\n    shaders.forEach(function(shader, material) {\r\n      delete material.onBeforeCompile;\r\n      delete material.defines.USE_CSM;\r\n      delete material.defines.CSM_CASCADES;\r\n      delete material.defines.CSM_FADE;\r\n      if (shader !== null) {\r\n        delete shader.uniforms.CSM_cascades;\r\n        delete shader.uniforms.cameraNear;\r\n        delete shader.uniforms.shadowFar;\r\n      }\r\n      material.needsUpdate = true;\r\n    });\r\n    shaders.clear();\r\n  }\r\n}\r\nexport {\r\n  CSM\r\n};\r\n", "const ACESFilmicToneMappingShader = {\r\n  uniforms: {\r\n    tDiffuse: { value: null },\r\n    exposure: { value: 1 }\r\n  },\r\n  vertexShader: [\r\n    \"varying vec2 vUv;\",\r\n    \"void main() {\",\r\n    \"\tvUv = uv;\",\r\n    \"\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\r\n    \"}\"\r\n  ].join(\"\\n\"),\r\n  fragmentShader: [\r\n    \"#define saturate(a) clamp( a, 0.0, 1.0 )\",\r\n    \"uniform sampler2D tDiffuse;\",\r\n    \"uniform float exposure;\",\r\n    \"varying vec2 vUv;\",\r\n    \"vec3 RRTAndODTFit( vec3 v ) {\",\r\n    \"\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\",\r\n    \"\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\",\r\n    \"\treturn a / b;\",\r\n    \"}\",\r\n    \"vec3 ACESFilmicToneMapping( vec3 color ) {\",\r\n    // sRGB => XYZ => D65_2_D60 => AP1 => RRT_SAT\r\n    \"\tconst mat3 ACESInputMat = mat3(\",\r\n    \"\t\tvec3( 0.59719, 0.07600, 0.02840 ),\",\r\n    // transposed from source\r\n    \"\t\tvec3( 0.35458, 0.90834, 0.13383 ),\",\r\n    \"\t\tvec3( 0.04823, 0.01566, 0.83777 )\",\r\n    \"\t);\",\r\n    // ODT_SAT => XYZ => D60_2_D65 => sRGB\r\n    \"\tconst mat3 ACESOutputMat = mat3(\",\r\n    \"\t\tvec3(  1.60475, -0.10208, -0.00327 ),\",\r\n    // transposed from source\r\n    \"\t\tvec3( -0.53108,  1.10813, -0.07276 ),\",\r\n    \"\t\tvec3( -0.07367, -0.00605,  1.07602 )\",\r\n    \"\t);\",\r\n    \"\tcolor = ACESInputMat * color;\",\r\n    // Apply RRT and ODT\r\n    \"\tcolor = RRTAndODTFit( color );\",\r\n    \"\tcolor = ACESOutputMat * color;\",\r\n    // Clamp to [0, 1]\r\n    \"\treturn saturate( color );\",\r\n    \"}\",\r\n    \"void main() {\",\r\n    \"\tvec4 tex = texture2D( tDiffuse, vUv );\",\r\n    \"\ttex.rgb *= exposure / 0.6;\",\r\n    // pre-exposed, outside of the tone mapping function\r\n    \"\tgl_FragColor = vec4( ACESFilmicToneMapping( tex.rgb ), tex.a );\",\r\n    \"}\"\r\n  ].join(\"\\n\")\r\n};\r\nexport {\r\n  ACESFilmicToneMappingShader\r\n};\r\n", "const BasicShader = {\r\n  uniforms: {},\r\n  vertexShader: [\r\n    \"void main() {\",\r\n    \"\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\r\n    \"}\"\r\n  ].join(\"\\n\"),\r\n  fragmentShader: [\"void main() {\", \"\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 0.5 );\", \"}\"].join(\"\\n\")\r\n};\r\nexport {\r\n  BasicShader\r\n};\r\n", "const BleachBypassShader = {\r\n  uniforms: {\r\n    tDiffuse: { value: null },\r\n    opacity: { value: 1 }\r\n  },\r\n  vertexShader: [\r\n    \"varying vec2 vUv;\",\r\n    \"void main() {\",\r\n    \"\tvUv = uv;\",\r\n    \"\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\r\n    \"}\"\r\n  ].join(\"\\n\"),\r\n  fragmentShader: [\r\n    \"uniform float opacity;\",\r\n    \"uniform sampler2D tDiffuse;\",\r\n    \"varying vec2 vUv;\",\r\n    \"void main() {\",\r\n    \"\tvec4 base = texture2D( tDiffuse, vUv );\",\r\n    \"\tvec3 lumCoeff = vec3( 0.25, 0.65, 0.1 );\",\r\n    \"\tfloat lum = dot( lumCoeff, base.rgb );\",\r\n    \"\tvec3 blend = vec3( lum );\",\r\n    \"\tfloat L = min( 1.0, max( 0.0, 10.0 * ( lum - 0.45 ) ) );\",\r\n    \"\tvec3 result1 = 2.0 * base.rgb * blend;\",\r\n    \"\tvec3 result2 = 1.0 - 2.0 * ( 1.0 - blend ) * ( 1.0 - base.rgb );\",\r\n    \"\tvec3 newColor = mix( result1, result2, L );\",\r\n    \"\tfloat A2 = opacity * base.a;\",\r\n    \"\tvec3 mixRGB = A2 * newColor.rgb;\",\r\n    \"\tmixRGB += ( ( 1.0 - A2 ) * base.rgb );\",\r\n    \"\tgl_FragColor = vec4( mixRGB, base.a );\",\r\n    \"}\"\r\n  ].join(\"\\n\")\r\n};\r\nexport {\r\n  BleachBypassShader\r\n};\r\n", "const BlendShader = {\r\n  uniforms: {\r\n    tDiffuse1: { value: null },\r\n    tDiffuse2: { value: null },\r\n    mixRatio: { value: 0.5 },\r\n    opacity: { value: 1 }\r\n  },\r\n  vertexShader: [\r\n    \"varying vec2 vUv;\",\r\n    \"void main() {\",\r\n    \"\tvUv = uv;\",\r\n    \"\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\r\n    \"}\"\r\n  ].join(\"\\n\"),\r\n  fragmentShader: [\r\n    \"uniform float opacity;\",\r\n    \"uniform float mixRatio;\",\r\n    \"uniform sampler2D tDiffuse1;\",\r\n    \"uniform sampler2D tDiffuse2;\",\r\n    \"varying vec2 vUv;\",\r\n    \"void main() {\",\r\n    \"\tvec4 texel1 = texture2D( tDiffuse1, vUv );\",\r\n    \"\tvec4 texel2 = texture2D( tDiffuse2, vUv );\",\r\n    \"\tgl_FragColor = opacity * mix( texel1, texel2, mixRatio );\",\r\n    \"}\"\r\n  ].join(\"\\n\")\r\n};\r\nexport {\r\n  BlendShader\r\n};\r\n", "const BrightnessContrastShader = {\r\n  uniforms: {\r\n    tDiffuse: { value: null },\r\n    brightness: { value: 0 },\r\n    contrast: { value: 0 }\r\n  },\r\n  vertexShader: [\r\n    \"varying vec2 vUv;\",\r\n    \"void main() {\",\r\n    \"\tvUv = uv;\",\r\n    \"\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\r\n    \"}\"\r\n  ].join(\"\\n\"),\r\n  fragmentShader: [\r\n    \"uniform sampler2D tDiffuse;\",\r\n    \"uniform float brightness;\",\r\n    \"uniform float contrast;\",\r\n    \"varying vec2 vUv;\",\r\n    \"void main() {\",\r\n    \"\tgl_FragColor = texture2D( tDiffuse, vUv );\",\r\n    \"\tgl_FragColor.rgb += brightness;\",\r\n    \"\tif (contrast > 0.0) {\",\r\n    \"\t\tgl_FragColor.rgb = (gl_FragColor.rgb - 0.5) / (1.0 - contrast) + 0.5;\",\r\n    \"\t} else {\",\r\n    \"\t\tgl_FragColor.rgb = (gl_FragColor.rgb - 0.5) * (1.0 + contrast) + 0.5;\",\r\n    \"\t}\",\r\n    \"}\"\r\n  ].join(\"\\n\")\r\n};\r\nexport {\r\n  BrightnessContrastShader\r\n};\r\n", "import { Vector3 } from \"three\";\r\nconst ColorCorrectionShader = {\r\n  uniforms: {\r\n    tDiffuse: { value: null },\r\n    powRGB: { value: /* @__PURE__ */ new Vector3(2, 2, 2) },\r\n    mulRGB: { value: /* @__PURE__ */ new Vector3(1, 1, 1) },\r\n    addRGB: { value: /* @__PURE__ */ new Vector3(0, 0, 0) }\r\n  },\r\n  vertexShader: [\r\n    \"varying vec2 vUv;\",\r\n    \"void main() {\",\r\n    \"\tvUv = uv;\",\r\n    \"\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\r\n    \"}\"\r\n  ].join(\"\\n\"),\r\n  fragmentShader: [\r\n    \"uniform sampler2D tDiffuse;\",\r\n    \"uniform vec3 powRGB;\",\r\n    \"uniform vec3 mulRGB;\",\r\n    \"uniform vec3 addRGB;\",\r\n    \"varying vec2 vUv;\",\r\n    \"void main() {\",\r\n    \"\tgl_FragColor = texture2D( tDiffuse, vUv );\",\r\n    \"\tgl_FragColor.rgb = mulRGB * pow( ( gl_FragColor.rgb + addRGB ), powRGB );\",\r\n    \"}\"\r\n  ].join(\"\\n\")\r\n};\r\nexport {\r\n  ColorCorrectionShader\r\n};\r\n", "import { Color } from \"three\";\r\nconst ColorifyShader = {\r\n  uniforms: {\r\n    tDiffuse: { value: null },\r\n    color: { value: /* @__PURE__ */ new Color(16777215) }\r\n  },\r\n  vertexShader: [\r\n    \"varying vec2 vUv;\",\r\n    \"void main() {\",\r\n    \"\tvUv = uv;\",\r\n    \"\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\r\n    \"}\"\r\n  ].join(\"\\n\"),\r\n  fragmentShader: [\r\n    \"uniform vec3 color;\",\r\n    \"uniform sampler2D tDiffuse;\",\r\n    \"varying vec2 vUv;\",\r\n    \"void main() {\",\r\n    \"\tvec4 texel = texture2D( tDiffuse, vUv );\",\r\n    \"\tvec3 luma = vec3( 0.299, 0.587, 0.114 );\",\r\n    \"\tfloat v = dot( texel.xyz, luma );\",\r\n    \"\tgl_FragColor = vec4( v * color, texel.w );\",\r\n    \"}\"\r\n  ].join(\"\\n\")\r\n};\r\nexport {\r\n  ColorifyShader\r\n};\r\n", "const DOFMipMapShader = {\r\n  uniforms: {\r\n    tColor: { value: null },\r\n    tDepth: { value: null },\r\n    focus: { value: 1 },\r\n    maxblur: { value: 1 }\r\n  },\r\n  vertexShader: [\r\n    \"varying vec2 vUv;\",\r\n    \"void main() {\",\r\n    \"\tvUv = uv;\",\r\n    \"\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\r\n    \"}\"\r\n  ].join(\"\\n\"),\r\n  fragmentShader: [\r\n    \"uniform float focus;\",\r\n    \"uniform float maxblur;\",\r\n    \"uniform sampler2D tColor;\",\r\n    \"uniform sampler2D tDepth;\",\r\n    \"varying vec2 vUv;\",\r\n    \"void main() {\",\r\n    \"\tvec4 depth = texture2D( tDepth, vUv );\",\r\n    \"\tfloat factor = depth.x - focus;\",\r\n    \"\tvec4 col = texture2D( tColor, vUv, 2.0 * maxblur * abs( focus - depth.x ) );\",\r\n    \"\tgl_FragColor = col;\",\r\n    \"\tgl_FragColor.a = 1.0;\",\r\n    \"}\"\r\n  ].join(\"\\n\")\r\n};\r\nexport {\r\n  DOFMipMapShader\r\n};\r\n", "import { Vector2 } from \"three\";\r\nconst FXAAShader = {\r\n  uniforms: {\r\n    tDiffuse: { value: null },\r\n    resolution: { value: /* @__PURE__ */ new Vector2(1 / 1024, 1 / 512) }\r\n  },\r\n  vertexShader: [\r\n    \"varying vec2 vUv;\",\r\n    \"void main() {\",\r\n    \"\tvUv = uv;\",\r\n    \"\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\r\n    \"}\"\r\n  ].join(\"\\n\"),\r\n  fragmentShader: [\r\n    \"precision highp float;\",\r\n    \"\",\r\n    \"uniform sampler2D tDiffuse;\",\r\n    \"\",\r\n    \"uniform vec2 resolution;\",\r\n    \"\",\r\n    \"varying vec2 vUv;\",\r\n    \"\",\r\n    \"// FXAA 3.11 implementation by NVIDIA, ported to WebGL by Agost Biro (biro@archilogic.com)\",\r\n    \"\",\r\n    \"//----------------------------------------------------------------------------------\",\r\n    \"// File:        es3-keplerFXAAassetsshaders/FXAA_DefaultES.frag\",\r\n    \"// SDK Version: v3.00\",\r\n    \"// Email:       gameworks@nvidia.com\",\r\n    \"// Site:        http://developer.nvidia.com/\",\r\n    \"//\",\r\n    \"// Copyright (c) 2014-2015, NVIDIA CORPORATION. All rights reserved.\",\r\n    \"//\",\r\n    \"// Redistribution and use in source and binary forms, with or without\",\r\n    \"// modification, are permitted provided that the following conditions\",\r\n    \"// are met:\",\r\n    \"//  * Redistributions of source code must retain the above copyright\",\r\n    \"//    notice, this list of conditions and the following disclaimer.\",\r\n    \"//  * Redistributions in binary form must reproduce the above copyright\",\r\n    \"//    notice, this list of conditions and the following disclaimer in the\",\r\n    \"//    documentation and/or other materials provided with the distribution.\",\r\n    \"//  * Neither the name of NVIDIA CORPORATION nor the names of its\",\r\n    \"//    contributors may be used to endorse or promote products derived\",\r\n    \"//    from this software without specific prior written permission.\",\r\n    \"//\",\r\n    \"// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS ``AS IS'' AND ANY\",\r\n    \"// EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\",\r\n    \"// IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR\",\r\n    \"// PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR\",\r\n    \"// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,\",\r\n    \"// EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,\",\r\n    \"// PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\",\r\n    \"// PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY\",\r\n    \"// OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\",\r\n    \"// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\",\r\n    \"// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\",\r\n    \"//\",\r\n    \"//----------------------------------------------------------------------------------\",\r\n    \"\",\r\n    \"#define FXAA_PC 1\",\r\n    \"#define FXAA_GLSL_100 1\",\r\n    \"#define FXAA_QUALITY_PRESET 12\",\r\n    \"\",\r\n    \"#define FXAA_GREEN_AS_LUMA 1\",\r\n    \"\",\r\n    \"/*--------------------------------------------------------------------------*/\",\r\n    \"#ifndef FXAA_PC_CONSOLE\",\r\n    \"    //\",\r\n    \"    // The console algorithm for PC is included\",\r\n    \"    // for developers targeting really low spec machines.\",\r\n    \"    // Likely better to just run FXAA_PC, and use a really low preset.\",\r\n    \"    //\",\r\n    \"    #define FXAA_PC_CONSOLE 0\",\r\n    \"#endif\",\r\n    \"/*--------------------------------------------------------------------------*/\",\r\n    \"#ifndef FXAA_GLSL_120\",\r\n    \"    #define FXAA_GLSL_120 0\",\r\n    \"#endif\",\r\n    \"/*--------------------------------------------------------------------------*/\",\r\n    \"#ifndef FXAA_GLSL_130\",\r\n    \"    #define FXAA_GLSL_130 0\",\r\n    \"#endif\",\r\n    \"/*--------------------------------------------------------------------------*/\",\r\n    \"#ifndef FXAA_HLSL_3\",\r\n    \"    #define FXAA_HLSL_3 0\",\r\n    \"#endif\",\r\n    \"/*--------------------------------------------------------------------------*/\",\r\n    \"#ifndef FXAA_HLSL_4\",\r\n    \"    #define FXAA_HLSL_4 0\",\r\n    \"#endif\",\r\n    \"/*--------------------------------------------------------------------------*/\",\r\n    \"#ifndef FXAA_HLSL_5\",\r\n    \"    #define FXAA_HLSL_5 0\",\r\n    \"#endif\",\r\n    \"/*==========================================================================*/\",\r\n    \"#ifndef FXAA_GREEN_AS_LUMA\",\r\n    \"    //\",\r\n    \"    // For those using non-linear color,\",\r\n    \"    // and either not able to get luma in alpha, or not wanting to,\",\r\n    \"    // this enables FXAA to run using green as a proxy for luma.\",\r\n    \"    // So with this enabled, no need to pack luma in alpha.\",\r\n    \"    //\",\r\n    \"    // This will turn off AA on anything which lacks some amount of green.\",\r\n    \"    // Pure red and blue or combination of only R and B, will get no AA.\",\r\n    \"    //\",\r\n    \"    // Might want to lower the settings for both,\",\r\n    \"    //    fxaaConsoleEdgeThresholdMin\",\r\n    \"    //    fxaaQualityEdgeThresholdMin\",\r\n    \"    // In order to insure AA does not get turned off on colors\",\r\n    \"    // which contain a minor amount of green.\",\r\n    \"    //\",\r\n    \"    // 1 = On.\",\r\n    \"    // 0 = Off.\",\r\n    \"    //\",\r\n    \"    #define FXAA_GREEN_AS_LUMA 0\",\r\n    \"#endif\",\r\n    \"/*--------------------------------------------------------------------------*/\",\r\n    \"#ifndef FXAA_EARLY_EXIT\",\r\n    \"    //\",\r\n    \"    // Controls algorithm's early exit path.\",\r\n    \"    // On PS3 turning this ON adds 2 cycles to the shader.\",\r\n    \"    // On 360 turning this OFF adds 10ths of a millisecond to the shader.\",\r\n    \"    // Turning this off on console will result in a more blurry image.\",\r\n    \"    // So this defaults to on.\",\r\n    \"    //\",\r\n    \"    // 1 = On.\",\r\n    \"    // 0 = Off.\",\r\n    \"    //\",\r\n    \"    #define FXAA_EARLY_EXIT 1\",\r\n    \"#endif\",\r\n    \"/*--------------------------------------------------------------------------*/\",\r\n    \"#ifndef FXAA_DISCARD\",\r\n    \"    //\",\r\n    \"    // Only valid for PC OpenGL currently.\",\r\n    \"    // Probably will not work when FXAA_GREEN_AS_LUMA = 1.\",\r\n    \"    //\",\r\n    \"    // 1 = Use discard on pixels which don't need AA.\",\r\n    \"    //     For APIs which enable concurrent TEX+ROP from same surface.\",\r\n    \"    // 0 = Return unchanged color on pixels which don't need AA.\",\r\n    \"    //\",\r\n    \"    #define FXAA_DISCARD 0\",\r\n    \"#endif\",\r\n    \"/*--------------------------------------------------------------------------*/\",\r\n    \"#ifndef FXAA_FAST_PIXEL_OFFSET\",\r\n    \"    //\",\r\n    \"    // Used for GLSL 120 only.\",\r\n    \"    //\",\r\n    \"    // 1 = GL API supports fast pixel offsets\",\r\n    \"    // 0 = do not use fast pixel offsets\",\r\n    \"    //\",\r\n    \"    #ifdef GL_EXT_gpu_shader4\",\r\n    \"        #define FXAA_FAST_PIXEL_OFFSET 1\",\r\n    \"    #endif\",\r\n    \"    #ifdef GL_NV_gpu_shader5\",\r\n    \"        #define FXAA_FAST_PIXEL_OFFSET 1\",\r\n    \"    #endif\",\r\n    \"    #ifdef GL_ARB_gpu_shader5\",\r\n    \"        #define FXAA_FAST_PIXEL_OFFSET 1\",\r\n    \"    #endif\",\r\n    \"    #ifndef FXAA_FAST_PIXEL_OFFSET\",\r\n    \"        #define FXAA_FAST_PIXEL_OFFSET 0\",\r\n    \"    #endif\",\r\n    \"#endif\",\r\n    \"/*--------------------------------------------------------------------------*/\",\r\n    \"#ifndef FXAA_GATHER4_ALPHA\",\r\n    \"    //\",\r\n    \"    // 1 = API supports gather4 on alpha channel.\",\r\n    \"    // 0 = API does not support gather4 on alpha channel.\",\r\n    \"    //\",\r\n    \"    #if (FXAA_HLSL_5 == 1)\",\r\n    \"        #define FXAA_GATHER4_ALPHA 1\",\r\n    \"    #endif\",\r\n    \"    #ifdef GL_ARB_gpu_shader5\",\r\n    \"        #define FXAA_GATHER4_ALPHA 1\",\r\n    \"    #endif\",\r\n    \"    #ifdef GL_NV_gpu_shader5\",\r\n    \"        #define FXAA_GATHER4_ALPHA 1\",\r\n    \"    #endif\",\r\n    \"    #ifndef FXAA_GATHER4_ALPHA\",\r\n    \"        #define FXAA_GATHER4_ALPHA 0\",\r\n    \"    #endif\",\r\n    \"#endif\",\r\n    \"\",\r\n    \"\",\r\n    \"/*============================================================================\",\r\n    \"                        FXAA QUALITY - TUNING KNOBS\",\r\n    \"------------------------------------------------------------------------------\",\r\n    \"NOTE the other tuning knobs are now in the shader function inputs!\",\r\n    \"============================================================================*/\",\r\n    \"#ifndef FXAA_QUALITY_PRESET\",\r\n    \"    //\",\r\n    \"    // Choose the quality preset.\",\r\n    \"    // This needs to be compiled into the shader as it effects code.\",\r\n    \"    // Best option to include multiple presets is to\",\r\n    \"    // in each shader define the preset, then include this file.\",\r\n    \"    //\",\r\n    \"    // OPTIONS\",\r\n    \"    // -----------------------------------------------------------------------\",\r\n    \"    // 10 to 15 - default medium dither (10=fastest, 15=highest quality)\",\r\n    \"    // 20 to 29 - less dither, more expensive (20=fastest, 29=highest quality)\",\r\n    \"    // 39       - no dither, very expensive\",\r\n    \"    //\",\r\n    \"    // NOTES\",\r\n    \"    // -----------------------------------------------------------------------\",\r\n    \"    // 12 = slightly faster then FXAA 3.9 and higher edge quality (default)\",\r\n    \"    // 13 = about same speed as FXAA 3.9 and better than 12\",\r\n    \"    // 23 = closest to FXAA 3.9 visually and performance wise\",\r\n    \"    //  _ = the lowest digit is directly related to performance\",\r\n    \"    // _  = the highest digit is directly related to style\",\r\n    \"    //\",\r\n    \"    #define FXAA_QUALITY_PRESET 12\",\r\n    \"#endif\",\r\n    \"\",\r\n    \"\",\r\n    \"/*============================================================================\",\r\n    \"\",\r\n    \"                           FXAA QUALITY - PRESETS\",\r\n    \"\",\r\n    \"============================================================================*/\",\r\n    \"\",\r\n    \"/*============================================================================\",\r\n    \"                     FXAA QUALITY - MEDIUM DITHER PRESETS\",\r\n    \"============================================================================*/\",\r\n    \"#if (FXAA_QUALITY_PRESET == 10)\",\r\n    \"    #define FXAA_QUALITY_PS 3\",\r\n    \"    #define FXAA_QUALITY_P0 1.5\",\r\n    \"    #define FXAA_QUALITY_P1 3.0\",\r\n    \"    #define FXAA_QUALITY_P2 12.0\",\r\n    \"#endif\",\r\n    \"/*--------------------------------------------------------------------------*/\",\r\n    \"#if (FXAA_QUALITY_PRESET == 11)\",\r\n    \"    #define FXAA_QUALITY_PS 4\",\r\n    \"    #define FXAA_QUALITY_P0 1.0\",\r\n    \"    #define FXAA_QUALITY_P1 1.5\",\r\n    \"    #define FXAA_QUALITY_P2 3.0\",\r\n    \"    #define FXAA_QUALITY_P3 12.0\",\r\n    \"#endif\",\r\n    \"/*--------------------------------------------------------------------------*/\",\r\n    \"#if (FXAA_QUALITY_PRESET == 12)\",\r\n    \"    #define FXAA_QUALITY_PS 5\",\r\n    \"    #define FXAA_QUALITY_P0 1.0\",\r\n    \"    #define FXAA_QUALITY_P1 1.5\",\r\n    \"    #define FXAA_QUALITY_P2 2.0\",\r\n    \"    #define FXAA_QUALITY_P3 4.0\",\r\n    \"    #define FXAA_QUALITY_P4 12.0\",\r\n    \"#endif\",\r\n    \"/*--------------------------------------------------------------------------*/\",\r\n    \"#if (FXAA_QUALITY_PRESET == 13)\",\r\n    \"    #define FXAA_QUALITY_PS 6\",\r\n    \"    #define FXAA_QUALITY_P0 1.0\",\r\n    \"    #define FXAA_QUALITY_P1 1.5\",\r\n    \"    #define FXAA_QUALITY_P2 2.0\",\r\n    \"    #define FXAA_QUALITY_P3 2.0\",\r\n    \"    #define FXAA_QUALITY_P4 4.0\",\r\n    \"    #define FXAA_QUALITY_P5 12.0\",\r\n    \"#endif\",\r\n    \"/*--------------------------------------------------------------------------*/\",\r\n    \"#if (FXAA_QUALITY_PRESET == 14)\",\r\n    \"    #define FXAA_QUALITY_PS 7\",\r\n    \"    #define FXAA_QUALITY_P0 1.0\",\r\n    \"    #define FXAA_QUALITY_P1 1.5\",\r\n    \"    #define FXAA_QUALITY_P2 2.0\",\r\n    \"    #define FXAA_QUALITY_P3 2.0\",\r\n    \"    #define FXAA_QUALITY_P4 2.0\",\r\n    \"    #define FXAA_QUALITY_P5 4.0\",\r\n    \"    #define FXAA_QUALITY_P6 12.0\",\r\n    \"#endif\",\r\n    \"/*--------------------------------------------------------------------------*/\",\r\n    \"#if (FXAA_QUALITY_PRESET == 15)\",\r\n    \"    #define FXAA_QUALITY_PS 8\",\r\n    \"    #define FXAA_QUALITY_P0 1.0\",\r\n    \"    #define FXAA_QUALITY_P1 1.5\",\r\n    \"    #define FXAA_QUALITY_P2 2.0\",\r\n    \"    #define FXAA_QUALITY_P3 2.0\",\r\n    \"    #define FXAA_QUALITY_P4 2.0\",\r\n    \"    #define FXAA_QUALITY_P5 2.0\",\r\n    \"    #define FXAA_QUALITY_P6 4.0\",\r\n    \"    #define FXAA_QUALITY_P7 12.0\",\r\n    \"#endif\",\r\n    \"\",\r\n    \"/*============================================================================\",\r\n    \"                     FXAA QUALITY - LOW DITHER PRESETS\",\r\n    \"============================================================================*/\",\r\n    \"#if (FXAA_QUALITY_PRESET == 20)\",\r\n    \"    #define FXAA_QUALITY_PS 3\",\r\n    \"    #define FXAA_QUALITY_P0 1.5\",\r\n    \"    #define FXAA_QUALITY_P1 2.0\",\r\n    \"    #define FXAA_QUALITY_P2 8.0\",\r\n    \"#endif\",\r\n    \"/*--------------------------------------------------------------------------*/\",\r\n    \"#if (FXAA_QUALITY_PRESET == 21)\",\r\n    \"    #define FXAA_QUALITY_PS 4\",\r\n    \"    #define FXAA_QUALITY_P0 1.0\",\r\n    \"    #define FXAA_QUALITY_P1 1.5\",\r\n    \"    #define FXAA_QUALITY_P2 2.0\",\r\n    \"    #define FXAA_QUALITY_P3 8.0\",\r\n    \"#endif\",\r\n    \"/*--------------------------------------------------------------------------*/\",\r\n    \"#if (FXAA_QUALITY_PRESET == 22)\",\r\n    \"    #define FXAA_QUALITY_PS 5\",\r\n    \"    #define FXAA_QUALITY_P0 1.0\",\r\n    \"    #define FXAA_QUALITY_P1 1.5\",\r\n    \"    #define FXAA_QUALITY_P2 2.0\",\r\n    \"    #define FXAA_QUALITY_P3 2.0\",\r\n    \"    #define FXAA_QUALITY_P4 8.0\",\r\n    \"#endif\",\r\n    \"/*--------------------------------------------------------------------------*/\",\r\n    \"#if (FXAA_QUALITY_PRESET == 23)\",\r\n    \"    #define FXAA_QUALITY_PS 6\",\r\n    \"    #define FXAA_QUALITY_P0 1.0\",\r\n    \"    #define FXAA_QUALITY_P1 1.5\",\r\n    \"    #define FXAA_QUALITY_P2 2.0\",\r\n    \"    #define FXAA_QUALITY_P3 2.0\",\r\n    \"    #define FXAA_QUALITY_P4 2.0\",\r\n    \"    #define FXAA_QUALITY_P5 8.0\",\r\n    \"#endif\",\r\n    \"/*--------------------------------------------------------------------------*/\",\r\n    \"#if (FXAA_QUALITY_PRESET == 24)\",\r\n    \"    #define FXAA_QUALITY_PS 7\",\r\n    \"    #define FXAA_QUALITY_P0 1.0\",\r\n    \"    #define FXAA_QUALITY_P1 1.5\",\r\n    \"    #define FXAA_QUALITY_P2 2.0\",\r\n    \"    #define FXAA_QUALITY_P3 2.0\",\r\n    \"    #define FXAA_QUALITY_P4 2.0\",\r\n    \"    #define FXAA_QUALITY_P5 3.0\",\r\n    \"    #define FXAA_QUALITY_P6 8.0\",\r\n    \"#endif\",\r\n    \"/*--------------------------------------------------------------------------*/\",\r\n    \"#if (FXAA_QUALITY_PRESET == 25)\",\r\n    \"    #define FXAA_QUALITY_PS 8\",\r\n    \"    #define FXAA_QUALITY_P0 1.0\",\r\n    \"    #define FXAA_QUALITY_P1 1.5\",\r\n    \"    #define FXAA_QUALITY_P2 2.0\",\r\n    \"    #define FXAA_QUALITY_P3 2.0\",\r\n    \"    #define FXAA_QUALITY_P4 2.0\",\r\n    \"    #define FXAA_QUALITY_P5 2.0\",\r\n    \"    #define FXAA_QUALITY_P6 4.0\",\r\n    \"    #define FXAA_QUALITY_P7 8.0\",\r\n    \"#endif\",\r\n    \"/*--------------------------------------------------------------------------*/\",\r\n    \"#if (FXAA_QUALITY_PRESET == 26)\",\r\n    \"    #define FXAA_QUALITY_PS 9\",\r\n    \"    #define FXAA_QUALITY_P0 1.0\",\r\n    \"    #define FXAA_QUALITY_P1 1.5\",\r\n    \"    #define FXAA_QUALITY_P2 2.0\",\r\n    \"    #define FXAA_QUALITY_P3 2.0\",\r\n    \"    #define FXAA_QUALITY_P4 2.0\",\r\n    \"    #define FXAA_QUALITY_P5 2.0\",\r\n    \"    #define FXAA_QUALITY_P6 2.0\",\r\n    \"    #define FXAA_QUALITY_P7 4.0\",\r\n    \"    #define FXAA_QUALITY_P8 8.0\",\r\n    \"#endif\",\r\n    \"/*--------------------------------------------------------------------------*/\",\r\n    \"#if (FXAA_QUALITY_PRESET == 27)\",\r\n    \"    #define FXAA_QUALITY_PS 10\",\r\n    \"    #define FXAA_QUALITY_P0 1.0\",\r\n    \"    #define FXAA_QUALITY_P1 1.5\",\r\n    \"    #define FXAA_QUALITY_P2 2.0\",\r\n    \"    #define FXAA_QUALITY_P3 2.0\",\r\n    \"    #define FXAA_QUALITY_P4 2.0\",\r\n    \"    #define FXAA_QUALITY_P5 2.0\",\r\n    \"    #define FXAA_QUALITY_P6 2.0\",\r\n    \"    #define FXAA_QUALITY_P7 2.0\",\r\n    \"    #define FXAA_QUALITY_P8 4.0\",\r\n    \"    #define FXAA_QUALITY_P9 8.0\",\r\n    \"#endif\",\r\n    \"/*--------------------------------------------------------------------------*/\",\r\n    \"#if (FXAA_QUALITY_PRESET == 28)\",\r\n    \"    #define FXAA_QUALITY_PS 11\",\r\n    \"    #define FXAA_QUALITY_P0 1.0\",\r\n    \"    #define FXAA_QUALITY_P1 1.5\",\r\n    \"    #define FXAA_QUALITY_P2 2.0\",\r\n    \"    #define FXAA_QUALITY_P3 2.0\",\r\n    \"    #define FXAA_QUALITY_P4 2.0\",\r\n    \"    #define FXAA_QUALITY_P5 2.0\",\r\n    \"    #define FXAA_QUALITY_P6 2.0\",\r\n    \"    #define FXAA_QUALITY_P7 2.0\",\r\n    \"    #define FXAA_QUALITY_P8 2.0\",\r\n    \"    #define FXAA_QUALITY_P9 4.0\",\r\n    \"    #define FXAA_QUALITY_P10 8.0\",\r\n    \"#endif\",\r\n    \"/*--------------------------------------------------------------------------*/\",\r\n    \"#if (FXAA_QUALITY_PRESET == 29)\",\r\n    \"    #define FXAA_QUALITY_PS 12\",\r\n    \"    #define FXAA_QUALITY_P0 1.0\",\r\n    \"    #define FXAA_QUALITY_P1 1.5\",\r\n    \"    #define FXAA_QUALITY_P2 2.0\",\r\n    \"    #define FXAA_QUALITY_P3 2.0\",\r\n    \"    #define FXAA_QUALITY_P4 2.0\",\r\n    \"    #define FXAA_QUALITY_P5 2.0\",\r\n    \"    #define FXAA_QUALITY_P6 2.0\",\r\n    \"    #define FXAA_QUALITY_P7 2.0\",\r\n    \"    #define FXAA_QUALITY_P8 2.0\",\r\n    \"    #define FXAA_QUALITY_P9 2.0\",\r\n    \"    #define FXAA_QUALITY_P10 4.0\",\r\n    \"    #define FXAA_QUALITY_P11 8.0\",\r\n    \"#endif\",\r\n    \"\",\r\n    \"/*============================================================================\",\r\n    \"                     FXAA QUALITY - EXTREME QUALITY\",\r\n    \"============================================================================*/\",\r\n    \"#if (FXAA_QUALITY_PRESET == 39)\",\r\n    \"    #define FXAA_QUALITY_PS 12\",\r\n    \"    #define FXAA_QUALITY_P0 1.0\",\r\n    \"    #define FXAA_QUALITY_P1 1.0\",\r\n    \"    #define FXAA_QUALITY_P2 1.0\",\r\n    \"    #define FXAA_QUALITY_P3 1.0\",\r\n    \"    #define FXAA_QUALITY_P4 1.0\",\r\n    \"    #define FXAA_QUALITY_P5 1.5\",\r\n    \"    #define FXAA_QUALITY_P6 2.0\",\r\n    \"    #define FXAA_QUALITY_P7 2.0\",\r\n    \"    #define FXAA_QUALITY_P8 2.0\",\r\n    \"    #define FXAA_QUALITY_P9 2.0\",\r\n    \"    #define FXAA_QUALITY_P10 4.0\",\r\n    \"    #define FXAA_QUALITY_P11 8.0\",\r\n    \"#endif\",\r\n    \"\",\r\n    \"\",\r\n    \"\",\r\n    \"/*============================================================================\",\r\n    \"\",\r\n    \"                                API PORTING\",\r\n    \"\",\r\n    \"============================================================================*/\",\r\n    \"#if (FXAA_GLSL_100 == 1) || (FXAA_GLSL_120 == 1) || (FXAA_GLSL_130 == 1)\",\r\n    \"    #define FxaaBool bool\",\r\n    \"    #define FxaaDiscard discard\",\r\n    \"    #define FxaaFloat float\",\r\n    \"    #define FxaaFloat2 vec2\",\r\n    \"    #define FxaaFloat3 vec3\",\r\n    \"    #define FxaaFloat4 vec4\",\r\n    \"    #define FxaaHalf float\",\r\n    \"    #define FxaaHalf2 vec2\",\r\n    \"    #define FxaaHalf3 vec3\",\r\n    \"    #define FxaaHalf4 vec4\",\r\n    \"    #define FxaaInt2 ivec2\",\r\n    \"    #define FxaaSat(x) clamp(x, 0.0, 1.0)\",\r\n    \"    #define FxaaTex sampler2D\",\r\n    \"#else\",\r\n    \"    #define FxaaBool bool\",\r\n    \"    #define FxaaDiscard clip(-1)\",\r\n    \"    #define FxaaFloat float\",\r\n    \"    #define FxaaFloat2 float2\",\r\n    \"    #define FxaaFloat3 float3\",\r\n    \"    #define FxaaFloat4 float4\",\r\n    \"    #define FxaaHalf half\",\r\n    \"    #define FxaaHalf2 half2\",\r\n    \"    #define FxaaHalf3 half3\",\r\n    \"    #define FxaaHalf4 half4\",\r\n    \"    #define FxaaSat(x) saturate(x)\",\r\n    \"#endif\",\r\n    \"/*--------------------------------------------------------------------------*/\",\r\n    \"#if (FXAA_GLSL_100 == 1)\",\r\n    \"  #define FxaaTexTop(t, p) texture2D(t, p, 0.0)\",\r\n    \"  #define FxaaTexOff(t, p, o, r) texture2D(t, p + (o * r), 0.0)\",\r\n    \"#endif\",\r\n    \"/*--------------------------------------------------------------------------*/\",\r\n    \"#if (FXAA_GLSL_120 == 1)\",\r\n    \"    // Requires,\",\r\n    \"    //  #version 120\",\r\n    \"    // And at least,\",\r\n    \"    //  #extension GL_EXT_gpu_shader4 : enable\",\r\n    \"    //  (or set FXAA_FAST_PIXEL_OFFSET 1 to work like DX9)\",\r\n    \"    #define FxaaTexTop(t, p) texture2DLod(t, p, 0.0)\",\r\n    \"    #if (FXAA_FAST_PIXEL_OFFSET == 1)\",\r\n    \"        #define FxaaTexOff(t, p, o, r) texture2DLodOffset(t, p, 0.0, o)\",\r\n    \"    #else\",\r\n    \"        #define FxaaTexOff(t, p, o, r) texture2DLod(t, p + (o * r), 0.0)\",\r\n    \"    #endif\",\r\n    \"    #if (FXAA_GATHER4_ALPHA == 1)\",\r\n    \"        // use #extension GL_ARB_gpu_shader5 : enable\",\r\n    \"        #define FxaaTexAlpha4(t, p) textureGather(t, p, 3)\",\r\n    \"        #define FxaaTexOffAlpha4(t, p, o) textureGatherOffset(t, p, o, 3)\",\r\n    \"        #define FxaaTexGreen4(t, p) textureGather(t, p, 1)\",\r\n    \"        #define FxaaTexOffGreen4(t, p, o) textureGatherOffset(t, p, o, 1)\",\r\n    \"    #endif\",\r\n    \"#endif\",\r\n    \"/*--------------------------------------------------------------------------*/\",\r\n    \"#if (FXAA_GLSL_130 == 1)\",\r\n    '    // Requires \"#version 130\" or better',\r\n    \"    #define FxaaTexTop(t, p) textureLod(t, p, 0.0)\",\r\n    \"    #define FxaaTexOff(t, p, o, r) textureLodOffset(t, p, 0.0, o)\",\r\n    \"    #if (FXAA_GATHER4_ALPHA == 1)\",\r\n    \"        // use #extension GL_ARB_gpu_shader5 : enable\",\r\n    \"        #define FxaaTexAlpha4(t, p) textureGather(t, p, 3)\",\r\n    \"        #define FxaaTexOffAlpha4(t, p, o) textureGatherOffset(t, p, o, 3)\",\r\n    \"        #define FxaaTexGreen4(t, p) textureGather(t, p, 1)\",\r\n    \"        #define FxaaTexOffGreen4(t, p, o) textureGatherOffset(t, p, o, 1)\",\r\n    \"    #endif\",\r\n    \"#endif\",\r\n    \"/*--------------------------------------------------------------------------*/\",\r\n    \"#if (FXAA_HLSL_3 == 1)\",\r\n    \"    #define FxaaInt2 float2\",\r\n    \"    #define FxaaTex sampler2D\",\r\n    \"    #define FxaaTexTop(t, p) tex2Dlod(t, float4(p, 0.0, 0.0))\",\r\n    \"    #define FxaaTexOff(t, p, o, r) tex2Dlod(t, float4(p + (o * r), 0, 0))\",\r\n    \"#endif\",\r\n    \"/*--------------------------------------------------------------------------*/\",\r\n    \"#if (FXAA_HLSL_4 == 1)\",\r\n    \"    #define FxaaInt2 int2\",\r\n    \"    struct FxaaTex { SamplerState smpl; Texture2D tex; };\",\r\n    \"    #define FxaaTexTop(t, p) t.tex.SampleLevel(t.smpl, p, 0.0)\",\r\n    \"    #define FxaaTexOff(t, p, o, r) t.tex.SampleLevel(t.smpl, p, 0.0, o)\",\r\n    \"#endif\",\r\n    \"/*--------------------------------------------------------------------------*/\",\r\n    \"#if (FXAA_HLSL_5 == 1)\",\r\n    \"    #define FxaaInt2 int2\",\r\n    \"    struct FxaaTex { SamplerState smpl; Texture2D tex; };\",\r\n    \"    #define FxaaTexTop(t, p) t.tex.SampleLevel(t.smpl, p, 0.0)\",\r\n    \"    #define FxaaTexOff(t, p, o, r) t.tex.SampleLevel(t.smpl, p, 0.0, o)\",\r\n    \"    #define FxaaTexAlpha4(t, p) t.tex.GatherAlpha(t.smpl, p)\",\r\n    \"    #define FxaaTexOffAlpha4(t, p, o) t.tex.GatherAlpha(t.smpl, p, o)\",\r\n    \"    #define FxaaTexGreen4(t, p) t.tex.GatherGreen(t.smpl, p)\",\r\n    \"    #define FxaaTexOffGreen4(t, p, o) t.tex.GatherGreen(t.smpl, p, o)\",\r\n    \"#endif\",\r\n    \"\",\r\n    \"\",\r\n    \"/*============================================================================\",\r\n    \"                   GREEN AS LUMA OPTION SUPPORT FUNCTION\",\r\n    \"============================================================================*/\",\r\n    \"#if (FXAA_GREEN_AS_LUMA == 0)\",\r\n    \"    FxaaFloat FxaaLuma(FxaaFloat4 rgba) { return rgba.w; }\",\r\n    \"#else\",\r\n    \"    FxaaFloat FxaaLuma(FxaaFloat4 rgba) { return rgba.y; }\",\r\n    \"#endif\",\r\n    \"\",\r\n    \"\",\r\n    \"\",\r\n    \"\",\r\n    \"/*============================================================================\",\r\n    \"\",\r\n    \"                             FXAA3 QUALITY - PC\",\r\n    \"\",\r\n    \"============================================================================*/\",\r\n    \"#if (FXAA_PC == 1)\",\r\n    \"/*--------------------------------------------------------------------------*/\",\r\n    \"FxaaFloat4 FxaaPixelShader(\",\r\n    \"    //\",\r\n    \"    // Use noperspective interpolation here (turn off perspective interpolation).\",\r\n    \"    // {xy} = center of pixel\",\r\n    \"    FxaaFloat2 pos,\",\r\n    \"    //\",\r\n    \"    // Used only for FXAA Console, and not used on the 360 version.\",\r\n    \"    // Use noperspective interpolation here (turn off perspective interpolation).\",\r\n    \"    // {xy_} = upper left of pixel\",\r\n    \"    // {_zw} = lower right of pixel\",\r\n    \"    FxaaFloat4 fxaaConsolePosPos,\",\r\n    \"    //\",\r\n    \"    // Input color texture.\",\r\n    \"    // {rgb_} = color in linear or perceptual color space\",\r\n    \"    // if (FXAA_GREEN_AS_LUMA == 0)\",\r\n    \"    //     {__a} = luma in perceptual color space (not linear)\",\r\n    \"    FxaaTex tex,\",\r\n    \"    //\",\r\n    \"    // Only used on the optimized 360 version of FXAA Console.\",\r\n    '    // For everything but 360, just use the same input here as for \"tex\".',\r\n    \"    // For 360, same texture, just alias with a 2nd sampler.\",\r\n    \"    // This sampler needs to have an exponent bias of -1.\",\r\n    \"    FxaaTex fxaaConsole360TexExpBiasNegOne,\",\r\n    \"    //\",\r\n    \"    // Only used on the optimized 360 version of FXAA Console.\",\r\n    '    // For everything but 360, just use the same input here as for \"tex\".',\r\n    \"    // For 360, same texture, just alias with a 3nd sampler.\",\r\n    \"    // This sampler needs to have an exponent bias of -2.\",\r\n    \"    FxaaTex fxaaConsole360TexExpBiasNegTwo,\",\r\n    \"    //\",\r\n    \"    // Only used on FXAA Quality.\",\r\n    \"    // This must be from a constant/uniform.\",\r\n    \"    // {x_} = 1.0/screenWidthInPixels\",\r\n    \"    // {_y} = 1.0/screenHeightInPixels\",\r\n    \"    FxaaFloat2 fxaaQualityRcpFrame,\",\r\n    \"    //\",\r\n    \"    // Only used on FXAA Console.\",\r\n    \"    // This must be from a constant/uniform.\",\r\n    \"    // This effects sub-pixel AA quality and inversely sharpness.\",\r\n    \"    //   Where N ranges between,\",\r\n    \"    //     N = 0.50 (default)\",\r\n    \"    //     N = 0.33 (sharper)\",\r\n    \"    // {x__} = -N/screenWidthInPixels\",\r\n    \"    // {_y_} = -N/screenHeightInPixels\",\r\n    \"    // {_z_} =  N/screenWidthInPixels\",\r\n    \"    // {__w} =  N/screenHeightInPixels\",\r\n    \"    FxaaFloat4 fxaaConsoleRcpFrameOpt,\",\r\n    \"    //\",\r\n    \"    // Only used on FXAA Console.\",\r\n    \"    // Not used on 360, but used on PS3 and PC.\",\r\n    \"    // This must be from a constant/uniform.\",\r\n    \"    // {x__} = -2.0/screenWidthInPixels\",\r\n    \"    // {_y_} = -2.0/screenHeightInPixels\",\r\n    \"    // {_z_} =  2.0/screenWidthInPixels\",\r\n    \"    // {__w} =  2.0/screenHeightInPixels\",\r\n    \"    FxaaFloat4 fxaaConsoleRcpFrameOpt2,\",\r\n    \"    //\",\r\n    \"    // Only used on FXAA Console.\",\r\n    \"    // Only used on 360 in place of fxaaConsoleRcpFrameOpt2.\",\r\n    \"    // This must be from a constant/uniform.\",\r\n    \"    // {x__} =  8.0/screenWidthInPixels\",\r\n    \"    // {_y_} =  8.0/screenHeightInPixels\",\r\n    \"    // {_z_} = -4.0/screenWidthInPixels\",\r\n    \"    // {__w} = -4.0/screenHeightInPixels\",\r\n    \"    FxaaFloat4 fxaaConsole360RcpFrameOpt2,\",\r\n    \"    //\",\r\n    \"    // Only used on FXAA Quality.\",\r\n    \"    // This used to be the FXAA_QUALITY_SUBPIX define.\",\r\n    \"    // It is here now to allow easier tuning.\",\r\n    \"    // Choose the amount of sub-pixel aliasing removal.\",\r\n    \"    // This can effect sharpness.\",\r\n    \"    //   1.00 - upper limit (softer)\",\r\n    \"    //   0.75 - default amount of filtering\",\r\n    \"    //   0.50 - lower limit (sharper, less sub-pixel aliasing removal)\",\r\n    \"    //   0.25 - almost off\",\r\n    \"    //   0.00 - completely off\",\r\n    \"    FxaaFloat fxaaQualitySubpix,\",\r\n    \"    //\",\r\n    \"    // Only used on FXAA Quality.\",\r\n    \"    // This used to be the FXAA_QUALITY_EDGE_THRESHOLD define.\",\r\n    \"    // It is here now to allow easier tuning.\",\r\n    \"    // The minimum amount of local contrast required to apply algorithm.\",\r\n    \"    //   0.333 - too little (faster)\",\r\n    \"    //   0.250 - low quality\",\r\n    \"    //   0.166 - default\",\r\n    \"    //   0.125 - high quality\",\r\n    \"    //   0.063 - overkill (slower)\",\r\n    \"    FxaaFloat fxaaQualityEdgeThreshold,\",\r\n    \"    //\",\r\n    \"    // Only used on FXAA Quality.\",\r\n    \"    // This used to be the FXAA_QUALITY_EDGE_THRESHOLD_MIN define.\",\r\n    \"    // It is here now to allow easier tuning.\",\r\n    \"    // Trims the algorithm from processing darks.\",\r\n    \"    //   0.0833 - upper limit (default, the start of visible unfiltered edges)\",\r\n    \"    //   0.0625 - high quality (faster)\",\r\n    \"    //   0.0312 - visible limit (slower)\",\r\n    \"    // Special notes when using FXAA_GREEN_AS_LUMA,\",\r\n    \"    //   Likely want to set this to zero.\",\r\n    \"    //   As colors that are mostly not-green\",\r\n    \"    //   will appear very dark in the green channel!\",\r\n    \"    //   Tune by looking at mostly non-green content,\",\r\n    \"    //   then start at zero and increase until aliasing is a problem.\",\r\n    \"    FxaaFloat fxaaQualityEdgeThresholdMin,\",\r\n    \"    //\",\r\n    \"    // Only used on FXAA Console.\",\r\n    \"    // This used to be the FXAA_CONSOLE_EDGE_SHARPNESS define.\",\r\n    \"    // It is here now to allow easier tuning.\",\r\n    \"    // This does not effect PS3, as this needs to be compiled in.\",\r\n    \"    //   Use FXAA_CONSOLE_PS3_EDGE_SHARPNESS for PS3.\",\r\n    \"    //   Due to the PS3 being ALU bound,\",\r\n    \"    //   there are only three safe values here: 2 and 4 and 8.\",\r\n    \"    //   These options use the shaders ability to a free *|/ by 2|4|8.\",\r\n    \"    // For all other platforms can be a non-power of two.\",\r\n    \"    //   8.0 is sharper (default!!!)\",\r\n    \"    //   4.0 is softer\",\r\n    \"    //   2.0 is really soft (good only for vector graphics inputs)\",\r\n    \"    FxaaFloat fxaaConsoleEdgeSharpness,\",\r\n    \"    //\",\r\n    \"    // Only used on FXAA Console.\",\r\n    \"    // This used to be the FXAA_CONSOLE_EDGE_THRESHOLD define.\",\r\n    \"    // It is here now to allow easier tuning.\",\r\n    \"    // This does not effect PS3, as this needs to be compiled in.\",\r\n    \"    //   Use FXAA_CONSOLE_PS3_EDGE_THRESHOLD for PS3.\",\r\n    \"    //   Due to the PS3 being ALU bound,\",\r\n    \"    //   there are only two safe values here: 1/4 and 1/8.\",\r\n    \"    //   These options use the shaders ability to a free *|/ by 2|4|8.\",\r\n    \"    // The console setting has a different mapping than the quality setting.\",\r\n    \"    // Other platforms can use other values.\",\r\n    \"    //   0.125 leaves less aliasing, but is softer (default!!!)\",\r\n    \"    //   0.25 leaves more aliasing, and is sharper\",\r\n    \"    FxaaFloat fxaaConsoleEdgeThreshold,\",\r\n    \"    //\",\r\n    \"    // Only used on FXAA Console.\",\r\n    \"    // This used to be the FXAA_CONSOLE_EDGE_THRESHOLD_MIN define.\",\r\n    \"    // It is here now to allow easier tuning.\",\r\n    \"    // Trims the algorithm from processing darks.\",\r\n    \"    // The console setting has a different mapping than the quality setting.\",\r\n    \"    // This only applies when FXAA_EARLY_EXIT is 1.\",\r\n    \"    // This does not apply to PS3,\",\r\n    \"    // PS3 was simplified to avoid more shader instructions.\",\r\n    \"    //   0.06 - faster but more aliasing in darks\",\r\n    \"    //   0.05 - default\",\r\n    \"    //   0.04 - slower and less aliasing in darks\",\r\n    \"    // Special notes when using FXAA_GREEN_AS_LUMA,\",\r\n    \"    //   Likely want to set this to zero.\",\r\n    \"    //   As colors that are mostly not-green\",\r\n    \"    //   will appear very dark in the green channel!\",\r\n    \"    //   Tune by looking at mostly non-green content,\",\r\n    \"    //   then start at zero and increase until aliasing is a problem.\",\r\n    \"    FxaaFloat fxaaConsoleEdgeThresholdMin,\",\r\n    \"    //\",\r\n    \"    // Extra constants for 360 FXAA Console only.\",\r\n    \"    // Use zeros or anything else for other platforms.\",\r\n    \"    // These must be in physical constant registers and NOT immediates.\",\r\n    \"    // Immediates will result in compiler un-optimizing.\",\r\n    \"    // {xyzw} = float4(1.0, -1.0, 0.25, -0.25)\",\r\n    \"    FxaaFloat4 fxaaConsole360ConstDir\",\r\n    \") {\",\r\n    \"/*--------------------------------------------------------------------------*/\",\r\n    \"    FxaaFloat2 posM;\",\r\n    \"    posM.x = pos.x;\",\r\n    \"    posM.y = pos.y;\",\r\n    \"    #if (FXAA_GATHER4_ALPHA == 1)\",\r\n    \"        #if (FXAA_DISCARD == 0)\",\r\n    \"            FxaaFloat4 rgbyM = FxaaTexTop(tex, posM);\",\r\n    \"            #if (FXAA_GREEN_AS_LUMA == 0)\",\r\n    \"                #define lumaM rgbyM.w\",\r\n    \"            #else\",\r\n    \"                #define lumaM rgbyM.y\",\r\n    \"            #endif\",\r\n    \"        #endif\",\r\n    \"        #if (FXAA_GREEN_AS_LUMA == 0)\",\r\n    \"            FxaaFloat4 luma4A = FxaaTexAlpha4(tex, posM);\",\r\n    \"            FxaaFloat4 luma4B = FxaaTexOffAlpha4(tex, posM, FxaaInt2(-1, -1));\",\r\n    \"        #else\",\r\n    \"            FxaaFloat4 luma4A = FxaaTexGreen4(tex, posM);\",\r\n    \"            FxaaFloat4 luma4B = FxaaTexOffGreen4(tex, posM, FxaaInt2(-1, -1));\",\r\n    \"        #endif\",\r\n    \"        #if (FXAA_DISCARD == 1)\",\r\n    \"            #define lumaM luma4A.w\",\r\n    \"        #endif\",\r\n    \"        #define lumaE luma4A.z\",\r\n    \"        #define lumaS luma4A.x\",\r\n    \"        #define lumaSE luma4A.y\",\r\n    \"        #define lumaNW luma4B.w\",\r\n    \"        #define lumaN luma4B.z\",\r\n    \"        #define lumaW luma4B.x\",\r\n    \"    #else\",\r\n    \"        FxaaFloat4 rgbyM = FxaaTexTop(tex, posM);\",\r\n    \"        #if (FXAA_GREEN_AS_LUMA == 0)\",\r\n    \"            #define lumaM rgbyM.w\",\r\n    \"        #else\",\r\n    \"            #define lumaM rgbyM.y\",\r\n    \"        #endif\",\r\n    \"        #if (FXAA_GLSL_100 == 1)\",\r\n    \"          FxaaFloat lumaS = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 0.0, 1.0), fxaaQualityRcpFrame.xy));\",\r\n    \"          FxaaFloat lumaE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0, 0.0), fxaaQualityRcpFrame.xy));\",\r\n    \"          FxaaFloat lumaN = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 0.0,-1.0), fxaaQualityRcpFrame.xy));\",\r\n    \"          FxaaFloat lumaW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0, 0.0), fxaaQualityRcpFrame.xy));\",\r\n    \"        #else\",\r\n    \"          FxaaFloat lumaS = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 0, 1), fxaaQualityRcpFrame.xy));\",\r\n    \"          FxaaFloat lumaE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1, 0), fxaaQualityRcpFrame.xy));\",\r\n    \"          FxaaFloat lumaN = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 0,-1), fxaaQualityRcpFrame.xy));\",\r\n    \"          FxaaFloat lumaW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 0), fxaaQualityRcpFrame.xy));\",\r\n    \"        #endif\",\r\n    \"    #endif\",\r\n    \"/*--------------------------------------------------------------------------*/\",\r\n    \"    FxaaFloat maxSM = max(lumaS, lumaM);\",\r\n    \"    FxaaFloat minSM = min(lumaS, lumaM);\",\r\n    \"    FxaaFloat maxESM = max(lumaE, maxSM);\",\r\n    \"    FxaaFloat minESM = min(lumaE, minSM);\",\r\n    \"    FxaaFloat maxWN = max(lumaN, lumaW);\",\r\n    \"    FxaaFloat minWN = min(lumaN, lumaW);\",\r\n    \"    FxaaFloat rangeMax = max(maxWN, maxESM);\",\r\n    \"    FxaaFloat rangeMin = min(minWN, minESM);\",\r\n    \"    FxaaFloat rangeMaxScaled = rangeMax * fxaaQualityEdgeThreshold;\",\r\n    \"    FxaaFloat range = rangeMax - rangeMin;\",\r\n    \"    FxaaFloat rangeMaxClamped = max(fxaaQualityEdgeThresholdMin, rangeMaxScaled);\",\r\n    \"    FxaaBool earlyExit = range < rangeMaxClamped;\",\r\n    \"/*--------------------------------------------------------------------------*/\",\r\n    \"    if(earlyExit)\",\r\n    \"        #if (FXAA_DISCARD == 1)\",\r\n    \"            FxaaDiscard;\",\r\n    \"        #else\",\r\n    \"            return rgbyM;\",\r\n    \"        #endif\",\r\n    \"/*--------------------------------------------------------------------------*/\",\r\n    \"    #if (FXAA_GATHER4_ALPHA == 0)\",\r\n    \"        #if (FXAA_GLSL_100 == 1)\",\r\n    \"          FxaaFloat lumaNW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0,-1.0), fxaaQualityRcpFrame.xy));\",\r\n    \"          FxaaFloat lumaSE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0, 1.0), fxaaQualityRcpFrame.xy));\",\r\n    \"          FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0,-1.0), fxaaQualityRcpFrame.xy));\",\r\n    \"          FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0, 1.0), fxaaQualityRcpFrame.xy));\",\r\n    \"        #else\",\r\n    \"          FxaaFloat lumaNW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1,-1), fxaaQualityRcpFrame.xy));\",\r\n    \"          FxaaFloat lumaSE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1, 1), fxaaQualityRcpFrame.xy));\",\r\n    \"          FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1,-1), fxaaQualityRcpFrame.xy));\",\r\n    \"          FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 1), fxaaQualityRcpFrame.xy));\",\r\n    \"        #endif\",\r\n    \"    #else\",\r\n    \"        FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(1, -1), fxaaQualityRcpFrame.xy));\",\r\n    \"        FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 1), fxaaQualityRcpFrame.xy));\",\r\n    \"    #endif\",\r\n    \"/*--------------------------------------------------------------------------*/\",\r\n    \"    FxaaFloat lumaNS = lumaN + lumaS;\",\r\n    \"    FxaaFloat lumaWE = lumaW + lumaE;\",\r\n    \"    FxaaFloat subpixRcpRange = 1.0/range;\",\r\n    \"    FxaaFloat subpixNSWE = lumaNS + lumaWE;\",\r\n    \"    FxaaFloat edgeHorz1 = (-2.0 * lumaM) + lumaNS;\",\r\n    \"    FxaaFloat edgeVert1 = (-2.0 * lumaM) + lumaWE;\",\r\n    \"/*--------------------------------------------------------------------------*/\",\r\n    \"    FxaaFloat lumaNESE = lumaNE + lumaSE;\",\r\n    \"    FxaaFloat lumaNWNE = lumaNW + lumaNE;\",\r\n    \"    FxaaFloat edgeHorz2 = (-2.0 * lumaE) + lumaNESE;\",\r\n    \"    FxaaFloat edgeVert2 = (-2.0 * lumaN) + lumaNWNE;\",\r\n    \"/*--------------------------------------------------------------------------*/\",\r\n    \"    FxaaFloat lumaNWSW = lumaNW + lumaSW;\",\r\n    \"    FxaaFloat lumaSWSE = lumaSW + lumaSE;\",\r\n    \"    FxaaFloat edgeHorz4 = (abs(edgeHorz1) * 2.0) + abs(edgeHorz2);\",\r\n    \"    FxaaFloat edgeVert4 = (abs(edgeVert1) * 2.0) + abs(edgeVert2);\",\r\n    \"    FxaaFloat edgeHorz3 = (-2.0 * lumaW) + lumaNWSW;\",\r\n    \"    FxaaFloat edgeVert3 = (-2.0 * lumaS) + lumaSWSE;\",\r\n    \"    FxaaFloat edgeHorz = abs(edgeHorz3) + edgeHorz4;\",\r\n    \"    FxaaFloat edgeVert = abs(edgeVert3) + edgeVert4;\",\r\n    \"/*--------------------------------------------------------------------------*/\",\r\n    \"    FxaaFloat subpixNWSWNESE = lumaNWSW + lumaNESE;\",\r\n    \"    FxaaFloat lengthSign = fxaaQualityRcpFrame.x;\",\r\n    \"    FxaaBool horzSpan = edgeHorz >= edgeVert;\",\r\n    \"    FxaaFloat subpixA = subpixNSWE * 2.0 + subpixNWSWNESE;\",\r\n    \"/*--------------------------------------------------------------------------*/\",\r\n    \"    if(!horzSpan) lumaN = lumaW;\",\r\n    \"    if(!horzSpan) lumaS = lumaE;\",\r\n    \"    if(horzSpan) lengthSign = fxaaQualityRcpFrame.y;\",\r\n    \"    FxaaFloat subpixB = (subpixA * (1.0/12.0)) - lumaM;\",\r\n    \"/*--------------------------------------------------------------------------*/\",\r\n    \"    FxaaFloat gradientN = lumaN - lumaM;\",\r\n    \"    FxaaFloat gradientS = lumaS - lumaM;\",\r\n    \"    FxaaFloat lumaNN = lumaN + lumaM;\",\r\n    \"    FxaaFloat lumaSS = lumaS + lumaM;\",\r\n    \"    FxaaBool pairN = abs(gradientN) >= abs(gradientS);\",\r\n    \"    FxaaFloat gradient = max(abs(gradientN), abs(gradientS));\",\r\n    \"    if(pairN) lengthSign = -lengthSign;\",\r\n    \"    FxaaFloat subpixC = FxaaSat(abs(subpixB) * subpixRcpRange);\",\r\n    \"/*--------------------------------------------------------------------------*/\",\r\n    \"    FxaaFloat2 posB;\",\r\n    \"    posB.x = posM.x;\",\r\n    \"    posB.y = posM.y;\",\r\n    \"    FxaaFloat2 offNP;\",\r\n    \"    offNP.x = (!horzSpan) ? 0.0 : fxaaQualityRcpFrame.x;\",\r\n    \"    offNP.y = ( horzSpan) ? 0.0 : fxaaQualityRcpFrame.y;\",\r\n    \"    if(!horzSpan) posB.x += lengthSign * 0.5;\",\r\n    \"    if( horzSpan) posB.y += lengthSign * 0.5;\",\r\n    \"/*--------------------------------------------------------------------------*/\",\r\n    \"    FxaaFloat2 posN;\",\r\n    \"    posN.x = posB.x - offNP.x * FXAA_QUALITY_P0;\",\r\n    \"    posN.y = posB.y - offNP.y * FXAA_QUALITY_P0;\",\r\n    \"    FxaaFloat2 posP;\",\r\n    \"    posP.x = posB.x + offNP.x * FXAA_QUALITY_P0;\",\r\n    \"    posP.y = posB.y + offNP.y * FXAA_QUALITY_P0;\",\r\n    \"    FxaaFloat subpixD = ((-2.0)*subpixC) + 3.0;\",\r\n    \"    FxaaFloat lumaEndN = FxaaLuma(FxaaTexTop(tex, posN));\",\r\n    \"    FxaaFloat subpixE = subpixC * subpixC;\",\r\n    \"    FxaaFloat lumaEndP = FxaaLuma(FxaaTexTop(tex, posP));\",\r\n    \"/*--------------------------------------------------------------------------*/\",\r\n    \"    if(!pairN) lumaNN = lumaSS;\",\r\n    \"    FxaaFloat gradientScaled = gradient * 1.0/4.0;\",\r\n    \"    FxaaFloat lumaMM = lumaM - lumaNN * 0.5;\",\r\n    \"    FxaaFloat subpixF = subpixD * subpixE;\",\r\n    \"    FxaaBool lumaMLTZero = lumaMM < 0.0;\",\r\n    \"/*--------------------------------------------------------------------------*/\",\r\n    \"    lumaEndN -= lumaNN * 0.5;\",\r\n    \"    lumaEndP -= lumaNN * 0.5;\",\r\n    \"    FxaaBool doneN = abs(lumaEndN) >= gradientScaled;\",\r\n    \"    FxaaBool doneP = abs(lumaEndP) >= gradientScaled;\",\r\n    \"    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P1;\",\r\n    \"    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P1;\",\r\n    \"    FxaaBool doneNP = (!doneN) || (!doneP);\",\r\n    \"    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P1;\",\r\n    \"    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P1;\",\r\n    \"/*--------------------------------------------------------------------------*/\",\r\n    \"    if(doneNP) {\",\r\n    \"        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\",\r\n    \"        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\",\r\n    \"        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\",\r\n    \"        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\",\r\n    \"        doneN = abs(lumaEndN) >= gradientScaled;\",\r\n    \"        doneP = abs(lumaEndP) >= gradientScaled;\",\r\n    \"        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P2;\",\r\n    \"        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P2;\",\r\n    \"        doneNP = (!doneN) || (!doneP);\",\r\n    \"        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P2;\",\r\n    \"        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P2;\",\r\n    \"/*--------------------------------------------------------------------------*/\",\r\n    \"        #if (FXAA_QUALITY_PS > 3)\",\r\n    \"        if(doneNP) {\",\r\n    \"            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\",\r\n    \"            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\",\r\n    \"            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\",\r\n    \"            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\",\r\n    \"            doneN = abs(lumaEndN) >= gradientScaled;\",\r\n    \"            doneP = abs(lumaEndP) >= gradientScaled;\",\r\n    \"            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P3;\",\r\n    \"            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P3;\",\r\n    \"            doneNP = (!doneN) || (!doneP);\",\r\n    \"            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P3;\",\r\n    \"            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P3;\",\r\n    \"/*--------------------------------------------------------------------------*/\",\r\n    \"            #if (FXAA_QUALITY_PS > 4)\",\r\n    \"            if(doneNP) {\",\r\n    \"                if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\",\r\n    \"                if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\",\r\n    \"                if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\",\r\n    \"                if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\",\r\n    \"                doneN = abs(lumaEndN) >= gradientScaled;\",\r\n    \"                doneP = abs(lumaEndP) >= gradientScaled;\",\r\n    \"                if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P4;\",\r\n    \"                if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P4;\",\r\n    \"                doneNP = (!doneN) || (!doneP);\",\r\n    \"                if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P4;\",\r\n    \"                if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P4;\",\r\n    \"/*--------------------------------------------------------------------------*/\",\r\n    \"                #if (FXAA_QUALITY_PS > 5)\",\r\n    \"                if(doneNP) {\",\r\n    \"                    if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\",\r\n    \"                    if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\",\r\n    \"                    if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\",\r\n    \"                    if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\",\r\n    \"                    doneN = abs(lumaEndN) >= gradientScaled;\",\r\n    \"                    doneP = abs(lumaEndP) >= gradientScaled;\",\r\n    \"                    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P5;\",\r\n    \"                    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P5;\",\r\n    \"                    doneNP = (!doneN) || (!doneP);\",\r\n    \"                    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P5;\",\r\n    \"                    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P5;\",\r\n    \"/*--------------------------------------------------------------------------*/\",\r\n    \"                    #if (FXAA_QUALITY_PS > 6)\",\r\n    \"                    if(doneNP) {\",\r\n    \"                        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\",\r\n    \"                        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\",\r\n    \"                        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\",\r\n    \"                        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\",\r\n    \"                        doneN = abs(lumaEndN) >= gradientScaled;\",\r\n    \"                        doneP = abs(lumaEndP) >= gradientScaled;\",\r\n    \"                        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P6;\",\r\n    \"                        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P6;\",\r\n    \"                        doneNP = (!doneN) || (!doneP);\",\r\n    \"                        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P6;\",\r\n    \"                        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P6;\",\r\n    \"/*--------------------------------------------------------------------------*/\",\r\n    \"                        #if (FXAA_QUALITY_PS > 7)\",\r\n    \"                        if(doneNP) {\",\r\n    \"                            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\",\r\n    \"                            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\",\r\n    \"                            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\",\r\n    \"                            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\",\r\n    \"                            doneN = abs(lumaEndN) >= gradientScaled;\",\r\n    \"                            doneP = abs(lumaEndP) >= gradientScaled;\",\r\n    \"                            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P7;\",\r\n    \"                            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P7;\",\r\n    \"                            doneNP = (!doneN) || (!doneP);\",\r\n    \"                            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P7;\",\r\n    \"                            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P7;\",\r\n    \"/*--------------------------------------------------------------------------*/\",\r\n    \"    #if (FXAA_QUALITY_PS > 8)\",\r\n    \"    if(doneNP) {\",\r\n    \"        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\",\r\n    \"        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\",\r\n    \"        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\",\r\n    \"        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\",\r\n    \"        doneN = abs(lumaEndN) >= gradientScaled;\",\r\n    \"        doneP = abs(lumaEndP) >= gradientScaled;\",\r\n    \"        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P8;\",\r\n    \"        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P8;\",\r\n    \"        doneNP = (!doneN) || (!doneP);\",\r\n    \"        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P8;\",\r\n    \"        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P8;\",\r\n    \"/*--------------------------------------------------------------------------*/\",\r\n    \"        #if (FXAA_QUALITY_PS > 9)\",\r\n    \"        if(doneNP) {\",\r\n    \"            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\",\r\n    \"            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\",\r\n    \"            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\",\r\n    \"            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\",\r\n    \"            doneN = abs(lumaEndN) >= gradientScaled;\",\r\n    \"            doneP = abs(lumaEndP) >= gradientScaled;\",\r\n    \"            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P9;\",\r\n    \"            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P9;\",\r\n    \"            doneNP = (!doneN) || (!doneP);\",\r\n    \"            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P9;\",\r\n    \"            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P9;\",\r\n    \"/*--------------------------------------------------------------------------*/\",\r\n    \"            #if (FXAA_QUALITY_PS > 10)\",\r\n    \"            if(doneNP) {\",\r\n    \"                if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\",\r\n    \"                if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\",\r\n    \"                if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\",\r\n    \"                if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\",\r\n    \"                doneN = abs(lumaEndN) >= gradientScaled;\",\r\n    \"                doneP = abs(lumaEndP) >= gradientScaled;\",\r\n    \"                if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P10;\",\r\n    \"                if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P10;\",\r\n    \"                doneNP = (!doneN) || (!doneP);\",\r\n    \"                if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P10;\",\r\n    \"                if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P10;\",\r\n    \"/*--------------------------------------------------------------------------*/\",\r\n    \"                #if (FXAA_QUALITY_PS > 11)\",\r\n    \"                if(doneNP) {\",\r\n    \"                    if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\",\r\n    \"                    if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\",\r\n    \"                    if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\",\r\n    \"                    if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\",\r\n    \"                    doneN = abs(lumaEndN) >= gradientScaled;\",\r\n    \"                    doneP = abs(lumaEndP) >= gradientScaled;\",\r\n    \"                    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P11;\",\r\n    \"                    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P11;\",\r\n    \"                    doneNP = (!doneN) || (!doneP);\",\r\n    \"                    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P11;\",\r\n    \"                    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P11;\",\r\n    \"/*--------------------------------------------------------------------------*/\",\r\n    \"                    #if (FXAA_QUALITY_PS > 12)\",\r\n    \"                    if(doneNP) {\",\r\n    \"                        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\",\r\n    \"                        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\",\r\n    \"                        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\",\r\n    \"                        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\",\r\n    \"                        doneN = abs(lumaEndN) >= gradientScaled;\",\r\n    \"                        doneP = abs(lumaEndP) >= gradientScaled;\",\r\n    \"                        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P12;\",\r\n    \"                        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P12;\",\r\n    \"                        doneNP = (!doneN) || (!doneP);\",\r\n    \"                        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P12;\",\r\n    \"                        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P12;\",\r\n    \"/*--------------------------------------------------------------------------*/\",\r\n    \"                    }\",\r\n    \"                    #endif\",\r\n    \"/*--------------------------------------------------------------------------*/\",\r\n    \"                }\",\r\n    \"                #endif\",\r\n    \"/*--------------------------------------------------------------------------*/\",\r\n    \"            }\",\r\n    \"            #endif\",\r\n    \"/*--------------------------------------------------------------------------*/\",\r\n    \"        }\",\r\n    \"        #endif\",\r\n    \"/*--------------------------------------------------------------------------*/\",\r\n    \"    }\",\r\n    \"    #endif\",\r\n    \"/*--------------------------------------------------------------------------*/\",\r\n    \"                        }\",\r\n    \"                        #endif\",\r\n    \"/*--------------------------------------------------------------------------*/\",\r\n    \"                    }\",\r\n    \"                    #endif\",\r\n    \"/*--------------------------------------------------------------------------*/\",\r\n    \"                }\",\r\n    \"                #endif\",\r\n    \"/*--------------------------------------------------------------------------*/\",\r\n    \"            }\",\r\n    \"            #endif\",\r\n    \"/*--------------------------------------------------------------------------*/\",\r\n    \"        }\",\r\n    \"        #endif\",\r\n    \"/*--------------------------------------------------------------------------*/\",\r\n    \"    }\",\r\n    \"/*--------------------------------------------------------------------------*/\",\r\n    \"    FxaaFloat dstN = posM.x - posN.x;\",\r\n    \"    FxaaFloat dstP = posP.x - posM.x;\",\r\n    \"    if(!horzSpan) dstN = posM.y - posN.y;\",\r\n    \"    if(!horzSpan) dstP = posP.y - posM.y;\",\r\n    \"/*--------------------------------------------------------------------------*/\",\r\n    \"    FxaaBool goodSpanN = (lumaEndN < 0.0) != lumaMLTZero;\",\r\n    \"    FxaaFloat spanLength = (dstP + dstN);\",\r\n    \"    FxaaBool goodSpanP = (lumaEndP < 0.0) != lumaMLTZero;\",\r\n    \"    FxaaFloat spanLengthRcp = 1.0/spanLength;\",\r\n    \"/*--------------------------------------------------------------------------*/\",\r\n    \"    FxaaBool directionN = dstN < dstP;\",\r\n    \"    FxaaFloat dst = min(dstN, dstP);\",\r\n    \"    FxaaBool goodSpan = directionN ? goodSpanN : goodSpanP;\",\r\n    \"    FxaaFloat subpixG = subpixF * subpixF;\",\r\n    \"    FxaaFloat pixelOffset = (dst * (-spanLengthRcp)) + 0.5;\",\r\n    \"    FxaaFloat subpixH = subpixG * fxaaQualitySubpix;\",\r\n    \"/*--------------------------------------------------------------------------*/\",\r\n    \"    FxaaFloat pixelOffsetGood = goodSpan ? pixelOffset : 0.0;\",\r\n    \"    FxaaFloat pixelOffsetSubpix = max(pixelOffsetGood, subpixH);\",\r\n    \"    if(!horzSpan) posM.x += pixelOffsetSubpix * lengthSign;\",\r\n    \"    if( horzSpan) posM.y += pixelOffsetSubpix * lengthSign;\",\r\n    \"    #if (FXAA_DISCARD == 1)\",\r\n    \"        return FxaaTexTop(tex, posM);\",\r\n    \"    #else\",\r\n    \"        return FxaaFloat4(FxaaTexTop(tex, posM).xyz, lumaM);\",\r\n    \"    #endif\",\r\n    \"}\",\r\n    \"/*==========================================================================*/\",\r\n    \"#endif\",\r\n    \"\",\r\n    \"void main() {\",\r\n    \"  gl_FragColor = FxaaPixelShader(\",\r\n    \"    vUv,\",\r\n    \"    vec4(0.0),\",\r\n    \"    tDiffuse,\",\r\n    \"    tDiffuse,\",\r\n    \"    tDiffuse,\",\r\n    \"    resolution,\",\r\n    \"    vec4(0.0),\",\r\n    \"    vec4(0.0),\",\r\n    \"    vec4(0.0),\",\r\n    \"    0.75,\",\r\n    \"    0.166,\",\r\n    \"    0.0833,\",\r\n    \"    0.0,\",\r\n    \"    0.0,\",\r\n    \"    0.0,\",\r\n    \"    vec4(0.0)\",\r\n    \"  );\",\r\n    \"\",\r\n    \"  // TODO avoid querying texture twice for same texel\",\r\n    \"  gl_FragColor.a = texture2D(tDiffuse, vUv).a;\",\r\n    \"}\"\r\n  ].join(\"\\n\")\r\n};\r\nexport {\r\n  FXAAShader\r\n};\r\n", "const FocusShader = {\r\n  uniforms: {\r\n    tDiffuse: { value: null },\r\n    screenWidth: { value: 1024 },\r\n    screenHeight: { value: 1024 },\r\n    sampleDistance: { value: 0.94 },\r\n    waveFactor: { value: 125e-5 }\r\n  },\r\n  vertexShader: [\r\n    \"varying vec2 vUv;\",\r\n    \"void main() {\",\r\n    \"\tvUv = uv;\",\r\n    \"\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\r\n    \"}\"\r\n  ].join(\"\\n\"),\r\n  fragmentShader: [\r\n    \"uniform float screenWidth;\",\r\n    \"uniform float screenHeight;\",\r\n    \"uniform float sampleDistance;\",\r\n    \"uniform float waveFactor;\",\r\n    \"uniform sampler2D tDiffuse;\",\r\n    \"varying vec2 vUv;\",\r\n    \"void main() {\",\r\n    \"\tvec4 color, org, tmp, add;\",\r\n    \"\tfloat sample_dist, f;\",\r\n    \"\tvec2 vin;\",\r\n    \"\tvec2 uv = vUv;\",\r\n    \"\tadd = color = org = texture2D( tDiffuse, uv );\",\r\n    \"\tvin = ( uv - vec2( 0.5 ) ) * vec2( 1.4 );\",\r\n    \"\tsample_dist = dot( vin, vin ) * 2.0;\",\r\n    \"\tf = ( waveFactor * 100.0 + sample_dist ) * sampleDistance * 4.0;\",\r\n    \"\tvec2 sampleSize = vec2(  1.0 / screenWidth, 1.0 / screenHeight ) * vec2( f );\",\r\n    \"\tadd += tmp = texture2D( tDiffuse, uv + vec2( 0.111964, 0.993712 ) * sampleSize );\",\r\n    \"\tif( tmp.b < color.b ) color = tmp;\",\r\n    \"\tadd += tmp = texture2D( tDiffuse, uv + vec2( 0.846724, 0.532032 ) * sampleSize );\",\r\n    \"\tif( tmp.b < color.b ) color = tmp;\",\r\n    \"\tadd += tmp = texture2D( tDiffuse, uv + vec2( 0.943883, -0.330279 ) * sampleSize );\",\r\n    \"\tif( tmp.b < color.b ) color = tmp;\",\r\n    \"\tadd += tmp = texture2D( tDiffuse, uv + vec2( 0.330279, -0.943883 ) * sampleSize );\",\r\n    \"\tif( tmp.b < color.b ) color = tmp;\",\r\n    \"\tadd += tmp = texture2D( tDiffuse, uv + vec2( -0.532032, -0.846724 ) * sampleSize );\",\r\n    \"\tif( tmp.b < color.b ) color = tmp;\",\r\n    \"\tadd += tmp = texture2D( tDiffuse, uv + vec2( -0.993712, -0.111964 ) * sampleSize );\",\r\n    \"\tif( tmp.b < color.b ) color = tmp;\",\r\n    \"\tadd += tmp = texture2D( tDiffuse, uv + vec2( -0.707107, 0.707107 ) * sampleSize );\",\r\n    \"\tif( tmp.b < color.b ) color = tmp;\",\r\n    \"\tcolor = color * vec4( 2.0 ) - ( add / vec4( 8.0 ) );\",\r\n    \"\tcolor = color + ( add / vec4( 8.0 ) - color ) * ( vec4( 1.0 ) - vec4( sample_dist * 0.5 ) );\",\r\n    \"\tgl_FragColor = vec4( color.rgb * color.rgb * vec3( 0.95 ) + color.rgb, 1.0 );\",\r\n    \"}\"\r\n  ].join(\"\\n\")\r\n};\r\nexport {\r\n  FocusShader\r\n};\r\n", "import { Vector2 } from \"three\";\r\nconst FreiChenShader = {\r\n  uniforms: {\r\n    tDiffuse: { value: null },\r\n    aspect: { value: /* @__PURE__ */ new Vector2(512, 512) }\r\n  },\r\n  vertexShader: [\r\n    \"varying vec2 vUv;\",\r\n    \"void main() {\",\r\n    \"\tvUv = uv;\",\r\n    \"\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\r\n    \"}\"\r\n  ].join(\"\\n\"),\r\n  fragmentShader: [\r\n    \"uniform sampler2D tDiffuse;\",\r\n    \"varying vec2 vUv;\",\r\n    \"uniform vec2 aspect;\",\r\n    \"vec2 texel = vec2(1.0 / aspect.x, 1.0 / aspect.y);\",\r\n    \"mat3 G[9];\",\r\n    // hard coded matrix values!!!! as suggested in https://github.com/neilmendoza/ofxPostProcessing/blob/master/src/EdgePass.cpp#L45\r\n    \"const mat3 g0 = mat3( 0.3535533845424652, 0, -0.3535533845424652, 0.5, 0, -0.5, 0.3535533845424652, 0, -0.3535533845424652 );\",\r\n    \"const mat3 g1 = mat3( 0.3535533845424652, 0.5, 0.3535533845424652, 0, 0, 0, -0.3535533845424652, -0.5, -0.3535533845424652 );\",\r\n    \"const mat3 g2 = mat3( 0, 0.3535533845424652, -0.5, -0.3535533845424652, 0, 0.3535533845424652, 0.5, -0.3535533845424652, 0 );\",\r\n    \"const mat3 g3 = mat3( 0.5, -0.3535533845424652, 0, -0.3535533845424652, 0, 0.3535533845424652, 0, 0.3535533845424652, -0.5 );\",\r\n    \"const mat3 g4 = mat3( 0, -0.5, 0, 0.5, 0, 0.5, 0, -0.5, 0 );\",\r\n    \"const mat3 g5 = mat3( -0.5, 0, 0.5, 0, 0, 0, 0.5, 0, -0.5 );\",\r\n    \"const mat3 g6 = mat3( 0.1666666716337204, -0.3333333432674408, 0.1666666716337204, -0.3333333432674408, 0.6666666865348816, -0.3333333432674408, 0.1666666716337204, -0.3333333432674408, 0.1666666716337204 );\",\r\n    \"const mat3 g7 = mat3( -0.3333333432674408, 0.1666666716337204, -0.3333333432674408, 0.1666666716337204, 0.6666666865348816, 0.1666666716337204, -0.3333333432674408, 0.1666666716337204, -0.3333333432674408 );\",\r\n    \"const mat3 g8 = mat3( 0.3333333432674408, 0.3333333432674408, 0.3333333432674408, 0.3333333432674408, 0.3333333432674408, 0.3333333432674408, 0.3333333432674408, 0.3333333432674408, 0.3333333432674408 );\",\r\n    \"void main(void)\",\r\n    \"{\",\r\n    \"\tG[0] = g0,\",\r\n    \"\tG[1] = g1,\",\r\n    \"\tG[2] = g2,\",\r\n    \"\tG[3] = g3,\",\r\n    \"\tG[4] = g4,\",\r\n    \"\tG[5] = g5,\",\r\n    \"\tG[6] = g6,\",\r\n    \"\tG[7] = g7,\",\r\n    \"\tG[8] = g8;\",\r\n    \"\tmat3 I;\",\r\n    \"\tfloat cnv[9];\",\r\n    \"\tvec3 sample;\",\r\n    /* fetch the 3x3 neighbourhood and use the RGB vector's length as intensity value */\r\n    \"\tfor (float i=0.0; i<3.0; i++) {\",\r\n    \"\t\tfor (float j=0.0; j<3.0; j++) {\",\r\n    \"\t\t\tsample = texture2D(tDiffuse, vUv + texel * vec2(i-1.0,j-1.0) ).rgb;\",\r\n    \"\t\t\tI[int(i)][int(j)] = length(sample);\",\r\n    \"\t\t}\",\r\n    \"\t}\",\r\n    /* calculate the convolution values for all the masks */\r\n    \"\tfor (int i=0; i<9; i++) {\",\r\n    \"\t\tfloat dp3 = dot(G[i][0], I[0]) + dot(G[i][1], I[1]) + dot(G[i][2], I[2]);\",\r\n    \"\t\tcnv[i] = dp3 * dp3;\",\r\n    \"\t}\",\r\n    \"\tfloat M = (cnv[0] + cnv[1]) + (cnv[2] + cnv[3]);\",\r\n    \"\tfloat S = (cnv[4] + cnv[5]) + (cnv[6] + cnv[7]) + (cnv[8] + M);\",\r\n    \"\tgl_FragColor = vec4(vec3(sqrt(M/S)), 1.0);\",\r\n    \"}\"\r\n  ].join(\"\\n\")\r\n};\r\nexport {\r\n  FreiChenShader\r\n};\r\n", "const FresnelShader = {\r\n  uniforms: {\r\n    mRefractionRatio: { value: 1.02 },\r\n    mFresnelBias: { value: 0.1 },\r\n    mFresnelPower: { value: 2 },\r\n    mFresnelScale: { value: 1 },\r\n    tCube: { value: null }\r\n  },\r\n  vertexShader: [\r\n    \"uniform float mRefractionRatio;\",\r\n    \"uniform float mFresnelBias;\",\r\n    \"uniform float mFresnelScale;\",\r\n    \"uniform float mFresnelPower;\",\r\n    \"varying vec3 vReflect;\",\r\n    \"varying vec3 vRefract[3];\",\r\n    \"varying float vReflectionFactor;\",\r\n    \"void main() {\",\r\n    \"\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\",\r\n    \"\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\",\r\n    \"\tvec3 worldNormal = normalize( mat3( modelMatrix[0].xyz, modelMatrix[1].xyz, modelMatrix[2].xyz ) * normal );\",\r\n    \"\tvec3 I = worldPosition.xyz - cameraPosition;\",\r\n    \"\tvReflect = reflect( I, worldNormal );\",\r\n    \"\tvRefract[0] = refract( normalize( I ), worldNormal, mRefractionRatio );\",\r\n    \"\tvRefract[1] = refract( normalize( I ), worldNormal, mRefractionRatio * 0.99 );\",\r\n    \"\tvRefract[2] = refract( normalize( I ), worldNormal, mRefractionRatio * 0.98 );\",\r\n    \"\tvReflectionFactor = mFresnelBias + mFresnelScale * pow( 1.0 + dot( normalize( I ), worldNormal ), mFresnelPower );\",\r\n    \"\tgl_Position = projectionMatrix * mvPosition;\",\r\n    \"}\"\r\n  ].join(\"\\n\"),\r\n  fragmentShader: [\r\n    \"uniform samplerCube tCube;\",\r\n    \"varying vec3 vReflect;\",\r\n    \"varying vec3 vRefract[3];\",\r\n    \"varying float vReflectionFactor;\",\r\n    \"void main() {\",\r\n    \"\tvec4 reflectedColor = textureCube( tCube, vec3( -vReflect.x, vReflect.yz ) );\",\r\n    \"\tvec4 refractedColor = vec4( 1.0 );\",\r\n    \"\trefractedColor.r = textureCube( tCube, vec3( -vRefract[0].x, vRefract[0].yz ) ).r;\",\r\n    \"\trefractedColor.g = textureCube( tCube, vec3( -vRefract[1].x, vRefract[1].yz ) ).g;\",\r\n    \"\trefractedColor.b = textureCube( tCube, vec3( -vRefract[2].x, vRefract[2].yz ) ).b;\",\r\n    \"\tgl_FragColor = mix( refractedColor, reflectedColor, clamp( vReflectionFactor, 0.0, 1.0 ) );\",\r\n    \"}\"\r\n  ].join(\"\\n\")\r\n};\r\nexport {\r\n  FresnelShader\r\n};\r\n", "const GammaCorrectionShader = {\r\n  uniforms: {\r\n    tDiffuse: { value: null }\r\n  },\r\n  vertexShader: [\r\n    \"varying vec2 vUv;\",\r\n    \"void main() {\",\r\n    \"\tvUv = uv;\",\r\n    \"\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\r\n    \"}\"\r\n  ].join(\"\\n\"),\r\n  fragmentShader: [\r\n    \"uniform sampler2D tDiffuse;\",\r\n    \"varying vec2 vUv;\",\r\n    \"void main() {\",\r\n    \"\tvec4 tex = texture2D( tDiffuse, vUv );\",\r\n    \"\tgl_FragColor = LinearTosRGB( tex );\",\r\n    \"}\"\r\n  ].join(\"\\n\")\r\n};\r\nexport {\r\n  GammaCorrectionShader\r\n};\r\n", "import { Vector3, Color } from \"three\";\r\nconst GodRaysDepthMaskShader = {\r\n  uniforms: {\r\n    tInput: {\r\n      value: null\r\n    }\r\n  },\r\n  vertexShader: [\r\n    \"varying vec2 vUv;\",\r\n    \"void main() {\",\r\n    \" vUv = uv;\",\r\n    \" gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\r\n    \"}\"\r\n  ].join(\"\\n\"),\r\n  fragmentShader: [\r\n    \"varying vec2 vUv;\",\r\n    \"uniform sampler2D tInput;\",\r\n    \"void main() {\",\r\n    \"\tgl_FragColor = vec4( 1.0 ) - texture2D( tInput, vUv );\",\r\n    \"}\"\r\n  ].join(\"\\n\")\r\n};\r\nconst GodRaysGenerateShader = {\r\n  uniforms: {\r\n    tInput: {\r\n      value: null\r\n    },\r\n    fStepSize: {\r\n      value: 1\r\n    },\r\n    vSunPositionScreenSpace: {\r\n      value: /* @__PURE__ */ new Vector3()\r\n    }\r\n  },\r\n  vertexShader: [\r\n    \"varying vec2 vUv;\",\r\n    \"void main() {\",\r\n    \" vUv = uv;\",\r\n    \" gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\r\n    \"}\"\r\n  ].join(\"\\n\"),\r\n  fragmentShader: [\r\n    \"#define TAPS_PER_PASS 6.0\",\r\n    \"varying vec2 vUv;\",\r\n    \"uniform sampler2D tInput;\",\r\n    \"uniform vec3 vSunPositionScreenSpace;\",\r\n    \"uniform float fStepSize;\",\r\n    // filter step size\r\n    \"void main() {\",\r\n    // delta from current pixel to \"sun\" position\r\n    \"\tvec2 delta = vSunPositionScreenSpace.xy - vUv;\",\r\n    \"\tfloat dist = length( delta );\",\r\n    // Step vector (uv space)\r\n    \"\tvec2 stepv = fStepSize * delta / dist;\",\r\n    // Number of iterations between pixel and sun\r\n    \"\tfloat iters = dist/fStepSize;\",\r\n    \"\tvec2 uv = vUv.xy;\",\r\n    \"\tfloat col = 0.0;\",\r\n    // This breaks ANGLE in Chrome 22\r\n    //\t- see http://code.google.com/p/chromium/issues/detail?id=153105\r\n    /*\r\n    \t\t// Unrolling didnt do much on my hardware (ATI Mobility Radeon 3450),\r\n    \t\t// so i've just left the loop\r\n    \r\n    \t\t\"for ( float i = 0.0; i < TAPS_PER_PASS; i += 1.0 ) {\",\r\n    \r\n    \t\t// Accumulate samples, making sure we dont walk past the light source.\r\n    \r\n    \t\t// The check for uv.y < 1 would not be necessary with \"border\" UV wrap\r\n    \t\t// mode, with a black border color. I don't think this is currently\r\n    \t\t// exposed by three.js. As a result there might be artifacts when the\r\n    \t\t// sun is to the left, right or bottom of screen as these cases are\r\n    \t\t// not specifically handled.\r\n    \r\n    \t\t\"\tcol += ( i <= iters && uv.y < 1.0 ? texture2D( tInput, uv ).r : 0.0 );\",\r\n    \t\t\"\tuv += stepv;\",\r\n    \r\n    \t\t\"}\",\r\n    \t\t*/\r\n    // Unrolling loop manually makes it work in ANGLE\r\n    \"\tfloat f = min( 1.0, max( vSunPositionScreenSpace.z / 1000.0, 0.0 ) );\",\r\n    // used to fade out godrays\r\n    \"\tif ( 0.0 <= iters && uv.y < 1.0 ) col += texture2D( tInput, uv ).r * f;\",\r\n    \"\tuv += stepv;\",\r\n    \"\tif ( 1.0 <= iters && uv.y < 1.0 ) col += texture2D( tInput, uv ).r * f;\",\r\n    \"\tuv += stepv;\",\r\n    \"\tif ( 2.0 <= iters && uv.y < 1.0 ) col += texture2D( tInput, uv ).r * f;\",\r\n    \"\tuv += stepv;\",\r\n    \"\tif ( 3.0 <= iters && uv.y < 1.0 ) col += texture2D( tInput, uv ).r * f;\",\r\n    \"\tuv += stepv;\",\r\n    \"\tif ( 4.0 <= iters && uv.y < 1.0 ) col += texture2D( tInput, uv ).r * f;\",\r\n    \"\tuv += stepv;\",\r\n    \"\tif ( 5.0 <= iters && uv.y < 1.0 ) col += texture2D( tInput, uv ).r * f;\",\r\n    \"\tuv += stepv;\",\r\n    // Should technically be dividing by 'iters', but 'TAPS_PER_PASS' smooths out\r\n    // objectionable artifacts, in particular near the sun position. The side\r\n    // effect is that the result is darker than it should be around the sun, as\r\n    // TAPS_PER_PASS is greater than the number of samples actually accumulated.\r\n    // When the result is inverted (in the shader 'godrays_combine', this produces\r\n    // a slight bright spot at the position of the sun, even when it is occluded.\r\n    \"\tgl_FragColor = vec4( col/TAPS_PER_PASS );\",\r\n    \"\tgl_FragColor.a = 1.0;\",\r\n    \"}\"\r\n  ].join(\"\\n\")\r\n};\r\nconst GodRaysCombineShader = {\r\n  uniforms: {\r\n    tColors: {\r\n      value: null\r\n    },\r\n    tGodRays: {\r\n      value: null\r\n    },\r\n    fGodRayIntensity: {\r\n      value: 0.69\r\n    }\r\n  },\r\n  vertexShader: [\r\n    \"varying vec2 vUv;\",\r\n    \"void main() {\",\r\n    \"\tvUv = uv;\",\r\n    \"\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\r\n    \"}\"\r\n  ].join(\"\\n\"),\r\n  fragmentShader: [\r\n    \"varying vec2 vUv;\",\r\n    \"uniform sampler2D tColors;\",\r\n    \"uniform sampler2D tGodRays;\",\r\n    \"uniform float fGodRayIntensity;\",\r\n    \"void main() {\",\r\n    // Since THREE.MeshDepthMaterial renders foreground objects white and background\r\n    // objects black, the god-rays will be white streaks. Therefore value is inverted\r\n    // before being combined with tColors\r\n    \"\tgl_FragColor = texture2D( tColors, vUv ) + fGodRayIntensity * vec4( 1.0 - texture2D( tGodRays, vUv ).r );\",\r\n    \"\tgl_FragColor.a = 1.0;\",\r\n    \"}\"\r\n  ].join(\"\\n\")\r\n};\r\nconst GodRaysFakeSunShader = {\r\n  uniforms: {\r\n    vSunPositionScreenSpace: {\r\n      value: /* @__PURE__ */ new Vector3()\r\n    },\r\n    fAspect: {\r\n      value: 1\r\n    },\r\n    sunColor: {\r\n      value: /* @__PURE__ */ new Color(16772608)\r\n    },\r\n    bgColor: {\r\n      value: /* @__PURE__ */ new Color(0)\r\n    }\r\n  },\r\n  vertexShader: [\r\n    \"varying vec2 vUv;\",\r\n    \"void main() {\",\r\n    \"\tvUv = uv;\",\r\n    \"\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\r\n    \"}\"\r\n  ].join(\"\\n\"),\r\n  fragmentShader: [\r\n    \"varying vec2 vUv;\",\r\n    \"uniform vec3 vSunPositionScreenSpace;\",\r\n    \"uniform float fAspect;\",\r\n    \"uniform vec3 sunColor;\",\r\n    \"uniform vec3 bgColor;\",\r\n    \"void main() {\",\r\n    \"\tvec2 diff = vUv - vSunPositionScreenSpace.xy;\",\r\n    // Correct for aspect ratio\r\n    \"\tdiff.x *= fAspect;\",\r\n    \"\tfloat prop = clamp( length( diff ) / 0.5, 0.0, 1.0 );\",\r\n    \"\tprop = 0.35 * pow( 1.0 - prop, 3.0 );\",\r\n    \"\tgl_FragColor.xyz = ( vSunPositionScreenSpace.z > 0.0 ) ? mix( sunColor, bgColor, 1.0 - prop ) : bgColor;\",\r\n    \"\tgl_FragColor.w = 1.0;\",\r\n    \"}\"\r\n  ].join(\"\\n\")\r\n};\r\nexport {\r\n  GodRaysCombineShader,\r\n  GodRaysDepthMaskShader,\r\n  GodRaysFakeSunShader,\r\n  GodRaysGenerateShader\r\n};\r\n", "const HorizontalBlurShader = {\r\n  uniforms: {\r\n    tDiffuse: { value: null },\r\n    h: { value: 1 / 512 }\r\n  },\r\n  vertexShader: (\r\n    /* glsl */\r\n    `\r\n      varying vec2 vUv;\r\n\r\n      void main() {\r\n\r\n        vUv = uv;\r\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\r\n\r\n      }\r\n  `\r\n  ),\r\n  fragmentShader: (\r\n    /* glsl */\r\n    `\r\n    uniform sampler2D tDiffuse;\r\n    uniform float h;\r\n\r\n    varying vec2 vUv;\r\n\r\n    void main() {\r\n\r\n    \tvec4 sum = vec4( 0.0 );\r\n\r\n    \tsum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;\r\n    \tsum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;\r\n    \tsum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;\r\n    \tsum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;\r\n    \tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;\r\n    \tsum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;\r\n    \tsum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;\r\n    \tsum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;\r\n    \tsum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;\r\n\r\n    \tgl_FragColor = sum;\r\n\r\n    }\r\n  `\r\n  )\r\n};\r\nexport {\r\n  HorizontalBlurShader\r\n};\r\n", "const HorizontalTiltShiftShader = {\r\n  uniforms: {\r\n    tDiffuse: { value: null },\r\n    h: { value: 1 / 512 },\r\n    r: { value: 0.35 }\r\n  },\r\n  vertexShader: [\r\n    \"varying vec2 vUv;\",\r\n    \"void main() {\",\r\n    \"\tvUv = uv;\",\r\n    \"\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\r\n    \"}\"\r\n  ].join(\"\\n\"),\r\n  fragmentShader: [\r\n    \"uniform sampler2D tDiffuse;\",\r\n    \"uniform float h;\",\r\n    \"uniform float r;\",\r\n    \"varying vec2 vUv;\",\r\n    \"void main() {\",\r\n    \"\tvec4 sum = vec4( 0.0 );\",\r\n    \"\tfloat hh = h * abs( r - vUv.y );\",\r\n    \"\tsum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * hh, vUv.y ) ) * 0.051;\",\r\n    \"\tsum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * hh, vUv.y ) ) * 0.0918;\",\r\n    \"\tsum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * hh, vUv.y ) ) * 0.12245;\",\r\n    \"\tsum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * hh, vUv.y ) ) * 0.1531;\",\r\n    \"\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;\",\r\n    \"\tsum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * hh, vUv.y ) ) * 0.1531;\",\r\n    \"\tsum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * hh, vUv.y ) ) * 0.12245;\",\r\n    \"\tsum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * hh, vUv.y ) ) * 0.0918;\",\r\n    \"\tsum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * hh, vUv.y ) ) * 0.051;\",\r\n    \"\tgl_FragColor = sum;\",\r\n    \"}\"\r\n  ].join(\"\\n\")\r\n};\r\nexport {\r\n  HorizontalTiltShiftShader\r\n};\r\n", "const HueSaturationShader = {\r\n  uniforms: {\r\n    tDiffuse: { value: null },\r\n    hue: { value: 0 },\r\n    saturation: { value: 0 }\r\n  },\r\n  vertexShader: [\r\n    \"varying vec2 vUv;\",\r\n    \"void main() {\",\r\n    \"\tvUv = uv;\",\r\n    \"\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\r\n    \"}\"\r\n  ].join(\"\\n\"),\r\n  fragmentShader: [\r\n    \"uniform sampler2D tDiffuse;\",\r\n    \"uniform float hue;\",\r\n    \"uniform float saturation;\",\r\n    \"varying vec2 vUv;\",\r\n    \"void main() {\",\r\n    \"\tgl_FragColor = texture2D( tDiffuse, vUv );\",\r\n    // hue\r\n    \"\tfloat angle = hue * 3.14159265;\",\r\n    \"\tfloat s = sin(angle), c = cos(angle);\",\r\n    \"\tvec3 weights = (vec3(2.0 * c, -sqrt(3.0) * s - c, sqrt(3.0) * s - c) + 1.0) / 3.0;\",\r\n    \"\tfloat len = length(gl_FragColor.rgb);\",\r\n    \"\tgl_FragColor.rgb = vec3(\",\r\n    \"\t\tdot(gl_FragColor.rgb, weights.xyz),\",\r\n    \"\t\tdot(gl_FragColor.rgb, weights.zxy),\",\r\n    \"\t\tdot(gl_FragColor.rgb, weights.yzx)\",\r\n    \"\t);\",\r\n    // saturation\r\n    \"\tfloat average = (gl_FragColor.r + gl_FragColor.g + gl_FragColor.b) / 3.0;\",\r\n    \"\tif (saturation > 0.0) {\",\r\n    \"\t\tgl_FragColor.rgb += (average - gl_FragColor.rgb) * (1.0 - 1.0 / (1.001 - saturation));\",\r\n    \"\t} else {\",\r\n    \"\t\tgl_FragColor.rgb += (average - gl_FragColor.rgb) * (-saturation);\",\r\n    \"\t}\",\r\n    \"}\"\r\n  ].join(\"\\n\")\r\n};\r\nexport {\r\n  HueSaturationShader\r\n};\r\n", "const KaleidoShader = {\r\n  uniforms: {\r\n    tDiffuse: { value: null },\r\n    sides: { value: 6 },\r\n    angle: { value: 0 }\r\n  },\r\n  vertexShader: [\r\n    \"varying vec2 vUv;\",\r\n    \"void main() {\",\r\n    \"\tvUv = uv;\",\r\n    \"\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\r\n    \"}\"\r\n  ].join(\"\\n\"),\r\n  fragmentShader: [\r\n    \"uniform sampler2D tDiffuse;\",\r\n    \"uniform float sides;\",\r\n    \"uniform float angle;\",\r\n    \"varying vec2 vUv;\",\r\n    \"void main() {\",\r\n    \"\tvec2 p = vUv - 0.5;\",\r\n    \"\tfloat r = length(p);\",\r\n    \"\tfloat a = atan(p.y, p.x) + angle;\",\r\n    \"\tfloat tau = 2. * 3.1416 ;\",\r\n    \"\ta = mod(a, tau/sides);\",\r\n    \"\ta = abs(a - tau/sides/2.) ;\",\r\n    \"\tp = r * vec2(cos(a), sin(a));\",\r\n    \"\tvec4 color = texture2D(tDiffuse, p + 0.5);\",\r\n    \"\tgl_FragColor = color;\",\r\n    \"}\"\r\n  ].join(\"\\n\")\r\n};\r\nexport {\r\n  KaleidoShader\r\n};\r\n", "const MirrorShader = {\r\n  uniforms: {\r\n    tDiffuse: { value: null },\r\n    side: { value: 1 }\r\n  },\r\n  vertexShader: [\r\n    \"varying vec2 vUv;\",\r\n    \"void main() {\",\r\n    \"\tvUv = uv;\",\r\n    \"\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\r\n    \"}\"\r\n  ].join(\"\\n\"),\r\n  fragmentShader: [\r\n    \"uniform sampler2D tDiffuse;\",\r\n    \"uniform int side;\",\r\n    \"varying vec2 vUv;\",\r\n    \"void main() {\",\r\n    \"\tvec2 p = vUv;\",\r\n    \"\tif (side == 0){\",\r\n    \"\t\tif (p.x > 0.5) p.x = 1.0 - p.x;\",\r\n    \"\t}else if (side == 1){\",\r\n    \"\t\tif (p.x < 0.5) p.x = 1.0 - p.x;\",\r\n    \"\t}else if (side == 2){\",\r\n    \"\t\tif (p.y < 0.5) p.y = 1.0 - p.y;\",\r\n    \"\t}else if (side == 3){\",\r\n    \"\t\tif (p.y > 0.5) p.y = 1.0 - p.y;\",\r\n    \"\t} \",\r\n    \"\tvec4 color = texture2D(tDiffuse, p);\",\r\n    \"\tgl_FragColor = color;\",\r\n    \"}\"\r\n  ].join(\"\\n\")\r\n};\r\nexport {\r\n  MirrorShader\r\n};\r\n", "import { Vector2 } from \"three\";\r\nconst NormalMapShader = {\r\n  uniforms: {\r\n    heightMap: { value: null },\r\n    resolution: { value: /* @__PURE__ */ new Vector2(512, 512) },\r\n    scale: { value: /* @__PURE__ */ new Vector2(1, 1) },\r\n    height: { value: 0.05 }\r\n  },\r\n  vertexShader: [\r\n    \"varying vec2 vUv;\",\r\n    \"void main() {\",\r\n    \"\tvUv = uv;\",\r\n    \"\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\r\n    \"}\"\r\n  ].join(\"\\n\"),\r\n  fragmentShader: [\r\n    \"uniform float height;\",\r\n    \"uniform vec2 resolution;\",\r\n    \"uniform sampler2D heightMap;\",\r\n    \"varying vec2 vUv;\",\r\n    \"void main() {\",\r\n    \"\tfloat val = texture2D( heightMap, vUv ).x;\",\r\n    \"\tfloat valU = texture2D( heightMap, vUv + vec2( 1.0 / resolution.x, 0.0 ) ).x;\",\r\n    \"\tfloat valV = texture2D( heightMap, vUv + vec2( 0.0, 1.0 / resolution.y ) ).x;\",\r\n    \"\tgl_FragColor = vec4( ( 0.5 * normalize( vec3( val - valU, val - valV, height  ) ) + 0.5 ), 1.0 );\",\r\n    \"}\"\r\n  ].join(\"\\n\")\r\n};\r\nexport {\r\n  NormalMapShader\r\n};\r\n", "const ParallaxShader = {\r\n  // Ordered from fastest to best quality.\r\n  modes: {\r\n    none: \"NO_PARALLAX\",\r\n    basic: \"USE_BASIC_PARALLAX\",\r\n    steep: \"USE_STEEP_PARALLAX\",\r\n    occlusion: \"USE_OCLUSION_PARALLAX\",\r\n    // a.k.a. POM\r\n    relief: \"USE_RELIEF_PARALLAX\"\r\n  },\r\n  uniforms: {\r\n    bumpMap: { value: null },\r\n    map: { value: null },\r\n    parallaxScale: { value: null },\r\n    parallaxMinLayers: { value: null },\r\n    parallaxMaxLayers: { value: null }\r\n  },\r\n  vertexShader: [\r\n    \"varying vec2 vUv;\",\r\n    \"varying vec3 vViewPosition;\",\r\n    \"varying vec3 vNormal;\",\r\n    \"void main() {\",\r\n    \"\tvUv = uv;\",\r\n    \"\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\",\r\n    \"\tvViewPosition = -mvPosition.xyz;\",\r\n    \"\tvNormal = normalize( normalMatrix * normal );\",\r\n    \"\tgl_Position = projectionMatrix * mvPosition;\",\r\n    \"}\"\r\n  ].join(\"\\n\"),\r\n  fragmentShader: [\r\n    \"uniform sampler2D bumpMap;\",\r\n    \"uniform sampler2D map;\",\r\n    \"uniform float parallaxScale;\",\r\n    \"uniform float parallaxMinLayers;\",\r\n    \"uniform float parallaxMaxLayers;\",\r\n    \"varying vec2 vUv;\",\r\n    \"varying vec3 vViewPosition;\",\r\n    \"varying vec3 vNormal;\",\r\n    \"#ifdef USE_BASIC_PARALLAX\",\r\n    \"\tvec2 parallaxMap( in vec3 V ) {\",\r\n    \"\t\tfloat initialHeight = texture2D( bumpMap, vUv ).r;\",\r\n    // No Offset Limitting: messy, floating output at grazing angles.\r\n    //\"vec2 texCoordOffset = parallaxScale * V.xy / V.z * initialHeight;\",\r\n    // Offset Limiting\r\n    \"\t\tvec2 texCoordOffset = parallaxScale * V.xy * initialHeight;\",\r\n    \"\t\treturn vUv - texCoordOffset;\",\r\n    \"\t}\",\r\n    \"#else\",\r\n    \"\tvec2 parallaxMap( in vec3 V ) {\",\r\n    // Determine number of layers from angle between V and N\r\n    \"\t\tfloat numLayers = mix( parallaxMaxLayers, parallaxMinLayers, abs( dot( vec3( 0.0, 0.0, 1.0 ), V ) ) );\",\r\n    \"\t\tfloat layerHeight = 1.0 / numLayers;\",\r\n    \"\t\tfloat currentLayerHeight = 0.0;\",\r\n    // Shift of texture coordinates for each iteration\r\n    \"\t\tvec2 dtex = parallaxScale * V.xy / V.z / numLayers;\",\r\n    \"\t\tvec2 currentTextureCoords = vUv;\",\r\n    \"\t\tfloat heightFromTexture = texture2D( bumpMap, currentTextureCoords ).r;\",\r\n    // while ( heightFromTexture > currentLayerHeight )\r\n    // Infinite loops are not well supported. Do a \"large\" finite\r\n    // loop, but not too large, as it slows down some compilers.\r\n    \"\t\tfor ( int i = 0; i < 30; i += 1 ) {\",\r\n    \"\t\t\tif ( heightFromTexture <= currentLayerHeight ) {\",\r\n    \"\t\t\t\tbreak;\",\r\n    \"\t\t\t}\",\r\n    \"\t\t\tcurrentLayerHeight += layerHeight;\",\r\n    // Shift texture coordinates along vector V\r\n    \"\t\t\tcurrentTextureCoords -= dtex;\",\r\n    \"\t\t\theightFromTexture = texture2D( bumpMap, currentTextureCoords ).r;\",\r\n    \"\t\t}\",\r\n    \"\t\t#ifdef USE_STEEP_PARALLAX\",\r\n    \"\t\t\treturn currentTextureCoords;\",\r\n    \"\t\t#elif defined( USE_RELIEF_PARALLAX )\",\r\n    \"\t\t\tvec2 deltaTexCoord = dtex / 2.0;\",\r\n    \"\t\t\tfloat deltaHeight = layerHeight / 2.0;\",\r\n    // Return to the mid point of previous layer\r\n    \"\t\t\tcurrentTextureCoords += deltaTexCoord;\",\r\n    \"\t\t\tcurrentLayerHeight -= deltaHeight;\",\r\n    // Binary search to increase precision of Steep Parallax Mapping\r\n    \"\t\t\tconst int numSearches = 5;\",\r\n    \"\t\t\tfor ( int i = 0; i < numSearches; i += 1 ) {\",\r\n    \"\t\t\t\tdeltaTexCoord /= 2.0;\",\r\n    \"\t\t\t\tdeltaHeight /= 2.0;\",\r\n    \"\t\t\t\theightFromTexture = texture2D( bumpMap, currentTextureCoords ).r;\",\r\n    // Shift along or against vector V\r\n    \"\t\t\t\tif( heightFromTexture > currentLayerHeight ) {\",\r\n    // Below the surface\r\n    \"\t\t\t\t\tcurrentTextureCoords -= deltaTexCoord;\",\r\n    \"\t\t\t\t\tcurrentLayerHeight += deltaHeight;\",\r\n    \"\t\t\t\t} else {\",\r\n    // above the surface\r\n    \"\t\t\t\t\tcurrentTextureCoords += deltaTexCoord;\",\r\n    \"\t\t\t\t\tcurrentLayerHeight -= deltaHeight;\",\r\n    \"\t\t\t\t}\",\r\n    \"\t\t\t}\",\r\n    \"\t\t\treturn currentTextureCoords;\",\r\n    \"\t\t#elif defined( USE_OCLUSION_PARALLAX )\",\r\n    \"\t\t\tvec2 prevTCoords = currentTextureCoords + dtex;\",\r\n    // Heights for linear interpolation\r\n    \"\t\t\tfloat nextH = heightFromTexture - currentLayerHeight;\",\r\n    \"\t\t\tfloat prevH = texture2D( bumpMap, prevTCoords ).r - currentLayerHeight + layerHeight;\",\r\n    // Proportions for linear interpolation\r\n    \"\t\t\tfloat weight = nextH / ( nextH - prevH );\",\r\n    // Interpolation of texture coordinates\r\n    \"\t\t\treturn prevTCoords * weight + currentTextureCoords * ( 1.0 - weight );\",\r\n    \"\t\t#else\",\r\n    // NO_PARALLAX\r\n    \"\t\t\treturn vUv;\",\r\n    \"\t\t#endif\",\r\n    \"\t}\",\r\n    \"#endif\",\r\n    \"vec2 perturbUv( vec3 surfPosition, vec3 surfNormal, vec3 viewPosition ) {\",\r\n    \"\tvec2 texDx = dFdx( vUv );\",\r\n    \"\tvec2 texDy = dFdy( vUv );\",\r\n    \"\tvec3 vSigmaX = dFdx( surfPosition );\",\r\n    \"\tvec3 vSigmaY = dFdy( surfPosition );\",\r\n    \"\tvec3 vR1 = cross( vSigmaY, surfNormal );\",\r\n    \"\tvec3 vR2 = cross( surfNormal, vSigmaX );\",\r\n    \"\tfloat fDet = dot( vSigmaX, vR1 );\",\r\n    \"\tvec2 vProjVscr = ( 1.0 / fDet ) * vec2( dot( vR1, viewPosition ), dot( vR2, viewPosition ) );\",\r\n    \"\tvec3 vProjVtex;\",\r\n    \"\tvProjVtex.xy = texDx * vProjVscr.x + texDy * vProjVscr.y;\",\r\n    \"\tvProjVtex.z = dot( surfNormal, viewPosition );\",\r\n    \"\treturn parallaxMap( vProjVtex );\",\r\n    \"}\",\r\n    \"void main() {\",\r\n    \"\tvec2 mapUv = perturbUv( -vViewPosition, normalize( vNormal ), normalize( vViewPosition ) );\",\r\n    \"\tgl_FragColor = texture2D( map, mapUv );\",\r\n    \"}\"\r\n  ].join(\"\\n\")\r\n};\r\nexport {\r\n  ParallaxShader\r\n};\r\n", "const PixelShader = {\r\n  uniforms: {\r\n    tDiffuse: { value: null },\r\n    resolution: { value: null },\r\n    pixelSize: { value: 1 }\r\n  },\r\n  vertexShader: [\r\n    \"varying highp vec2 vUv;\",\r\n    \"void main() {\",\r\n    \"vUv = uv;\",\r\n    \"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\r\n    \"}\"\r\n  ].join(\"\\n\"),\r\n  fragmentShader: [\r\n    \"uniform sampler2D tDiffuse;\",\r\n    \"uniform float pixelSize;\",\r\n    \"uniform vec2 resolution;\",\r\n    \"varying highp vec2 vUv;\",\r\n    \"void main(){\",\r\n    \"vec2 dxy = pixelSize / resolution;\",\r\n    \"vec2 coord = dxy * floor( vUv / dxy );\",\r\n    \"gl_FragColor = texture2D(tDiffuse, coord);\",\r\n    \"}\"\r\n  ].join(\"\\n\")\r\n};\r\nexport {\r\n  PixelShader\r\n};\r\n", "const RGBShiftShader = {\r\n  uniforms: {\r\n    tDiffuse: { value: null },\r\n    amount: { value: 5e-3 },\r\n    angle: { value: 0 }\r\n  },\r\n  vertexShader: [\r\n    \"varying vec2 vUv;\",\r\n    \"void main() {\",\r\n    \"\tvUv = uv;\",\r\n    \"\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\r\n    \"}\"\r\n  ].join(\"\\n\"),\r\n  fragmentShader: [\r\n    \"uniform sampler2D tDiffuse;\",\r\n    \"uniform float amount;\",\r\n    \"uniform float angle;\",\r\n    \"varying vec2 vUv;\",\r\n    \"void main() {\",\r\n    \"\tvec2 offset = amount * vec2( cos(angle), sin(angle));\",\r\n    \"\tvec4 cr = texture2D(tDiffuse, vUv + offset);\",\r\n    \"\tvec4 cga = texture2D(tDiffuse, vUv);\",\r\n    \"\tvec4 cb = texture2D(tDiffuse, vUv - offset);\",\r\n    \"\tgl_FragColor = vec4(cr.r, cga.g, cb.b, cga.a);\",\r\n    \"}\"\r\n  ].join(\"\\n\")\r\n};\r\nexport {\r\n  RGBShiftShader\r\n};\r\n", "const SepiaShader = {\r\n  uniforms: {\r\n    tDiffuse: { value: null },\r\n    amount: { value: 1 }\r\n  },\r\n  vertexShader: [\r\n    \"varying vec2 vUv;\",\r\n    \"void main() {\",\r\n    \"\tvUv = uv;\",\r\n    \"\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\r\n    \"}\"\r\n  ].join(\"\\n\"),\r\n  fragmentShader: [\r\n    \"uniform float amount;\",\r\n    \"uniform sampler2D tDiffuse;\",\r\n    \"varying vec2 vUv;\",\r\n    \"void main() {\",\r\n    \"\tvec4 color = texture2D( tDiffuse, vUv );\",\r\n    \"\tvec3 c = color.rgb;\",\r\n    \"\tcolor.r = dot( c, vec3( 1.0 - 0.607 * amount, 0.769 * amount, 0.189 * amount ) );\",\r\n    \"\tcolor.g = dot( c, vec3( 0.349 * amount, 1.0 - 0.314 * amount, 0.168 * amount ) );\",\r\n    \"\tcolor.b = dot( c, vec3( 0.272 * amount, 0.534 * amount, 1.0 - 0.869 * amount ) );\",\r\n    \"\tgl_FragColor = vec4( min( vec3( 1.0 ), color.rgb ), color.a );\",\r\n    \"}\"\r\n  ].join(\"\\n\")\r\n};\r\nexport {\r\n  SepiaShader\r\n};\r\n", "import { Vector2 } from \"three\";\r\nconst SobelOperatorShader = {\r\n  uniforms: {\r\n    tDiffuse: { value: null },\r\n    resolution: { value: /* @__PURE__ */ new Vector2() }\r\n  },\r\n  vertexShader: [\r\n    \"varying vec2 vUv;\",\r\n    \"void main() {\",\r\n    \"\tvUv = uv;\",\r\n    \"\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\r\n    \"}\"\r\n  ].join(\"\\n\"),\r\n  fragmentShader: [\r\n    \"uniform sampler2D tDiffuse;\",\r\n    \"uniform vec2 resolution;\",\r\n    \"varying vec2 vUv;\",\r\n    \"void main() {\",\r\n    \"\tvec2 texel = vec2( 1.0 / resolution.x, 1.0 / resolution.y );\",\r\n    // kernel definition (in glsl matrices are filled in column-major order)\r\n    \"\tconst mat3 Gx = mat3( -1, -2, -1, 0, 0, 0, 1, 2, 1 );\",\r\n    // x direction kernel\r\n    \"\tconst mat3 Gy = mat3( -1, 0, 1, -2, 0, 2, -1, 0, 1 );\",\r\n    // y direction kernel\r\n    // fetch the 3x3 neighbourhood of a fragment\r\n    // first column\r\n    \"\tfloat tx0y0 = texture2D( tDiffuse, vUv + texel * vec2( -1, -1 ) ).r;\",\r\n    \"\tfloat tx0y1 = texture2D( tDiffuse, vUv + texel * vec2( -1,  0 ) ).r;\",\r\n    \"\tfloat tx0y2 = texture2D( tDiffuse, vUv + texel * vec2( -1,  1 ) ).r;\",\r\n    // second column\r\n    \"\tfloat tx1y0 = texture2D( tDiffuse, vUv + texel * vec2(  0, -1 ) ).r;\",\r\n    \"\tfloat tx1y1 = texture2D( tDiffuse, vUv + texel * vec2(  0,  0 ) ).r;\",\r\n    \"\tfloat tx1y2 = texture2D( tDiffuse, vUv + texel * vec2(  0,  1 ) ).r;\",\r\n    // third column\r\n    \"\tfloat tx2y0 = texture2D( tDiffuse, vUv + texel * vec2(  1, -1 ) ).r;\",\r\n    \"\tfloat tx2y1 = texture2D( tDiffuse, vUv + texel * vec2(  1,  0 ) ).r;\",\r\n    \"\tfloat tx2y2 = texture2D( tDiffuse, vUv + texel * vec2(  1,  1 ) ).r;\",\r\n    // gradient value in x direction\r\n    \"\tfloat valueGx = Gx[0][0] * tx0y0 + Gx[1][0] * tx1y0 + Gx[2][0] * tx2y0 + \",\r\n    \"\t\tGx[0][1] * tx0y1 + Gx[1][1] * tx1y1 + Gx[2][1] * tx2y1 + \",\r\n    \"\t\tGx[0][2] * tx0y2 + Gx[1][2] * tx1y2 + Gx[2][2] * tx2y2; \",\r\n    // gradient value in y direction\r\n    \"\tfloat valueGy = Gy[0][0] * tx0y0 + Gy[1][0] * tx1y0 + Gy[2][0] * tx2y0 + \",\r\n    \"\t\tGy[0][1] * tx0y1 + Gy[1][1] * tx1y1 + Gy[2][1] * tx2y1 + \",\r\n    \"\t\tGy[0][2] * tx0y2 + Gy[1][2] * tx1y2 + Gy[2][2] * tx2y2; \",\r\n    // magnitute of the total gradient\r\n    \"\tfloat G = sqrt( ( valueGx * valueGx ) + ( valueGy * valueGy ) );\",\r\n    \"\tgl_FragColor = vec4( vec3( G ), 1 );\",\r\n    \"}\"\r\n  ].join(\"\\n\")\r\n};\r\nexport {\r\n  SobelOperatorShader\r\n};\r\n", "const TechnicolorShader = {\r\n  uniforms: {\r\n    tDiffuse: { value: null }\r\n  },\r\n  vertexShader: [\r\n    \"varying vec2 vUv;\",\r\n    \"void main() {\",\r\n    \"\tvUv = uv;\",\r\n    \"\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\r\n    \"}\"\r\n  ].join(\"\\n\"),\r\n  fragmentShader: [\r\n    \"uniform sampler2D tDiffuse;\",\r\n    \"varying vec2 vUv;\",\r\n    \"void main() {\",\r\n    \"\tvec4 tex = texture2D( tDiffuse, vec2( vUv.x, vUv.y ) );\",\r\n    \"\tvec4 newTex = vec4(tex.r, (tex.g + tex.b) * .5, (tex.g + tex.b) * .5, 1.0);\",\r\n    \"\tgl_FragColor = newTex;\",\r\n    \"}\"\r\n  ].join(\"\\n\")\r\n};\r\nexport {\r\n  TechnicolorShader\r\n};\r\n", "import { Vector3, Color } from \"three\";\r\nconst ToonShader1 = {\r\n  uniforms: {\r\n    uDirLightPos: { value: /* @__PURE__ */ new Vector3() },\r\n    uDirLightColor: { value: /* @__PURE__ */ new Color(15658734) },\r\n    uAmbientLightColor: { value: /* @__PURE__ */ new Color(328965) },\r\n    uBaseColor: { value: /* @__PURE__ */ new Color(16777215) }\r\n  },\r\n  vertexShader: [\r\n    \"varying vec3 vNormal;\",\r\n    \"varying vec3 vRefract;\",\r\n    \"void main() {\",\r\n    \"\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\",\r\n    \"\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\",\r\n    \"\tvec3 worldNormal = normalize ( mat3( modelMatrix[0].xyz, modelMatrix[1].xyz, modelMatrix[2].xyz ) * normal );\",\r\n    \"\tvNormal = normalize( normalMatrix * normal );\",\r\n    \"\tvec3 I = worldPosition.xyz - cameraPosition;\",\r\n    \"\tvRefract = refract( normalize( I ), worldNormal, 1.02 );\",\r\n    \"\tgl_Position = projectionMatrix * mvPosition;\",\r\n    \"}\"\r\n  ].join(\"\\n\"),\r\n  fragmentShader: [\r\n    \"uniform vec3 uBaseColor;\",\r\n    \"uniform vec3 uDirLightPos;\",\r\n    \"uniform vec3 uDirLightColor;\",\r\n    \"uniform vec3 uAmbientLightColor;\",\r\n    \"varying vec3 vNormal;\",\r\n    \"varying vec3 vRefract;\",\r\n    \"void main() {\",\r\n    \"\tfloat directionalLightWeighting = max( dot( normalize( vNormal ), uDirLightPos ), 0.0);\",\r\n    \"\tvec3 lightWeighting = uAmbientLightColor + uDirLightColor * directionalLightWeighting;\",\r\n    \"\tfloat intensity = smoothstep( - 0.5, 1.0, pow( length(lightWeighting), 20.0 ) );\",\r\n    \"\tintensity += length(lightWeighting) * 0.2;\",\r\n    \"\tfloat cameraWeighting = dot( normalize( vNormal ), vRefract );\",\r\n    \"\tintensity += pow( 1.0 - length( cameraWeighting ), 6.0 );\",\r\n    \"\tintensity = intensity * 0.2 + 0.3;\",\r\n    \"\tif ( intensity < 0.50 ) {\",\r\n    \"\t\tgl_FragColor = vec4( 2.0 * intensity * uBaseColor, 1.0 );\",\r\n    \"\t} else {\",\r\n    \"\t\tgl_FragColor = vec4( 1.0 - 2.0 * ( 1.0 - intensity ) * ( 1.0 - uBaseColor ), 1.0 );\",\r\n    \"}\",\r\n    \"}\"\r\n  ].join(\"\\n\")\r\n};\r\nconst ToonShader2 = {\r\n  uniforms: {\r\n    uDirLightPos: { value: /* @__PURE__ */ new Vector3() },\r\n    uDirLightColor: { value: /* @__PURE__ */ new Color(15658734) },\r\n    uAmbientLightColor: { value: /* @__PURE__ */ new Color(328965) },\r\n    uBaseColor: { value: /* @__PURE__ */ new Color(15658734) },\r\n    uLineColor1: { value: /* @__PURE__ */ new Color(8421504) },\r\n    uLineColor2: { value: /* @__PURE__ */ new Color(0) },\r\n    uLineColor3: { value: /* @__PURE__ */ new Color(0) },\r\n    uLineColor4: { value: /* @__PURE__ */ new Color(0) }\r\n  },\r\n  vertexShader: [\r\n    \"varying vec3 vNormal;\",\r\n    \"void main() {\",\r\n    \"\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\r\n    \"\tvNormal = normalize( normalMatrix * normal );\",\r\n    \"}\"\r\n  ].join(\"\\n\"),\r\n  fragmentShader: [\r\n    \"uniform vec3 uBaseColor;\",\r\n    \"uniform vec3 uLineColor1;\",\r\n    \"uniform vec3 uLineColor2;\",\r\n    \"uniform vec3 uLineColor3;\",\r\n    \"uniform vec3 uLineColor4;\",\r\n    \"uniform vec3 uDirLightPos;\",\r\n    \"uniform vec3 uDirLightColor;\",\r\n    \"uniform vec3 uAmbientLightColor;\",\r\n    \"varying vec3 vNormal;\",\r\n    \"void main() {\",\r\n    \"\tfloat camera = max( dot( normalize( vNormal ), vec3( 0.0, 0.0, 1.0 ) ), 0.4);\",\r\n    \"\tfloat light = max( dot( normalize( vNormal ), uDirLightPos ), 0.0);\",\r\n    \"\tgl_FragColor = vec4( uBaseColor, 1.0 );\",\r\n    \"\tif ( length(uAmbientLightColor + uDirLightColor * light) < 1.00 ) {\",\r\n    \"\t\tgl_FragColor *= vec4( uLineColor1, 1.0 );\",\r\n    \"\t}\",\r\n    \"\tif ( length(uAmbientLightColor + uDirLightColor * camera) < 0.50 ) {\",\r\n    \"\t\tgl_FragColor *= vec4( uLineColor2, 1.0 );\",\r\n    \"\t}\",\r\n    \"}\"\r\n  ].join(\"\\n\")\r\n};\r\nconst ToonShaderHatching = {\r\n  uniforms: {\r\n    uDirLightPos: { value: /* @__PURE__ */ new Vector3() },\r\n    uDirLightColor: { value: /* @__PURE__ */ new Color(15658734) },\r\n    uAmbientLightColor: { value: /* @__PURE__ */ new Color(328965) },\r\n    uBaseColor: { value: /* @__PURE__ */ new Color(16777215) },\r\n    uLineColor1: { value: /* @__PURE__ */ new Color(0) },\r\n    uLineColor2: { value: /* @__PURE__ */ new Color(0) },\r\n    uLineColor3: { value: /* @__PURE__ */ new Color(0) },\r\n    uLineColor4: { value: /* @__PURE__ */ new Color(0) }\r\n  },\r\n  vertexShader: [\r\n    \"varying vec3 vNormal;\",\r\n    \"void main() {\",\r\n    \"\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\r\n    \"\tvNormal = normalize( normalMatrix * normal );\",\r\n    \"}\"\r\n  ].join(\"\\n\"),\r\n  fragmentShader: [\r\n    \"uniform vec3 uBaseColor;\",\r\n    \"uniform vec3 uLineColor1;\",\r\n    \"uniform vec3 uLineColor2;\",\r\n    \"uniform vec3 uLineColor3;\",\r\n    \"uniform vec3 uLineColor4;\",\r\n    \"uniform vec3 uDirLightPos;\",\r\n    \"uniform vec3 uDirLightColor;\",\r\n    \"uniform vec3 uAmbientLightColor;\",\r\n    \"varying vec3 vNormal;\",\r\n    \"void main() {\",\r\n    \"\tfloat directionalLightWeighting = max( dot( normalize(vNormal), uDirLightPos ), 0.0);\",\r\n    \"\tvec3 lightWeighting = uAmbientLightColor + uDirLightColor * directionalLightWeighting;\",\r\n    \"\tgl_FragColor = vec4( uBaseColor, 1.0 );\",\r\n    \"\tif ( length(lightWeighting) < 1.00 ) {\",\r\n    \"\t\tif ( mod(gl_FragCoord.x + gl_FragCoord.y, 10.0) == 0.0) {\",\r\n    \"\t\t\tgl_FragColor = vec4( uLineColor1, 1.0 );\",\r\n    \"\t\t}\",\r\n    \"\t}\",\r\n    \"\tif ( length(lightWeighting) < 0.75 ) {\",\r\n    \"\t\tif (mod(gl_FragCoord.x - gl_FragCoord.y, 10.0) == 0.0) {\",\r\n    \"\t\t\tgl_FragColor = vec4( uLineColor2, 1.0 );\",\r\n    \"\t\t}\",\r\n    \"\t}\",\r\n    \"\tif ( length(lightWeighting) < 0.50 ) {\",\r\n    \"\t\tif (mod(gl_FragCoord.x + gl_FragCoord.y - 5.0, 10.0) == 0.0) {\",\r\n    \"\t\t\tgl_FragColor = vec4( uLineColor3, 1.0 );\",\r\n    \"\t\t}\",\r\n    \"\t}\",\r\n    \"\tif ( length(lightWeighting) < 0.3465 ) {\",\r\n    \"\t\tif (mod(gl_FragCoord.x - gl_FragCoord.y - 5.0, 10.0) == 0.0) {\",\r\n    \"\t\t\tgl_FragColor = vec4( uLineColor4, 1.0 );\",\r\n    \"\t}\",\r\n    \"\t}\",\r\n    \"}\"\r\n  ].join(\"\\n\")\r\n};\r\nconst ToonShaderDotted = {\r\n  uniforms: {\r\n    uDirLightPos: { value: /* @__PURE__ */ new Vector3() },\r\n    uDirLightColor: { value: /* @__PURE__ */ new Color(15658734) },\r\n    uAmbientLightColor: { value: /* @__PURE__ */ new Color(328965) },\r\n    uBaseColor: { value: /* @__PURE__ */ new Color(16777215) },\r\n    uLineColor1: { value: /* @__PURE__ */ new Color(0) }\r\n  },\r\n  vertexShader: [\r\n    \"varying vec3 vNormal;\",\r\n    \"void main() {\",\r\n    \"\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\r\n    \"\tvNormal = normalize( normalMatrix * normal );\",\r\n    \"}\"\r\n  ].join(\"\\n\"),\r\n  fragmentShader: [\r\n    \"uniform vec3 uBaseColor;\",\r\n    \"uniform vec3 uLineColor1;\",\r\n    \"uniform vec3 uLineColor2;\",\r\n    \"uniform vec3 uLineColor3;\",\r\n    \"uniform vec3 uLineColor4;\",\r\n    \"uniform vec3 uDirLightPos;\",\r\n    \"uniform vec3 uDirLightColor;\",\r\n    \"uniform vec3 uAmbientLightColor;\",\r\n    \"varying vec3 vNormal;\",\r\n    \"void main() {\",\r\n    \"float directionalLightWeighting = max( dot( normalize(vNormal), uDirLightPos ), 0.0);\",\r\n    \"vec3 lightWeighting = uAmbientLightColor + uDirLightColor * directionalLightWeighting;\",\r\n    \"gl_FragColor = vec4( uBaseColor, 1.0 );\",\r\n    \"if ( length(lightWeighting) < 1.00 ) {\",\r\n    \"\t\tif ( ( mod(gl_FragCoord.x, 4.001) + mod(gl_FragCoord.y, 4.0) ) > 6.00 ) {\",\r\n    \"\t\t\tgl_FragColor = vec4( uLineColor1, 1.0 );\",\r\n    \"\t\t}\",\r\n    \"\t}\",\r\n    \"\tif ( length(lightWeighting) < 0.50 ) {\",\r\n    \"\t\tif ( ( mod(gl_FragCoord.x + 2.0, 4.001) + mod(gl_FragCoord.y + 2.0, 4.0) ) > 6.00 ) {\",\r\n    \"\t\t\tgl_FragColor = vec4( uLineColor1, 1.0 );\",\r\n    \"\t\t}\",\r\n    \"\t}\",\r\n    \"}\"\r\n  ].join(\"\\n\")\r\n};\r\nexport {\r\n  ToonShader1,\r\n  ToonShader2,\r\n  ToonShaderDotted,\r\n  ToonShaderHatching\r\n};\r\n", "import { Vector2 } from \"three\";\r\nconst TriangleBlurShader = {\r\n  uniforms: {\r\n    texture: { value: null },\r\n    delta: { value: /* @__PURE__ */ new Vector2(1, 1) }\r\n  },\r\n  vertexShader: [\r\n    \"varying vec2 vUv;\",\r\n    \"void main() {\",\r\n    \"\tvUv = uv;\",\r\n    \"\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\r\n    \"}\"\r\n  ].join(\"\\n\"),\r\n  fragmentShader: [\r\n    \"#include <common>\",\r\n    \"#define ITERATIONS 10.0\",\r\n    \"uniform sampler2D texture;\",\r\n    \"uniform vec2 delta;\",\r\n    \"varying vec2 vUv;\",\r\n    \"void main() {\",\r\n    \"\tvec4 color = vec4( 0.0 );\",\r\n    \"\tfloat total = 0.0;\",\r\n    // randomize the lookup values to hide the fixed number of samples\r\n    \"\tfloat offset = rand( vUv );\",\r\n    \"\tfor ( float t = -ITERATIONS; t <= ITERATIONS; t ++ ) {\",\r\n    \"\t\tfloat percent = ( t + offset - 0.5 ) / ITERATIONS;\",\r\n    \"\t\tfloat weight = 1.0 - abs( percent );\",\r\n    \"\t\tcolor += texture2D( texture, vUv + delta * percent ) * weight;\",\r\n    \"\t\ttotal += weight;\",\r\n    \"\t}\",\r\n    \"\tgl_FragColor = color / total;\",\r\n    \"}\"\r\n  ].join(\"\\n\")\r\n};\r\nexport {\r\n  TriangleBlurShader\r\n};\r\n", "const VerticalBlurShader = {\r\n  uniforms: {\r\n    tDiffuse: { value: null },\r\n    v: { value: 1 / 512 }\r\n  },\r\n  vertexShader: (\r\n    /* glsl */\r\n    `\r\n    varying vec2 vUv;\r\n\r\n    void main() {\r\n\r\n      vUv = uv;\r\n      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\r\n\r\n    }\r\n  `\r\n  ),\r\n  fragmentShader: (\r\n    /* glsl */\r\n    `\r\n\r\n  uniform sampler2D tDiffuse;\r\n  uniform float v;\r\n\r\n  varying vec2 vUv;\r\n\r\n  void main() {\r\n\r\n    vec4 sum = vec4( 0.0 );\r\n\r\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;\r\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;\r\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;\r\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;\r\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;\r\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;\r\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;\r\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;\r\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;\r\n\r\n    gl_FragColor = sum;\r\n\r\n  }\r\n  `\r\n  )\r\n};\r\nexport {\r\n  VerticalBlurShader\r\n};\r\n", "const VerticalTiltShiftShader = {\r\n  uniforms: {\r\n    tDiffuse: { value: null },\r\n    v: { value: 1 / 512 },\r\n    r: { value: 0.35 }\r\n  },\r\n  vertexShader: [\r\n    \"varying vec2 vUv;\",\r\n    \"void main() {\",\r\n    \"\tvUv = uv;\",\r\n    \"\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\r\n    \"}\"\r\n  ].join(\"\\n\"),\r\n  fragmentShader: [\r\n    \"uniform sampler2D tDiffuse;\",\r\n    \"uniform float v;\",\r\n    \"uniform float r;\",\r\n    \"varying vec2 vUv;\",\r\n    \"void main() {\",\r\n    \"\tvec4 sum = vec4( 0.0 );\",\r\n    \"\tfloat vv = v * abs( r - vUv.y );\",\r\n    \"\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * vv ) ) * 0.051;\",\r\n    \"\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * vv ) ) * 0.0918;\",\r\n    \"\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * vv ) ) * 0.12245;\",\r\n    \"\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * vv ) ) * 0.1531;\",\r\n    \"\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;\",\r\n    \"\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * vv ) ) * 0.1531;\",\r\n    \"\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * vv ) ) * 0.12245;\",\r\n    \"\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * vv ) ) * 0.0918;\",\r\n    \"\tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * vv ) ) * 0.051;\",\r\n    \"\tgl_FragColor = sum;\",\r\n    \"}\"\r\n  ].join(\"\\n\")\r\n};\r\nexport {\r\n  VerticalTiltShiftShader\r\n};\r\n", "const VignetteShader = {\r\n  uniforms: {\r\n    tDiffuse: { value: null },\r\n    offset: { value: 1 },\r\n    darkness: { value: 1 }\r\n  },\r\n  vertexShader: [\r\n    \"varying vec2 vUv;\",\r\n    \"void main() {\",\r\n    \"\tvUv = uv;\",\r\n    \"\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\r\n    \"}\"\r\n  ].join(\"\\n\"),\r\n  fragmentShader: [\r\n    \"uniform float offset;\",\r\n    \"uniform float darkness;\",\r\n    \"uniform sampler2D tDiffuse;\",\r\n    \"varying vec2 vUv;\",\r\n    \"void main() {\",\r\n    // Eskil's vignette\r\n    \"\tvec4 texel = texture2D( tDiffuse, vUv );\",\r\n    \"\tvec2 uv = ( vUv - vec2( 0.5 ) ) * vec2( offset );\",\r\n    \"\tgl_FragColor = vec4( mix( texel.rgb, vec3( 1.0 - darkness ), dot( uv, uv ) ), texel.a );\",\r\n    /*\r\n    \t\t// alternative version from glfx.js\r\n    \t\t// this one makes more \"dusty\" look (as opposed to \"burned\")\r\n    \r\n    \t\t\"\tvec4 color = texture2D( tDiffuse, vUv );\",\r\n    \t\t\"\tfloat dist = distance( vUv, vec2( 0.5 ) );\",\r\n    \t\t\"\tcolor.rgb *= smoothstep( 0.8, offset * 0.799, dist *( darkness + offset ) );\",\r\n    \t\t\"\tgl_FragColor = color;\",\r\n    \t\t*/\r\n    \"}\"\r\n  ].join(\"\\n\")\r\n};\r\nexport {\r\n  VignetteShader\r\n};\r\n", "import { Vector3, Vector2 } from \"three\";\r\nconst VolumeRenderShader1 = {\r\n  uniforms: {\r\n    u_size: { value: /* @__PURE__ */ new Vector3(1, 1, 1) },\r\n    u_renderstyle: { value: 0 },\r\n    u_renderthreshold: { value: 0.5 },\r\n    u_clim: { value: /* @__PURE__ */ new Vector2(1, 1) },\r\n    u_data: { value: null },\r\n    u_cmdata: { value: null }\r\n  },\r\n  vertexShader: [\r\n    \"\t\tvarying vec4 v_nearpos;\",\r\n    \"\t\tvarying vec4 v_farpos;\",\r\n    \"\t\tvarying vec3 v_position;\",\r\n    \"\t\tvoid main() {\",\r\n    // Prepare transforms to map to \"camera view\". See also:\r\n    // https://threejs.org/docs/#api/renderers/webgl/WebGLProgram\r\n    \"\t\t\t\tmat4 viewtransformf = modelViewMatrix;\",\r\n    \"\t\t\t\tmat4 viewtransformi = inverse(modelViewMatrix);\",\r\n    // Project local vertex coordinate to camera position. Then do a step\r\n    // backward (in cam coords) to the near clipping plane, and project back. Do\r\n    // the same for the far clipping plane. This gives us all the information we\r\n    // need to calculate the ray and truncate it to the viewing cone.\r\n    \"\t\t\t\tvec4 position4 = vec4(position, 1.0);\",\r\n    \"\t\t\t\tvec4 pos_in_cam = viewtransformf * position4;\",\r\n    // Intersection of ray and near clipping plane (z = -1 in clip coords)\r\n    \"\t\t\t\tpos_in_cam.z = -pos_in_cam.w;\",\r\n    \"\t\t\t\tv_nearpos = viewtransformi * pos_in_cam;\",\r\n    // Intersection of ray and far clipping plane (z = +1 in clip coords)\r\n    \"\t\t\t\tpos_in_cam.z = pos_in_cam.w;\",\r\n    \"\t\t\t\tv_farpos = viewtransformi * pos_in_cam;\",\r\n    // Set varyings and output pos\r\n    \"\t\t\t\tv_position = position;\",\r\n    \"\t\t\t\tgl_Position = projectionMatrix * viewMatrix * modelMatrix * position4;\",\r\n    \"\t\t}\"\r\n  ].join(\"\\n\"),\r\n  fragmentShader: [\r\n    \"\t\tprecision highp float;\",\r\n    \"\t\tprecision mediump sampler3D;\",\r\n    \"\t\tuniform vec3 u_size;\",\r\n    \"\t\tuniform int u_renderstyle;\",\r\n    \"\t\tuniform float u_renderthreshold;\",\r\n    \"\t\tuniform vec2 u_clim;\",\r\n    \"\t\tuniform sampler3D u_data;\",\r\n    \"\t\tuniform sampler2D u_cmdata;\",\r\n    \"\t\tvarying vec3 v_position;\",\r\n    \"\t\tvarying vec4 v_nearpos;\",\r\n    \"\t\tvarying vec4 v_farpos;\",\r\n    // The maximum distance through our rendering volume is sqrt(3).\r\n    \"\t\tconst int MAX_STEPS = 887;\t// 887 for 512^3, 1774 for 1024^3\",\r\n    \"\t\tconst int REFINEMENT_STEPS = 4;\",\r\n    \"\t\tconst float relative_step_size = 1.0;\",\r\n    \"\t\tconst vec4 ambient_color = vec4(0.2, 0.4, 0.2, 1.0);\",\r\n    \"\t\tconst vec4 diffuse_color = vec4(0.8, 0.2, 0.2, 1.0);\",\r\n    \"\t\tconst vec4 specular_color = vec4(1.0, 1.0, 1.0, 1.0);\",\r\n    \"\t\tconst float shininess = 40.0;\",\r\n    \"\t\tvoid cast_mip(vec3 start_loc, vec3 step, int nsteps, vec3 view_ray);\",\r\n    \"\t\tvoid cast_iso(vec3 start_loc, vec3 step, int nsteps, vec3 view_ray);\",\r\n    \"\t\tfloat sample1(vec3 texcoords);\",\r\n    \"\t\tvec4 apply_colormap(float val);\",\r\n    \"\t\tvec4 add_lighting(float val, vec3 loc, vec3 step, vec3 view_ray);\",\r\n    \"\t\tvoid main() {\",\r\n    // Normalize clipping plane info\r\n    \"\t\t\t\tvec3 farpos = v_farpos.xyz / v_farpos.w;\",\r\n    \"\t\t\t\tvec3 nearpos = v_nearpos.xyz / v_nearpos.w;\",\r\n    // Calculate unit vector pointing in the view direction through this fragment.\r\n    \"\t\t\t\tvec3 view_ray = normalize(nearpos.xyz - farpos.xyz);\",\r\n    // Compute the (negative) distance to the front surface or near clipping plane.\r\n    // v_position is the back face of the cuboid, so the initial distance calculated in the dot\r\n    // product below is the distance from near clip plane to the back of the cuboid\r\n    \"\t\t\t\tfloat distance = dot(nearpos - v_position, view_ray);\",\r\n    \"\t\t\t\tdistance = max(distance, min((-0.5 - v_position.x) / view_ray.x,\",\r\n    \"\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(u_size.x - 0.5 - v_position.x) / view_ray.x));\",\r\n    \"\t\t\t\tdistance = max(distance, min((-0.5 - v_position.y) / view_ray.y,\",\r\n    \"\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(u_size.y - 0.5 - v_position.y) / view_ray.y));\",\r\n    \"\t\t\t\tdistance = max(distance, min((-0.5 - v_position.z) / view_ray.z,\",\r\n    \"\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(u_size.z - 0.5 - v_position.z) / view_ray.z));\",\r\n    // Now we have the starting position on the front surface\r\n    \"\t\t\t\tvec3 front = v_position + view_ray * distance;\",\r\n    // Decide how many steps to take\r\n    \"\t\t\t\tint nsteps = int(-distance / relative_step_size + 0.5);\",\r\n    \"\t\t\t\tif ( nsteps < 1 )\",\r\n    \"\t\t\t\t\t\tdiscard;\",\r\n    // Get starting location and step vector in texture coordinates\r\n    \"\t\t\t\tvec3 step = ((v_position - front) / u_size) / float(nsteps);\",\r\n    \"\t\t\t\tvec3 start_loc = front / u_size;\",\r\n    // For testing: show the number of steps. This helps to establish\r\n    // whether the rays are correctly oriented\r\n    //'gl_FragColor = vec4(0.0, float(nsteps) / 1.0 / u_size.x, 1.0, 1.0);',\r\n    //'return;',\r\n    \"\t\t\t\tif (u_renderstyle == 0)\",\r\n    \"\t\t\t\t\t\tcast_mip(start_loc, step, nsteps, view_ray);\",\r\n    \"\t\t\t\telse if (u_renderstyle == 1)\",\r\n    \"\t\t\t\t\t\tcast_iso(start_loc, step, nsteps, view_ray);\",\r\n    \"\t\t\t\tif (gl_FragColor.a < 0.05)\",\r\n    \"\t\t\t\t\t\tdiscard;\",\r\n    \"\t\t}\",\r\n    \"\t\tfloat sample1(vec3 texcoords) {\",\r\n    \"\t\t\t\t/* Sample float value from a 3D texture. Assumes intensity data. */\",\r\n    \"\t\t\t\treturn texture(u_data, texcoords.xyz).r;\",\r\n    \"\t\t}\",\r\n    \"\t\tvec4 apply_colormap(float val) {\",\r\n    \"\t\t\t\tval = (val - u_clim[0]) / (u_clim[1] - u_clim[0]);\",\r\n    \"\t\t\t\treturn texture2D(u_cmdata, vec2(val, 0.5));\",\r\n    \"\t\t}\",\r\n    \"\t\tvoid cast_mip(vec3 start_loc, vec3 step, int nsteps, vec3 view_ray) {\",\r\n    \"\t\t\t\tfloat max_val = -1e6;\",\r\n    \"\t\t\t\tint max_i = 100;\",\r\n    \"\t\t\t\tvec3 loc = start_loc;\",\r\n    // Enter the raycasting loop. In WebGL 1 the loop index cannot be compared with\r\n    // non-constant expression. So we use a hard-coded max, and an additional condition\r\n    // inside the loop.\r\n    \"\t\t\t\tfor (int iter=0; iter<MAX_STEPS; iter++) {\",\r\n    \"\t\t\t\t\t\tif (iter >= nsteps)\",\r\n    \"\t\t\t\t\t\t\t\tbreak;\",\r\n    // Sample from the 3D texture\r\n    \"\t\t\t\t\t\tfloat val = sample1(loc);\",\r\n    // Apply MIP operation\r\n    \"\t\t\t\t\t\tif (val > max_val) {\",\r\n    \"\t\t\t\t\t\t\t\tmax_val = val;\",\r\n    \"\t\t\t\t\t\t\t\tmax_i = iter;\",\r\n    \"\t\t\t\t\t\t}\",\r\n    // Advance location deeper into the volume\r\n    \"\t\t\t\t\t\tloc += step;\",\r\n    \"\t\t\t\t}\",\r\n    // Refine location, gives crispier images\r\n    \"\t\t\t\tvec3 iloc = start_loc + step * (float(max_i) - 0.5);\",\r\n    \"\t\t\t\tvec3 istep = step / float(REFINEMENT_STEPS);\",\r\n    \"\t\t\t\tfor (int i=0; i<REFINEMENT_STEPS; i++) {\",\r\n    \"\t\t\t\t\t\tmax_val = max(max_val, sample1(iloc));\",\r\n    \"\t\t\t\t\t\tiloc += istep;\",\r\n    \"\t\t\t\t}\",\r\n    // Resolve final color\r\n    \"\t\t\t\tgl_FragColor = apply_colormap(max_val);\",\r\n    \"\t\t}\",\r\n    \"\t\tvoid cast_iso(vec3 start_loc, vec3 step, int nsteps, vec3 view_ray) {\",\r\n    \"\t\t\t\tgl_FragColor = vec4(0.0);\t// init transparent\",\r\n    \"\t\t\t\tvec4 color3 = vec4(0.0);\t// final color\",\r\n    \"\t\t\t\tvec3 dstep = 1.5 / u_size;\t// step to sample derivative\",\r\n    \"\t\t\t\tvec3 loc = start_loc;\",\r\n    \"\t\t\t\tfloat low_threshold = u_renderthreshold - 0.02 * (u_clim[1] - u_clim[0]);\",\r\n    // Enter the raycasting loop. In WebGL 1 the loop index cannot be compared with\r\n    // non-constant expression. So we use a hard-coded max, and an additional condition\r\n    // inside the loop.\r\n    \"\t\t\t\tfor (int iter=0; iter<MAX_STEPS; iter++) {\",\r\n    \"\t\t\t\t\t\tif (iter >= nsteps)\",\r\n    \"\t\t\t\t\t\t\t\tbreak;\",\r\n    // Sample from the 3D texture\r\n    \"\t\t\t\t\t\tfloat val = sample1(loc);\",\r\n    \"\t\t\t\t\t\tif (val > low_threshold) {\",\r\n    // Take the last interval in smaller steps\r\n    \"\t\t\t\t\t\t\t\tvec3 iloc = loc - 0.5 * step;\",\r\n    \"\t\t\t\t\t\t\t\tvec3 istep = step / float(REFINEMENT_STEPS);\",\r\n    \"\t\t\t\t\t\t\t\tfor (int i=0; i<REFINEMENT_STEPS; i++) {\",\r\n    \"\t\t\t\t\t\t\t\t\t\tval = sample1(iloc);\",\r\n    \"\t\t\t\t\t\t\t\t\t\tif (val > u_renderthreshold) {\",\r\n    \"\t\t\t\t\t\t\t\t\t\t\t\tgl_FragColor = add_lighting(val, iloc, dstep, view_ray);\",\r\n    \"\t\t\t\t\t\t\t\t\t\t\t\treturn;\",\r\n    \"\t\t\t\t\t\t\t\t\t\t}\",\r\n    \"\t\t\t\t\t\t\t\t\t\tiloc += istep;\",\r\n    \"\t\t\t\t\t\t\t\t}\",\r\n    \"\t\t\t\t\t\t}\",\r\n    // Advance location deeper into the volume\r\n    \"\t\t\t\t\t\tloc += step;\",\r\n    \"\t\t\t\t}\",\r\n    \"\t\t}\",\r\n    \"\t\tvec4 add_lighting(float val, vec3 loc, vec3 step, vec3 view_ray)\",\r\n    \"\t\t{\",\r\n    // Calculate color by incorporating lighting\r\n    // View direction\r\n    \"\t\t\t\tvec3 V = normalize(view_ray);\",\r\n    // calculate normal vector from gradient\r\n    \"\t\t\t\tvec3 N;\",\r\n    \"\t\t\t\tfloat val1, val2;\",\r\n    \"\t\t\t\tval1 = sample1(loc + vec3(-step[0], 0.0, 0.0));\",\r\n    \"\t\t\t\tval2 = sample1(loc + vec3(+step[0], 0.0, 0.0));\",\r\n    \"\t\t\t\tN[0] = val1 - val2;\",\r\n    \"\t\t\t\tval = max(max(val1, val2), val);\",\r\n    \"\t\t\t\tval1 = sample1(loc + vec3(0.0, -step[1], 0.0));\",\r\n    \"\t\t\t\tval2 = sample1(loc + vec3(0.0, +step[1], 0.0));\",\r\n    \"\t\t\t\tN[1] = val1 - val2;\",\r\n    \"\t\t\t\tval = max(max(val1, val2), val);\",\r\n    \"\t\t\t\tval1 = sample1(loc + vec3(0.0, 0.0, -step[2]));\",\r\n    \"\t\t\t\tval2 = sample1(loc + vec3(0.0, 0.0, +step[2]));\",\r\n    \"\t\t\t\tN[2] = val1 - val2;\",\r\n    \"\t\t\t\tval = max(max(val1, val2), val);\",\r\n    \"\t\t\t\tfloat gm = length(N); // gradient magnitude\",\r\n    \"\t\t\t\tN = normalize(N);\",\r\n    // Flip normal so it points towards viewer\r\n    \"\t\t\t\tfloat Nselect = float(dot(N, V) > 0.0);\",\r\n    \"\t\t\t\tN = (2.0 * Nselect - 1.0) * N;\t// ==\tNselect * N - (1.0-Nselect)*N;\",\r\n    // Init colors\r\n    \"\t\t\t\tvec4 ambient_color = vec4(0.0, 0.0, 0.0, 0.0);\",\r\n    \"\t\t\t\tvec4 diffuse_color = vec4(0.0, 0.0, 0.0, 0.0);\",\r\n    \"\t\t\t\tvec4 specular_color = vec4(0.0, 0.0, 0.0, 0.0);\",\r\n    // note: could allow multiple lights\r\n    \"\t\t\t\tfor (int i=0; i<1; i++)\",\r\n    \"\t\t\t\t{\",\r\n    // Get light direction (make sure to prevent zero devision)\r\n    \"\t\t\t\t\t\tvec3 L = normalize(view_ray);\t//lightDirs[i];\",\r\n    \"\t\t\t\t\t\tfloat lightEnabled = float( length(L) > 0.0 );\",\r\n    \"\t\t\t\t\t\tL = normalize(L + (1.0 - lightEnabled));\",\r\n    // Calculate lighting properties\r\n    \"\t\t\t\t\t\tfloat lambertTerm = clamp(dot(N, L), 0.0, 1.0);\",\r\n    \"\t\t\t\t\t\tvec3 H = normalize(L+V); // Halfway vector\",\r\n    \"\t\t\t\t\t\tfloat specularTerm = pow(max(dot(H, N), 0.0), shininess);\",\r\n    // Calculate mask\r\n    \"\t\t\t\t\t\tfloat mask1 = lightEnabled;\",\r\n    // Calculate colors\r\n    \"\t\t\t\t\t\tambient_color +=\tmask1 * ambient_color;\t// * gl_LightSource[i].ambient;\",\r\n    \"\t\t\t\t\t\tdiffuse_color +=\tmask1 * lambertTerm;\",\r\n    \"\t\t\t\t\t\tspecular_color += mask1 * specularTerm * specular_color;\",\r\n    \"\t\t\t\t}\",\r\n    // Calculate final color by componing different components\r\n    \"\t\t\t\tvec4 final_color;\",\r\n    \"\t\t\t\tvec4 color = apply_colormap(val);\",\r\n    \"\t\t\t\tfinal_color = color * (ambient_color + diffuse_color) + specular_color;\",\r\n    \"\t\t\t\tfinal_color.a = color.a;\",\r\n    \"\t\t\t\treturn final_color;\",\r\n    \"\t\t}\"\r\n  ].join(\"\\n\")\r\n};\r\nexport {\r\n  VolumeRenderShader1\r\n};\r\n", "const WaterRefractionShader = {\r\n  uniforms: {\r\n    color: {\r\n      value: null\r\n    },\r\n    time: {\r\n      value: 0\r\n    },\r\n    tDiffuse: {\r\n      value: null\r\n    },\r\n    tDudv: {\r\n      value: null\r\n    },\r\n    textureMatrix: {\r\n      value: null\r\n    }\r\n  },\r\n  vertexShader: [\r\n    \"uniform mat4 textureMatrix;\",\r\n    \"varying vec2 vUv;\",\r\n    \"varying vec4 vUvRefraction;\",\r\n    \"void main() {\",\r\n    \"\tvUv = uv;\",\r\n    \"\tvUvRefraction = textureMatrix * vec4( position, 1.0 );\",\r\n    \"\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\r\n    \"}\"\r\n  ].join(\"\\n\"),\r\n  fragmentShader: [\r\n    \"uniform vec3 color;\",\r\n    \"uniform float time;\",\r\n    \"uniform sampler2D tDiffuse;\",\r\n    \"uniform sampler2D tDudv;\",\r\n    \"varying vec2 vUv;\",\r\n    \"varying vec4 vUvRefraction;\",\r\n    \"float blendOverlay( float base, float blend ) {\",\r\n    \"\treturn( base < 0.5 ? ( 2.0 * base * blend ) : ( 1.0 - 2.0 * ( 1.0 - base ) * ( 1.0 - blend ) ) );\",\r\n    \"}\",\r\n    \"vec3 blendOverlay( vec3 base, vec3 blend ) {\",\r\n    \"\treturn vec3( blendOverlay( base.r, blend.r ), blendOverlay( base.g, blend.g ),blendOverlay( base.b, blend.b ) );\",\r\n    \"}\",\r\n    \"void main() {\",\r\n    \" float waveStrength = 0.1;\",\r\n    \" float waveSpeed = 0.03;\",\r\n    // simple distortion (ripple) via dudv map (see https://www.youtube.com/watch?v=6B7IF6GOu7s)\r\n    \"\tvec2 distortedUv = texture2D( tDudv, vec2( vUv.x + time * waveSpeed, vUv.y ) ).rg * waveStrength;\",\r\n    \"\tdistortedUv = vUv.xy + vec2( distortedUv.x, distortedUv.y + time * waveSpeed );\",\r\n    \"\tvec2 distortion = ( texture2D( tDudv, distortedUv ).rg * 2.0 - 1.0 ) * waveStrength;\",\r\n    // new uv coords\r\n    \" vec4 uv = vec4( vUvRefraction );\",\r\n    \" uv.xy += distortion;\",\r\n    \"\tvec4 base = texture2DProj( tDiffuse, uv );\",\r\n    \"\tgl_FragColor = vec4( blendOverlay( base.rgb, color ), 1.0 );\",\r\n    \"}\"\r\n  ].join(\"\\n\")\r\n};\r\nexport {\r\n  WaterRefractionShader\r\n};\r\n", "import { Vector2, Group, Raycaster, Matrix4 } from \"three\";\r\nconst _pointer = /* @__PURE__ */ new Vector2();\r\nconst _event = { type: \"\", data: _pointer };\r\nclass InteractiveGroup extends Group {\r\n  constructor(renderer, camera) {\r\n    super();\r\n    const scope = this;\r\n    const raycaster = new Raycaster();\r\n    const tempMatrix = new Matrix4();\r\n    const element = renderer.domElement;\r\n    function onPointerEvent(event) {\r\n      event.stopPropagation();\r\n      _pointer.x = event.clientX / element.clientWidth * 2 - 1;\r\n      _pointer.y = -(event.clientY / element.clientHeight) * 2 + 1;\r\n      raycaster.setFromCamera(_pointer, camera);\r\n      const intersects = raycaster.intersectObjects(scope.children, false);\r\n      if (intersects.length > 0) {\r\n        const intersection = intersects[0];\r\n        const object = intersection.object;\r\n        const uv = intersection.uv;\r\n        _event.type = event.type;\r\n        _event.data.set(uv.x, 1 - uv.y);\r\n        object.dispatchEvent(_event);\r\n      }\r\n    }\r\n    element.addEventListener(\"pointerdown\", onPointerEvent);\r\n    element.addEventListener(\"pointerup\", onPointerEvent);\r\n    element.addEventListener(\"pointermove\", onPointerEvent);\r\n    element.addEventListener(\"mousedown\", onPointerEvent);\r\n    element.addEventListener(\"mouseup\", onPointerEvent);\r\n    element.addEventListener(\"mousemove\", onPointerEvent);\r\n    element.addEventListener(\"click\", onPointerEvent);\r\n    const events = {\r\n      move: \"mousemove\",\r\n      select: \"click\",\r\n      selectstart: \"mousedown\",\r\n      selectend: \"mouseup\"\r\n    };\r\n    function onXRControllerEvent(event) {\r\n      const controller = event.target;\r\n      tempMatrix.identity().extractRotation(controller.matrixWorld);\r\n      raycaster.ray.origin.setFromMatrixPosition(controller.matrixWorld);\r\n      raycaster.ray.direction.set(0, 0, -1).applyMatrix4(tempMatrix);\r\n      const intersections = raycaster.intersectObjects(scope.children, false);\r\n      if (intersections.length > 0) {\r\n        const intersection = intersections[0];\r\n        const object = intersection.object;\r\n        const uv = intersection.uv;\r\n        _event.type = events[event.type];\r\n        _event.data.set(uv.x, 1 - uv.y);\r\n        object.dispatchEvent(_event);\r\n      }\r\n    }\r\n    const controller1 = renderer.xr.getController(0);\r\n    controller1.addEventListener(\"move\", onXRControllerEvent);\r\n    controller1.addEventListener(\"select\", onXRControllerEvent);\r\n    controller1.addEventListener(\"selectstart\", onXRControllerEvent);\r\n    controller1.addEventListener(\"selectend\", onXRControllerEvent);\r\n    const controller2 = renderer.xr.getController(1);\r\n    controller2.addEventListener(\"move\", onXRControllerEvent);\r\n    controller2.addEventListener(\"select\", onXRControllerEvent);\r\n    controller2.addEventListener(\"selectstart\", onXRControllerEvent);\r\n    controller2.addEventListener(\"selectend\", onXRControllerEvent);\r\n  }\r\n}\r\nexport {\r\n  InteractiveGroup\r\n};\r\n", "import { Frustum, Vector3 } from \"three\";\r\nconst frustum = /* @__PURE__ */ new Frustum();\r\nconst center = /* @__PURE__ */ new Vector3();\r\nconst tmpPoint = /* @__PURE__ */ new Vector3();\r\nconst vecNear = /* @__PURE__ */ new Vector3();\r\nconst vecTopLeft = /* @__PURE__ */ new Vector3();\r\nconst vecTopRight = /* @__PURE__ */ new Vector3();\r\nconst vecDownRight = /* @__PURE__ */ new Vector3();\r\nconst vecDownLeft = /* @__PURE__ */ new Vector3();\r\nconst vecFarTopLeft = /* @__PURE__ */ new Vector3();\r\nconst vecFarTopRight = /* @__PURE__ */ new Vector3();\r\nconst vecFarDownRight = /* @__PURE__ */ new Vector3();\r\nconst vecFarDownLeft = /* @__PURE__ */ new Vector3();\r\nconst vectemp1 = /* @__PURE__ */ new Vector3();\r\nconst vectemp2 = /* @__PURE__ */ new Vector3();\r\nconst vectemp3 = /* @__PURE__ */ new Vector3();\r\nclass SelectionBox {\r\n  constructor(camera, scene, deep) {\r\n    this.camera = camera;\r\n    this.scene = scene;\r\n    this.startPoint = new Vector3();\r\n    this.endPoint = new Vector3();\r\n    this.collection = [];\r\n    this.deep = deep || Number.MAX_VALUE;\r\n  }\r\n  select(startPoint, endPoint) {\r\n    this.startPoint = startPoint || this.startPoint;\r\n    this.endPoint = endPoint || this.endPoint;\r\n    this.collection = [];\r\n    this.updateFrustum(this.startPoint, this.endPoint);\r\n    this.searchChildInFrustum(frustum, this.scene);\r\n    return this.collection;\r\n  }\r\n  updateFrustum(startPoint, endPoint) {\r\n    startPoint = startPoint || this.startPoint;\r\n    endPoint = endPoint || this.endPoint;\r\n    if (startPoint.x === endPoint.x) {\r\n      endPoint.x += Number.EPSILON;\r\n    }\r\n    if (startPoint.y === endPoint.y) {\r\n      endPoint.y += Number.EPSILON;\r\n    }\r\n    this.camera.updateProjectionMatrix();\r\n    this.camera.updateMatrixWorld();\r\n    if (this.camera.isPerspectiveCamera) {\r\n      tmpPoint.copy(startPoint);\r\n      tmpPoint.x = Math.min(startPoint.x, endPoint.x);\r\n      tmpPoint.y = Math.max(startPoint.y, endPoint.y);\r\n      endPoint.x = Math.max(startPoint.x, endPoint.x);\r\n      endPoint.y = Math.min(startPoint.y, endPoint.y);\r\n      vecNear.setFromMatrixPosition(this.camera.matrixWorld);\r\n      vecTopLeft.copy(tmpPoint);\r\n      vecTopRight.set(endPoint.x, tmpPoint.y, 0);\r\n      vecDownRight.copy(endPoint);\r\n      vecDownLeft.set(tmpPoint.x, endPoint.y, 0);\r\n      vecTopLeft.unproject(this.camera);\r\n      vecTopRight.unproject(this.camera);\r\n      vecDownRight.unproject(this.camera);\r\n      vecDownLeft.unproject(this.camera);\r\n      vectemp1.copy(vecTopLeft).sub(vecNear);\r\n      vectemp2.copy(vecTopRight).sub(vecNear);\r\n      vectemp3.copy(vecDownRight).sub(vecNear);\r\n      vectemp1.normalize();\r\n      vectemp2.normalize();\r\n      vectemp3.normalize();\r\n      vectemp1.multiplyScalar(this.deep);\r\n      vectemp2.multiplyScalar(this.deep);\r\n      vectemp3.multiplyScalar(this.deep);\r\n      vectemp1.add(vecNear);\r\n      vectemp2.add(vecNear);\r\n      vectemp3.add(vecNear);\r\n      var planes = frustum.planes;\r\n      planes[0].setFromCoplanarPoints(vecNear, vecTopLeft, vecTopRight);\r\n      planes[1].setFromCoplanarPoints(vecNear, vecTopRight, vecDownRight);\r\n      planes[2].setFromCoplanarPoints(vecDownRight, vecDownLeft, vecNear);\r\n      planes[3].setFromCoplanarPoints(vecDownLeft, vecTopLeft, vecNear);\r\n      planes[4].setFromCoplanarPoints(vecTopRight, vecDownRight, vecDownLeft);\r\n      planes[5].setFromCoplanarPoints(vectemp3, vectemp2, vectemp1);\r\n      planes[5].normal.multiplyScalar(-1);\r\n    } else if (this.camera.isOrthographicCamera) {\r\n      const left = Math.min(startPoint.x, endPoint.x);\r\n      const top = Math.max(startPoint.y, endPoint.y);\r\n      const right = Math.max(startPoint.x, endPoint.x);\r\n      const down = Math.min(startPoint.y, endPoint.y);\r\n      vecTopLeft.set(left, top, -1);\r\n      vecTopRight.set(right, top, -1);\r\n      vecDownRight.set(right, down, -1);\r\n      vecDownLeft.set(left, down, -1);\r\n      vecFarTopLeft.set(left, top, 1);\r\n      vecFarTopRight.set(right, top, 1);\r\n      vecFarDownRight.set(right, down, 1);\r\n      vecFarDownLeft.set(left, down, 1);\r\n      vecTopLeft.unproject(this.camera);\r\n      vecTopRight.unproject(this.camera);\r\n      vecDownRight.unproject(this.camera);\r\n      vecDownLeft.unproject(this.camera);\r\n      vecFarTopLeft.unproject(this.camera);\r\n      vecFarTopRight.unproject(this.camera);\r\n      vecFarDownRight.unproject(this.camera);\r\n      vecFarDownLeft.unproject(this.camera);\r\n      var planes = frustum.planes;\r\n      planes[0].setFromCoplanarPoints(vecTopLeft, vecFarTopLeft, vecFarTopRight);\r\n      planes[1].setFromCoplanarPoints(vecTopRight, vecFarTopRight, vecFarDownRight);\r\n      planes[2].setFromCoplanarPoints(vecFarDownRight, vecFarDownLeft, vecDownLeft);\r\n      planes[3].setFromCoplanarPoints(vecFarDownLeft, vecFarTopLeft, vecTopLeft);\r\n      planes[4].setFromCoplanarPoints(vecTopRight, vecDownRight, vecDownLeft);\r\n      planes[5].setFromCoplanarPoints(vecFarDownRight, vecFarTopRight, vecFarTopLeft);\r\n      planes[5].normal.multiplyScalar(-1);\r\n    } else {\r\n      console.error(\"THREE.SelectionBox: Unsupported camera type.\");\r\n    }\r\n  }\r\n  searchChildInFrustum(frustum2, object) {\r\n    if (object.isMesh || object.isLine || object.isPoints) {\r\n      if (object.material !== void 0) {\r\n        if (object.geometry.boundingSphere === null)\r\n          object.geometry.computeBoundingSphere();\r\n        center.copy(object.geometry.boundingSphere.center);\r\n        center.applyMatrix4(object.matrixWorld);\r\n        if (frustum2.containsPoint(center)) {\r\n          this.collection.push(object);\r\n        }\r\n      }\r\n    }\r\n    if (object.children.length > 0) {\r\n      for (let x = 0; x < object.children.length; x++) {\r\n        this.searchChildInFrustum(frustum2, object.children[x]);\r\n      }\r\n    }\r\n  }\r\n}\r\nexport {\r\n  SelectionBox\r\n};\r\n", "import { Loader, LoaderUtils, FileLoader, TextureLoader, RepeatWrapping, ClampToEdgeWrapping, Texture, MeshPhongMaterial, MeshLambertMaterial, Color, EquirectangularReflectionMapping, Matrix4, Group, Bone, PropertyBinding, Object3D, OrthographicCamera, PerspectiveCamera, PointLight, MathUtils, SpotLight, DirectionalLight, SkinnedMesh, Mesh, LineBasicMaterial, Line, Vector3, Skeleton, AmbientLight, BufferGeometry, Float32BufferAttribute, Uint16BufferAttribute, Matrix3, Vector4, AnimationClip, Quaternion, Euler, VectorKeyframeTrack, QuaternionKeyframeTrack, NumberKeyframeTrack } from \"three\";\r\nimport { unzlibSync } from \"fflate\";\r\nimport { NURBSCurve } from \"../curves/NURBSCurve.js\";\r\nlet fbxTree;\r\nlet connections;\r\nlet sceneGraph;\r\nclass FBXLoader extends Loader {\r\n  constructor(manager) {\r\n    super(manager);\r\n  }\r\n  load(url, onLoad, onProgress, onError) {\r\n    const scope = this;\r\n    const path = scope.path === \"\" ? LoaderUtils.extractUrlBase(url) : scope.path;\r\n    const loader = new FileLoader(this.manager);\r\n    loader.setPath(scope.path);\r\n    loader.setResponseType(\"arraybuffer\");\r\n    loader.setRequestHeader(scope.requestHeader);\r\n    loader.setWithCredentials(scope.withCredentials);\r\n    loader.load(\r\n      url,\r\n      function(buffer) {\r\n        try {\r\n          onLoad(scope.parse(buffer, path));\r\n        } catch (e) {\r\n          if (onError) {\r\n            onError(e);\r\n          } else {\r\n            console.error(e);\r\n          }\r\n          scope.manager.itemError(url);\r\n        }\r\n      },\r\n      onProgress,\r\n      onError\r\n    );\r\n  }\r\n  parse(FBXBuffer, path) {\r\n    if (isFbxFormatBinary(FBXBuffer)) {\r\n      fbxTree = new BinaryParser().parse(FBXBuffer);\r\n    } else {\r\n      const FBXText = convertArrayBufferToString(FBXBuffer);\r\n      if (!isFbxFormatASCII(FBXText)) {\r\n        throw new Error(\"THREE.FBXLoader: Unknown format.\");\r\n      }\r\n      if (getFbxVersion(FBXText) < 7e3) {\r\n        throw new Error(\"THREE.FBXLoader: FBX version not supported, FileVersion: \" + getFbxVersion(FBXText));\r\n      }\r\n      fbxTree = new TextParser().parse(FBXText);\r\n    }\r\n    const textureLoader = new TextureLoader(this.manager).setPath(this.resourcePath || path).setCrossOrigin(this.crossOrigin);\r\n    return new FBXTreeParser(textureLoader, this.manager).parse(fbxTree);\r\n  }\r\n}\r\nclass FBXTreeParser {\r\n  constructor(textureLoader, manager) {\r\n    this.textureLoader = textureLoader;\r\n    this.manager = manager;\r\n  }\r\n  parse() {\r\n    connections = this.parseConnections();\r\n    const images = this.parseImages();\r\n    const textures = this.parseTextures(images);\r\n    const materials = this.parseMaterials(textures);\r\n    const deformers = this.parseDeformers();\r\n    const geometryMap = new GeometryParser().parse(deformers);\r\n    this.parseScene(deformers, geometryMap, materials);\r\n    return sceneGraph;\r\n  }\r\n  // Parses FBXTree.Connections which holds parent-child connections between objects (e.g. material -> texture, model->geometry )\r\n  // and details the connection type\r\n  parseConnections() {\r\n    const connectionMap = /* @__PURE__ */ new Map();\r\n    if (\"Connections\" in fbxTree) {\r\n      const rawConnections = fbxTree.Connections.connections;\r\n      rawConnections.forEach(function(rawConnection) {\r\n        const fromID = rawConnection[0];\r\n        const toID = rawConnection[1];\r\n        const relationship = rawConnection[2];\r\n        if (!connectionMap.has(fromID)) {\r\n          connectionMap.set(fromID, {\r\n            parents: [],\r\n            children: []\r\n          });\r\n        }\r\n        const parentRelationship = { ID: toID, relationship };\r\n        connectionMap.get(fromID).parents.push(parentRelationship);\r\n        if (!connectionMap.has(toID)) {\r\n          connectionMap.set(toID, {\r\n            parents: [],\r\n            children: []\r\n          });\r\n        }\r\n        const childRelationship = { ID: fromID, relationship };\r\n        connectionMap.get(toID).children.push(childRelationship);\r\n      });\r\n    }\r\n    return connectionMap;\r\n  }\r\n  // Parse FBXTree.Objects.Video for embedded image data\r\n  // These images are connected to textures in FBXTree.Objects.Textures\r\n  // via FBXTree.Connections.\r\n  parseImages() {\r\n    const images = {};\r\n    const blobs = {};\r\n    if (\"Video\" in fbxTree.Objects) {\r\n      const videoNodes = fbxTree.Objects.Video;\r\n      for (const nodeID in videoNodes) {\r\n        const videoNode = videoNodes[nodeID];\r\n        const id = parseInt(nodeID);\r\n        images[id] = videoNode.RelativeFilename || videoNode.Filename;\r\n        if (\"Content\" in videoNode) {\r\n          const arrayBufferContent = videoNode.Content instanceof ArrayBuffer && videoNode.Content.byteLength > 0;\r\n          const base64Content = typeof videoNode.Content === \"string\" && videoNode.Content !== \"\";\r\n          if (arrayBufferContent || base64Content) {\r\n            const image = this.parseImage(videoNodes[nodeID]);\r\n            blobs[videoNode.RelativeFilename || videoNode.Filename] = image;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    for (const id in images) {\r\n      const filename = images[id];\r\n      if (blobs[filename] !== void 0)\r\n        images[id] = blobs[filename];\r\n      else\r\n        images[id] = images[id].split(\"\\\\\").pop();\r\n    }\r\n    return images;\r\n  }\r\n  // Parse embedded image data in FBXTree.Video.Content\r\n  parseImage(videoNode) {\r\n    const content = videoNode.Content;\r\n    const fileName = videoNode.RelativeFilename || videoNode.Filename;\r\n    const extension = fileName.slice(fileName.lastIndexOf(\".\") + 1).toLowerCase();\r\n    let type;\r\n    switch (extension) {\r\n      case \"bmp\":\r\n        type = \"image/bmp\";\r\n        break;\r\n      case \"jpg\":\r\n      case \"jpeg\":\r\n        type = \"image/jpeg\";\r\n        break;\r\n      case \"png\":\r\n        type = \"image/png\";\r\n        break;\r\n      case \"tif\":\r\n        type = \"image/tiff\";\r\n        break;\r\n      case \"tga\":\r\n        if (this.manager.getHandler(\".tga\") === null) {\r\n          console.warn(\"FBXLoader: TGA loader not found, skipping \", fileName);\r\n        }\r\n        type = \"image/tga\";\r\n        break;\r\n      default:\r\n        console.warn('FBXLoader: Image type \"' + extension + '\" is not supported.');\r\n        return;\r\n    }\r\n    if (typeof content === \"string\") {\r\n      return \"data:\" + type + \";base64,\" + content;\r\n    } else {\r\n      const array = new Uint8Array(content);\r\n      return window.URL.createObjectURL(new Blob([array], { type }));\r\n    }\r\n  }\r\n  // Parse nodes in FBXTree.Objects.Texture\r\n  // These contain details such as UV scaling, cropping, rotation etc and are connected\r\n  // to images in FBXTree.Objects.Video\r\n  parseTextures(images) {\r\n    const textureMap = /* @__PURE__ */ new Map();\r\n    if (\"Texture\" in fbxTree.Objects) {\r\n      const textureNodes = fbxTree.Objects.Texture;\r\n      for (const nodeID in textureNodes) {\r\n        const texture = this.parseTexture(textureNodes[nodeID], images);\r\n        textureMap.set(parseInt(nodeID), texture);\r\n      }\r\n    }\r\n    return textureMap;\r\n  }\r\n  // Parse individual node in FBXTree.Objects.Texture\r\n  parseTexture(textureNode, images) {\r\n    const texture = this.loadTexture(textureNode, images);\r\n    texture.ID = textureNode.id;\r\n    texture.name = textureNode.attrName;\r\n    const wrapModeU = textureNode.WrapModeU;\r\n    const wrapModeV = textureNode.WrapModeV;\r\n    const valueU = wrapModeU !== void 0 ? wrapModeU.value : 0;\r\n    const valueV = wrapModeV !== void 0 ? wrapModeV.value : 0;\r\n    texture.wrapS = valueU === 0 ? RepeatWrapping : ClampToEdgeWrapping;\r\n    texture.wrapT = valueV === 0 ? RepeatWrapping : ClampToEdgeWrapping;\r\n    if (\"Scaling\" in textureNode) {\r\n      const values = textureNode.Scaling.value;\r\n      texture.repeat.x = values[0];\r\n      texture.repeat.y = values[1];\r\n    }\r\n    return texture;\r\n  }\r\n  // load a texture specified as a blob or data URI, or via an external URL using TextureLoader\r\n  loadTexture(textureNode, images) {\r\n    let fileName;\r\n    const currentPath = this.textureLoader.path;\r\n    const children = connections.get(textureNode.id).children;\r\n    if (children !== void 0 && children.length > 0 && images[children[0].ID] !== void 0) {\r\n      fileName = images[children[0].ID];\r\n      if (fileName.indexOf(\"blob:\") === 0 || fileName.indexOf(\"data:\") === 0) {\r\n        this.textureLoader.setPath(void 0);\r\n      }\r\n    }\r\n    let texture;\r\n    const extension = textureNode.FileName.slice(-3).toLowerCase();\r\n    if (extension === \"tga\") {\r\n      const loader = this.manager.getHandler(\".tga\");\r\n      if (loader === null) {\r\n        console.warn(\"FBXLoader: TGA loader not found, creating placeholder texture for\", textureNode.RelativeFilename);\r\n        texture = new Texture();\r\n      } else {\r\n        loader.setPath(this.textureLoader.path);\r\n        texture = loader.load(fileName);\r\n      }\r\n    } else if (extension === \"psd\") {\r\n      console.warn(\r\n        \"FBXLoader: PSD textures are not supported, creating placeholder texture for\",\r\n        textureNode.RelativeFilename\r\n      );\r\n      texture = new Texture();\r\n    } else {\r\n      texture = this.textureLoader.load(fileName);\r\n    }\r\n    this.textureLoader.setPath(currentPath);\r\n    return texture;\r\n  }\r\n  // Parse nodes in FBXTree.Objects.Material\r\n  parseMaterials(textureMap) {\r\n    const materialMap = /* @__PURE__ */ new Map();\r\n    if (\"Material\" in fbxTree.Objects) {\r\n      const materialNodes = fbxTree.Objects.Material;\r\n      for (const nodeID in materialNodes) {\r\n        const material = this.parseMaterial(materialNodes[nodeID], textureMap);\r\n        if (material !== null)\r\n          materialMap.set(parseInt(nodeID), material);\r\n      }\r\n    }\r\n    return materialMap;\r\n  }\r\n  // Parse single node in FBXTree.Objects.Material\r\n  // Materials are connected to texture maps in FBXTree.Objects.Textures\r\n  // FBX format currently only supports Lambert and Phong shading models\r\n  parseMaterial(materialNode, textureMap) {\r\n    const ID = materialNode.id;\r\n    const name = materialNode.attrName;\r\n    let type = materialNode.ShadingModel;\r\n    if (typeof type === \"object\") {\r\n      type = type.value;\r\n    }\r\n    if (!connections.has(ID))\r\n      return null;\r\n    const parameters = this.parseParameters(materialNode, textureMap, ID);\r\n    let material;\r\n    switch (type.toLowerCase()) {\r\n      case \"phong\":\r\n        material = new MeshPhongMaterial();\r\n        break;\r\n      case \"lambert\":\r\n        material = new MeshLambertMaterial();\r\n        break;\r\n      default:\r\n        console.warn('THREE.FBXLoader: unknown material type \"%s\". Defaulting to MeshPhongMaterial.', type);\r\n        material = new MeshPhongMaterial();\r\n        break;\r\n    }\r\n    material.setValues(parameters);\r\n    material.name = name;\r\n    return material;\r\n  }\r\n  // Parse FBX material and return parameters suitable for a three.js material\r\n  // Also parse the texture map and return any textures associated with the material\r\n  parseParameters(materialNode, textureMap, ID) {\r\n    const parameters = {};\r\n    if (materialNode.BumpFactor) {\r\n      parameters.bumpScale = materialNode.BumpFactor.value;\r\n    }\r\n    if (materialNode.Diffuse) {\r\n      parameters.color = new Color().fromArray(materialNode.Diffuse.value);\r\n    } else if (materialNode.DiffuseColor && (materialNode.DiffuseColor.type === \"Color\" || materialNode.DiffuseColor.type === \"ColorRGB\")) {\r\n      parameters.color = new Color().fromArray(materialNode.DiffuseColor.value);\r\n    }\r\n    if (materialNode.DisplacementFactor) {\r\n      parameters.displacementScale = materialNode.DisplacementFactor.value;\r\n    }\r\n    if (materialNode.Emissive) {\r\n      parameters.emissive = new Color().fromArray(materialNode.Emissive.value);\r\n    } else if (materialNode.EmissiveColor && (materialNode.EmissiveColor.type === \"Color\" || materialNode.EmissiveColor.type === \"ColorRGB\")) {\r\n      parameters.emissive = new Color().fromArray(materialNode.EmissiveColor.value);\r\n    }\r\n    if (materialNode.EmissiveFactor) {\r\n      parameters.emissiveIntensity = parseFloat(materialNode.EmissiveFactor.value);\r\n    }\r\n    if (materialNode.Opacity) {\r\n      parameters.opacity = parseFloat(materialNode.Opacity.value);\r\n    }\r\n    if (parameters.opacity < 1) {\r\n      parameters.transparent = true;\r\n    }\r\n    if (materialNode.ReflectionFactor) {\r\n      parameters.reflectivity = materialNode.ReflectionFactor.value;\r\n    }\r\n    if (materialNode.Shininess) {\r\n      parameters.shininess = materialNode.Shininess.value;\r\n    }\r\n    if (materialNode.Specular) {\r\n      parameters.specular = new Color().fromArray(materialNode.Specular.value);\r\n    } else if (materialNode.SpecularColor && materialNode.SpecularColor.type === \"Color\") {\r\n      parameters.specular = new Color().fromArray(materialNode.SpecularColor.value);\r\n    }\r\n    const scope = this;\r\n    connections.get(ID).children.forEach(function(child) {\r\n      const type = child.relationship;\r\n      switch (type) {\r\n        case \"Bump\":\r\n          parameters.bumpMap = scope.getTexture(textureMap, child.ID);\r\n          break;\r\n        case \"Maya|TEX_ao_map\":\r\n          parameters.aoMap = scope.getTexture(textureMap, child.ID);\r\n          break;\r\n        case \"DiffuseColor\":\r\n        case \"Maya|TEX_color_map\":\r\n          parameters.map = scope.getTexture(textureMap, child.ID);\r\n          if (parameters.map !== void 0) {\r\n            if (\"colorSpace\" in parameters.map)\r\n              parameters.map.colorSpace = \"srgb\";\r\n            else\r\n              parameters.map.encoding = 3001;\r\n          }\r\n          break;\r\n        case \"DisplacementColor\":\r\n          parameters.displacementMap = scope.getTexture(textureMap, child.ID);\r\n          break;\r\n        case \"EmissiveColor\":\r\n          parameters.emissiveMap = scope.getTexture(textureMap, child.ID);\r\n          if (parameters.emissiveMap !== void 0) {\r\n            if (\"colorSpace\" in parameters.emissiveMap)\r\n              parameters.emissiveMap.colorSpace = \"srgb\";\r\n            else\r\n              parameters.emissiveMap.encoding = 3001;\r\n          }\r\n          break;\r\n        case \"NormalMap\":\r\n        case \"Maya|TEX_normal_map\":\r\n          parameters.normalMap = scope.getTexture(textureMap, child.ID);\r\n          break;\r\n        case \"ReflectionColor\":\r\n          parameters.envMap = scope.getTexture(textureMap, child.ID);\r\n          if (parameters.envMap !== void 0) {\r\n            parameters.envMap.mapping = EquirectangularReflectionMapping;\r\n            if (\"colorSpace\" in parameters.envMap)\r\n              parameters.envMap.colorSpace = \"srgb\";\r\n            else\r\n              parameters.envMap.encoding = 3001;\r\n          }\r\n          break;\r\n        case \"SpecularColor\":\r\n          parameters.specularMap = scope.getTexture(textureMap, child.ID);\r\n          if (parameters.specularMap !== void 0) {\r\n            if (\"colorSpace\" in parameters.specularMap)\r\n              parameters.specularMap.colorSpace = \"srgb\";\r\n            else\r\n              parameters.specularMap.encoding = 3001;\r\n          }\r\n          break;\r\n        case \"TransparentColor\":\r\n        case \"TransparencyFactor\":\r\n          parameters.alphaMap = scope.getTexture(textureMap, child.ID);\r\n          parameters.transparent = true;\r\n          break;\r\n        case \"AmbientColor\":\r\n        case \"ShininessExponent\":\r\n        case \"SpecularFactor\":\r\n        case \"VectorDisplacementColor\":\r\n        default:\r\n          console.warn(\"THREE.FBXLoader: %s map is not supported in three.js, skipping texture.\", type);\r\n          break;\r\n      }\r\n    });\r\n    return parameters;\r\n  }\r\n  // get a texture from the textureMap for use by a material.\r\n  getTexture(textureMap, id) {\r\n    if (\"LayeredTexture\" in fbxTree.Objects && id in fbxTree.Objects.LayeredTexture) {\r\n      console.warn(\"THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer.\");\r\n      id = connections.get(id).children[0].ID;\r\n    }\r\n    return textureMap.get(id);\r\n  }\r\n  // Parse nodes in FBXTree.Objects.Deformer\r\n  // Deformer node can contain skinning or Vertex Cache animation data, however only skinning is supported here\r\n  // Generates map of Skeleton-like objects for use later when generating and binding skeletons.\r\n  parseDeformers() {\r\n    const skeletons = {};\r\n    const morphTargets = {};\r\n    if (\"Deformer\" in fbxTree.Objects) {\r\n      const DeformerNodes = fbxTree.Objects.Deformer;\r\n      for (const nodeID in DeformerNodes) {\r\n        const deformerNode = DeformerNodes[nodeID];\r\n        const relationships = connections.get(parseInt(nodeID));\r\n        if (deformerNode.attrType === \"Skin\") {\r\n          const skeleton = this.parseSkeleton(relationships, DeformerNodes);\r\n          skeleton.ID = nodeID;\r\n          if (relationships.parents.length > 1) {\r\n            console.warn(\"THREE.FBXLoader: skeleton attached to more than one geometry is not supported.\");\r\n          }\r\n          skeleton.geometryID = relationships.parents[0].ID;\r\n          skeletons[nodeID] = skeleton;\r\n        } else if (deformerNode.attrType === \"BlendShape\") {\r\n          const morphTarget = {\r\n            id: nodeID\r\n          };\r\n          morphTarget.rawTargets = this.parseMorphTargets(relationships, DeformerNodes);\r\n          morphTarget.id = nodeID;\r\n          if (relationships.parents.length > 1) {\r\n            console.warn(\"THREE.FBXLoader: morph target attached to more than one geometry is not supported.\");\r\n          }\r\n          morphTargets[nodeID] = morphTarget;\r\n        }\r\n      }\r\n    }\r\n    return {\r\n      skeletons,\r\n      morphTargets\r\n    };\r\n  }\r\n  // Parse single nodes in FBXTree.Objects.Deformer\r\n  // The top level skeleton node has type 'Skin' and sub nodes have type 'Cluster'\r\n  // Each skin node represents a skeleton and each cluster node represents a bone\r\n  parseSkeleton(relationships, deformerNodes) {\r\n    const rawBones = [];\r\n    relationships.children.forEach(function(child) {\r\n      const boneNode = deformerNodes[child.ID];\r\n      if (boneNode.attrType !== \"Cluster\")\r\n        return;\r\n      const rawBone = {\r\n        ID: child.ID,\r\n        indices: [],\r\n        weights: [],\r\n        transformLink: new Matrix4().fromArray(boneNode.TransformLink.a)\r\n        // transform: new Matrix4().fromArray( boneNode.Transform.a ),\r\n        // linkMode: boneNode.Mode,\r\n      };\r\n      if (\"Indexes\" in boneNode) {\r\n        rawBone.indices = boneNode.Indexes.a;\r\n        rawBone.weights = boneNode.Weights.a;\r\n      }\r\n      rawBones.push(rawBone);\r\n    });\r\n    return {\r\n      rawBones,\r\n      bones: []\r\n    };\r\n  }\r\n  // The top level morph deformer node has type \"BlendShape\" and sub nodes have type \"BlendShapeChannel\"\r\n  parseMorphTargets(relationships, deformerNodes) {\r\n    const rawMorphTargets = [];\r\n    for (let i = 0; i < relationships.children.length; i++) {\r\n      const child = relationships.children[i];\r\n      const morphTargetNode = deformerNodes[child.ID];\r\n      const rawMorphTarget = {\r\n        name: morphTargetNode.attrName,\r\n        initialWeight: morphTargetNode.DeformPercent,\r\n        id: morphTargetNode.id,\r\n        fullWeights: morphTargetNode.FullWeights.a\r\n      };\r\n      if (morphTargetNode.attrType !== \"BlendShapeChannel\")\r\n        return;\r\n      rawMorphTarget.geoID = connections.get(parseInt(child.ID)).children.filter(function(child2) {\r\n        return child2.relationship === void 0;\r\n      })[0].ID;\r\n      rawMorphTargets.push(rawMorphTarget);\r\n    }\r\n    return rawMorphTargets;\r\n  }\r\n  // create the main Group() to be returned by the loader\r\n  parseScene(deformers, geometryMap, materialMap) {\r\n    sceneGraph = new Group();\r\n    const modelMap = this.parseModels(deformers.skeletons, geometryMap, materialMap);\r\n    const modelNodes = fbxTree.Objects.Model;\r\n    const scope = this;\r\n    modelMap.forEach(function(model) {\r\n      const modelNode = modelNodes[model.ID];\r\n      scope.setLookAtProperties(model, modelNode);\r\n      const parentConnections = connections.get(model.ID).parents;\r\n      parentConnections.forEach(function(connection) {\r\n        const parent = modelMap.get(connection.ID);\r\n        if (parent !== void 0)\r\n          parent.add(model);\r\n      });\r\n      if (model.parent === null) {\r\n        sceneGraph.add(model);\r\n      }\r\n    });\r\n    this.bindSkeleton(deformers.skeletons, geometryMap, modelMap);\r\n    this.createAmbientLight();\r\n    sceneGraph.traverse(function(node) {\r\n      if (node.userData.transformData) {\r\n        if (node.parent) {\r\n          node.userData.transformData.parentMatrix = node.parent.matrix;\r\n          node.userData.transformData.parentMatrixWorld = node.parent.matrixWorld;\r\n        }\r\n        const transform = generateTransform(node.userData.transformData);\r\n        node.applyMatrix4(transform);\r\n        node.updateWorldMatrix();\r\n      }\r\n    });\r\n    const animations = new AnimationParser().parse();\r\n    if (sceneGraph.children.length === 1 && sceneGraph.children[0].isGroup) {\r\n      sceneGraph.children[0].animations = animations;\r\n      sceneGraph = sceneGraph.children[0];\r\n    }\r\n    sceneGraph.animations = animations;\r\n  }\r\n  // parse nodes in FBXTree.Objects.Model\r\n  parseModels(skeletons, geometryMap, materialMap) {\r\n    const modelMap = /* @__PURE__ */ new Map();\r\n    const modelNodes = fbxTree.Objects.Model;\r\n    for (const nodeID in modelNodes) {\r\n      const id = parseInt(nodeID);\r\n      const node = modelNodes[nodeID];\r\n      const relationships = connections.get(id);\r\n      let model = this.buildSkeleton(relationships, skeletons, id, node.attrName);\r\n      if (!model) {\r\n        switch (node.attrType) {\r\n          case \"Camera\":\r\n            model = this.createCamera(relationships);\r\n            break;\r\n          case \"Light\":\r\n            model = this.createLight(relationships);\r\n            break;\r\n          case \"Mesh\":\r\n            model = this.createMesh(relationships, geometryMap, materialMap);\r\n            break;\r\n          case \"NurbsCurve\":\r\n            model = this.createCurve(relationships, geometryMap);\r\n            break;\r\n          case \"LimbNode\":\r\n          case \"Root\":\r\n            model = new Bone();\r\n            break;\r\n          case \"Null\":\r\n          default:\r\n            model = new Group();\r\n            break;\r\n        }\r\n        model.name = node.attrName ? PropertyBinding.sanitizeNodeName(node.attrName) : \"\";\r\n        model.ID = id;\r\n      }\r\n      this.getTransformData(model, node);\r\n      modelMap.set(id, model);\r\n    }\r\n    return modelMap;\r\n  }\r\n  buildSkeleton(relationships, skeletons, id, name) {\r\n    let bone = null;\r\n    relationships.parents.forEach(function(parent) {\r\n      for (const ID in skeletons) {\r\n        const skeleton = skeletons[ID];\r\n        skeleton.rawBones.forEach(function(rawBone, i) {\r\n          if (rawBone.ID === parent.ID) {\r\n            const subBone = bone;\r\n            bone = new Bone();\r\n            bone.matrixWorld.copy(rawBone.transformLink);\r\n            bone.name = name ? PropertyBinding.sanitizeNodeName(name) : \"\";\r\n            bone.ID = id;\r\n            skeleton.bones[i] = bone;\r\n            if (subBone !== null) {\r\n              bone.add(subBone);\r\n            }\r\n          }\r\n        });\r\n      }\r\n    });\r\n    return bone;\r\n  }\r\n  // create a PerspectiveCamera or OrthographicCamera\r\n  createCamera(relationships) {\r\n    let model;\r\n    let cameraAttribute;\r\n    relationships.children.forEach(function(child) {\r\n      const attr = fbxTree.Objects.NodeAttribute[child.ID];\r\n      if (attr !== void 0) {\r\n        cameraAttribute = attr;\r\n      }\r\n    });\r\n    if (cameraAttribute === void 0) {\r\n      model = new Object3D();\r\n    } else {\r\n      let type = 0;\r\n      if (cameraAttribute.CameraProjectionType !== void 0 && cameraAttribute.CameraProjectionType.value === 1) {\r\n        type = 1;\r\n      }\r\n      let nearClippingPlane = 1;\r\n      if (cameraAttribute.NearPlane !== void 0) {\r\n        nearClippingPlane = cameraAttribute.NearPlane.value / 1e3;\r\n      }\r\n      let farClippingPlane = 1e3;\r\n      if (cameraAttribute.FarPlane !== void 0) {\r\n        farClippingPlane = cameraAttribute.FarPlane.value / 1e3;\r\n      }\r\n      let width = window.innerWidth;\r\n      let height = window.innerHeight;\r\n      if (cameraAttribute.AspectWidth !== void 0 && cameraAttribute.AspectHeight !== void 0) {\r\n        width = cameraAttribute.AspectWidth.value;\r\n        height = cameraAttribute.AspectHeight.value;\r\n      }\r\n      const aspect = width / height;\r\n      let fov = 45;\r\n      if (cameraAttribute.FieldOfView !== void 0) {\r\n        fov = cameraAttribute.FieldOfView.value;\r\n      }\r\n      const focalLength = cameraAttribute.FocalLength ? cameraAttribute.FocalLength.value : null;\r\n      switch (type) {\r\n        case 0:\r\n          model = new PerspectiveCamera(fov, aspect, nearClippingPlane, farClippingPlane);\r\n          if (focalLength !== null)\r\n            model.setFocalLength(focalLength);\r\n          break;\r\n        case 1:\r\n          model = new OrthographicCamera(\r\n            -width / 2,\r\n            width / 2,\r\n            height / 2,\r\n            -height / 2,\r\n            nearClippingPlane,\r\n            farClippingPlane\r\n          );\r\n          break;\r\n        default:\r\n          console.warn(\"THREE.FBXLoader: Unknown camera type \" + type + \".\");\r\n          model = new Object3D();\r\n          break;\r\n      }\r\n    }\r\n    return model;\r\n  }\r\n  // Create a DirectionalLight, PointLight or SpotLight\r\n  createLight(relationships) {\r\n    let model;\r\n    let lightAttribute;\r\n    relationships.children.forEach(function(child) {\r\n      const attr = fbxTree.Objects.NodeAttribute[child.ID];\r\n      if (attr !== void 0) {\r\n        lightAttribute = attr;\r\n      }\r\n    });\r\n    if (lightAttribute === void 0) {\r\n      model = new Object3D();\r\n    } else {\r\n      let type;\r\n      if (lightAttribute.LightType === void 0) {\r\n        type = 0;\r\n      } else {\r\n        type = lightAttribute.LightType.value;\r\n      }\r\n      let color = 16777215;\r\n      if (lightAttribute.Color !== void 0) {\r\n        color = new Color().fromArray(lightAttribute.Color.value);\r\n      }\r\n      let intensity = lightAttribute.Intensity === void 0 ? 1 : lightAttribute.Intensity.value / 100;\r\n      if (lightAttribute.CastLightOnObject !== void 0 && lightAttribute.CastLightOnObject.value === 0) {\r\n        intensity = 0;\r\n      }\r\n      let distance = 0;\r\n      if (lightAttribute.FarAttenuationEnd !== void 0) {\r\n        if (lightAttribute.EnableFarAttenuation !== void 0 && lightAttribute.EnableFarAttenuation.value === 0) {\r\n          distance = 0;\r\n        } else {\r\n          distance = lightAttribute.FarAttenuationEnd.value;\r\n        }\r\n      }\r\n      const decay = 1;\r\n      switch (type) {\r\n        case 0:\r\n          model = new PointLight(color, intensity, distance, decay);\r\n          break;\r\n        case 1:\r\n          model = new DirectionalLight(color, intensity);\r\n          break;\r\n        case 2:\r\n          let angle = Math.PI / 3;\r\n          if (lightAttribute.InnerAngle !== void 0) {\r\n            angle = MathUtils.degToRad(lightAttribute.InnerAngle.value);\r\n          }\r\n          let penumbra = 0;\r\n          if (lightAttribute.OuterAngle !== void 0) {\r\n            penumbra = MathUtils.degToRad(lightAttribute.OuterAngle.value);\r\n            penumbra = Math.max(penumbra, 1);\r\n          }\r\n          model = new SpotLight(color, intensity, distance, angle, penumbra, decay);\r\n          break;\r\n        default:\r\n          console.warn(\r\n            \"THREE.FBXLoader: Unknown light type \" + lightAttribute.LightType.value + \", defaulting to a PointLight.\"\r\n          );\r\n          model = new PointLight(color, intensity);\r\n          break;\r\n      }\r\n      if (lightAttribute.CastShadows !== void 0 && lightAttribute.CastShadows.value === 1) {\r\n        model.castShadow = true;\r\n      }\r\n    }\r\n    return model;\r\n  }\r\n  createMesh(relationships, geometryMap, materialMap) {\r\n    let model;\r\n    let geometry = null;\r\n    let material = null;\r\n    const materials = [];\r\n    relationships.children.forEach(function(child) {\r\n      if (geometryMap.has(child.ID)) {\r\n        geometry = geometryMap.get(child.ID);\r\n      }\r\n      if (materialMap.has(child.ID)) {\r\n        materials.push(materialMap.get(child.ID));\r\n      }\r\n    });\r\n    if (materials.length > 1) {\r\n      material = materials;\r\n    } else if (materials.length > 0) {\r\n      material = materials[0];\r\n    } else {\r\n      material = new MeshPhongMaterial({ color: 13421772 });\r\n      materials.push(material);\r\n    }\r\n    if (\"color\" in geometry.attributes) {\r\n      materials.forEach(function(material2) {\r\n        material2.vertexColors = true;\r\n      });\r\n    }\r\n    if (geometry.FBX_Deformer) {\r\n      model = new SkinnedMesh(geometry, material);\r\n      model.normalizeSkinWeights();\r\n    } else {\r\n      model = new Mesh(geometry, material);\r\n    }\r\n    return model;\r\n  }\r\n  createCurve(relationships, geometryMap) {\r\n    const geometry = relationships.children.reduce(function(geo, child) {\r\n      if (geometryMap.has(child.ID))\r\n        geo = geometryMap.get(child.ID);\r\n      return geo;\r\n    }, null);\r\n    const material = new LineBasicMaterial({ color: 3342591, linewidth: 1 });\r\n    return new Line(geometry, material);\r\n  }\r\n  // parse the model node for transform data\r\n  getTransformData(model, modelNode) {\r\n    const transformData = {};\r\n    if (\"InheritType\" in modelNode)\r\n      transformData.inheritType = parseInt(modelNode.InheritType.value);\r\n    if (\"RotationOrder\" in modelNode)\r\n      transformData.eulerOrder = getEulerOrder(modelNode.RotationOrder.value);\r\n    else\r\n      transformData.eulerOrder = \"ZYX\";\r\n    if (\"Lcl_Translation\" in modelNode)\r\n      transformData.translation = modelNode.Lcl_Translation.value;\r\n    if (\"PreRotation\" in modelNode)\r\n      transformData.preRotation = modelNode.PreRotation.value;\r\n    if (\"Lcl_Rotation\" in modelNode)\r\n      transformData.rotation = modelNode.Lcl_Rotation.value;\r\n    if (\"PostRotation\" in modelNode)\r\n      transformData.postRotation = modelNode.PostRotation.value;\r\n    if (\"Lcl_Scaling\" in modelNode)\r\n      transformData.scale = modelNode.Lcl_Scaling.value;\r\n    if (\"ScalingOffset\" in modelNode)\r\n      transformData.scalingOffset = modelNode.ScalingOffset.value;\r\n    if (\"ScalingPivot\" in modelNode)\r\n      transformData.scalingPivot = modelNode.ScalingPivot.value;\r\n    if (\"RotationOffset\" in modelNode)\r\n      transformData.rotationOffset = modelNode.RotationOffset.value;\r\n    if (\"RotationPivot\" in modelNode)\r\n      transformData.rotationPivot = modelNode.RotationPivot.value;\r\n    model.userData.transformData = transformData;\r\n  }\r\n  setLookAtProperties(model, modelNode) {\r\n    if (\"LookAtProperty\" in modelNode) {\r\n      const children = connections.get(model.ID).children;\r\n      children.forEach(function(child) {\r\n        if (child.relationship === \"LookAtProperty\") {\r\n          const lookAtTarget = fbxTree.Objects.Model[child.ID];\r\n          if (\"Lcl_Translation\" in lookAtTarget) {\r\n            const pos = lookAtTarget.Lcl_Translation.value;\r\n            if (model.target !== void 0) {\r\n              model.target.position.fromArray(pos);\r\n              sceneGraph.add(model.target);\r\n            } else {\r\n              model.lookAt(new Vector3().fromArray(pos));\r\n            }\r\n          }\r\n        }\r\n      });\r\n    }\r\n  }\r\n  bindSkeleton(skeletons, geometryMap, modelMap) {\r\n    const bindMatrices = this.parsePoseNodes();\r\n    for (const ID in skeletons) {\r\n      const skeleton = skeletons[ID];\r\n      const parents = connections.get(parseInt(skeleton.ID)).parents;\r\n      parents.forEach(function(parent) {\r\n        if (geometryMap.has(parent.ID)) {\r\n          const geoID = parent.ID;\r\n          const geoRelationships = connections.get(geoID);\r\n          geoRelationships.parents.forEach(function(geoConnParent) {\r\n            if (modelMap.has(geoConnParent.ID)) {\r\n              const model = modelMap.get(geoConnParent.ID);\r\n              model.bind(new Skeleton(skeleton.bones), bindMatrices[geoConnParent.ID]);\r\n            }\r\n          });\r\n        }\r\n      });\r\n    }\r\n  }\r\n  parsePoseNodes() {\r\n    const bindMatrices = {};\r\n    if (\"Pose\" in fbxTree.Objects) {\r\n      const BindPoseNode = fbxTree.Objects.Pose;\r\n      for (const nodeID in BindPoseNode) {\r\n        if (BindPoseNode[nodeID].attrType === \"BindPose\" && BindPoseNode[nodeID].NbPoseNodes > 0) {\r\n          const poseNodes = BindPoseNode[nodeID].PoseNode;\r\n          if (Array.isArray(poseNodes)) {\r\n            poseNodes.forEach(function(poseNode) {\r\n              bindMatrices[poseNode.Node] = new Matrix4().fromArray(poseNode.Matrix.a);\r\n            });\r\n          } else {\r\n            bindMatrices[poseNodes.Node] = new Matrix4().fromArray(poseNodes.Matrix.a);\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return bindMatrices;\r\n  }\r\n  // Parse ambient color in FBXTree.GlobalSettings - if it's not set to black (default), create an ambient light\r\n  createAmbientLight() {\r\n    if (\"GlobalSettings\" in fbxTree && \"AmbientColor\" in fbxTree.GlobalSettings) {\r\n      const ambientColor = fbxTree.GlobalSettings.AmbientColor.value;\r\n      const r = ambientColor[0];\r\n      const g = ambientColor[1];\r\n      const b = ambientColor[2];\r\n      if (r !== 0 || g !== 0 || b !== 0) {\r\n        const color = new Color(r, g, b);\r\n        sceneGraph.add(new AmbientLight(color, 1));\r\n      }\r\n    }\r\n  }\r\n}\r\nclass GeometryParser {\r\n  // Parse nodes in FBXTree.Objects.Geometry\r\n  parse(deformers) {\r\n    const geometryMap = /* @__PURE__ */ new Map();\r\n    if (\"Geometry\" in fbxTree.Objects) {\r\n      const geoNodes = fbxTree.Objects.Geometry;\r\n      for (const nodeID in geoNodes) {\r\n        const relationships = connections.get(parseInt(nodeID));\r\n        const geo = this.parseGeometry(relationships, geoNodes[nodeID], deformers);\r\n        geometryMap.set(parseInt(nodeID), geo);\r\n      }\r\n    }\r\n    return geometryMap;\r\n  }\r\n  // Parse single node in FBXTree.Objects.Geometry\r\n  parseGeometry(relationships, geoNode, deformers) {\r\n    switch (geoNode.attrType) {\r\n      case \"Mesh\":\r\n        return this.parseMeshGeometry(relationships, geoNode, deformers);\r\n        break;\r\n      case \"NurbsCurve\":\r\n        return this.parseNurbsGeometry(geoNode);\r\n        break;\r\n    }\r\n  }\r\n  // Parse single node mesh geometry in FBXTree.Objects.Geometry\r\n  parseMeshGeometry(relationships, geoNode, deformers) {\r\n    const skeletons = deformers.skeletons;\r\n    const morphTargets = [];\r\n    const modelNodes = relationships.parents.map(function(parent) {\r\n      return fbxTree.Objects.Model[parent.ID];\r\n    });\r\n    if (modelNodes.length === 0)\r\n      return;\r\n    const skeleton = relationships.children.reduce(function(skeleton2, child) {\r\n      if (skeletons[child.ID] !== void 0)\r\n        skeleton2 = skeletons[child.ID];\r\n      return skeleton2;\r\n    }, null);\r\n    relationships.children.forEach(function(child) {\r\n      if (deformers.morphTargets[child.ID] !== void 0) {\r\n        morphTargets.push(deformers.morphTargets[child.ID]);\r\n      }\r\n    });\r\n    const modelNode = modelNodes[0];\r\n    const transformData = {};\r\n    if (\"RotationOrder\" in modelNode)\r\n      transformData.eulerOrder = getEulerOrder(modelNode.RotationOrder.value);\r\n    if (\"InheritType\" in modelNode)\r\n      transformData.inheritType = parseInt(modelNode.InheritType.value);\r\n    if (\"GeometricTranslation\" in modelNode)\r\n      transformData.translation = modelNode.GeometricTranslation.value;\r\n    if (\"GeometricRotation\" in modelNode)\r\n      transformData.rotation = modelNode.GeometricRotation.value;\r\n    if (\"GeometricScaling\" in modelNode)\r\n      transformData.scale = modelNode.GeometricScaling.value;\r\n    const transform = generateTransform(transformData);\r\n    return this.genGeometry(geoNode, skeleton, morphTargets, transform);\r\n  }\r\n  // Generate a BufferGeometry from a node in FBXTree.Objects.Geometry\r\n  genGeometry(geoNode, skeleton, morphTargets, preTransform) {\r\n    const geo = new BufferGeometry();\r\n    if (geoNode.attrName)\r\n      geo.name = geoNode.attrName;\r\n    const geoInfo = this.parseGeoNode(geoNode, skeleton);\r\n    const buffers = this.genBuffers(geoInfo);\r\n    const positionAttribute = new Float32BufferAttribute(buffers.vertex, 3);\r\n    positionAttribute.applyMatrix4(preTransform);\r\n    geo.setAttribute(\"position\", positionAttribute);\r\n    if (buffers.colors.length > 0) {\r\n      geo.setAttribute(\"color\", new Float32BufferAttribute(buffers.colors, 3));\r\n    }\r\n    if (skeleton) {\r\n      geo.setAttribute(\"skinIndex\", new Uint16BufferAttribute(buffers.weightsIndices, 4));\r\n      geo.setAttribute(\"skinWeight\", new Float32BufferAttribute(buffers.vertexWeights, 4));\r\n      geo.FBX_Deformer = skeleton;\r\n    }\r\n    if (buffers.normal.length > 0) {\r\n      const normalMatrix = new Matrix3().getNormalMatrix(preTransform);\r\n      const normalAttribute = new Float32BufferAttribute(buffers.normal, 3);\r\n      normalAttribute.applyNormalMatrix(normalMatrix);\r\n      geo.setAttribute(\"normal\", normalAttribute);\r\n    }\r\n    buffers.uvs.forEach(function(uvBuffer, i) {\r\n      let name = \"uv\" + (i + 1).toString();\r\n      if (i === 0) {\r\n        name = \"uv\";\r\n      }\r\n      geo.setAttribute(name, new Float32BufferAttribute(buffers.uvs[i], 2));\r\n    });\r\n    if (geoInfo.material && geoInfo.material.mappingType !== \"AllSame\") {\r\n      let prevMaterialIndex = buffers.materialIndex[0];\r\n      let startIndex = 0;\r\n      buffers.materialIndex.forEach(function(currentIndex, i) {\r\n        if (currentIndex !== prevMaterialIndex) {\r\n          geo.addGroup(startIndex, i - startIndex, prevMaterialIndex);\r\n          prevMaterialIndex = currentIndex;\r\n          startIndex = i;\r\n        }\r\n      });\r\n      if (geo.groups.length > 0) {\r\n        const lastGroup = geo.groups[geo.groups.length - 1];\r\n        const lastIndex = lastGroup.start + lastGroup.count;\r\n        if (lastIndex !== buffers.materialIndex.length) {\r\n          geo.addGroup(lastIndex, buffers.materialIndex.length - lastIndex, prevMaterialIndex);\r\n        }\r\n      }\r\n      if (geo.groups.length === 0) {\r\n        geo.addGroup(0, buffers.materialIndex.length, buffers.materialIndex[0]);\r\n      }\r\n    }\r\n    this.addMorphTargets(geo, geoNode, morphTargets, preTransform);\r\n    return geo;\r\n  }\r\n  parseGeoNode(geoNode, skeleton) {\r\n    const geoInfo = {};\r\n    geoInfo.vertexPositions = geoNode.Vertices !== void 0 ? geoNode.Vertices.a : [];\r\n    geoInfo.vertexIndices = geoNode.PolygonVertexIndex !== void 0 ? geoNode.PolygonVertexIndex.a : [];\r\n    if (geoNode.LayerElementColor) {\r\n      geoInfo.color = this.parseVertexColors(geoNode.LayerElementColor[0]);\r\n    }\r\n    if (geoNode.LayerElementMaterial) {\r\n      geoInfo.material = this.parseMaterialIndices(geoNode.LayerElementMaterial[0]);\r\n    }\r\n    if (geoNode.LayerElementNormal) {\r\n      geoInfo.normal = this.parseNormals(geoNode.LayerElementNormal[0]);\r\n    }\r\n    if (geoNode.LayerElementUV) {\r\n      geoInfo.uv = [];\r\n      let i = 0;\r\n      while (geoNode.LayerElementUV[i]) {\r\n        if (geoNode.LayerElementUV[i].UV) {\r\n          geoInfo.uv.push(this.parseUVs(geoNode.LayerElementUV[i]));\r\n        }\r\n        i++;\r\n      }\r\n    }\r\n    geoInfo.weightTable = {};\r\n    if (skeleton !== null) {\r\n      geoInfo.skeleton = skeleton;\r\n      skeleton.rawBones.forEach(function(rawBone, i) {\r\n        rawBone.indices.forEach(function(index, j) {\r\n          if (geoInfo.weightTable[index] === void 0)\r\n            geoInfo.weightTable[index] = [];\r\n          geoInfo.weightTable[index].push({\r\n            id: i,\r\n            weight: rawBone.weights[j]\r\n          });\r\n        });\r\n      });\r\n    }\r\n    return geoInfo;\r\n  }\r\n  genBuffers(geoInfo) {\r\n    const buffers = {\r\n      vertex: [],\r\n      normal: [],\r\n      colors: [],\r\n      uvs: [],\r\n      materialIndex: [],\r\n      vertexWeights: [],\r\n      weightsIndices: []\r\n    };\r\n    let polygonIndex = 0;\r\n    let faceLength = 0;\r\n    let displayedWeightsWarning = false;\r\n    let facePositionIndexes = [];\r\n    let faceNormals = [];\r\n    let faceColors = [];\r\n    let faceUVs = [];\r\n    let faceWeights = [];\r\n    let faceWeightIndices = [];\r\n    const scope = this;\r\n    geoInfo.vertexIndices.forEach(function(vertexIndex, polygonVertexIndex) {\r\n      let materialIndex;\r\n      let endOfFace = false;\r\n      if (vertexIndex < 0) {\r\n        vertexIndex = vertexIndex ^ -1;\r\n        endOfFace = true;\r\n      }\r\n      let weightIndices = [];\r\n      let weights = [];\r\n      facePositionIndexes.push(vertexIndex * 3, vertexIndex * 3 + 1, vertexIndex * 3 + 2);\r\n      if (geoInfo.color) {\r\n        const data = getData(polygonVertexIndex, polygonIndex, vertexIndex, geoInfo.color);\r\n        faceColors.push(data[0], data[1], data[2]);\r\n      }\r\n      if (geoInfo.skeleton) {\r\n        if (geoInfo.weightTable[vertexIndex] !== void 0) {\r\n          geoInfo.weightTable[vertexIndex].forEach(function(wt) {\r\n            weights.push(wt.weight);\r\n            weightIndices.push(wt.id);\r\n          });\r\n        }\r\n        if (weights.length > 4) {\r\n          if (!displayedWeightsWarning) {\r\n            console.warn(\r\n              \"THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights.\"\r\n            );\r\n            displayedWeightsWarning = true;\r\n          }\r\n          const wIndex = [0, 0, 0, 0];\r\n          const Weight = [0, 0, 0, 0];\r\n          weights.forEach(function(weight, weightIndex) {\r\n            let currentWeight = weight;\r\n            let currentIndex = weightIndices[weightIndex];\r\n            Weight.forEach(function(comparedWeight, comparedWeightIndex, comparedWeightArray) {\r\n              if (currentWeight > comparedWeight) {\r\n                comparedWeightArray[comparedWeightIndex] = currentWeight;\r\n                currentWeight = comparedWeight;\r\n                const tmp = wIndex[comparedWeightIndex];\r\n                wIndex[comparedWeightIndex] = currentIndex;\r\n                currentIndex = tmp;\r\n              }\r\n            });\r\n          });\r\n          weightIndices = wIndex;\r\n          weights = Weight;\r\n        }\r\n        while (weights.length < 4) {\r\n          weights.push(0);\r\n          weightIndices.push(0);\r\n        }\r\n        for (let i = 0; i < 4; ++i) {\r\n          faceWeights.push(weights[i]);\r\n          faceWeightIndices.push(weightIndices[i]);\r\n        }\r\n      }\r\n      if (geoInfo.normal) {\r\n        const data = getData(polygonVertexIndex, polygonIndex, vertexIndex, geoInfo.normal);\r\n        faceNormals.push(data[0], data[1], data[2]);\r\n      }\r\n      if (geoInfo.material && geoInfo.material.mappingType !== \"AllSame\") {\r\n        materialIndex = getData(polygonVertexIndex, polygonIndex, vertexIndex, geoInfo.material)[0];\r\n      }\r\n      if (geoInfo.uv) {\r\n        geoInfo.uv.forEach(function(uv, i) {\r\n          const data = getData(polygonVertexIndex, polygonIndex, vertexIndex, uv);\r\n          if (faceUVs[i] === void 0) {\r\n            faceUVs[i] = [];\r\n          }\r\n          faceUVs[i].push(data[0]);\r\n          faceUVs[i].push(data[1]);\r\n        });\r\n      }\r\n      faceLength++;\r\n      if (endOfFace) {\r\n        scope.genFace(\r\n          buffers,\r\n          geoInfo,\r\n          facePositionIndexes,\r\n          materialIndex,\r\n          faceNormals,\r\n          faceColors,\r\n          faceUVs,\r\n          faceWeights,\r\n          faceWeightIndices,\r\n          faceLength\r\n        );\r\n        polygonIndex++;\r\n        faceLength = 0;\r\n        facePositionIndexes = [];\r\n        faceNormals = [];\r\n        faceColors = [];\r\n        faceUVs = [];\r\n        faceWeights = [];\r\n        faceWeightIndices = [];\r\n      }\r\n    });\r\n    return buffers;\r\n  }\r\n  // Generate data for a single face in a geometry. If the face is a quad then split it into 2 tris\r\n  genFace(buffers, geoInfo, facePositionIndexes, materialIndex, faceNormals, faceColors, faceUVs, faceWeights, faceWeightIndices, faceLength) {\r\n    for (let i = 2; i < faceLength; i++) {\r\n      buffers.vertex.push(geoInfo.vertexPositions[facePositionIndexes[0]]);\r\n      buffers.vertex.push(geoInfo.vertexPositions[facePositionIndexes[1]]);\r\n      buffers.vertex.push(geoInfo.vertexPositions[facePositionIndexes[2]]);\r\n      buffers.vertex.push(geoInfo.vertexPositions[facePositionIndexes[(i - 1) * 3]]);\r\n      buffers.vertex.push(geoInfo.vertexPositions[facePositionIndexes[(i - 1) * 3 + 1]]);\r\n      buffers.vertex.push(geoInfo.vertexPositions[facePositionIndexes[(i - 1) * 3 + 2]]);\r\n      buffers.vertex.push(geoInfo.vertexPositions[facePositionIndexes[i * 3]]);\r\n      buffers.vertex.push(geoInfo.vertexPositions[facePositionIndexes[i * 3 + 1]]);\r\n      buffers.vertex.push(geoInfo.vertexPositions[facePositionIndexes[i * 3 + 2]]);\r\n      if (geoInfo.skeleton) {\r\n        buffers.vertexWeights.push(faceWeights[0]);\r\n        buffers.vertexWeights.push(faceWeights[1]);\r\n        buffers.vertexWeights.push(faceWeights[2]);\r\n        buffers.vertexWeights.push(faceWeights[3]);\r\n        buffers.vertexWeights.push(faceWeights[(i - 1) * 4]);\r\n        buffers.vertexWeights.push(faceWeights[(i - 1) * 4 + 1]);\r\n        buffers.vertexWeights.push(faceWeights[(i - 1) * 4 + 2]);\r\n        buffers.vertexWeights.push(faceWeights[(i - 1) * 4 + 3]);\r\n        buffers.vertexWeights.push(faceWeights[i * 4]);\r\n        buffers.vertexWeights.push(faceWeights[i * 4 + 1]);\r\n        buffers.vertexWeights.push(faceWeights[i * 4 + 2]);\r\n        buffers.vertexWeights.push(faceWeights[i * 4 + 3]);\r\n        buffers.weightsIndices.push(faceWeightIndices[0]);\r\n        buffers.weightsIndices.push(faceWeightIndices[1]);\r\n        buffers.weightsIndices.push(faceWeightIndices[2]);\r\n        buffers.weightsIndices.push(faceWeightIndices[3]);\r\n        buffers.weightsIndices.push(faceWeightIndices[(i - 1) * 4]);\r\n        buffers.weightsIndices.push(faceWeightIndices[(i - 1) * 4 + 1]);\r\n        buffers.weightsIndices.push(faceWeightIndices[(i - 1) * 4 + 2]);\r\n        buffers.weightsIndices.push(faceWeightIndices[(i - 1) * 4 + 3]);\r\n        buffers.weightsIndices.push(faceWeightIndices[i * 4]);\r\n        buffers.weightsIndices.push(faceWeightIndices[i * 4 + 1]);\r\n        buffers.weightsIndices.push(faceWeightIndices[i * 4 + 2]);\r\n        buffers.weightsIndices.push(faceWeightIndices[i * 4 + 3]);\r\n      }\r\n      if (geoInfo.color) {\r\n        buffers.colors.push(faceColors[0]);\r\n        buffers.colors.push(faceColors[1]);\r\n        buffers.colors.push(faceColors[2]);\r\n        buffers.colors.push(faceColors[(i - 1) * 3]);\r\n        buffers.colors.push(faceColors[(i - 1) * 3 + 1]);\r\n        buffers.colors.push(faceColors[(i - 1) * 3 + 2]);\r\n        buffers.colors.push(faceColors[i * 3]);\r\n        buffers.colors.push(faceColors[i * 3 + 1]);\r\n        buffers.colors.push(faceColors[i * 3 + 2]);\r\n      }\r\n      if (geoInfo.material && geoInfo.material.mappingType !== \"AllSame\") {\r\n        buffers.materialIndex.push(materialIndex);\r\n        buffers.materialIndex.push(materialIndex);\r\n        buffers.materialIndex.push(materialIndex);\r\n      }\r\n      if (geoInfo.normal) {\r\n        buffers.normal.push(faceNormals[0]);\r\n        buffers.normal.push(faceNormals[1]);\r\n        buffers.normal.push(faceNormals[2]);\r\n        buffers.normal.push(faceNormals[(i - 1) * 3]);\r\n        buffers.normal.push(faceNormals[(i - 1) * 3 + 1]);\r\n        buffers.normal.push(faceNormals[(i - 1) * 3 + 2]);\r\n        buffers.normal.push(faceNormals[i * 3]);\r\n        buffers.normal.push(faceNormals[i * 3 + 1]);\r\n        buffers.normal.push(faceNormals[i * 3 + 2]);\r\n      }\r\n      if (geoInfo.uv) {\r\n        geoInfo.uv.forEach(function(uv, j) {\r\n          if (buffers.uvs[j] === void 0)\r\n            buffers.uvs[j] = [];\r\n          buffers.uvs[j].push(faceUVs[j][0]);\r\n          buffers.uvs[j].push(faceUVs[j][1]);\r\n          buffers.uvs[j].push(faceUVs[j][(i - 1) * 2]);\r\n          buffers.uvs[j].push(faceUVs[j][(i - 1) * 2 + 1]);\r\n          buffers.uvs[j].push(faceUVs[j][i * 2]);\r\n          buffers.uvs[j].push(faceUVs[j][i * 2 + 1]);\r\n        });\r\n      }\r\n    }\r\n  }\r\n  addMorphTargets(parentGeo, parentGeoNode, morphTargets, preTransform) {\r\n    if (morphTargets.length === 0)\r\n      return;\r\n    parentGeo.morphTargetsRelative = true;\r\n    parentGeo.morphAttributes.position = [];\r\n    const scope = this;\r\n    morphTargets.forEach(function(morphTarget) {\r\n      morphTarget.rawTargets.forEach(function(rawTarget) {\r\n        const morphGeoNode = fbxTree.Objects.Geometry[rawTarget.geoID];\r\n        if (morphGeoNode !== void 0) {\r\n          scope.genMorphGeometry(parentGeo, parentGeoNode, morphGeoNode, preTransform, rawTarget.name);\r\n        }\r\n      });\r\n    });\r\n  }\r\n  // a morph geometry node is similar to a standard  node, and the node is also contained\r\n  // in FBXTree.Objects.Geometry, however it can only have attributes for position, normal\r\n  // and a special attribute Index defining which vertices of the original geometry are affected\r\n  // Normal and position attributes only have data for the vertices that are affected by the morph\r\n  genMorphGeometry(parentGeo, parentGeoNode, morphGeoNode, preTransform, name) {\r\n    const vertexIndices = parentGeoNode.PolygonVertexIndex !== void 0 ? parentGeoNode.PolygonVertexIndex.a : [];\r\n    const morphPositionsSparse = morphGeoNode.Vertices !== void 0 ? morphGeoNode.Vertices.a : [];\r\n    const indices = morphGeoNode.Indexes !== void 0 ? morphGeoNode.Indexes.a : [];\r\n    const length = parentGeo.attributes.position.count * 3;\r\n    const morphPositions = new Float32Array(length);\r\n    for (let i = 0; i < indices.length; i++) {\r\n      const morphIndex = indices[i] * 3;\r\n      morphPositions[morphIndex] = morphPositionsSparse[i * 3];\r\n      morphPositions[morphIndex + 1] = morphPositionsSparse[i * 3 + 1];\r\n      morphPositions[morphIndex + 2] = morphPositionsSparse[i * 3 + 2];\r\n    }\r\n    const morphGeoInfo = {\r\n      vertexIndices,\r\n      vertexPositions: morphPositions\r\n    };\r\n    const morphBuffers = this.genBuffers(morphGeoInfo);\r\n    const positionAttribute = new Float32BufferAttribute(morphBuffers.vertex, 3);\r\n    positionAttribute.name = name || morphGeoNode.attrName;\r\n    positionAttribute.applyMatrix4(preTransform);\r\n    parentGeo.morphAttributes.position.push(positionAttribute);\r\n  }\r\n  // Parse normal from FBXTree.Objects.Geometry.LayerElementNormal if it exists\r\n  parseNormals(NormalNode) {\r\n    const mappingType = NormalNode.MappingInformationType;\r\n    const referenceType = NormalNode.ReferenceInformationType;\r\n    const buffer = NormalNode.Normals.a;\r\n    let indexBuffer = [];\r\n    if (referenceType === \"IndexToDirect\") {\r\n      if (\"NormalIndex\" in NormalNode) {\r\n        indexBuffer = NormalNode.NormalIndex.a;\r\n      } else if (\"NormalsIndex\" in NormalNode) {\r\n        indexBuffer = NormalNode.NormalsIndex.a;\r\n      }\r\n    }\r\n    return {\r\n      dataSize: 3,\r\n      buffer,\r\n      indices: indexBuffer,\r\n      mappingType,\r\n      referenceType\r\n    };\r\n  }\r\n  // Parse UVs from FBXTree.Objects.Geometry.LayerElementUV if it exists\r\n  parseUVs(UVNode) {\r\n    const mappingType = UVNode.MappingInformationType;\r\n    const referenceType = UVNode.ReferenceInformationType;\r\n    const buffer = UVNode.UV.a;\r\n    let indexBuffer = [];\r\n    if (referenceType === \"IndexToDirect\") {\r\n      indexBuffer = UVNode.UVIndex.a;\r\n    }\r\n    return {\r\n      dataSize: 2,\r\n      buffer,\r\n      indices: indexBuffer,\r\n      mappingType,\r\n      referenceType\r\n    };\r\n  }\r\n  // Parse Vertex Colors from FBXTree.Objects.Geometry.LayerElementColor if it exists\r\n  parseVertexColors(ColorNode) {\r\n    const mappingType = ColorNode.MappingInformationType;\r\n    const referenceType = ColorNode.ReferenceInformationType;\r\n    const buffer = ColorNode.Colors.a;\r\n    let indexBuffer = [];\r\n    if (referenceType === \"IndexToDirect\") {\r\n      indexBuffer = ColorNode.ColorIndex.a;\r\n    }\r\n    return {\r\n      dataSize: 4,\r\n      buffer,\r\n      indices: indexBuffer,\r\n      mappingType,\r\n      referenceType\r\n    };\r\n  }\r\n  // Parse mapping and material data in FBXTree.Objects.Geometry.LayerElementMaterial if it exists\r\n  parseMaterialIndices(MaterialNode) {\r\n    const mappingType = MaterialNode.MappingInformationType;\r\n    const referenceType = MaterialNode.ReferenceInformationType;\r\n    if (mappingType === \"NoMappingInformation\") {\r\n      return {\r\n        dataSize: 1,\r\n        buffer: [0],\r\n        indices: [0],\r\n        mappingType: \"AllSame\",\r\n        referenceType\r\n      };\r\n    }\r\n    const materialIndexBuffer = MaterialNode.Materials.a;\r\n    const materialIndices = [];\r\n    for (let i = 0; i < materialIndexBuffer.length; ++i) {\r\n      materialIndices.push(i);\r\n    }\r\n    return {\r\n      dataSize: 1,\r\n      buffer: materialIndexBuffer,\r\n      indices: materialIndices,\r\n      mappingType,\r\n      referenceType\r\n    };\r\n  }\r\n  // Generate a NurbGeometry from a node in FBXTree.Objects.Geometry\r\n  parseNurbsGeometry(geoNode) {\r\n    if (NURBSCurve === void 0) {\r\n      console.error(\r\n        \"THREE.FBXLoader: The loader relies on NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry.\"\r\n      );\r\n      return new BufferGeometry();\r\n    }\r\n    const order = parseInt(geoNode.Order);\r\n    if (isNaN(order)) {\r\n      console.error(\"THREE.FBXLoader: Invalid Order %s given for geometry ID: %s\", geoNode.Order, geoNode.id);\r\n      return new BufferGeometry();\r\n    }\r\n    const degree = order - 1;\r\n    const knots = geoNode.KnotVector.a;\r\n    const controlPoints = [];\r\n    const pointsValues = geoNode.Points.a;\r\n    for (let i = 0, l = pointsValues.length; i < l; i += 4) {\r\n      controlPoints.push(new Vector4().fromArray(pointsValues, i));\r\n    }\r\n    let startKnot, endKnot;\r\n    if (geoNode.Form === \"Closed\") {\r\n      controlPoints.push(controlPoints[0]);\r\n    } else if (geoNode.Form === \"Periodic\") {\r\n      startKnot = degree;\r\n      endKnot = knots.length - 1 - startKnot;\r\n      for (let i = 0; i < degree; ++i) {\r\n        controlPoints.push(controlPoints[i]);\r\n      }\r\n    }\r\n    const curve = new NURBSCurve(degree, knots, controlPoints, startKnot, endKnot);\r\n    const points = curve.getPoints(controlPoints.length * 12);\r\n    return new BufferGeometry().setFromPoints(points);\r\n  }\r\n}\r\nclass AnimationParser {\r\n  // take raw animation clips and turn them into three.js animation clips\r\n  parse() {\r\n    const animationClips = [];\r\n    const rawClips = this.parseClips();\r\n    if (rawClips !== void 0) {\r\n      for (const key in rawClips) {\r\n        const rawClip = rawClips[key];\r\n        const clip = this.addClip(rawClip);\r\n        animationClips.push(clip);\r\n      }\r\n    }\r\n    return animationClips;\r\n  }\r\n  parseClips() {\r\n    if (fbxTree.Objects.AnimationCurve === void 0)\r\n      return void 0;\r\n    const curveNodesMap = this.parseAnimationCurveNodes();\r\n    this.parseAnimationCurves(curveNodesMap);\r\n    const layersMap = this.parseAnimationLayers(curveNodesMap);\r\n    const rawClips = this.parseAnimStacks(layersMap);\r\n    return rawClips;\r\n  }\r\n  // parse nodes in FBXTree.Objects.AnimationCurveNode\r\n  // each AnimationCurveNode holds data for an animation transform for a model (e.g. left arm rotation )\r\n  // and is referenced by an AnimationLayer\r\n  parseAnimationCurveNodes() {\r\n    const rawCurveNodes = fbxTree.Objects.AnimationCurveNode;\r\n    const curveNodesMap = /* @__PURE__ */ new Map();\r\n    for (const nodeID in rawCurveNodes) {\r\n      const rawCurveNode = rawCurveNodes[nodeID];\r\n      if (rawCurveNode.attrName.match(/S|R|T|DeformPercent/) !== null) {\r\n        const curveNode = {\r\n          id: rawCurveNode.id,\r\n          attr: rawCurveNode.attrName,\r\n          curves: {}\r\n        };\r\n        curveNodesMap.set(curveNode.id, curveNode);\r\n      }\r\n    }\r\n    return curveNodesMap;\r\n  }\r\n  // parse nodes in FBXTree.Objects.AnimationCurve and connect them up to\r\n  // previously parsed AnimationCurveNodes. Each AnimationCurve holds data for a single animated\r\n  // axis ( e.g. times and values of x rotation)\r\n  parseAnimationCurves(curveNodesMap) {\r\n    const rawCurves = fbxTree.Objects.AnimationCurve;\r\n    for (const nodeID in rawCurves) {\r\n      const animationCurve = {\r\n        id: rawCurves[nodeID].id,\r\n        times: rawCurves[nodeID].KeyTime.a.map(convertFBXTimeToSeconds),\r\n        values: rawCurves[nodeID].KeyValueFloat.a\r\n      };\r\n      const relationships = connections.get(animationCurve.id);\r\n      if (relationships !== void 0) {\r\n        const animationCurveID = relationships.parents[0].ID;\r\n        const animationCurveRelationship = relationships.parents[0].relationship;\r\n        if (animationCurveRelationship.match(/X/)) {\r\n          curveNodesMap.get(animationCurveID).curves[\"x\"] = animationCurve;\r\n        } else if (animationCurveRelationship.match(/Y/)) {\r\n          curveNodesMap.get(animationCurveID).curves[\"y\"] = animationCurve;\r\n        } else if (animationCurveRelationship.match(/Z/)) {\r\n          curveNodesMap.get(animationCurveID).curves[\"z\"] = animationCurve;\r\n        } else if (animationCurveRelationship.match(/d|DeformPercent/) && curveNodesMap.has(animationCurveID)) {\r\n          curveNodesMap.get(animationCurveID).curves[\"morph\"] = animationCurve;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  // parse nodes in FBXTree.Objects.AnimationLayer. Each layers holds references\r\n  // to various AnimationCurveNodes and is referenced by an AnimationStack node\r\n  // note: theoretically a stack can have multiple layers, however in practice there always seems to be one per stack\r\n  parseAnimationLayers(curveNodesMap) {\r\n    const rawLayers = fbxTree.Objects.AnimationLayer;\r\n    const layersMap = /* @__PURE__ */ new Map();\r\n    for (const nodeID in rawLayers) {\r\n      const layerCurveNodes = [];\r\n      const connection = connections.get(parseInt(nodeID));\r\n      if (connection !== void 0) {\r\n        const children = connection.children;\r\n        children.forEach(function(child, i) {\r\n          if (curveNodesMap.has(child.ID)) {\r\n            const curveNode = curveNodesMap.get(child.ID);\r\n            if (curveNode.curves.x !== void 0 || curveNode.curves.y !== void 0 || curveNode.curves.z !== void 0) {\r\n              if (layerCurveNodes[i] === void 0) {\r\n                const modelID = connections.get(child.ID).parents.filter(function(parent) {\r\n                  return parent.relationship !== void 0;\r\n                })[0].ID;\r\n                if (modelID !== void 0) {\r\n                  const rawModel = fbxTree.Objects.Model[modelID.toString()];\r\n                  if (rawModel === void 0) {\r\n                    console.warn(\"THREE.FBXLoader: Encountered a unused curve.\", child);\r\n                    return;\r\n                  }\r\n                  const node = {\r\n                    modelName: rawModel.attrName ? PropertyBinding.sanitizeNodeName(rawModel.attrName) : \"\",\r\n                    ID: rawModel.id,\r\n                    initialPosition: [0, 0, 0],\r\n                    initialRotation: [0, 0, 0],\r\n                    initialScale: [1, 1, 1]\r\n                  };\r\n                  sceneGraph.traverse(function(child2) {\r\n                    if (child2.ID === rawModel.id) {\r\n                      node.transform = child2.matrix;\r\n                      if (child2.userData.transformData)\r\n                        node.eulerOrder = child2.userData.transformData.eulerOrder;\r\n                    }\r\n                  });\r\n                  if (!node.transform)\r\n                    node.transform = new Matrix4();\r\n                  if (\"PreRotation\" in rawModel)\r\n                    node.preRotation = rawModel.PreRotation.value;\r\n                  if (\"PostRotation\" in rawModel)\r\n                    node.postRotation = rawModel.PostRotation.value;\r\n                  layerCurveNodes[i] = node;\r\n                }\r\n              }\r\n              if (layerCurveNodes[i])\r\n                layerCurveNodes[i][curveNode.attr] = curveNode;\r\n            } else if (curveNode.curves.morph !== void 0) {\r\n              if (layerCurveNodes[i] === void 0) {\r\n                const deformerID = connections.get(child.ID).parents.filter(function(parent) {\r\n                  return parent.relationship !== void 0;\r\n                })[0].ID;\r\n                const morpherID = connections.get(deformerID).parents[0].ID;\r\n                const geoID = connections.get(morpherID).parents[0].ID;\r\n                const modelID = connections.get(geoID).parents[0].ID;\r\n                const rawModel = fbxTree.Objects.Model[modelID];\r\n                const node = {\r\n                  modelName: rawModel.attrName ? PropertyBinding.sanitizeNodeName(rawModel.attrName) : \"\",\r\n                  morphName: fbxTree.Objects.Deformer[deformerID].attrName\r\n                };\r\n                layerCurveNodes[i] = node;\r\n              }\r\n              layerCurveNodes[i][curveNode.attr] = curveNode;\r\n            }\r\n          }\r\n        });\r\n        layersMap.set(parseInt(nodeID), layerCurveNodes);\r\n      }\r\n    }\r\n    return layersMap;\r\n  }\r\n  // parse nodes in FBXTree.Objects.AnimationStack. These are the top level node in the animation\r\n  // hierarchy. Each Stack node will be used to create a AnimationClip\r\n  parseAnimStacks(layersMap) {\r\n    const rawStacks = fbxTree.Objects.AnimationStack;\r\n    const rawClips = {};\r\n    for (const nodeID in rawStacks) {\r\n      const children = connections.get(parseInt(nodeID)).children;\r\n      if (children.length > 1) {\r\n        console.warn(\r\n          \"THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.\"\r\n        );\r\n      }\r\n      const layer = layersMap.get(children[0].ID);\r\n      rawClips[nodeID] = {\r\n        name: rawStacks[nodeID].attrName,\r\n        layer\r\n      };\r\n    }\r\n    return rawClips;\r\n  }\r\n  addClip(rawClip) {\r\n    let tracks = [];\r\n    const scope = this;\r\n    rawClip.layer.forEach(function(rawTracks) {\r\n      tracks = tracks.concat(scope.generateTracks(rawTracks));\r\n    });\r\n    return new AnimationClip(rawClip.name, -1, tracks);\r\n  }\r\n  generateTracks(rawTracks) {\r\n    const tracks = [];\r\n    let initialPosition = new Vector3();\r\n    let initialRotation = new Quaternion();\r\n    let initialScale = new Vector3();\r\n    if (rawTracks.transform)\r\n      rawTracks.transform.decompose(initialPosition, initialRotation, initialScale);\r\n    initialPosition = initialPosition.toArray();\r\n    initialRotation = new Euler().setFromQuaternion(initialRotation, rawTracks.eulerOrder).toArray();\r\n    initialScale = initialScale.toArray();\r\n    if (rawTracks.T !== void 0 && Object.keys(rawTracks.T.curves).length > 0) {\r\n      const positionTrack = this.generateVectorTrack(\r\n        rawTracks.modelName,\r\n        rawTracks.T.curves,\r\n        initialPosition,\r\n        \"position\"\r\n      );\r\n      if (positionTrack !== void 0)\r\n        tracks.push(positionTrack);\r\n    }\r\n    if (rawTracks.R !== void 0 && Object.keys(rawTracks.R.curves).length > 0) {\r\n      const rotationTrack = this.generateRotationTrack(\r\n        rawTracks.modelName,\r\n        rawTracks.R.curves,\r\n        initialRotation,\r\n        rawTracks.preRotation,\r\n        rawTracks.postRotation,\r\n        rawTracks.eulerOrder\r\n      );\r\n      if (rotationTrack !== void 0)\r\n        tracks.push(rotationTrack);\r\n    }\r\n    if (rawTracks.S !== void 0 && Object.keys(rawTracks.S.curves).length > 0) {\r\n      const scaleTrack = this.generateVectorTrack(rawTracks.modelName, rawTracks.S.curves, initialScale, \"scale\");\r\n      if (scaleTrack !== void 0)\r\n        tracks.push(scaleTrack);\r\n    }\r\n    if (rawTracks.DeformPercent !== void 0) {\r\n      const morphTrack = this.generateMorphTrack(rawTracks);\r\n      if (morphTrack !== void 0)\r\n        tracks.push(morphTrack);\r\n    }\r\n    return tracks;\r\n  }\r\n  generateVectorTrack(modelName, curves, initialValue, type) {\r\n    const times = this.getTimesForAllAxes(curves);\r\n    const values = this.getKeyframeTrackValues(times, curves, initialValue);\r\n    return new VectorKeyframeTrack(modelName + \".\" + type, times, values);\r\n  }\r\n  generateRotationTrack(modelName, curves, initialValue, preRotation, postRotation, eulerOrder) {\r\n    if (curves.x !== void 0) {\r\n      this.interpolateRotations(curves.x);\r\n      curves.x.values = curves.x.values.map(MathUtils.degToRad);\r\n    }\r\n    if (curves.y !== void 0) {\r\n      this.interpolateRotations(curves.y);\r\n      curves.y.values = curves.y.values.map(MathUtils.degToRad);\r\n    }\r\n    if (curves.z !== void 0) {\r\n      this.interpolateRotations(curves.z);\r\n      curves.z.values = curves.z.values.map(MathUtils.degToRad);\r\n    }\r\n    const times = this.getTimesForAllAxes(curves);\r\n    const values = this.getKeyframeTrackValues(times, curves, initialValue);\r\n    if (preRotation !== void 0) {\r\n      preRotation = preRotation.map(MathUtils.degToRad);\r\n      preRotation.push(eulerOrder);\r\n      preRotation = new Euler().fromArray(preRotation);\r\n      preRotation = new Quaternion().setFromEuler(preRotation);\r\n    }\r\n    if (postRotation !== void 0) {\r\n      postRotation = postRotation.map(MathUtils.degToRad);\r\n      postRotation.push(eulerOrder);\r\n      postRotation = new Euler().fromArray(postRotation);\r\n      postRotation = new Quaternion().setFromEuler(postRotation).invert();\r\n    }\r\n    const quaternion = new Quaternion();\r\n    const euler = new Euler();\r\n    const quaternionValues = [];\r\n    for (let i = 0; i < values.length; i += 3) {\r\n      euler.set(values[i], values[i + 1], values[i + 2], eulerOrder);\r\n      quaternion.setFromEuler(euler);\r\n      if (preRotation !== void 0)\r\n        quaternion.premultiply(preRotation);\r\n      if (postRotation !== void 0)\r\n        quaternion.multiply(postRotation);\r\n      quaternion.toArray(quaternionValues, i / 3 * 4);\r\n    }\r\n    return new QuaternionKeyframeTrack(modelName + \".quaternion\", times, quaternionValues);\r\n  }\r\n  generateMorphTrack(rawTracks) {\r\n    const curves = rawTracks.DeformPercent.curves.morph;\r\n    const values = curves.values.map(function(val) {\r\n      return val / 100;\r\n    });\r\n    const morphNum = sceneGraph.getObjectByName(rawTracks.modelName).morphTargetDictionary[rawTracks.morphName];\r\n    return new NumberKeyframeTrack(\r\n      rawTracks.modelName + \".morphTargetInfluences[\" + morphNum + \"]\",\r\n      curves.times,\r\n      values\r\n    );\r\n  }\r\n  // For all animated objects, times are defined separately for each axis\r\n  // Here we'll combine the times into one sorted array without duplicates\r\n  getTimesForAllAxes(curves) {\r\n    let times = [];\r\n    if (curves.x !== void 0)\r\n      times = times.concat(curves.x.times);\r\n    if (curves.y !== void 0)\r\n      times = times.concat(curves.y.times);\r\n    if (curves.z !== void 0)\r\n      times = times.concat(curves.z.times);\r\n    times = times.sort(function(a, b) {\r\n      return a - b;\r\n    });\r\n    if (times.length > 1) {\r\n      let targetIndex = 1;\r\n      let lastValue = times[0];\r\n      for (let i = 1; i < times.length; i++) {\r\n        const currentValue = times[i];\r\n        if (currentValue !== lastValue) {\r\n          times[targetIndex] = currentValue;\r\n          lastValue = currentValue;\r\n          targetIndex++;\r\n        }\r\n      }\r\n      times = times.slice(0, targetIndex);\r\n    }\r\n    return times;\r\n  }\r\n  getKeyframeTrackValues(times, curves, initialValue) {\r\n    const prevValue = initialValue;\r\n    const values = [];\r\n    let xIndex = -1;\r\n    let yIndex = -1;\r\n    let zIndex = -1;\r\n    times.forEach(function(time) {\r\n      if (curves.x)\r\n        xIndex = curves.x.times.indexOf(time);\r\n      if (curves.y)\r\n        yIndex = curves.y.times.indexOf(time);\r\n      if (curves.z)\r\n        zIndex = curves.z.times.indexOf(time);\r\n      if (xIndex !== -1) {\r\n        const xValue = curves.x.values[xIndex];\r\n        values.push(xValue);\r\n        prevValue[0] = xValue;\r\n      } else {\r\n        values.push(prevValue[0]);\r\n      }\r\n      if (yIndex !== -1) {\r\n        const yValue = curves.y.values[yIndex];\r\n        values.push(yValue);\r\n        prevValue[1] = yValue;\r\n      } else {\r\n        values.push(prevValue[1]);\r\n      }\r\n      if (zIndex !== -1) {\r\n        const zValue = curves.z.values[zIndex];\r\n        values.push(zValue);\r\n        prevValue[2] = zValue;\r\n      } else {\r\n        values.push(prevValue[2]);\r\n      }\r\n    });\r\n    return values;\r\n  }\r\n  // Rotations are defined as Euler angles which can have values  of any size\r\n  // These will be converted to quaternions which don't support values greater than\r\n  // PI, so we'll interpolate large rotations\r\n  interpolateRotations(curve) {\r\n    for (let i = 1; i < curve.values.length; i++) {\r\n      const initialValue = curve.values[i - 1];\r\n      const valuesSpan = curve.values[i] - initialValue;\r\n      const absoluteSpan = Math.abs(valuesSpan);\r\n      if (absoluteSpan >= 180) {\r\n        const numSubIntervals = absoluteSpan / 180;\r\n        const step = valuesSpan / numSubIntervals;\r\n        let nextValue = initialValue + step;\r\n        const initialTime = curve.times[i - 1];\r\n        const timeSpan = curve.times[i] - initialTime;\r\n        const interval = timeSpan / numSubIntervals;\r\n        let nextTime = initialTime + interval;\r\n        const interpolatedTimes = [];\r\n        const interpolatedValues = [];\r\n        while (nextTime < curve.times[i]) {\r\n          interpolatedTimes.push(nextTime);\r\n          nextTime += interval;\r\n          interpolatedValues.push(nextValue);\r\n          nextValue += step;\r\n        }\r\n        curve.times = inject(curve.times, i, interpolatedTimes);\r\n        curve.values = inject(curve.values, i, interpolatedValues);\r\n      }\r\n    }\r\n  }\r\n}\r\nclass TextParser {\r\n  getPrevNode() {\r\n    return this.nodeStack[this.currentIndent - 2];\r\n  }\r\n  getCurrentNode() {\r\n    return this.nodeStack[this.currentIndent - 1];\r\n  }\r\n  getCurrentProp() {\r\n    return this.currentProp;\r\n  }\r\n  pushStack(node) {\r\n    this.nodeStack.push(node);\r\n    this.currentIndent += 1;\r\n  }\r\n  popStack() {\r\n    this.nodeStack.pop();\r\n    this.currentIndent -= 1;\r\n  }\r\n  setCurrentProp(val, name) {\r\n    this.currentProp = val;\r\n    this.currentPropName = name;\r\n  }\r\n  parse(text) {\r\n    this.currentIndent = 0;\r\n    this.allNodes = new FBXTree();\r\n    this.nodeStack = [];\r\n    this.currentProp = [];\r\n    this.currentPropName = \"\";\r\n    const scope = this;\r\n    const split = text.split(/[\\r\\n]+/);\r\n    split.forEach(function(line, i) {\r\n      const matchComment = line.match(/^[\\s\\t]*;/);\r\n      const matchEmpty = line.match(/^[\\s\\t]*$/);\r\n      if (matchComment || matchEmpty)\r\n        return;\r\n      const matchBeginning = line.match(\"^\\\\t{\" + scope.currentIndent + \"}(\\\\w+):(.*){\", \"\");\r\n      const matchProperty = line.match(\"^\\\\t{\" + scope.currentIndent + \"}(\\\\w+):[\\\\s\\\\t\\\\r\\\\n](.*)\");\r\n      const matchEnd = line.match(\"^\\\\t{\" + (scope.currentIndent - 1) + \"}}\");\r\n      if (matchBeginning) {\r\n        scope.parseNodeBegin(line, matchBeginning);\r\n      } else if (matchProperty) {\r\n        scope.parseNodeProperty(line, matchProperty, split[++i]);\r\n      } else if (matchEnd) {\r\n        scope.popStack();\r\n      } else if (line.match(/^[^\\s\\t}]/)) {\r\n        scope.parseNodePropertyContinued(line);\r\n      }\r\n    });\r\n    return this.allNodes;\r\n  }\r\n  parseNodeBegin(line, property) {\r\n    const nodeName = property[1].trim().replace(/^\"/, \"\").replace(/\"$/, \"\");\r\n    const nodeAttrs = property[2].split(\",\").map(function(attr) {\r\n      return attr.trim().replace(/^\"/, \"\").replace(/\"$/, \"\");\r\n    });\r\n    const node = { name: nodeName };\r\n    const attrs = this.parseNodeAttr(nodeAttrs);\r\n    const currentNode = this.getCurrentNode();\r\n    if (this.currentIndent === 0) {\r\n      this.allNodes.add(nodeName, node);\r\n    } else {\r\n      if (nodeName in currentNode) {\r\n        if (nodeName === \"PoseNode\") {\r\n          currentNode.PoseNode.push(node);\r\n        } else if (currentNode[nodeName].id !== void 0) {\r\n          currentNode[nodeName] = {};\r\n          currentNode[nodeName][currentNode[nodeName].id] = currentNode[nodeName];\r\n        }\r\n        if (attrs.id !== \"\")\r\n          currentNode[nodeName][attrs.id] = node;\r\n      } else if (typeof attrs.id === \"number\") {\r\n        currentNode[nodeName] = {};\r\n        currentNode[nodeName][attrs.id] = node;\r\n      } else if (nodeName !== \"Properties70\") {\r\n        if (nodeName === \"PoseNode\")\r\n          currentNode[nodeName] = [node];\r\n        else\r\n          currentNode[nodeName] = node;\r\n      }\r\n    }\r\n    if (typeof attrs.id === \"number\")\r\n      node.id = attrs.id;\r\n    if (attrs.name !== \"\")\r\n      node.attrName = attrs.name;\r\n    if (attrs.type !== \"\")\r\n      node.attrType = attrs.type;\r\n    this.pushStack(node);\r\n  }\r\n  parseNodeAttr(attrs) {\r\n    let id = attrs[0];\r\n    if (attrs[0] !== \"\") {\r\n      id = parseInt(attrs[0]);\r\n      if (isNaN(id)) {\r\n        id = attrs[0];\r\n      }\r\n    }\r\n    let name = \"\", type = \"\";\r\n    if (attrs.length > 1) {\r\n      name = attrs[1].replace(/^(\\w+)::/, \"\");\r\n      type = attrs[2];\r\n    }\r\n    return { id, name, type };\r\n  }\r\n  parseNodeProperty(line, property, contentLine) {\r\n    let propName = property[1].replace(/^\"/, \"\").replace(/\"$/, \"\").trim();\r\n    let propValue = property[2].replace(/^\"/, \"\").replace(/\"$/, \"\").trim();\r\n    if (propName === \"Content\" && propValue === \",\") {\r\n      propValue = contentLine.replace(/\"/g, \"\").replace(/,$/, \"\").trim();\r\n    }\r\n    const currentNode = this.getCurrentNode();\r\n    const parentName = currentNode.name;\r\n    if (parentName === \"Properties70\") {\r\n      this.parseNodeSpecialProperty(line, propName, propValue);\r\n      return;\r\n    }\r\n    if (propName === \"C\") {\r\n      const connProps = propValue.split(\",\").slice(1);\r\n      const from = parseInt(connProps[0]);\r\n      const to = parseInt(connProps[1]);\r\n      let rest = propValue.split(\",\").slice(3);\r\n      rest = rest.map(function(elem) {\r\n        return elem.trim().replace(/^\"/, \"\");\r\n      });\r\n      propName = \"connections\";\r\n      propValue = [from, to];\r\n      append(propValue, rest);\r\n      if (currentNode[propName] === void 0) {\r\n        currentNode[propName] = [];\r\n      }\r\n    }\r\n    if (propName === \"Node\")\r\n      currentNode.id = propValue;\r\n    if (propName in currentNode && Array.isArray(currentNode[propName])) {\r\n      currentNode[propName].push(propValue);\r\n    } else {\r\n      if (propName !== \"a\")\r\n        currentNode[propName] = propValue;\r\n      else\r\n        currentNode.a = propValue;\r\n    }\r\n    this.setCurrentProp(currentNode, propName);\r\n    if (propName === \"a\" && propValue.slice(-1) !== \",\") {\r\n      currentNode.a = parseNumberArray(propValue);\r\n    }\r\n  }\r\n  parseNodePropertyContinued(line) {\r\n    const currentNode = this.getCurrentNode();\r\n    currentNode.a += line;\r\n    if (line.slice(-1) !== \",\") {\r\n      currentNode.a = parseNumberArray(currentNode.a);\r\n    }\r\n  }\r\n  // parse \"Property70\"\r\n  parseNodeSpecialProperty(line, propName, propValue) {\r\n    const props = propValue.split('\",').map(function(prop) {\r\n      return prop.trim().replace(/^\\\"/, \"\").replace(/\\s/, \"_\");\r\n    });\r\n    const innerPropName = props[0];\r\n    const innerPropType1 = props[1];\r\n    const innerPropType2 = props[2];\r\n    const innerPropFlag = props[3];\r\n    let innerPropValue = props[4];\r\n    switch (innerPropType1) {\r\n      case \"int\":\r\n      case \"enum\":\r\n      case \"bool\":\r\n      case \"ULongLong\":\r\n      case \"double\":\r\n      case \"Number\":\r\n      case \"FieldOfView\":\r\n        innerPropValue = parseFloat(innerPropValue);\r\n        break;\r\n      case \"Color\":\r\n      case \"ColorRGB\":\r\n      case \"Vector3D\":\r\n      case \"Lcl_Translation\":\r\n      case \"Lcl_Rotation\":\r\n      case \"Lcl_Scaling\":\r\n        innerPropValue = parseNumberArray(innerPropValue);\r\n        break;\r\n    }\r\n    this.getPrevNode()[innerPropName] = {\r\n      type: innerPropType1,\r\n      type2: innerPropType2,\r\n      flag: innerPropFlag,\r\n      value: innerPropValue\r\n    };\r\n    this.setCurrentProp(this.getPrevNode(), innerPropName);\r\n  }\r\n}\r\nclass BinaryParser {\r\n  parse(buffer) {\r\n    const reader = new BinaryReader(buffer);\r\n    reader.skip(23);\r\n    const version = reader.getUint32();\r\n    if (version < 6400) {\r\n      throw new Error(\"THREE.FBXLoader: FBX version not supported, FileVersion: \" + version);\r\n    }\r\n    const allNodes = new FBXTree();\r\n    while (!this.endOfContent(reader)) {\r\n      const node = this.parseNode(reader, version);\r\n      if (node !== null)\r\n        allNodes.add(node.name, node);\r\n    }\r\n    return allNodes;\r\n  }\r\n  // Check if reader has reached the end of content.\r\n  endOfContent(reader) {\r\n    if (reader.size() % 16 === 0) {\r\n      return (reader.getOffset() + 160 + 16 & ~15) >= reader.size();\r\n    } else {\r\n      return reader.getOffset() + 160 + 16 >= reader.size();\r\n    }\r\n  }\r\n  // recursively parse nodes until the end of the file is reached\r\n  parseNode(reader, version) {\r\n    const node = {};\r\n    const endOffset = version >= 7500 ? reader.getUint64() : reader.getUint32();\r\n    const numProperties = version >= 7500 ? reader.getUint64() : reader.getUint32();\r\n    version >= 7500 ? reader.getUint64() : reader.getUint32();\r\n    const nameLen = reader.getUint8();\r\n    const name = reader.getString(nameLen);\r\n    if (endOffset === 0)\r\n      return null;\r\n    const propertyList = [];\r\n    for (let i = 0; i < numProperties; i++) {\r\n      propertyList.push(this.parseProperty(reader));\r\n    }\r\n    const id = propertyList.length > 0 ? propertyList[0] : \"\";\r\n    const attrName = propertyList.length > 1 ? propertyList[1] : \"\";\r\n    const attrType = propertyList.length > 2 ? propertyList[2] : \"\";\r\n    node.singleProperty = numProperties === 1 && reader.getOffset() === endOffset ? true : false;\r\n    while (endOffset > reader.getOffset()) {\r\n      const subNode = this.parseNode(reader, version);\r\n      if (subNode !== null)\r\n        this.parseSubNode(name, node, subNode);\r\n    }\r\n    node.propertyList = propertyList;\r\n    if (typeof id === \"number\")\r\n      node.id = id;\r\n    if (attrName !== \"\")\r\n      node.attrName = attrName;\r\n    if (attrType !== \"\")\r\n      node.attrType = attrType;\r\n    if (name !== \"\")\r\n      node.name = name;\r\n    return node;\r\n  }\r\n  parseSubNode(name, node, subNode) {\r\n    if (subNode.singleProperty === true) {\r\n      const value = subNode.propertyList[0];\r\n      if (Array.isArray(value)) {\r\n        node[subNode.name] = subNode;\r\n        subNode.a = value;\r\n      } else {\r\n        node[subNode.name] = value;\r\n      }\r\n    } else if (name === \"Connections\" && subNode.name === \"C\") {\r\n      const array = [];\r\n      subNode.propertyList.forEach(function(property, i) {\r\n        if (i !== 0)\r\n          array.push(property);\r\n      });\r\n      if (node.connections === void 0) {\r\n        node.connections = [];\r\n      }\r\n      node.connections.push(array);\r\n    } else if (subNode.name === \"Properties70\") {\r\n      const keys = Object.keys(subNode);\r\n      keys.forEach(function(key) {\r\n        node[key] = subNode[key];\r\n      });\r\n    } else if (name === \"Properties70\" && subNode.name === \"P\") {\r\n      let innerPropName = subNode.propertyList[0];\r\n      let innerPropType1 = subNode.propertyList[1];\r\n      const innerPropType2 = subNode.propertyList[2];\r\n      const innerPropFlag = subNode.propertyList[3];\r\n      let innerPropValue;\r\n      if (innerPropName.indexOf(\"Lcl \") === 0)\r\n        innerPropName = innerPropName.replace(\"Lcl \", \"Lcl_\");\r\n      if (innerPropType1.indexOf(\"Lcl \") === 0)\r\n        innerPropType1 = innerPropType1.replace(\"Lcl \", \"Lcl_\");\r\n      if (innerPropType1 === \"Color\" || innerPropType1 === \"ColorRGB\" || innerPropType1 === \"Vector\" || innerPropType1 === \"Vector3D\" || innerPropType1.indexOf(\"Lcl_\") === 0) {\r\n        innerPropValue = [subNode.propertyList[4], subNode.propertyList[5], subNode.propertyList[6]];\r\n      } else {\r\n        innerPropValue = subNode.propertyList[4];\r\n      }\r\n      node[innerPropName] = {\r\n        type: innerPropType1,\r\n        type2: innerPropType2,\r\n        flag: innerPropFlag,\r\n        value: innerPropValue\r\n      };\r\n    } else if (node[subNode.name] === void 0) {\r\n      if (typeof subNode.id === \"number\") {\r\n        node[subNode.name] = {};\r\n        node[subNode.name][subNode.id] = subNode;\r\n      } else {\r\n        node[subNode.name] = subNode;\r\n      }\r\n    } else {\r\n      if (subNode.name === \"PoseNode\") {\r\n        if (!Array.isArray(node[subNode.name])) {\r\n          node[subNode.name] = [node[subNode.name]];\r\n        }\r\n        node[subNode.name].push(subNode);\r\n      } else if (node[subNode.name][subNode.id] === void 0) {\r\n        node[subNode.name][subNode.id] = subNode;\r\n      }\r\n    }\r\n  }\r\n  parseProperty(reader) {\r\n    const type = reader.getString(1);\r\n    let length;\r\n    switch (type) {\r\n      case \"C\":\r\n        return reader.getBoolean();\r\n      case \"D\":\r\n        return reader.getFloat64();\r\n      case \"F\":\r\n        return reader.getFloat32();\r\n      case \"I\":\r\n        return reader.getInt32();\r\n      case \"L\":\r\n        return reader.getInt64();\r\n      case \"R\":\r\n        length = reader.getUint32();\r\n        return reader.getArrayBuffer(length);\r\n      case \"S\":\r\n        length = reader.getUint32();\r\n        return reader.getString(length);\r\n      case \"Y\":\r\n        return reader.getInt16();\r\n      case \"b\":\r\n      case \"c\":\r\n      case \"d\":\r\n      case \"f\":\r\n      case \"i\":\r\n      case \"l\":\r\n        const arrayLength = reader.getUint32();\r\n        const encoding = reader.getUint32();\r\n        const compressedLength = reader.getUint32();\r\n        if (encoding === 0) {\r\n          switch (type) {\r\n            case \"b\":\r\n            case \"c\":\r\n              return reader.getBooleanArray(arrayLength);\r\n            case \"d\":\r\n              return reader.getFloat64Array(arrayLength);\r\n            case \"f\":\r\n              return reader.getFloat32Array(arrayLength);\r\n            case \"i\":\r\n              return reader.getInt32Array(arrayLength);\r\n            case \"l\":\r\n              return reader.getInt64Array(arrayLength);\r\n          }\r\n        }\r\n        const data = unzlibSync(new Uint8Array(reader.getArrayBuffer(compressedLength)));\r\n        const reader2 = new BinaryReader(data.buffer);\r\n        switch (type) {\r\n          case \"b\":\r\n          case \"c\":\r\n            return reader2.getBooleanArray(arrayLength);\r\n          case \"d\":\r\n            return reader2.getFloat64Array(arrayLength);\r\n          case \"f\":\r\n            return reader2.getFloat32Array(arrayLength);\r\n          case \"i\":\r\n            return reader2.getInt32Array(arrayLength);\r\n          case \"l\":\r\n            return reader2.getInt64Array(arrayLength);\r\n        }\r\n      default:\r\n        throw new Error(\"THREE.FBXLoader: Unknown property type \" + type);\r\n    }\r\n  }\r\n}\r\nclass BinaryReader {\r\n  constructor(buffer, littleEndian) {\r\n    this.dv = new DataView(buffer);\r\n    this.offset = 0;\r\n    this.littleEndian = littleEndian !== void 0 ? littleEndian : true;\r\n  }\r\n  getOffset() {\r\n    return this.offset;\r\n  }\r\n  size() {\r\n    return this.dv.buffer.byteLength;\r\n  }\r\n  skip(length) {\r\n    this.offset += length;\r\n  }\r\n  // seems like true/false representation depends on exporter.\r\n  // true: 1 or 'Y'(=0x59), false: 0 or 'T'(=0x54)\r\n  // then sees LSB.\r\n  getBoolean() {\r\n    return (this.getUint8() & 1) === 1;\r\n  }\r\n  getBooleanArray(size) {\r\n    const a = [];\r\n    for (let i = 0; i < size; i++) {\r\n      a.push(this.getBoolean());\r\n    }\r\n    return a;\r\n  }\r\n  getUint8() {\r\n    const value = this.dv.getUint8(this.offset);\r\n    this.offset += 1;\r\n    return value;\r\n  }\r\n  getInt16() {\r\n    const value = this.dv.getInt16(this.offset, this.littleEndian);\r\n    this.offset += 2;\r\n    return value;\r\n  }\r\n  getInt32() {\r\n    const value = this.dv.getInt32(this.offset, this.littleEndian);\r\n    this.offset += 4;\r\n    return value;\r\n  }\r\n  getInt32Array(size) {\r\n    const a = [];\r\n    for (let i = 0; i < size; i++) {\r\n      a.push(this.getInt32());\r\n    }\r\n    return a;\r\n  }\r\n  getUint32() {\r\n    const value = this.dv.getUint32(this.offset, this.littleEndian);\r\n    this.offset += 4;\r\n    return value;\r\n  }\r\n  // JavaScript doesn't support 64-bit integer so calculate this here\r\n  // 1 << 32 will return 1 so using multiply operation instead here.\r\n  // There's a possibility that this method returns wrong value if the value\r\n  // is out of the range between Number.MAX_SAFE_INTEGER and Number.MIN_SAFE_INTEGER.\r\n  // TODO: safely handle 64-bit integer\r\n  getInt64() {\r\n    let low, high;\r\n    if (this.littleEndian) {\r\n      low = this.getUint32();\r\n      high = this.getUint32();\r\n    } else {\r\n      high = this.getUint32();\r\n      low = this.getUint32();\r\n    }\r\n    if (high & 2147483648) {\r\n      high = ~high & 4294967295;\r\n      low = ~low & 4294967295;\r\n      if (low === 4294967295)\r\n        high = high + 1 & 4294967295;\r\n      low = low + 1 & 4294967295;\r\n      return -(high * 4294967296 + low);\r\n    }\r\n    return high * 4294967296 + low;\r\n  }\r\n  getInt64Array(size) {\r\n    const a = [];\r\n    for (let i = 0; i < size; i++) {\r\n      a.push(this.getInt64());\r\n    }\r\n    return a;\r\n  }\r\n  // Note: see getInt64() comment\r\n  getUint64() {\r\n    let low, high;\r\n    if (this.littleEndian) {\r\n      low = this.getUint32();\r\n      high = this.getUint32();\r\n    } else {\r\n      high = this.getUint32();\r\n      low = this.getUint32();\r\n    }\r\n    return high * 4294967296 + low;\r\n  }\r\n  getFloat32() {\r\n    const value = this.dv.getFloat32(this.offset, this.littleEndian);\r\n    this.offset += 4;\r\n    return value;\r\n  }\r\n  getFloat32Array(size) {\r\n    const a = [];\r\n    for (let i = 0; i < size; i++) {\r\n      a.push(this.getFloat32());\r\n    }\r\n    return a;\r\n  }\r\n  getFloat64() {\r\n    const value = this.dv.getFloat64(this.offset, this.littleEndian);\r\n    this.offset += 8;\r\n    return value;\r\n  }\r\n  getFloat64Array(size) {\r\n    const a = [];\r\n    for (let i = 0; i < size; i++) {\r\n      a.push(this.getFloat64());\r\n    }\r\n    return a;\r\n  }\r\n  getArrayBuffer(size) {\r\n    const value = this.dv.buffer.slice(this.offset, this.offset + size);\r\n    this.offset += size;\r\n    return value;\r\n  }\r\n  getString(size) {\r\n    let a = [];\r\n    for (let i = 0; i < size; i++) {\r\n      a[i] = this.getUint8();\r\n    }\r\n    const nullByte = a.indexOf(0);\r\n    if (nullByte >= 0)\r\n      a = a.slice(0, nullByte);\r\n    return LoaderUtils.decodeText(new Uint8Array(a));\r\n  }\r\n}\r\nclass FBXTree {\r\n  add(key, val) {\r\n    this[key] = val;\r\n  }\r\n}\r\nfunction isFbxFormatBinary(buffer) {\r\n  const CORRECT = \"Kaydara FBX Binary  \\0\";\r\n  return buffer.byteLength >= CORRECT.length && CORRECT === convertArrayBufferToString(buffer, 0, CORRECT.length);\r\n}\r\nfunction isFbxFormatASCII(text) {\r\n  const CORRECT = [\r\n    \"K\",\r\n    \"a\",\r\n    \"y\",\r\n    \"d\",\r\n    \"a\",\r\n    \"r\",\r\n    \"a\",\r\n    \"\\\\\",\r\n    \"F\",\r\n    \"B\",\r\n    \"X\",\r\n    \"\\\\\",\r\n    \"B\",\r\n    \"i\",\r\n    \"n\",\r\n    \"a\",\r\n    \"r\",\r\n    \"y\",\r\n    \"\\\\\",\r\n    \"\\\\\"\r\n  ];\r\n  let cursor = 0;\r\n  function read(offset) {\r\n    const result = text[offset - 1];\r\n    text = text.slice(cursor + offset);\r\n    cursor++;\r\n    return result;\r\n  }\r\n  for (let i = 0; i < CORRECT.length; ++i) {\r\n    const num = read(1);\r\n    if (num === CORRECT[i]) {\r\n      return false;\r\n    }\r\n  }\r\n  return true;\r\n}\r\nfunction getFbxVersion(text) {\r\n  const versionRegExp = /FBXVersion: (\\d+)/;\r\n  const match = text.match(versionRegExp);\r\n  if (match) {\r\n    const version = parseInt(match[1]);\r\n    return version;\r\n  }\r\n  throw new Error(\"THREE.FBXLoader: Cannot find the version number for the file given.\");\r\n}\r\nfunction convertFBXTimeToSeconds(time) {\r\n  return time / 46186158e3;\r\n}\r\nconst dataArray = [];\r\nfunction getData(polygonVertexIndex, polygonIndex, vertexIndex, infoObject) {\r\n  let index;\r\n  switch (infoObject.mappingType) {\r\n    case \"ByPolygonVertex\":\r\n      index = polygonVertexIndex;\r\n      break;\r\n    case \"ByPolygon\":\r\n      index = polygonIndex;\r\n      break;\r\n    case \"ByVertice\":\r\n      index = vertexIndex;\r\n      break;\r\n    case \"AllSame\":\r\n      index = infoObject.indices[0];\r\n      break;\r\n    default:\r\n      console.warn(\"THREE.FBXLoader: unknown attribute mapping type \" + infoObject.mappingType);\r\n  }\r\n  if (infoObject.referenceType === \"IndexToDirect\")\r\n    index = infoObject.indices[index];\r\n  const from = index * infoObject.dataSize;\r\n  const to = from + infoObject.dataSize;\r\n  return slice(dataArray, infoObject.buffer, from, to);\r\n}\r\nconst tempEuler = /* @__PURE__ */ new Euler();\r\nconst tempVec = /* @__PURE__ */ new Vector3();\r\nfunction generateTransform(transformData) {\r\n  const lTranslationM = new Matrix4();\r\n  const lPreRotationM = new Matrix4();\r\n  const lRotationM = new Matrix4();\r\n  const lPostRotationM = new Matrix4();\r\n  const lScalingM = new Matrix4();\r\n  const lScalingPivotM = new Matrix4();\r\n  const lScalingOffsetM = new Matrix4();\r\n  const lRotationOffsetM = new Matrix4();\r\n  const lRotationPivotM = new Matrix4();\r\n  const lParentGX = new Matrix4();\r\n  const lParentLX = new Matrix4();\r\n  const lGlobalT = new Matrix4();\r\n  const inheritType = transformData.inheritType ? transformData.inheritType : 0;\r\n  if (transformData.translation)\r\n    lTranslationM.setPosition(tempVec.fromArray(transformData.translation));\r\n  if (transformData.preRotation) {\r\n    const array = transformData.preRotation.map(MathUtils.degToRad);\r\n    array.push(transformData.eulerOrder);\r\n    lPreRotationM.makeRotationFromEuler(tempEuler.fromArray(array));\r\n  }\r\n  if (transformData.rotation) {\r\n    const array = transformData.rotation.map(MathUtils.degToRad);\r\n    array.push(transformData.eulerOrder);\r\n    lRotationM.makeRotationFromEuler(tempEuler.fromArray(array));\r\n  }\r\n  if (transformData.postRotation) {\r\n    const array = transformData.postRotation.map(MathUtils.degToRad);\r\n    array.push(transformData.eulerOrder);\r\n    lPostRotationM.makeRotationFromEuler(tempEuler.fromArray(array));\r\n    lPostRotationM.invert();\r\n  }\r\n  if (transformData.scale)\r\n    lScalingM.scale(tempVec.fromArray(transformData.scale));\r\n  if (transformData.scalingOffset)\r\n    lScalingOffsetM.setPosition(tempVec.fromArray(transformData.scalingOffset));\r\n  if (transformData.scalingPivot)\r\n    lScalingPivotM.setPosition(tempVec.fromArray(transformData.scalingPivot));\r\n  if (transformData.rotationOffset)\r\n    lRotationOffsetM.setPosition(tempVec.fromArray(transformData.rotationOffset));\r\n  if (transformData.rotationPivot)\r\n    lRotationPivotM.setPosition(tempVec.fromArray(transformData.rotationPivot));\r\n  if (transformData.parentMatrixWorld) {\r\n    lParentLX.copy(transformData.parentMatrix);\r\n    lParentGX.copy(transformData.parentMatrixWorld);\r\n  }\r\n  const lLRM = lPreRotationM.clone().multiply(lRotationM).multiply(lPostRotationM);\r\n  const lParentGRM = new Matrix4();\r\n  lParentGRM.extractRotation(lParentGX);\r\n  const lParentTM = new Matrix4();\r\n  lParentTM.copyPosition(lParentGX);\r\n  const lParentGRSM = lParentTM.clone().invert().multiply(lParentGX);\r\n  const lParentGSM = lParentGRM.clone().invert().multiply(lParentGRSM);\r\n  const lLSM = lScalingM;\r\n  const lGlobalRS = new Matrix4();\r\n  if (inheritType === 0) {\r\n    lGlobalRS.copy(lParentGRM).multiply(lLRM).multiply(lParentGSM).multiply(lLSM);\r\n  } else if (inheritType === 1) {\r\n    lGlobalRS.copy(lParentGRM).multiply(lParentGSM).multiply(lLRM).multiply(lLSM);\r\n  } else {\r\n    const lParentLSM = new Matrix4().scale(new Vector3().setFromMatrixScale(lParentLX));\r\n    const lParentLSM_inv = lParentLSM.clone().invert();\r\n    const lParentGSM_noLocal = lParentGSM.clone().multiply(lParentLSM_inv);\r\n    lGlobalRS.copy(lParentGRM).multiply(lLRM).multiply(lParentGSM_noLocal).multiply(lLSM);\r\n  }\r\n  const lRotationPivotM_inv = lRotationPivotM.clone().invert();\r\n  const lScalingPivotM_inv = lScalingPivotM.clone().invert();\r\n  let lTransform = lTranslationM.clone().multiply(lRotationOffsetM).multiply(lRotationPivotM).multiply(lPreRotationM).multiply(lRotationM).multiply(lPostRotationM).multiply(lRotationPivotM_inv).multiply(lScalingOffsetM).multiply(lScalingPivotM).multiply(lScalingM).multiply(lScalingPivotM_inv);\r\n  const lLocalTWithAllPivotAndOffsetInfo = new Matrix4().copyPosition(lTransform);\r\n  const lGlobalTranslation = lParentGX.clone().multiply(lLocalTWithAllPivotAndOffsetInfo);\r\n  lGlobalT.copyPosition(lGlobalTranslation);\r\n  lTransform = lGlobalT.clone().multiply(lGlobalRS);\r\n  lTransform.premultiply(lParentGX.invert());\r\n  return lTransform;\r\n}\r\nfunction getEulerOrder(order) {\r\n  order = order || 0;\r\n  const enums = [\r\n    \"ZYX\",\r\n    // -> XYZ extrinsic\r\n    \"YZX\",\r\n    // -> XZY extrinsic\r\n    \"XZY\",\r\n    // -> YZX extrinsic\r\n    \"ZXY\",\r\n    // -> YXZ extrinsic\r\n    \"YXZ\",\r\n    // -> ZXY extrinsic\r\n    \"XYZ\"\r\n    // -> ZYX extrinsic\r\n    //'SphericXYZ', // not possible to support\r\n  ];\r\n  if (order === 6) {\r\n    console.warn(\"THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect.\");\r\n    return enums[0];\r\n  }\r\n  return enums[order];\r\n}\r\nfunction parseNumberArray(value) {\r\n  const array = value.split(\",\").map(function(val) {\r\n    return parseFloat(val);\r\n  });\r\n  return array;\r\n}\r\nfunction convertArrayBufferToString(buffer, from, to) {\r\n  if (from === void 0)\r\n    from = 0;\r\n  if (to === void 0)\r\n    to = buffer.byteLength;\r\n  return LoaderUtils.decodeText(new Uint8Array(buffer, from, to));\r\n}\r\nfunction append(a, b) {\r\n  for (let i = 0, j = a.length, l = b.length; i < l; i++, j++) {\r\n    a[j] = b[i];\r\n  }\r\n}\r\nfunction slice(a, b, from, to) {\r\n  for (let i = from, j = 0; i < to; i++, j++) {\r\n    a[j] = b[i];\r\n  }\r\n  return a;\r\n}\r\nfunction inject(a1, index, a2) {\r\n  return a1.slice(0, index).concat(a2).concat(a1.slice(index));\r\n}\r\nexport {\r\n  FBXLoader\r\n};\r\n", "var __defProp = Object.defineProperty;\r\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\r\nvar __publicField = (obj, key, value) => {\r\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\r\n  return value;\r\n};\r\nimport { Loader, FileLoader, ShapePath } from \"three\";\r\nclass FontLoader extends Loader {\r\n  constructor(manager) {\r\n    super(manager);\r\n  }\r\n  load(url, onLoad, onProgress, onError) {\r\n    const loader = new FileLoader(this.manager);\r\n    loader.setPath(this.path);\r\n    loader.setRequestHeader(this.requestHeader);\r\n    loader.setWithCredentials(this.withCredentials);\r\n    loader.load(\r\n      url,\r\n      (response) => {\r\n        if (typeof response !== \"string\")\r\n          throw new Error(\"unsupported data type\");\r\n        const json = JSON.parse(response);\r\n        const font = this.parse(json);\r\n        if (onLoad)\r\n          onLoad(font);\r\n      },\r\n      onProgress,\r\n      onError\r\n    );\r\n  }\r\n  loadAsync(url, onProgress) {\r\n    return super.loadAsync(url, onProgress);\r\n  }\r\n  parse(json) {\r\n    return new Font(json);\r\n  }\r\n}\r\nclass Font {\r\n  constructor(data) {\r\n    __publicField(this, \"data\");\r\n    this.data = data;\r\n  }\r\n  generateShapes(text, size = 100, _options) {\r\n    const shapes = [];\r\n    const options = { letterSpacing: 0, lineHeight: 1, ..._options };\r\n    const paths = createPaths(text, size, this.data, options);\r\n    for (let p = 0, pl = paths.length; p < pl; p++) {\r\n      Array.prototype.push.apply(shapes, paths[p].toShapes(false));\r\n    }\r\n    return shapes;\r\n  }\r\n}\r\n__publicField(Font, \"isFont\");\r\n__publicField(Font, \"type\");\r\nfunction createPaths(text, size, data, options) {\r\n  const chars = Array.from(text);\r\n  const scale = size / data.resolution;\r\n  const line_height = (data.boundingBox.yMax - data.boundingBox.yMin + data.underlineThickness) * scale;\r\n  const paths = [];\r\n  let offsetX = 0, offsetY = 0;\r\n  for (let i = 0; i < chars.length; i++) {\r\n    const char = chars[i];\r\n    if (char === \"\\n\") {\r\n      offsetX = 0;\r\n      offsetY -= line_height * options.lineHeight;\r\n    } else {\r\n      const ret = createPath(char, scale, offsetX, offsetY, data);\r\n      if (ret) {\r\n        offsetX += ret.offsetX + options.letterSpacing;\r\n        paths.push(ret.path);\r\n      }\r\n    }\r\n  }\r\n  return paths;\r\n}\r\nfunction createPath(char, scale, offsetX, offsetY, data) {\r\n  const glyph = data.glyphs[char] || data.glyphs[\"?\"];\r\n  if (!glyph) {\r\n    console.error('THREE.Font: character \"' + char + '\" does not exists in font family ' + data.familyName + \".\");\r\n    return;\r\n  }\r\n  const path = new ShapePath();\r\n  let x, y, cpx, cpy, cpx1, cpy1, cpx2, cpy2;\r\n  if (glyph.o) {\r\n    const outline = glyph._cachedOutline || (glyph._cachedOutline = glyph.o.split(\" \"));\r\n    for (let i = 0, l = outline.length; i < l; ) {\r\n      const action = outline[i++];\r\n      switch (action) {\r\n        case \"m\":\r\n          x = parseInt(outline[i++]) * scale + offsetX;\r\n          y = parseInt(outline[i++]) * scale + offsetY;\r\n          path.moveTo(x, y);\r\n          break;\r\n        case \"l\":\r\n          x = parseInt(outline[i++]) * scale + offsetX;\r\n          y = parseInt(outline[i++]) * scale + offsetY;\r\n          path.lineTo(x, y);\r\n          break;\r\n        case \"q\":\r\n          cpx = parseInt(outline[i++]) * scale + offsetX;\r\n          cpy = parseInt(outline[i++]) * scale + offsetY;\r\n          cpx1 = parseInt(outline[i++]) * scale + offsetX;\r\n          cpy1 = parseInt(outline[i++]) * scale + offsetY;\r\n          path.quadraticCurveTo(cpx1, cpy1, cpx, cpy);\r\n          break;\r\n        case \"b\":\r\n          cpx = parseInt(outline[i++]) * scale + offsetX;\r\n          cpy = parseInt(outline[i++]) * scale + offsetY;\r\n          cpx1 = parseInt(outline[i++]) * scale + offsetX;\r\n          cpy1 = parseInt(outline[i++]) * scale + offsetY;\r\n          cpx2 = parseInt(outline[i++]) * scale + offsetX;\r\n          cpy2 = parseInt(outline[i++]) * scale + offsetY;\r\n          path.bezierCurveTo(cpx1, cpy1, cpx2, cpy2, cpx, cpy);\r\n          break;\r\n      }\r\n    }\r\n  }\r\n  return { offsetX: glyph.ha * scale, path };\r\n}\r\nexport {\r\n  Font,\r\n  FontLoader\r\n};\r\n", "import { Texture, NearestFilter, ClampToEdgeWrapping } from \"three\";\r\nclass Data3DTexture extends Texture {\r\n  constructor(data = null, width = 1, height = 1, depth = 1) {\r\n    super(null);\r\n    this.isData3DTexture = true;\r\n    this.image = { data, width, height, depth };\r\n    this.magFilter = NearestFilter;\r\n    this.minFilter = NearestFilter;\r\n    this.wrapR = ClampToEdgeWrapping;\r\n    this.generateMipmaps = false;\r\n    this.flipY = false;\r\n    this.unpackAlignment = 1;\r\n  }\r\n}\r\nexport {\r\n  Data3DTexture\r\n};\r\n", "import { Vector3, Quaternion, Loader, TextureLoader, FileLoader, LoaderUtils, Matrix4, Bone, BufferGeometry, Float32BufferAttribute, Uint16BufferAttribute, MeshPhongMaterial, FrontSide, Vector2, SkinnedMesh, Mesh, Skeleton, AnimationClip, AnimationMixer } from \"three\";\r\nvar XLoader = /* @__PURE__ */ function() {\r\n  var classCallCheck = function(instance, Constructor) {\r\n    if (!(instance instanceof Constructor)) {\r\n      throw new TypeError(\"Cannot call a class as a function\");\r\n    }\r\n  };\r\n  var createClass = function() {\r\n    function defineProperties(target, props) {\r\n      for (let i2 = 0; i2 < props.length; i2++) {\r\n        var descriptor = props[i2];\r\n        descriptor.enumerable = descriptor.enumerable || false;\r\n        descriptor.configurable = true;\r\n        if (\"value\" in descriptor)\r\n          descriptor.writable = true;\r\n        Object.defineProperty(target, descriptor.key, descriptor);\r\n      }\r\n    }\r\n    return function(Constructor, protoProps, staticProps) {\r\n      if (protoProps)\r\n        defineProperties(Constructor.prototype, protoProps);\r\n      if (staticProps)\r\n        defineProperties(Constructor, staticProps);\r\n      return Constructor;\r\n    };\r\n  }();\r\n  var XboneInf = function XboneInf2() {\r\n    classCallCheck(this, XboneInf2);\r\n    this.boneName = \"\";\r\n    this.BoneIndex = 0;\r\n    this.Indeces = [];\r\n    this.Weights = [];\r\n    this.initMatrix = null;\r\n    this.OffsetMatrix = null;\r\n  };\r\n  var XAnimationInfo = function XAnimationInfo2() {\r\n    classCallCheck(this, XAnimationInfo2);\r\n    this.animeName = \"\";\r\n    this.boneName = \"\";\r\n    this.targetBone = null;\r\n    this.keyType = 4;\r\n    this.frameStartLv = 0;\r\n    this.keyFrames = [];\r\n    this.InverseMx = null;\r\n  };\r\n  var XAnimationObj = function() {\r\n    function XAnimationObj2(_flags) {\r\n      classCallCheck(this, XAnimationObj2);\r\n      this.fps = 30;\r\n      this.name = \"xanimation\";\r\n      this.length = 0;\r\n      this.hierarchy = [];\r\n      this.putFlags = _flags;\r\n      if (this.putFlags.putPos === void 0) {\r\n        this.putFlags.putPos = true;\r\n      }\r\n      if (this.putFlags.putRot === void 0) {\r\n        this.putFlags.putRot = true;\r\n      }\r\n      if (this.putFlags.putScl === void 0) {\r\n        this.putFlags.putScl = true;\r\n      }\r\n    }\r\n    createClass(XAnimationObj2, [\r\n      {\r\n        key: \"make\",\r\n        value: function make(XAnimationInfoArray) {\r\n          for (let i2 = 0; i2 < XAnimationInfoArray.length; i2++) {\r\n            this.hierarchy.push(this.makeBonekeys(XAnimationInfoArray[i2]));\r\n          }\r\n          this.length = this.hierarchy[0].keys[this.hierarchy[0].keys.length - 1].time;\r\n        }\r\n      },\r\n      {\r\n        key: \"clone\",\r\n        value: function clone() {\r\n          return Object.assign({}, this);\r\n        }\r\n      },\r\n      {\r\n        key: \"makeBonekeys\",\r\n        value: function makeBonekeys(XAnimationInfo2) {\r\n          var refObj = {};\r\n          refObj.name = XAnimationInfo2.boneName;\r\n          refObj.parent = \"\";\r\n          refObj.keys = this.keyFrameRefactor(XAnimationInfo2);\r\n          refObj.copy = function() {\r\n            return Object.assign({}, this);\r\n          };\r\n          return refObj;\r\n        }\r\n      },\r\n      {\r\n        key: \"keyFrameRefactor\",\r\n        value: function keyFrameRefactor(XAnimationInfo2) {\r\n          var keys = [];\r\n          for (let i2 = 0; i2 < XAnimationInfo2.keyFrames.length; i2++) {\r\n            var keyframe = {};\r\n            keyframe.time = XAnimationInfo2.keyFrames[i2].time * this.fps;\r\n            if (XAnimationInfo2.keyFrames[i2].pos && this.putFlags.putPos) {\r\n              keyframe.pos = XAnimationInfo2.keyFrames[i2].pos;\r\n            }\r\n            if (XAnimationInfo2.keyFrames[i2].rot && this.putFlags.putRot) {\r\n              keyframe.rot = XAnimationInfo2.keyFrames[i2].rot;\r\n            }\r\n            if (XAnimationInfo2.keyFrames[i2].scl && this.putFlags.putScl) {\r\n              keyframe.scl = XAnimationInfo2.keyFrames[i2].scl;\r\n            }\r\n            if (XAnimationInfo2.keyFrames[i2].matrix) {\r\n              keyframe.matrix = XAnimationInfo2.keyFrames[i2].matrix;\r\n              if (this.putFlags.putPos) {\r\n                keyframe.pos = new Vector3().setFromMatrixPosition(keyframe.matrix);\r\n              }\r\n              if (this.putFlags.putRot) {\r\n                keyframe.rot = new Quaternion().setFromRotationMatrix(keyframe.matrix);\r\n              }\r\n              if (this.putFlags.putScl) {\r\n                keyframe.scl = new Vector3().setFromMatrixScale(keyframe.matrix);\r\n              }\r\n            }\r\n            keys.push(keyframe);\r\n          }\r\n          return keys;\r\n        }\r\n      }\r\n    ]);\r\n    return XAnimationObj2;\r\n  }();\r\n  var XKeyFrameInfo = function XKeyFrameInfo2() {\r\n    classCallCheck(this, XKeyFrameInfo2);\r\n    this.index = 0;\r\n    this.Frame = 0;\r\n    this.time = 0;\r\n    this.matrix = null;\r\n  };\r\n  var XLoader2 = function() {\r\n    function XLoader3(manager) {\r\n      Loader.call(this, manager);\r\n      classCallCheck(this, XLoader3);\r\n      this.debug = false;\r\n      this.texloader = new TextureLoader(this.manager);\r\n      this.url = \"\";\r\n      this._putMatLength = 0;\r\n      this._nowMat = null;\r\n      this._nowFrameName = \"\";\r\n      this.frameHierarchie = [];\r\n      this.Hierarchies = {};\r\n      this.HieStack = [];\r\n      this._currentObject = {};\r\n      this._currentFrame = {};\r\n      this._data = null;\r\n      this.onLoad = null;\r\n      this.IsUvYReverse = true;\r\n      this.Meshes = [];\r\n      this.animations = [];\r\n      this.animTicksPerSecond = 30;\r\n      this._currentGeo = null;\r\n      this._currentAnime = null;\r\n      this._currentAnimeFrames = null;\r\n    }\r\n    createClass(XLoader3, [\r\n      {\r\n        key: \"_setArgOption\",\r\n        value: function _setArgOption(_arg) {\r\n          var _start = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 0;\r\n          if (!_arg) {\r\n            return;\r\n          }\r\n          for (let i2 = _start; i2 < _arg.length; i2++) {\r\n            switch (i2) {\r\n              case 0:\r\n                this.url = _arg[i2];\r\n                break;\r\n              case 1:\r\n                this.options = _arg[i2];\r\n                break;\r\n            }\r\n          }\r\n          if (this.options === void 0) {\r\n            this.options = {};\r\n          }\r\n        }\r\n      },\r\n      {\r\n        key: \"load\",\r\n        value: function load(_arg, onLoad, onProgress, onError) {\r\n          var _this = this;\r\n          this._setArgOption(_arg);\r\n          var loader = new FileLoader(this.manager);\r\n          loader.setPath(this.path);\r\n          loader.setResponseType(\"arraybuffer\");\r\n          loader.setRequestHeader(this.requestHeader);\r\n          loader.setWithCredentials(this.withCredentials);\r\n          loader.load(\r\n            this.url,\r\n            function(response) {\r\n              try {\r\n                _this.parse(response, onLoad);\r\n              } catch (e) {\r\n                if (onError) {\r\n                  onError(e);\r\n                } else {\r\n                  console.error(e);\r\n                }\r\n                _this.manager.itemError(_this.url);\r\n              }\r\n            },\r\n            onProgress,\r\n            onError\r\n          );\r\n        }\r\n      },\r\n      {\r\n        key: \"_readLine\",\r\n        value: function _readLine(line) {\r\n          var readed = 0;\r\n          while (true) {\r\n            var find = -1;\r\n            find = line.indexOf(\"//\", readed);\r\n            if (find === -1) {\r\n              find = line.indexOf(\"#\", readed);\r\n            }\r\n            if (find > -1 && find < 2) {\r\n              var foundNewLine = -1;\r\n              foundNewLine = line.indexOf(\"\\r\\n\", readed);\r\n              if (foundNewLine > 0) {\r\n                readed = foundNewLine + 2;\r\n              } else {\r\n                foundNewLine = line.indexOf(\"\\r\", readed);\r\n                if (foundNewLine > 0) {\r\n                  readed = foundNewLine + 1;\r\n                } else {\r\n                  readed = line.indexOf(\"\\n\", readed) + 1;\r\n                }\r\n              }\r\n            } else {\r\n              break;\r\n            }\r\n          }\r\n          return line.substr(readed);\r\n        }\r\n      },\r\n      {\r\n        key: \"_readLine\",\r\n        value: function _readLine(line) {\r\n          var readed = 0;\r\n          while (true) {\r\n            var find = -1;\r\n            find = line.indexOf(\"//\", readed);\r\n            if (find === -1) {\r\n              find = line.indexOf(\"#\", readed);\r\n            }\r\n            if (find > -1 && find < 2) {\r\n              var foundNewLine = -1;\r\n              foundNewLine = line.indexOf(\"\\r\\n\", readed);\r\n              if (foundNewLine > 0) {\r\n                readed = foundNewLine + 2;\r\n              } else {\r\n                foundNewLine = line.indexOf(\"\\r\", readed);\r\n                if (foundNewLine > 0) {\r\n                  readed = foundNewLine + 1;\r\n                } else {\r\n                  readed = line.indexOf(\"\\n\", readed) + 1;\r\n                }\r\n              }\r\n            } else {\r\n              break;\r\n            }\r\n          }\r\n          return line.substr(readed);\r\n        }\r\n      },\r\n      {\r\n        key: \"_isBinary\",\r\n        value: function _isBinary(binData) {\r\n          var reader = new DataView(binData);\r\n          var face_size = 32 / 8 * 3 + 32 / 8 * 3 * 3 + 16 / 8;\r\n          var n_faces = reader.getUint32(80, true);\r\n          var expect = 80 + 32 / 8 + n_faces * face_size;\r\n          if (expect === reader.byteLength) {\r\n            return true;\r\n          }\r\n          var fileLength = reader.byteLength;\r\n          for (let index = 0; index < fileLength; index++) {\r\n            if (reader.getUint8(index, false) > 127) {\r\n              return true;\r\n            }\r\n          }\r\n          return false;\r\n        }\r\n      },\r\n      {\r\n        key: \"_ensureBinary\",\r\n        value: function _ensureBinary(buf) {\r\n          if (typeof buf === \"string\") {\r\n            var array_buffer = new Uint8Array(buf.length);\r\n            for (let i2 = 0; i2 < buf.length; i2++) {\r\n              array_buffer[i2] = buf.charCodeAt(i2) & 255;\r\n            }\r\n            return array_buffer.buffer || array_buffer;\r\n          } else {\r\n            return buf;\r\n          }\r\n        }\r\n      },\r\n      {\r\n        key: \"_ensureString\",\r\n        value: function _ensureString(buf) {\r\n          if (typeof buf !== \"string\") {\r\n            return LoaderUtils.decodeText(new Uint8Array(buf));\r\n          } else {\r\n            return buf;\r\n          }\r\n        }\r\n      },\r\n      {\r\n        key: \"parse\",\r\n        value: function _parse(data, onLoad) {\r\n          var binData = this._ensureBinary(data);\r\n          this._data = this._ensureString(data);\r\n          this.onLoad = onLoad;\r\n          return this._isBinary(binData) ? this._parseBinary(binData) : this._parseASCII();\r\n        }\r\n      },\r\n      {\r\n        key: \"_parseBinary\",\r\n        value: function _parseBinary(data) {\r\n          return this._parseASCII(LoaderUtils.decodeText(new Uint8Array(data)));\r\n        }\r\n      },\r\n      {\r\n        key: \"_parseASCII\",\r\n        value: function _parseASCII() {\r\n          var path;\r\n          if (this.resourcePath !== \"\") {\r\n            path = this.resourcePath;\r\n          } else if (this.path !== \"\") {\r\n            path = this.path;\r\n          } else {\r\n            path = LoaderUtils.extractUrlBase(this.url);\r\n          }\r\n          this.texloader.setPath(path).setCrossOrigin(this.crossOrigin);\r\n          var endRead = 16;\r\n          this.Hierarchies.children = [];\r\n          this._hierarchieParse(this.Hierarchies, endRead);\r\n          this._changeRoot();\r\n          this._currentObject = this.Hierarchies.children.shift();\r\n          this._mainloop();\r\n        }\r\n      },\r\n      {\r\n        key: \"_hierarchieParse\",\r\n        value: function _hierarchieParse(_parent, _end) {\r\n          var endRead = _end;\r\n          while (true) {\r\n            var find1 = this._data.indexOf(\"{\", endRead) + 1;\r\n            var findEnd = this._data.indexOf(\"}\", endRead);\r\n            var findNext = this._data.indexOf(\"{\", find1) + 1;\r\n            if (find1 > 0 && findEnd > find1) {\r\n              var _currentObject = {};\r\n              _currentObject.children = [];\r\n              var nameData = this._readLine(this._data.substr(endRead, find1 - endRead - 1)).trim();\r\n              var word = nameData.split(/ /g);\r\n              if (word.length > 0) {\r\n                _currentObject.type = word[0];\r\n                if (word.length >= 2) {\r\n                  _currentObject.name = word[1];\r\n                } else {\r\n                  _currentObject.name = word[0] + this.Hierarchies.children.length;\r\n                }\r\n              } else {\r\n                _currentObject.name = nameData;\r\n                _currentObject.type = \"\";\r\n              }\r\n              if (_currentObject.type === \"Animation\") {\r\n                _currentObject.data = this._data.substr(findNext, findEnd - findNext).trim();\r\n                var refs = this._hierarchieParse(_currentObject, findEnd + 1);\r\n                endRead = refs.end;\r\n                _currentObject.children = refs.parent.children;\r\n              } else {\r\n                var DataEnder = this._data.lastIndexOf(\";\", findNext > 0 ? Math.min(findNext, findEnd) : findEnd);\r\n                _currentObject.data = this._data.substr(find1, DataEnder - find1).trim();\r\n                if (findNext <= 0 || findEnd < findNext) {\r\n                  endRead = findEnd + 1;\r\n                } else {\r\n                  var nextStart = Math.max(DataEnder + 1, find1);\r\n                  var _refs = this._hierarchieParse(_currentObject, nextStart);\r\n                  endRead = _refs.end;\r\n                  _currentObject.children = _refs.parent.children;\r\n                }\r\n              }\r\n              _currentObject.parent = _parent;\r\n              if (_currentObject.type != \"template\") {\r\n                _parent.children.push(_currentObject);\r\n              }\r\n            } else {\r\n              endRead = find1 === -1 ? this._data.length : findEnd + 1;\r\n              break;\r\n            }\r\n          }\r\n          return {\r\n            parent: _parent,\r\n            end: endRead\r\n          };\r\n        }\r\n      },\r\n      {\r\n        key: \"_mainloop\",\r\n        value: function _mainloop() {\r\n          var _this2 = this;\r\n          this._mainProc();\r\n          if (this._currentObject.parent || this._currentObject.children.length > 0 || !this._currentObject.worked) {\r\n            setTimeout(function() {\r\n              _this2._mainloop();\r\n            }, 1);\r\n          } else {\r\n            setTimeout(function() {\r\n              _this2.onLoad({\r\n                models: _this2.Meshes,\r\n                animations: _this2.animations\r\n              });\r\n            }, 1);\r\n          }\r\n        }\r\n      },\r\n      {\r\n        key: \"_mainProc\",\r\n        value: function _mainProc() {\r\n          var breakFlag = false;\r\n          while (true) {\r\n            if (!this._currentObject.worked) {\r\n              switch (this._currentObject.type) {\r\n                case \"template\":\r\n                  break;\r\n                case \"AnimTicksPerSecond\":\r\n                  this.animTicksPerSecond = parseInt(this._currentObject.data);\r\n                  break;\r\n                case \"Frame\":\r\n                  this._setFrame();\r\n                  break;\r\n                case \"FrameTransformMatrix\":\r\n                  this._setFrameTransformMatrix();\r\n                  break;\r\n                case \"Mesh\":\r\n                  this._changeRoot();\r\n                  this._currentGeo = {};\r\n                  this._currentGeo.name = this._currentObject.name.trim();\r\n                  this._currentGeo.parentName = this._getParentName(this._currentObject).trim();\r\n                  this._currentGeo.VertexSetedBoneCount = [];\r\n                  this._currentGeo.GeometryData = {\r\n                    vertices: [],\r\n                    normals: [],\r\n                    uvs: [],\r\n                    skinIndices: [],\r\n                    skinWeights: [],\r\n                    indices: [],\r\n                    materialIndices: []\r\n                  };\r\n                  this._currentGeo.Materials = [];\r\n                  this._currentGeo.normalVectors = [];\r\n                  this._currentGeo.BoneInfs = [];\r\n                  this._currentGeo.baseFrame = this._currentFrame;\r\n                  this._makeBoneFrom_CurrentFrame();\r\n                  this._readVertexDatas();\r\n                  breakFlag = true;\r\n                  break;\r\n                case \"MeshNormals\":\r\n                  this._readVertexDatas();\r\n                  break;\r\n                case \"MeshTextureCoords\":\r\n                  this._setMeshTextureCoords();\r\n                  break;\r\n                case \"VertexDuplicationIndices\":\r\n                  break;\r\n                case \"MeshMaterialList\":\r\n                  this._setMeshMaterialList();\r\n                  break;\r\n                case \"Material\":\r\n                  this._setMaterial();\r\n                  break;\r\n                case \"SkinWeights\":\r\n                  this._setSkinWeights();\r\n                  break;\r\n                case \"AnimationSet\":\r\n                  this._changeRoot();\r\n                  this._currentAnime = {};\r\n                  this._currentAnime.name = this._currentObject.name.trim();\r\n                  this._currentAnime.AnimeFrames = [];\r\n                  break;\r\n                case \"Animation\":\r\n                  if (this._currentAnimeFrames) {\r\n                    this._currentAnime.AnimeFrames.push(this._currentAnimeFrames);\r\n                  }\r\n                  this._currentAnimeFrames = new XAnimationInfo();\r\n                  this._currentAnimeFrames.boneName = this._currentObject.data.trim();\r\n                  break;\r\n                case \"AnimationKey\":\r\n                  this._readAnimationKey();\r\n                  breakFlag = true;\r\n                  break;\r\n              }\r\n              this._currentObject.worked = true;\r\n            }\r\n            if (this._currentObject.children.length > 0) {\r\n              this._currentObject = this._currentObject.children.shift();\r\n              if (this.debug) {\r\n                console.log(\"processing \" + this._currentObject.name);\r\n              }\r\n              if (breakFlag)\r\n                break;\r\n            } else {\r\n              if (this._currentObject.worked) {\r\n                if (this._currentObject.parent && !this._currentObject.parent.parent) {\r\n                  this._changeRoot();\r\n                }\r\n              }\r\n              if (this._currentObject.parent) {\r\n                this._currentObject = this._currentObject.parent;\r\n              } else {\r\n                breakFlag = true;\r\n              }\r\n              if (breakFlag)\r\n                break;\r\n            }\r\n          }\r\n          return;\r\n        }\r\n      },\r\n      {\r\n        key: \"_changeRoot\",\r\n        value: function _changeRoot() {\r\n          if (this._currentGeo != null && this._currentGeo.name) {\r\n            this._makeOutputGeometry();\r\n          }\r\n          this._currentGeo = {};\r\n          if (this._currentAnime != null && this._currentAnime.name) {\r\n            if (this._currentAnimeFrames) {\r\n              this._currentAnime.AnimeFrames.push(this._currentAnimeFrames);\r\n              this._currentAnimeFrames = null;\r\n            }\r\n            this._makeOutputAnimation();\r\n          }\r\n          this._currentAnime = {};\r\n        }\r\n      },\r\n      {\r\n        key: \"_getParentName\",\r\n        value: function _getParentName(_obj) {\r\n          if (_obj.parent) {\r\n            if (_obj.parent.name) {\r\n              return _obj.parent.name;\r\n            } else {\r\n              return this._getParentName(_obj.parent);\r\n            }\r\n          } else {\r\n            return \"\";\r\n          }\r\n        }\r\n      },\r\n      {\r\n        key: \"_setFrame\",\r\n        value: function _setFrame() {\r\n          this._nowFrameName = this._currentObject.name.trim();\r\n          this._currentFrame = {};\r\n          this._currentFrame.name = this._nowFrameName;\r\n          this._currentFrame.children = [];\r\n          if (this._currentObject.parent && this._currentObject.parent.name) {\r\n            this._currentFrame.parentName = this._currentObject.parent.name;\r\n          }\r\n          this.frameHierarchie.push(this._nowFrameName);\r\n          this.HieStack[this._nowFrameName] = this._currentFrame;\r\n        }\r\n      },\r\n      {\r\n        key: \"_setFrameTransformMatrix\",\r\n        value: function _setFrameTransformMatrix() {\r\n          this._currentFrame.FrameTransformMatrix = new Matrix4();\r\n          var data = this._currentObject.data.split(\",\");\r\n          this._ParseMatrixData(this._currentFrame.FrameTransformMatrix, data);\r\n          this._makeBoneFrom_CurrentFrame();\r\n        }\r\n      },\r\n      {\r\n        key: \"_makeBoneFrom_CurrentFrame\",\r\n        value: function _makeBoneFrom_CurrentFrame() {\r\n          if (!this._currentFrame.FrameTransformMatrix) {\r\n            return;\r\n          }\r\n          var b = new Bone();\r\n          b.name = this._currentFrame.name;\r\n          b.applyMatrix4(this._currentFrame.FrameTransformMatrix);\r\n          b.matrixWorld = b.matrix;\r\n          b.FrameTransformMatrix = this._currentFrame.FrameTransformMatrix;\r\n          this._currentFrame.putBone = b;\r\n          if (this._currentFrame.parentName) {\r\n            for (let frame in this.HieStack) {\r\n              if (this.HieStack[frame].name === this._currentFrame.parentName) {\r\n                this.HieStack[frame].putBone.add(this._currentFrame.putBone);\r\n              }\r\n            }\r\n          }\r\n        }\r\n      },\r\n      {\r\n        key: \"_readVertexDatas\",\r\n        value: function _readVertexDatas() {\r\n          var endRead = 0;\r\n          var mode = 0;\r\n          var mode_local = 0;\r\n          var maxLength = 0;\r\n          while (true) {\r\n            var changeMode = false;\r\n            if (mode_local === 0) {\r\n              var refO = this._readInt1(endRead);\r\n              endRead = refO.endRead;\r\n              mode_local = 1;\r\n              maxLength = this._currentObject.data.indexOf(\";;\", endRead) + 1;\r\n              if (maxLength <= 0) {\r\n                maxLength = this._currentObject.data.length;\r\n              }\r\n            } else {\r\n              var find = 0;\r\n              switch (mode) {\r\n                case 0:\r\n                  find = this._currentObject.data.indexOf(\",\", endRead) + 1;\r\n                  break;\r\n                case 1:\r\n                  find = this._currentObject.data.indexOf(\";,\", endRead) + 1;\r\n                  break;\r\n              }\r\n              if (find === 0 || find > maxLength) {\r\n                find = maxLength;\r\n                mode_local = 0;\r\n                changeMode = true;\r\n              }\r\n              switch (this._currentObject.type) {\r\n                case \"Mesh\":\r\n                  switch (mode) {\r\n                    case 0:\r\n                      this._readVertex1(this._currentObject.data.substr(endRead, find - endRead));\r\n                      break;\r\n                    case 1:\r\n                      this._readFace1(this._currentObject.data.substr(endRead, find - endRead));\r\n                      break;\r\n                  }\r\n                  break;\r\n                case \"MeshNormals\":\r\n                  switch (mode) {\r\n                    case 0:\r\n                      this._readNormalVector1(this._currentObject.data.substr(endRead, find - endRead));\r\n                      break;\r\n                  }\r\n                  break;\r\n              }\r\n              endRead = find + 1;\r\n              if (changeMode) {\r\n                mode++;\r\n              }\r\n            }\r\n            if (endRead >= this._currentObject.data.length) {\r\n              break;\r\n            }\r\n          }\r\n        }\r\n      },\r\n      {\r\n        key: \"_readInt1\",\r\n        value: function _readInt1(start) {\r\n          var find = this._currentObject.data.indexOf(\";\", start);\r\n          return {\r\n            refI: parseInt(this._currentObject.data.substr(start, find - start)),\r\n            endRead: find + 1\r\n          };\r\n        }\r\n      },\r\n      {\r\n        key: \"_readVertex1\",\r\n        value: function _readVertex1(line) {\r\n          var data = this._readLine(line.trim()).substr(0, line.length - 2).split(\";\");\r\n          this._currentGeo.GeometryData.vertices.push(parseFloat(data[0]), parseFloat(data[1]), parseFloat(data[2]));\r\n          this._currentGeo.GeometryData.skinIndices.push(0, 0, 0, 0);\r\n          this._currentGeo.GeometryData.skinWeights.push(1, 0, 0, 0);\r\n          this._currentGeo.VertexSetedBoneCount.push(0);\r\n        }\r\n      },\r\n      {\r\n        key: \"_readFace1\",\r\n        value: function _readFace1(line) {\r\n          var data = this._readLine(line.trim()).substr(2, line.length - 4).split(\",\");\r\n          this._currentGeo.GeometryData.indices.push(\r\n            parseInt(data[0], 10),\r\n            parseInt(data[1], 10),\r\n            parseInt(data[2], 10)\r\n          );\r\n        }\r\n      },\r\n      {\r\n        key: \"_readNormalVector1\",\r\n        value: function _readNormalVector1(line) {\r\n          var data = this._readLine(line.trim()).substr(0, line.length - 2).split(\";\");\r\n          this._currentGeo.GeometryData.normals.push(parseFloat(data[0]), parseFloat(data[1]), parseFloat(data[2]));\r\n        }\r\n      },\r\n      {\r\n        key: \"_buildGeometry\",\r\n        value: function _buildGeometry() {\r\n          var bufferGeometry = new BufferGeometry();\r\n          var position = [];\r\n          var normals = [];\r\n          var uvs = [];\r\n          var skinIndices = [];\r\n          var skinWeights = [];\r\n          var data = this._currentGeo.GeometryData;\r\n          for (let i2 = 0, l = data.indices.length; i2 < l; i2++) {\r\n            var stride2 = data.indices[i2] * 2;\r\n            var stride3 = data.indices[i2] * 3;\r\n            var stride4 = data.indices[i2] * 4;\r\n            position.push(data.vertices[stride3], data.vertices[stride3 + 1], data.vertices[stride3 + 2]);\r\n            normals.push(data.normals[stride3], data.normals[stride3 + 1], data.normals[stride3 + 2]);\r\n            skinIndices.push(\r\n              data.skinIndices[stride4],\r\n              data.skinIndices[stride4 + 1],\r\n              data.skinIndices[stride4 + 2],\r\n              data.skinIndices[stride4 + 3]\r\n            );\r\n            skinWeights.push(\r\n              data.skinWeights[stride4],\r\n              data.skinWeights[stride4 + 1],\r\n              data.skinWeights[stride4 + 2],\r\n              data.skinWeights[stride4 + 3]\r\n            );\r\n            uvs.push(data.uvs[stride2], data.uvs[stride2 + 1]);\r\n          }\r\n          bufferGeometry.setAttribute(\"position\", new Float32BufferAttribute(position, 3));\r\n          bufferGeometry.setAttribute(\"normal\", new Float32BufferAttribute(normals, 3));\r\n          bufferGeometry.setAttribute(\"uv\", new Float32BufferAttribute(uvs, 2));\r\n          bufferGeometry.setAttribute(\"skinIndex\", new Uint16BufferAttribute(skinIndices, 4));\r\n          bufferGeometry.setAttribute(\"skinWeight\", new Float32BufferAttribute(skinWeights, 4));\r\n          this._computeGroups(bufferGeometry, data.materialIndices);\r\n          return bufferGeometry;\r\n        }\r\n      },\r\n      {\r\n        key: \"_computeGroups\",\r\n        value: function _computeGroups(bufferGeometry, materialIndices) {\r\n          var group;\r\n          var groups = [];\r\n          var materialIndex = void 0;\r\n          for (let i2 = 0; i2 < materialIndices.length; i2++) {\r\n            var currentMaterialIndex = materialIndices[i2];\r\n            if (currentMaterialIndex !== materialIndex) {\r\n              materialIndex = currentMaterialIndex;\r\n              if (group !== void 0) {\r\n                group.count = i2 * 3 - group.start;\r\n                groups.push(group);\r\n              }\r\n              group = {\r\n                start: i2 * 3,\r\n                materialIndex\r\n              };\r\n            }\r\n          }\r\n          if (group !== void 0) {\r\n            group.count = i * 3 - group.start;\r\n            groups.push(group);\r\n          }\r\n          bufferGeometry.groups = groups;\r\n        }\r\n      },\r\n      {\r\n        key: \"_setMeshTextureCoords\",\r\n        value: function _setMeshTextureCoords() {\r\n          var endRead = 0;\r\n          var mode = 0;\r\n          var mode_local = 0;\r\n          while (true) {\r\n            switch (mode) {\r\n              case 0:\r\n                if (mode_local === 0) {\r\n                  var refO = this._readInt1(0);\r\n                  endRead = refO.endRead;\r\n                  mode_local = 1;\r\n                } else {\r\n                  var find = this._currentObject.data.indexOf(\",\", endRead) + 1;\r\n                  if (find === 0) {\r\n                    find = this._currentObject.data.length;\r\n                    mode = 2;\r\n                    mode_local = 0;\r\n                  }\r\n                  var line = this._currentObject.data.substr(endRead, find - endRead);\r\n                  var data = this._readLine(line.trim()).split(\";\");\r\n                  if (this.IsUvYReverse) {\r\n                    this._currentGeo.GeometryData.uvs.push(parseFloat(data[0]), 1 - parseFloat(data[1]));\r\n                  } else {\r\n                    this._currentGeo.GeometryData.uvs.push(parseFloat(data[0]), parseFloat(data[1]));\r\n                  }\r\n                  endRead = find + 1;\r\n                }\r\n                break;\r\n            }\r\n            if (endRead >= this._currentObject.data.length) {\r\n              break;\r\n            }\r\n          }\r\n        }\r\n      },\r\n      {\r\n        key: \"_setMeshMaterialList\",\r\n        value: function _setMeshMaterialList() {\r\n          var endRead = 0;\r\n          var mode = 0;\r\n          var mode_local = 0;\r\n          while (true) {\r\n            if (mode_local < 2) {\r\n              var refO = this._readInt1(endRead);\r\n              endRead = refO.endRead;\r\n              mode_local++;\r\n            } else {\r\n              var find = this._currentObject.data.indexOf(\";\", endRead);\r\n              if (find === -1) {\r\n                find = this._currentObject.data.length;\r\n                mode = 3;\r\n                mode_local = 0;\r\n              }\r\n              var line = this._currentObject.data.substr(endRead, find - endRead);\r\n              var data = this._readLine(line.trim()).split(\",\");\r\n              for (let i2 = 0; i2 < data.length; i2++) {\r\n                this._currentGeo.GeometryData.materialIndices[i2] = parseInt(data[i2]);\r\n              }\r\n              endRead = this._currentObject.data.length;\r\n            }\r\n            if (endRead >= this._currentObject.data.length || mode >= 3) {\r\n              break;\r\n            }\r\n          }\r\n        }\r\n      },\r\n      {\r\n        key: \"_setMaterial\",\r\n        value: function _setMaterial() {\r\n          var _nowMat = new MeshPhongMaterial({\r\n            color: Math.random() * 16777215\r\n          });\r\n          _nowMat.side = FrontSide;\r\n          _nowMat.name = this._currentObject.name;\r\n          var endRead = 0;\r\n          var find = this._currentObject.data.indexOf(\";;\", endRead);\r\n          var line = this._currentObject.data.substr(endRead, find - endRead);\r\n          var data = this._readLine(line.trim()).split(\";\");\r\n          _nowMat.color.r = parseFloat(data[0]);\r\n          _nowMat.color.g = parseFloat(data[1]);\r\n          _nowMat.color.b = parseFloat(data[2]);\r\n          endRead = find + 2;\r\n          find = this._currentObject.data.indexOf(\";\", endRead);\r\n          line = this._currentObject.data.substr(endRead, find - endRead);\r\n          _nowMat.shininess = parseFloat(this._readLine(line));\r\n          endRead = find + 1;\r\n          find = this._currentObject.data.indexOf(\";;\", endRead);\r\n          line = this._currentObject.data.substr(endRead, find - endRead);\r\n          var data2 = this._readLine(line.trim()).split(\";\");\r\n          _nowMat.specular.r = parseFloat(data2[0]);\r\n          _nowMat.specular.g = parseFloat(data2[1]);\r\n          _nowMat.specular.b = parseFloat(data2[2]);\r\n          endRead = find + 2;\r\n          find = this._currentObject.data.indexOf(\";;\", endRead);\r\n          if (find === -1) {\r\n            find = this._currentObject.data.length;\r\n          }\r\n          line = this._currentObject.data.substr(endRead, find - endRead);\r\n          var data3 = this._readLine(line.trim()).split(\";\");\r\n          _nowMat.emissive.r = parseFloat(data3[0]);\r\n          _nowMat.emissive.g = parseFloat(data3[1]);\r\n          _nowMat.emissive.b = parseFloat(data3[2]);\r\n          var localObject = null;\r\n          while (true) {\r\n            if (this._currentObject.children.length > 0) {\r\n              localObject = this._currentObject.children.shift();\r\n              if (this.debug) {\r\n                console.log(\"processing \" + localObject.name);\r\n              }\r\n              var fileName = localObject.data.substr(1, localObject.data.length - 2);\r\n              switch (localObject.type) {\r\n                case \"TextureFilename\":\r\n                  _nowMat.map = this.texloader.load(fileName);\r\n                  break;\r\n                case \"BumpMapFilename\":\r\n                  _nowMat.bumpMap = this.texloader.load(fileName);\r\n                  _nowMat.bumpScale = 0.05;\r\n                  break;\r\n                case \"NormalMapFilename\":\r\n                  _nowMat.normalMap = this.texloader.load(fileName);\r\n                  _nowMat.normalScale = new Vector2(2, 2);\r\n                  break;\r\n                case \"EmissiveMapFilename\":\r\n                  _nowMat.emissiveMap = this.texloader.load(fileName);\r\n                  break;\r\n                case \"LightMapFilename\":\r\n                  _nowMat.lightMap = this.texloader.load(fileName);\r\n                  break;\r\n              }\r\n            } else {\r\n              break;\r\n            }\r\n          }\r\n          this._currentGeo.Materials.push(_nowMat);\r\n        }\r\n      },\r\n      {\r\n        key: \"_setSkinWeights\",\r\n        value: function _setSkinWeights() {\r\n          var boneInf = new XboneInf();\r\n          var endRead = 0;\r\n          var find = this._currentObject.data.indexOf(\";\", endRead);\r\n          var line = this._currentObject.data.substr(endRead, find - endRead);\r\n          endRead = find + 1;\r\n          boneInf.boneName = line.substr(1, line.length - 2);\r\n          boneInf.BoneIndex = this._currentGeo.BoneInfs.length;\r\n          find = this._currentObject.data.indexOf(\";\", endRead);\r\n          endRead = find + 1;\r\n          find = this._currentObject.data.indexOf(\";\", endRead);\r\n          line = this._currentObject.data.substr(endRead, find - endRead);\r\n          var data = this._readLine(line.trim()).split(\",\");\r\n          for (let i2 = 0; i2 < data.length; i2++) {\r\n            boneInf.Indeces.push(parseInt(data[i2]));\r\n          }\r\n          endRead = find + 1;\r\n          find = this._currentObject.data.indexOf(\";\", endRead);\r\n          line = this._currentObject.data.substr(endRead, find - endRead);\r\n          var data2 = this._readLine(line.trim()).split(\",\");\r\n          for (let _i = 0; _i < data2.length; _i++) {\r\n            boneInf.Weights.push(parseFloat(data2[_i]));\r\n          }\r\n          endRead = find + 1;\r\n          find = this._currentObject.data.indexOf(\";\", endRead);\r\n          if (find <= 0) {\r\n            find = this._currentObject.data.length;\r\n          }\r\n          line = this._currentObject.data.substr(endRead, find - endRead);\r\n          var data3 = this._readLine(line.trim()).split(\",\");\r\n          boneInf.OffsetMatrix = new Matrix4();\r\n          this._ParseMatrixData(boneInf.OffsetMatrix, data3);\r\n          this._currentGeo.BoneInfs.push(boneInf);\r\n        }\r\n      },\r\n      {\r\n        key: \"_makePutBoneList\",\r\n        value: function _makePutBoneList(_RootName, _bones) {\r\n          var putting = false;\r\n          for (let frame in this.HieStack) {\r\n            if (this.HieStack[frame].name === _RootName || putting) {\r\n              putting = true;\r\n              var b = new Bone();\r\n              b.name = this.HieStack[frame].name;\r\n              b.applyMatrix4(this.HieStack[frame].FrameTransformMatrix);\r\n              b.matrixWorld = b.matrix;\r\n              b.FrameTransformMatrix = this.HieStack[frame].FrameTransformMatrix;\r\n              b.pos = new Vector3().setFromMatrixPosition(b.FrameTransformMatrix).toArray();\r\n              b.rotq = new Quaternion().setFromRotationMatrix(b.FrameTransformMatrix).toArray();\r\n              b.scl = new Vector3().setFromMatrixScale(b.FrameTransformMatrix).toArray();\r\n              if (this.HieStack[frame].parentName && this.HieStack[frame].parentName.length > 0) {\r\n                for (let i2 = 0; i2 < _bones.length; i2++) {\r\n                  if (this.HieStack[frame].parentName === _bones[i2].name) {\r\n                    _bones[i2].add(b);\r\n                    b.parent = i2;\r\n                    break;\r\n                  }\r\n                }\r\n              }\r\n              _bones.push(b);\r\n            }\r\n          }\r\n        }\r\n      },\r\n      {\r\n        key: \"_makeOutputGeometry\",\r\n        value: function _makeOutputGeometry() {\r\n          var mesh = null;\r\n          if (this._currentGeo.BoneInfs.length > 0) {\r\n            var putBones = [];\r\n            this._makePutBoneList(this._currentGeo.baseFrame.parentName, putBones);\r\n            for (let bi = 0; bi < this._currentGeo.BoneInfs.length; bi++) {\r\n              var boneIndex = 0;\r\n              for (let bb = 0; bb < putBones.length; bb++) {\r\n                if (putBones[bb].name === this._currentGeo.BoneInfs[bi].boneName) {\r\n                  boneIndex = bb;\r\n                  putBones[bb].OffsetMatrix = new Matrix4();\r\n                  putBones[bb].OffsetMatrix.copy(this._currentGeo.BoneInfs[bi].OffsetMatrix);\r\n                  break;\r\n                }\r\n              }\r\n              for (let vi = 0; vi < this._currentGeo.BoneInfs[bi].Indeces.length; vi++) {\r\n                var nowVertexID = this._currentGeo.BoneInfs[bi].Indeces[vi];\r\n                var nowVal = this._currentGeo.BoneInfs[bi].Weights[vi];\r\n                var stride = nowVertexID * 4;\r\n                switch (this._currentGeo.VertexSetedBoneCount[nowVertexID]) {\r\n                  case 0:\r\n                    this._currentGeo.GeometryData.skinIndices[stride] = boneIndex;\r\n                    this._currentGeo.GeometryData.skinWeights[stride] = nowVal;\r\n                    break;\r\n                  case 1:\r\n                    this._currentGeo.GeometryData.skinIndices[stride + 1] = boneIndex;\r\n                    this._currentGeo.GeometryData.skinWeights[stride + 1] = nowVal;\r\n                    break;\r\n                  case 2:\r\n                    this._currentGeo.GeometryData.skinIndices[stride + 2] = boneIndex;\r\n                    this._currentGeo.GeometryData.skinWeights[stride + 2] = nowVal;\r\n                    break;\r\n                  case 3:\r\n                    this._currentGeo.GeometryData.skinIndices[stride + 3] = boneIndex;\r\n                    this._currentGeo.GeometryData.skinWeights[stride + 3] = nowVal;\r\n                    break;\r\n                }\r\n                this._currentGeo.VertexSetedBoneCount[nowVertexID]++;\r\n                if (this._currentGeo.VertexSetedBoneCount[nowVertexID] > 4) {\r\n                  console.log(\"warn! over 4 bone weight! :\" + nowVertexID);\r\n                }\r\n              }\r\n            }\r\n            for (let sk = 0; sk < this._currentGeo.Materials.length; sk++) {\r\n              this._currentGeo.Materials[sk].skinning = true;\r\n            }\r\n            var offsetList = [];\r\n            for (let _bi = 0; _bi < putBones.length; _bi++) {\r\n              if (putBones[_bi].OffsetMatrix) {\r\n                offsetList.push(putBones[_bi].OffsetMatrix);\r\n              } else {\r\n                offsetList.push(new Matrix4());\r\n              }\r\n            }\r\n            var bufferGeometry = this._buildGeometry();\r\n            mesh = new SkinnedMesh(\r\n              bufferGeometry,\r\n              this._currentGeo.Materials.length === 1 ? this._currentGeo.Materials[0] : this._currentGeo.Materials\r\n            );\r\n            this._initSkeleton(mesh, putBones, offsetList);\r\n          } else {\r\n            var _bufferGeometry = this._buildGeometry();\r\n            mesh = new Mesh(\r\n              _bufferGeometry,\r\n              this._currentGeo.Materials.length === 1 ? this._currentGeo.Materials[0] : this._currentGeo.Materials\r\n            );\r\n          }\r\n          mesh.name = this._currentGeo.name;\r\n          var worldBaseMx = new Matrix4();\r\n          var currentMxFrame = this._currentGeo.baseFrame.putBone;\r\n          if (currentMxFrame && currentMxFrame.parent) {\r\n            while (true) {\r\n              currentMxFrame = currentMxFrame.parent;\r\n              if (currentMxFrame) {\r\n                worldBaseMx.multiply(currentMxFrame.FrameTransformMatrix);\r\n              } else {\r\n                break;\r\n              }\r\n            }\r\n            mesh.applyMatrix4(worldBaseMx);\r\n          }\r\n          this.Meshes.push(mesh);\r\n        }\r\n      },\r\n      {\r\n        key: \"_initSkeleton\",\r\n        value: function _initSkeleton(mesh, boneList, boneInverses) {\r\n          var bones = [], bone, gbone;\r\n          var i2, il;\r\n          for (i2 = 0, il = boneList.length; i2 < il; i2++) {\r\n            gbone = boneList[i2];\r\n            bone = new Bone();\r\n            bones.push(bone);\r\n            bone.name = gbone.name;\r\n            bone.position.fromArray(gbone.pos);\r\n            bone.quaternion.fromArray(gbone.rotq);\r\n            if (gbone.scl !== void 0)\r\n              bone.scale.fromArray(gbone.scl);\r\n          }\r\n          for (i2 = 0, il = boneList.length; i2 < il; i2++) {\r\n            gbone = boneList[i2];\r\n            if (gbone.parent !== -1 && gbone.parent !== null && bones[gbone.parent] !== void 0) {\r\n              bones[gbone.parent].add(bones[i2]);\r\n            } else {\r\n              mesh.add(bones[i2]);\r\n            }\r\n          }\r\n          mesh.updateMatrixWorld(true);\r\n          var skeleton = new Skeleton(bones, boneInverses);\r\n          mesh.bind(skeleton, mesh.matrixWorld);\r\n        }\r\n      },\r\n      {\r\n        key: \"_readAnimationKey\",\r\n        value: function _readAnimationKey() {\r\n          var endRead = 0;\r\n          var find = this._currentObject.data.indexOf(\";\", endRead);\r\n          var line = this._currentObject.data.substr(endRead, find - endRead);\r\n          endRead = find + 1;\r\n          var nowKeyType = parseInt(this._readLine(line));\r\n          find = this._currentObject.data.indexOf(\";\", endRead);\r\n          endRead = find + 1;\r\n          line = this._currentObject.data.substr(endRead);\r\n          var data = this._readLine(line.trim()).split(\";;,\");\r\n          for (let i2 = 0; i2 < data.length; i2++) {\r\n            var data2 = data[i2].split(\";\");\r\n            var keyInfo = new XKeyFrameInfo();\r\n            keyInfo.type = nowKeyType;\r\n            keyInfo.Frame = parseInt(data2[0]);\r\n            keyInfo.index = this._currentAnimeFrames.keyFrames.length;\r\n            keyInfo.time = keyInfo.Frame;\r\n            if (nowKeyType != 4) {\r\n              var frameFound = false;\r\n              for (let mm = 0; mm < this._currentAnimeFrames.keyFrames.length; mm++) {\r\n                if (this._currentAnimeFrames.keyFrames[mm].Frame === keyInfo.Frame) {\r\n                  keyInfo = this._currentAnimeFrames.keyFrames[mm];\r\n                  frameFound = true;\r\n                  break;\r\n                }\r\n              }\r\n              var frameValue = data2[2].split(\",\");\r\n              switch (nowKeyType) {\r\n                case 0:\r\n                  keyInfo.rot = new Quaternion(\r\n                    parseFloat(frameValue[1]),\r\n                    parseFloat(frameValue[2]),\r\n                    parseFloat(frameValue[3]),\r\n                    parseFloat(frameValue[0]) * -1\r\n                  );\r\n                  break;\r\n                case 1:\r\n                  keyInfo.scl = new Vector3(\r\n                    parseFloat(frameValue[0]),\r\n                    parseFloat(frameValue[1]),\r\n                    parseFloat(frameValue[2])\r\n                  );\r\n                  break;\r\n                case 2:\r\n                  keyInfo.pos = new Vector3(\r\n                    parseFloat(frameValue[0]),\r\n                    parseFloat(frameValue[1]),\r\n                    parseFloat(frameValue[2])\r\n                  );\r\n                  break;\r\n              }\r\n              if (!frameFound) {\r\n                this._currentAnimeFrames.keyFrames.push(keyInfo);\r\n              }\r\n            } else {\r\n              keyInfo.matrix = new Matrix4();\r\n              this._ParseMatrixData(keyInfo.matrix, data2[2].split(\",\"));\r\n              this._currentAnimeFrames.keyFrames.push(keyInfo);\r\n            }\r\n          }\r\n        }\r\n      },\r\n      {\r\n        key: \"_makeOutputAnimation\",\r\n        value: function _makeOutputAnimation() {\r\n          var animationObj = new XAnimationObj(this.options);\r\n          animationObj.fps = this.animTicksPerSecond;\r\n          animationObj.name = this._currentAnime.name;\r\n          animationObj.make(this._currentAnime.AnimeFrames);\r\n          this.animations.push(animationObj);\r\n        }\r\n      },\r\n      {\r\n        key: \"assignAnimation\",\r\n        value: function assignAnimation(_model, _animation) {\r\n          var model = _model;\r\n          var animation = _animation;\r\n          if (!model) {\r\n            model = this.Meshes[0];\r\n          }\r\n          if (!animation) {\r\n            animation = this.animations[0];\r\n          }\r\n          if (!model || !animation) {\r\n            return null;\r\n          }\r\n          var put = {};\r\n          put.fps = animation.fps;\r\n          put.name = animation.name;\r\n          put.length = animation.length;\r\n          put.hierarchy = [];\r\n          for (let b = 0; b < model.skeleton.bones.length; b++) {\r\n            var findAnimation = false;\r\n            for (let i2 = 0; i2 < animation.hierarchy.length; i2++) {\r\n              if (model.skeleton.bones[b].name === animation.hierarchy[i2].name) {\r\n                findAnimation = true;\r\n                var c_key = animation.hierarchy[i2].copy();\r\n                c_key.parent = -1;\r\n                if (model.skeleton.bones[b].parent && model.skeleton.bones[b].parent.type === \"Bone\") {\r\n                  for (let bb = 0; bb < put.hierarchy.length; bb++) {\r\n                    if (put.hierarchy[bb].name === model.skeleton.bones[b].parent.name) {\r\n                      c_key.parent = bb;\r\n                      c_key.parentName = model.skeleton.bones[b].parent.name;\r\n                    }\r\n                  }\r\n                }\r\n                put.hierarchy.push(c_key);\r\n                break;\r\n              }\r\n            }\r\n            if (!findAnimation) {\r\n              var _c_key = animation.hierarchy[0].copy();\r\n              _c_key.name = model.skeleton.bones[b].name;\r\n              _c_key.parent = -1;\r\n              for (let k = 0; k < _c_key.keys.length; k++) {\r\n                if (_c_key.keys[k].pos) {\r\n                  _c_key.keys[k].pos.set(0, 0, 0);\r\n                }\r\n                if (_c_key.keys[k].scl) {\r\n                  _c_key.keys[k].scl.set(1, 1, 1);\r\n                }\r\n                if (_c_key.keys[k].rot) {\r\n                  _c_key.keys[k].rot.set(0, 0, 0, 1);\r\n                }\r\n              }\r\n              put.hierarchy.push(_c_key);\r\n            }\r\n          }\r\n          if (!model.geometry.animations) {\r\n            model.geometry.animations = [];\r\n          }\r\n          model.geometry.animations.push(AnimationClip.parseAnimation(put, model.skeleton.bones));\r\n          if (!model.animationMixer) {\r\n            model.animationMixer = new AnimationMixer(model);\r\n          }\r\n          return put;\r\n        }\r\n      },\r\n      {\r\n        key: \"_ParseMatrixData\",\r\n        value: function _ParseMatrixData(targetMatrix, data) {\r\n          targetMatrix.set(\r\n            parseFloat(data[0]),\r\n            parseFloat(data[4]),\r\n            parseFloat(data[8]),\r\n            parseFloat(data[12]),\r\n            parseFloat(data[1]),\r\n            parseFloat(data[5]),\r\n            parseFloat(data[9]),\r\n            parseFloat(data[13]),\r\n            parseFloat(data[2]),\r\n            parseFloat(data[6]),\r\n            parseFloat(data[10]),\r\n            parseFloat(data[14]),\r\n            parseFloat(data[3]),\r\n            parseFloat(data[7]),\r\n            parseFloat(data[11]),\r\n            parseFloat(data[15])\r\n          );\r\n        }\r\n      }\r\n    ]);\r\n    return XLoader3;\r\n  }();\r\n  return XLoader2;\r\n}();\r\nexport {\r\n  XLoader\r\n};\r\n", "import mod from \"../lib/src/api.js\";\r\n\r\nexport default mod;\r\nexport const Alternation = mod.Alternation;\r\nexport const Alternative = mod.Alternative;\r\nexport const CstParser = mod.CstParser;\r\nexport const EMPTY_ALT = mod.EMPTY_ALT;\r\nexport const EOF = mod.EOF;\r\nexport const EarlyExitException = mod.EarlyExitException;\r\nexport const EmbeddedActionsParser = mod.EmbeddedActionsParser;\r\nexport const GAstVisitor = mod.GAstVisitor;\r\nexport const LLkLookaheadStrategy = mod.LLkLookaheadStrategy;\r\nexport const Lexer = mod.Lexer;\r\nexport const LexerDefinitionErrorType = mod.LexerDefinitionErrorType;\r\nexport const MismatchedTokenException = mod.MismatchedTokenException;\r\nexport const NoViableAltException = mod.NoViableAltException;\r\nexport const NonTerminal = mod.NonTerminal;\r\nexport const NotAllInputParsedException = mod.NotAllInputParsedException;\r\nexport const Option = mod.Option;\r\nexport const Parser = mod.Parser;\r\nexport const ParserDefinitionErrorType = mod.ParserDefinitionErrorType;\r\nexport const Repetition = mod.Repetition;\r\nexport const RepetitionMandatory = mod.RepetitionMandatory;\r\nexport const RepetitionMandatoryWithSeparator = mod.RepetitionMandatoryWithSeparator;\r\nexport const RepetitionWithSeparator = mod.RepetitionWithSeparator;\r\nexport const Rule = mod.Rule;\r\nexport const Terminal = mod.Terminal;\r\nexport const VERSION = mod.VERSION;\r\nexport const clearCache = mod.clearCache;\r\nexport const createSyntaxDiagramsCode = mod.createSyntaxDiagramsCode;\r\nexport const createToken = mod.createToken;\r\nexport const createTokenInstance = mod.createTokenInstance;\r\nexport const defaultLexerErrorProvider = mod.defaultLexerErrorProvider;\r\nexport const defaultParserErrorProvider = mod.defaultParserErrorProvider;\r\nexport const generateCstDts = mod.generateCstDts;\r\nexport const getLookaheadPaths = mod.getLookaheadPaths;\r\nexport const isRecognitionException = mod.isRecognitionException;\r\nexport const serializeGrammar = mod.serializeGrammar;\r\nexport const serializeProduction = mod.serializeProduction;\r\nexport const tokenLabel = mod.tokenLabel;\r\nexport const tokenMatcher = mod.tokenMatcher;\r\nexport const tokenName = mod.tokenName;\r\n", "class WorkerPool {\r\n  constructor(pool = 4) {\r\n    this.pool = pool;\r\n    this.queue = [];\r\n    this.workers = [];\r\n    this.workersResolve = [];\r\n    this.workerStatus = 0;\r\n  }\r\n  _initWorker(workerId) {\r\n    if (!this.workers[workerId]) {\r\n      const worker = this.workerCreator();\r\n      worker.addEventListener(\"message\", this._onMessage.bind(this, workerId));\r\n      this.workers[workerId] = worker;\r\n    }\r\n  }\r\n  _getIdleWorker() {\r\n    for (let i = 0; i < this.pool; i++)\r\n      if (!(this.workerStatus & 1 << i))\r\n        return i;\r\n    return -1;\r\n  }\r\n  _onMessage(workerId, msg) {\r\n    const resolve = this.workersResolve[workerId];\r\n    resolve && resolve(msg);\r\n    if (this.queue.length) {\r\n      const { resolve: resolve2, msg: msg2, transfer } = this.queue.shift();\r\n      this.workersResolve[workerId] = resolve2;\r\n      this.workers[workerId].postMessage(msg2, transfer);\r\n    } else {\r\n      this.workerStatus ^= 1 << workerId;\r\n    }\r\n  }\r\n  setWorkerCreator(workerCreator) {\r\n    this.workerCreator = workerCreator;\r\n  }\r\n  setWorkerLimit(pool) {\r\n    this.pool = pool;\r\n  }\r\n  postMessage(msg, transfer) {\r\n    return new Promise((resolve) => {\r\n      const workerId = this._getIdleWorker();\r\n      if (workerId !== -1) {\r\n        this._initWorker(workerId);\r\n        this.workerStatus |= 1 << workerId;\r\n        this.workersResolve[workerId] = resolve;\r\n        this.workers[workerId].postMessage(msg, transfer);\r\n      } else {\r\n        this.queue.push({ resolve, msg, transfer });\r\n      }\r\n    });\r\n  }\r\n  dispose() {\r\n    this.workers.forEach((worker) => worker.terminate());\r\n    this.workersResolve.length = 0;\r\n    this.workers.length = 0;\r\n    this.queue.length = 0;\r\n    this.workerStatus = 0;\r\n  }\r\n}\r\nexport {\r\n  WorkerPool\r\n};\r\n", "///////////////////////////////////////////////////\n// KTX2 Header.\n///////////////////////////////////////////////////\n\nexport const KHR_SUPERCOMPRESSION_NONE = 0;\nexport const KHR_SUPERCOMPRESSION_BASISLZ = 1;\nexport const KHR_SUPERCOMPRESSION_ZSTD = 2;\nexport const KHR_SUPERCOMPRESSION_ZLIB = 3;\n\n///////////////////////////////////////////////////\n// Data Format Descriptor (DFD).\n///////////////////////////////////////////////////\n\nexport const KHR_DF_KHR_DESCRIPTORTYPE_BASICFORMAT = 0;\nexport const KHR_DF_VENDORID_KHRONOS = 0;\nexport const KHR_DF_VERSION = 2;\n\nexport const KHR_DF_MODEL_UNSPECIFIED = 0;\nexport const KHR_DF_MODEL_RGBSDA = 1;\n// ...\nexport const KHR_DF_MODEL_ETC1 = 160;\nexport const KHR_DF_MODEL_ETC2 = 161;\nexport const KHR_DF_MODEL_ASTC = 162;\nexport const KHR_DF_MODEL_ETC1S = 163;\nexport const KHR_DF_MODEL_UASTC = 166;\n\nexport const KHR_DF_FLAG_ALPHA_STRAIGHT = 0;\nexport const KHR_DF_FLAG_ALPHA_PREMULTIPLIED = 1;\n\nexport const KHR_DF_TRANSFER_UNSPECIFIED = 0;\nexport const KHR_DF_TRANSFER_LINEAR = 1;\nexport const KHR_DF_TRANSFER_SRGB = 2;\nexport const KHR_DF_TRANSFER_ITU = 3;\nexport const KHR_DF_TRANSFER_NTSC = 4;\nexport const KHR_DF_TRANSFER_SLOG = 5;\nexport const KHR_DF_TRANSFER_SLOG2 = 6;\nexport const KHR_DF_TRANSFER_BT1886 = 7;\nexport const KHR_DF_TRANSFER_HLG_OETF = 8;\nexport const KHR_DF_TRANSFER_HLG_EOTF = 9;\nexport const KHR_DF_TRANSFER_PQ_EOTF = 10;\nexport const KHR_DF_TRANSFER_PQ_OETF = 11;\nexport const KHR_DF_TRANSFER_DCIP3 = 12;\nexport const KHR_DF_TRANSFER_PAL_OETF = 13;\nexport const KHR_DF_TRANSFER_PAL625_EOTF = 14;\nexport const KHR_DF_TRANSFER_ST240 = 15;\nexport const KHR_DF_TRANSFER_ACESCC = 16;\nexport const KHR_DF_TRANSFER_ACESCCT = 17;\nexport const KHR_DF_TRANSFER_ADOBERGB = 18;\n\nexport const KHR_DF_PRIMARIES_UNSPECIFIED = 0;\nexport const KHR_DF_PRIMARIES_BT709 = 1;\nexport const KHR_DF_PRIMARIES_BT601_EBU = 2;\nexport const KHR_DF_PRIMARIES_BT601_SMPTE = 3;\nexport const KHR_DF_PRIMARIES_BT2020 = 4;\nexport const KHR_DF_PRIMARIES_CIEXYZ = 5;\nexport const KHR_DF_PRIMARIES_ACES = 6;\nexport const KHR_DF_PRIMARIES_ACESCC = 7;\nexport const KHR_DF_PRIMARIES_NTSC1953 = 8;\nexport const KHR_DF_PRIMARIES_PAL525 = 9;\nexport const KHR_DF_PRIMARIES_DISPLAYP3 = 10;\nexport const KHR_DF_PRIMARIES_ADOBERGB = 11;\n\nexport const KHR_DF_CHANNEL_RGBSDA_RED = 0;\nexport const KHR_DF_CHANNEL_RGBSDA_GREEN = 1;\nexport const KHR_DF_CHANNEL_RGBSDA_BLUE = 2;\nexport const KHR_DF_CHANNEL_RGBSDA_STENCIL = 13;\nexport const KHR_DF_CHANNEL_RGBSDA_DEPTH = 14;\nexport const KHR_DF_CHANNEL_RGBSDA_ALPHA = 15;\n\nexport const KHR_DF_SAMPLE_DATATYPE_FLOAT = 0x80;\nexport const KHR_DF_SAMPLE_DATATYPE_SIGNED = 0x40;\nexport const KHR_DF_SAMPLE_DATATYPE_EXPONENT = 0x20;\nexport const KHR_DF_SAMPLE_DATATYPE_LINEAR = 0x10;\n\n///////////////////////////////////////////////////\n// VK FORMAT.\n///////////////////////////////////////////////////\n\nexport const VK_FORMAT_UNDEFINED = 0;\nexport const VK_FORMAT_R4G4_UNORM_PACK8 = 1;\nexport const VK_FORMAT_R4G4B4A4_UNORM_PACK16 = 2;\nexport const VK_FORMAT_B4G4R4A4_UNORM_PACK16 = 3;\nexport const VK_FORMAT_R5G6B5_UNORM_PACK16 = 4;\nexport const VK_FORMAT_B5G6R5_UNORM_PACK16 = 5;\nexport const VK_FORMAT_R5G5B5A1_UNORM_PACK16 = 6;\nexport const VK_FORMAT_B5G5R5A1_UNORM_PACK16 = 7;\nexport const VK_FORMAT_A1R5G5B5_UNORM_PACK16 = 8;\nexport const VK_FORMAT_R8_UNORM = 9;\nexport const VK_FORMAT_R8_SNORM = 10;\nexport const VK_FORMAT_R8_UINT = 13;\nexport const VK_FORMAT_R8_SINT = 14;\nexport const VK_FORMAT_R8_SRGB = 15;\nexport const VK_FORMAT_R8G8_UNORM = 16;\nexport const VK_FORMAT_R8G8_SNORM = 17;\nexport const VK_FORMAT_R8G8_UINT = 20;\nexport const VK_FORMAT_R8G8_SINT = 21;\nexport const VK_FORMAT_R8G8_SRGB = 22;\nexport const VK_FORMAT_R8G8B8_UNORM = 23;\nexport const VK_FORMAT_R8G8B8_SNORM = 24;\nexport const VK_FORMAT_R8G8B8_UINT = 27;\nexport const VK_FORMAT_R8G8B8_SINT = 28;\nexport const VK_FORMAT_R8G8B8_SRGB = 29;\nexport const VK_FORMAT_B8G8R8_UNORM = 30;\nexport const VK_FORMAT_B8G8R8_SNORM = 31;\nexport const VK_FORMAT_B8G8R8_UINT = 34;\nexport const VK_FORMAT_B8G8R8_SINT = 35;\nexport const VK_FORMAT_B8G8R8_SRGB = 36;\nexport const VK_FORMAT_R8G8B8A8_UNORM = 37;\nexport const VK_FORMAT_R8G8B8A8_SNORM = 38;\nexport const VK_FORMAT_R8G8B8A8_UINT = 41;\nexport const VK_FORMAT_R8G8B8A8_SINT = 42;\nexport const VK_FORMAT_R8G8B8A8_SRGB = 43;\nexport const VK_FORMAT_B8G8R8A8_UNORM = 44;\nexport const VK_FORMAT_B8G8R8A8_SNORM = 45;\nexport const VK_FORMAT_B8G8R8A8_UINT = 48;\nexport const VK_FORMAT_B8G8R8A8_SINT = 49;\nexport const VK_FORMAT_B8G8R8A8_SRGB = 50;\nexport const VK_FORMAT_A2R10G10B10_UNORM_PACK32 = 58;\nexport const VK_FORMAT_A2R10G10B10_SNORM_PACK32 = 59;\nexport const VK_FORMAT_A2R10G10B10_UINT_PACK32 = 62;\nexport const VK_FORMAT_A2R10G10B10_SINT_PACK32 = 63;\nexport const VK_FORMAT_A2B10G10R10_UNORM_PACK32 = 64;\nexport const VK_FORMAT_A2B10G10R10_SNORM_PACK32 = 65;\nexport const VK_FORMAT_A2B10G10R10_UINT_PACK32 = 68;\nexport const VK_FORMAT_A2B10G10R10_SINT_PACK32 = 69;\nexport const VK_FORMAT_R16_UNORM = 70;\nexport const VK_FORMAT_R16_SNORM = 71;\nexport const VK_FORMAT_R16_UINT = 74;\nexport const VK_FORMAT_R16_SINT = 75;\nexport const VK_FORMAT_R16_SFLOAT = 76;\nexport const VK_FORMAT_R16G16_UNORM = 77;\nexport const VK_FORMAT_R16G16_SNORM = 78;\nexport const VK_FORMAT_R16G16_UINT = 81;\nexport const VK_FORMAT_R16G16_SINT = 82;\nexport const VK_FORMAT_R16G16_SFLOAT = 83;\nexport const VK_FORMAT_R16G16B16_UNORM = 84;\nexport const VK_FORMAT_R16G16B16_SNORM = 85;\nexport const VK_FORMAT_R16G16B16_UINT = 88;\nexport const VK_FORMAT_R16G16B16_SINT = 89;\nexport const VK_FORMAT_R16G16B16_SFLOAT = 90;\nexport const VK_FORMAT_R16G16B16A16_UNORM = 91;\nexport const VK_FORMAT_R16G16B16A16_SNORM = 92;\nexport const VK_FORMAT_R16G16B16A16_UINT = 95;\nexport const VK_FORMAT_R16G16B16A16_SINT = 96;\nexport const VK_FORMAT_R16G16B16A16_SFLOAT = 97;\nexport const VK_FORMAT_R32_UINT = 98;\nexport const VK_FORMAT_R32_SINT = 99;\nexport const VK_FORMAT_R32_SFLOAT = 100;\nexport const VK_FORMAT_R32G32_UINT = 101;\nexport const VK_FORMAT_R32G32_SINT = 102;\nexport const VK_FORMAT_R32G32_SFLOAT = 103;\nexport const VK_FORMAT_R32G32B32_UINT = 104;\nexport const VK_FORMAT_R32G32B32_SINT = 105;\nexport const VK_FORMAT_R32G32B32_SFLOAT = 106;\nexport const VK_FORMAT_R32G32B32A32_UINT = 107;\nexport const VK_FORMAT_R32G32B32A32_SINT = 108;\nexport const VK_FORMAT_R32G32B32A32_SFLOAT = 109;\nexport const VK_FORMAT_R64_UINT = 110;\nexport const VK_FORMAT_R64_SINT = 111;\nexport const VK_FORMAT_R64_SFLOAT = 112;\nexport const VK_FORMAT_R64G64_UINT = 113;\nexport const VK_FORMAT_R64G64_SINT = 114;\nexport const VK_FORMAT_R64G64_SFLOAT = 115;\nexport const VK_FORMAT_R64G64B64_UINT = 116;\nexport const VK_FORMAT_R64G64B64_SINT = 117;\nexport const VK_FORMAT_R64G64B64_SFLOAT = 118;\nexport const VK_FORMAT_R64G64B64A64_UINT = 119;\nexport const VK_FORMAT_R64G64B64A64_SINT = 120;\nexport const VK_FORMAT_R64G64B64A64_SFLOAT = 121;\nexport const VK_FORMAT_B10G11R11_UFLOAT_PACK32 = 122;\nexport const VK_FORMAT_E5B9G9R9_UFLOAT_PACK32 = 123;\nexport const VK_FORMAT_D16_UNORM = 124;\nexport const VK_FORMAT_X8_D24_UNORM_PACK32 = 125;\nexport const VK_FORMAT_D32_SFLOAT = 126;\nexport const VK_FORMAT_S8_UINT = 127;\nexport const VK_FORMAT_D16_UNORM_S8_UINT = 128;\nexport const VK_FORMAT_D24_UNORM_S8_UINT = 129;\nexport const VK_FORMAT_D32_SFLOAT_S8_UINT = 130;\nexport const VK_FORMAT_BC1_RGB_UNORM_BLOCK = 131;\nexport const VK_FORMAT_BC1_RGB_SRGB_BLOCK = 132;\nexport const VK_FORMAT_BC1_RGBA_UNORM_BLOCK = 133;\nexport const VK_FORMAT_BC1_RGBA_SRGB_BLOCK = 134;\nexport const VK_FORMAT_BC2_UNORM_BLOCK = 135;\nexport const VK_FORMAT_BC2_SRGB_BLOCK = 136;\nexport const VK_FORMAT_BC3_UNORM_BLOCK = 137;\nexport const VK_FORMAT_BC3_SRGB_BLOCK = 138;\nexport const VK_FORMAT_BC4_UNORM_BLOCK = 139;\nexport const VK_FORMAT_BC4_SNORM_BLOCK = 140;\nexport const VK_FORMAT_BC5_UNORM_BLOCK = 141;\nexport const VK_FORMAT_BC5_SNORM_BLOCK = 142;\nexport const VK_FORMAT_BC6H_UFLOAT_BLOCK = 143;\nexport const VK_FORMAT_BC6H_SFLOAT_BLOCK = 144;\nexport const VK_FORMAT_BC7_UNORM_BLOCK = 145;\nexport const VK_FORMAT_BC7_SRGB_BLOCK = 146;\nexport const VK_FORMAT_ETC2_R8G8B8_UNORM_BLOCK = 147;\nexport const VK_FORMAT_ETC2_R8G8B8_SRGB_BLOCK = 148;\nexport const VK_FORMAT_ETC2_R8G8B8A1_UNORM_BLOCK = 149;\nexport const VK_FORMAT_ETC2_R8G8B8A1_SRGB_BLOCK = 150;\nexport const VK_FORMAT_ETC2_R8G8B8A8_UNORM_BLOCK = 151;\nexport const VK_FORMAT_ETC2_R8G8B8A8_SRGB_BLOCK = 152;\nexport const VK_FORMAT_EAC_R11_UNORM_BLOCK = 153;\nexport const VK_FORMAT_EAC_R11_SNORM_BLOCK = 154;\nexport const VK_FORMAT_EAC_R11G11_UNORM_BLOCK = 155;\nexport const VK_FORMAT_EAC_R11G11_SNORM_BLOCK = 156;\nexport const VK_FORMAT_ASTC_4x4_UNORM_BLOCK = 157;\nexport const VK_FORMAT_ASTC_4x4_SRGB_BLOCK = 158;\nexport const VK_FORMAT_ASTC_5x4_UNORM_BLOCK = 159;\nexport const VK_FORMAT_ASTC_5x4_SRGB_BLOCK = 160;\nexport const VK_FORMAT_ASTC_5x5_UNORM_BLOCK = 161;\nexport const VK_FORMAT_ASTC_5x5_SRGB_BLOCK = 162;\nexport const VK_FORMAT_ASTC_6x5_UNORM_BLOCK = 163;\nexport const VK_FORMAT_ASTC_6x5_SRGB_BLOCK = 164;\nexport const VK_FORMAT_ASTC_6x6_UNORM_BLOCK = 165;\nexport const VK_FORMAT_ASTC_6x6_SRGB_BLOCK = 166;\nexport const VK_FORMAT_ASTC_8x5_UNORM_BLOCK = 167;\nexport const VK_FORMAT_ASTC_8x5_SRGB_BLOCK = 168;\nexport const VK_FORMAT_ASTC_8x6_UNORM_BLOCK = 169;\nexport const VK_FORMAT_ASTC_8x6_SRGB_BLOCK = 170;\nexport const VK_FORMAT_ASTC_8x8_UNORM_BLOCK = 171;\nexport const VK_FORMAT_ASTC_8x8_SRGB_BLOCK = 172;\nexport const VK_FORMAT_ASTC_10x5_UNORM_BLOCK = 173;\nexport const VK_FORMAT_ASTC_10x5_SRGB_BLOCK = 174;\nexport const VK_FORMAT_ASTC_10x6_UNORM_BLOCK = 175;\nexport const VK_FORMAT_ASTC_10x6_SRGB_BLOCK = 176;\nexport const VK_FORMAT_ASTC_10x8_UNORM_BLOCK = 177;\nexport const VK_FORMAT_ASTC_10x8_SRGB_BLOCK = 178;\nexport const VK_FORMAT_ASTC_10x10_UNORM_BLOCK = 179;\nexport const VK_FORMAT_ASTC_10x10_SRGB_BLOCK = 180;\nexport const VK_FORMAT_ASTC_12x10_UNORM_BLOCK = 181;\nexport const VK_FORMAT_ASTC_12x10_SRGB_BLOCK = 182;\nexport const VK_FORMAT_ASTC_12x12_UNORM_BLOCK = 183;\nexport const VK_FORMAT_ASTC_12x12_SRGB_BLOCK = 184;\nexport const VK_FORMAT_R10X6_UNORM_PACK16 = 1000156007;\nexport const VK_FORMAT_R10X6G10X6_UNORM_2PACK16 = 1000156008;\nexport const VK_FORMAT_R10X6G10X6B10X6A10X6_UNORM_4PACK16 = 1000156009;\nexport const VK_FORMAT_G10X6B10X6G10X6R10X6_422_UNORM_4PACK16 = 1000156010;\nexport const VK_FORMAT_B10X6G10X6R10X6G10X6_422_UNORM_4PACK16 = 1000156011;\nexport const VK_FORMAT_R12X4_UNORM_PACK16 = 1000156017;\nexport const VK_FORMAT_R12X4G12X4_UNORM_2PACK16 = 1000156018;\nexport const VK_FORMAT_R12X4G12X4B12X4A12X4_UNORM_4PACK16 = 1000156019;\nexport const VK_FORMAT_G12X4B12X4G12X4R12X4_422_UNORM_4PACK16 = 1000156020;\nexport const VK_FORMAT_B12X4G12X4R12X4G12X4_422_UNORM_4PACK16 = 1000156021;\nexport const VK_FORMAT_PVRTC1_2BPP_UNORM_BLOCK_IMG = 1000054000;\nexport const VK_FORMAT_PVRTC1_4BPP_UNORM_BLOCK_IMG = 1000054001;\nexport const VK_FORMAT_PVRTC2_2BPP_UNORM_BLOCK_IMG = 1000054002;\nexport const VK_FORMAT_PVRTC2_4BPP_UNORM_BLOCK_IMG = 1000054003;\nexport const VK_FORMAT_PVRTC1_2BPP_SRGB_BLOCK_IMG = 1000054004;\nexport const VK_FORMAT_PVRTC1_4BPP_SRGB_BLOCK_IMG = 1000054005;\nexport const VK_FORMAT_PVRTC2_2BPP_SRGB_BLOCK_IMG = 1000054006;\nexport const VK_FORMAT_PVRTC2_4BPP_SRGB_BLOCK_IMG = 1000054007;\nexport const VK_FORMAT_ASTC_4x4_SFLOAT_BLOCK_EXT = 1000066000;\nexport const VK_FORMAT_ASTC_5x4_SFLOAT_BLOCK_EXT = 1000066001;\nexport const VK_FORMAT_ASTC_5x5_SFLOAT_BLOCK_EXT = 1000066002;\nexport const VK_FORMAT_ASTC_6x5_SFLOAT_BLOCK_EXT = 1000066003;\nexport const VK_FORMAT_ASTC_6x6_SFLOAT_BLOCK_EXT = 1000066004;\nexport const VK_FORMAT_ASTC_8x5_SFLOAT_BLOCK_EXT = 1000066005;\nexport const VK_FORMAT_ASTC_8x6_SFLOAT_BLOCK_EXT = 1000066006;\nexport const VK_FORMAT_ASTC_8x8_SFLOAT_BLOCK_EXT = 1000066007;\nexport const VK_FORMAT_ASTC_10x5_SFLOAT_BLOCK_EXT = 1000066008;\nexport const VK_FORMAT_ASTC_10x6_SFLOAT_BLOCK_EXT = 1000066009;\nexport const VK_FORMAT_ASTC_10x8_SFLOAT_BLOCK_EXT = 1000066010;\nexport const VK_FORMAT_ASTC_10x10_SFLOAT_BLOCK_EXT = 1000066011;\nexport const VK_FORMAT_ASTC_12x10_SFLOAT_BLOCK_EXT = 1000066012;\nexport const VK_FORMAT_ASTC_12x12_SFLOAT_BLOCK_EXT = 1000066013;\nexport const VK_FORMAT_A4R4G4B4_UNORM_PACK16_EXT = 1000340000;\nexport const VK_FORMAT_A4B4G4R4_UNORM_PACK16_EXT = 1000340001;\n", "import {\n\tKHR_DF_FLAG_ALPHA_STRAIGHT,\n\tKHR_DF_KHR_DESCRIPTORTYPE_BASICFORMAT,\n\tKHR_DF_MODEL_UNSPECIFIED,\n\tKHR_DF_PRIMARIES_BT709,\n\tKHR_DF_TRANSFER_SRGB,\n\tKHR_DF_VENDORID_KHRONOS,\n\tKHR_DF_VERSION,\n\tKHR_SUPERCOMPRESSION_NONE,\n\tVK_FORMAT_UNDEFINED,\n} from './constants';\n\n/**\n * Represents an unpacked KTX 2.0 texture container. Data for individual mip levels are stored in\n * the `.levels` array, typically compressed in Basis Universal formats. Additional properties\n * provide metadata required to process, transcode, and upload these textures.\n */\nexport class KTX2Container {\n\t/**\n\t * Specifies the image format using Vulkan VkFormat enum values. When using Basis Universal\n\t * texture formats, `vkFormat` must be VK_FORMAT_UNDEFINED.\n\t */\n\tpublic vkFormat = VK_FORMAT_UNDEFINED;\n\n\t/**\n\t * Size of the data type in bytes used to upload the data to a graphics API. When `vkFormat` is\n\t * VK_FORMAT_UNDEFINED, `typeSize` must be 1.\n\t */\n\tpublic typeSize = 1;\n\n\t/** Width of the texture image for level 0, in pixels. */\n\tpublic pixelWidth = 0;\n\n\t/** Height of the texture image for level 0, in pixels. */\n\tpublic pixelHeight = 0;\n\n\t/** Depth of the texture image for level 0, in pixels (3D textures only). */\n\tpublic pixelDepth = 0;\n\n\t/** Number of array elements (array textures only). */\n\tpublic layerCount = 0;\n\n\t/**\n\t * Number of cubemap faces. For cubemaps and cubemap arrays, `faceCount` must be 6. For all\n\t * other textures, `faceCount` must be 1. Cubemap faces are stored in +X, -X, +Y, -Y, +Z, -Z\n\t * order.\n\t */\n\tpublic faceCount = 1;\n\n\t/** Indicates which supercompression scheme has been applied to mip level images, if any. */\n\tpublic supercompressionScheme = KHR_SUPERCOMPRESSION_NONE;\n\n\t/** Mip levels, ordered largest (original) to smallest (~1px). */\n\tpublic levels: KTX2Level[] = [];\n\n\t/** Data Format Descriptor. */\n\tpublic dataFormatDescriptor: KTX2DataFormatDescriptorBasicFormat[] = [\n\t\t{\n\t\t\tvendorId: KHR_DF_VENDORID_KHRONOS,\n\t\t\tdescriptorType: KHR_DF_KHR_DESCRIPTORTYPE_BASICFORMAT,\n\t\t\tdescriptorBlockSize: 0,\n\t\t\tversionNumber: KHR_DF_VERSION,\n\t\t\tcolorModel: KHR_DF_MODEL_UNSPECIFIED,\n\t\t\tcolorPrimaries: KHR_DF_PRIMARIES_BT709,\n\t\t\ttransferFunction: KHR_DF_TRANSFER_SRGB,\n\t\t\tflags: KHR_DF_FLAG_ALPHA_STRAIGHT,\n\t\t\ttexelBlockDimension: [0, 0, 0, 0],\n\t\t\tbytesPlane: [0, 0, 0, 0, 0, 0, 0, 0],\n\t\t\tsamples: [],\n\t\t},\n\t];\n\n\t/** Key/Value Data. */\n\tpublic keyValue: { [key: string]: string | Uint8Array } = {};\n\n\t/** Supercompression Global Data. */\n\tpublic globalData: KTX2GlobalDataBasisLZ | null = null;\n}\n\n///////////////////////////////////////////////////\n// Mip Levels.\n///////////////////////////////////////////////////\n\nexport interface KTX2Level {\n\t/** Compressed data of the mip level. */\n\tlevelData: Uint8Array;\n\n\t/**\n\t * Size of the mip level after reflation from supercompression, if applicable. When\n\t * `supercompressionType` is BASISLZ, `uncompressedByteLength` must be 0. When\n\t * `supercompressionType` is `NONE`, `uncompressedByteLength` must match the `levelData` byte\n\t * length.\n\t *\n\t * _**NOTICE:** this implies that for formats such as UASTC, `uncompressedByteLength` may\n\t * indicate size after ZSTD reflation (and of transcoded ASTC data), but does _not_ indicate\n\t * size of decoded RGBA32 pixels._\n\t */\n\tuncompressedByteLength: number;\n}\n\n///////////////////////////////////////////////////\n// Data Format Descriptor (DFD).\n///////////////////////////////////////////////////\n\nexport interface KTX2DataFormatDescriptorBasicFormat {\n\tvendorId: number;\n\tdescriptorType: number;\n\tversionNumber: number;\n\t/** @deprecated Inferred. */\n\tdescriptorBlockSize: number;\n\tcolorModel: number;\n\tcolorPrimaries: number;\n\ttransferFunction: number;\n\tflags: number;\n\ttexelBlockDimension: [number, number, number, number];\n\tbytesPlane: [number, number, number, number, number, number, number, number];\n\tsamples: KTX2BasicFormatSample[];\n}\n\nexport interface KTX2BasicFormatSample {\n\tbitOffset: number;\n\tbitLength: number;\n\t/** @deprecated Renamed to 'channelType'. */\n\tchannelID?: number;\n\tchannelType: number;\n\tsamplePosition: number[];\n\tsampleLower: number;\n\tsampleUpper: number;\n}\n\n///////////////////////////////////////////////////\n// Supercompression Global Data.\n///////////////////////////////////////////////////\n\nexport interface KTX2GlobalDataBasisLZ {\n\tendpointCount: number;\n\tselectorCount: number;\n\timageDescs: KTX2GlobalDataBasisLZImageDesc[];\n\tendpointsData: Uint8Array;\n\tselectorsData: Uint8Array;\n\ttablesData: Uint8Array;\n\textendedData: Uint8Array;\n}\n\ninterface KTX2GlobalDataBasisLZImageDesc {\n\timageFlags: number;\n\trgbSliceByteOffset: number;\n\trgbSliceByteLength: number;\n\talphaSliceByteOffset: number;\n\talphaSliceByteLength: number;\n}\n", "export class BufferReader {\n\tprivate _dataView: DataView;\n\tprivate _littleEndian: boolean;\n\tpublic _offset: number;\n\n\tconstructor(data: Uint8Array, byteOffset: number, byteLength: number, littleEndian: boolean) {\n\t\tthis._dataView = new DataView(data.buffer, data.byteOffset + byteOffset, byteLength);\n\t\tthis._littleEndian = littleEndian;\n\t\tthis._offset = 0;\n\t}\n\n\t_nextUint8() {\n\t\tconst value = this._dataView.getUint8(this._offset);\n\t\tthis._offset += 1;\n\t\treturn value;\n\t}\n\n\t_nextUint16() {\n\t\tconst value = this._dataView.getUint16(this._offset, this._littleEndian);\n\t\tthis._offset += 2;\n\t\treturn value;\n\t}\n\n\t_nextUint32() {\n\t\tconst value = this._dataView.getUint32(this._offset, this._littleEndian);\n\t\tthis._offset += 4;\n\t\treturn value;\n\t}\n\n\t_nextUint64() {\n\t\tconst left = this._dataView.getUint32(this._offset, this._littleEndian);\n\t\tconst right = this._dataView.getUint32(this._offset + 4, this._littleEndian);\n\t\t// TODO(cleanup): Just test this...\n\t\t// const value = this._littleEndian ? left + (2 ** 32 * right) : (2 ** 32 * left) + right;\n\t\tconst value = left + 2 ** 32 * right;\n\t\tthis._offset += 8;\n\t\treturn value;\n\t}\n\n\t_nextInt32() {\n\t\tconst value = this._dataView.getInt32(this._offset, this._littleEndian);\n\t\tthis._offset += 4;\n\t\treturn value;\n\t}\n\n\t_skip(bytes: number) {\n\t\tthis._offset += bytes;\n\t\treturn this;\n\t}\n\n\t_scan(maxByteLength: number, term = 0x00): Uint8Array {\n\t\tconst byteOffset = this._offset;\n\t\tlet byteLength = 0;\n\t\twhile (this._dataView.getUint8(this._offset) !== term && byteLength < maxByteLength) {\n\t\t\tbyteLength++;\n\t\t\tthis._offset++;\n\t\t}\n\n\t\tif (byteLength < maxByteLength) this._offset++;\n\n\t\treturn new Uint8Array(this._dataView.buffer, this._dataView.byteOffset + byteOffset, byteLength);\n\t}\n}\n", "///////////////////////////////////////////////////\n// Common.\n///////////////////////////////////////////////////\n\n// Injected at compile time, from $npm_package_version.\ndeclare const PACKAGE_VERSION: string;\n\nexport const KTX_WRITER = `KTX-Parse v${PACKAGE_VERSION}`;\n\nexport const NUL = new Uint8Array([0x00]);\n\n///////////////////////////////////////////////////\n// KTX2 Header.\n///////////////////////////////////////////////////\n\nexport const KTX2_ID = [\n\t// '´', 'K', 'T', 'X', '2', '0', 'ª', '\\r', '\\n', '\\x1A', '\\n'\n\t0xab, 0x4b, 0x54, 0x58, 0x20, 0x32, 0x30, 0xbb, 0x0d, 0x0a, 0x1a, 0x0a,\n];\n\nexport const HEADER_BYTE_LENGTH = 68; // 13 * 4 + 2 * 8\n", "/** Encodes text to an ArrayBuffer. */\nexport function encodeText(text: string): Uint8Array {\n\tif (typeof TextEncoder !== 'undefined') {\n\t\treturn new TextEncoder().encode(text);\n\t}\n\treturn Buffer.from(text);\n}\n\n/** Decodes an ArrayBuffer to text. */\nexport function decodeText(buffer: Uint8Array): string {\n\tif (typeof TextDecoder !== 'undefined') {\n\t\treturn new TextDecoder().decode(buffer);\n\t}\n\treturn Buffer.from(buffer).toString('utf8');\n}\n\n/** Concatenates N ArrayBuffers. */\nexport function concat(buffers: (ArrayBuffer | Uint8Array)[]): Uint8Array {\n\tlet totalByteLength = 0;\n\tfor (const buffer of buffers) {\n\t\ttotalByteLength += buffer.byteLength;\n\t}\n\n\tconst result = new Uint8Array(totalByteLength);\n\tlet byteOffset = 0;\n\n\tfor (const buffer of buffers) {\n\t\tresult.set(new Uint8Array(buffer), byteOffset);\n\t\tbyteOffset += buffer.byteLength;\n\t}\n\n\treturn result;\n}\n", "import { BufferReader } from './buffer-reader';\nimport { KHR_DF_SAMPLE_DATATYPE_SIGNED } from './constants';\nimport { KTX2_ID } from './constants-internal';\nimport { KTX2Container, KTX2DataFormatDescriptorBasicFormat } from './container';\nimport { decodeText } from './util';\n\n/**\n * Parses a KTX 2.0 file, returning an unpacked {@link KTX2Container} instance with all associated\n * data. The container's mip levels and other binary data are pointers into the original file, not\n * copies, so the original file should not be overwritten after reading.\n *\n * @param data Bytes of KTX 2.0 file, as Uint8Array or Buffer.\n */\nexport function read(data: Uint8Array): KTX2Container {\n\t///////////////////////////////////////////////////\n\t// KTX 2.0 Identifier.\n\t///////////////////////////////////////////////////\n\n\tconst id = new Uint8Array(data.buffer, data.byteOffset, KTX2_ID.length);\n\tif (\n\t\tid[0] !== KTX2_ID[0] || // '´'\n\t\tid[1] !== KTX2_ID[1] || // 'K'\n\t\tid[2] !== KTX2_ID[2] || // 'T'\n\t\tid[3] !== KTX2_ID[3] || // 'X'\n\t\tid[4] !== KTX2_ID[4] || // ' '\n\t\tid[5] !== KTX2_ID[5] || // '2'\n\t\tid[6] !== KTX2_ID[6] || // '0'\n\t\tid[7] !== KTX2_ID[7] || // 'ª'\n\t\tid[8] !== KTX2_ID[8] || // '\\r'\n\t\tid[9] !== KTX2_ID[9] || // '\\n'\n\t\tid[10] !== KTX2_ID[10] || // '\\x1A'\n\t\tid[11] !== KTX2_ID[11] // '\\n'\n\t) {\n\t\tthrow new Error('Missing KTX 2.0 identifier.');\n\t}\n\n\tconst container = new KTX2Container();\n\n\t///////////////////////////////////////////////////\n\t// Header.\n\t///////////////////////////////////////////////////\n\n\tconst headerByteLength = 17 * Uint32Array.BYTES_PER_ELEMENT;\n\tconst headerReader = new BufferReader(data, KTX2_ID.length, headerByteLength, true);\n\n\tcontainer.vkFormat = headerReader._nextUint32();\n\tcontainer.typeSize = headerReader._nextUint32();\n\tcontainer.pixelWidth = headerReader._nextUint32();\n\tcontainer.pixelHeight = headerReader._nextUint32();\n\tcontainer.pixelDepth = headerReader._nextUint32();\n\tcontainer.layerCount = headerReader._nextUint32();\n\tcontainer.faceCount = headerReader._nextUint32();\n\n\tconst levelCount = headerReader._nextUint32();\n\n\tcontainer.supercompressionScheme = headerReader._nextUint32();\n\n\tconst dfdByteOffset = headerReader._nextUint32();\n\tconst dfdByteLength = headerReader._nextUint32();\n\tconst kvdByteOffset = headerReader._nextUint32();\n\tconst kvdByteLength = headerReader._nextUint32();\n\tconst sgdByteOffset = headerReader._nextUint64();\n\tconst sgdByteLength = headerReader._nextUint64();\n\n\t///////////////////////////////////////////////////\n\t// Level Index.\n\t///////////////////////////////////////////////////\n\n\tconst levelByteLength = levelCount * 3 * 8;\n\tconst levelReader = new BufferReader(data, KTX2_ID.length + headerByteLength, levelByteLength, true);\n\n\tfor (let i = 0; i < levelCount; i++) {\n\t\tcontainer.levels.push({\n\t\t\tlevelData: new Uint8Array(\n\t\t\t\tdata.buffer,\n\t\t\t\tdata.byteOffset + levelReader._nextUint64(),\n\t\t\t\tlevelReader._nextUint64()\n\t\t\t),\n\t\t\tuncompressedByteLength: levelReader._nextUint64(),\n\t\t});\n\t}\n\n\t///////////////////////////////////////////////////\n\t// Data Format Descriptor (DFD).\n\t///////////////////////////////////////////////////\n\n\tconst dfdReader = new BufferReader(data, dfdByteOffset, dfdByteLength, true);\n\n\tconst dfd: KTX2DataFormatDescriptorBasicFormat = {\n\t\tvendorId: dfdReader._skip(4 /* totalSize */)._nextUint16(),\n\t\tdescriptorType: dfdReader._nextUint16(),\n\t\tversionNumber: dfdReader._nextUint16(),\n\t\tdescriptorBlockSize: dfdReader._nextUint16(),\n\t\tcolorModel: dfdReader._nextUint8(),\n\t\tcolorPrimaries: dfdReader._nextUint8(),\n\t\ttransferFunction: dfdReader._nextUint8(),\n\t\tflags: dfdReader._nextUint8(),\n\t\ttexelBlockDimension: [\n\t\t\tdfdReader._nextUint8(),\n\t\t\tdfdReader._nextUint8(),\n\t\t\tdfdReader._nextUint8(),\n\t\t\tdfdReader._nextUint8(),\n\t\t],\n\t\tbytesPlane: [\n\t\t\tdfdReader._nextUint8(),\n\t\t\tdfdReader._nextUint8(),\n\t\t\tdfdReader._nextUint8(),\n\t\t\tdfdReader._nextUint8(),\n\t\t\tdfdReader._nextUint8(),\n\t\t\tdfdReader._nextUint8(),\n\t\t\tdfdReader._nextUint8(),\n\t\t\tdfdReader._nextUint8(),\n\t\t],\n\t\tsamples: [],\n\t};\n\n\tconst sampleStart = 6;\n\tconst sampleWords = 4;\n\tconst numSamples = (dfd.descriptorBlockSize / 4 - sampleStart) / sampleWords;\n\n\tfor (let i = 0; i < numSamples; i++) {\n\t\tconst sample = {\n\t\t\tbitOffset: dfdReader._nextUint16(),\n\t\t\tbitLength: dfdReader._nextUint8(),\n\t\t\tchannelType: dfdReader._nextUint8(),\n\t\t\tsamplePosition: [\n\t\t\t\tdfdReader._nextUint8(),\n\t\t\t\tdfdReader._nextUint8(),\n\t\t\t\tdfdReader._nextUint8(),\n\t\t\t\tdfdReader._nextUint8(),\n\t\t\t],\n\t\t\tsampleLower: -Infinity,\n\t\t\tsampleUpper: Infinity,\n\t\t};\n\n\t\tif (sample.channelType & KHR_DF_SAMPLE_DATATYPE_SIGNED) {\n\t\t\tsample.sampleLower = dfdReader._nextInt32();\n\t\t\tsample.sampleUpper = dfdReader._nextInt32();\n\t\t} else {\n\t\t\tsample.sampleLower = dfdReader._nextUint32();\n\t\t\tsample.sampleUpper = dfdReader._nextUint32();\n\t\t}\n\n\t\tdfd.samples[i] = sample;\n\t}\n\n\tcontainer.dataFormatDescriptor.length = 0;\n\tcontainer.dataFormatDescriptor.push(dfd);\n\n\t///////////////////////////////////////////////////\n\t// Key/Value Data (KVD).\n\t///////////////////////////////////////////////////\n\n\tconst kvdReader = new BufferReader(data, kvdByteOffset, kvdByteLength, true);\n\n\twhile (kvdReader._offset < kvdByteLength) {\n\t\tconst keyValueByteLength = kvdReader._nextUint32();\n\t\tconst keyData = kvdReader._scan(keyValueByteLength);\n\t\tconst key = decodeText(keyData);\n\n\t\tconst valueData = kvdReader._scan(keyValueByteLength - keyData.byteLength);\n\t\tcontainer.keyValue[key] = key.match(/^ktx/i) ? decodeText(valueData) : valueData;\n\n\t\t// 4-byte alignment.\n\t\tif (kvdReader._offset % 4) kvdReader._skip(4 - (kvdReader._offset % 4));\n\t}\n\n\t///////////////////////////////////////////////////\n\t// Supercompression Global Data (SGD).\n\t///////////////////////////////////////////////////\n\n\tif (sgdByteLength <= 0) return container;\n\n\tconst sgdReader = new BufferReader(data, sgdByteOffset, sgdByteLength, true);\n\n\tconst endpointCount = sgdReader._nextUint16();\n\tconst selectorCount = sgdReader._nextUint16();\n\tconst endpointsByteLength = sgdReader._nextUint32();\n\tconst selectorsByteLength = sgdReader._nextUint32();\n\tconst tablesByteLength = sgdReader._nextUint32();\n\tconst extendedByteLength = sgdReader._nextUint32();\n\n\tconst imageDescs = [];\n\tfor (let i = 0; i < levelCount; i++) {\n\t\timageDescs.push({\n\t\t\timageFlags: sgdReader._nextUint32(),\n\t\t\trgbSliceByteOffset: sgdReader._nextUint32(),\n\t\t\trgbSliceByteLength: sgdReader._nextUint32(),\n\t\t\talphaSliceByteOffset: sgdReader._nextUint32(),\n\t\t\talphaSliceByteLength: sgdReader._nextUint32(),\n\t\t});\n\t}\n\n\tconst endpointsByteOffset = sgdByteOffset + sgdReader._offset;\n\tconst selectorsByteOffset = endpointsByteOffset + endpointsByteLength;\n\tconst tablesByteOffset = selectorsByteOffset + selectorsByteLength;\n\tconst extendedByteOffset = tablesByteOffset + tablesByteLength;\n\n\tconst endpointsData = new Uint8Array(data.buffer, data.byteOffset + endpointsByteOffset, endpointsByteLength);\n\tconst selectorsData = new Uint8Array(data.buffer, data.byteOffset + selectorsByteOffset, selectorsByteLength);\n\tconst tablesData = new Uint8Array(data.buffer, data.byteOffset + tablesByteOffset, tablesByteLength);\n\tconst extendedData = new Uint8Array(data.buffer, data.byteOffset + extendedByteOffset, extendedByteLength);\n\n\tcontainer.globalData = {\n\t\tendpointCount,\n\t\tselectorCount,\n\t\timageDescs,\n\t\tendpointsData,\n\t\tselectorsData,\n\t\ttablesData,\n\t\textendedData,\n\t};\n\n\treturn container;\n}\n", "import { HEADER_BYTE_LENGTH, KTX2_ID, KTX_WRITER, NUL } from './constants-internal';\nimport { KHR_DF_KHR_DESCRIPTORTYPE_BASICFORMAT, KHR_DF_SAMPLE_DATATYPE_SIGNED } from './constants';\nimport { KTX2Container } from './container';\nimport { concat, encodeText } from './util';\n\ninterface WriteOptions {\n\tkeepWriter?: boolean;\n}\nconst DEFAULT_OPTIONS: WriteOptions = { keepWriter: false };\n\n/**\n * Serializes a {@link KTX2Container} instance to a KTX 2.0 file. Mip levels and other binary data\n * are copied into the resulting Uint8Array, so the original container can safely be edited or\n * destroyed after it is serialized.\n *\n * Options:\n * - keepWriter: If true, 'KTXWriter' key/value field is written as provided by the container.\n * \t\tOtherwise, a string for the current ktx-parse version is generated. Default: false.\n *\n * @param container\n * @param options\n */\nexport function write(container: KTX2Container, options: WriteOptions = {}): Uint8Array {\n\toptions = { ...DEFAULT_OPTIONS, ...options };\n\n\t///////////////////////////////////////////////////\n\t// Supercompression Global Data (SGD).\n\t///////////////////////////////////////////////////\n\n\tlet sgdBuffer = new ArrayBuffer(0);\n\tif (container.globalData) {\n\t\tconst sgdHeaderBuffer = new ArrayBuffer(20 + container.globalData.imageDescs.length * 5 * 4);\n\t\tconst sgdHeaderView = new DataView(sgdHeaderBuffer);\n\t\tsgdHeaderView.setUint16(0, container.globalData.endpointCount, true);\n\t\tsgdHeaderView.setUint16(2, container.globalData.selectorCount, true);\n\t\tsgdHeaderView.setUint32(4, container.globalData.endpointsData.byteLength, true);\n\t\tsgdHeaderView.setUint32(8, container.globalData.selectorsData.byteLength, true);\n\t\tsgdHeaderView.setUint32(12, container.globalData.tablesData.byteLength, true);\n\t\tsgdHeaderView.setUint32(16, container.globalData.extendedData.byteLength, true);\n\n\t\tfor (let i = 0; i < container.globalData.imageDescs.length; i++) {\n\t\t\tconst imageDesc = container.globalData.imageDescs[i];\n\t\t\tsgdHeaderView.setUint32(20 + i * 5 * 4 + 0, imageDesc.imageFlags, true);\n\t\t\tsgdHeaderView.setUint32(20 + i * 5 * 4 + 4, imageDesc.rgbSliceByteOffset, true);\n\t\t\tsgdHeaderView.setUint32(20 + i * 5 * 4 + 8, imageDesc.rgbSliceByteLength, true);\n\t\t\tsgdHeaderView.setUint32(20 + i * 5 * 4 + 12, imageDesc.alphaSliceByteOffset, true);\n\t\t\tsgdHeaderView.setUint32(20 + i * 5 * 4 + 16, imageDesc.alphaSliceByteLength, true);\n\t\t}\n\n\t\tsgdBuffer = concat([\n\t\t\tsgdHeaderBuffer,\n\t\t\tcontainer.globalData.endpointsData,\n\t\t\tcontainer.globalData.selectorsData,\n\t\t\tcontainer.globalData.tablesData,\n\t\t\tcontainer.globalData.extendedData,\n\t\t]);\n\t}\n\n\t///////////////////////////////////////////////////\n\t// Key/Value Data (KVD).\n\t///////////////////////////////////////////////////\n\n\tconst keyValueData: Uint8Array[] = [];\n\tlet keyValue = container.keyValue;\n\n\tif (!options.keepWriter) {\n\t\tkeyValue = { ...container.keyValue, KTXwriter: KTX_WRITER };\n\t}\n\n\tfor (const key in keyValue) {\n\t\tconst value = keyValue[key];\n\t\tconst keyData = encodeText(key);\n\t\tconst valueData = typeof value === 'string' ? encodeText(value) : value;\n\t\tconst kvByteLength = keyData.byteLength + 1 + valueData.byteLength + 1;\n\t\tconst kvPadding = kvByteLength % 4 ? 4 - (kvByteLength % 4) : 0; // align(4)\n\t\tkeyValueData.push(\n\t\t\tconcat([\n\t\t\t\tnew Uint32Array([kvByteLength]),\n\t\t\t\tkeyData,\n\t\t\t\tNUL,\n\t\t\t\tvalueData,\n\t\t\t\tNUL,\n\t\t\t\tnew Uint8Array(kvPadding).fill(0x00), // align(4)\n\t\t\t])\n\t\t);\n\t}\n\n\tconst kvdBuffer = concat(keyValueData);\n\n\t///////////////////////////////////////////////////\n\t// Data Format Descriptor (DFD).\n\t///////////////////////////////////////////////////\n\n\tif (\n\t\tcontainer.dataFormatDescriptor.length !== 1 ||\n\t\tcontainer.dataFormatDescriptor[0].descriptorType !== KHR_DF_KHR_DESCRIPTORTYPE_BASICFORMAT\n\t) {\n\t\tthrow new Error('Only BASICFORMAT Data Format Descriptor output supported.');\n\t}\n\n\tconst dfd = container.dataFormatDescriptor[0];\n\n\tconst dfdBuffer = new ArrayBuffer(28 + dfd.samples.length * 16);\n\tconst dfdView = new DataView(dfdBuffer);\n\tconst descriptorBlockSize = 24 + dfd.samples.length * 16;\n\n\tdfdView.setUint32(0, dfdBuffer.byteLength, true);\n\tdfdView.setUint16(4, dfd.vendorId, true);\n\tdfdView.setUint16(6, dfd.descriptorType, true);\n\tdfdView.setUint16(8, dfd.versionNumber, true);\n\tdfdView.setUint16(10, descriptorBlockSize, true);\n\n\tdfdView.setUint8(12, dfd.colorModel);\n\tdfdView.setUint8(13, dfd.colorPrimaries);\n\tdfdView.setUint8(14, dfd.transferFunction);\n\tdfdView.setUint8(15, dfd.flags);\n\n\tif (!Array.isArray(dfd.texelBlockDimension)) {\n\t\tthrow new Error('texelBlockDimension is now an array. For dimensionality `d`, set `d - 1`.');\n\t}\n\n\tdfdView.setUint8(16, dfd.texelBlockDimension[0]);\n\tdfdView.setUint8(17, dfd.texelBlockDimension[1]);\n\tdfdView.setUint8(18, dfd.texelBlockDimension[2]);\n\tdfdView.setUint8(19, dfd.texelBlockDimension[3]);\n\n\tfor (let i = 0; i < 8; i++) dfdView.setUint8(20 + i, dfd.bytesPlane[i]);\n\n\tfor (let i = 0; i < dfd.samples.length; i++) {\n\t\tconst sample = dfd.samples[i];\n\t\tconst sampleByteOffset = 28 + i * 16;\n\n\t\tif (sample.channelID) {\n\t\t\tthrow new Error('channelID has been renamed to channelType.');\n\t\t}\n\n\t\tdfdView.setUint16(sampleByteOffset + 0, sample.bitOffset, true);\n\t\tdfdView.setUint8(sampleByteOffset + 2, sample.bitLength);\n\t\tdfdView.setUint8(sampleByteOffset + 3, sample.channelType);\n\n\t\tdfdView.setUint8(sampleByteOffset + 4, sample.samplePosition[0]);\n\t\tdfdView.setUint8(sampleByteOffset + 5, sample.samplePosition[1]);\n\t\tdfdView.setUint8(sampleByteOffset + 6, sample.samplePosition[2]);\n\t\tdfdView.setUint8(sampleByteOffset + 7, sample.samplePosition[3]);\n\n\t\tif (sample.channelType & KHR_DF_SAMPLE_DATATYPE_SIGNED) {\n\t\t\tdfdView.setInt32(sampleByteOffset + 8, sample.sampleLower, true);\n\t\t\tdfdView.setInt32(sampleByteOffset + 12, sample.sampleUpper, true);\n\t\t} else {\n\t\t\tdfdView.setUint32(sampleByteOffset + 8, sample.sampleLower, true);\n\t\t\tdfdView.setUint32(sampleByteOffset + 12, sample.sampleUpper, true);\n\t\t}\n\t}\n\n\t///////////////////////////////////////////////////\n\t// Data alignment.\n\t///////////////////////////////////////////////////\n\n\tconst dfdByteOffset = KTX2_ID.length + HEADER_BYTE_LENGTH + container.levels.length * 3 * 8;\n\tconst kvdByteOffset = dfdByteOffset + dfdBuffer.byteLength;\n\tlet sgdByteOffset = sgdBuffer.byteLength > 0 ? kvdByteOffset + kvdBuffer.byteLength : 0;\n\tif (sgdByteOffset % 8) sgdByteOffset += 8 - (sgdByteOffset % 8); // align(8)\n\n\t///////////////////////////////////////////////////\n\t// Level Index.\n\t///////////////////////////////////////////////////\n\n\tconst levelData: Uint8Array[] = [];\n\tconst levelIndex = new DataView(new ArrayBuffer(container.levels.length * 3 * 8));\n\n\tlet levelDataByteOffset = (sgdByteOffset || kvdByteOffset + kvdBuffer.byteLength) + sgdBuffer.byteLength;\n\tfor (let i = 0; i < container.levels.length; i++) {\n\t\tconst level = container.levels[i];\n\t\tlevelData.push(level.levelData);\n\t\tlevelIndex.setBigUint64(i * 24 + 0, BigInt(levelDataByteOffset), true);\n\t\tlevelIndex.setBigUint64(i * 24 + 8, BigInt(level.levelData.byteLength), true);\n\t\tlevelIndex.setBigUint64(i * 24 + 16, BigInt(level.uncompressedByteLength), true);\n\t\tlevelDataByteOffset += level.levelData.byteLength;\n\t}\n\n\t///////////////////////////////////////////////////\n\t// Header.\n\t///////////////////////////////////////////////////\n\n\tconst headerBuffer = new ArrayBuffer(HEADER_BYTE_LENGTH);\n\tconst headerView = new DataView(headerBuffer);\n\theaderView.setUint32(0, container.vkFormat, true);\n\theaderView.setUint32(4, container.typeSize, true);\n\theaderView.setUint32(8, container.pixelWidth, true);\n\theaderView.setUint32(12, container.pixelHeight, true);\n\theaderView.setUint32(16, container.pixelDepth, true);\n\theaderView.setUint32(20, container.layerCount, true);\n\theaderView.setUint32(24, container.faceCount, true);\n\theaderView.setUint32(28, container.levels.length, true);\n\theaderView.setUint32(32, container.supercompressionScheme, true);\n\n\theaderView.setUint32(36, dfdByteOffset, true);\n\theaderView.setUint32(40, dfdBuffer.byteLength, true);\n\theaderView.setUint32(44, kvdByteOffset, true);\n\theaderView.setUint32(48, kvdBuffer.byteLength, true);\n\theaderView.setBigUint64(52, BigInt(sgdBuffer.byteLength > 0 ? sgdByteOffset : 0), true);\n\theaderView.setBigUint64(60, BigInt(sgdBuffer.byteLength), true);\n\n\t///////////////////////////////////////////////////\n\t// Compose.\n\t///////////////////////////////////////////////////\n\n\treturn new Uint8Array(\n\t\tconcat([\n\t\t\tnew Uint8Array(KTX2_ID).buffer,\n\t\t\theaderBuffer,\n\t\t\tlevelIndex.buffer,\n\t\t\tdfdBuffer,\n\t\t\tkvdBuffer,\n\t\t\tsgdByteOffset > 0\n\t\t\t\t? new ArrayBuffer(sgdByteOffset - (kvdByteOffset + kvdBuffer.byteLength)) // align(8)\n\t\t\t\t: new ArrayBuffer(0),\n\t\t\tsgdBuffer,\n\t\t\t...levelData,\n\t\t])\n\t);\n}\n", "interface DecoderExports {\n\tmemory: Uint8Array;\n\n\tZSTD_findDecompressedSize: (compressedPtr: number, compressedSize: number) => BigInt;\n\tZSTD_decompress: (uncompressedPtr: number, uncompressedSize: number, compressedPtr: number, compressedSize: number) => number;\n\tmalloc: (ptr: number) => number;\n\tfree: (ptr: number) => void;\n}\n\nlet init: Promise<void>;\nlet instance: {exports: DecoderExports};\nlet heap: Uint8Array;\n\nconst IMPORT_OBJECT = {\n\n\tenv: {\n\n\t\temscripten_notify_memory_growth: function ( index: number ): void {\n\n\t\t\theap = new Uint8Array( instance.exports.memory.buffer );\n\n\t\t}\n\n\t}\n\n};\n\n/**\n * ZSTD (Zstandard) decoder.\n */\nexport class ZSTDDecoder {\n\n\tinit (): Promise<void> {\n\n\t\tif ( init ) return init;\n\n\t\tif ( typeof fetch !== 'undefined' ) {\n\n\t\t\t// Web.\n\n\t\t\tinit = fetch( 'data:application/wasm;base64,' + wasm )\n\t\t\t\t.then( ( response ) => response.arrayBuffer() )\n\t\t\t\t.then( ( arrayBuffer ) => WebAssembly.instantiate( arrayBuffer, IMPORT_OBJECT ) )\n\t\t\t\t.then( this._init );\n\n\t\t} else {\n\n\t\t\t// Node.js.\n\n\t\t\tinit = WebAssembly\n\t\t\t\t.instantiate( Buffer.from( wasm, 'base64' ), IMPORT_OBJECT )\n\t\t\t\t.then( this._init );\n\n\t\t}\n\n\t\treturn init;\n\n\t}\n\n\t_init ( result: WebAssembly.WebAssemblyInstantiatedSource ): void {\n\n\t\tinstance = result.instance as unknown as { exports: DecoderExports };\n\n\t\tIMPORT_OBJECT.env.emscripten_notify_memory_growth( 0 ); // initialize heap.\n\n\t}\n\n\tdecode ( array: Uint8Array, uncompressedSize = 0 ): Uint8Array {\n\n\t\tif ( ! instance ) throw new Error( `ZSTDDecoder: Await .init() before decoding.` );\n\n\t\t// Write compressed data into WASM memory.\n\t\tconst compressedSize = array.byteLength;\n\t\tconst compressedPtr = instance.exports.malloc( compressedSize );\n\t\theap.set( array, compressedPtr );\n\n\t\t// Decompress into WASM memory.\n\t\tuncompressedSize = uncompressedSize || Number( instance.exports.ZSTD_findDecompressedSize( compressedPtr, compressedSize ) );\n\t\tconst uncompressedPtr = instance.exports.malloc( uncompressedSize );\n\t\tconst actualSize = instance.exports.ZSTD_decompress( uncompressedPtr, uncompressedSize, compressedPtr, compressedSize );\n\n\t\t// Read decompressed data and free WASM memory.\n\t\tconst dec = heap.slice( uncompressedPtr, uncompressedPtr + actualSize );\n\t\tinstance.exports.free( compressedPtr );\n\t\tinstance.exports.free( uncompressedPtr );\n\n\t\treturn dec;\n\n\t}\n\n}\n\n/**\n * BSD License\n *\n * For Zstandard software\n *\n * Copyright (c) 2016-present, Yann Collet, Facebook, Inc. All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n *\n *  * Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n *\n *  * Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution.\n *\n *  * Neither the name Facebook nor the names of its contributors may be used to\n *    endorse or promote products derived from this software without specific\n *    prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n// wasm:begin\nconst wasm = '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IAMNACAEQQNxBEADQCACRQ0FIAAgAkF/aiICaiIDIAEgAmotAAA6AAAgA0EDcQ0ACwsgAkEDTQ0AA0AgACACQXxqIgJqIAEgAmooAgA2AgAgAkEDSw0ACwsgAkUNAgNAIAAgAkF/aiICaiABIAJqLQAAOgAAIAINAAsMAgsgAkEDTQ0AIAIhBANAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIARBfGoiBEEDSw0ACyACQQNxIQILIAJFDQADQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohASACQX9qIgINAAsLIAAL8wICAn8BfgJAIAJFDQAgACACaiIDQX9qIAE6AAAgACABOgAAIAJBA0kNACADQX5qIAE6AAAgACABOgABIANBfWogAToAACAAIAE6AAIgAkEHSQ0AIANBfGogAToAACAAIAE6AAMgAkEJSQ0AIABBACAAa0EDcSIEaiIDIAFB/wFxQYGChAhsIgE2AgAgAyACIARrQXxxIgRqIgJBfGogATYCACAEQQlJDQAgAyABNgIIIAMgATYCBCACQXhqIAE2AgAgAkF0aiABNgIAIARBGUkNACADIAE2AhggAyABNgIUIAMgATYCECADIAE2AgwgAkFwaiABNgIAIAJBbGogATYCACACQWhqIAE2AgAgAkFkaiABNgIAIAQgA0EEcUEYciIEayICQSBJDQAgAa0iBUIghiAFhCEFIAMgBGohAQNAIAEgBTcDGCABIAU3AxAgASAFNwMIIAEgBTcDACABQSBqIQEgAkFgaiICQR9LDQALCyAACy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAIajYCACADCy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAFajYCACADCx8AIAAgASACKAIEEAg2AgAgARAEGiAAIAJBCGo2AgQLCAAgAGdBH3MLugUBDX8jAEEQayIKJAACfyAEQQNNBEAgCkEANgIMIApBDGogAyAEEAsaIAAgASACIApBDGpBBBAVIgBBbCAAEAMbIAAgACAESxsMAQsgAEEAIAEoAgBBAXRBAmoQECENQVQgAygAACIGQQ9xIgBBCksNABogAiAAQQVqNgIAIAMgBGoiAkF8aiEMIAJBeWohDiACQXtqIRAgAEEGaiELQQQh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ASIDNgLE4AEgACgCvOABIQQgACABNgK84AEgACABIAJqNgK44AEgACABIAQgA2tqNgLA4AELpgEBAX8gACAAKALs4QEQFjYCyOABIABCADcD+OABIABCADcDuOABIABBwOABakIANwMAIABBqNAAaiIBQYyAgOAANgIAIABBADYCmOIBIABCADcDiOEBIABCAzcDgOEBIABBrNABakHgEikCADcCACAAQbTQAWpB6BIoAgA2AgAgACABNgIMIAAgAEGYIGo2AgggACAAQaAwajYCBCAAIABBEGo2AgALYQEBf0G4fyEDAkAgAUEDSQ0AIAIgABAhIgFBA3YiADYCCCACIAFBAXE2AgQgAiABQQF2QQNxIgM2AgACQCADQX9qIgFBAksNAAJAIAFBAWsOAgEAAgtBbA8LIAAhAwsgAwsMACAAIAEgAkEAEC4LiAQCA38CfiADEBYhBCAAQQBBKBAQIQAgBCACSwRAIAQPCyABRQRAQX8PCwJAAkAgA0EBRg0AIAEoAAAiBkGo6r5pRg0AQXYhAyAGQXBxQdDUtMIBRw0BQQghAyACQQhJDQEgAEEAQSgQECEAIAEoAAQhASAAQQE2AhQgACABrTcDAEEADwsgASACIAMQLyIDIAJLDQAgACADNgIYQXIhAyABIARqIgVBf2otAAAiAkEIcQ0AIAJBIHEiBkUEQEFwIQMgBS0AACIFQacBSw0BIAVBB3GtQgEgBUEDdkEKaq2GIgdCA4h+IAd8IQggBEEBaiEECyACQQZ2IQMgAkECdiEFAkAgAkEDcUF/aiICQQJLBEBBACECDAELAkACQAJAIAJBAWsOAgECAAsgASAEai0AACECIARBAWohBAwCCyABIARqLwAAIQIgBEECaiEEDAELIAEgBGooAAAhAiAEQQRqIQQLIAVBAXEhBQJ+AkACQAJAIANBf2oiA0ECTQRAIANBAWsOAgIDAQtCfyAGRQ0DGiABIARqMQAADAMLIAEgBGovAACtQoACfAwCCyABIARqKAAArQwBCyABIARqKQAACyEHIAAgBTYCICAAIAI2AhwgACAHNwMAQQAhAyAAQQA2AhQgACAHIAggBhsiBzcDCCAAIAdCgIAIIAdCgIAIVBs+AhALIAMLWwEBf0G4fyEDIAIQFiICIAFNBH8gACACakF/ai0AACIAQQNxQQJ0QaAeaigC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C0Egak8NAQsgByAHKQNoNwMQIAcgBykDYDcDCCAEIA0gB0EIaiAHQdwAaiAPIA4gESAQEB4hCwwBCyACIARqIQggBCAKEAcgAkERTwRAIARBEGohAgNAIAIgCkEQaiIKEAcgAkEQaiICIAhJDQALCyAIIAlrIQIgByATNgJcIAkgCCAOa0sEQCAJIAggEWtLBEBBbCELDAILIBAgAiAOayICaiIKIANqIBBNBEAgCCAKIAMQDxoMAgsgCCAKQQAgAmsQDyEIIAcgAiADaiIDNgJkIAggAmshCCAOIQILIAlBEE8EQCADIAhqIQMDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALDAELAkAgCUEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgCUECdCIDQcAeaigCAGoiAhAXIAIgA0HgHmooAgBrIQIgBygCZCEDDAELIAggAhAMCyADQQlJDQAgAyAIaiEDIAhBCGoiCCACQQhqIgJrQQ9MBEADQCAIIAIQDCACQQhqIQIgCEEIaiIIIANJDQAMAgALAAsDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALCyAHQRhqEAQaIAsgDCALEAMiAhshDCAEIAQgC2ogAhshBCAFQX9qIgUNAAsgDBADDQFBbCEMIAdBGGoQBEECSQ0BQQAhCANAIAhBA0cEQCAAIAhBAnQiAmpBrNABaiACIAdqKAJENgIAIAhBAWohCAwBCwsgBygCXCEIC0G6fyEMIA8gCGsiACANIARrSw0AIAQEfyAEIAggABALIABqBUEACyABayEMCyAHQfAAaiQAIAwLkRcCFn8FfiMAQdABayIHJAAgByAAKALw4QEiCDYCvAEgASACaiESIAggACgCgOIBaiETAkACQCAFRQRAIAEhAwwBCyAAKALE4AEhESAAKALA4AEhFSAAKAK84AEhDyAAQQE2AozhAUEAIQgDQCAIQQNHBEAgByAIQQJ0IgJqIAAgAmpBrNABaigCADYCVCAIQQFqIQgMAQsLIAcgETYCZCAHIA82AmAgByABIA9rNgJoQWwhECAHQShqIAMgBBAGEAMNASAFQQQgBUEESBshFyAHQTxqIAdBKGogACgCABATIAdBxABqIAdBKGogACgCCBATIAdBzABqIAdB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IAdB0AFqJAAgEAslACAAQgA3AgAgAEEAOwEIIABBADoACyAAIAE2AgwgACACOgAKC7QFAQN/IwBBMGsiBCQAIABB/wFqIgVBfWohBgJAIAMvAQIEQCAEQRhqIAEgAhAGIgIQAw0BIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahASOgAAIAMgBEEIaiAEQRhqEBI6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0FIAEgBEEQaiAEQRhqEBI6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBSABIARBCGogBEEYahASOgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEjoAACABIAJqIABrIQIMAwsgAyAEQRBqIARBGGoQEjoAAiADIARBCGogBEEYahASOgADIANBBGohAwwAAAsACyAEQRhqIAEgAhAGIgIQAw0AIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahAROgAAIAMgBEEIaiAEQRhqEBE6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0EIAEgBEEQaiAEQRhqEBE6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBCABIARBCGogBEEYahAROgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEToAACABIAJqIABrIQIMAgsgAyAEQRBqIARBGGoQEToAAiADIARBCGogBEEYahAROgADIANBBGohAwwAAAsACyAEQTBqJAAgAgtpAQF/An8CQAJAIAJBB00NACABKAAAQbfIwuF+Rw0AIAAgASgABDYCmOIBQWIgAEEQaiABIAIQPiIDEAMNAhogAEKBgICAEDcDiOEBIAAgASADaiACIANrECoMAQsgACABIAIQKgtBAAsLrQMBBn8jAEGAAWsiAyQAQWIhCAJAIAJBCUkNACAAQZjQAGogAUEIaiIEIAJBeGogAEGY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wOABCwutAgIEfwF+IwBBQGoiBCQAAkACQCACQQhJDQAgASgAAEFwcUHQ1LTCAUcNACABIAIQIiEBIABCADcDCCAAQQA2AgQgACABNgIADAELIARBGGogASACEC0iAxADBEAgACADEBoMAQsgAwRAIABBuH8QGgwBCyACIAQoAjAiA2shAiABIANqIQMDQAJAIAAgAyACIARBCGoQLCIFEAMEfyAFBSACIAVBA2oiBU8NAUG4fwsQGgwCCyAGQQFqIQYgAiAFayECIAMgBWohAyAEKAIMRQ0ACyAEKAI4BEAgAkEDTQRAIABBuH8QGgwCCyADQQRqIQMLIAQoAighAiAEKQMYIQcgAEEANgIEIAAgAyABazYCACAAIAIgBmytIAcgB0J/URs3AwgLIARBQGskAAslAQF/IwBBEGsiAiQAIAIgACABEFEgAigCACEAIAJBEGokACAAC30BBH8jAEGQBGsiBCQAIARB/wE2AggCQCAEQRBqIARBCGogBEEMaiABIAIQFSIGEAMEQCAGIQUMAQtBVCEFIAQoAgwiB0EGSw0AIAMgBEEQaiAEKAIIIAcQQSIFEAMNACAAIAEgBmogAiAGayADEDwhBQsgBEGQBGokACAFC4cBAgJ/An5BABAWIQMCQANAIAEgA08EQAJAIAAoAABBcHFB0NS0wgFGBEAgACABECIiAhADRQ0BQn4PCyAAIAEQVSIEQn1WDQMgBCAFfCIFIARUIQJCfiEEIAINAyAAIAEQUiICEAMNAwsgASACayEBIAAgAmohAAwBCwtCfiAFIAEbIQQLIAQLPwIBfwF+IwBBMGsiAiQAAn5CfiACQQhqIAAgARAtDQAaQgAgAigCHEEBRg0AGiACKQMICyEDIAJBMGokACADC40BAQJ/IwBBMGsiASQAAkAgAEUNACAAKAKI4gENACABIABB/OEBaigCADYCKCABIAApAvThATcDICAAEDAgACgCqOIBIQIgASABKAIoNgIYIAEgASkDIDcDECACIAFBEGoQGyAAQQA2AqjiASABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALKgECfyMAQRBrIgAkACAAQQA2AgggAEIANwMAIAAQWCEBIABBEGokACABC4cBAQN/IwBBEGsiAiQAAkAgACgCAEUgACgCBEVzDQAgAiAAKAIINgIIIAIgACkCADcDAAJ/IAIoAgAiAQRAIAIoAghBqOMJIAERBQAMAQtBqOMJECgLIgFFDQAgASAAKQIANwL04QEgAUH84QFqIAAoAgg2AgAgARBZIAEhAwsgAkEQaiQAIAMLywEBAn8jAEEgayIBJAAgAEGBgIDAADYCtOIBIABBADYCiOIBIABBADYC7OEBIABCADcDkOIBIABBADYCpOMJIABBADYC3OIBIABCADcCzOIBIABBADYCvOIBIABBADYCxOABIABCADcCnOIBIABBpOIBakIANwIAIABBrOIBakEANgIAIAFCADcCECABQgA3AhggASABKQMYNwMIIAEgASkDEDcDACABKAIIQQh2QQFxIQIgAEEANgLg4gEgACACNgKM4gEgAUEgaiQAC3YBA38jAEEwayIBJAAgAARAIAEgAEHE0AFqIgIoAgA2AiggASAAKQK80AE3AyAgACgCACEDIAEgAigCADYCGCABIAApArzQATcDECADIAFBEGoQGyABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALzAEBAX8gACABKAK00AE2ApjiASAAIAEoAgQiAjYCwOABIAAgAjYCvOABIAAgAiABKAIIaiICNgK44AEgACACNgLE4AEgASgCuNABBEAgAEKBgICAEDcDiOEBIAAgAUGk0ABqNgIMIAAgAUGUIGo2AgggACABQZwwajYCBCAAIAFBDGo2AgAgAEGs0AFqIAFBqNABaigCADYCACAAQbDQAWogAUGs0AFqKAIANgIAIABBtNABaiABQbDQAWooAgA2AgAPCyAAQgA3A4jhAQs7ACACRQRAQbp/DwsgBEUEQEFsDwsgAiAEEGAEQCAAIAEgAiADIAQgBRBhDwsgACABIAIgAyAEIAUQZQtGAQF/IwBBEGsiBSQAIAVBCGogBBAOAn8gBS0ACQRAIAAgASACIAMgBBAyDAELIAAgASACIAMgBBA0CyEAIAVBEGokACAACzQAIAAgAyAEIAUQNiIFEAMEQCAFDwsgBSAESQR/IAEgAiADIAVqIAQgBWsgABA1BUG4fwsLRgEBfyMAQRBrIgUkACAFQQhqIAQQDgJ/IAUtAAkEQCAAIAEgAiADIAQQYgwBCyAAIAEgAiADIAQQNQshACAFQRBqJAAgAAtZAQF/QQ8hAiABIABJBEAgAUEE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';\n// wasm:end\n", "import { CompressedTexture, ClampToEdgeWrapping } from \"three\";\r\nclass CompressedArrayTexture extends CompressedTexture {\r\n  constructor(mipmaps, width, height, depth, format, type) {\r\n    super(mipmaps, width, height, format, type);\r\n    this.isCompressedArrayTexture = true;\r\n    this.image.depth = depth;\r\n    this.wrapR = ClampToEdgeWrapping;\r\n  }\r\n}\r\nexport {\r\n  CompressedArrayTexture\r\n};\r\n", "var __defProp = Object.defineProperty;\r\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\r\nvar __publicField = (obj, key, value) => {\r\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\r\n  return value;\r\n};\r\nimport { Loader, RGBAFormat, RGBA_ASTC_4x4_Format, RGBA_BPTC_Format, RGBA_ETC2_EAC_Format, RGBA_PVRTC_4BPPV1_Format, RGBA_S3TC_DXT5_Format, RGB_ETC1_Format, RGB_ETC2_Format, RGB_PVRTC_4BPPV1_Format, RGB_S3TC_DXT1_Format, FileLoader, UnsignedByteType, CompressedTexture, LinearFilter, LinearMipmapLinearFilter, RGFormat, RedFormat, FloatType, HalfFloatType, DataTexture } from \"three\";\r\nimport { WorkerPool } from \"../utils/WorkerPool.js\";\r\nimport { KHR_DF_TRANSFER_SRGB, KHR_DF_FLAG_ALPHA_PREMULTIPLIED, read, VK_FORMAT_UNDEFINED, VK_FORMAT_R32G32B32A32_SFLOAT, VK_FORMAT_R16G16B16A16_SFLOAT, VK_FORMAT_R8G8B8A8_UNORM, VK_FORMAT_R8G8B8A8_SRGB, VK_FORMAT_R32G32_SFLOAT, VK_FORMAT_R16G16_SFLOAT, VK_FORMAT_R8G8_UNORM, VK_FORMAT_R8G8_SRGB, VK_FORMAT_R32_SFLOAT, VK_FORMAT_R16_SFLOAT, VK_FORMAT_R8_SRGB, VK_FORMAT_R8_UNORM, KHR_SUPERCOMPRESSION_NONE, KHR_SUPERCOMPRESSION_ZSTD } from \"ktx-parse\";\r\nimport { ZSTDDecoder } from \"zstddec\";\r\nimport { CompressedArrayTexture } from \"../_polyfill/CompressedArrayTexture.js\";\r\nimport { Data3DTexture } from \"../_polyfill/Data3DTexture.js\";\r\nconst _taskCache = /* @__PURE__ */ new WeakMap();\r\nlet _activeLoaders = 0;\r\nlet _zstd;\r\nconst _KTX2Loader = class extends Loader {\r\n  constructor(manager) {\r\n    super(manager);\r\n    this.transcoderPath = \"\";\r\n    this.transcoderBinary = null;\r\n    this.transcoderPending = null;\r\n    this.workerPool = new WorkerPool();\r\n    this.workerSourceURL = \"\";\r\n    this.workerConfig = null;\r\n    if (typeof MSC_TRANSCODER !== \"undefined\") {\r\n      console.warn(\r\n        'THREE.KTX2Loader: Please update to latest \"basis_transcoder\". \"msc_basis_transcoder\" is no longer supported in three.js r125+.'\r\n      );\r\n    }\r\n  }\r\n  setTranscoderPath(path) {\r\n    this.transcoderPath = path;\r\n    return this;\r\n  }\r\n  setWorkerLimit(num) {\r\n    this.workerPool.setWorkerLimit(num);\r\n    return this;\r\n  }\r\n  detectSupport(renderer) {\r\n    this.workerConfig = {\r\n      astcSupported: renderer.extensions.has(\"WEBGL_compressed_texture_astc\"),\r\n      etc1Supported: renderer.extensions.has(\"WEBGL_compressed_texture_etc1\"),\r\n      etc2Supported: renderer.extensions.has(\"WEBGL_compressed_texture_etc\"),\r\n      dxtSupported: renderer.extensions.has(\"WEBGL_compressed_texture_s3tc\"),\r\n      bptcSupported: renderer.extensions.has(\"EXT_texture_compression_bptc\"),\r\n      pvrtcSupported: renderer.extensions.has(\"WEBGL_compressed_texture_pvrtc\") || renderer.extensions.has(\"WEBKIT_WEBGL_compressed_texture_pvrtc\")\r\n    };\r\n    if (renderer.capabilities.isWebGL2) {\r\n      this.workerConfig.etc1Supported = false;\r\n    }\r\n    return this;\r\n  }\r\n  init() {\r\n    if (!this.transcoderPending) {\r\n      const jsLoader = new FileLoader(this.manager);\r\n      jsLoader.setPath(this.transcoderPath);\r\n      jsLoader.setWithCredentials(this.withCredentials);\r\n      const jsContent = jsLoader.loadAsync(\"basis_transcoder.js\");\r\n      const binaryLoader = new FileLoader(this.manager);\r\n      binaryLoader.setPath(this.transcoderPath);\r\n      binaryLoader.setResponseType(\"arraybuffer\");\r\n      binaryLoader.setWithCredentials(this.withCredentials);\r\n      const binaryContent = binaryLoader.loadAsync(\"basis_transcoder.wasm\");\r\n      this.transcoderPending = Promise.all([jsContent, binaryContent]).then(([jsContent2, binaryContent2]) => {\r\n        const fn = _KTX2Loader.BasisWorker.toString();\r\n        const body = [\r\n          \"/* constants */\",\r\n          \"let _EngineFormat = \" + JSON.stringify(_KTX2Loader.EngineFormat),\r\n          \"let _TranscoderFormat = \" + JSON.stringify(_KTX2Loader.TranscoderFormat),\r\n          \"let _BasisFormat = \" + JSON.stringify(_KTX2Loader.BasisFormat),\r\n          \"/* basis_transcoder.js */\",\r\n          jsContent2,\r\n          \"/* worker */\",\r\n          fn.substring(fn.indexOf(\"{\") + 1, fn.lastIndexOf(\"}\"))\r\n        ].join(\"\\n\");\r\n        this.workerSourceURL = URL.createObjectURL(new Blob([body]));\r\n        this.transcoderBinary = binaryContent2;\r\n        this.workerPool.setWorkerCreator(() => {\r\n          const worker = new Worker(this.workerSourceURL);\r\n          const transcoderBinary = this.transcoderBinary.slice(0);\r\n          worker.postMessage({ type: \"init\", config: this.workerConfig, transcoderBinary }, [transcoderBinary]);\r\n          return worker;\r\n        });\r\n      });\r\n      if (_activeLoaders > 0) {\r\n        console.warn(\r\n          \"THREE.KTX2Loader: Multiple active KTX2 loaders may cause performance issues. Use a single KTX2Loader instance, or call .dispose() on old instances.\"\r\n        );\r\n      }\r\n      _activeLoaders++;\r\n    }\r\n    return this.transcoderPending;\r\n  }\r\n  load(url, onLoad, onProgress, onError) {\r\n    if (this.workerConfig === null) {\r\n      throw new Error(\"THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.\");\r\n    }\r\n    const loader = new FileLoader(this.manager);\r\n    loader.setResponseType(\"arraybuffer\");\r\n    loader.setWithCredentials(this.withCredentials);\r\n    loader.load(\r\n      url,\r\n      (buffer) => {\r\n        if (_taskCache.has(buffer)) {\r\n          const cachedTask = _taskCache.get(buffer);\r\n          return cachedTask.promise.then(onLoad).catch(onError);\r\n        }\r\n        this._createTexture(buffer).then((texture) => onLoad ? onLoad(texture) : null).catch(onError);\r\n      },\r\n      onProgress,\r\n      onError\r\n    );\r\n  }\r\n  _createTextureFrom(transcodeResult, container) {\r\n    const { mipmaps, width, height, format, type, error, dfdTransferFn, dfdFlags } = transcodeResult;\r\n    if (type === \"error\")\r\n      return Promise.reject(error);\r\n    const texture = container.layerCount > 1 ? new CompressedArrayTexture(mipmaps, width, height, container.layerCount, format, UnsignedByteType) : new CompressedTexture(mipmaps, width, height, format, UnsignedByteType);\r\n    texture.minFilter = mipmaps.length === 1 ? LinearFilter : LinearMipmapLinearFilter;\r\n    texture.magFilter = LinearFilter;\r\n    texture.generateMipmaps = false;\r\n    texture.needsUpdate = true;\r\n    if (\"colorSpace\" in texture)\r\n      texture.colorSpace = dfdTransferFn === KHR_DF_TRANSFER_SRGB ? \"srgb\" : \"srgb-linear\";\r\n    else\r\n      texture.encoding = dfdTransferFn === KHR_DF_TRANSFER_SRGB ? 3001 : 3e3;\r\n    texture.premultiplyAlpha = !!(dfdFlags & KHR_DF_FLAG_ALPHA_PREMULTIPLIED);\r\n    return texture;\r\n  }\r\n  /**\r\n   * @param {ArrayBuffer} buffer\r\n   * @param {object?} config\r\n   * @return {Promise<CompressedTexture|CompressedArrayTexture|DataTexture|Data3DTexture>}\r\n   */\r\n  async _createTexture(buffer, config = {}) {\r\n    const container = read(new Uint8Array(buffer));\r\n    if (container.vkFormat !== VK_FORMAT_UNDEFINED) {\r\n      return createDataTexture(container);\r\n    }\r\n    const taskConfig = config;\r\n    const texturePending = this.init().then(() => {\r\n      return this.workerPool.postMessage({ type: \"transcode\", buffer, taskConfig }, [buffer]);\r\n    }).then((e) => this._createTextureFrom(e.data, container));\r\n    _taskCache.set(buffer, { promise: texturePending });\r\n    return texturePending;\r\n  }\r\n  dispose() {\r\n    this.workerPool.dispose();\r\n    if (this.workerSourceURL)\r\n      URL.revokeObjectURL(this.workerSourceURL);\r\n    _activeLoaders--;\r\n    return this;\r\n  }\r\n};\r\nlet KTX2Loader = _KTX2Loader;\r\n/* CONSTANTS */\r\n__publicField(KTX2Loader, \"BasisFormat\", {\r\n  ETC1S: 0,\r\n  UASTC_4x4: 1\r\n});\r\n__publicField(KTX2Loader, \"TranscoderFormat\", {\r\n  ETC1: 0,\r\n  ETC2: 1,\r\n  BC1: 2,\r\n  BC3: 3,\r\n  BC4: 4,\r\n  BC5: 5,\r\n  BC7_M6_OPAQUE_ONLY: 6,\r\n  BC7_M5: 7,\r\n  PVRTC1_4_RGB: 8,\r\n  PVRTC1_4_RGBA: 9,\r\n  ASTC_4x4: 10,\r\n  ATC_RGB: 11,\r\n  ATC_RGBA_INTERPOLATED_ALPHA: 12,\r\n  RGBA32: 13,\r\n  RGB565: 14,\r\n  BGR565: 15,\r\n  RGBA4444: 16\r\n});\r\n__publicField(KTX2Loader, \"EngineFormat\", {\r\n  RGBAFormat,\r\n  RGBA_ASTC_4x4_Format,\r\n  RGBA_BPTC_Format,\r\n  RGBA_ETC2_EAC_Format,\r\n  RGBA_PVRTC_4BPPV1_Format,\r\n  RGBA_S3TC_DXT5_Format,\r\n  RGB_ETC1_Format,\r\n  RGB_ETC2_Format,\r\n  RGB_PVRTC_4BPPV1_Format,\r\n  RGB_S3TC_DXT1_Format\r\n});\r\n/* WEB WORKER */\r\n__publicField(KTX2Loader, \"BasisWorker\", function() {\r\n  let config;\r\n  let transcoderPending;\r\n  let BasisModule;\r\n  const EngineFormat = _EngineFormat;\r\n  const TranscoderFormat = _TranscoderFormat;\r\n  const BasisFormat = _BasisFormat;\r\n  self.addEventListener(\"message\", function(e) {\r\n    const message = e.data;\r\n    switch (message.type) {\r\n      case \"init\":\r\n        config = message.config;\r\n        init(message.transcoderBinary);\r\n        break;\r\n      case \"transcode\":\r\n        transcoderPending.then(() => {\r\n          try {\r\n            const { width, height, hasAlpha, mipmaps, format, dfdTransferFn, dfdFlags } = transcode(message.buffer);\r\n            const buffers = [];\r\n            for (let i = 0; i < mipmaps.length; ++i) {\r\n              buffers.push(mipmaps[i].data.buffer);\r\n            }\r\n            self.postMessage(\r\n              {\r\n                type: \"transcode\",\r\n                id: message.id,\r\n                width,\r\n                height,\r\n                hasAlpha,\r\n                mipmaps,\r\n                format,\r\n                dfdTransferFn,\r\n                dfdFlags\r\n              },\r\n              buffers\r\n            );\r\n          } catch (error) {\r\n            console.error(error);\r\n            self.postMessage({ type: \"error\", id: message.id, error: error.message });\r\n          }\r\n        });\r\n        break;\r\n    }\r\n  });\r\n  function init(wasmBinary) {\r\n    transcoderPending = new Promise((resolve) => {\r\n      BasisModule = { wasmBinary, onRuntimeInitialized: resolve };\r\n      BASIS(BasisModule);\r\n    }).then(() => {\r\n      BasisModule.initializeBasis();\r\n      if (BasisModule.KTX2File === void 0) {\r\n        console.warn(\"THREE.KTX2Loader: Please update Basis Universal transcoder.\");\r\n      }\r\n    });\r\n  }\r\n  function transcode(buffer) {\r\n    const ktx2File = new BasisModule.KTX2File(new Uint8Array(buffer));\r\n    function cleanup() {\r\n      ktx2File.close();\r\n      ktx2File.delete();\r\n    }\r\n    if (!ktx2File.isValid()) {\r\n      cleanup();\r\n      throw new Error(\"THREE.KTX2Loader:\tInvalid or unsupported .ktx2 file\");\r\n    }\r\n    const basisFormat = ktx2File.isUASTC() ? BasisFormat.UASTC_4x4 : BasisFormat.ETC1S;\r\n    const width = ktx2File.getWidth();\r\n    const height = ktx2File.getHeight();\r\n    const layers = ktx2File.getLayers() || 1;\r\n    const levels = ktx2File.getLevels();\r\n    const hasAlpha = ktx2File.getHasAlpha();\r\n    const dfdTransferFn = ktx2File.getDFDTransferFunc();\r\n    const dfdFlags = ktx2File.getDFDFlags();\r\n    const { transcoderFormat, engineFormat } = getTranscoderFormat(basisFormat, width, height, hasAlpha);\r\n    if (!width || !height || !levels) {\r\n      cleanup();\r\n      throw new Error(\"THREE.KTX2Loader:\tInvalid texture\");\r\n    }\r\n    if (!ktx2File.startTranscoding()) {\r\n      cleanup();\r\n      throw new Error(\"THREE.KTX2Loader: .startTranscoding failed\");\r\n    }\r\n    const mipmaps = [];\r\n    for (let mip = 0; mip < levels; mip++) {\r\n      const layerMips = [];\r\n      let mipWidth, mipHeight;\r\n      for (let layer = 0; layer < layers; layer++) {\r\n        const levelInfo = ktx2File.getImageLevelInfo(mip, layer, 0);\r\n        mipWidth = levelInfo.origWidth < 4 ? levelInfo.origWidth : levelInfo.width;\r\n        mipHeight = levelInfo.origHeight < 4 ? levelInfo.origHeight : levelInfo.height;\r\n        const dst = new Uint8Array(ktx2File.getImageTranscodedSizeInBytes(mip, layer, 0, transcoderFormat));\r\n        const status = ktx2File.transcodeImage(dst, mip, layer, 0, transcoderFormat, 0, -1, -1);\r\n        if (!status) {\r\n          cleanup();\r\n          throw new Error(\"THREE.KTX2Loader: .transcodeImage failed.\");\r\n        }\r\n        layerMips.push(dst);\r\n      }\r\n      mipmaps.push({ data: concat(layerMips), width: mipWidth, height: mipHeight });\r\n    }\r\n    cleanup();\r\n    return { width, height, hasAlpha, mipmaps, format: engineFormat, dfdTransferFn, dfdFlags };\r\n  }\r\n  const FORMAT_OPTIONS = [\r\n    {\r\n      if: \"astcSupported\",\r\n      basisFormat: [BasisFormat.UASTC_4x4],\r\n      transcoderFormat: [TranscoderFormat.ASTC_4x4, TranscoderFormat.ASTC_4x4],\r\n      engineFormat: [EngineFormat.RGBA_ASTC_4x4_Format, EngineFormat.RGBA_ASTC_4x4_Format],\r\n      priorityETC1S: Infinity,\r\n      priorityUASTC: 1,\r\n      needsPowerOfTwo: false\r\n    },\r\n    {\r\n      if: \"bptcSupported\",\r\n      basisFormat: [BasisFormat.ETC1S, BasisFormat.UASTC_4x4],\r\n      transcoderFormat: [TranscoderFormat.BC7_M5, TranscoderFormat.BC7_M5],\r\n      engineFormat: [EngineFormat.RGBA_BPTC_Format, EngineFormat.RGBA_BPTC_Format],\r\n      priorityETC1S: 3,\r\n      priorityUASTC: 2,\r\n      needsPowerOfTwo: false\r\n    },\r\n    {\r\n      if: \"dxtSupported\",\r\n      basisFormat: [BasisFormat.ETC1S, BasisFormat.UASTC_4x4],\r\n      transcoderFormat: [TranscoderFormat.BC1, TranscoderFormat.BC3],\r\n      engineFormat: [EngineFormat.RGB_S3TC_DXT1_Format, EngineFormat.RGBA_S3TC_DXT5_Format],\r\n      priorityETC1S: 4,\r\n      priorityUASTC: 5,\r\n      needsPowerOfTwo: false\r\n    },\r\n    {\r\n      if: \"etc2Supported\",\r\n      basisFormat: [BasisFormat.ETC1S, BasisFormat.UASTC_4x4],\r\n      transcoderFormat: [TranscoderFormat.ETC1, TranscoderFormat.ETC2],\r\n      engineFormat: [EngineFormat.RGB_ETC2_Format, EngineFormat.RGBA_ETC2_EAC_Format],\r\n      priorityETC1S: 1,\r\n      priorityUASTC: 3,\r\n      needsPowerOfTwo: false\r\n    },\r\n    {\r\n      if: \"etc1Supported\",\r\n      basisFormat: [BasisFormat.ETC1S, BasisFormat.UASTC_4x4],\r\n      transcoderFormat: [TranscoderFormat.ETC1],\r\n      engineFormat: [EngineFormat.RGB_ETC1_Format],\r\n      priorityETC1S: 2,\r\n      priorityUASTC: 4,\r\n      needsPowerOfTwo: false\r\n    },\r\n    {\r\n      if: \"pvrtcSupported\",\r\n      basisFormat: [BasisFormat.ETC1S, BasisFormat.UASTC_4x4],\r\n      transcoderFormat: [TranscoderFormat.PVRTC1_4_RGB, TranscoderFormat.PVRTC1_4_RGBA],\r\n      engineFormat: [EngineFormat.RGB_PVRTC_4BPPV1_Format, EngineFormat.RGBA_PVRTC_4BPPV1_Format],\r\n      priorityETC1S: 5,\r\n      priorityUASTC: 6,\r\n      needsPowerOfTwo: true\r\n    }\r\n  ];\r\n  const ETC1S_OPTIONS = FORMAT_OPTIONS.sort(function(a, b) {\r\n    return a.priorityETC1S - b.priorityETC1S;\r\n  });\r\n  const UASTC_OPTIONS = FORMAT_OPTIONS.sort(function(a, b) {\r\n    return a.priorityUASTC - b.priorityUASTC;\r\n  });\r\n  function getTranscoderFormat(basisFormat, width, height, hasAlpha) {\r\n    let transcoderFormat;\r\n    let engineFormat;\r\n    const options = basisFormat === BasisFormat.ETC1S ? ETC1S_OPTIONS : UASTC_OPTIONS;\r\n    for (let i = 0; i < options.length; i++) {\r\n      const opt = options[i];\r\n      if (!config[opt.if])\r\n        continue;\r\n      if (!opt.basisFormat.includes(basisFormat))\r\n        continue;\r\n      if (hasAlpha && opt.transcoderFormat.length < 2)\r\n        continue;\r\n      if (opt.needsPowerOfTwo && !(isPowerOfTwo(width) && isPowerOfTwo(height)))\r\n        continue;\r\n      transcoderFormat = opt.transcoderFormat[hasAlpha ? 1 : 0];\r\n      engineFormat = opt.engineFormat[hasAlpha ? 1 : 0];\r\n      return { transcoderFormat, engineFormat };\r\n    }\r\n    console.warn(\"THREE.KTX2Loader: No suitable compressed texture format found. Decoding to RGBA32.\");\r\n    transcoderFormat = TranscoderFormat.RGBA32;\r\n    engineFormat = EngineFormat.RGBAFormat;\r\n    return { transcoderFormat, engineFormat };\r\n  }\r\n  function isPowerOfTwo(value) {\r\n    if (value <= 2)\r\n      return true;\r\n    return (value & value - 1) === 0 && value !== 0;\r\n  }\r\n  function concat(arrays) {\r\n    let totalByteLength = 0;\r\n    for (let i = 0; i < arrays.length; i++) {\r\n      const array = arrays[i];\r\n      totalByteLength += array.byteLength;\r\n    }\r\n    const result = new Uint8Array(totalByteLength);\r\n    let byteOffset = 0;\r\n    for (let i = 0; i < arrays.length; i++) {\r\n      const array = arrays[i];\r\n      result.set(array, byteOffset);\r\n      byteOffset += array.byteLength;\r\n    }\r\n    return result;\r\n  }\r\n});\r\nconst FORMAT_MAP = {\r\n  [VK_FORMAT_R32G32B32A32_SFLOAT]: RGBAFormat,\r\n  [VK_FORMAT_R16G16B16A16_SFLOAT]: RGBAFormat,\r\n  [VK_FORMAT_R8G8B8A8_UNORM]: RGBAFormat,\r\n  [VK_FORMAT_R8G8B8A8_SRGB]: RGBAFormat,\r\n  [VK_FORMAT_R32G32_SFLOAT]: RGFormat,\r\n  [VK_FORMAT_R16G16_SFLOAT]: RGFormat,\r\n  [VK_FORMAT_R8G8_UNORM]: RGFormat,\r\n  [VK_FORMAT_R8G8_SRGB]: RGFormat,\r\n  [VK_FORMAT_R32_SFLOAT]: RedFormat,\r\n  [VK_FORMAT_R16_SFLOAT]: RedFormat,\r\n  [VK_FORMAT_R8_SRGB]: RedFormat,\r\n  [VK_FORMAT_R8_UNORM]: RedFormat\r\n};\r\nconst TYPE_MAP = {\r\n  [VK_FORMAT_R32G32B32A32_SFLOAT]: FloatType,\r\n  [VK_FORMAT_R16G16B16A16_SFLOAT]: HalfFloatType,\r\n  [VK_FORMAT_R8G8B8A8_UNORM]: UnsignedByteType,\r\n  [VK_FORMAT_R8G8B8A8_SRGB]: UnsignedByteType,\r\n  [VK_FORMAT_R32G32_SFLOAT]: FloatType,\r\n  [VK_FORMAT_R16G16_SFLOAT]: HalfFloatType,\r\n  [VK_FORMAT_R8G8_UNORM]: UnsignedByteType,\r\n  [VK_FORMAT_R8G8_SRGB]: UnsignedByteType,\r\n  [VK_FORMAT_R32_SFLOAT]: FloatType,\r\n  [VK_FORMAT_R16_SFLOAT]: HalfFloatType,\r\n  [VK_FORMAT_R8_SRGB]: UnsignedByteType,\r\n  [VK_FORMAT_R8_UNORM]: UnsignedByteType\r\n};\r\nconst ENCODING_MAP = {\r\n  [VK_FORMAT_R8G8B8A8_SRGB]: 3001,\r\n  // sRGBEncoding\r\n  [VK_FORMAT_R8G8_SRGB]: 3001,\r\n  // sRGBEncoding\r\n  [VK_FORMAT_R8_SRGB]: 3001\r\n  // sRGBEncoding\r\n};\r\nasync function createDataTexture(container) {\r\n  const { vkFormat, pixelWidth, pixelHeight, pixelDepth } = container;\r\n  if (FORMAT_MAP[vkFormat] === void 0) {\r\n    throw new Error(\"THREE.KTX2Loader: Unsupported vkFormat.\");\r\n  }\r\n  const level = container.levels[0];\r\n  let levelData;\r\n  let view;\r\n  if (container.supercompressionScheme === KHR_SUPERCOMPRESSION_NONE) {\r\n    levelData = level.levelData;\r\n  } else if (container.supercompressionScheme === KHR_SUPERCOMPRESSION_ZSTD) {\r\n    if (!_zstd) {\r\n      _zstd = new Promise(async (resolve) => {\r\n        const zstd = new ZSTDDecoder();\r\n        await zstd.init();\r\n        resolve(zstd);\r\n      });\r\n    }\r\n    levelData = (await _zstd).decode(level.levelData, level.uncompressedByteLength);\r\n  } else {\r\n    throw new Error(\"THREE.KTX2Loader: Unsupported supercompressionScheme.\");\r\n  }\r\n  if (TYPE_MAP[vkFormat] === FloatType) {\r\n    view = new Float32Array(\r\n      levelData.buffer,\r\n      levelData.byteOffset,\r\n      levelData.byteLength / Float32Array.BYTES_PER_ELEMENT\r\n    );\r\n  } else if (TYPE_MAP[vkFormat] === HalfFloatType) {\r\n    view = new Uint16Array(levelData.buffer, levelData.byteOffset, levelData.byteLength / Uint16Array.BYTES_PER_ELEMENT);\r\n  } else {\r\n    view = levelData;\r\n  }\r\n  const texture = pixelDepth === 0 ? new DataTexture(view, pixelWidth, pixelHeight) : new Data3DTexture(view, pixelWidth, pixelHeight, pixelDepth);\r\n  texture.type = TYPE_MAP[vkFormat];\r\n  texture.format = FORMAT_MAP[vkFormat];\r\n  texture.encoding = ENCODING_MAP[vkFormat] || 3e3;\r\n  texture.needsUpdate = true;\r\n  return Promise.resolve(texture);\r\n}\r\nexport {\r\n  KTX2Loader\r\n};\r\n", "/*! https://mths.be/codepointat v0.2.0 by @mathias */\nif (!String.prototype.codePointAt) {\n\t(function() {\n\t\t'use strict'; // needed to support `apply`/`call` with `undefined`/`null`\n\t\tvar defineProperty = (function() {\n\t\t\t// IE 8 only supports `Object.defineProperty` on DOM elements\n\t\t\ttry {\n\t\t\t\tvar object = {};\n\t\t\t\tvar $defineProperty = Object.defineProperty;\n\t\t\t\tvar result = $defineProperty(object, object, object) && $defineProperty;\n\t\t\t} catch(error) {}\n\t\t\treturn result;\n\t\t}());\n\t\tvar codePointAt = function(position) {\n\t\t\tif (this == null) {\n\t\t\t\tthrow TypeError();\n\t\t\t}\n\t\t\tvar string = String(this);\n\t\t\tvar size = string.length;\n\t\t\t// `ToInteger`\n\t\t\tvar index = position ? Number(position) : 0;\n\t\t\tif (index != index) { // better `isNaN`\n\t\t\t\tindex = 0;\n\t\t\t}\n\t\t\t// Account for out-of-bounds indices:\n\t\t\tif (index < 0 || index >= size) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t\t// Get the first code unit\n\t\t\tvar first = string.charCodeAt(index);\n\t\t\tvar second;\n\t\t\tif ( // check if it’s the start of a surrogate pair\n\t\t\t\tfirst >= 0xD800 && first <= 0xDBFF && // high surrogate\n\t\t\t\tsize > index + 1 // there is a next code unit\n\t\t\t) {\n\t\t\t\tsecond = string.charCodeAt(index + 1);\n\t\t\t\tif (second >= 0xDC00 && second <= 0xDFFF) { // low surrogate\n\t\t\t\t\t// https://mathiasbynens.be/notes/javascript-encoding#surrogate-formulae\n\t\t\t\t\treturn (first - 0xD800) * 0x400 + second - 0xDC00 + 0x10000;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn first;\n\t\t};\n\t\tif (defineProperty) {\n\t\t\tdefineProperty(String.prototype, 'codePointAt', {\n\t\t\t\t'value': codePointAt,\n\t\t\t\t'configurable': true,\n\t\t\t\t'writable': true\n\t\t\t});\n\t\t} else {\n\t\t\tString.prototype.codePointAt = codePointAt;\n\t\t}\n\t}());\n}\n", "var TINF_OK = 0;\nvar TINF_DATA_ERROR = -3;\n\nfunction Tree() {\n  this.table = new Uint16Array(16);   /* table of code length counts */\n  this.trans = new Uint16Array(288);  /* code -> symbol translation table */\n}\n\nfunction Data(source, dest) {\n  this.source = source;\n  this.sourceIndex = 0;\n  this.tag = 0;\n  this.bitcount = 0;\n  \n  this.dest = dest;\n  this.destLen = 0;\n  \n  this.ltree = new Tree();  /* dynamic length/symbol tree */\n  this.dtree = new Tree();  /* dynamic distance tree */\n}\n\n/* --------------------------------------------------- *\n * -- uninitialized global data (static structures) -- *\n * --------------------------------------------------- */\n\nvar sltree = new Tree();\nvar sdtree = new Tree();\n\n/* extra bits and base tables for length codes */\nvar length_bits = new Uint8Array(30);\nvar length_base = new Uint16Array(30);\n\n/* extra bits and base tables for distance codes */\nvar dist_bits = new Uint8Array(30);\nvar dist_base = new Uint16Array(30);\n\n/* special ordering of code length codes */\nvar clcidx = new Uint8Array([\n  16, 17, 18, 0, 8, 7, 9, 6,\n  10, 5, 11, 4, 12, 3, 13, 2,\n  14, 1, 15\n]);\n\n/* used by tinf_decode_trees, avoids allocations every call */\nvar code_tree = new Tree();\nvar lengths = new Uint8Array(288 + 32);\n\n/* ----------------------- *\n * -- utility functions -- *\n * ----------------------- */\n\n/* build extra bits and base tables */\nfunction tinf_build_bits_base(bits, base, delta, first) {\n  var i, sum;\n\n  /* build bits table */\n  for (i = 0; i < delta; ++i) bits[i] = 0;\n  for (i = 0; i < 30 - delta; ++i) bits[i + delta] = i / delta | 0;\n\n  /* build base table */\n  for (sum = first, i = 0; i < 30; ++i) {\n    base[i] = sum;\n    sum += 1 << bits[i];\n  }\n}\n\n/* build the fixed huffman trees */\nfunction tinf_build_fixed_trees(lt, dt) {\n  var i;\n\n  /* build fixed length tree */\n  for (i = 0; i < 7; ++i) lt.table[i] = 0;\n\n  lt.table[7] = 24;\n  lt.table[8] = 152;\n  lt.table[9] = 112;\n\n  for (i = 0; i < 24; ++i) lt.trans[i] = 256 + i;\n  for (i = 0; i < 144; ++i) lt.trans[24 + i] = i;\n  for (i = 0; i < 8; ++i) lt.trans[24 + 144 + i] = 280 + i;\n  for (i = 0; i < 112; ++i) lt.trans[24 + 144 + 8 + i] = 144 + i;\n\n  /* build fixed distance tree */\n  for (i = 0; i < 5; ++i) dt.table[i] = 0;\n\n  dt.table[5] = 32;\n\n  for (i = 0; i < 32; ++i) dt.trans[i] = i;\n}\n\n/* given an array of code lengths, build a tree */\nvar offs = new Uint16Array(16);\n\nfunction tinf_build_tree(t, lengths, off, num) {\n  var i, sum;\n\n  /* clear code length count table */\n  for (i = 0; i < 16; ++i) t.table[i] = 0;\n\n  /* scan symbol lengths, and sum code length counts */\n  for (i = 0; i < num; ++i) t.table[lengths[off + i]]++;\n\n  t.table[0] = 0;\n\n  /* compute offset table for distribution sort */\n  for (sum = 0, i = 0; i < 16; ++i) {\n    offs[i] = sum;\n    sum += t.table[i];\n  }\n\n  /* create code->symbol translation table (symbols sorted by code) */\n  for (i = 0; i < num; ++i) {\n    if (lengths[off + i]) t.trans[offs[lengths[off + i]]++] = i;\n  }\n}\n\n/* ---------------------- *\n * -- decode functions -- *\n * ---------------------- */\n\n/* get one bit from source stream */\nfunction tinf_getbit(d) {\n  /* check if tag is empty */\n  if (!d.bitcount--) {\n    /* load next tag */\n    d.tag = d.source[d.sourceIndex++];\n    d.bitcount = 7;\n  }\n\n  /* shift bit out of tag */\n  var bit = d.tag & 1;\n  d.tag >>>= 1;\n\n  return bit;\n}\n\n/* read a num bit value from a stream and add base */\nfunction tinf_read_bits(d, num, base) {\n  if (!num)\n    return base;\n\n  while (d.bitcount < 24) {\n    d.tag |= d.source[d.sourceIndex++] << d.bitcount;\n    d.bitcount += 8;\n  }\n\n  var val = d.tag & (0xffff >>> (16 - num));\n  d.tag >>>= num;\n  d.bitcount -= num;\n  return val + base;\n}\n\n/* given a data stream and a tree, decode a symbol */\nfunction tinf_decode_symbol(d, t) {\n  while (d.bitcount < 24) {\n    d.tag |= d.source[d.sourceIndex++] << d.bitcount;\n    d.bitcount += 8;\n  }\n  \n  var sum = 0, cur = 0, len = 0;\n  var tag = d.tag;\n\n  /* get more bits while code value is above sum */\n  do {\n    cur = 2 * cur + (tag & 1);\n    tag >>>= 1;\n    ++len;\n\n    sum += t.table[len];\n    cur -= t.table[len];\n  } while (cur >= 0);\n  \n  d.tag = tag;\n  d.bitcount -= len;\n\n  return t.trans[sum + cur];\n}\n\n/* given a data stream, decode dynamic trees from it */\nfunction tinf_decode_trees(d, lt, dt) {\n  var hlit, hdist, hclen;\n  var i, num, length;\n\n  /* get 5 bits HLIT (257-286) */\n  hlit = tinf_read_bits(d, 5, 257);\n\n  /* get 5 bits HDIST (1-32) */\n  hdist = tinf_read_bits(d, 5, 1);\n\n  /* get 4 bits HCLEN (4-19) */\n  hclen = tinf_read_bits(d, 4, 4);\n\n  for (i = 0; i < 19; ++i) lengths[i] = 0;\n\n  /* read code lengths for code length alphabet */\n  for (i = 0; i < hclen; ++i) {\n    /* get 3 bits code length (0-7) */\n    var clen = tinf_read_bits(d, 3, 0);\n    lengths[clcidx[i]] = clen;\n  }\n\n  /* build code length tree */\n  tinf_build_tree(code_tree, lengths, 0, 19);\n\n  /* decode code lengths for the dynamic trees */\n  for (num = 0; num < hlit + hdist;) {\n    var sym = tinf_decode_symbol(d, code_tree);\n\n    switch (sym) {\n      case 16:\n        /* copy previous code length 3-6 times (read 2 bits) */\n        var prev = lengths[num - 1];\n        for (length = tinf_read_bits(d, 2, 3); length; --length) {\n          lengths[num++] = prev;\n        }\n        break;\n      case 17:\n        /* repeat code length 0 for 3-10 times (read 3 bits) */\n        for (length = tinf_read_bits(d, 3, 3); length; --length) {\n          lengths[num++] = 0;\n        }\n        break;\n      case 18:\n        /* repeat code length 0 for 11-138 times (read 7 bits) */\n        for (length = tinf_read_bits(d, 7, 11); length; --length) {\n          lengths[num++] = 0;\n        }\n        break;\n      default:\n        /* values 0-15 represent the actual code lengths */\n        lengths[num++] = sym;\n        break;\n    }\n  }\n\n  /* build dynamic trees */\n  tinf_build_tree(lt, lengths, 0, hlit);\n  tinf_build_tree(dt, lengths, hlit, hdist);\n}\n\n/* ----------------------------- *\n * -- block inflate functions -- *\n * ----------------------------- */\n\n/* given a stream and two trees, inflate a block of data */\nfunction tinf_inflate_block_data(d, lt, dt) {\n  while (1) {\n    var sym = tinf_decode_symbol(d, lt);\n\n    /* check for end of block */\n    if (sym === 256) {\n      return TINF_OK;\n    }\n\n    if (sym < 256) {\n      d.dest[d.destLen++] = sym;\n    } else {\n      var length, dist, offs;\n      var i;\n\n      sym -= 257;\n\n      /* possibly get more bits from length code */\n      length = tinf_read_bits(d, length_bits[sym], length_base[sym]);\n\n      dist = tinf_decode_symbol(d, dt);\n\n      /* possibly get more bits from distance code */\n      offs = d.destLen - tinf_read_bits(d, dist_bits[dist], dist_base[dist]);\n\n      /* copy match */\n      for (i = offs; i < offs + length; ++i) {\n        d.dest[d.destLen++] = d.dest[i];\n      }\n    }\n  }\n}\n\n/* inflate an uncompressed block of data */\nfunction tinf_inflate_uncompressed_block(d) {\n  var length, invlength;\n  var i;\n  \n  /* unread from bitbuffer */\n  while (d.bitcount > 8) {\n    d.sourceIndex--;\n    d.bitcount -= 8;\n  }\n\n  /* get length */\n  length = d.source[d.sourceIndex + 1];\n  length = 256 * length + d.source[d.sourceIndex];\n\n  /* get one's complement of length */\n  invlength = d.source[d.sourceIndex + 3];\n  invlength = 256 * invlength + d.source[d.sourceIndex + 2];\n\n  /* check length */\n  if (length !== (~invlength & 0x0000ffff))\n    return TINF_DATA_ERROR;\n\n  d.sourceIndex += 4;\n\n  /* copy block */\n  for (i = length; i; --i)\n    d.dest[d.destLen++] = d.source[d.sourceIndex++];\n\n  /* make sure we start next block on a byte boundary */\n  d.bitcount = 0;\n\n  return TINF_OK;\n}\n\n/* inflate stream from source to dest */\nfunction tinf_uncompress(source, dest) {\n  var d = new Data(source, dest);\n  var bfinal, btype, res;\n\n  do {\n    /* read final block flag */\n    bfinal = tinf_getbit(d);\n\n    /* read block type (2 bits) */\n    btype = tinf_read_bits(d, 2, 0);\n\n    /* decompress block */\n    switch (btype) {\n      case 0:\n        /* decompress uncompressed block */\n        res = tinf_inflate_uncompressed_block(d);\n        break;\n      case 1:\n        /* decompress block with fixed huffman trees */\n        res = tinf_inflate_block_data(d, sltree, sdtree);\n        break;\n      case 2:\n        /* decompress block with dynamic huffman trees */\n        tinf_decode_trees(d, d.ltree, d.dtree);\n        res = tinf_inflate_block_data(d, d.ltree, d.dtree);\n        break;\n      default:\n        res = TINF_DATA_ERROR;\n    }\n\n    if (res !== TINF_OK)\n      throw new Error('Data error');\n\n  } while (!bfinal);\n\n  if (d.destLen < d.dest.length) {\n    if (typeof d.dest.slice === 'function')\n      return d.dest.slice(0, d.destLen);\n    else\n      return d.dest.subarray(0, d.destLen);\n  }\n  \n  return d.dest;\n}\n\n/* -------------------- *\n * -- initialization -- *\n * -------------------- */\n\n/* build fixed huffman trees */\ntinf_build_fixed_trees(sltree, sdtree);\n\n/* build extra bits and base tables */\ntinf_build_bits_base(length_bits, length_base, 4, 3);\ntinf_build_bits_base(dist_bits, dist_base, 2, 1);\n\n/* fix a special case */\nlength_bits[28] = 0;\nlength_base[28] = 258;\n\nmodule.exports = tinf_uncompress;\n", "// The Bounding Box object\n\nfunction derive(v0, v1, v2, v3, t) {\n    return Math.pow(1 - t, 3) * v0 +\n        3 * Math.pow(1 - t, 2) * t * v1 +\n        3 * (1 - t) * Math.pow(t, 2) * v2 +\n        Math.pow(t, 3) * v3;\n}\n/**\n * A bounding box is an enclosing box that describes the smallest measure within which all the points lie.\n * It is used to calculate the bounding box of a glyph or text path.\n *\n * On initialization, x1/y1/x2/y2 will be NaN. Check if the bounding box is empty using `isEmpty()`.\n *\n * @exports opentype.BoundingBox\n * @class\n * @constructor\n */\nfunction BoundingBox() {\n    this.x1 = Number.NaN;\n    this.y1 = Number.NaN;\n    this.x2 = Number.NaN;\n    this.y2 = Number.NaN;\n}\n\n/**\n * Returns true if the bounding box is empty, that is, no points have been added to the box yet.\n */\nBoundingBox.prototype.isEmpty = function() {\n    return isNaN(this.x1) || isNaN(this.y1) || isNaN(this.x2) || isNaN(this.y2);\n};\n\n/**\n * Add the point to the bounding box.\n * The x1/y1/x2/y2 coordinates of the bounding box will now encompass the given point.\n * @param {number} x - The X coordinate of the point.\n * @param {number} y - The Y coordinate of the point.\n */\nBoundingBox.prototype.addPoint = function(x, y) {\n    if (typeof x === 'number') {\n        if (isNaN(this.x1) || isNaN(this.x2)) {\n            this.x1 = x;\n            this.x2 = x;\n        }\n        if (x < this.x1) {\n            this.x1 = x;\n        }\n        if (x > this.x2) {\n            this.x2 = x;\n        }\n    }\n    if (typeof y === 'number') {\n        if (isNaN(this.y1) || isNaN(this.y2)) {\n            this.y1 = y;\n            this.y2 = y;\n        }\n        if (y < this.y1) {\n            this.y1 = y;\n        }\n        if (y > this.y2) {\n            this.y2 = y;\n        }\n    }\n};\n\n/**\n * Add a X coordinate to the bounding box.\n * This extends the bounding box to include the X coordinate.\n * This function is used internally inside of addBezier.\n * @param {number} x - The X coordinate of the point.\n */\nBoundingBox.prototype.addX = function(x) {\n    this.addPoint(x, null);\n};\n\n/**\n * Add a Y coordinate to the bounding box.\n * This extends the bounding box to include the Y coordinate.\n * This function is used internally inside of addBezier.\n * @param {number} y - The Y coordinate of the point.\n */\nBoundingBox.prototype.addY = function(y) {\n    this.addPoint(null, y);\n};\n\n/**\n * Add a Bézier curve to the bounding box.\n * This extends the bounding box to include the entire Bézier.\n * @param {number} x0 - The starting X coordinate.\n * @param {number} y0 - The starting Y coordinate.\n * @param {number} x1 - The X coordinate of the first control point.\n * @param {number} y1 - The Y coordinate of the first control point.\n * @param {number} x2 - The X coordinate of the second control point.\n * @param {number} y2 - The Y coordinate of the second control point.\n * @param {number} x - The ending X coordinate.\n * @param {number} y - The ending Y coordinate.\n */\nBoundingBox.prototype.addBezier = function(x0, y0, x1, y1, x2, y2, x, y) {\n    // This code is based on http://nishiohirokazu.blogspot.com/2009/06/how-to-calculate-bezier-curves-bounding.html\n    // and https://github.com/icons8/svg-path-bounding-box\n\n    const p0 = [x0, y0];\n    const p1 = [x1, y1];\n    const p2 = [x2, y2];\n    const p3 = [x, y];\n\n    this.addPoint(x0, y0);\n    this.addPoint(x, y);\n\n    for (let i = 0; i <= 1; i++) {\n        const b = 6 * p0[i] - 12 * p1[i] + 6 * p2[i];\n        const a = -3 * p0[i] + 9 * p1[i] - 9 * p2[i] + 3 * p3[i];\n        const c = 3 * p1[i] - 3 * p0[i];\n\n        if (a === 0) {\n            if (b === 0) continue;\n            const t = -c / b;\n            if (0 < t && t < 1) {\n                if (i === 0) this.addX(derive(p0[i], p1[i], p2[i], p3[i], t));\n                if (i === 1) this.addY(derive(p0[i], p1[i], p2[i], p3[i], t));\n            }\n            continue;\n        }\n\n        const b2ac = Math.pow(b, 2) - 4 * c * a;\n        if (b2ac < 0) continue;\n        const t1 = (-b + Math.sqrt(b2ac)) / (2 * a);\n        if (0 < t1 && t1 < 1) {\n            if (i === 0) this.addX(derive(p0[i], p1[i], p2[i], p3[i], t1));\n            if (i === 1) this.addY(derive(p0[i], p1[i], p2[i], p3[i], t1));\n        }\n        const t2 = (-b - Math.sqrt(b2ac)) / (2 * a);\n        if (0 < t2 && t2 < 1) {\n            if (i === 0) this.addX(derive(p0[i], p1[i], p2[i], p3[i], t2));\n            if (i === 1) this.addY(derive(p0[i], p1[i], p2[i], p3[i], t2));\n        }\n    }\n};\n\n/**\n * Add a quadratic curve to the bounding box.\n * This extends the bounding box to include the entire quadratic curve.\n * @param {number} x0 - The starting X coordinate.\n * @param {number} y0 - The starting Y coordinate.\n * @param {number} x1 - The X coordinate of the control point.\n * @param {number} y1 - The Y coordinate of the control point.\n * @param {number} x - The ending X coordinate.\n * @param {number} y - The ending Y coordinate.\n */\nBoundingBox.prototype.addQuad = function(x0, y0, x1, y1, x, y) {\n    const cp1x = x0 + 2 / 3 * (x1 - x0);\n    const cp1y = y0 + 2 / 3 * (y1 - y0);\n    const cp2x = cp1x + 1 / 3 * (x - x0);\n    const cp2y = cp1y + 1 / 3 * (y - y0);\n    this.addBezier(x0, y0, cp1x, cp1y, cp2x, cp2y, x, y);\n};\n\nexport default BoundingBox;\n", "// Geometric objects\n\nimport BoundingBox from './bbox';\n\n/**\n * A bézier path containing a set of path commands similar to a SVG path.\n * Paths can be drawn on a context using `draw`.\n * @exports opentype.Path\n * @class\n * @constructor\n */\nfunction Path() {\n    this.commands = [];\n    this.fill = 'black';\n    this.stroke = null;\n    this.strokeWidth = 1;\n}\n\n/**\n * @param  {number} x\n * @param  {number} y\n */\nPath.prototype.moveTo = function(x, y) {\n    this.commands.push({\n        type: 'M',\n        x: x,\n        y: y\n    });\n};\n\n/**\n * @param  {number} x\n * @param  {number} y\n */\nPath.prototype.lineTo = function(x, y) {\n    this.commands.push({\n        type: 'L',\n        x: x,\n        y: y\n    });\n};\n\n/**\n * Draws cubic curve\n * @function\n * curveTo\n * @memberof opentype.Path.prototype\n * @param  {number} x1 - x of control 1\n * @param  {number} y1 - y of control 1\n * @param  {number} x2 - x of control 2\n * @param  {number} y2 - y of control 2\n * @param  {number} x - x of path point\n * @param  {number} y - y of path point\n */\n\n/**\n * Draws cubic curve\n * @function\n * bezierCurveTo\n * @memberof opentype.Path.prototype\n * @param  {number} x1 - x of control 1\n * @param  {number} y1 - y of control 1\n * @param  {number} x2 - x of control 2\n * @param  {number} y2 - y of control 2\n * @param  {number} x - x of path point\n * @param  {number} y - y of path point\n * @see curveTo\n */\nPath.prototype.curveTo = Path.prototype.bezierCurveTo = function(x1, y1, x2, y2, x, y) {\n    this.commands.push({\n        type: 'C',\n        x1: x1,\n        y1: y1,\n        x2: x2,\n        y2: y2,\n        x: x,\n        y: y\n    });\n};\n\n/**\n * Draws quadratic curve\n * @function\n * quadraticCurveTo\n * @memberof opentype.Path.prototype\n * @param  {number} x1 - x of control\n * @param  {number} y1 - y of control\n * @param  {number} x - x of path point\n * @param  {number} y - y of path point\n */\n\n/**\n * Draws quadratic curve\n * @function\n * quadTo\n * @memberof opentype.Path.prototype\n * @param  {number} x1 - x of control\n * @param  {number} y1 - y of control\n * @param  {number} x - x of path point\n * @param  {number} y - y of path point\n */\nPath.prototype.quadTo = Path.prototype.quadraticCurveTo = function(x1, y1, x, y) {\n    this.commands.push({\n        type: 'Q',\n        x1: x1,\n        y1: y1,\n        x: x,\n        y: y\n    });\n};\n\n/**\n * Closes the path\n * @function closePath\n * @memberof opentype.Path.prototype\n */\n\n/**\n * Close the path\n * @function close\n * @memberof opentype.Path.prototype\n */\nPath.prototype.close = Path.prototype.closePath = function() {\n    this.commands.push({\n        type: 'Z'\n    });\n};\n\n/**\n * Add the given path or list of commands to the commands of this path.\n * @param  {Array} pathOrCommands - another opentype.Path, an opentype.BoundingBox, or an array of commands.\n */\nPath.prototype.extend = function(pathOrCommands) {\n    if (pathOrCommands.commands) {\n        pathOrCommands = pathOrCommands.commands;\n    } else if (pathOrCommands instanceof BoundingBox) {\n        const box = pathOrCommands;\n        this.moveTo(box.x1, box.y1);\n        this.lineTo(box.x2, box.y1);\n        this.lineTo(box.x2, box.y2);\n        this.lineTo(box.x1, box.y2);\n        this.close();\n        return;\n    }\n\n    Array.prototype.push.apply(this.commands, pathOrCommands);\n};\n\n/**\n * Calculate the bounding box of the path.\n * @returns {opentype.BoundingBox}\n */\nPath.prototype.getBoundingBox = function() {\n    const box = new BoundingBox();\n\n    let startX = 0;\n    let startY = 0;\n    let prevX = 0;\n    let prevY = 0;\n    for (let i = 0; i < this.commands.length; i++) {\n        const cmd = this.commands[i];\n        switch (cmd.type) {\n            case 'M':\n                box.addPoint(cmd.x, cmd.y);\n                startX = prevX = cmd.x;\n                startY = prevY = cmd.y;\n                break;\n            case 'L':\n                box.addPoint(cmd.x, cmd.y);\n                prevX = cmd.x;\n                prevY = cmd.y;\n                break;\n            case 'Q':\n                box.addQuad(prevX, prevY, cmd.x1, cmd.y1, cmd.x, cmd.y);\n                prevX = cmd.x;\n                prevY = cmd.y;\n                break;\n            case 'C':\n                box.addBezier(prevX, prevY, cmd.x1, cmd.y1, cmd.x2, cmd.y2, cmd.x, cmd.y);\n                prevX = cmd.x;\n                prevY = cmd.y;\n                break;\n            case 'Z':\n                prevX = startX;\n                prevY = startY;\n                break;\n            default:\n                throw new Error('Unexpected path command ' + cmd.type);\n        }\n    }\n    if (box.isEmpty()) {\n        box.addPoint(0, 0);\n    }\n    return box;\n};\n\n/**\n * Draw the path to a 2D context.\n * @param {CanvasRenderingContext2D} ctx - A 2D drawing context.\n */\nPath.prototype.draw = function(ctx) {\n    ctx.beginPath();\n    for (let i = 0; i < this.commands.length; i += 1) {\n        const cmd = this.commands[i];\n        if (cmd.type === 'M') {\n            ctx.moveTo(cmd.x, cmd.y);\n        } else if (cmd.type === 'L') {\n            ctx.lineTo(cmd.x, cmd.y);\n        } else if (cmd.type === 'C') {\n            ctx.bezierCurveTo(cmd.x1, cmd.y1, cmd.x2, cmd.y2, cmd.x, cmd.y);\n        } else if (cmd.type === 'Q') {\n            ctx.quadraticCurveTo(cmd.x1, cmd.y1, cmd.x, cmd.y);\n        } else if (cmd.type === 'Z') {\n            ctx.closePath();\n        }\n    }\n\n    if (this.fill) {\n        ctx.fillStyle = this.fill;\n        ctx.fill();\n    }\n\n    if (this.stroke) {\n        ctx.strokeStyle = this.stroke;\n        ctx.lineWidth = this.strokeWidth;\n        ctx.stroke();\n    }\n};\n\n/**\n * Convert the Path to a string of path data instructions\n * See http://www.w3.org/TR/SVG/paths.html#PathData\n * @param  {number} [decimalPlaces=2] - The amount of decimal places for floating-point values\n * @return {string}\n */\nPath.prototype.toPathData = function(decimalPlaces) {\n    decimalPlaces = decimalPlaces !== undefined ? decimalPlaces : 2;\n\n    function floatToString(v) {\n        if (Math.round(v) === v) {\n            return '' + Math.round(v);\n        } else {\n            return v.toFixed(decimalPlaces);\n        }\n    }\n\n    function packValues() {\n        let s = '';\n        for (let i = 0; i < arguments.length; i += 1) {\n            const v = arguments[i];\n            if (v >= 0 && i > 0) {\n                s += ' ';\n            }\n\n            s += floatToString(v);\n        }\n\n        return s;\n    }\n\n    let d = '';\n    for (let i = 0; i < this.commands.length; i += 1) {\n        const cmd = this.commands[i];\n        if (cmd.type === 'M') {\n            d += 'M' + packValues(cmd.x, cmd.y);\n        } else if (cmd.type === 'L') {\n            d += 'L' + packValues(cmd.x, cmd.y);\n        } else if (cmd.type === 'C') {\n            d += 'C' + packValues(cmd.x1, cmd.y1, cmd.x2, cmd.y2, cmd.x, cmd.y);\n        } else if (cmd.type === 'Q') {\n            d += 'Q' + packValues(cmd.x1, cmd.y1, cmd.x, cmd.y);\n        } else if (cmd.type === 'Z') {\n            d += 'Z';\n        }\n    }\n\n    return d;\n};\n\n/**\n * Convert the path to an SVG <path> element, as a string.\n * @param  {number} [decimalPlaces=2] - The amount of decimal places for floating-point values\n * @return {string}\n */\nPath.prototype.toSVG = function(decimalPlaces) {\n    let svg = '<path d=\"';\n    svg += this.toPathData(decimalPlaces);\n    svg += '\"';\n    if (this.fill && this.fill !== 'black') {\n        if (this.fill === null) {\n            svg += ' fill=\"none\"';\n        } else {\n            svg += ' fill=\"' + this.fill + '\"';\n        }\n    }\n\n    if (this.stroke) {\n        svg += ' stroke=\"' + this.stroke + '\" stroke-width=\"' + this.strokeWidth + '\"';\n    }\n\n    svg += '/>';\n    return svg;\n};\n\n/**\n * Convert the path to a DOM element.\n * @param  {number} [decimalPlaces=2] - The amount of decimal places for floating-point values\n * @return {SVGPathElement}\n */\nPath.prototype.toDOMElement = function(decimalPlaces) {\n    const temporaryPath = this.toPathData(decimalPlaces);\n    const newPath = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n\n    newPath.setAttribute('d', temporaryPath);\n\n    return newPath;\n};\n\nexport default Path;\n", "// Run-time checking of preconditions.\n\nfunction fail(message) {\n    throw new Error(message);\n}\n\n// Precondition function that checks if the given predicate is true.\n// If not, it will throw an error.\nfunction argument(predicate, message) {\n    if (!predicate) {\n        fail(message);\n    }\n}\n\nexport { fail, argument, argument as assert };\nexport default { fail, argument, assert: argument };\n", "// Data types used in the OpenType font file.\n// All OpenType fonts use Motorola-style byte ordering (Big Endian)\n\nimport check from './check';\n\nconst LIMIT16 = 32768; // The limit at which a 16-bit number switches signs == 2^15\nconst LIMIT32 = 2147483648; // The limit at which a 32-bit number switches signs == 2 ^ 31\n\n/**\n * @exports opentype.decode\n * @class\n */\nconst decode = {};\n/**\n * @exports opentype.encode\n * @class\n */\nconst encode = {};\n/**\n * @exports opentype.sizeOf\n * @class\n */\nconst sizeOf = {};\n\n// Return a function that always returns the same value.\nfunction constant(v) {\n    return function() {\n        return v;\n    };\n}\n\n// OpenType data types //////////////////////////////////////////////////////\n\n/**\n * Convert an 8-bit unsigned integer to a list of 1 byte.\n * @param {number}\n * @returns {Array}\n */\nencode.BYTE = function(v) {\n    check.argument(v >= 0 && v <= 255, 'Byte value should be between 0 and 255.');\n    return [v];\n};\n/**\n * @constant\n * @type {number}\n */\nsizeOf.BYTE = constant(1);\n\n/**\n * Convert a 8-bit signed integer to a list of 1 byte.\n * @param {string}\n * @returns {Array}\n */\nencode.CHAR = function(v) {\n    return [v.charCodeAt(0)];\n};\n\n/**\n * @constant\n * @type {number}\n */\nsizeOf.CHAR = constant(1);\n\n/**\n * Convert an ASCII string to a list of bytes.\n * @param {string}\n * @returns {Array}\n */\nencode.CHARARRAY = function(v) {\n    if (typeof v === 'undefined') {\n        v = '';\n        console.warn('Undefined CHARARRAY encountered and treated as an empty string. This is probably caused by a missing glyph name.');\n    }\n    const b = [];\n    for (let i = 0; i < v.length; i += 1) {\n        b[i] = v.charCodeAt(i);\n    }\n\n    return b;\n};\n\n/**\n * @param {Array}\n * @returns {number}\n */\nsizeOf.CHARARRAY = function(v) {\n    if (typeof v === 'undefined') {\n        return 0;\n    }\n    return v.length;\n};\n\n/**\n * Convert a 16-bit unsigned integer to a list of 2 bytes.\n * @param {number}\n * @returns {Array}\n */\nencode.USHORT = function(v) {\n    return [(v >> 8) & 0xFF, v & 0xFF];\n};\n\n/**\n * @constant\n * @type {number}\n */\nsizeOf.USHORT = constant(2);\n\n/**\n * Convert a 16-bit signed integer to a list of 2 bytes.\n * @param {number}\n * @returns {Array}\n */\nencode.SHORT = function(v) {\n    // Two's complement\n    if (v >= LIMIT16) {\n        v = -(2 * LIMIT16 - v);\n    }\n\n    return [(v >> 8) & 0xFF, v & 0xFF];\n};\n\n/**\n * @constant\n * @type {number}\n */\nsizeOf.SHORT = constant(2);\n\n/**\n * Convert a 24-bit unsigned integer to a list of 3 bytes.\n * @param {number}\n * @returns {Array}\n */\nencode.UINT24 = function(v) {\n    return [(v >> 16) & 0xFF, (v >> 8) & 0xFF, v & 0xFF];\n};\n\n/**\n * @constant\n * @type {number}\n */\nsizeOf.UINT24 = constant(3);\n\n/**\n * Convert a 32-bit unsigned integer to a list of 4 bytes.\n * @param {number}\n * @returns {Array}\n */\nencode.ULONG = function(v) {\n    return [(v >> 24) & 0xFF, (v >> 16) & 0xFF, (v >> 8) & 0xFF, v & 0xFF];\n};\n\n/**\n * @constant\n * @type {number}\n */\nsizeOf.ULONG = constant(4);\n\n/**\n * Convert a 32-bit unsigned integer to a list of 4 bytes.\n * @param {number}\n * @returns {Array}\n */\nencode.LONG = function(v) {\n    // Two's complement\n    if (v >= LIMIT32) {\n        v = -(2 * LIMIT32 - v);\n    }\n\n    return [(v >> 24) & 0xFF, (v >> 16) & 0xFF, (v >> 8) & 0xFF, v & 0xFF];\n};\n\n/**\n * @constant\n * @type {number}\n */\nsizeOf.LONG = constant(4);\n\nencode.FIXED = encode.ULONG;\nsizeOf.FIXED = sizeOf.ULONG;\n\nencode.FWORD = encode.SHORT;\nsizeOf.FWORD = sizeOf.SHORT;\n\nencode.UFWORD = encode.USHORT;\nsizeOf.UFWORD = sizeOf.USHORT;\n\n/**\n * Convert a 32-bit Apple Mac timestamp integer to a list of 8 bytes, 64-bit timestamp.\n * @param {number}\n * @returns {Array}\n */\nencode.LONGDATETIME = function(v) {\n    return [0, 0, 0, 0, (v >> 24) & 0xFF, (v >> 16) & 0xFF, (v >> 8) & 0xFF, v & 0xFF];\n};\n\n/**\n * @constant\n * @type {number}\n */\nsizeOf.LONGDATETIME = constant(8);\n\n/**\n * Convert a 4-char tag to a list of 4 bytes.\n * @param {string}\n * @returns {Array}\n */\nencode.TAG = function(v) {\n    check.argument(v.length === 4, 'Tag should be exactly 4 ASCII characters.');\n    return [v.charCodeAt(0),\n            v.charCodeAt(1),\n            v.charCodeAt(2),\n            v.charCodeAt(3)];\n};\n\n/**\n * @constant\n * @type {number}\n */\nsizeOf.TAG = constant(4);\n\n// CFF data types ///////////////////////////////////////////////////////////\n\nencode.Card8 = encode.BYTE;\nsizeOf.Card8 = sizeOf.BYTE;\n\nencode.Card16 = encode.USHORT;\nsizeOf.Card16 = sizeOf.USHORT;\n\nencode.OffSize = encode.BYTE;\nsizeOf.OffSize = sizeOf.BYTE;\n\nencode.SID = encode.USHORT;\nsizeOf.SID = sizeOf.USHORT;\n\n// Convert a numeric operand or charstring number to a variable-size list of bytes.\n/**\n * Convert a numeric operand or charstring number to a variable-size list of bytes.\n * @param {number}\n * @returns {Array}\n */\nencode.NUMBER = function(v) {\n    if (v >= -107 && v <= 107) {\n        return [v + 139];\n    } else if (v >= 108 && v <= 1131) {\n        v = v - 108;\n        return [(v >> 8) + 247, v & 0xFF];\n    } else if (v >= -1131 && v <= -108) {\n        v = -v - 108;\n        return [(v >> 8) + 251, v & 0xFF];\n    } else if (v >= -32768 && v <= 32767) {\n        return encode.NUMBER16(v);\n    } else {\n        return encode.NUMBER32(v);\n    }\n};\n\n/**\n * @param {number}\n * @returns {number}\n */\nsizeOf.NUMBER = function(v) {\n    return encode.NUMBER(v).length;\n};\n\n/**\n * Convert a signed number between -32768 and +32767 to a three-byte value.\n * This ensures we always use three bytes, but is not the most compact format.\n * @param {number}\n * @returns {Array}\n */\nencode.NUMBER16 = function(v) {\n    return [28, (v >> 8) & 0xFF, v & 0xFF];\n};\n\n/**\n * @constant\n * @type {number}\n */\nsizeOf.NUMBER16 = constant(3);\n\n/**\n * Convert a signed number between -(2^31) and +(2^31-1) to a five-byte value.\n * This is useful if you want to be sure you always use four bytes,\n * at the expense of wasting a few bytes for smaller numbers.\n * @param {number}\n * @returns {Array}\n */\nencode.NUMBER32 = function(v) {\n    return [29, (v >> 24) & 0xFF, (v >> 16) & 0xFF, (v >> 8) & 0xFF, v & 0xFF];\n};\n\n/**\n * @constant\n * @type {number}\n */\nsizeOf.NUMBER32 = constant(5);\n\n/**\n * @param {number}\n * @returns {Array}\n */\nencode.REAL = function(v) {\n    let value = v.toString();\n\n    // Some numbers use an epsilon to encode the value. (e.g. JavaScript will store 0.0000001 as 1e-7)\n    // This code converts it back to a number without the epsilon.\n    const m = /\\.(\\d*?)(?:9{5,20}|0{5,20})\\d{0,2}(?:e(.+)|$)/.exec(value);\n    if (m) {\n        const epsilon = parseFloat('1e' + ((m[2] ? +m[2] : 0) + m[1].length));\n        value = (Math.round(v * epsilon) / epsilon).toString();\n    }\n\n    let nibbles = '';\n    for (let i = 0, ii = value.length; i < ii; i += 1) {\n        const c = value[i];\n        if (c === 'e') {\n            nibbles += value[++i] === '-' ? 'c' : 'b';\n        } else if (c === '.') {\n            nibbles += 'a';\n        } else if (c === '-') {\n            nibbles += 'e';\n        } else {\n            nibbles += c;\n        }\n    }\n\n    nibbles += (nibbles.length & 1) ? 'f' : 'ff';\n    const out = [30];\n    for (let i = 0, ii = nibbles.length; i < ii; i += 2) {\n        out.push(parseInt(nibbles.substr(i, 2), 16));\n    }\n\n    return out;\n};\n\n/**\n * @param {number}\n * @returns {number}\n */\nsizeOf.REAL = function(v) {\n    return encode.REAL(v).length;\n};\n\nencode.NAME = encode.CHARARRAY;\nsizeOf.NAME = sizeOf.CHARARRAY;\n\nencode.STRING = encode.CHARARRAY;\nsizeOf.STRING = sizeOf.CHARARRAY;\n\n/**\n * @param {DataView} data\n * @param {number} offset\n * @param {number} numBytes\n * @returns {string}\n */\ndecode.UTF8 = function(data, offset, numBytes) {\n    const codePoints = [];\n    const numChars = numBytes;\n    for (let j = 0; j < numChars; j++, offset += 1) {\n        codePoints[j] = data.getUint8(offset);\n    }\n\n    return String.fromCharCode.apply(null, codePoints);\n};\n\n/**\n * @param {DataView} data\n * @param {number} offset\n * @param {number} numBytes\n * @returns {string}\n */\ndecode.UTF16 = function(data, offset, numBytes) {\n    const codePoints = [];\n    const numChars = numBytes / 2;\n    for (let j = 0; j < numChars; j++, offset += 2) {\n        codePoints[j] = data.getUint16(offset);\n    }\n\n    return String.fromCharCode.apply(null, codePoints);\n};\n\n/**\n * Convert a JavaScript string to UTF16-BE.\n * @param {string}\n * @returns {Array}\n */\nencode.UTF16 = function(v) {\n    const b = [];\n    for (let i = 0; i < v.length; i += 1) {\n        const codepoint = v.charCodeAt(i);\n        b[b.length] = (codepoint >> 8) & 0xFF;\n        b[b.length] = codepoint & 0xFF;\n    }\n\n    return b;\n};\n\n/**\n * @param {string}\n * @returns {number}\n */\nsizeOf.UTF16 = function(v) {\n    return v.length * 2;\n};\n\n// Data for converting old eight-bit Macintosh encodings to Unicode.\n// This representation is optimized for decoding; encoding is slower\n// and needs more memory. The assumption is that all opentype.js users\n// want to open fonts, but saving a font will be comparatively rare\n// so it can be more expensive. Keyed by IANA character set name.\n//\n// Python script for generating these strings:\n//\n//     s = u''.join([chr(c).decode('mac_greek') for c in range(128, 256)])\n//     print(s.encode('utf-8'))\n/**\n * @private\n */\nconst eightBitMacEncodings = {\n    'x-mac-croatian':  // Python: 'mac_croatian'\n    'ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®Š™´¨≠ŽØ∞±≤≥∆µ∂∑∏š∫ªºΩžø' +\n    '¿¡¬√ƒ≈Ć«Č… ÀÃÕŒœĐ—“”‘’÷◊©⁄€‹›Æ»–·‚„‰ÂćÁčÈÍÎÏÌÓÔđÒÚÛÙıˆ˜¯πË˚¸Êæˇ',\n    'x-mac-cyrillic':  // Python: 'mac_cyrillic'\n    'АБВГДЕЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯ†°Ґ£§•¶І®©™Ђђ≠Ѓѓ∞±≤≥іµґЈЄєЇїЉљЊњ' +\n    'јЅ¬√ƒ≈∆«»… ЋћЌќѕ–—“”‘’÷„ЎўЏџ№Ёёяабвгдежзийклмнопрстуфхцчшщъыьэю',\n    'x-mac-gaelic': // http://unicode.org/Public/MAPPINGS/VENDORS/APPLE/GAELIC.TXT\n    'ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØḂ±≤≥ḃĊċḊḋḞḟĠġṀæø' +\n    'ṁṖṗɼƒſṠ«»… ÀÃÕŒœ–—“”‘’ṡẛÿŸṪ€‹›Ŷŷṫ·Ỳỳ⁊ÂÊÁËÈÍÎÏÌÓÔ♣ÒÚÛÙıÝýŴŵẄẅẀẁẂẃ',\n    'x-mac-greek':  // Python: 'mac_greek'\n    'Ä¹²É³ÖÜ΅àâä΄¨çéèêë£™îï•½‰ôö¦€ùûü†ΓΔΘΛΞΠß®©ΣΪ§≠°·Α±≤≥¥ΒΕΖΗΙΚΜΦΫΨΩ' +\n    'άΝ¬ΟΡ≈Τ«»… ΥΧΆΈœ–―“”‘’÷ΉΊΌΎέήίόΏύαβψδεφγηιξκλμνοπώρστθωςχυζϊϋΐΰ\\u00AD',\n    'x-mac-icelandic':  // Python: 'mac_iceland'\n    'ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûüÝ°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø' +\n    '¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄€ÐðÞþý·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ',\n    'x-mac-inuit': // http://unicode.org/Public/MAPPINGS/VENDORS/APPLE/INUIT.TXT\n    'ᐃᐄᐅᐆᐊᐋᐱᐲᐳᐴᐸᐹᑉᑎᑏᑐᑑᑕᑖᑦᑭᑮᑯᑰᑲᑳᒃᒋᒌᒍᒎᒐᒑ°ᒡᒥᒦ•¶ᒧ®©™ᒨᒪᒫᒻᓂᓃᓄᓅᓇᓈᓐᓯᓰᓱᓲᓴᓵᔅᓕᓖᓗ' +\n    'ᓘᓚᓛᓪᔨᔩᔪᔫᔭ… ᔮᔾᕕᕖᕗ–—“”‘’ᕘᕙᕚᕝᕆᕇᕈᕉᕋᕌᕐᕿᖀᖁᖂᖃᖄᖅᖏᖐᖑᖒᖓᖔᖕᙱᙲᙳᙴᙵᙶᖖᖠᖡᖢᖣᖤᖥᖦᕼŁł',\n    'x-mac-ce':  // Python: 'mac_latin2'\n    'ÄĀāÉĄÖÜáąČäčĆćéŹźĎíďĒēĖóėôöõúĚěü†°Ę£§•¶ß®©™ę¨≠ģĮįĪ≤≥īĶ∂∑łĻļĽľĹĺŅ' +\n    'ņŃ¬√ńŇ∆«»… ňŐÕőŌ–—“”‘’÷◊ōŔŕŘ‹›řŖŗŠ‚„šŚśÁŤťÍŽžŪÓÔūŮÚůŰűŲųÝýķŻŁżĢˇ',\n    macintosh:  // Python: 'mac_roman'\n    'ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø' +\n    '¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄€‹›ﬁﬂ‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ',\n    'x-mac-romanian':  // Python: 'mac_romanian'\n    'ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ĂȘ∞±≤≥¥µ∂∑∏π∫ªºΩăș' +\n    '¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄€‹›Țț‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ',\n    'x-mac-turkish':  // Python: 'mac_turkish'\n    'ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø' +\n    '¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸĞğİıŞş‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙˆ˜¯˘˙˚¸˝˛ˇ'\n};\n\n/**\n * Decodes an old-style Macintosh string. Returns either a Unicode JavaScript\n * string, or 'undefined' if the encoding is unsupported. For example, we do\n * not support Chinese, Japanese or Korean because these would need large\n * mapping tables.\n * @param {DataView} dataView\n * @param {number} offset\n * @param {number} dataLength\n * @param {string} encoding\n * @returns {string}\n */\ndecode.MACSTRING = function(dataView, offset, dataLength, encoding) {\n    const table = eightBitMacEncodings[encoding];\n    if (table === undefined) {\n        return undefined;\n    }\n\n    let result = '';\n    for (let i = 0; i < dataLength; i++) {\n        const c = dataView.getUint8(offset + i);\n        // In all eight-bit Mac encodings, the characters 0x00..0x7F are\n        // mapped to U+0000..U+007F; we only need to look up the others.\n        if (c <= 0x7F) {\n            result += String.fromCharCode(c);\n        } else {\n            result += table[c & 0x7F];\n        }\n    }\n\n    return result;\n};\n\n// Helper function for encode.MACSTRING. Returns a dictionary for mapping\n// Unicode character codes to their 8-bit MacOS equivalent. This table\n// is not exactly a super cheap data structure, but we do not care because\n// encoding Macintosh strings is only rarely needed in typical applications.\nconst macEncodingTableCache = typeof WeakMap === 'function' && new WeakMap();\nlet macEncodingCacheKeys;\nconst getMacEncodingTable = function (encoding) {\n    // Since we use encoding as a cache key for WeakMap, it has to be\n    // a String object and not a literal. And at least on NodeJS 2.10.1,\n    // WeakMap requires that the same String instance is passed for cache hits.\n    if (!macEncodingCacheKeys) {\n        macEncodingCacheKeys = {};\n        for (let e in eightBitMacEncodings) {\n            /*jshint -W053 */  // Suppress \"Do not use String as a constructor.\"\n            macEncodingCacheKeys[e] = new String(e);\n        }\n    }\n\n    const cacheKey = macEncodingCacheKeys[encoding];\n    if (cacheKey === undefined) {\n        return undefined;\n    }\n\n    // We can't do \"if (cache.has(key)) {return cache.get(key)}\" here:\n    // since garbage collection may run at any time, it could also kick in\n    // between the calls to cache.has() and cache.get(). In that case,\n    // we would return 'undefined' even though we do support the encoding.\n    if (macEncodingTableCache) {\n        const cachedTable = macEncodingTableCache.get(cacheKey);\n        if (cachedTable !== undefined) {\n            return cachedTable;\n        }\n    }\n\n    const decodingTable = eightBitMacEncodings[encoding];\n    if (decodingTable === undefined) {\n        return undefined;\n    }\n\n    const encodingTable = {};\n    for (let i = 0; i < decodingTable.length; i++) {\n        encodingTable[decodingTable.charCodeAt(i)] = i + 0x80;\n    }\n\n    if (macEncodingTableCache) {\n        macEncodingTableCache.set(cacheKey, encodingTable);\n    }\n\n    return encodingTable;\n};\n\n/**\n * Encodes an old-style Macintosh string. Returns a byte array upon success.\n * If the requested encoding is unsupported, or if the input string contains\n * a character that cannot be expressed in the encoding, the function returns\n * 'undefined'.\n * @param {string} str\n * @param {string} encoding\n * @returns {Array}\n */\nencode.MACSTRING = function(str, encoding) {\n    const table = getMacEncodingTable(encoding);\n    if (table === undefined) {\n        return undefined;\n    }\n\n    const result = [];\n    for (let i = 0; i < str.length; i++) {\n        let c = str.charCodeAt(i);\n\n        // In all eight-bit Mac encodings, the characters 0x00..0x7F are\n        // mapped to U+0000..U+007F; we only need to look up the others.\n        if (c >= 0x80) {\n            c = table[c];\n            if (c === undefined) {\n                // str contains a Unicode character that cannot be encoded\n                // in the requested encoding.\n                return undefined;\n            }\n        }\n        result[i] = c;\n        // result.push(c);\n    }\n\n    return result;\n};\n\n/**\n * @param {string} str\n * @param {string} encoding\n * @returns {number}\n */\nsizeOf.MACSTRING = function(str, encoding) {\n    const b = encode.MACSTRING(str, encoding);\n    if (b !== undefined) {\n        return b.length;\n    } else {\n        return 0;\n    }\n};\n\n// Helper for encode.VARDELTAS\nfunction isByteEncodable(value) {\n    return value >= -128 && value <= 127;\n}\n\n// Helper for encode.VARDELTAS\nfunction encodeVarDeltaRunAsZeroes(deltas, pos, result) {\n    let runLength = 0;\n    const numDeltas = deltas.length;\n    while (pos < numDeltas && runLength < 64 && deltas[pos] === 0) {\n        ++pos;\n        ++runLength;\n    }\n    result.push(0x80 | (runLength - 1));\n    return pos;\n}\n\n// Helper for encode.VARDELTAS\nfunction encodeVarDeltaRunAsBytes(deltas, offset, result) {\n    let runLength = 0;\n    const numDeltas = deltas.length;\n    let pos = offset;\n    while (pos < numDeltas && runLength < 64) {\n        const value = deltas[pos];\n        if (!isByteEncodable(value)) {\n            break;\n        }\n\n        // Within a byte-encoded run of deltas, a single zero is best\n        // stored literally as 0x00 value. However, if we have two or\n        // more zeroes in a sequence, it is better to start a new run.\n        // Fore example, the sequence of deltas [15, 15, 0, 15, 15]\n        // becomes 6 bytes (04 0F 0F 00 0F 0F) when storing the zero\n        // within the current run, but 7 bytes (01 0F 0F 80 01 0F 0F)\n        // when starting a new run.\n        if (value === 0 && pos + 1 < numDeltas && deltas[pos + 1] === 0) {\n            break;\n        }\n\n        ++pos;\n        ++runLength;\n    }\n    result.push(runLength - 1);\n    for (let i = offset; i < pos; ++i) {\n        result.push((deltas[i] + 256) & 0xff);\n    }\n    return pos;\n}\n\n// Helper for encode.VARDELTAS\nfunction encodeVarDeltaRunAsWords(deltas, offset, result) {\n    let runLength = 0;\n    const numDeltas = deltas.length;\n    let pos = offset;\n    while (pos < numDeltas && runLength < 64) {\n        const value = deltas[pos];\n\n        // Within a word-encoded run of deltas, it is easiest to start\n        // a new run (with a different encoding) whenever we encounter\n        // a zero value. For example, the sequence [0x6666, 0, 0x7777]\n        // needs 7 bytes when storing the zero inside the current run\n        // (42 66 66 00 00 77 77), and equally 7 bytes when starting a\n        // new run (40 66 66 80 40 77 77).\n        if (value === 0) {\n            break;\n        }\n\n        // Within a word-encoded run of deltas, a single value in the\n        // range (-128..127) should be encoded within the current run\n        // because it is more compact. For example, the sequence\n        // [0x6666, 2, 0x7777] becomes 7 bytes when storing the value\n        // literally (42 66 66 00 02 77 77), but 8 bytes when starting\n        // a new run (40 66 66 00 02 40 77 77).\n        if (isByteEncodable(value) && pos + 1 < numDeltas && isByteEncodable(deltas[pos + 1])) {\n            break;\n        }\n\n        ++pos;\n        ++runLength;\n    }\n    result.push(0x40 | (runLength - 1));\n    for (let i = offset; i < pos; ++i) {\n        const val = deltas[i];\n        result.push(((val + 0x10000) >> 8) & 0xff, (val + 0x100) & 0xff);\n    }\n    return pos;\n}\n\n/**\n * Encode a list of variation adjustment deltas.\n *\n * Variation adjustment deltas are used in ‘gvar’ and ‘cvar’ tables.\n * They indicate how points (in ‘gvar’) or values (in ‘cvar’) get adjusted\n * when generating instances of variation fonts.\n *\n * @see https://www.microsoft.com/typography/otspec/gvar.htm\n * @see https://developer.apple.com/fonts/TrueType-Reference-Manual/RM06/Chap6gvar.html\n * @param {Array}\n * @return {Array}\n */\nencode.VARDELTAS = function(deltas) {\n    let pos = 0;\n    const result = [];\n    while (pos < deltas.length) {\n        const value = deltas[pos];\n        if (value === 0) {\n            pos = encodeVarDeltaRunAsZeroes(deltas, pos, result);\n        } else if (value >= -128 && value <= 127) {\n            pos = encodeVarDeltaRunAsBytes(deltas, pos, result);\n        } else {\n            pos = encodeVarDeltaRunAsWords(deltas, pos, result);\n        }\n    }\n    return result;\n};\n\n// Convert a list of values to a CFF INDEX structure.\n// The values should be objects containing name / type / value.\n/**\n * @param {Array} l\n * @returns {Array}\n */\nencode.INDEX = function(l) {\n    //var offset, offsets, offsetEncoder, encodedOffsets, encodedOffset, data,\n    //    i, v;\n    // Because we have to know which data type to use to encode the offsets,\n    // we have to go through the values twice: once to encode the data and\n    // calculate the offsets, then again to encode the offsets using the fitting data type.\n    let offset = 1; // First offset is always 1.\n    const offsets = [offset];\n    const data = [];\n    for (let i = 0; i < l.length; i += 1) {\n        const v = encode.OBJECT(l[i]);\n        Array.prototype.push.apply(data, v);\n        offset += v.length;\n        offsets.push(offset);\n    }\n\n    if (data.length === 0) {\n        return [0, 0];\n    }\n\n    const encodedOffsets = [];\n    const offSize = (1 + Math.floor(Math.log(offset) / Math.log(2)) / 8) | 0;\n    const offsetEncoder = [undefined, encode.BYTE, encode.USHORT, encode.UINT24, encode.ULONG][offSize];\n    for (let i = 0; i < offsets.length; i += 1) {\n        const encodedOffset = offsetEncoder(offsets[i]);\n        Array.prototype.push.apply(encodedOffsets, encodedOffset);\n    }\n\n    return Array.prototype.concat(encode.Card16(l.length),\n                           encode.OffSize(offSize),\n                           encodedOffsets,\n                           data);\n};\n\n/**\n * @param {Array}\n * @returns {number}\n */\nsizeOf.INDEX = function(v) {\n    return encode.INDEX(v).length;\n};\n\n/**\n * Convert an object to a CFF DICT structure.\n * The keys should be numeric.\n * The values should be objects containing name / type / value.\n * @param {Object} m\n * @returns {Array}\n */\nencode.DICT = function(m) {\n    let d = [];\n    const keys = Object.keys(m);\n    const length = keys.length;\n\n    for (let i = 0; i < length; i += 1) {\n        // Object.keys() return string keys, but our keys are always numeric.\n        const k = parseInt(keys[i], 0);\n        const v = m[k];\n        // Value comes before the key.\n        d = d.concat(encode.OPERAND(v.value, v.type));\n        d = d.concat(encode.OPERATOR(k));\n    }\n\n    return d;\n};\n\n/**\n * @param {Object}\n * @returns {number}\n */\nsizeOf.DICT = function(m) {\n    return encode.DICT(m).length;\n};\n\n/**\n * @param {number}\n * @returns {Array}\n */\nencode.OPERATOR = function(v) {\n    if (v < 1200) {\n        return [v];\n    } else {\n        return [12, v - 1200];\n    }\n};\n\n/**\n * @param {Array} v\n * @param {string}\n * @returns {Array}\n */\nencode.OPERAND = function(v, type) {\n    let d = [];\n    if (Array.isArray(type)) {\n        for (let i = 0; i < type.length; i += 1) {\n            check.argument(v.length === type.length, 'Not enough arguments given for type' + type);\n            d = d.concat(encode.OPERAND(v[i], type[i]));\n        }\n    } else {\n        if (type === 'SID') {\n            d = d.concat(encode.NUMBER(v));\n        } else if (type === 'offset') {\n            // We make it easy for ourselves and always encode offsets as\n            // 4 bytes. This makes offset calculation for the top dict easier.\n            d = d.concat(encode.NUMBER32(v));\n        } else if (type === 'number') {\n            d = d.concat(encode.NUMBER(v));\n        } else if (type === 'real') {\n            d = d.concat(encode.REAL(v));\n        } else {\n            throw new Error('Unknown operand type ' + type);\n            // FIXME Add support for booleans\n        }\n    }\n\n    return d;\n};\n\nencode.OP = encode.BYTE;\nsizeOf.OP = sizeOf.BYTE;\n\n// memoize charstring encoding using WeakMap if available\nconst wmm = typeof WeakMap === 'function' && new WeakMap();\n\n/**\n * Convert a list of CharString operations to bytes.\n * @param {Array}\n * @returns {Array}\n */\nencode.CHARSTRING = function(ops) {\n    // See encode.MACSTRING for why we don't do \"if (wmm && wmm.has(ops))\".\n    if (wmm) {\n        const cachedValue = wmm.get(ops);\n        if (cachedValue !== undefined) {\n            return cachedValue;\n        }\n    }\n\n    let d = [];\n    const length = ops.length;\n\n    for (let i = 0; i < length; i += 1) {\n        const op = ops[i];\n        d = d.concat(encode[op.type](op.value));\n    }\n\n    if (wmm) {\n        wmm.set(ops, d);\n    }\n\n    return d;\n};\n\n/**\n * @param {Array}\n * @returns {number}\n */\nsizeOf.CHARSTRING = function(ops) {\n    return encode.CHARSTRING(ops).length;\n};\n\n// Utility functions ////////////////////////////////////////////////////////\n\n/**\n * Convert an object containing name / type / value to bytes.\n * @param {Object}\n * @returns {Array}\n */\nencode.OBJECT = function(v) {\n    const encodingFunction = encode[v.type];\n    check.argument(encodingFunction !== undefined, 'No encoding function for type ' + v.type);\n    return encodingFunction(v.value);\n};\n\n/**\n * @param {Object}\n * @returns {number}\n */\nsizeOf.OBJECT = function(v) {\n    const sizeOfFunction = sizeOf[v.type];\n    check.argument(sizeOfFunction !== undefined, 'No sizeOf function for type ' + v.type);\n    return sizeOfFunction(v.value);\n};\n\n/**\n * Convert a table object to bytes.\n * A table contains a list of fields containing the metadata (name, type and default value).\n * The table itself has the field values set as attributes.\n * @param {opentype.Table}\n * @returns {Array}\n */\nencode.TABLE = function(table) {\n    let d = [];\n    const length = table.fields.length;\n    const subtables = [];\n    const subtableOffsets = [];\n\n    for (let i = 0; i < length; i += 1) {\n        const field = table.fields[i];\n        const encodingFunction = encode[field.type];\n        check.argument(encodingFunction !== undefined, 'No encoding function for field type ' + field.type + ' (' + field.name + ')');\n        let value = table[field.name];\n        if (value === undefined) {\n            value = field.value;\n        }\n\n        const bytes = encodingFunction(value);\n\n        if (field.type === 'TABLE') {\n            subtableOffsets.push(d.length);\n            d = d.concat([0, 0]);\n            subtables.push(bytes);\n        } else {\n            d = d.concat(bytes);\n        }\n    }\n\n    for (let i = 0; i < subtables.length; i += 1) {\n        const o = subtableOffsets[i];\n        const offset = d.length;\n        check.argument(offset < 65536, 'Table ' + table.tableName + ' too big.');\n        d[o] = offset >> 8;\n        d[o + 1] = offset & 0xff;\n        d = d.concat(subtables[i]);\n    }\n\n    return d;\n};\n\n/**\n * @param {opentype.Table}\n * @returns {number}\n */\nsizeOf.TABLE = function(table) {\n    let numBytes = 0;\n    const length = table.fields.length;\n\n    for (let i = 0; i < length; i += 1) {\n        const field = table.fields[i];\n        const sizeOfFunction = sizeOf[field.type];\n        check.argument(sizeOfFunction !== undefined, 'No sizeOf function for field type ' + field.type + ' (' + field.name + ')');\n        let value = table[field.name];\n        if (value === undefined) {\n            value = field.value;\n        }\n\n        numBytes += sizeOfFunction(value);\n\n        // Subtables take 2 more bytes for offsets.\n        if (field.type === 'TABLE') {\n            numBytes += 2;\n        }\n    }\n\n    return numBytes;\n};\n\nencode.RECORD = encode.TABLE;\nsizeOf.RECORD = sizeOf.TABLE;\n\n// Merge in a list of bytes.\nencode.LITERAL = function(v) {\n    return v;\n};\n\nsizeOf.LITERAL = function(v) {\n    return v.length;\n};\n\nexport { decode, encode, sizeOf };\n", "// Table metadata\n\nimport check from './check';\nimport { encode, sizeOf } from './types';\n\n/**\n * @exports opentype.Table\n * @class\n * @param {string} tableName\n * @param {Array} fields\n * @param {Object} options\n * @constructor\n */\nfunction Table(tableName, fields, options) {\n    // For coverage tables with coverage format 2, we do not want to add the coverage data directly to the table object,\n    // as this will result in wrong encoding order of the coverage data on serialization to bytes.\n    // The fallback of using the field values directly when not present on the table is handled in types.encode.TABLE() already.\n    if (fields.length && (fields[0].name !== 'coverageFormat' || fields[0].value === 1)) {\n        for (let i = 0; i < fields.length; i += 1) {\n            const field = fields[i];\n            this[field.name] = field.value;\n        }\n    }\n\n    this.tableName = tableName;\n    this.fields = fields;\n    if (options) {\n        const optionKeys = Object.keys(options);\n        for (let i = 0; i < optionKeys.length; i += 1) {\n            const k = optionKeys[i];\n            const v = options[k];\n            if (this[k] !== undefined) {\n                this[k] = v;\n            }\n        }\n    }\n}\n\n/**\n * Encodes the table and returns an array of bytes\n * @return {Array}\n */\nTable.prototype.encode = function() {\n    return encode.TABLE(this);\n};\n\n/**\n * Get the size of the table.\n * @return {number}\n */\nTable.prototype.sizeOf = function() {\n    return sizeOf.TABLE(this);\n};\n\n/**\n * @private\n */\nfunction ushortList(itemName, list, count) {\n    if (count === undefined) {\n        count = list.length;\n    }\n    const fields = new Array(list.length + 1);\n    fields[0] = {name: itemName + 'Count', type: 'USHORT', value: count};\n    for (let i = 0; i < list.length; i++) {\n        fields[i + 1] = {name: itemName + i, type: 'USHORT', value: list[i]};\n    }\n    return fields;\n}\n\n/**\n * @private\n */\nfunction tableList(itemName, records, itemCallback) {\n    const count = records.length;\n    const fields = new Array(count + 1);\n    fields[0] = {name: itemName + 'Count', type: 'USHORT', value: count};\n    for (let i = 0; i < count; i++) {\n        fields[i + 1] = {name: itemName + i, type: 'TABLE', value: itemCallback(records[i], i)};\n    }\n    return fields;\n}\n\n/**\n * @private\n */\nfunction recordList(itemName, records, itemCallback) {\n    const count = records.length;\n    let fields = [];\n    fields[0] = {name: itemName + 'Count', type: 'USHORT', value: count};\n    for (let i = 0; i < count; i++) {\n        fields = fields.concat(itemCallback(records[i], i));\n    }\n    return fields;\n}\n\n// Common Layout Tables\n\n/**\n * @exports opentype.Coverage\n * @class\n * @param {opentype.Table}\n * @constructor\n * @extends opentype.Table\n */\nfunction Coverage(coverageTable) {\n    if (coverageTable.format === 1) {\n        Table.call(this, 'coverageTable',\n            [{name: 'coverageFormat', type: 'USHORT', value: 1}]\n            .concat(ushortList('glyph', coverageTable.glyphs))\n        );\n    } else if (coverageTable.format === 2) {\n        Table.call(this, 'coverageTable',\n            [{name: 'coverageFormat', type: 'USHORT', value: 2}]\n            .concat(recordList('rangeRecord', coverageTable.ranges, function(RangeRecord) {\n                return [\n                    {name: 'startGlyphID', type: 'USHORT', value: RangeRecord.start},\n                    {name: 'endGlyphID', type: 'USHORT', value: RangeRecord.end},\n                    {name: 'startCoverageIndex', type: 'USHORT', value: RangeRecord.index},\n                ];\n            }))\n        );\n    } else {\n        check.assert(false, 'Coverage format must be 1 or 2.');\n    }\n}\nCoverage.prototype = Object.create(Table.prototype);\nCoverage.prototype.constructor = Coverage;\n\nfunction ScriptList(scriptListTable) {\n    Table.call(this, 'scriptListTable',\n        recordList('scriptRecord', scriptListTable, function(scriptRecord, i) {\n            const script = scriptRecord.script;\n            let defaultLangSys = script.defaultLangSys;\n            check.assert(!!defaultLangSys, 'Unable to write GSUB: script ' + scriptRecord.tag + ' has no default language system.');\n            return [\n                {name: 'scriptTag' + i, type: 'TAG', value: scriptRecord.tag},\n                {name: 'script' + i, type: 'TABLE', value: new Table('scriptTable', [\n                    {name: 'defaultLangSys', type: 'TABLE', value: new Table('defaultLangSys', [\n                        {name: 'lookupOrder', type: 'USHORT', value: 0},\n                        {name: 'reqFeatureIndex', type: 'USHORT', value: defaultLangSys.reqFeatureIndex}]\n                        .concat(ushortList('featureIndex', defaultLangSys.featureIndexes)))}\n                    ].concat(recordList('langSys', script.langSysRecords, function(langSysRecord, i) {\n                        const langSys = langSysRecord.langSys;\n                        return [\n                            {name: 'langSysTag' + i, type: 'TAG', value: langSysRecord.tag},\n                            {name: 'langSys' + i, type: 'TABLE', value: new Table('langSys', [\n                                {name: 'lookupOrder', type: 'USHORT', value: 0},\n                                {name: 'reqFeatureIndex', type: 'USHORT', value: langSys.reqFeatureIndex}\n                                ].concat(ushortList('featureIndex', langSys.featureIndexes)))}\n                        ];\n                    })))}\n            ];\n        })\n    );\n}\nScriptList.prototype = Object.create(Table.prototype);\nScriptList.prototype.constructor = ScriptList;\n\n/**\n * @exports opentype.FeatureList\n * @class\n * @param {opentype.Table}\n * @constructor\n * @extends opentype.Table\n */\nfunction FeatureList(featureListTable) {\n    Table.call(this, 'featureListTable',\n        recordList('featureRecord', featureListTable, function(featureRecord, i) {\n            const feature = featureRecord.feature;\n            return [\n                {name: 'featureTag' + i, type: 'TAG', value: featureRecord.tag},\n                {name: 'feature' + i, type: 'TABLE', value: new Table('featureTable', [\n                    {name: 'featureParams', type: 'USHORT', value: feature.featureParams},\n                    ].concat(ushortList('lookupListIndex', feature.lookupListIndexes)))}\n            ];\n        })\n    );\n}\nFeatureList.prototype = Object.create(Table.prototype);\nFeatureList.prototype.constructor = FeatureList;\n\n/**\n * @exports opentype.LookupList\n * @class\n * @param {opentype.Table}\n * @param {Object}\n * @constructor\n * @extends opentype.Table\n */\nfunction LookupList(lookupListTable, subtableMakers) {\n    Table.call(this, 'lookupListTable', tableList('lookup', lookupListTable, function(lookupTable) {\n        let subtableCallback = subtableMakers[lookupTable.lookupType];\n        check.assert(!!subtableCallback, 'Unable to write GSUB lookup type ' + lookupTable.lookupType + ' tables.');\n        return new Table('lookupTable', [\n            {name: 'lookupType', type: 'USHORT', value: lookupTable.lookupType},\n            {name: 'lookupFlag', type: 'USHORT', value: lookupTable.lookupFlag}\n        ].concat(tableList('subtable', lookupTable.subtables, subtableCallback)));\n    }));\n}\nLookupList.prototype = Object.create(Table.prototype);\nLookupList.prototype.constructor = LookupList;\n\n// Record = same as Table, but inlined (a Table has an offset and its data is further in the stream)\n// Don't use offsets inside Records (probable bug), only in Tables.\nexport default {\n    Table,\n    Record: Table,\n    Coverage,\n    ScriptList,\n    FeatureList,\n    LookupList,\n    ushortList,\n    tableList,\n    recordList,\n};\n", "// Parsing utility functions\n\nimport check from './check';\n\n// Retrieve an unsigned byte from the DataView.\nfunction getByte(dataView, offset) {\n    return dataView.getUint8(offset);\n}\n\n// Retrieve an unsigned 16-bit short from the DataView.\n// The value is stored in big endian.\nfunction getUShort(dataView, offset) {\n    return dataView.getUint16(offset, false);\n}\n\n// Retrieve a signed 16-bit short from the DataView.\n// The value is stored in big endian.\nfunction getShort(dataView, offset) {\n    return dataView.getInt16(offset, false);\n}\n\n// Retrieve an unsigned 32-bit long from the DataView.\n// The value is stored in big endian.\nfunction getULong(dataView, offset) {\n    return dataView.getUint32(offset, false);\n}\n\n// Retrieve a 32-bit signed fixed-point number (16.16) from the DataView.\n// The value is stored in big endian.\nfunction getFixed(dataView, offset) {\n    const decimal = dataView.getInt16(offset, false);\n    const fraction = dataView.getUint16(offset + 2, false);\n    return decimal + fraction / 65535;\n}\n\n// Retrieve a 4-character tag from the DataView.\n// Tags are used to identify tables.\nfunction getTag(dataView, offset) {\n    let tag = '';\n    for (let i = offset; i < offset + 4; i += 1) {\n        tag += String.fromCharCode(dataView.getInt8(i));\n    }\n\n    return tag;\n}\n\n// Retrieve an offset from the DataView.\n// Offsets are 1 to 4 bytes in length, depending on the offSize argument.\nfunction getOffset(dataView, offset, offSize) {\n    let v = 0;\n    for (let i = 0; i < offSize; i += 1) {\n        v <<= 8;\n        v += dataView.getUint8(offset + i);\n    }\n\n    return v;\n}\n\n// Retrieve a number of bytes from start offset to the end offset from the DataView.\nfunction getBytes(dataView, startOffset, endOffset) {\n    const bytes = [];\n    for (let i = startOffset; i < endOffset; i += 1) {\n        bytes.push(dataView.getUint8(i));\n    }\n\n    return bytes;\n}\n\n// Convert the list of bytes to a string.\nfunction bytesToString(bytes) {\n    let s = '';\n    for (let i = 0; i < bytes.length; i += 1) {\n        s += String.fromCharCode(bytes[i]);\n    }\n\n    return s;\n}\n\nconst typeOffsets = {\n    byte: 1,\n    uShort: 2,\n    short: 2,\n    uLong: 4,\n    fixed: 4,\n    longDateTime: 8,\n    tag: 4\n};\n\n// A stateful parser that changes the offset whenever a value is retrieved.\n// The data is a DataView.\nfunction Parser(data, offset) {\n    this.data = data;\n    this.offset = offset;\n    this.relativeOffset = 0;\n}\n\nParser.prototype.parseByte = function() {\n    const v = this.data.getUint8(this.offset + this.relativeOffset);\n    this.relativeOffset += 1;\n    return v;\n};\n\nParser.prototype.parseChar = function() {\n    const v = this.data.getInt8(this.offset + this.relativeOffset);\n    this.relativeOffset += 1;\n    return v;\n};\n\nParser.prototype.parseCard8 = Parser.prototype.parseByte;\n\nParser.prototype.parseUShort = function() {\n    const v = this.data.getUint16(this.offset + this.relativeOffset);\n    this.relativeOffset += 2;\n    return v;\n};\n\nParser.prototype.parseCard16 = Parser.prototype.parseUShort;\nParser.prototype.parseSID = Parser.prototype.parseUShort;\nParser.prototype.parseOffset16 = Parser.prototype.parseUShort;\n\nParser.prototype.parseShort = function() {\n    const v = this.data.getInt16(this.offset + this.relativeOffset);\n    this.relativeOffset += 2;\n    return v;\n};\n\nParser.prototype.parseF2Dot14 = function() {\n    const v = this.data.getInt16(this.offset + this.relativeOffset) / 16384;\n    this.relativeOffset += 2;\n    return v;\n};\n\nParser.prototype.parseULong = function() {\n    const v = getULong(this.data, this.offset + this.relativeOffset);\n    this.relativeOffset += 4;\n    return v;\n};\n\nParser.prototype.parseOffset32 = Parser.prototype.parseULong;\n\nParser.prototype.parseFixed = function() {\n    const v = getFixed(this.data, this.offset + this.relativeOffset);\n    this.relativeOffset += 4;\n    return v;\n};\n\nParser.prototype.parseString = function(length) {\n    const dataView = this.data;\n    const offset = this.offset + this.relativeOffset;\n    let string = '';\n    this.relativeOffset += length;\n    for (let i = 0; i < length; i++) {\n        string += String.fromCharCode(dataView.getUint8(offset + i));\n    }\n\n    return string;\n};\n\nParser.prototype.parseTag = function() {\n    return this.parseString(4);\n};\n\n// LONGDATETIME is a 64-bit integer.\n// JavaScript and unix timestamps traditionally use 32 bits, so we\n// only take the last 32 bits.\n// + Since until 2038 those bits will be filled by zeros we can ignore them.\nParser.prototype.parseLongDateTime = function() {\n    let v = getULong(this.data, this.offset + this.relativeOffset + 4);\n    // Subtract seconds between 01/01/1904 and 01/01/1970\n    // to convert Apple Mac timestamp to Standard Unix timestamp\n    v -= 2082844800;\n    this.relativeOffset += 8;\n    return v;\n};\n\nParser.prototype.parseVersion = function(minorBase) {\n    const major = getUShort(this.data, this.offset + this.relativeOffset);\n\n    // How to interpret the minor version is very vague in the spec. 0x5000 is 5, 0x1000 is 1\n    // Default returns the correct number if minor = 0xN000 where N is 0-9\n    // Set minorBase to 1 for tables that use minor = N where N is 0-9\n    const minor = getUShort(this.data, this.offset + this.relativeOffset + 2);\n    this.relativeOffset += 4;\n    if (minorBase === undefined) minorBase = 0x1000;\n    return major + minor / minorBase / 10;\n};\n\nParser.prototype.skip = function(type, amount) {\n    if (amount === undefined) {\n        amount = 1;\n    }\n\n    this.relativeOffset += typeOffsets[type] * amount;\n};\n\n///// Parsing lists and records ///////////////////////////////\n\n// Parse a list of 32 bit unsigned integers.\nParser.prototype.parseULongList = function(count) {\n    if (count === undefined) { count = this.parseULong(); }\n    const offsets = new Array(count);\n    const dataView = this.data;\n    let offset = this.offset + this.relativeOffset;\n    for (let i = 0; i < count; i++) {\n        offsets[i] = dataView.getUint32(offset);\n        offset += 4;\n    }\n\n    this.relativeOffset += count * 4;\n    return offsets;\n};\n\n// Parse a list of 16 bit unsigned integers. The length of the list can be read on the stream\n// or provided as an argument.\nParser.prototype.parseOffset16List =\nParser.prototype.parseUShortList = function(count) {\n    if (count === undefined) { count = this.parseUShort(); }\n    const offsets = new Array(count);\n    const dataView = this.data;\n    let offset = this.offset + this.relativeOffset;\n    for (let i = 0; i < count; i++) {\n        offsets[i] = dataView.getUint16(offset);\n        offset += 2;\n    }\n\n    this.relativeOffset += count * 2;\n    return offsets;\n};\n\n// Parses a list of 16 bit signed integers.\nParser.prototype.parseShortList = function(count) {\n    const list = new Array(count);\n    const dataView = this.data;\n    let offset = this.offset + this.relativeOffset;\n    for (let i = 0; i < count; i++) {\n        list[i] = dataView.getInt16(offset);\n        offset += 2;\n    }\n\n    this.relativeOffset += count * 2;\n    return list;\n};\n\n// Parses a list of bytes.\nParser.prototype.parseByteList = function(count) {\n    const list = new Array(count);\n    const dataView = this.data;\n    let offset = this.offset + this.relativeOffset;\n    for (let i = 0; i < count; i++) {\n        list[i] = dataView.getUint8(offset++);\n    }\n\n    this.relativeOffset += count;\n    return list;\n};\n\n/**\n * Parse a list of items.\n * Record count is optional, if omitted it is read from the stream.\n * itemCallback is one of the Parser methods.\n */\nParser.prototype.parseList = function(count, itemCallback) {\n    if (!itemCallback) {\n        itemCallback = count;\n        count = this.parseUShort();\n    }\n    const list = new Array(count);\n    for (let i = 0; i < count; i++) {\n        list[i] = itemCallback.call(this);\n    }\n    return list;\n};\n\nParser.prototype.parseList32 = function(count, itemCallback) {\n    if (!itemCallback) {\n        itemCallback = count;\n        count = this.parseULong();\n    }\n    const list = new Array(count);\n    for (let i = 0; i < count; i++) {\n        list[i] = itemCallback.call(this);\n    }\n    return list;\n};\n\n/**\n * Parse a list of records.\n * Record count is optional, if omitted it is read from the stream.\n * Example of recordDescription: { sequenceIndex: Parser.uShort, lookupListIndex: Parser.uShort }\n */\nParser.prototype.parseRecordList = function(count, recordDescription) {\n    // If the count argument is absent, read it in the stream.\n    if (!recordDescription) {\n        recordDescription = count;\n        count = this.parseUShort();\n    }\n    const records = new Array(count);\n    const fields = Object.keys(recordDescription);\n    for (let i = 0; i < count; i++) {\n        const rec = {};\n        for (let j = 0; j < fields.length; j++) {\n            const fieldName = fields[j];\n            const fieldType = recordDescription[fieldName];\n            rec[fieldName] = fieldType.call(this);\n        }\n        records[i] = rec;\n    }\n    return records;\n};\n\nParser.prototype.parseRecordList32 = function(count, recordDescription) {\n    // If the count argument is absent, read it in the stream.\n    if (!recordDescription) {\n        recordDescription = count;\n        count = this.parseULong();\n    }\n    const records = new Array(count);\n    const fields = Object.keys(recordDescription);\n    for (let i = 0; i < count; i++) {\n        const rec = {};\n        for (let j = 0; j < fields.length; j++) {\n            const fieldName = fields[j];\n            const fieldType = recordDescription[fieldName];\n            rec[fieldName] = fieldType.call(this);\n        }\n        records[i] = rec;\n    }\n    return records;\n};\n\n// Parse a data structure into an object\n// Example of description: { sequenceIndex: Parser.uShort, lookupListIndex: Parser.uShort }\nParser.prototype.parseStruct = function(description) {\n    if (typeof description === 'function') {\n        return description.call(this);\n    } else {\n        const fields = Object.keys(description);\n        const struct = {};\n        for (let j = 0; j < fields.length; j++) {\n            const fieldName = fields[j];\n            const fieldType = description[fieldName];\n            struct[fieldName] = fieldType.call(this);\n        }\n        return struct;\n    }\n};\n\n/**\n * Parse a GPOS valueRecord\n * https://docs.microsoft.com/en-us/typography/opentype/spec/gpos#value-record\n * valueFormat is optional, if omitted it is read from the stream.\n */\nParser.prototype.parseValueRecord = function(valueFormat) {\n    if (valueFormat === undefined) {\n        valueFormat = this.parseUShort();\n    }\n    if (valueFormat === 0) {\n        // valueFormat2 in kerning pairs is most often 0\n        // in this case return undefined instead of an empty object, to save space\n        return;\n    }\n    const valueRecord = {};\n\n    if (valueFormat & 0x0001) { valueRecord.xPlacement = this.parseShort(); }\n    if (valueFormat & 0x0002) { valueRecord.yPlacement = this.parseShort(); }\n    if (valueFormat & 0x0004) { valueRecord.xAdvance = this.parseShort(); }\n    if (valueFormat & 0x0008) { valueRecord.yAdvance = this.parseShort(); }\n\n    // Device table (non-variable font) / VariationIndex table (variable font) not supported\n    // https://docs.microsoft.com/fr-fr/typography/opentype/spec/chapter2#devVarIdxTbls\n    if (valueFormat & 0x0010) { valueRecord.xPlaDevice = undefined; this.parseShort(); }\n    if (valueFormat & 0x0020) { valueRecord.yPlaDevice = undefined; this.parseShort(); }\n    if (valueFormat & 0x0040) { valueRecord.xAdvDevice = undefined; this.parseShort(); }\n    if (valueFormat & 0x0080) { valueRecord.yAdvDevice = undefined; this.parseShort(); }\n\n    return valueRecord;\n};\n\n/**\n * Parse a list of GPOS valueRecords\n * https://docs.microsoft.com/en-us/typography/opentype/spec/gpos#value-record\n * valueFormat and valueCount are read from the stream.\n */\nParser.prototype.parseValueRecordList = function() {\n    const valueFormat = this.parseUShort();\n    const valueCount = this.parseUShort();\n    const values = new Array(valueCount);\n    for (let i = 0; i < valueCount; i++) {\n        values[i] = this.parseValueRecord(valueFormat);\n    }\n    return values;\n};\n\nParser.prototype.parsePointer = function(description) {\n    const structOffset = this.parseOffset16();\n    if (structOffset > 0) {\n        // NULL offset => return undefined\n        return new Parser(this.data, this.offset + structOffset).parseStruct(description);\n    }\n    return undefined;\n};\n\nParser.prototype.parsePointer32 = function(description) {\n    const structOffset = this.parseOffset32();\n    if (structOffset > 0) {\n        // NULL offset => return undefined\n        return new Parser(this.data, this.offset + structOffset).parseStruct(description);\n    }\n    return undefined;\n};\n\n/**\n * Parse a list of offsets to lists of 16-bit integers,\n * or a list of offsets to lists of offsets to any kind of items.\n * If itemCallback is not provided, a list of list of UShort is assumed.\n * If provided, itemCallback is called on each item and must parse the item.\n * See examples in tables/gsub.js\n */\nParser.prototype.parseListOfLists = function(itemCallback) {\n    const offsets = this.parseOffset16List();\n    const count = offsets.length;\n    const relativeOffset = this.relativeOffset;\n    const list = new Array(count);\n    for (let i = 0; i < count; i++) {\n        const start = offsets[i];\n        if (start === 0) {\n            // NULL offset\n            // Add i as owned property to list. Convenient with assert.\n            list[i] = undefined;\n            continue;\n        }\n        this.relativeOffset = start;\n        if (itemCallback) {\n            const subOffsets = this.parseOffset16List();\n            const subList = new Array(subOffsets.length);\n            for (let j = 0; j < subOffsets.length; j++) {\n                this.relativeOffset = start + subOffsets[j];\n                subList[j] = itemCallback.call(this);\n            }\n            list[i] = subList;\n        } else {\n            list[i] = this.parseUShortList();\n        }\n    }\n    this.relativeOffset = relativeOffset;\n    return list;\n};\n\n///// Complex tables parsing //////////////////////////////////\n\n// Parse a coverage table in a GSUB, GPOS or GDEF table.\n// https://www.microsoft.com/typography/OTSPEC/chapter2.htm\n// parser.offset must point to the start of the table containing the coverage.\nParser.prototype.parseCoverage = function() {\n    const startOffset = this.offset + this.relativeOffset;\n    const format = this.parseUShort();\n    const count = this.parseUShort();\n    if (format === 1) {\n        return {\n            format: 1,\n            glyphs: this.parseUShortList(count)\n        };\n    } else if (format === 2) {\n        const ranges = new Array(count);\n        for (let i = 0; i < count; i++) {\n            ranges[i] = {\n                start: this.parseUShort(),\n                end: this.parseUShort(),\n                index: this.parseUShort()\n            };\n        }\n        return {\n            format: 2,\n            ranges: ranges\n        };\n    }\n    throw new Error('0x' + startOffset.toString(16) + ': Coverage format must be 1 or 2.');\n};\n\n// Parse a Class Definition Table in a GSUB, GPOS or GDEF table.\n// https://www.microsoft.com/typography/OTSPEC/chapter2.htm\nParser.prototype.parseClassDef = function() {\n    const startOffset = this.offset + this.relativeOffset;\n    const format = this.parseUShort();\n    if (format === 1) {\n        return {\n            format: 1,\n            startGlyph: this.parseUShort(),\n            classes: this.parseUShortList()\n        };\n    } else if (format === 2) {\n        return {\n            format: 2,\n            ranges: this.parseRecordList({\n                start: Parser.uShort,\n                end: Parser.uShort,\n                classId: Parser.uShort\n            })\n        };\n    }\n    throw new Error('0x' + startOffset.toString(16) + ': ClassDef format must be 1 or 2.');\n};\n\n///// Static methods ///////////////////////////////////\n// These convenience methods can be used as callbacks and should be called with \"this\" context set to a Parser instance.\n\nParser.list = function(count, itemCallback) {\n    return function() {\n        return this.parseList(count, itemCallback);\n    };\n};\n\nParser.list32 = function(count, itemCallback) {\n    return function() {\n        return this.parseList32(count, itemCallback);\n    };\n};\n\nParser.recordList = function(count, recordDescription) {\n    return function() {\n        return this.parseRecordList(count, recordDescription);\n    };\n};\n\nParser.recordList32 = function(count, recordDescription) {\n    return function() {\n        return this.parseRecordList32(count, recordDescription);\n    };\n};\n\nParser.pointer = function(description) {\n    return function() {\n        return this.parsePointer(description);\n    };\n};\n\nParser.pointer32 = function(description) {\n    return function() {\n        return this.parsePointer32(description);\n    };\n};\n\nParser.tag = Parser.prototype.parseTag;\nParser.byte = Parser.prototype.parseByte;\nParser.uShort = Parser.offset16 = Parser.prototype.parseUShort;\nParser.uShortList = Parser.prototype.parseUShortList;\nParser.uLong = Parser.offset32 = Parser.prototype.parseULong;\nParser.uLongList = Parser.prototype.parseULongList;\nParser.struct = Parser.prototype.parseStruct;\nParser.coverage = Parser.prototype.parseCoverage;\nParser.classDef = Parser.prototype.parseClassDef;\n\n///// Script, Feature, Lookup lists ///////////////////////////////////////////////\n// https://www.microsoft.com/typography/OTSPEC/chapter2.htm\n\nconst langSysTable = {\n    reserved: Parser.uShort,\n    reqFeatureIndex: Parser.uShort,\n    featureIndexes: Parser.uShortList\n};\n\nParser.prototype.parseScriptList = function() {\n    return this.parsePointer(Parser.recordList({\n        tag: Parser.tag,\n        script: Parser.pointer({\n            defaultLangSys: Parser.pointer(langSysTable),\n            langSysRecords: Parser.recordList({\n                tag: Parser.tag,\n                langSys: Parser.pointer(langSysTable)\n            })\n        })\n    })) || [];\n};\n\nParser.prototype.parseFeatureList = function() {\n    return this.parsePointer(Parser.recordList({\n        tag: Parser.tag,\n        feature: Parser.pointer({\n            featureParams: Parser.offset16,\n            lookupListIndexes: Parser.uShortList\n        })\n    })) || [];\n};\n\nParser.prototype.parseLookupList = function(lookupTableParsers) {\n    return this.parsePointer(Parser.list(Parser.pointer(function() {\n        const lookupType = this.parseUShort();\n        check.argument(1 <= lookupType && lookupType <= 9, 'GPOS/GSUB lookup type ' + lookupType + ' unknown.');\n        const lookupFlag = this.parseUShort();\n        const useMarkFilteringSet = lookupFlag & 0x10;\n        return {\n            lookupType: lookupType,\n            lookupFlag: lookupFlag,\n            subtables: this.parseList(Parser.pointer(lookupTableParsers[lookupType])),\n            markFilteringSet: useMarkFilteringSet ? this.parseUShort() : undefined\n        };\n    }))) || [];\n};\n\nParser.prototype.parseFeatureVariationsList = function() {\n    return this.parsePointer32(function() {\n        const majorVersion = this.parseUShort();\n        const minorVersion = this.parseUShort();\n        check.argument(majorVersion === 1 && minorVersion < 1, 'GPOS/GSUB feature variations table unknown.');\n        const featureVariations = this.parseRecordList32({\n            conditionSetOffset: Parser.offset32,\n            featureTableSubstitutionOffset: Parser.offset32\n        });\n        return featureVariations;\n    }) || [];\n};\n\nexport default {\n    getByte,\n    getCard8: getByte,\n    getUShort,\n    getCard16: getUShort,\n    getShort,\n    getULong,\n    getFixed,\n    getTag,\n    getOffset,\n    getBytes,\n    bytesToString,\n    Parser,\n};\n\nexport { Parser };\n", "// The `cmap` table stores the mappings from characters to glyphs.\n// https://www.microsoft.com/typography/OTSPEC/cmap.htm\n\nimport check from '../check';\nimport parse from '../parse';\nimport table from '../table';\n\nfunction parseCmapTableFormat12(cmap, p) {\n    //Skip reserved.\n    p.parseUShort();\n\n    // Length in bytes of the sub-tables.\n    cmap.length = p.parseULong();\n    cmap.language = p.parseULong();\n\n    let groupCount;\n    cmap.groupCount = groupCount = p.parseULong();\n    cmap.glyphIndexMap = {};\n\n    for (let i = 0; i < groupCount; i += 1) {\n        const startCharCode = p.parseULong();\n        const endCharCode = p.parseULong();\n        let startGlyphId = p.parseULong();\n\n        for (let c = startCharCode; c <= endCharCode; c += 1) {\n            cmap.glyphIndexMap[c] = startGlyphId;\n            startGlyphId++;\n        }\n    }\n}\n\nfunction parseCmapTableFormat4(cmap, p, data, start, offset) {\n    // Length in bytes of the sub-tables.\n    cmap.length = p.parseUShort();\n    cmap.language = p.parseUShort();\n\n    // segCount is stored x 2.\n    let segCount;\n    cmap.segCount = segCount = p.parseUShort() >> 1;\n\n    // Skip searchRange, entrySelector, rangeShift.\n    p.skip('uShort', 3);\n\n    // The \"unrolled\" mapping from character codes to glyph indices.\n    cmap.glyphIndexMap = {};\n    const endCountParser = new parse.Parser(data, start + offset + 14);\n    const startCountParser = new parse.Parser(data, start + offset + 16 + segCount * 2);\n    const idDeltaParser = new parse.Parser(data, start + offset + 16 + segCount * 4);\n    const idRangeOffsetParser = new parse.Parser(data, start + offset + 16 + segCount * 6);\n    let glyphIndexOffset = start + offset + 16 + segCount * 8;\n    for (let i = 0; i < segCount - 1; i += 1) {\n        let glyphIndex;\n        const endCount = endCountParser.parseUShort();\n        const startCount = startCountParser.parseUShort();\n        const idDelta = idDeltaParser.parseShort();\n        const idRangeOffset = idRangeOffsetParser.parseUShort();\n        for (let c = startCount; c <= endCount; c += 1) {\n            if (idRangeOffset !== 0) {\n                // The idRangeOffset is relative to the current position in the idRangeOffset array.\n                // Take the current offset in the idRangeOffset array.\n                glyphIndexOffset = (idRangeOffsetParser.offset + idRangeOffsetParser.relativeOffset - 2);\n\n                // Add the value of the idRangeOffset, which will move us into the glyphIndex array.\n                glyphIndexOffset += idRangeOffset;\n\n                // Then add the character index of the current segment, multiplied by 2 for USHORTs.\n                glyphIndexOffset += (c - startCount) * 2;\n                glyphIndex = parse.getUShort(data, glyphIndexOffset);\n                if (glyphIndex !== 0) {\n                    glyphIndex = (glyphIndex + idDelta) & 0xFFFF;\n                }\n            } else {\n                glyphIndex = (c + idDelta) & 0xFFFF;\n            }\n\n            cmap.glyphIndexMap[c] = glyphIndex;\n        }\n    }\n}\n\n// Parse the `cmap` table. This table stores the mappings from characters to glyphs.\n// There are many available formats, but we only support the Windows format 4 and 12.\n// This function returns a `CmapEncoding` object or null if no supported format could be found.\nfunction parseCmapTable(data, start) {\n    const cmap = {};\n    cmap.version = parse.getUShort(data, start);\n    check.argument(cmap.version === 0, 'cmap table version should be 0.');\n\n    // The cmap table can contain many sub-tables, each with their own format.\n    // We're only interested in a \"platform 0\" (Unicode format) and \"platform 3\" (Windows format) table.\n    cmap.numTables = parse.getUShort(data, start + 2);\n    let offset = -1;\n    for (let i = cmap.numTables - 1; i >= 0; i -= 1) {\n        const platformId = parse.getUShort(data, start + 4 + (i * 8));\n        const encodingId = parse.getUShort(data, start + 4 + (i * 8) + 2);\n        if ((platformId === 3 && (encodingId === 0 || encodingId === 1 || encodingId === 10)) ||\n            (platformId === 0 && (encodingId === 0 || encodingId === 1 || encodingId === 2 || encodingId === 3 || encodingId === 4))) {\n            offset = parse.getULong(data, start + 4 + (i * 8) + 4);\n            break;\n        }\n    }\n\n    if (offset === -1) {\n        // There is no cmap table in the font that we support.\n        throw new Error('No valid cmap sub-tables found.');\n    }\n\n    const p = new parse.Parser(data, start + offset);\n    cmap.format = p.parseUShort();\n\n    if (cmap.format === 12) {\n        parseCmapTableFormat12(cmap, p);\n    } else if (cmap.format === 4) {\n        parseCmapTableFormat4(cmap, p, data, start, offset);\n    } else {\n        throw new Error('Only format 4 and 12 cmap tables are supported (found format ' + cmap.format + ').');\n    }\n\n    return cmap;\n}\n\nfunction addSegment(t, code, glyphIndex) {\n    t.segments.push({\n        end: code,\n        start: code,\n        delta: -(code - glyphIndex),\n        offset: 0,\n        glyphIndex: glyphIndex\n    });\n}\n\nfunction addTerminatorSegment(t) {\n    t.segments.push({\n        end: 0xFFFF,\n        start: 0xFFFF,\n        delta: 1,\n        offset: 0\n    });\n}\n\n// Make cmap table, format 4 by default, 12 if needed only\nfunction makeCmapTable(glyphs) {\n    // Plan 0 is the base Unicode Plan but emojis, for example are on another plan, and needs cmap 12 format (with 32bit)\n    let isPlan0Only = true;\n    let i;\n\n    // Check if we need to add cmap format 12 or if format 4 only is fine\n    for (i = glyphs.length - 1; i > 0; i -= 1) {\n        const g = glyphs.get(i);\n        if (g.unicode > 65535) {\n            console.log('Adding CMAP format 12 (needed!)');\n            isPlan0Only = false;\n            break;\n        }\n    }\n\n    let cmapTable = [\n        {name: 'version', type: 'USHORT', value: 0},\n        {name: 'numTables', type: 'USHORT', value: isPlan0Only ? 1 : 2},\n\n        // CMAP 4 header\n        {name: 'platformID', type: 'USHORT', value: 3},\n        {name: 'encodingID', type: 'USHORT', value: 1},\n        {name: 'offset', type: 'ULONG', value: isPlan0Only ? 12 : (12 + 8)}\n    ];\n\n    if (!isPlan0Only)\n        cmapTable = cmapTable.concat([\n            // CMAP 12 header\n            {name: 'cmap12PlatformID', type: 'USHORT', value: 3}, // We encode only for PlatformID = 3 (Windows) because it is supported everywhere\n            {name: 'cmap12EncodingID', type: 'USHORT', value: 10},\n            {name: 'cmap12Offset', type: 'ULONG', value: 0}\n        ]);\n\n    cmapTable = cmapTable.concat([\n        // CMAP 4 Subtable\n        {name: 'format', type: 'USHORT', value: 4},\n        {name: 'cmap4Length', type: 'USHORT', value: 0},\n        {name: 'language', type: 'USHORT', value: 0},\n        {name: 'segCountX2', type: 'USHORT', value: 0},\n        {name: 'searchRange', type: 'USHORT', value: 0},\n        {name: 'entrySelector', type: 'USHORT', value: 0},\n        {name: 'rangeShift', type: 'USHORT', value: 0}\n    ]);\n\n    const t = new table.Table('cmap', cmapTable);\n\n    t.segments = [];\n    for (i = 0; i < glyphs.length; i += 1) {\n        const glyph = glyphs.get(i);\n        for (let j = 0; j < glyph.unicodes.length; j += 1) {\n            addSegment(t, glyph.unicodes[j], i);\n        }\n\n        t.segments = t.segments.sort(function (a, b) {\n            return a.start - b.start;\n        });\n    }\n\n    addTerminatorSegment(t);\n\n    const segCount = t.segments.length;\n    let segCountToRemove = 0;\n\n    // CMAP 4\n    // Set up parallel segment arrays.\n    let endCounts = [];\n    let startCounts = [];\n    let idDeltas = [];\n    let idRangeOffsets = [];\n    let glyphIds = [];\n\n    // CMAP 12\n    let cmap12Groups = [];\n\n    // Reminder this loop is not following the specification at 100%\n    // The specification -> find suites of characters and make a group\n    // Here we're doing one group for each letter\n    // Doing as the spec can save 8 times (or more) space\n    for (i = 0; i < segCount; i += 1) {\n        const segment = t.segments[i];\n\n        // CMAP 4\n        if (segment.end <= 65535 && segment.start <= 65535) {\n            endCounts = endCounts.concat({name: 'end_' + i, type: 'USHORT', value: segment.end});\n            startCounts = startCounts.concat({name: 'start_' + i, type: 'USHORT', value: segment.start});\n            idDeltas = idDeltas.concat({name: 'idDelta_' + i, type: 'SHORT', value: segment.delta});\n            idRangeOffsets = idRangeOffsets.concat({name: 'idRangeOffset_' + i, type: 'USHORT', value: segment.offset});\n            if (segment.glyphId !== undefined) {\n                glyphIds = glyphIds.concat({name: 'glyph_' + i, type: 'USHORT', value: segment.glyphId});\n            }\n        } else {\n            // Skip Unicode > 65535 (16bit unsigned max) for CMAP 4, will be added in CMAP 12\n            segCountToRemove += 1;\n        }\n\n        // CMAP 12\n        // Skip Terminator Segment\n        if (!isPlan0Only && segment.glyphIndex !== undefined) {\n            cmap12Groups = cmap12Groups.concat({name: 'cmap12Start_' + i, type: 'ULONG', value: segment.start});\n            cmap12Groups = cmap12Groups.concat({name: 'cmap12End_' + i, type: 'ULONG', value: segment.end});\n            cmap12Groups = cmap12Groups.concat({name: 'cmap12Glyph_' + i, type: 'ULONG', value: segment.glyphIndex});\n        }\n    }\n\n    // CMAP 4 Subtable\n    t.segCountX2 = (segCount - segCountToRemove) * 2;\n    t.searchRange = Math.pow(2, Math.floor(Math.log((segCount - segCountToRemove)) / Math.log(2))) * 2;\n    t.entrySelector = Math.log(t.searchRange / 2) / Math.log(2);\n    t.rangeShift = t.segCountX2 - t.searchRange;\n\n    t.fields = t.fields.concat(endCounts);\n    t.fields.push({name: 'reservedPad', type: 'USHORT', value: 0});\n    t.fields = t.fields.concat(startCounts);\n    t.fields = t.fields.concat(idDeltas);\n    t.fields = t.fields.concat(idRangeOffsets);\n    t.fields = t.fields.concat(glyphIds);\n\n    t.cmap4Length = 14 + // Subtable header\n        endCounts.length * 2 +\n        2 + // reservedPad\n        startCounts.length * 2 +\n        idDeltas.length * 2 +\n        idRangeOffsets.length * 2 +\n        glyphIds.length * 2;\n\n    if (!isPlan0Only) {\n        // CMAP 12 Subtable\n        const cmap12Length = 16 + // Subtable header\n            cmap12Groups.length * 4;\n\n        t.cmap12Offset = 12 + (2 * 2) + 4 + t.cmap4Length;\n        t.fields = t.fields.concat([\n            {name: 'cmap12Format', type: 'USHORT', value: 12},\n            {name: 'cmap12Reserved', type: 'USHORT', value: 0},\n            {name: 'cmap12Length', type: 'ULONG', value: cmap12Length},\n            {name: 'cmap12Language', type: 'ULONG', value: 0},\n            {name: 'cmap12nGroups', type: 'ULONG', value: cmap12Groups.length / 3}\n        ]);\n\n        t.fields = t.fields.concat(cmap12Groups);\n    }\n\n    return t;\n}\n\nexport default { parse: parseCmapTable, make: makeCmapTable };\n", "// Glyph encoding\n\nconst cffStandardStrings = [\n    '.notdef', 'space', 'exclam', 'quotedbl', 'numbersign', 'dollar', 'percent', 'ampersand', 'quoteright',\n    'parenleft', 'parenright', 'asterisk', 'plus', 'comma', 'hyphen', 'period', 'slash', 'zero', 'one', 'two',\n    'three', 'four', 'five', 'six', 'seven', 'eight', 'nine', 'colon', 'semicolon', 'less', 'equal', 'greater',\n    'question', 'at', 'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S',\n    'T', 'U', 'V', 'W', 'X', 'Y', 'Z', 'bracketleft', 'backslash', 'bracketright', 'asciicircum', 'underscore',\n    'quoteleft', 'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't',\n    'u', 'v', 'w', 'x', 'y', 'z', 'braceleft', 'bar', 'braceright', 'asciitilde', 'exclamdown', 'cent', 'sterling',\n    'fraction', 'yen', 'florin', 'section', 'currency', 'quotesingle', 'quotedblleft', 'guillemotleft',\n    'guilsinglleft', 'guilsinglright', 'fi', 'fl', 'endash', 'dagger', 'daggerdbl', 'periodcentered', 'paragraph',\n    'bullet', 'quotesinglbase', 'quotedblbase', 'quotedblright', 'guillemotright', 'ellipsis', 'perthousand',\n    'questiondown', 'grave', 'acute', 'circumflex', 'tilde', 'macron', 'breve', 'dotaccent', 'dieresis', 'ring',\n    'cedilla', 'hungarumlaut', 'ogonek', 'caron', 'emdash', 'AE', 'ordfeminine', 'Lslash', 'Oslash', 'OE',\n    'ordmasculine', 'ae', 'dotlessi', 'lslash', 'oslash', 'oe', 'germandbls', 'onesuperior', 'logicalnot', 'mu',\n    'trademark', 'Eth', 'onehalf', 'plusminus', 'Thorn', 'onequarter', 'divide', 'brokenbar', 'degree', 'thorn',\n    'threequarters', 'twosuperior', 'registered', 'minus', 'eth', 'multiply', 'threesuperior', 'copyright',\n    'Aacute', 'Acircumflex', 'Adieresis', 'Agrave', 'Aring', 'Atilde', 'Ccedilla', 'Eacute', 'Ecircumflex',\n    'Edieresis', 'Egrave', 'Iacute', 'Icircumflex', 'Idieresis', 'Igrave', 'Ntilde', 'Oacute', 'Ocircumflex',\n    'Odieresis', 'Ograve', 'Otilde', 'Scaron', 'Uacute', 'Ucircumflex', 'Udieresis', 'Ugrave', 'Yacute',\n    'Ydieresis', 'Zcaron', 'aacute', 'acircumflex', 'adieresis', 'agrave', 'aring', 'atilde', 'ccedilla', 'eacute',\n    'ecircumflex', 'edieresis', 'egrave', 'iacute', 'icircumflex', 'idieresis', 'igrave', 'ntilde', 'oacute',\n    'ocircumflex', 'odieresis', 'ograve', 'otilde', 'scaron', 'uacute', 'ucircumflex', 'udieresis', 'ugrave',\n    'yacute', 'ydieresis', 'zcaron', 'exclamsmall', 'Hungarumlautsmall', 'dollaroldstyle', 'dollarsuperior',\n    'ampersandsmall', 'Acutesmall', 'parenleftsuperior', 'parenrightsuperior', '266 ff', 'onedotenleader',\n    'zerooldstyle', 'oneoldstyle', 'twooldstyle', 'threeoldstyle', 'fouroldstyle', 'fiveoldstyle', 'sixoldstyle',\n    'sevenoldstyle', 'eightoldstyle', 'nineoldstyle', 'commasuperior', 'threequartersemdash', 'periodsuperior',\n    'questionsmall', 'asuperior', 'bsuperior', 'centsuperior', 'dsuperior', 'esuperior', 'isuperior', 'lsuperior',\n    'msuperior', 'nsuperior', 'osuperior', 'rsuperior', 'ssuperior', 'tsuperior', 'ff', 'ffi', 'ffl',\n    'parenleftinferior', 'parenrightinferior', 'Circumflexsmall', 'hyphensuperior', 'Gravesmall', 'Asmall',\n    'Bsmall', 'Csmall', 'Dsmall', 'Esmall', 'Fsmall', 'Gsmall', 'Hsmall', 'Ismall', 'Jsmall', 'Ksmall', 'Lsmall',\n    'Msmall', 'Nsmall', 'Osmall', 'Psmall', 'Qsmall', 'Rsmall', 'Ssmall', 'Tsmall', 'Usmall', 'Vsmall', 'Wsmall',\n    'Xsmall', 'Ysmall', 'Zsmall', 'colonmonetary', 'onefitted', 'rupiah', 'Tildesmall', 'exclamdownsmall',\n    'centoldstyle', 'Lslashsmall', 'Scaronsmall', 'Zcaronsmall', 'Dieresissmall', 'Brevesmall', 'Caronsmall',\n    'Dotaccentsmall', 'Macronsmall', 'figuredash', 'hypheninferior', 'Ogoneksmall', 'Ringsmall', 'Cedillasmall',\n    'questiondownsmall', 'oneeighth', 'threeeighths', 'fiveeighths', 'seveneighths', 'onethird', 'twothirds',\n    'zerosuperior', 'foursuperior', 'fivesuperior', 'sixsuperior', 'sevensuperior', 'eightsuperior', 'ninesuperior',\n    'zeroinferior', 'oneinferior', 'twoinferior', 'threeinferior', 'fourinferior', 'fiveinferior', 'sixinferior',\n    'seveninferior', 'eightinferior', 'nineinferior', 'centinferior', 'dollarinferior', 'periodinferior',\n    'commainferior', 'Agravesmall', 'Aacutesmall', 'Acircumflexsmall', 'Atildesmall', 'Adieresissmall',\n    'Aringsmall', 'AEsmall', 'Ccedillasmall', 'Egravesmall', 'Eacutesmall', 'Ecircumflexsmall', 'Edieresissmall',\n    'Igravesmall', 'Iacutesmall', 'Icircumflexsmall', 'Idieresissmall', 'Ethsmall', 'Ntildesmall', 'Ogravesmall',\n    'Oacutesmall', 'Ocircumflexsmall', 'Otildesmall', 'Odieresissmall', 'OEsmall', 'Oslashsmall', 'Ugravesmall',\n    'Uacutesmall', 'Ucircumflexsmall', 'Udieresissmall', 'Yacutesmall', 'Thornsmall', 'Ydieresissmall', '001.000',\n    '001.001', '001.002', '001.003', 'Black', 'Bold', 'Book', 'Light', 'Medium', 'Regular', 'Roman', 'Semibold'];\n\nconst cffStandardEncoding = [\n    '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '',\n    '', '', '', '', 'space', 'exclam', 'quotedbl', 'numbersign', 'dollar', 'percent', 'ampersand', 'quoteright',\n    'parenleft', 'parenright', 'asterisk', 'plus', 'comma', 'hyphen', 'period', 'slash', 'zero', 'one', 'two',\n    'three', 'four', 'five', 'six', 'seven', 'eight', 'nine', 'colon', 'semicolon', 'less', 'equal', 'greater',\n    'question', 'at', 'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S',\n    'T', 'U', 'V', 'W', 'X', 'Y', 'Z', 'bracketleft', 'backslash', 'bracketright', 'asciicircum', 'underscore',\n    'quoteleft', 'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't',\n    'u', 'v', 'w', 'x', 'y', 'z', 'braceleft', 'bar', 'braceright', 'asciitilde', '', '', '', '', '', '', '', '',\n    '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '',\n    'exclamdown', 'cent', 'sterling', 'fraction', 'yen', 'florin', 'section', 'currency', 'quotesingle',\n    'quotedblleft', 'guillemotleft', 'guilsinglleft', 'guilsinglright', 'fi', 'fl', '', 'endash', 'dagger',\n    'daggerdbl', 'periodcentered', '', 'paragraph', 'bullet', 'quotesinglbase', 'quotedblbase', 'quotedblright',\n    'guillemotright', 'ellipsis', 'perthousand', '', 'questiondown', '', 'grave', 'acute', 'circumflex', 'tilde',\n    'macron', 'breve', 'dotaccent', 'dieresis', '', 'ring', 'cedilla', '', 'hungarumlaut', 'ogonek', 'caron',\n    'emdash', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', 'AE', '', 'ordfeminine', '', '', '',\n    '', 'Lslash', 'Oslash', 'OE', 'ordmasculine', '', '', '', '', '', 'ae', '', '', '', 'dotlessi', '', '',\n    'lslash', 'oslash', 'oe', 'germandbls'];\n\nconst cffExpertEncoding = [\n    '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '',\n    '', '', '', '', 'space', 'exclamsmall', 'Hungarumlautsmall', '', 'dollaroldstyle', 'dollarsuperior',\n    'ampersandsmall', 'Acutesmall', 'parenleftsuperior', 'parenrightsuperior', 'twodotenleader', 'onedotenleader',\n    'comma', 'hyphen', 'period', 'fraction', 'zerooldstyle', 'oneoldstyle', 'twooldstyle', 'threeoldstyle',\n    'fouroldstyle', 'fiveoldstyle', 'sixoldstyle', 'sevenoldstyle', 'eightoldstyle', 'nineoldstyle', 'colon',\n    'semicolon', 'commasuperior', 'threequartersemdash', 'periodsuperior', 'questionsmall', '', 'asuperior',\n    'bsuperior', 'centsuperior', 'dsuperior', 'esuperior', '', '', 'isuperior', '', '', 'lsuperior', 'msuperior',\n    'nsuperior', 'osuperior', '', '', 'rsuperior', 'ssuperior', 'tsuperior', '', 'ff', 'fi', 'fl', 'ffi', 'ffl',\n    'parenleftinferior', '', 'parenrightinferior', 'Circumflexsmall', 'hyphensuperior', 'Gravesmall', 'Asmall',\n    'Bsmall', 'Csmall', 'Dsmall', 'Esmall', 'Fsmall', 'Gsmall', 'Hsmall', 'Ismall', 'Jsmall', 'Ksmall', 'Lsmall',\n    'Msmall', 'Nsmall', 'Osmall', 'Psmall', 'Qsmall', 'Rsmall', 'Ssmall', 'Tsmall', 'Usmall', 'Vsmall', 'Wsmall',\n    'Xsmall', 'Ysmall', 'Zsmall', 'colonmonetary', 'onefitted', 'rupiah', 'Tildesmall', '', '', '', '', '', '', '',\n    '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '',\n    'exclamdownsmall', 'centoldstyle', 'Lslashsmall', '', '', 'Scaronsmall', 'Zcaronsmall', 'Dieresissmall',\n    'Brevesmall', 'Caronsmall', '', 'Dotaccentsmall', '', '', 'Macronsmall', '', '', 'figuredash', 'hypheninferior',\n    '', '', 'Ogoneksmall', 'Ringsmall', 'Cedillasmall', '', '', '', 'onequarter', 'onehalf', 'threequarters',\n    'questiondownsmall', 'oneeighth', 'threeeighths', 'fiveeighths', 'seveneighths', 'onethird', 'twothirds', '',\n    '', 'zerosuperior', 'onesuperior', 'twosuperior', 'threesuperior', 'foursuperior', 'fivesuperior',\n    'sixsuperior', 'sevensuperior', 'eightsuperior', 'ninesuperior', 'zeroinferior', 'oneinferior', 'twoinferior',\n    'threeinferior', 'fourinferior', 'fiveinferior', 'sixinferior', 'seveninferior', 'eightinferior',\n    'nineinferior', 'centinferior', 'dollarinferior', 'periodinferior', 'commainferior', 'Agravesmall',\n    'Aacutesmall', 'Acircumflexsmall', 'Atildesmall', 'Adieresissmall', 'Aringsmall', 'AEsmall', 'Ccedillasmall',\n    'Egravesmall', 'Eacutesmall', 'Ecircumflexsmall', 'Edieresissmall', 'Igravesmall', 'Iacutesmall',\n    'Icircumflexsmall', 'Idieresissmall', 'Ethsmall', 'Ntildesmall', 'Ogravesmall', 'Oacutesmall',\n    'Ocircumflexsmall', 'Otildesmall', 'Odieresissmall', 'OEsmall', 'Oslashsmall', 'Ugravesmall', 'Uacutesmall',\n    'Ucircumflexsmall', 'Udieresissmall', 'Yacutesmall', 'Thornsmall', 'Ydieresissmall'];\n\nconst standardNames = [\n    '.notdef', '.null', 'nonmarkingreturn', 'space', 'exclam', 'quotedbl', 'numbersign', 'dollar', 'percent',\n    'ampersand', 'quotesingle', 'parenleft', 'parenright', 'asterisk', 'plus', 'comma', 'hyphen', 'period', 'slash',\n    'zero', 'one', 'two', 'three', 'four', 'five', 'six', 'seven', 'eight', 'nine', 'colon', 'semicolon', 'less',\n    'equal', 'greater', 'question', 'at', 'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O',\n    'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z', 'bracketleft', 'backslash', 'bracketright',\n    'asciicircum', 'underscore', 'grave', 'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o',\n    'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z', 'braceleft', 'bar', 'braceright', 'asciitilde',\n    'Adieresis', 'Aring', 'Ccedilla', 'Eacute', 'Ntilde', 'Odieresis', 'Udieresis', 'aacute', 'agrave',\n    'acircumflex', 'adieresis', 'atilde', 'aring', 'ccedilla', 'eacute', 'egrave', 'ecircumflex', 'edieresis',\n    'iacute', 'igrave', 'icircumflex', 'idieresis', 'ntilde', 'oacute', 'ograve', 'ocircumflex', 'odieresis',\n    'otilde', 'uacute', 'ugrave', 'ucircumflex', 'udieresis', 'dagger', 'degree', 'cent', 'sterling', 'section',\n    'bullet', 'paragraph', 'germandbls', 'registered', 'copyright', 'trademark', 'acute', 'dieresis', 'notequal',\n    'AE', 'Oslash', 'infinity', 'plusminus', 'lessequal', 'greaterequal', 'yen', 'mu', 'partialdiff', 'summation',\n    'product', 'pi', 'integral', 'ordfeminine', 'ordmasculine', 'Omega', 'ae', 'oslash', 'questiondown',\n    'exclamdown', 'logicalnot', 'radical', 'florin', 'approxequal', 'Delta', 'guillemotleft', 'guillemotright',\n    'ellipsis', 'nonbreakingspace', 'Agrave', 'Atilde', 'Otilde', 'OE', 'oe', 'endash', 'emdash', 'quotedblleft',\n    'quotedblright', 'quoteleft', 'quoteright', 'divide', 'lozenge', 'ydieresis', 'Ydieresis', 'fraction',\n    'currency', 'guilsinglleft', 'guilsinglright', 'fi', 'fl', 'daggerdbl', 'periodcentered', 'quotesinglbase',\n    'quotedblbase', 'perthousand', 'Acircumflex', 'Ecircumflex', 'Aacute', 'Edieresis', 'Egrave', 'Iacute',\n    'Icircumflex', 'Idieresis', 'Igrave', 'Oacute', 'Ocircumflex', 'apple', 'Ograve', 'Uacute', 'Ucircumflex',\n    'Ugrave', 'dotlessi', 'circumflex', 'tilde', 'macron', 'breve', 'dotaccent', 'ring', 'cedilla', 'hungarumlaut',\n    'ogonek', 'caron', 'Lslash', 'lslash', 'Scaron', 'scaron', 'Zcaron', 'zcaron', 'brokenbar', 'Eth', 'eth',\n    'Yacute', 'yacute', 'Thorn', 'thorn', 'minus', 'multiply', 'onesuperior', 'twosuperior', 'threesuperior',\n    'onehalf', 'onequarter', 'threequarters', 'franc', 'Gbreve', 'gbreve', 'Idotaccent', 'Scedilla', 'scedilla',\n    'Cacute', 'cacute', 'Ccaron', 'ccaron', 'dcroat'];\n\n/**\n * This is the encoding used for fonts created from scratch.\n * It loops through all glyphs and finds the appropriate unicode value.\n * Since it's linear time, other encodings will be faster.\n * @exports opentype.DefaultEncoding\n * @class\n * @constructor\n * @param {opentype.Font}\n */\nfunction DefaultEncoding(font) {\n    this.font = font;\n}\n\nDefaultEncoding.prototype.charToGlyphIndex = function(c) {\n    const code = c.codePointAt(0);\n    const glyphs = this.font.glyphs;\n    if (glyphs) {\n        for (let i = 0; i < glyphs.length; i += 1) {\n            const glyph = glyphs.get(i);\n            for (let j = 0; j < glyph.unicodes.length; j += 1) {\n                if (glyph.unicodes[j] === code) {\n                    return i;\n                }\n            }\n        }\n    }\n    return null;\n};\n\n/**\n * @exports opentype.CmapEncoding\n * @class\n * @constructor\n * @param {Object} cmap - a object with the cmap encoded data\n */\nfunction CmapEncoding(cmap) {\n    this.cmap = cmap;\n}\n\n/**\n * @param  {string} c - the character\n * @return {number} The glyph index.\n */\nCmapEncoding.prototype.charToGlyphIndex = function(c) {\n    return this.cmap.glyphIndexMap[c.codePointAt(0)] || 0;\n};\n\n/**\n * @exports opentype.CffEncoding\n * @class\n * @constructor\n * @param {string} encoding - The encoding\n * @param {Array} charset - The character set.\n */\nfunction CffEncoding(encoding, charset) {\n    this.encoding = encoding;\n    this.charset = charset;\n}\n\n/**\n * @param  {string} s - The character\n * @return {number} The index.\n */\nCffEncoding.prototype.charToGlyphIndex = function(s) {\n    const code = s.codePointAt(0);\n    const charName = this.encoding[code];\n    return this.charset.indexOf(charName);\n};\n\n/**\n * @exports opentype.GlyphNames\n * @class\n * @constructor\n * @param {Object} post\n */\nfunction GlyphNames(post) {\n    switch (post.version) {\n        case 1:\n            this.names = standardNames.slice();\n            break;\n        case 2:\n            this.names = new Array(post.numberOfGlyphs);\n            for (let i = 0; i < post.numberOfGlyphs; i++) {\n                if (post.glyphNameIndex[i] < standardNames.length) {\n                    this.names[i] = standardNames[post.glyphNameIndex[i]];\n                } else {\n                    this.names[i] = post.names[post.glyphNameIndex[i] - standardNames.length];\n                }\n            }\n\n            break;\n        case 2.5:\n            this.names = new Array(post.numberOfGlyphs);\n            for (let i = 0; i < post.numberOfGlyphs; i++) {\n                this.names[i] = standardNames[i + post.glyphNameIndex[i]];\n            }\n\n            break;\n        case 3:\n            this.names = [];\n            break;\n        default:\n            this.names = [];\n            break;\n    }\n}\n\n/**\n * Gets the index of a glyph by name.\n * @param  {string} name - The glyph name\n * @return {number} The index\n */\nGlyphNames.prototype.nameToGlyphIndex = function(name) {\n    return this.names.indexOf(name);\n};\n\n/**\n * @param  {number} gid\n * @return {string}\n */\nGlyphNames.prototype.glyphIndexToName = function(gid) {\n    return this.names[gid];\n};\n\nfunction addGlyphNamesAll(font) {\n    let glyph;\n    const glyphIndexMap = font.tables.cmap.glyphIndexMap;\n    const charCodes = Object.keys(glyphIndexMap);\n\n    for (let i = 0; i < charCodes.length; i += 1) {\n        const c = charCodes[i];\n        const glyphIndex = glyphIndexMap[c];\n        glyph = font.glyphs.get(glyphIndex);\n        glyph.addUnicode(parseInt(c));\n    }\n\n    for (let i = 0; i < font.glyphs.length; i += 1) {\n        glyph = font.glyphs.get(i);\n        if (font.cffEncoding) {\n            if (font.isCIDFont) {\n                glyph.name = 'gid' + i;\n            } else {\n                glyph.name = font.cffEncoding.charset[i];\n            }\n        } else if (font.glyphNames.names) {\n            glyph.name = font.glyphNames.glyphIndexToName(i);\n        }\n    }\n}\n\nfunction addGlyphNamesToUnicodeMap(font) {\n    font._IndexToUnicodeMap = {};\n\n    const glyphIndexMap = font.tables.cmap.glyphIndexMap;\n    const charCodes = Object.keys(glyphIndexMap);\n\n    for (let i = 0; i < charCodes.length; i += 1) {\n        const c = charCodes[i];\n        let glyphIndex = glyphIndexMap[c];\n        if (font._IndexToUnicodeMap[glyphIndex] === undefined) {\n            font._IndexToUnicodeMap[glyphIndex] = {\n                unicodes: [parseInt(c)]\n            };\n        } else {\n            font._IndexToUnicodeMap[glyphIndex].unicodes.push(parseInt(c));\n        }\n    }\n}\n\n/**\n * @alias opentype.addGlyphNames\n * @param {opentype.Font}\n * @param {Object}\n */\nfunction addGlyphNames(font, opt) {\n    if (opt.lowMemory) {\n        addGlyphNamesToUnicodeMap(font);\n    } else {\n        addGlyphNamesAll(font);\n    }\n}\n\nexport {\n    cffStandardStrings,\n    cffStandardEncoding,\n    cffExpertEncoding,\n    standardNames,\n    DefaultEncoding,\n    CmapEncoding,\n    CffEncoding,\n    GlyphNames,\n    addGlyphNames\n};\n", "// Drawing utility functions.\n\n// Draw a line on the given context from point `x1,y1` to point `x2,y2`.\nfunction line(ctx, x1, y1, x2, y2) {\n    ctx.beginPath();\n    ctx.moveTo(x1, y1);\n    ctx.lineTo(x2, y2);\n    ctx.stroke();\n}\n\nexport default { line };\n", "// The Glyph object\n\nimport check from './check';\nimport draw from './draw';\nimport Path from './path';\n// import glyf from './tables/glyf' Can't be imported here, because it's a circular dependency\n\nfunction getPathDefinition(glyph, path) {\n    let _path = path || new Path();\n    return {\n        configurable: true,\n\n        get: function() {\n            if (typeof _path === 'function') {\n                _path = _path();\n            }\n\n            return _path;\n        },\n\n        set: function(p) {\n            _path = p;\n        }\n    };\n}\n/**\n * @typedef GlyphOptions\n * @type Object\n * @property {string} [name] - The glyph name\n * @property {number} [unicode]\n * @property {Array} [unicodes]\n * @property {number} [xMin]\n * @property {number} [yMin]\n * @property {number} [xMax]\n * @property {number} [yMax]\n * @property {number} [advanceWidth]\n */\n\n// A Glyph is an individual mark that often corresponds to a character.\n// Some glyphs, such as ligatures, are a combination of many characters.\n// Glyphs are the basic building blocks of a font.\n//\n// The `Glyph` class contains utility methods for drawing the path and its points.\n/**\n * @exports opentype.Glyph\n * @class\n * @param {GlyphOptions}\n * @constructor\n */\nfunction Glyph(options) {\n    // By putting all the code on a prototype function (which is only declared once)\n    // we reduce the memory requirements for larger fonts by some 2%\n    this.bindConstructorValues(options);\n}\n\n/**\n * @param  {GlyphOptions}\n */\nGlyph.prototype.bindConstructorValues = function(options) {\n    this.index = options.index || 0;\n\n    // These three values cannot be deferred for memory optimization:\n    this.name = options.name || null;\n    this.unicode = options.unicode || undefined;\n    this.unicodes = options.unicodes || options.unicode !== undefined ? [options.unicode] : [];\n\n    // But by binding these values only when necessary, we reduce can\n    // the memory requirements by almost 3% for larger fonts.\n    if ('xMin' in options) {\n        this.xMin = options.xMin;\n    }\n\n    if ('yMin' in options) {\n        this.yMin = options.yMin;\n    }\n\n    if ('xMax' in options) {\n        this.xMax = options.xMax;\n    }\n\n    if ('yMax' in options) {\n        this.yMax = options.yMax;\n    }\n\n    if ('advanceWidth' in options) {\n        this.advanceWidth = options.advanceWidth;\n    }\n\n    // The path for a glyph is the most memory intensive, and is bound as a value\n    // with a getter/setter to ensure we actually do path parsing only once the\n    // path is actually needed by anything.\n    Object.defineProperty(this, 'path', getPathDefinition(this, options.path));\n};\n\n/**\n * @param {number}\n */\nGlyph.prototype.addUnicode = function(unicode) {\n    if (this.unicodes.length === 0) {\n        this.unicode = unicode;\n    }\n\n    this.unicodes.push(unicode);\n};\n\n/**\n * Calculate the minimum bounding box for this glyph.\n * @return {opentype.BoundingBox}\n */\nGlyph.prototype.getBoundingBox = function() {\n    return this.path.getBoundingBox();\n};\n\n/**\n * Convert the glyph to a Path we can draw on a drawing context.\n * @param  {number} [x=0] - Horizontal position of the beginning of the text.\n * @param  {number} [y=0] - Vertical position of the *baseline* of the text.\n * @param  {number} [fontSize=72] - Font size in pixels. We scale the glyph units by `1 / unitsPerEm * fontSize`.\n * @param  {Object=} options - xScale, yScale to stretch the glyph.\n * @param  {opentype.Font} if hinting is to be used, the font\n * @return {opentype.Path}\n */\nGlyph.prototype.getPath = function(x, y, fontSize, options, font) {\n    x = x !== undefined ? x : 0;\n    y = y !== undefined ? y : 0;\n    fontSize = fontSize !== undefined ? fontSize : 72;\n    let commands;\n    let hPoints;\n    if (!options) options = { };\n    let xScale = options.xScale;\n    let yScale = options.yScale;\n\n    if (options.hinting && font && font.hinting) {\n        // in case of hinting, the hinting engine takes care\n        // of scaling the points (not the path) before hinting.\n        hPoints = this.path && font.hinting.exec(this, fontSize);\n        // in case the hinting engine failed hPoints is undefined\n        // and thus reverts to plain rending\n    }\n\n    if (hPoints) {\n        // Call font.hinting.getCommands instead of `glyf.getPath(hPoints).commands` to avoid a circular dependency\n        commands = font.hinting.getCommands(hPoints);\n        x = Math.round(x);\n        y = Math.round(y);\n        // TODO in case of hinting xyScaling is not yet supported\n        xScale = yScale = 1;\n    } else {\n        commands = this.path.commands;\n        const scale = 1 / (this.path.unitsPerEm || 1000) * fontSize;\n        if (xScale === undefined) xScale = scale;\n        if (yScale === undefined) yScale = scale;\n    }\n\n    const p = new Path();\n    for (let i = 0; i < commands.length; i += 1) {\n        const cmd = commands[i];\n        if (cmd.type === 'M') {\n            p.moveTo(x + (cmd.x * xScale), y + (-cmd.y * yScale));\n        } else if (cmd.type === 'L') {\n            p.lineTo(x + (cmd.x * xScale), y + (-cmd.y * yScale));\n        } else if (cmd.type === 'Q') {\n            p.quadraticCurveTo(x + (cmd.x1 * xScale), y + (-cmd.y1 * yScale),\n                               x + (cmd.x * xScale), y + (-cmd.y * yScale));\n        } else if (cmd.type === 'C') {\n            p.curveTo(x + (cmd.x1 * xScale), y + (-cmd.y1 * yScale),\n                      x + (cmd.x2 * xScale), y + (-cmd.y2 * yScale),\n                      x + (cmd.x * xScale), y + (-cmd.y * yScale));\n        } else if (cmd.type === 'Z') {\n            p.closePath();\n        }\n    }\n\n    return p;\n};\n\n/**\n * Split the glyph into contours.\n * This function is here for backwards compatibility, and to\n * provide raw access to the TrueType glyph outlines.\n * @return {Array}\n */\nGlyph.prototype.getContours = function() {\n    if (this.points === undefined) {\n        return [];\n    }\n\n    const contours = [];\n    let currentContour = [];\n    for (let i = 0; i < this.points.length; i += 1) {\n        const pt = this.points[i];\n        currentContour.push(pt);\n        if (pt.lastPointOfContour) {\n            contours.push(currentContour);\n            currentContour = [];\n        }\n    }\n\n    check.argument(currentContour.length === 0, 'There are still points left in the current contour.');\n    return contours;\n};\n\n/**\n * Calculate the xMin/yMin/xMax/yMax/lsb/rsb for a Glyph.\n * @return {Object}\n */\nGlyph.prototype.getMetrics = function() {\n    const commands = this.path.commands;\n    const xCoords = [];\n    const yCoords = [];\n    for (let i = 0; i < commands.length; i += 1) {\n        const cmd = commands[i];\n        if (cmd.type !== 'Z') {\n            xCoords.push(cmd.x);\n            yCoords.push(cmd.y);\n        }\n\n        if (cmd.type === 'Q' || cmd.type === 'C') {\n            xCoords.push(cmd.x1);\n            yCoords.push(cmd.y1);\n        }\n\n        if (cmd.type === 'C') {\n            xCoords.push(cmd.x2);\n            yCoords.push(cmd.y2);\n        }\n    }\n\n    const metrics = {\n        xMin: Math.min.apply(null, xCoords),\n        yMin: Math.min.apply(null, yCoords),\n        xMax: Math.max.apply(null, xCoords),\n        yMax: Math.max.apply(null, yCoords),\n        leftSideBearing: this.leftSideBearing\n    };\n\n    if (!isFinite(metrics.xMin)) {\n        metrics.xMin = 0;\n    }\n\n    if (!isFinite(metrics.xMax)) {\n        metrics.xMax = this.advanceWidth;\n    }\n\n    if (!isFinite(metrics.yMin)) {\n        metrics.yMin = 0;\n    }\n\n    if (!isFinite(metrics.yMax)) {\n        metrics.yMax = 0;\n    }\n\n    metrics.rightSideBearing = this.advanceWidth - metrics.leftSideBearing - (metrics.xMax - metrics.xMin);\n    return metrics;\n};\n\n/**\n * Draw the glyph on the given context.\n * @param  {CanvasRenderingContext2D} ctx - A 2D drawing context, like Canvas.\n * @param  {number} [x=0] - Horizontal position of the beginning of the text.\n * @param  {number} [y=0] - Vertical position of the *baseline* of the text.\n * @param  {number} [fontSize=72] - Font size in pixels. We scale the glyph units by `1 / unitsPerEm * fontSize`.\n * @param  {Object=} options - xScale, yScale to stretch the glyph.\n */\nGlyph.prototype.draw = function(ctx, x, y, fontSize, options) {\n    this.getPath(x, y, fontSize, options).draw(ctx);\n};\n\n/**\n * Draw the points of the glyph.\n * On-curve points will be drawn in blue, off-curve points will be drawn in red.\n * @param  {CanvasRenderingContext2D} ctx - A 2D drawing context, like Canvas.\n * @param  {number} [x=0] - Horizontal position of the beginning of the text.\n * @param  {number} [y=0] - Vertical position of the *baseline* of the text.\n * @param  {number} [fontSize=72] - Font size in pixels. We scale the glyph units by `1 / unitsPerEm * fontSize`.\n */\nGlyph.prototype.drawPoints = function(ctx, x, y, fontSize) {\n    function drawCircles(l, x, y, scale) {\n        ctx.beginPath();\n        for (let j = 0; j < l.length; j += 1) {\n            ctx.moveTo(x + (l[j].x * scale), y + (l[j].y * scale));\n            ctx.arc(x + (l[j].x * scale), y + (l[j].y * scale), 2, 0, Math.PI * 2, false);\n        }\n\n        ctx.closePath();\n        ctx.fill();\n    }\n\n    x = x !== undefined ? x : 0;\n    y = y !== undefined ? y : 0;\n    fontSize = fontSize !== undefined ? fontSize : 24;\n    const scale = 1 / this.path.unitsPerEm * fontSize;\n\n    const blueCircles = [];\n    const redCircles = [];\n    const path = this.path;\n    for (let i = 0; i < path.commands.length; i += 1) {\n        const cmd = path.commands[i];\n        if (cmd.x !== undefined) {\n            blueCircles.push({x: cmd.x, y: -cmd.y});\n        }\n\n        if (cmd.x1 !== undefined) {\n            redCircles.push({x: cmd.x1, y: -cmd.y1});\n        }\n\n        if (cmd.x2 !== undefined) {\n            redCircles.push({x: cmd.x2, y: -cmd.y2});\n        }\n    }\n\n    ctx.fillStyle = 'blue';\n    drawCircles(blueCircles, x, y, scale);\n    ctx.fillStyle = 'red';\n    drawCircles(redCircles, x, y, scale);\n};\n\n/**\n * Draw lines indicating important font measurements.\n * Black lines indicate the origin of the coordinate system (point 0,0).\n * Blue lines indicate the glyph bounding box.\n * Green line indicates the advance width of the glyph.\n * @param  {CanvasRenderingContext2D} ctx - A 2D drawing context, like Canvas.\n * @param  {number} [x=0] - Horizontal position of the beginning of the text.\n * @param  {number} [y=0] - Vertical position of the *baseline* of the text.\n * @param  {number} [fontSize=72] - Font size in pixels. We scale the glyph units by `1 / unitsPerEm * fontSize`.\n */\nGlyph.prototype.drawMetrics = function(ctx, x, y, fontSize) {\n    let scale;\n    x = x !== undefined ? x : 0;\n    y = y !== undefined ? y : 0;\n    fontSize = fontSize !== undefined ? fontSize : 24;\n    scale = 1 / this.path.unitsPerEm * fontSize;\n    ctx.lineWidth = 1;\n\n    // Draw the origin\n    ctx.strokeStyle = 'black';\n    draw.line(ctx, x, -10000, x, 10000);\n    draw.line(ctx, -10000, y, 10000, y);\n\n    // This code is here due to memory optimization: by not using\n    // defaults in the constructor, we save a notable amount of memory.\n    const xMin = this.xMin || 0;\n    let yMin = this.yMin || 0;\n    const xMax = this.xMax || 0;\n    let yMax = this.yMax || 0;\n    const advanceWidth = this.advanceWidth || 0;\n\n    // Draw the glyph box\n    ctx.strokeStyle = 'blue';\n    draw.line(ctx, x + (xMin * scale), -10000, x + (xMin * scale), 10000);\n    draw.line(ctx, x + (xMax * scale), -10000, x + (xMax * scale), 10000);\n    draw.line(ctx, -10000, y + (-yMin * scale), 10000, y + (-yMin * scale));\n    draw.line(ctx, -10000, y + (-yMax * scale), 10000, y + (-yMax * scale));\n\n    // Draw the advance width\n    ctx.strokeStyle = 'green';\n    draw.line(ctx, x + (advanceWidth * scale), -10000, x + (advanceWidth * scale), 10000);\n};\n\nexport default Glyph;\n", "// The GlyphSet object\n\nimport Glyph from './glyph';\n\n// Define a property on the glyph that depends on the path being loaded.\nfunction defineDependentProperty(glyph, externalName, internalName) {\n    Object.defineProperty(glyph, externalName, {\n        get: function() {\n            // Request the path property to make sure the path is loaded.\n            glyph.path; // jshint ignore:line\n            return glyph[internalName];\n        },\n        set: function(newValue) {\n            glyph[internalName] = newValue;\n        },\n        enumerable: true,\n        configurable: true\n    });\n}\n\n/**\n * A GlyphSet represents all glyphs available in the font, but modelled using\n * a deferred glyph loader, for retrieving glyphs only once they are absolutely\n * necessary, to keep the memory footprint down.\n * @exports opentype.GlyphSet\n * @class\n * @param {opentype.Font}\n * @param {Array}\n */\nfunction GlyphSet(font, glyphs) {\n    this.font = font;\n    this.glyphs = {};\n    if (Array.isArray(glyphs)) {\n        for (let i = 0; i < glyphs.length; i++) {\n            const glyph = glyphs[i];\n            glyph.path.unitsPerEm = font.unitsPerEm;\n            this.glyphs[i] = glyph;\n        }\n    }\n\n    this.length = (glyphs && glyphs.length) || 0;\n}\n\n/**\n * @param  {number} index\n * @return {opentype.Glyph}\n */\nGlyphSet.prototype.get = function(index) {\n    // this.glyphs[index] is 'undefined' when low memory mode is on. glyph is pushed on request only.\n    if (this.glyphs[index] === undefined) {\n        this.font._push(index);\n        if (typeof this.glyphs[index] === 'function') {\n            this.glyphs[index] = this.glyphs[index]();\n        }\n\n        let glyph = this.glyphs[index];\n        let unicodeObj = this.font._IndexToUnicodeMap[index];\n\n        if (unicodeObj) {\n            for (let j = 0; j < unicodeObj.unicodes.length; j++)\n                glyph.addUnicode(unicodeObj.unicodes[j]);\n        }\n\n        if (this.font.cffEncoding) {\n            if (this.font.isCIDFont) {\n                glyph.name = 'gid' + index;\n            } else {\n                glyph.name = this.font.cffEncoding.charset[index];\n            }\n        } else if (this.font.glyphNames.names) {\n            glyph.name = this.font.glyphNames.glyphIndexToName(index);\n        }\n\n        this.glyphs[index].advanceWidth = this.font._hmtxTableData[index].advanceWidth;\n        this.glyphs[index].leftSideBearing = this.font._hmtxTableData[index].leftSideBearing;\n    } else {\n        if (typeof this.glyphs[index] === 'function') {\n            this.glyphs[index] = this.glyphs[index]();\n        }\n    }\n\n    return this.glyphs[index];\n};\n\n/**\n * @param  {number} index\n * @param  {Object}\n */\nGlyphSet.prototype.push = function(index, loader) {\n    this.glyphs[index] = loader;\n    this.length++;\n};\n\n/**\n * @alias opentype.glyphLoader\n * @param  {opentype.Font} font\n * @param  {number} index\n * @return {opentype.Glyph}\n */\nfunction glyphLoader(font, index) {\n    return new Glyph({index: index, font: font});\n}\n\n/**\n * Generate a stub glyph that can be filled with all metadata *except*\n * the \"points\" and \"path\" properties, which must be loaded only once\n * the glyph's path is actually requested for text shaping.\n * @alias opentype.ttfGlyphLoader\n * @param  {opentype.Font} font\n * @param  {number} index\n * @param  {Function} parseGlyph\n * @param  {Object} data\n * @param  {number} position\n * @param  {Function} buildPath\n * @return {opentype.Glyph}\n */\nfunction ttfGlyphLoader(font, index, parseGlyph, data, position, buildPath) {\n    return function() {\n        const glyph = new Glyph({index: index, font: font});\n\n        glyph.path = function() {\n            parseGlyph(glyph, data, position);\n            const path = buildPath(font.glyphs, glyph);\n            path.unitsPerEm = font.unitsPerEm;\n            return path;\n        };\n\n        defineDependentProperty(glyph, 'xMin', '_xMin');\n        defineDependentProperty(glyph, 'xMax', '_xMax');\n        defineDependentProperty(glyph, 'yMin', '_yMin');\n        defineDependentProperty(glyph, 'yMax', '_yMax');\n\n        return glyph;\n    };\n}\n/**\n * @alias opentype.cffGlyphLoader\n * @param  {opentype.Font} font\n * @param  {number} index\n * @param  {Function} parseCFFCharstring\n * @param  {string} charstring\n * @return {opentype.Glyph}\n */\nfunction cffGlyphLoader(font, index, parseCFFCharstring, charstring) {\n    return function() {\n        const glyph = new Glyph({index: index, font: font});\n\n        glyph.path = function() {\n            const path = parseCFFCharstring(font, glyph, charstring);\n            path.unitsPerEm = font.unitsPerEm;\n            return path;\n        };\n\n        return glyph;\n    };\n}\n\nexport default { GlyphSet, glyphLoader, ttfGlyphLoader, cffGlyphLoader };\n", "// The `CFF` table contains the glyph outlines in PostScript format.\n// https://www.microsoft.com/typography/OTSPEC/cff.htm\n// http://download.microsoft.com/download/8/0/1/801a191c-029d-4af3-9642-555f6fe514ee/cff.pdf\n// http://download.microsoft.com/download/8/0/1/801a191c-029d-4af3-9642-555f6fe514ee/type2.pdf\n\nimport { CffEncoding, cffStandardEncoding, cffExpertEncoding, cffStandardStrings } from '../encoding';\nimport glyphset from '../glyphset';\nimport parse from '../parse';\nimport Path from '../path';\nimport table from '../table';\n\n// Custom equals function that can also check lists.\nfunction equals(a, b) {\n    if (a === b) {\n        return true;\n    } else if (Array.isArray(a) && Array.isArray(b)) {\n        if (a.length !== b.length) {\n            return false;\n        }\n\n        for (let i = 0; i < a.length; i += 1) {\n            if (!equals(a[i], b[i])) {\n                return false;\n            }\n        }\n\n        return true;\n    } else {\n        return false;\n    }\n}\n\n// Subroutines are encoded using the negative half of the number space.\n// See type 2 chapter 4.7 \"Subroutine operators\".\nfunction calcCFFSubroutineBias(subrs) {\n    let bias;\n    if (subrs.length < 1240) {\n        bias = 107;\n    } else if (subrs.length < 33900) {\n        bias = 1131;\n    } else {\n        bias = 32768;\n    }\n\n    return bias;\n}\n\n// Parse a `CFF` INDEX array.\n// An index array consists of a list of offsets, then a list of objects at those offsets.\nfunction parseCFFIndex(data, start, conversionFn) {\n    const offsets = [];\n    const objects = [];\n    const count = parse.getCard16(data, start);\n    let objectOffset;\n    let endOffset;\n    if (count !== 0) {\n        const offsetSize = parse.getByte(data, start + 2);\n        objectOffset = start + ((count + 1) * offsetSize) + 2;\n        let pos = start + 3;\n        for (let i = 0; i < count + 1; i += 1) {\n            offsets.push(parse.getOffset(data, pos, offsetSize));\n            pos += offsetSize;\n        }\n\n        // The total size of the index array is 4 header bytes + the value of the last offset.\n        endOffset = objectOffset + offsets[count];\n    } else {\n        endOffset = start + 2;\n    }\n\n    for (let i = 0; i < offsets.length - 1; i += 1) {\n        let value = parse.getBytes(data, objectOffset + offsets[i], objectOffset + offsets[i + 1]);\n        if (conversionFn) {\n            value = conversionFn(value);\n        }\n\n        objects.push(value);\n    }\n\n    return {objects: objects, startOffset: start, endOffset: endOffset};\n}\n\nfunction parseCFFIndexLowMemory(data, start) {\n    const offsets = [];\n    const count = parse.getCard16(data, start);\n    let objectOffset;\n    let endOffset;\n    if (count !== 0) {\n        const offsetSize = parse.getByte(data, start + 2);\n        objectOffset = start + ((count + 1) * offsetSize) + 2;\n        let pos = start + 3;\n        for (let i = 0; i < count + 1; i += 1) {\n            offsets.push(parse.getOffset(data, pos, offsetSize));\n            pos += offsetSize;\n        }\n\n        // The total size of the index array is 4 header bytes + the value of the last offset.\n        endOffset = objectOffset + offsets[count];\n    } else {\n        endOffset = start + 2;\n    }\n\n    return {offsets: offsets, startOffset: start, endOffset: endOffset};\n}\nfunction getCffIndexObject(i, offsets, data, start, conversionFn) {\n    const count = parse.getCard16(data, start);\n    let objectOffset = 0;\n    if (count !== 0) {\n        const offsetSize = parse.getByte(data, start + 2);\n        objectOffset = start + ((count + 1) * offsetSize) + 2;\n    }\n\n    let value = parse.getBytes(data, objectOffset + offsets[i], objectOffset + offsets[i + 1]);\n    if (conversionFn) {\n        value = conversionFn(value);\n    }\n    return value;\n}\n\n// Parse a `CFF` DICT real value.\nfunction parseFloatOperand(parser) {\n    let s = '';\n    const eof = 15;\n    const lookup = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', '.', 'E', 'E-', null, '-'];\n    while (true) {\n        const b = parser.parseByte();\n        const n1 = b >> 4;\n        const n2 = b & 15;\n\n        if (n1 === eof) {\n            break;\n        }\n\n        s += lookup[n1];\n\n        if (n2 === eof) {\n            break;\n        }\n\n        s += lookup[n2];\n    }\n\n    return parseFloat(s);\n}\n\n// Parse a `CFF` DICT operand.\nfunction parseOperand(parser, b0) {\n    let b1;\n    let b2;\n    let b3;\n    let b4;\n    if (b0 === 28) {\n        b1 = parser.parseByte();\n        b2 = parser.parseByte();\n        return b1 << 8 | b2;\n    }\n\n    if (b0 === 29) {\n        b1 = parser.parseByte();\n        b2 = parser.parseByte();\n        b3 = parser.parseByte();\n        b4 = parser.parseByte();\n        return b1 << 24 | b2 << 16 | b3 << 8 | b4;\n    }\n\n    if (b0 === 30) {\n        return parseFloatOperand(parser);\n    }\n\n    if (b0 >= 32 && b0 <= 246) {\n        return b0 - 139;\n    }\n\n    if (b0 >= 247 && b0 <= 250) {\n        b1 = parser.parseByte();\n        return (b0 - 247) * 256 + b1 + 108;\n    }\n\n    if (b0 >= 251 && b0 <= 254) {\n        b1 = parser.parseByte();\n        return -(b0 - 251) * 256 - b1 - 108;\n    }\n\n    throw new Error('Invalid b0 ' + b0);\n}\n\n// Convert the entries returned by `parseDict` to a proper dictionary.\n// If a value is a list of one, it is unpacked.\nfunction entriesToObject(entries) {\n    const o = {};\n    for (let i = 0; i < entries.length; i += 1) {\n        const key = entries[i][0];\n        const values = entries[i][1];\n        let value;\n        if (values.length === 1) {\n            value = values[0];\n        } else {\n            value = values;\n        }\n\n        if (o.hasOwnProperty(key) && !isNaN(o[key])) {\n            throw new Error('Object ' + o + ' already has key ' + key);\n        }\n\n        o[key] = value;\n    }\n\n    return o;\n}\n\n// Parse a `CFF` DICT object.\n// A dictionary contains key-value pairs in a compact tokenized format.\nfunction parseCFFDict(data, start, size) {\n    start = start !== undefined ? start : 0;\n    const parser = new parse.Parser(data, start);\n    const entries = [];\n    let operands = [];\n    size = size !== undefined ? size : data.length;\n\n    while (parser.relativeOffset < size) {\n        let op = parser.parseByte();\n\n        // The first byte for each dict item distinguishes between operator (key) and operand (value).\n        // Values <= 21 are operators.\n        if (op <= 21) {\n            // Two-byte operators have an initial escape byte of 12.\n            if (op === 12) {\n                op = 1200 + parser.parseByte();\n            }\n\n            entries.push([op, operands]);\n            operands = [];\n        } else {\n            // Since the operands (values) come before the operators (keys), we store all operands in a list\n            // until we encounter an operator.\n            operands.push(parseOperand(parser, op));\n        }\n    }\n\n    return entriesToObject(entries);\n}\n\n// Given a String Index (SID), return the value of the string.\n// Strings below index 392 are standard CFF strings and are not encoded in the font.\nfunction getCFFString(strings, index) {\n    if (index <= 390) {\n        index = cffStandardStrings[index];\n    } else {\n        index = strings[index - 391];\n    }\n\n    return index;\n}\n\n// Interpret a dictionary and return a new dictionary with readable keys and values for missing entries.\n// This function takes `meta` which is a list of objects containing `operand`, `name` and `default`.\nfunction interpretDict(dict, meta, strings) {\n    const newDict = {};\n    let value;\n\n    // Because we also want to include missing values, we start out from the meta list\n    // and lookup values in the dict.\n    for (let i = 0; i < meta.length; i += 1) {\n        const m = meta[i];\n\n        if (Array.isArray(m.type)) {\n            const values = [];\n            values.length = m.type.length;\n            for (let j = 0; j < m.type.length; j++) {\n                value = dict[m.op] !== undefined ? dict[m.op][j] : undefined;\n                if (value === undefined) {\n                    value = m.value !== undefined && m.value[j] !== undefined ? m.value[j] : null;\n                }\n                if (m.type[j] === 'SID') {\n                    value = getCFFString(strings, value);\n                }\n                values[j] = value;\n            }\n            newDict[m.name] = values;\n        } else {\n            value = dict[m.op];\n            if (value === undefined) {\n                value = m.value !== undefined ? m.value : null;\n            }\n\n            if (m.type === 'SID') {\n                value = getCFFString(strings, value);\n            }\n            newDict[m.name] = value;\n        }\n    }\n\n    return newDict;\n}\n\n// Parse the CFF header.\nfunction parseCFFHeader(data, start) {\n    const header = {};\n    header.formatMajor = parse.getCard8(data, start);\n    header.formatMinor = parse.getCard8(data, start + 1);\n    header.size = parse.getCard8(data, start + 2);\n    header.offsetSize = parse.getCard8(data, start + 3);\n    header.startOffset = start;\n    header.endOffset = start + 4;\n    return header;\n}\n\nconst TOP_DICT_META = [\n    {name: 'version', op: 0, type: 'SID'},\n    {name: 'notice', op: 1, type: 'SID'},\n    {name: 'copyright', op: 1200, type: 'SID'},\n    {name: 'fullName', op: 2, type: 'SID'},\n    {name: 'familyName', op: 3, type: 'SID'},\n    {name: 'weight', op: 4, type: 'SID'},\n    {name: 'isFixedPitch', op: 1201, type: 'number', value: 0},\n    {name: 'italicAngle', op: 1202, type: 'number', value: 0},\n    {name: 'underlinePosition', op: 1203, type: 'number', value: -100},\n    {name: 'underlineThickness', op: 1204, type: 'number', value: 50},\n    {name: 'paintType', op: 1205, type: 'number', value: 0},\n    {name: 'charstringType', op: 1206, type: 'number', value: 2},\n    {\n        name: 'fontMatrix',\n        op: 1207,\n        type: ['real', 'real', 'real', 'real', 'real', 'real'],\n        value: [0.001, 0, 0, 0.001, 0, 0]\n    },\n    {name: 'uniqueId', op: 13, type: 'number'},\n    {name: 'fontBBox', op: 5, type: ['number', 'number', 'number', 'number'], value: [0, 0, 0, 0]},\n    {name: 'strokeWidth', op: 1208, type: 'number', value: 0},\n    {name: 'xuid', op: 14, type: [], value: null},\n    {name: 'charset', op: 15, type: 'offset', value: 0},\n    {name: 'encoding', op: 16, type: 'offset', value: 0},\n    {name: 'charStrings', op: 17, type: 'offset', value: 0},\n    {name: 'private', op: 18, type: ['number', 'offset'], value: [0, 0]},\n    {name: 'ros', op: 1230, type: ['SID', 'SID', 'number']},\n    {name: 'cidFontVersion', op: 1231, type: 'number', value: 0},\n    {name: 'cidFontRevision', op: 1232, type: 'number', value: 0},\n    {name: 'cidFontType', op: 1233, type: 'number', value: 0},\n    {name: 'cidCount', op: 1234, type: 'number', value: 8720},\n    {name: 'uidBase', op: 1235, type: 'number'},\n    {name: 'fdArray', op: 1236, type: 'offset'},\n    {name: 'fdSelect', op: 1237, type: 'offset'},\n    {name: 'fontName', op: 1238, type: 'SID'}\n];\n\nconst PRIVATE_DICT_META = [\n    {name: 'subrs', op: 19, type: 'offset', value: 0},\n    {name: 'defaultWidthX', op: 20, type: 'number', value: 0},\n    {name: 'nominalWidthX', op: 21, type: 'number', value: 0}\n];\n\n// Parse the CFF top dictionary. A CFF table can contain multiple fonts, each with their own top dictionary.\n// The top dictionary contains the essential metadata for the font, together with the private dictionary.\nfunction parseCFFTopDict(data, strings) {\n    const dict = parseCFFDict(data, 0, data.byteLength);\n    return interpretDict(dict, TOP_DICT_META, strings);\n}\n\n// Parse the CFF private dictionary. We don't fully parse out all the values, only the ones we need.\nfunction parseCFFPrivateDict(data, start, size, strings) {\n    const dict = parseCFFDict(data, start, size);\n    return interpretDict(dict, PRIVATE_DICT_META, strings);\n}\n\n// Returns a list of \"Top DICT\"s found using an INDEX list.\n// Used to read both the usual high-level Top DICTs and also the FDArray\n// discovered inside CID-keyed fonts.  When a Top DICT has a reference to\n// a Private DICT that is read and saved into the Top DICT.\n//\n// In addition to the expected/optional values as outlined in TOP_DICT_META\n// the following values might be saved into the Top DICT.\n//\n//    _subrs []        array of local CFF subroutines from Private DICT\n//    _subrsBias       bias value computed from number of subroutines\n//                      (see calcCFFSubroutineBias() and parseCFFCharstring())\n//    _defaultWidthX   default widths for CFF characters\n//    _nominalWidthX   bias added to width embedded within glyph description\n//\n//    _privateDict     saved copy of parsed Private DICT from Top DICT\nfunction gatherCFFTopDicts(data, start, cffIndex, strings) {\n    const topDictArray = [];\n    for (let iTopDict = 0; iTopDict < cffIndex.length; iTopDict += 1) {\n        const topDictData = new DataView(new Uint8Array(cffIndex[iTopDict]).buffer);\n        const topDict = parseCFFTopDict(topDictData, strings);\n        topDict._subrs = [];\n        topDict._subrsBias = 0;\n        topDict._defaultWidthX = 0;\n        topDict._nominalWidthX = 0;\n        const privateSize = topDict.private[0];\n        const privateOffset = topDict.private[1];\n        if (privateSize !== 0 && privateOffset !== 0) {\n            const privateDict = parseCFFPrivateDict(data, privateOffset + start, privateSize, strings);\n            topDict._defaultWidthX = privateDict.defaultWidthX;\n            topDict._nominalWidthX = privateDict.nominalWidthX;\n            if (privateDict.subrs !== 0) {\n                const subrOffset = privateOffset + privateDict.subrs;\n                const subrIndex = parseCFFIndex(data, subrOffset + start);\n                topDict._subrs = subrIndex.objects;\n                topDict._subrsBias = calcCFFSubroutineBias(topDict._subrs);\n            }\n            topDict._privateDict = privateDict;\n        }\n        topDictArray.push(topDict);\n    }\n    return topDictArray;\n}\n\n// Parse the CFF charset table, which contains internal names for all the glyphs.\n// This function will return a list of glyph names.\n// See Adobe TN #5176 chapter 13, \"Charsets\".\nfunction parseCFFCharset(data, start, nGlyphs, strings) {\n    let sid;\n    let count;\n    const parser = new parse.Parser(data, start);\n\n    // The .notdef glyph is not included, so subtract 1.\n    nGlyphs -= 1;\n    const charset = ['.notdef'];\n\n    const format = parser.parseCard8();\n    if (format === 0) {\n        for (let i = 0; i < nGlyphs; i += 1) {\n            sid = parser.parseSID();\n            charset.push(getCFFString(strings, sid));\n        }\n    } else if (format === 1) {\n        while (charset.length <= nGlyphs) {\n            sid = parser.parseSID();\n            count = parser.parseCard8();\n            for (let i = 0; i <= count; i += 1) {\n                charset.push(getCFFString(strings, sid));\n                sid += 1;\n            }\n        }\n    } else if (format === 2) {\n        while (charset.length <= nGlyphs) {\n            sid = parser.parseSID();\n            count = parser.parseCard16();\n            for (let i = 0; i <= count; i += 1) {\n                charset.push(getCFFString(strings, sid));\n                sid += 1;\n            }\n        }\n    } else {\n        throw new Error('Unknown charset format ' + format);\n    }\n\n    return charset;\n}\n\n// Parse the CFF encoding data. Only one encoding can be specified per font.\n// See Adobe TN #5176 chapter 12, \"Encodings\".\nfunction parseCFFEncoding(data, start, charset) {\n    let code;\n    const enc = {};\n    const parser = new parse.Parser(data, start);\n    const format = parser.parseCard8();\n    if (format === 0) {\n        const nCodes = parser.parseCard8();\n        for (let i = 0; i < nCodes; i += 1) {\n            code = parser.parseCard8();\n            enc[code] = i;\n        }\n    } else if (format === 1) {\n        const nRanges = parser.parseCard8();\n        code = 1;\n        for (let i = 0; i < nRanges; i += 1) {\n            const first = parser.parseCard8();\n            const nLeft = parser.parseCard8();\n            for (let j = first; j <= first + nLeft; j += 1) {\n                enc[j] = code;\n                code += 1;\n            }\n        }\n    } else {\n        throw new Error('Unknown encoding format ' + format);\n    }\n\n    return new CffEncoding(enc, charset);\n}\n\n// Take in charstring code and return a Glyph object.\n// The encoding is described in the Type 2 Charstring Format\n// https://www.microsoft.com/typography/OTSPEC/charstr2.htm\nfunction parseCFFCharstring(font, glyph, code) {\n    let c1x;\n    let c1y;\n    let c2x;\n    let c2y;\n    const p = new Path();\n    const stack = [];\n    let nStems = 0;\n    let haveWidth = false;\n    let open = false;\n    let x = 0;\n    let y = 0;\n    let subrs;\n    let subrsBias;\n    let defaultWidthX;\n    let nominalWidthX;\n    if (font.isCIDFont) {\n        const fdIndex = font.tables.cff.topDict._fdSelect[glyph.index];\n        const fdDict = font.tables.cff.topDict._fdArray[fdIndex];\n        subrs = fdDict._subrs;\n        subrsBias = fdDict._subrsBias;\n        defaultWidthX = fdDict._defaultWidthX;\n        nominalWidthX = fdDict._nominalWidthX;\n    } else {\n        subrs = font.tables.cff.topDict._subrs;\n        subrsBias = font.tables.cff.topDict._subrsBias;\n        defaultWidthX = font.tables.cff.topDict._defaultWidthX;\n        nominalWidthX = font.tables.cff.topDict._nominalWidthX;\n    }\n    let width = defaultWidthX;\n\n    function newContour(x, y) {\n        if (open) {\n            p.closePath();\n        }\n\n        p.moveTo(x, y);\n        open = true;\n    }\n\n    function parseStems() {\n        let hasWidthArg;\n\n        // The number of stem operators on the stack is always even.\n        // If the value is uneven, that means a width is specified.\n        hasWidthArg = stack.length % 2 !== 0;\n        if (hasWidthArg && !haveWidth) {\n            width = stack.shift() + nominalWidthX;\n        }\n\n        nStems += stack.length >> 1;\n        stack.length = 0;\n        haveWidth = true;\n    }\n\n    function parse(code) {\n        let b1;\n        let b2;\n        let b3;\n        let b4;\n        let codeIndex;\n        let subrCode;\n        let jpx;\n        let jpy;\n        let c3x;\n        let c3y;\n        let c4x;\n        let c4y;\n\n        let i = 0;\n        while (i < code.length) {\n            let v = code[i];\n            i += 1;\n            switch (v) {\n                case 1: // hstem\n                    parseStems();\n                    break;\n                case 3: // vstem\n                    parseStems();\n                    break;\n                case 4: // vmoveto\n                    if (stack.length > 1 && !haveWidth) {\n                        width = stack.shift() + nominalWidthX;\n                        haveWidth = true;\n                    }\n\n                    y += stack.pop();\n                    newContour(x, y);\n                    break;\n                case 5: // rlineto\n                    while (stack.length > 0) {\n                        x += stack.shift();\n                        y += stack.shift();\n                        p.lineTo(x, y);\n                    }\n\n                    break;\n                case 6: // hlineto\n                    while (stack.length > 0) {\n                        x += stack.shift();\n                        p.lineTo(x, y);\n                        if (stack.length === 0) {\n                            break;\n                        }\n\n                        y += stack.shift();\n                        p.lineTo(x, y);\n                    }\n\n                    break;\n                case 7: // vlineto\n                    while (stack.length > 0) {\n                        y += stack.shift();\n                        p.lineTo(x, y);\n                        if (stack.length === 0) {\n                            break;\n                        }\n\n                        x += stack.shift();\n                        p.lineTo(x, y);\n                    }\n\n                    break;\n                case 8: // rrcurveto\n                    while (stack.length > 0) {\n                        c1x = x + stack.shift();\n                        c1y = y + stack.shift();\n                        c2x = c1x + stack.shift();\n                        c2y = c1y + stack.shift();\n                        x = c2x + stack.shift();\n                        y = c2y + stack.shift();\n                        p.curveTo(c1x, c1y, c2x, c2y, x, y);\n                    }\n\n                    break;\n                case 10: // callsubr\n                    codeIndex = stack.pop() + subrsBias;\n                    subrCode = subrs[codeIndex];\n                    if (subrCode) {\n                        parse(subrCode);\n                    }\n\n                    break;\n                case 11: // return\n                    return;\n                case 12: // flex operators\n                    v = code[i];\n                    i += 1;\n                    switch (v) {\n                        case 35: // flex\n                            // |- dx1 dy1 dx2 dy2 dx3 dy3 dx4 dy4 dx5 dy5 dx6 dy6 fd flex (12 35) |-\n                            c1x = x   + stack.shift();    // dx1\n                            c1y = y   + stack.shift();    // dy1\n                            c2x = c1x + stack.shift();    // dx2\n                            c2y = c1y + stack.shift();    // dy2\n                            jpx = c2x + stack.shift();    // dx3\n                            jpy = c2y + stack.shift();    // dy3\n                            c3x = jpx + stack.shift();    // dx4\n                            c3y = jpy + stack.shift();    // dy4\n                            c4x = c3x + stack.shift();    // dx5\n                            c4y = c3y + stack.shift();    // dy5\n                            x = c4x   + stack.shift();    // dx6\n                            y = c4y   + stack.shift();    // dy6\n                            stack.shift();                // flex depth\n                            p.curveTo(c1x, c1y, c2x, c2y, jpx, jpy);\n                            p.curveTo(c3x, c3y, c4x, c4y, x, y);\n                            break;\n                        case 34: // hflex\n                            // |- dx1 dx2 dy2 dx3 dx4 dx5 dx6 hflex (12 34) |-\n                            c1x = x   + stack.shift();    // dx1\n                            c1y = y;                      // dy1\n                            c2x = c1x + stack.shift();    // dx2\n                            c2y = c1y + stack.shift();    // dy2\n                            jpx = c2x + stack.shift();    // dx3\n                            jpy = c2y;                    // dy3\n                            c3x = jpx + stack.shift();    // dx4\n                            c3y = c2y;                    // dy4\n                            c4x = c3x + stack.shift();    // dx5\n                            c4y = y;                      // dy5\n                            x = c4x + stack.shift();      // dx6\n                            p.curveTo(c1x, c1y, c2x, c2y, jpx, jpy);\n                            p.curveTo(c3x, c3y, c4x, c4y, x, y);\n                            break;\n                        case 36: // hflex1\n                            // |- dx1 dy1 dx2 dy2 dx3 dx4 dx5 dy5 dx6 hflex1 (12 36) |-\n                            c1x = x   + stack.shift();    // dx1\n                            c1y = y   + stack.shift();    // dy1\n                            c2x = c1x + stack.shift();    // dx2\n                            c2y = c1y + stack.shift();    // dy2\n                            jpx = c2x + stack.shift();    // dx3\n                            jpy = c2y;                    // dy3\n                            c3x = jpx + stack.shift();    // dx4\n                            c3y = c2y;                    // dy4\n                            c4x = c3x + stack.shift();    // dx5\n                            c4y = c3y + stack.shift();    // dy5\n                            x = c4x + stack.shift();      // dx6\n                            p.curveTo(c1x, c1y, c2x, c2y, jpx, jpy);\n                            p.curveTo(c3x, c3y, c4x, c4y, x, y);\n                            break;\n                        case 37: // flex1\n                            // |- dx1 dy1 dx2 dy2 dx3 dy3 dx4 dy4 dx5 dy5 d6 flex1 (12 37) |-\n                            c1x = x   + stack.shift();    // dx1\n                            c1y = y   + stack.shift();    // dy1\n                            c2x = c1x + stack.shift();    // dx2\n                            c2y = c1y + stack.shift();    // dy2\n                            jpx = c2x + stack.shift();    // dx3\n                            jpy = c2y + stack.shift();    // dy3\n                            c3x = jpx + stack.shift();    // dx4\n                            c3y = jpy + stack.shift();    // dy4\n                            c4x = c3x + stack.shift();    // dx5\n                            c4y = c3y + stack.shift();    // dy5\n                            if (Math.abs(c4x - x) > Math.abs(c4y - y)) {\n                                x = c4x + stack.shift();\n                            } else {\n                                y = c4y + stack.shift();\n                            }\n\n                            p.curveTo(c1x, c1y, c2x, c2y, jpx, jpy);\n                            p.curveTo(c3x, c3y, c4x, c4y, x, y);\n                            break;\n                        default:\n                            console.log('Glyph ' + glyph.index + ': unknown operator ' + 1200 + v);\n                            stack.length = 0;\n                    }\n                    break;\n                case 14: // endchar\n                    if (stack.length > 0 && !haveWidth) {\n                        width = stack.shift() + nominalWidthX;\n                        haveWidth = true;\n                    }\n\n                    if (open) {\n                        p.closePath();\n                        open = false;\n                    }\n\n                    break;\n                case 18: // hstemhm\n                    parseStems();\n                    break;\n                case 19: // hintmask\n                case 20: // cntrmask\n                    parseStems();\n                    i += (nStems + 7) >> 3;\n                    break;\n                case 21: // rmoveto\n                    if (stack.length > 2 && !haveWidth) {\n                        width = stack.shift() + nominalWidthX;\n                        haveWidth = true;\n                    }\n\n                    y += stack.pop();\n                    x += stack.pop();\n                    newContour(x, y);\n                    break;\n                case 22: // hmoveto\n                    if (stack.length > 1 && !haveWidth) {\n                        width = stack.shift() + nominalWidthX;\n                        haveWidth = true;\n                    }\n\n                    x += stack.pop();\n                    newContour(x, y);\n                    break;\n                case 23: // vstemhm\n                    parseStems();\n                    break;\n                case 24: // rcurveline\n                    while (stack.length > 2) {\n                        c1x = x + stack.shift();\n                        c1y = y + stack.shift();\n                        c2x = c1x + stack.shift();\n                        c2y = c1y + stack.shift();\n                        x = c2x + stack.shift();\n                        y = c2y + stack.shift();\n                        p.curveTo(c1x, c1y, c2x, c2y, x, y);\n                    }\n\n                    x += stack.shift();\n                    y += stack.shift();\n                    p.lineTo(x, y);\n                    break;\n                case 25: // rlinecurve\n                    while (stack.length > 6) {\n                        x += stack.shift();\n                        y += stack.shift();\n                        p.lineTo(x, y);\n                    }\n\n                    c1x = x + stack.shift();\n                    c1y = y + stack.shift();\n                    c2x = c1x + stack.shift();\n                    c2y = c1y + stack.shift();\n                    x = c2x + stack.shift();\n                    y = c2y + stack.shift();\n                    p.curveTo(c1x, c1y, c2x, c2y, x, y);\n                    break;\n                case 26: // vvcurveto\n                    if (stack.length % 2) {\n                        x += stack.shift();\n                    }\n\n                    while (stack.length > 0) {\n                        c1x = x;\n                        c1y = y + stack.shift();\n                        c2x = c1x + stack.shift();\n                        c2y = c1y + stack.shift();\n                        x = c2x;\n                        y = c2y + stack.shift();\n                        p.curveTo(c1x, c1y, c2x, c2y, x, y);\n                    }\n\n                    break;\n                case 27: // hhcurveto\n                    if (stack.length % 2) {\n                        y += stack.shift();\n                    }\n\n                    while (stack.length > 0) {\n                        c1x = x + stack.shift();\n                        c1y = y;\n                        c2x = c1x + stack.shift();\n                        c2y = c1y + stack.shift();\n                        x = c2x + stack.shift();\n                        y = c2y;\n                        p.curveTo(c1x, c1y, c2x, c2y, x, y);\n                    }\n\n                    break;\n                case 28: // shortint\n                    b1 = code[i];\n                    b2 = code[i + 1];\n                    stack.push(((b1 << 24) | (b2 << 16)) >> 16);\n                    i += 2;\n                    break;\n                case 29: // callgsubr\n                    codeIndex = stack.pop() + font.gsubrsBias;\n                    subrCode = font.gsubrs[codeIndex];\n                    if (subrCode) {\n                        parse(subrCode);\n                    }\n\n                    break;\n                case 30: // vhcurveto\n                    while (stack.length > 0) {\n                        c1x = x;\n                        c1y = y + stack.shift();\n                        c2x = c1x + stack.shift();\n                        c2y = c1y + stack.shift();\n                        x = c2x + stack.shift();\n                        y = c2y + (stack.length === 1 ? stack.shift() : 0);\n                        p.curveTo(c1x, c1y, c2x, c2y, x, y);\n                        if (stack.length === 0) {\n                            break;\n                        }\n\n                        c1x = x + stack.shift();\n                        c1y = y;\n                        c2x = c1x + stack.shift();\n                        c2y = c1y + stack.shift();\n                        y = c2y + stack.shift();\n                        x = c2x + (stack.length === 1 ? stack.shift() : 0);\n                        p.curveTo(c1x, c1y, c2x, c2y, x, y);\n                    }\n\n                    break;\n                case 31: // hvcurveto\n                    while (stack.length > 0) {\n                        c1x = x + stack.shift();\n                        c1y = y;\n                        c2x = c1x + stack.shift();\n                        c2y = c1y + stack.shift();\n                        y = c2y + stack.shift();\n                        x = c2x + (stack.length === 1 ? stack.shift() : 0);\n                        p.curveTo(c1x, c1y, c2x, c2y, x, y);\n                        if (stack.length === 0) {\n                            break;\n                        }\n\n                        c1x = x;\n                        c1y = y + stack.shift();\n                        c2x = c1x + stack.shift();\n                        c2y = c1y + stack.shift();\n                        x = c2x + stack.shift();\n                        y = c2y + (stack.length === 1 ? stack.shift() : 0);\n                        p.curveTo(c1x, c1y, c2x, c2y, x, y);\n                    }\n\n                    break;\n                default:\n                    if (v < 32) {\n                        console.log('Glyph ' + glyph.index + ': unknown operator ' + v);\n                    } else if (v < 247) {\n                        stack.push(v - 139);\n                    } else if (v < 251) {\n                        b1 = code[i];\n                        i += 1;\n                        stack.push((v - 247) * 256 + b1 + 108);\n                    } else if (v < 255) {\n                        b1 = code[i];\n                        i += 1;\n                        stack.push(-(v - 251) * 256 - b1 - 108);\n                    } else {\n                        b1 = code[i];\n                        b2 = code[i + 1];\n                        b3 = code[i + 2];\n                        b4 = code[i + 3];\n                        i += 4;\n                        stack.push(((b1 << 24) | (b2 << 16) | (b3 << 8) | b4) / 65536);\n                    }\n            }\n        }\n    }\n\n    parse(code);\n\n    glyph.advanceWidth = width;\n    return p;\n}\n\nfunction parseCFFFDSelect(data, start, nGlyphs, fdArrayCount) {\n    const fdSelect = [];\n    let fdIndex;\n    const parser = new parse.Parser(data, start);\n    const format = parser.parseCard8();\n    if (format === 0) {\n        // Simple list of nGlyphs elements\n        for (let iGid = 0; iGid < nGlyphs; iGid++) {\n            fdIndex = parser.parseCard8();\n            if (fdIndex >= fdArrayCount) {\n                throw new Error('CFF table CID Font FDSelect has bad FD index value ' + fdIndex + ' (FD count ' + fdArrayCount + ')');\n            }\n            fdSelect.push(fdIndex);\n        }\n    } else if (format === 3) {\n        // Ranges\n        const nRanges = parser.parseCard16();\n        let first = parser.parseCard16();\n        if (first !== 0) {\n            throw new Error('CFF Table CID Font FDSelect format 3 range has bad initial GID ' + first);\n        }\n        let next;\n        for (let iRange = 0; iRange < nRanges; iRange++) {\n            fdIndex = parser.parseCard8();\n            next = parser.parseCard16();\n            if (fdIndex >= fdArrayCount) {\n                throw new Error('CFF table CID Font FDSelect has bad FD index value ' + fdIndex + ' (FD count ' + fdArrayCount + ')');\n            }\n            if (next > nGlyphs) {\n                throw new Error('CFF Table CID Font FDSelect format 3 range has bad GID ' + next);\n            }\n            for (; first < next; first++) {\n                fdSelect.push(fdIndex);\n            }\n            first = next;\n        }\n        if (next !== nGlyphs) {\n            throw new Error('CFF Table CID Font FDSelect format 3 range has bad final GID ' + next);\n        }\n    } else {\n        throw new Error('CFF Table CID Font FDSelect table has unsupported format ' + format);\n    }\n    return fdSelect;\n}\n\n// Parse the `CFF` table, which contains the glyph outlines in PostScript format.\nfunction parseCFFTable(data, start, font, opt) {\n    font.tables.cff = {};\n    const header = parseCFFHeader(data, start);\n    const nameIndex = parseCFFIndex(data, header.endOffset, parse.bytesToString);\n    const topDictIndex = parseCFFIndex(data, nameIndex.endOffset);\n    const stringIndex = parseCFFIndex(data, topDictIndex.endOffset, parse.bytesToString);\n    const globalSubrIndex = parseCFFIndex(data, stringIndex.endOffset);\n    font.gsubrs = globalSubrIndex.objects;\n    font.gsubrsBias = calcCFFSubroutineBias(font.gsubrs);\n\n    const topDictArray = gatherCFFTopDicts(data, start, topDictIndex.objects, stringIndex.objects);\n    if (topDictArray.length !== 1) {\n        throw new Error('CFF table has too many fonts in \\'FontSet\\' - count of fonts NameIndex.length = ' + topDictArray.length);\n    }\n\n    const topDict = topDictArray[0];\n    font.tables.cff.topDict = topDict;\n\n    if (topDict._privateDict) {\n        font.defaultWidthX = topDict._privateDict.defaultWidthX;\n        font.nominalWidthX = topDict._privateDict.nominalWidthX;\n    }\n\n    if (topDict.ros[0] !== undefined && topDict.ros[1] !== undefined) {\n        font.isCIDFont = true;\n    }\n\n    if (font.isCIDFont) {\n        let fdArrayOffset = topDict.fdArray;\n        let fdSelectOffset = topDict.fdSelect;\n        if (fdArrayOffset === 0 || fdSelectOffset === 0) {\n            throw new Error('Font is marked as a CID font, but FDArray and/or FDSelect information is missing');\n        }\n        fdArrayOffset += start;\n        const fdArrayIndex = parseCFFIndex(data, fdArrayOffset);\n        const fdArray = gatherCFFTopDicts(data, start, fdArrayIndex.objects, stringIndex.objects);\n        topDict._fdArray = fdArray;\n        fdSelectOffset += start;\n        topDict._fdSelect = parseCFFFDSelect(data, fdSelectOffset, font.numGlyphs, fdArray.length);\n    }\n\n    const privateDictOffset = start + topDict.private[1];\n    const privateDict = parseCFFPrivateDict(data, privateDictOffset, topDict.private[0], stringIndex.objects);\n    font.defaultWidthX = privateDict.defaultWidthX;\n    font.nominalWidthX = privateDict.nominalWidthX;\n\n    if (privateDict.subrs !== 0) {\n        const subrOffset = privateDictOffset + privateDict.subrs;\n        const subrIndex = parseCFFIndex(data, subrOffset);\n        font.subrs = subrIndex.objects;\n        font.subrsBias = calcCFFSubroutineBias(font.subrs);\n    } else {\n        font.subrs = [];\n        font.subrsBias = 0;\n    }\n\n    // Offsets in the top dict are relative to the beginning of the CFF data, so add the CFF start offset.\n    let charStringsIndex;\n    if (opt.lowMemory) {\n        charStringsIndex = parseCFFIndexLowMemory(data, start + topDict.charStrings);\n        font.nGlyphs = charStringsIndex.offsets.length;\n    } else {\n        charStringsIndex = parseCFFIndex(data, start + topDict.charStrings);\n        font.nGlyphs = charStringsIndex.objects.length;\n    }\n\n    const charset = parseCFFCharset(data, start + topDict.charset, font.nGlyphs, stringIndex.objects);\n    if (topDict.encoding === 0) {\n        // Standard encoding\n        font.cffEncoding = new CffEncoding(cffStandardEncoding, charset);\n    } else if (topDict.encoding === 1) {\n        // Expert encoding\n        font.cffEncoding = new CffEncoding(cffExpertEncoding, charset);\n    } else {\n        font.cffEncoding = parseCFFEncoding(data, start + topDict.encoding, charset);\n    }\n\n    // Prefer the CMAP encoding to the CFF encoding.\n    font.encoding = font.encoding || font.cffEncoding;\n\n    font.glyphs = new glyphset.GlyphSet(font);\n    if (opt.lowMemory) {\n        font._push = function(i) {\n            const charString = getCffIndexObject(i, charStringsIndex.offsets, data, start + topDict.charStrings);\n            font.glyphs.push(i, glyphset.cffGlyphLoader(font, i, parseCFFCharstring, charString));\n        };\n    } else {\n        for (let i = 0; i < font.nGlyphs; i += 1) {\n            const charString = charStringsIndex.objects[i];\n            font.glyphs.push(i, glyphset.cffGlyphLoader(font, i, parseCFFCharstring, charString));\n        }\n    }\n}\n\n// Convert a string to a String ID (SID).\n// The list of strings is modified in place.\nfunction encodeString(s, strings) {\n    let sid;\n\n    // Is the string in the CFF standard strings?\n    let i = cffStandardStrings.indexOf(s);\n    if (i >= 0) {\n        sid = i;\n    }\n\n    // Is the string already in the string index?\n    i = strings.indexOf(s);\n    if (i >= 0) {\n        sid = i + cffStandardStrings.length;\n    } else {\n        sid = cffStandardStrings.length + strings.length;\n        strings.push(s);\n    }\n\n    return sid;\n}\n\nfunction makeHeader() {\n    return new table.Record('Header', [\n        {name: 'major', type: 'Card8', value: 1},\n        {name: 'minor', type: 'Card8', value: 0},\n        {name: 'hdrSize', type: 'Card8', value: 4},\n        {name: 'major', type: 'Card8', value: 1}\n    ]);\n}\n\nfunction makeNameIndex(fontNames) {\n    const t = new table.Record('Name INDEX', [\n        {name: 'names', type: 'INDEX', value: []}\n    ]);\n    t.names = [];\n    for (let i = 0; i < fontNames.length; i += 1) {\n        t.names.push({name: 'name_' + i, type: 'NAME', value: fontNames[i]});\n    }\n\n    return t;\n}\n\n// Given a dictionary's metadata, create a DICT structure.\nfunction makeDict(meta, attrs, strings) {\n    const m = {};\n    for (let i = 0; i < meta.length; i += 1) {\n        const entry = meta[i];\n        let value = attrs[entry.name];\n        if (value !== undefined && !equals(value, entry.value)) {\n            if (entry.type === 'SID') {\n                value = encodeString(value, strings);\n            }\n\n            m[entry.op] = {name: entry.name, type: entry.type, value: value};\n        }\n    }\n\n    return m;\n}\n\n// The Top DICT houses the global font attributes.\nfunction makeTopDict(attrs, strings) {\n    const t = new table.Record('Top DICT', [\n        {name: 'dict', type: 'DICT', value: {}}\n    ]);\n    t.dict = makeDict(TOP_DICT_META, attrs, strings);\n    return t;\n}\n\nfunction makeTopDictIndex(topDict) {\n    const t = new table.Record('Top DICT INDEX', [\n        {name: 'topDicts', type: 'INDEX', value: []}\n    ]);\n    t.topDicts = [{name: 'topDict_0', type: 'TABLE', value: topDict}];\n    return t;\n}\n\nfunction makeStringIndex(strings) {\n    const t = new table.Record('String INDEX', [\n        {name: 'strings', type: 'INDEX', value: []}\n    ]);\n    t.strings = [];\n    for (let i = 0; i < strings.length; i += 1) {\n        t.strings.push({name: 'string_' + i, type: 'STRING', value: strings[i]});\n    }\n\n    return t;\n}\n\nfunction makeGlobalSubrIndex() {\n    // Currently we don't use subroutines.\n    return new table.Record('Global Subr INDEX', [\n        {name: 'subrs', type: 'INDEX', value: []}\n    ]);\n}\n\nfunction makeCharsets(glyphNames, strings) {\n    const t = new table.Record('Charsets', [\n        {name: 'format', type: 'Card8', value: 0}\n    ]);\n    for (let i = 0; i < glyphNames.length; i += 1) {\n        const glyphName = glyphNames[i];\n        const glyphSID = encodeString(glyphName, strings);\n        t.fields.push({name: 'glyph_' + i, type: 'SID', value: glyphSID});\n    }\n\n    return t;\n}\n\nfunction glyphToOps(glyph) {\n    const ops = [];\n    const path = glyph.path;\n    ops.push({name: 'width', type: 'NUMBER', value: glyph.advanceWidth});\n    let x = 0;\n    let y = 0;\n    for (let i = 0; i < path.commands.length; i += 1) {\n        let dx;\n        let dy;\n        let cmd = path.commands[i];\n        if (cmd.type === 'Q') {\n            // CFF only supports bézier curves, so convert the quad to a bézier.\n            const _13 = 1 / 3;\n            const _23 = 2 / 3;\n\n            // We're going to create a new command so we don't change the original path.\n            // Since all coordinates are relative, we round() them ASAP to avoid propagating errors.\n            cmd = {\n                type: 'C',\n                x: cmd.x,\n                y: cmd.y,\n                x1: Math.round(_13 * x + _23 * cmd.x1),\n                y1: Math.round(_13 * y + _23 * cmd.y1),\n                x2: Math.round(_13 * cmd.x + _23 * cmd.x1),\n                y2: Math.round(_13 * cmd.y + _23 * cmd.y1)\n            };\n        }\n\n        if (cmd.type === 'M') {\n            dx = Math.round(cmd.x - x);\n            dy = Math.round(cmd.y - y);\n            ops.push({name: 'dx', type: 'NUMBER', value: dx});\n            ops.push({name: 'dy', type: 'NUMBER', value: dy});\n            ops.push({name: 'rmoveto', type: 'OP', value: 21});\n            x = Math.round(cmd.x);\n            y = Math.round(cmd.y);\n        } else if (cmd.type === 'L') {\n            dx = Math.round(cmd.x - x);\n            dy = Math.round(cmd.y - y);\n            ops.push({name: 'dx', type: 'NUMBER', value: dx});\n            ops.push({name: 'dy', type: 'NUMBER', value: dy});\n            ops.push({name: 'rlineto', type: 'OP', value: 5});\n            x = Math.round(cmd.x);\n            y = Math.round(cmd.y);\n        } else if (cmd.type === 'C') {\n            const dx1 = Math.round(cmd.x1 - x);\n            const dy1 = Math.round(cmd.y1 - y);\n            const dx2 = Math.round(cmd.x2 - cmd.x1);\n            const dy2 = Math.round(cmd.y2 - cmd.y1);\n            dx = Math.round(cmd.x - cmd.x2);\n            dy = Math.round(cmd.y - cmd.y2);\n            ops.push({name: 'dx1', type: 'NUMBER', value: dx1});\n            ops.push({name: 'dy1', type: 'NUMBER', value: dy1});\n            ops.push({name: 'dx2', type: 'NUMBER', value: dx2});\n            ops.push({name: 'dy2', type: 'NUMBER', value: dy2});\n            ops.push({name: 'dx', type: 'NUMBER', value: dx});\n            ops.push({name: 'dy', type: 'NUMBER', value: dy});\n            ops.push({name: 'rrcurveto', type: 'OP', value: 8});\n            x = Math.round(cmd.x);\n            y = Math.round(cmd.y);\n        }\n\n        // Contours are closed automatically.\n    }\n\n    ops.push({name: 'endchar', type: 'OP', value: 14});\n    return ops;\n}\n\nfunction makeCharStringsIndex(glyphs) {\n    const t = new table.Record('CharStrings INDEX', [\n        {name: 'charStrings', type: 'INDEX', value: []}\n    ]);\n\n    for (let i = 0; i < glyphs.length; i += 1) {\n        const glyph = glyphs.get(i);\n        const ops = glyphToOps(glyph);\n        t.charStrings.push({name: glyph.name, type: 'CHARSTRING', value: ops});\n    }\n\n    return t;\n}\n\nfunction makePrivateDict(attrs, strings) {\n    const t = new table.Record('Private DICT', [\n        {name: 'dict', type: 'DICT', value: {}}\n    ]);\n    t.dict = makeDict(PRIVATE_DICT_META, attrs, strings);\n    return t;\n}\n\nfunction makeCFFTable(glyphs, options) {\n    const t = new table.Table('CFF ', [\n        {name: 'header', type: 'RECORD'},\n        {name: 'nameIndex', type: 'RECORD'},\n        {name: 'topDictIndex', type: 'RECORD'},\n        {name: 'stringIndex', type: 'RECORD'},\n        {name: 'globalSubrIndex', type: 'RECORD'},\n        {name: 'charsets', type: 'RECORD'},\n        {name: 'charStringsIndex', type: 'RECORD'},\n        {name: 'privateDict', type: 'RECORD'}\n    ]);\n\n    const fontScale = 1 / options.unitsPerEm;\n    // We use non-zero values for the offsets so that the DICT encodes them.\n    // This is important because the size of the Top DICT plays a role in offset calculation,\n    // and the size shouldn't change after we've written correct offsets.\n    const attrs = {\n        version: options.version,\n        fullName: options.fullName,\n        familyName: options.familyName,\n        weight: options.weightName,\n        fontBBox: options.fontBBox || [0, 0, 0, 0],\n        fontMatrix: [fontScale, 0, 0, fontScale, 0, 0],\n        charset: 999,\n        encoding: 0,\n        charStrings: 999,\n        private: [0, 999]\n    };\n\n    const privateAttrs = {};\n\n    const glyphNames = [];\n    let glyph;\n\n    // Skip first glyph (.notdef)\n    for (let i = 1; i < glyphs.length; i += 1) {\n        glyph = glyphs.get(i);\n        glyphNames.push(glyph.name);\n    }\n\n    const strings = [];\n\n    t.header = makeHeader();\n    t.nameIndex = makeNameIndex([options.postScriptName]);\n    let topDict = makeTopDict(attrs, strings);\n    t.topDictIndex = makeTopDictIndex(topDict);\n    t.globalSubrIndex = makeGlobalSubrIndex();\n    t.charsets = makeCharsets(glyphNames, strings);\n    t.charStringsIndex = makeCharStringsIndex(glyphs);\n    t.privateDict = makePrivateDict(privateAttrs, strings);\n\n    // Needs to come at the end, to encode all custom strings used in the font.\n    t.stringIndex = makeStringIndex(strings);\n\n    const startOffset = t.header.sizeOf() +\n        t.nameIndex.sizeOf() +\n        t.topDictIndex.sizeOf() +\n        t.stringIndex.sizeOf() +\n        t.globalSubrIndex.sizeOf();\n    attrs.charset = startOffset;\n\n    // We use the CFF standard encoding; proper encoding will be handled in cmap.\n    attrs.encoding = 0;\n    attrs.charStrings = attrs.charset + t.charsets.sizeOf();\n    attrs.private[1] = attrs.charStrings + t.charStringsIndex.sizeOf();\n\n    // Recreate the Top DICT INDEX with the correct offsets.\n    topDict = makeTopDict(attrs, strings);\n    t.topDictIndex = makeTopDictIndex(topDict);\n\n    return t;\n}\n\nexport default { parse: parseCFFTable, make: makeCFFTable };\n", "// The `head` table contains global information about the font.\n// https://www.microsoft.com/typography/OTSPEC/head.htm\n\nimport check from '../check';\nimport parse from '../parse';\nimport table from '../table';\n\n// Parse the header `head` table\nfunction parseHeadTable(data, start) {\n    const head = {};\n    const p = new parse.Parser(data, start);\n    head.version = p.parseVersion();\n    head.fontRevision = Math.round(p.parseFixed() * 1000) / 1000;\n    head.checkSumAdjustment = p.parseULong();\n    head.magicNumber = p.parseULong();\n    check.argument(head.magicNumber === 0x5F0F3CF5, 'Font header has wrong magic number.');\n    head.flags = p.parseUShort();\n    head.unitsPerEm = p.parseUShort();\n    head.created = p.parseLongDateTime();\n    head.modified = p.parseLongDateTime();\n    head.xMin = p.parseShort();\n    head.yMin = p.parseShort();\n    head.xMax = p.parseShort();\n    head.yMax = p.parseShort();\n    head.macStyle = p.parseUShort();\n    head.lowestRecPPEM = p.parseUShort();\n    head.fontDirectionHint = p.parseShort();\n    head.indexToLocFormat = p.parseShort();\n    head.glyphDataFormat = p.parseShort();\n    return head;\n}\n\nfunction makeHeadTable(options) {\n    // Apple Mac timestamp epoch is 01/01/1904 not 01/01/1970\n    const timestamp = Math.round(new Date().getTime() / 1000) + 2082844800;\n    let createdTimestamp = timestamp;\n\n    if (options.createdTimestamp) {\n        createdTimestamp = options.createdTimestamp + 2082844800;\n    }\n\n    return new table.Table('head', [\n        {name: 'version', type: 'FIXED', value: 0x00010000},\n        {name: 'fontRevision', type: 'FIXED', value: 0x00010000},\n        {name: 'checkSumAdjustment', type: 'ULONG', value: 0},\n        {name: 'magicNumber', type: 'ULONG', value: 0x5F0F3CF5},\n        {name: 'flags', type: 'USHORT', value: 0},\n        {name: 'unitsPerEm', type: 'USHORT', value: 1000},\n        {name: 'created', type: 'LONGDATETIME', value: createdTimestamp},\n        {name: 'modified', type: 'LONGDATETIME', value: timestamp},\n        {name: 'xMin', type: 'SHORT', value: 0},\n        {name: 'yMin', type: 'SHORT', value: 0},\n        {name: 'xMax', type: 'SHORT', value: 0},\n        {name: 'yMax', type: 'SHORT', value: 0},\n        {name: 'macStyle', type: 'USHORT', value: 0},\n        {name: 'lowestRecPPEM', type: 'USHORT', value: 0},\n        {name: 'fontDirectionHint', type: 'SHORT', value: 2},\n        {name: 'indexToLocFormat', type: 'SHORT', value: 0},\n        {name: 'glyphDataFormat', type: 'SHORT', value: 0}\n    ], options);\n}\n\nexport default { parse: parseHeadTable, make: makeHeadTable };\n", "// The `hhea` table contains information for horizontal layout.\n// https://www.microsoft.com/typography/OTSPEC/hhea.htm\n\nimport parse from '../parse';\nimport table from '../table';\n\n// Parse the horizontal header `hhea` table\nfunction parseHheaTable(data, start) {\n    const hhea = {};\n    const p = new parse.Parser(data, start);\n    hhea.version = p.parseVersion();\n    hhea.ascender = p.parseShort();\n    hhea.descender = p.parseShort();\n    hhea.lineGap = p.parseShort();\n    hhea.advanceWidthMax = p.parseUShort();\n    hhea.minLeftSideBearing = p.parseShort();\n    hhea.minRightSideBearing = p.parseShort();\n    hhea.xMaxExtent = p.parseShort();\n    hhea.caretSlopeRise = p.parseShort();\n    hhea.caretSlopeRun = p.parseShort();\n    hhea.caretOffset = p.parseShort();\n    p.relativeOffset += 8;\n    hhea.metricDataFormat = p.parseShort();\n    hhea.numberOfHMetrics = p.parseUShort();\n    return hhea;\n}\n\nfunction makeHheaTable(options) {\n    return new table.Table('hhea', [\n        {name: 'version', type: 'FIXED', value: 0x00010000},\n        {name: 'ascender', type: 'FWORD', value: 0},\n        {name: 'descender', type: 'FWORD', value: 0},\n        {name: 'lineGap', type: 'FWORD', value: 0},\n        {name: 'advanceWidthMax', type: 'UFWORD', value: 0},\n        {name: 'minLeftSideBearing', type: 'FWORD', value: 0},\n        {name: 'minRightSideBearing', type: 'FWORD', value: 0},\n        {name: 'xMaxExtent', type: 'FWORD', value: 0},\n        {name: 'caretSlopeRise', type: 'SHORT', value: 1},\n        {name: 'caretSlopeRun', type: 'SHORT', value: 0},\n        {name: 'caretOffset', type: 'SHORT', value: 0},\n        {name: 'reserved1', type: 'SHORT', value: 0},\n        {name: 'reserved2', type: 'SHORT', value: 0},\n        {name: 'reserved3', type: 'SHORT', value: 0},\n        {name: 'reserved4', type: 'SHORT', value: 0},\n        {name: 'metricDataFormat', type: 'SHORT', value: 0},\n        {name: 'numberOfHMetrics', type: 'USHORT', value: 0}\n    ], options);\n}\n\nexport default { parse: parseHheaTable, make: makeHheaTable };\n", "// The `hmtx` table contains the horizontal metrics for all glyphs.\n// https://www.microsoft.com/typography/OTSPEC/hmtx.htm\n\nimport parse from '../parse';\nimport table from '../table';\n\nfunction parseHmtxTableAll(data, start, numMetrics, numGlyphs, glyphs) {\n    let advanceWidth;\n    let leftSideBearing;\n    const p = new parse.Parser(data, start);\n    for (let i = 0; i < numGlyphs; i += 1) {\n        // If the font is monospaced, only one entry is needed. This last entry applies to all subsequent glyphs.\n        if (i < numMetrics) {\n            advanceWidth = p.parseUShort();\n            leftSideBearing = p.parseShort();\n        }\n\n        const glyph = glyphs.get(i);\n        glyph.advanceWidth = advanceWidth;\n        glyph.leftSideBearing = leftSideBearing;\n    }\n}\n\nfunction parseHmtxTableOnLowMemory(font, data, start, numMetrics, numGlyphs) {\n    font._hmtxTableData = {};\n\n    let advanceWidth;\n    let leftSideBearing;\n    const p = new parse.Parser(data, start);\n    for (let i = 0; i < numGlyphs; i += 1) {\n        // If the font is monospaced, only one entry is needed. This last entry applies to all subsequent glyphs.\n        if (i < numMetrics) {\n            advanceWidth = p.parseUShort();\n            leftSideBearing = p.parseShort();\n        }\n\n        font._hmtxTableData[i] = {\n            advanceWidth: advanceWidth,\n            leftSideBearing: leftSideBearing\n        };\n    }\n}\n\n// Parse the `hmtx` table, which contains the horizontal metrics for all glyphs.\n// This function augments the glyph array, adding the advanceWidth and leftSideBearing to each glyph.\nfunction parseHmtxTable(font, data, start, numMetrics, numGlyphs, glyphs, opt) {\n    if (opt.lowMemory)\n        parseHmtxTableOnLowMemory(font, data, start, numMetrics, numGlyphs);\n    else\n        parseHmtxTableAll(data, start, numMetrics, numGlyphs, glyphs);\n}\n\nfunction makeHmtxTable(glyphs) {\n    const t = new table.Table('hmtx', []);\n    for (let i = 0; i < glyphs.length; i += 1) {\n        const glyph = glyphs.get(i);\n        const advanceWidth = glyph.advanceWidth || 0;\n        const leftSideBearing = glyph.leftSideBearing || 0;\n        t.fields.push({name: 'advanceWidth_' + i, type: 'USHORT', value: advanceWidth});\n        t.fields.push({name: 'leftSideBearing_' + i, type: 'SHORT', value: leftSideBearing});\n    }\n\n    return t;\n}\n\nexport default { parse: parseHmtxTable, make: makeHmtxTable };\n", "// The `ltag` table stores IETF BCP-47 language tags. It allows supporting\n// languages for which TrueType does not assign a numeric code.\n// https://developer.apple.com/fonts/TrueType-Reference-Manual/RM06/Chap6ltag.html\n// http://www.w3.org/International/articles/language-tags/\n// http://www.iana.org/assignments/language-subtag-registry/language-subtag-registry\n\nimport check from '../check';\nimport parse from '../parse';\nimport table from '../table';\n\nfunction makeLtagTable(tags) {\n    const result = new table.Table('ltag', [\n        {name: 'version', type: 'ULONG', value: 1},\n        {name: 'flags', type: 'ULONG', value: 0},\n        {name: 'numTags', type: 'ULONG', value: tags.length}\n    ]);\n\n    let stringPool = '';\n    const stringPoolOffset = 12 + tags.length * 4;\n    for (let i = 0; i < tags.length; ++i) {\n        let pos = stringPool.indexOf(tags[i]);\n        if (pos < 0) {\n            pos = stringPool.length;\n            stringPool += tags[i];\n        }\n\n        result.fields.push({name: 'offset ' + i, type: 'USHORT', value: stringPoolOffset + pos});\n        result.fields.push({name: 'length ' + i, type: 'USHORT', value: tags[i].length});\n    }\n\n    result.fields.push({name: 'stringPool', type: 'CHARARRAY', value: stringPool});\n    return result;\n}\n\nfunction parseLtagTable(data, start) {\n    const p = new parse.Parser(data, start);\n    const tableVersion = p.parseULong();\n    check.argument(tableVersion === 1, 'Unsupported ltag table version.');\n    // The 'ltag' specification does not define any flags; skip the field.\n    p.skip('uLong', 1);\n    const numTags = p.parseULong();\n\n    const tags = [];\n    for (let i = 0; i < numTags; i++) {\n        let tag = '';\n        const offset = start + p.parseUShort();\n        const length = p.parseUShort();\n        for (let j = offset; j < offset + length; ++j) {\n            tag += String.fromCharCode(data.getInt8(j));\n        }\n\n        tags.push(tag);\n    }\n\n    return tags;\n}\n\nexport default { make: makeLtagTable, parse: parseLtagTable };\n", "// The `maxp` table establishes the memory requirements for the font.\n// We need it just to get the number of glyphs in the font.\n// https://www.microsoft.com/typography/OTSPEC/maxp.htm\n\nimport parse from '../parse';\nimport table from '../table';\n\n// Parse the maximum profile `maxp` table.\nfunction parseMaxpTable(data, start) {\n    const maxp = {};\n    const p = new parse.Parser(data, start);\n    maxp.version = p.parseVersion();\n    maxp.numGlyphs = p.parseUShort();\n    if (maxp.version === 1.0) {\n        maxp.maxPoints = p.parseUShort();\n        maxp.maxContours = p.parseUShort();\n        maxp.maxCompositePoints = p.parseUShort();\n        maxp.maxCompositeContours = p.parseUShort();\n        maxp.maxZones = p.parseUShort();\n        maxp.maxTwilightPoints = p.parseUShort();\n        maxp.maxStorage = p.parseUShort();\n        maxp.maxFunctionDefs = p.parseUShort();\n        maxp.maxInstructionDefs = p.parseUShort();\n        maxp.maxStackElements = p.parseUShort();\n        maxp.maxSizeOfInstructions = p.parseUShort();\n        maxp.maxComponentElements = p.parseUShort();\n        maxp.maxComponentDepth = p.parseUShort();\n    }\n\n    return maxp;\n}\n\nfunction makeMaxpTable(numGlyphs) {\n    return new table.Table('maxp', [\n        {name: 'version', type: 'FIXED', value: 0x00005000},\n        {name: 'numGlyphs', type: 'USHORT', value: numGlyphs}\n    ]);\n}\n\nexport default { parse: parseMaxpTable, make: makeMaxpTable };\n", "// The `name` naming table.\n// https://www.microsoft.com/typography/OTSPEC/name.htm\n\nimport { decode, encode } from '../types';\nimport parse from '../parse';\nimport table from '../table';\n\n// NameIDs for the name table.\nconst nameTableNames = [\n    'copyright',              // 0\n    'fontFamily',             // 1\n    'fontSubfamily',          // 2\n    'uniqueID',               // 3\n    'fullName',               // 4\n    'version',                // 5\n    'postScriptName',         // 6\n    'trademark',              // 7\n    'manufacturer',           // 8\n    'designer',               // 9\n    'description',            // 10\n    'manufacturerURL',        // 11\n    'designerURL',            // 12\n    'license',                // 13\n    'licenseURL',             // 14\n    'reserved',               // 15\n    'preferredFamily',        // 16\n    'preferredSubfamily',     // 17\n    'compatibleFullName',     // 18\n    'sampleText',             // 19\n    'postScriptFindFontName', // 20\n    'wwsFamily',              // 21\n    'wwsSubfamily'            // 22\n];\n\nconst macLanguages = {\n    0: 'en',\n    1: 'fr',\n    2: 'de',\n    3: 'it',\n    4: 'nl',\n    5: 'sv',\n    6: 'es',\n    7: 'da',\n    8: 'pt',\n    9: 'no',\n    10: 'he',\n    11: 'ja',\n    12: 'ar',\n    13: 'fi',\n    14: 'el',\n    15: 'is',\n    16: 'mt',\n    17: 'tr',\n    18: 'hr',\n    19: 'zh-Hant',\n    20: 'ur',\n    21: 'hi',\n    22: 'th',\n    23: 'ko',\n    24: 'lt',\n    25: 'pl',\n    26: 'hu',\n    27: 'es',\n    28: 'lv',\n    29: 'se',\n    30: 'fo',\n    31: 'fa',\n    32: 'ru',\n    33: 'zh',\n    34: 'nl-BE',\n    35: 'ga',\n    36: 'sq',\n    37: 'ro',\n    38: 'cz',\n    39: 'sk',\n    40: 'si',\n    41: 'yi',\n    42: 'sr',\n    43: 'mk',\n    44: 'bg',\n    45: 'uk',\n    46: 'be',\n    47: 'uz',\n    48: 'kk',\n    49: 'az-Cyrl',\n    50: 'az-Arab',\n    51: 'hy',\n    52: 'ka',\n    53: 'mo',\n    54: 'ky',\n    55: 'tg',\n    56: 'tk',\n    57: 'mn-CN',\n    58: 'mn',\n    59: 'ps',\n    60: 'ks',\n    61: 'ku',\n    62: 'sd',\n    63: 'bo',\n    64: 'ne',\n    65: 'sa',\n    66: 'mr',\n    67: 'bn',\n    68: 'as',\n    69: 'gu',\n    70: 'pa',\n    71: 'or',\n    72: 'ml',\n    73: 'kn',\n    74: 'ta',\n    75: 'te',\n    76: 'si',\n    77: 'my',\n    78: 'km',\n    79: 'lo',\n    80: 'vi',\n    81: 'id',\n    82: 'tl',\n    83: 'ms',\n    84: 'ms-Arab',\n    85: 'am',\n    86: 'ti',\n    87: 'om',\n    88: 'so',\n    89: 'sw',\n    90: 'rw',\n    91: 'rn',\n    92: 'ny',\n    93: 'mg',\n    94: 'eo',\n    128: 'cy',\n    129: 'eu',\n    130: 'ca',\n    131: 'la',\n    132: 'qu',\n    133: 'gn',\n    134: 'ay',\n    135: 'tt',\n    136: 'ug',\n    137: 'dz',\n    138: 'jv',\n    139: 'su',\n    140: 'gl',\n    141: 'af',\n    142: 'br',\n    143: 'iu',\n    144: 'gd',\n    145: 'gv',\n    146: 'ga',\n    147: 'to',\n    148: 'el-polyton',\n    149: 'kl',\n    150: 'az',\n    151: 'nn'\n};\n\n// MacOS language ID → MacOS script ID\n//\n// Note that the script ID is not sufficient to determine what encoding\n// to use in TrueType files. For some languages, MacOS used a modification\n// of a mainstream script. For example, an Icelandic name would be stored\n// with smRoman in the TrueType naming table, but the actual encoding\n// is a special Icelandic version of the normal Macintosh Roman encoding.\n// As another example, Inuktitut uses an 8-bit encoding for Canadian Aboriginal\n// Syllables but MacOS had run out of available script codes, so this was\n// done as a (pretty radical) \"modification\" of Ethiopic.\n//\n// http://unicode.org/Public/MAPPINGS/VENDORS/APPLE/Readme.txt\nconst macLanguageToScript = {\n    0: 0,  // langEnglish → smRoman\n    1: 0,  // langFrench → smRoman\n    2: 0,  // langGerman → smRoman\n    3: 0,  // langItalian → smRoman\n    4: 0,  // langDutch → smRoman\n    5: 0,  // langSwedish → smRoman\n    6: 0,  // langSpanish → smRoman\n    7: 0,  // langDanish → smRoman\n    8: 0,  // langPortuguese → smRoman\n    9: 0,  // langNorwegian → smRoman\n    10: 5,  // langHebrew → smHebrew\n    11: 1,  // langJapanese → smJapanese\n    12: 4,  // langArabic → smArabic\n    13: 0,  // langFinnish → smRoman\n    14: 6,  // langGreek → smGreek\n    15: 0,  // langIcelandic → smRoman (modified)\n    16: 0,  // langMaltese → smRoman\n    17: 0,  // langTurkish → smRoman (modified)\n    18: 0,  // langCroatian → smRoman (modified)\n    19: 2,  // langTradChinese → smTradChinese\n    20: 4,  // langUrdu → smArabic\n    21: 9,  // langHindi → smDevanagari\n    22: 21,  // langThai → smThai\n    23: 3,  // langKorean → smKorean\n    24: 29,  // langLithuanian → smCentralEuroRoman\n    25: 29,  // langPolish → smCentralEuroRoman\n    26: 29,  // langHungarian → smCentralEuroRoman\n    27: 29,  // langEstonian → smCentralEuroRoman\n    28: 29,  // langLatvian → smCentralEuroRoman\n    29: 0,  // langSami → smRoman\n    30: 0,  // langFaroese → smRoman (modified)\n    31: 4,  // langFarsi → smArabic (modified)\n    32: 7,  // langRussian → smCyrillic\n    33: 25,  // langSimpChinese → smSimpChinese\n    34: 0,  // langFlemish → smRoman\n    35: 0,  // langIrishGaelic → smRoman (modified)\n    36: 0,  // langAlbanian → smRoman\n    37: 0,  // langRomanian → smRoman (modified)\n    38: 29,  // langCzech → smCentralEuroRoman\n    39: 29,  // langSlovak → smCentralEuroRoman\n    40: 0,  // langSlovenian → smRoman (modified)\n    41: 5,  // langYiddish → smHebrew\n    42: 7,  // langSerbian → smCyrillic\n    43: 7,  // langMacedonian → smCyrillic\n    44: 7,  // langBulgarian → smCyrillic\n    45: 7,  // langUkrainian → smCyrillic (modified)\n    46: 7,  // langByelorussian → smCyrillic\n    47: 7,  // langUzbek → smCyrillic\n    48: 7,  // langKazakh → smCyrillic\n    49: 7,  // langAzerbaijani → smCyrillic\n    50: 4,  // langAzerbaijanAr → smArabic\n    51: 24,  // langArmenian → smArmenian\n    52: 23,  // langGeorgian → smGeorgian\n    53: 7,  // langMoldavian → smCyrillic\n    54: 7,  // langKirghiz → smCyrillic\n    55: 7,  // langTajiki → smCyrillic\n    56: 7,  // langTurkmen → smCyrillic\n    57: 27,  // langMongolian → smMongolian\n    58: 7,  // langMongolianCyr → smCyrillic\n    59: 4,  // langPashto → smArabic\n    60: 4,  // langKurdish → smArabic\n    61: 4,  // langKashmiri → smArabic\n    62: 4,  // langSindhi → smArabic\n    63: 26,  // langTibetan → smTibetan\n    64: 9,  // langNepali → smDevanagari\n    65: 9,  // langSanskrit → smDevanagari\n    66: 9,  // langMarathi → smDevanagari\n    67: 13,  // langBengali → smBengali\n    68: 13,  // langAssamese → smBengali\n    69: 11,  // langGujarati → smGujarati\n    70: 10,  // langPunjabi → smGurmukhi\n    71: 12,  // langOriya → smOriya\n    72: 17,  // langMalayalam → smMalayalam\n    73: 16,  // langKannada → smKannada\n    74: 14,  // langTamil → smTamil\n    75: 15,  // langTelugu → smTelugu\n    76: 18,  // langSinhalese → smSinhalese\n    77: 19,  // langBurmese → smBurmese\n    78: 20,  // langKhmer → smKhmer\n    79: 22,  // langLao → smLao\n    80: 30,  // langVietnamese → smVietnamese\n    81: 0,  // langIndonesian → smRoman\n    82: 0,  // langTagalog → smRoman\n    83: 0,  // langMalayRoman → smRoman\n    84: 4,  // langMalayArabic → smArabic\n    85: 28,  // langAmharic → smEthiopic\n    86: 28,  // langTigrinya → smEthiopic\n    87: 28,  // langOromo → smEthiopic\n    88: 0,  // langSomali → smRoman\n    89: 0,  // langSwahili → smRoman\n    90: 0,  // langKinyarwanda → smRoman\n    91: 0,  // langRundi → smRoman\n    92: 0,  // langNyanja → smRoman\n    93: 0,  // langMalagasy → smRoman\n    94: 0,  // langEsperanto → smRoman\n    128: 0,  // langWelsh → smRoman (modified)\n    129: 0,  // langBasque → smRoman\n    130: 0,  // langCatalan → smRoman\n    131: 0,  // langLatin → smRoman\n    132: 0,  // langQuechua → smRoman\n    133: 0,  // langGuarani → smRoman\n    134: 0,  // langAymara → smRoman\n    135: 7,  // langTatar → smCyrillic\n    136: 4,  // langUighur → smArabic\n    137: 26,  // langDzongkha → smTibetan\n    138: 0,  // langJavaneseRom → smRoman\n    139: 0,  // langSundaneseRom → smRoman\n    140: 0,  // langGalician → smRoman\n    141: 0,  // langAfrikaans → smRoman\n    142: 0,  // langBreton → smRoman (modified)\n    143: 28,  // langInuktitut → smEthiopic (modified)\n    144: 0,  // langScottishGaelic → smRoman (modified)\n    145: 0,  // langManxGaelic → smRoman (modified)\n    146: 0,  // langIrishGaelicScript → smRoman (modified)\n    147: 0,  // langTongan → smRoman\n    148: 6,  // langGreekAncient → smRoman\n    149: 0,  // langGreenlandic → smRoman\n    150: 0,  // langAzerbaijanRoman → smRoman\n    151: 0   // langNynorsk → smRoman\n};\n\n// While Microsoft indicates a region/country for all its language\n// IDs, we omit the region code if it's equal to the \"most likely\n// region subtag\" according to Unicode CLDR. For scripts, we omit\n// the subtag if it is equal to the Suppress-Script entry in the\n// IANA language subtag registry for IETF BCP 47.\n//\n// For example, Microsoft states that its language code 0x041A is\n// Croatian in Croatia. We transform this to the BCP 47 language code 'hr'\n// and not 'hr-HR' because Croatia is the default country for Croatian,\n// according to Unicode CLDR. As another example, Microsoft states\n// that 0x101A is Croatian (Latin) in Bosnia-Herzegovina. We transform\n// this to 'hr-BA' and not 'hr-Latn-BA' because Latin is the default script\n// for the Croatian language, according to IANA.\n//\n// http://www.unicode.org/cldr/charts/latest/supplemental/likely_subtags.html\n// http://www.iana.org/assignments/language-subtag-registry/language-subtag-registry\nconst windowsLanguages = {\n    0x0436: 'af',\n    0x041C: 'sq',\n    0x0484: 'gsw',\n    0x045E: 'am',\n    0x1401: 'ar-DZ',\n    0x3C01: 'ar-BH',\n    0x0C01: 'ar',\n    0x0801: 'ar-IQ',\n    0x2C01: 'ar-JO',\n    0x3401: 'ar-KW',\n    0x3001: 'ar-LB',\n    0x1001: 'ar-LY',\n    0x1801: 'ary',\n    0x2001: 'ar-OM',\n    0x4001: 'ar-QA',\n    0x0401: 'ar-SA',\n    0x2801: 'ar-SY',\n    0x1C01: 'aeb',\n    0x3801: 'ar-AE',\n    0x2401: 'ar-YE',\n    0x042B: 'hy',\n    0x044D: 'as',\n    0x082C: 'az-Cyrl',\n    0x042C: 'az',\n    0x046D: 'ba',\n    0x042D: 'eu',\n    0x0423: 'be',\n    0x0845: 'bn',\n    0x0445: 'bn-IN',\n    0x201A: 'bs-Cyrl',\n    0x141A: 'bs',\n    0x047E: 'br',\n    0x0402: 'bg',\n    0x0403: 'ca',\n    0x0C04: 'zh-HK',\n    0x1404: 'zh-MO',\n    0x0804: 'zh',\n    0x1004: 'zh-SG',\n    0x0404: 'zh-TW',\n    0x0483: 'co',\n    0x041A: 'hr',\n    0x101A: 'hr-BA',\n    0x0405: 'cs',\n    0x0406: 'da',\n    0x048C: 'prs',\n    0x0465: 'dv',\n    0x0813: 'nl-BE',\n    0x0413: 'nl',\n    0x0C09: 'en-AU',\n    0x2809: 'en-BZ',\n    0x1009: 'en-CA',\n    0x2409: 'en-029',\n    0x4009: 'en-IN',\n    0x1809: 'en-IE',\n    0x2009: 'en-JM',\n    0x4409: 'en-MY',\n    0x1409: 'en-NZ',\n    0x3409: 'en-PH',\n    0x4809: 'en-SG',\n    0x1C09: 'en-ZA',\n    0x2C09: 'en-TT',\n    0x0809: 'en-GB',\n    0x0409: 'en',\n    0x3009: 'en-ZW',\n    0x0425: 'et',\n    0x0438: 'fo',\n    0x0464: 'fil',\n    0x040B: 'fi',\n    0x080C: 'fr-BE',\n    0x0C0C: 'fr-CA',\n    0x040C: 'fr',\n    0x140C: 'fr-LU',\n    0x180C: 'fr-MC',\n    0x100C: 'fr-CH',\n    0x0462: 'fy',\n    0x0456: 'gl',\n    0x0437: 'ka',\n    0x0C07: 'de-AT',\n    0x0407: 'de',\n    0x1407: 'de-LI',\n    0x1007: 'de-LU',\n    0x0807: 'de-CH',\n    0x0408: 'el',\n    0x046F: 'kl',\n    0x0447: 'gu',\n    0x0468: 'ha',\n    0x040D: 'he',\n    0x0439: 'hi',\n    0x040E: 'hu',\n    0x040F: 'is',\n    0x0470: 'ig',\n    0x0421: 'id',\n    0x045D: 'iu',\n    0x085D: 'iu-Latn',\n    0x083C: 'ga',\n    0x0434: 'xh',\n    0x0435: 'zu',\n    0x0410: 'it',\n    0x0810: 'it-CH',\n    0x0411: 'ja',\n    0x044B: 'kn',\n    0x043F: 'kk',\n    0x0453: 'km',\n    0x0486: 'quc',\n    0x0487: 'rw',\n    0x0441: 'sw',\n    0x0457: 'kok',\n    0x0412: 'ko',\n    0x0440: 'ky',\n    0x0454: 'lo',\n    0x0426: 'lv',\n    0x0427: 'lt',\n    0x082E: 'dsb',\n    0x046E: 'lb',\n    0x042F: 'mk',\n    0x083E: 'ms-BN',\n    0x043E: 'ms',\n    0x044C: 'ml',\n    0x043A: 'mt',\n    0x0481: 'mi',\n    0x047A: 'arn',\n    0x044E: 'mr',\n    0x047C: 'moh',\n    0x0450: 'mn',\n    0x0850: 'mn-CN',\n    0x0461: 'ne',\n    0x0414: 'nb',\n    0x0814: 'nn',\n    0x0482: 'oc',\n    0x0448: 'or',\n    0x0463: 'ps',\n    0x0415: 'pl',\n    0x0416: 'pt',\n    0x0816: 'pt-PT',\n    0x0446: 'pa',\n    0x046B: 'qu-BO',\n    0x086B: 'qu-EC',\n    0x0C6B: 'qu',\n    0x0418: 'ro',\n    0x0417: 'rm',\n    0x0419: 'ru',\n    0x243B: 'smn',\n    0x103B: 'smj-NO',\n    0x143B: 'smj',\n    0x0C3B: 'se-FI',\n    0x043B: 'se',\n    0x083B: 'se-SE',\n    0x203B: 'sms',\n    0x183B: 'sma-NO',\n    0x1C3B: 'sms',\n    0x044F: 'sa',\n    0x1C1A: 'sr-Cyrl-BA',\n    0x0C1A: 'sr',\n    0x181A: 'sr-Latn-BA',\n    0x081A: 'sr-Latn',\n    0x046C: 'nso',\n    0x0432: 'tn',\n    0x045B: 'si',\n    0x041B: 'sk',\n    0x0424: 'sl',\n    0x2C0A: 'es-AR',\n    0x400A: 'es-BO',\n    0x340A: 'es-CL',\n    0x240A: 'es-CO',\n    0x140A: 'es-CR',\n    0x1C0A: 'es-DO',\n    0x300A: 'es-EC',\n    0x440A: 'es-SV',\n    0x100A: 'es-GT',\n    0x480A: 'es-HN',\n    0x080A: 'es-MX',\n    0x4C0A: 'es-NI',\n    0x180A: 'es-PA',\n    0x3C0A: 'es-PY',\n    0x280A: 'es-PE',\n    0x500A: 'es-PR',\n\n    // Microsoft has defined two different language codes for\n    // “Spanish with modern sorting” and “Spanish with traditional\n    // sorting”. This makes sense for collation APIs, and it would be\n    // possible to express this in BCP 47 language tags via Unicode\n    // extensions (eg., es-u-co-trad is Spanish with traditional\n    // sorting). However, for storing names in fonts, the distinction\n    // does not make sense, so we give “es” in both cases.\n    0x0C0A: 'es',\n    0x040A: 'es',\n\n    0x540A: 'es-US',\n    0x380A: 'es-UY',\n    0x200A: 'es-VE',\n    0x081D: 'sv-FI',\n    0x041D: 'sv',\n    0x045A: 'syr',\n    0x0428: 'tg',\n    0x085F: 'tzm',\n    0x0449: 'ta',\n    0x0444: 'tt',\n    0x044A: 'te',\n    0x041E: 'th',\n    0x0451: 'bo',\n    0x041F: 'tr',\n    0x0442: 'tk',\n    0x0480: 'ug',\n    0x0422: 'uk',\n    0x042E: 'hsb',\n    0x0420: 'ur',\n    0x0843: 'uz-Cyrl',\n    0x0443: 'uz',\n    0x042A: 'vi',\n    0x0452: 'cy',\n    0x0488: 'wo',\n    0x0485: 'sah',\n    0x0478: 'ii',\n    0x046A: 'yo'\n};\n\n// Returns a IETF BCP 47 language code, for example 'zh-Hant'\n// for 'Chinese in the traditional script'.\nfunction getLanguageCode(platformID, languageID, ltag) {\n    switch (platformID) {\n        case 0:  // Unicode\n            if (languageID === 0xFFFF) {\n                return 'und';\n            } else if (ltag) {\n                return ltag[languageID];\n            }\n\n            break;\n\n        case 1:  // Macintosh\n            return macLanguages[languageID];\n\n        case 3:  // Windows\n            return windowsLanguages[languageID];\n    }\n\n    return undefined;\n}\n\nconst utf16 = 'utf-16';\n\n// MacOS script ID → encoding. This table stores the default case,\n// which can be overridden by macLanguageEncodings.\nconst macScriptEncodings = {\n    0: 'macintosh',           // smRoman\n    1: 'x-mac-japanese',      // smJapanese\n    2: 'x-mac-chinesetrad',   // smTradChinese\n    3: 'x-mac-korean',        // smKorean\n    6: 'x-mac-greek',         // smGreek\n    7: 'x-mac-cyrillic',      // smCyrillic\n    9: 'x-mac-devanagai',     // smDevanagari\n    10: 'x-mac-gurmukhi',     // smGurmukhi\n    11: 'x-mac-gujarati',     // smGujarati\n    12: 'x-mac-oriya',        // smOriya\n    13: 'x-mac-bengali',      // smBengali\n    14: 'x-mac-tamil',        // smTamil\n    15: 'x-mac-telugu',       // smTelugu\n    16: 'x-mac-kannada',      // smKannada\n    17: 'x-mac-malayalam',    // smMalayalam\n    18: 'x-mac-sinhalese',    // smSinhalese\n    19: 'x-mac-burmese',      // smBurmese\n    20: 'x-mac-khmer',        // smKhmer\n    21: 'x-mac-thai',         // smThai\n    22: 'x-mac-lao',          // smLao\n    23: 'x-mac-georgian',     // smGeorgian\n    24: 'x-mac-armenian',     // smArmenian\n    25: 'x-mac-chinesesimp',  // smSimpChinese\n    26: 'x-mac-tibetan',      // smTibetan\n    27: 'x-mac-mongolian',    // smMongolian\n    28: 'x-mac-ethiopic',     // smEthiopic\n    29: 'x-mac-ce',           // smCentralEuroRoman\n    30: 'x-mac-vietnamese',   // smVietnamese\n    31: 'x-mac-extarabic'     // smExtArabic\n};\n\n// MacOS language ID → encoding. This table stores the exceptional\n// cases, which override macScriptEncodings. For writing MacOS naming\n// tables, we need to emit a MacOS script ID. Therefore, we cannot\n// merge macScriptEncodings into macLanguageEncodings.\n//\n// http://unicode.org/Public/MAPPINGS/VENDORS/APPLE/Readme.txt\nconst macLanguageEncodings = {\n    15: 'x-mac-icelandic',    // langIcelandic\n    17: 'x-mac-turkish',      // langTurkish\n    18: 'x-mac-croatian',     // langCroatian\n    24: 'x-mac-ce',           // langLithuanian\n    25: 'x-mac-ce',           // langPolish\n    26: 'x-mac-ce',           // langHungarian\n    27: 'x-mac-ce',           // langEstonian\n    28: 'x-mac-ce',           // langLatvian\n    30: 'x-mac-icelandic',    // langFaroese\n    37: 'x-mac-romanian',     // langRomanian\n    38: 'x-mac-ce',           // langCzech\n    39: 'x-mac-ce',           // langSlovak\n    40: 'x-mac-ce',           // langSlovenian\n    143: 'x-mac-inuit',       // langInuktitut\n    146: 'x-mac-gaelic'       // langIrishGaelicScript\n};\n\nfunction getEncoding(platformID, encodingID, languageID) {\n    switch (platformID) {\n        case 0:  // Unicode\n            return utf16;\n\n        case 1:  // Apple Macintosh\n            return macLanguageEncodings[languageID] || macScriptEncodings[encodingID];\n\n        case 3:  // Microsoft Windows\n            if (encodingID === 1 || encodingID === 10) {\n                return utf16;\n            }\n\n            break;\n    }\n\n    return undefined;\n}\n\n// Parse the naming `name` table.\n// FIXME: Format 1 additional fields are not supported yet.\n// ltag is the content of the `ltag' table, such as ['en', 'zh-Hans', 'de-CH-1904'].\nfunction parseNameTable(data, start, ltag) {\n    const name = {};\n    const p = new parse.Parser(data, start);\n    const format = p.parseUShort();\n    const count = p.parseUShort();\n    const stringOffset = p.offset + p.parseUShort();\n    for (let i = 0; i < count; i++) {\n        const platformID = p.parseUShort();\n        const encodingID = p.parseUShort();\n        const languageID = p.parseUShort();\n        const nameID = p.parseUShort();\n        const property = nameTableNames[nameID] || nameID;\n        const byteLength = p.parseUShort();\n        const offset = p.parseUShort();\n        const language = getLanguageCode(platformID, languageID, ltag);\n        const encoding = getEncoding(platformID, encodingID, languageID);\n        if (encoding !== undefined && language !== undefined) {\n            let text;\n            if (encoding === utf16) {\n                text = decode.UTF16(data, stringOffset + offset, byteLength);\n            } else {\n                text = decode.MACSTRING(data, stringOffset + offset, byteLength, encoding);\n            }\n\n            if (text) {\n                let translations = name[property];\n                if (translations === undefined) {\n                    translations = name[property] = {};\n                }\n\n                translations[language] = text;\n            }\n        }\n    }\n\n    let langTagCount = 0;\n    if (format === 1) {\n        // FIXME: Also handle Microsoft's 'name' table 1.\n        langTagCount = p.parseUShort();\n    }\n\n    return name;\n}\n\n// {23: 'foo'} → {'foo': 23}\n// ['bar', 'baz'] → {'bar': 0, 'baz': 1}\nfunction reverseDict(dict) {\n    const result = {};\n    for (let key in dict) {\n        result[dict[key]] = parseInt(key);\n    }\n\n    return result;\n}\n\nfunction makeNameRecord(platformID, encodingID, languageID, nameID, length, offset) {\n    return new table.Record('NameRecord', [\n        {name: 'platformID', type: 'USHORT', value: platformID},\n        {name: 'encodingID', type: 'USHORT', value: encodingID},\n        {name: 'languageID', type: 'USHORT', value: languageID},\n        {name: 'nameID', type: 'USHORT', value: nameID},\n        {name: 'length', type: 'USHORT', value: length},\n        {name: 'offset', type: 'USHORT', value: offset}\n    ]);\n}\n\n// Finds the position of needle in haystack, or -1 if not there.\n// Like String.indexOf(), but for arrays.\nfunction findSubArray(needle, haystack) {\n    const needleLength = needle.length;\n    const limit = haystack.length - needleLength + 1;\n\n    loop:\n    for (let pos = 0; pos < limit; pos++) {\n        for (; pos < limit; pos++) {\n            for (let k = 0; k < needleLength; k++) {\n                if (haystack[pos + k] !== needle[k]) {\n                    continue loop;\n                }\n            }\n\n            return pos;\n        }\n    }\n\n    return -1;\n}\n\nfunction addStringToPool(s, pool) {\n    let offset = findSubArray(s, pool);\n    if (offset < 0) {\n        offset = pool.length;\n        let i = 0;\n        const len = s.length;\n        for (; i < len; ++i) {\n            pool.push(s[i]);\n        }\n\n    }\n\n    return offset;\n}\n\nfunction makeNameTable(names, ltag) {\n    let nameID;\n    const nameIDs = [];\n\n    const namesWithNumericKeys = {};\n    const nameTableIds = reverseDict(nameTableNames);\n    for (let key in names) {\n        let id = nameTableIds[key];\n        if (id === undefined) {\n            id = key;\n        }\n\n        nameID = parseInt(id);\n\n        if (isNaN(nameID)) {\n            throw new Error('Name table entry \"' + key + '\" does not exist, see nameTableNames for complete list.');\n        }\n\n        namesWithNumericKeys[nameID] = names[key];\n        nameIDs.push(nameID);\n    }\n\n    const macLanguageIds = reverseDict(macLanguages);\n    const windowsLanguageIds = reverseDict(windowsLanguages);\n\n    const nameRecords = [];\n    const stringPool = [];\n\n    for (let i = 0; i < nameIDs.length; i++) {\n        nameID = nameIDs[i];\n        const translations = namesWithNumericKeys[nameID];\n        for (let lang in translations) {\n            const text = translations[lang];\n\n            // For MacOS, we try to emit the name in the form that was introduced\n            // in the initial version of the TrueType spec (in the late 1980s).\n            // However, this can fail for various reasons: the requested BCP 47\n            // language code might not have an old-style Mac equivalent;\n            // we might not have a codec for the needed character encoding;\n            // or the name might contain characters that cannot be expressed\n            // in the old-style Macintosh encoding. In case of failure, we emit\n            // the name in a more modern fashion (Unicode encoding with BCP 47\n            // language tags) that is recognized by MacOS 10.5, released in 2009.\n            // If fonts were only read by operating systems, we could simply\n            // emit all names in the modern form; this would be much easier.\n            // However, there are many applications and libraries that read\n            // 'name' tables directly, and these will usually only recognize\n            // the ancient form (silently skipping the unrecognized names).\n            let macPlatform = 1;  // Macintosh\n            let macLanguage = macLanguageIds[lang];\n            let macScript = macLanguageToScript[macLanguage];\n            const macEncoding = getEncoding(macPlatform, macScript, macLanguage);\n            let macName = encode.MACSTRING(text, macEncoding);\n            if (macName === undefined) {\n                macPlatform = 0;  // Unicode\n                macLanguage = ltag.indexOf(lang);\n                if (macLanguage < 0) {\n                    macLanguage = ltag.length;\n                    ltag.push(lang);\n                }\n\n                macScript = 4;  // Unicode 2.0 and later\n                macName = encode.UTF16(text);\n            }\n\n            const macNameOffset = addStringToPool(macName, stringPool);\n            nameRecords.push(makeNameRecord(macPlatform, macScript, macLanguage,\n                                            nameID, macName.length, macNameOffset));\n\n            const winLanguage = windowsLanguageIds[lang];\n            if (winLanguage !== undefined) {\n                const winName = encode.UTF16(text);\n                const winNameOffset = addStringToPool(winName, stringPool);\n                nameRecords.push(makeNameRecord(3, 1, winLanguage,\n                                                nameID, winName.length, winNameOffset));\n            }\n        }\n    }\n\n    nameRecords.sort(function(a, b) {\n        return ((a.platformID - b.platformID) ||\n                (a.encodingID - b.encodingID) ||\n                (a.languageID - b.languageID) ||\n                (a.nameID - b.nameID));\n    });\n\n    const t = new table.Table('name', [\n        {name: 'format', type: 'USHORT', value: 0},\n        {name: 'count', type: 'USHORT', value: nameRecords.length},\n        {name: 'stringOffset', type: 'USHORT', value: 6 + nameRecords.length * 12}\n    ]);\n\n    for (let r = 0; r < nameRecords.length; r++) {\n        t.fields.push({name: 'record_' + r, type: 'RECORD', value: nameRecords[r]});\n    }\n\n    t.fields.push({name: 'strings', type: 'LITERAL', value: stringPool});\n    return t;\n}\n\nexport default { parse: parseNameTable, make: makeNameTable };\n", "// The `OS/2` table contains metrics required in OpenType fonts.\n// https://www.microsoft.com/typography/OTSPEC/os2.htm\n\nimport parse from '../parse';\nimport table from '../table';\n\nconst unicodeRanges = [\n    {begin: 0x0000, end: 0x007F}, // Basic Latin\n    {begin: 0x0080, end: 0x00FF}, // Latin-1 Supplement\n    {begin: 0x0100, end: 0x017F}, // Latin Extended-A\n    {begin: 0x0180, end: 0x024F}, // Latin Extended-B\n    {begin: 0x0250, end: 0x02AF}, // IPA Extensions\n    {begin: 0x02B0, end: 0x02FF}, // Spacing Modifier Letters\n    {begin: 0x0300, end: 0x036F}, // Combining Diacritical Marks\n    {begin: 0x0370, end: 0x03FF}, // Greek and Coptic\n    {begin: 0x2C80, end: 0x2CFF}, // Coptic\n    {begin: 0x0400, end: 0x04FF}, // Cyrillic\n    {begin: 0x0530, end: 0x058F}, // Armenian\n    {begin: 0x0590, end: 0x05FF}, // Hebrew\n    {begin: 0xA500, end: 0xA63F}, // Vai\n    {begin: 0x0600, end: 0x06FF}, // Arabic\n    {begin: 0x07C0, end: 0x07FF}, // NKo\n    {begin: 0x0900, end: 0x097F}, // Devanagari\n    {begin: 0x0980, end: 0x09FF}, // Bengali\n    {begin: 0x0A00, end: 0x0A7F}, // Gurmukhi\n    {begin: 0x0A80, end: 0x0AFF}, // Gujarati\n    {begin: 0x0B00, end: 0x0B7F}, // Oriya\n    {begin: 0x0B80, end: 0x0BFF}, // Tamil\n    {begin: 0x0C00, end: 0x0C7F}, // Telugu\n    {begin: 0x0C80, end: 0x0CFF}, // Kannada\n    {begin: 0x0D00, end: 0x0D7F}, // Malayalam\n    {begin: 0x0E00, end: 0x0E7F}, // Thai\n    {begin: 0x0E80, end: 0x0EFF}, // Lao\n    {begin: 0x10A0, end: 0x10FF}, // Georgian\n    {begin: 0x1B00, end: 0x1B7F}, // Balinese\n    {begin: 0x1100, end: 0x11FF}, // Hangul Jamo\n    {begin: 0x1E00, end: 0x1EFF}, // Latin Extended Additional\n    {begin: 0x1F00, end: 0x1FFF}, // Greek Extended\n    {begin: 0x2000, end: 0x206F}, // General Punctuation\n    {begin: 0x2070, end: 0x209F}, // Superscripts And Subscripts\n    {begin: 0x20A0, end: 0x20CF}, // Currency Symbol\n    {begin: 0x20D0, end: 0x20FF}, // Combining Diacritical Marks For Symbols\n    {begin: 0x2100, end: 0x214F}, // Letterlike Symbols\n    {begin: 0x2150, end: 0x218F}, // Number Forms\n    {begin: 0x2190, end: 0x21FF}, // Arrows\n    {begin: 0x2200, end: 0x22FF}, // Mathematical Operators\n    {begin: 0x2300, end: 0x23FF}, // Miscellaneous Technical\n    {begin: 0x2400, end: 0x243F}, // Control Pictures\n    {begin: 0x2440, end: 0x245F}, // Optical Character Recognition\n    {begin: 0x2460, end: 0x24FF}, // Enclosed Alphanumerics\n    {begin: 0x2500, end: 0x257F}, // Box Drawing\n    {begin: 0x2580, end: 0x259F}, // Block Elements\n    {begin: 0x25A0, end: 0x25FF}, // Geometric Shapes\n    {begin: 0x2600, end: 0x26FF}, // Miscellaneous Symbols\n    {begin: 0x2700, end: 0x27BF}, // Dingbats\n    {begin: 0x3000, end: 0x303F}, // CJK Symbols And Punctuation\n    {begin: 0x3040, end: 0x309F}, // Hiragana\n    {begin: 0x30A0, end: 0x30FF}, // Katakana\n    {begin: 0x3100, end: 0x312F}, // Bopomofo\n    {begin: 0x3130, end: 0x318F}, // Hangul Compatibility Jamo\n    {begin: 0xA840, end: 0xA87F}, // Phags-pa\n    {begin: 0x3200, end: 0x32FF}, // Enclosed CJK Letters And Months\n    {begin: 0x3300, end: 0x33FF}, // CJK Compatibility\n    {begin: 0xAC00, end: 0xD7AF}, // Hangul Syllables\n    {begin: 0xD800, end: 0xDFFF}, // Non-Plane 0 *\n    {begin: 0x10900, end: 0x1091F}, // Phoenicia\n    {begin: 0x4E00, end: 0x9FFF}, // CJK Unified Ideographs\n    {begin: 0xE000, end: 0xF8FF}, // Private Use Area (plane 0)\n    {begin: 0x31C0, end: 0x31EF}, // CJK Strokes\n    {begin: 0xFB00, end: 0xFB4F}, // Alphabetic Presentation Forms\n    {begin: 0xFB50, end: 0xFDFF}, // Arabic Presentation Forms-A\n    {begin: 0xFE20, end: 0xFE2F}, // Combining Half Marks\n    {begin: 0xFE10, end: 0xFE1F}, // Vertical Forms\n    {begin: 0xFE50, end: 0xFE6F}, // Small Form Variants\n    {begin: 0xFE70, end: 0xFEFF}, // Arabic Presentation Forms-B\n    {begin: 0xFF00, end: 0xFFEF}, // Halfwidth And Fullwidth Forms\n    {begin: 0xFFF0, end: 0xFFFF}, // Specials\n    {begin: 0x0F00, end: 0x0FFF}, // Tibetan\n    {begin: 0x0700, end: 0x074F}, // Syriac\n    {begin: 0x0780, end: 0x07BF}, // Thaana\n    {begin: 0x0D80, end: 0x0DFF}, // Sinhala\n    {begin: 0x1000, end: 0x109F}, // Myanmar\n    {begin: 0x1200, end: 0x137F}, // Ethiopic\n    {begin: 0x13A0, end: 0x13FF}, // Cherokee\n    {begin: 0x1400, end: 0x167F}, // Unified Canadian Aboriginal Syllabics\n    {begin: 0x1680, end: 0x169F}, // Ogham\n    {begin: 0x16A0, end: 0x16FF}, // Runic\n    {begin: 0x1780, end: 0x17FF}, // Khmer\n    {begin: 0x1800, end: 0x18AF}, // Mongolian\n    {begin: 0x2800, end: 0x28FF}, // Braille Patterns\n    {begin: 0xA000, end: 0xA48F}, // Yi Syllables\n    {begin: 0x1700, end: 0x171F}, // Tagalog\n    {begin: 0x10300, end: 0x1032F}, // Old Italic\n    {begin: 0x10330, end: 0x1034F}, // Gothic\n    {begin: 0x10400, end: 0x1044F}, // Deseret\n    {begin: 0x1D000, end: 0x1D0FF}, // Byzantine Musical Symbols\n    {begin: 0x1D400, end: 0x1D7FF}, // Mathematical Alphanumeric Symbols\n    {begin: 0xFF000, end: 0xFFFFD}, // Private Use (plane 15)\n    {begin: 0xFE00, end: 0xFE0F}, // Variation Selectors\n    {begin: 0xE0000, end: 0xE007F}, // Tags\n    {begin: 0x1900, end: 0x194F}, // Limbu\n    {begin: 0x1950, end: 0x197F}, // Tai Le\n    {begin: 0x1980, end: 0x19DF}, // New Tai Lue\n    {begin: 0x1A00, end: 0x1A1F}, // Buginese\n    {begin: 0x2C00, end: 0x2C5F}, // Glagolitic\n    {begin: 0x2D30, end: 0x2D7F}, // Tifinagh\n    {begin: 0x4DC0, end: 0x4DFF}, // Yijing Hexagram Symbols\n    {begin: 0xA800, end: 0xA82F}, // Syloti Nagri\n    {begin: 0x10000, end: 0x1007F}, // Linear B Syllabary\n    {begin: 0x10140, end: 0x1018F}, // Ancient Greek Numbers\n    {begin: 0x10380, end: 0x1039F}, // Ugaritic\n    {begin: 0x103A0, end: 0x103DF}, // Old Persian\n    {begin: 0x10450, end: 0x1047F}, // Shavian\n    {begin: 0x10480, end: 0x104AF}, // Osmanya\n    {begin: 0x10800, end: 0x1083F}, // Cypriot Syllabary\n    {begin: 0x10A00, end: 0x10A5F}, // Kharoshthi\n    {begin: 0x1D300, end: 0x1D35F}, // Tai Xuan Jing Symbols\n    {begin: 0x12000, end: 0x123FF}, // Cuneiform\n    {begin: 0x1D360, end: 0x1D37F}, // Counting Rod Numerals\n    {begin: 0x1B80, end: 0x1BBF}, // Sundanese\n    {begin: 0x1C00, end: 0x1C4F}, // Lepcha\n    {begin: 0x1C50, end: 0x1C7F}, // Ol Chiki\n    {begin: 0xA880, end: 0xA8DF}, // Saurashtra\n    {begin: 0xA900, end: 0xA92F}, // Kayah Li\n    {begin: 0xA930, end: 0xA95F}, // Rejang\n    {begin: 0xAA00, end: 0xAA5F}, // Cham\n    {begin: 0x10190, end: 0x101CF}, // Ancient Symbols\n    {begin: 0x101D0, end: 0x101FF}, // Phaistos Disc\n    {begin: 0x102A0, end: 0x102DF}, // Carian\n    {begin: 0x1F030, end: 0x1F09F}  // Domino Tiles\n];\n\nfunction getUnicodeRange(unicode) {\n    for (let i = 0; i < unicodeRanges.length; i += 1) {\n        const range = unicodeRanges[i];\n        if (unicode >= range.begin && unicode < range.end) {\n            return i;\n        }\n    }\n\n    return -1;\n}\n\n// Parse the OS/2 and Windows metrics `OS/2` table\nfunction parseOS2Table(data, start) {\n    const os2 = {};\n    const p = new parse.Parser(data, start);\n    os2.version = p.parseUShort();\n    os2.xAvgCharWidth = p.parseShort();\n    os2.usWeightClass = p.parseUShort();\n    os2.usWidthClass = p.parseUShort();\n    os2.fsType = p.parseUShort();\n    os2.ySubscriptXSize = p.parseShort();\n    os2.ySubscriptYSize = p.parseShort();\n    os2.ySubscriptXOffset = p.parseShort();\n    os2.ySubscriptYOffset = p.parseShort();\n    os2.ySuperscriptXSize = p.parseShort();\n    os2.ySuperscriptYSize = p.parseShort();\n    os2.ySuperscriptXOffset = p.parseShort();\n    os2.ySuperscriptYOffset = p.parseShort();\n    os2.yStrikeoutSize = p.parseShort();\n    os2.yStrikeoutPosition = p.parseShort();\n    os2.sFamilyClass = p.parseShort();\n    os2.panose = [];\n    for (let i = 0; i < 10; i++) {\n        os2.panose[i] = p.parseByte();\n    }\n\n    os2.ulUnicodeRange1 = p.parseULong();\n    os2.ulUnicodeRange2 = p.parseULong();\n    os2.ulUnicodeRange3 = p.parseULong();\n    os2.ulUnicodeRange4 = p.parseULong();\n    os2.achVendID = String.fromCharCode(p.parseByte(), p.parseByte(), p.parseByte(), p.parseByte());\n    os2.fsSelection = p.parseUShort();\n    os2.usFirstCharIndex = p.parseUShort();\n    os2.usLastCharIndex = p.parseUShort();\n    os2.sTypoAscender = p.parseShort();\n    os2.sTypoDescender = p.parseShort();\n    os2.sTypoLineGap = p.parseShort();\n    os2.usWinAscent = p.parseUShort();\n    os2.usWinDescent = p.parseUShort();\n    if (os2.version >= 1) {\n        os2.ulCodePageRange1 = p.parseULong();\n        os2.ulCodePageRange2 = p.parseULong();\n    }\n\n    if (os2.version >= 2) {\n        os2.sxHeight = p.parseShort();\n        os2.sCapHeight = p.parseShort();\n        os2.usDefaultChar = p.parseUShort();\n        os2.usBreakChar = p.parseUShort();\n        os2.usMaxContent = p.parseUShort();\n    }\n\n    return os2;\n}\n\nfunction makeOS2Table(options) {\n    return new table.Table('OS/2', [\n        {name: 'version', type: 'USHORT', value: 0x0003},\n        {name: 'xAvgCharWidth', type: 'SHORT', value: 0},\n        {name: 'usWeightClass', type: 'USHORT', value: 0},\n        {name: 'usWidthClass', type: 'USHORT', value: 0},\n        {name: 'fsType', type: 'USHORT', value: 0},\n        {name: 'ySubscriptXSize', type: 'SHORT', value: 650},\n        {name: 'ySubscriptYSize', type: 'SHORT', value: 699},\n        {name: 'ySubscriptXOffset', type: 'SHORT', value: 0},\n        {name: 'ySubscriptYOffset', type: 'SHORT', value: 140},\n        {name: 'ySuperscriptXSize', type: 'SHORT', value: 650},\n        {name: 'ySuperscriptYSize', type: 'SHORT', value: 699},\n        {name: 'ySuperscriptXOffset', type: 'SHORT', value: 0},\n        {name: 'ySuperscriptYOffset', type: 'SHORT', value: 479},\n        {name: 'yStrikeoutSize', type: 'SHORT', value: 49},\n        {name: 'yStrikeoutPosition', type: 'SHORT', value: 258},\n        {name: 'sFamilyClass', type: 'SHORT', value: 0},\n        {name: 'bFamilyType', type: 'BYTE', value: 0},\n        {name: 'bSerifStyle', type: 'BYTE', value: 0},\n        {name: 'bWeight', type: 'BYTE', value: 0},\n        {name: 'bProportion', type: 'BYTE', value: 0},\n        {name: 'bContrast', type: 'BYTE', value: 0},\n        {name: 'bStrokeVariation', type: 'BYTE', value: 0},\n        {name: 'bArmStyle', type: 'BYTE', value: 0},\n        {name: 'bLetterform', type: 'BYTE', value: 0},\n        {name: 'bMidline', type: 'BYTE', value: 0},\n        {name: 'bXHeight', type: 'BYTE', value: 0},\n        {name: 'ulUnicodeRange1', type: 'ULONG', value: 0},\n        {name: 'ulUnicodeRange2', type: 'ULONG', value: 0},\n        {name: 'ulUnicodeRange3', type: 'ULONG', value: 0},\n        {name: 'ulUnicodeRange4', type: 'ULONG', value: 0},\n        {name: 'achVendID', type: 'CHARARRAY', value: 'XXXX'},\n        {name: 'fsSelection', type: 'USHORT', value: 0},\n        {name: 'usFirstCharIndex', type: 'USHORT', value: 0},\n        {name: 'usLastCharIndex', type: 'USHORT', value: 0},\n        {name: 'sTypoAscender', type: 'SHORT', value: 0},\n        {name: 'sTypoDescender', type: 'SHORT', value: 0},\n        {name: 'sTypoLineGap', type: 'SHORT', value: 0},\n        {name: 'usWinAscent', type: 'USHORT', value: 0},\n        {name: 'usWinDescent', type: 'USHORT', value: 0},\n        {name: 'ulCodePageRange1', type: 'ULONG', value: 0},\n        {name: 'ulCodePageRange2', type: 'ULONG', value: 0},\n        {name: 'sxHeight', type: 'SHORT', value: 0},\n        {name: 'sCapHeight', type: 'SHORT', value: 0},\n        {name: 'usDefaultChar', type: 'USHORT', value: 0},\n        {name: 'usBreakChar', type: 'USHORT', value: 0},\n        {name: 'usMaxContext', type: 'USHORT', value: 0}\n    ], options);\n}\n\nexport default { parse: parseOS2Table, make: makeOS2Table, unicodeRanges, getUnicodeRange };\n", "// The `post` table stores additional PostScript information, such as glyph names.\n// https://www.microsoft.com/typography/OTSPEC/post.htm\n\nimport { standardNames } from '../encoding';\nimport parse from '../parse';\nimport table from '../table';\n\n// Parse the PostScript `post` table\nfunction parsePostTable(data, start) {\n    const post = {};\n    const p = new parse.Parser(data, start);\n    post.version = p.parseVersion();\n    post.italicAngle = p.parseFixed();\n    post.underlinePosition = p.parseShort();\n    post.underlineThickness = p.parseShort();\n    post.isFixedPitch = p.parseULong();\n    post.minMemType42 = p.parseULong();\n    post.maxMemType42 = p.parseULong();\n    post.minMemType1 = p.parseULong();\n    post.maxMemType1 = p.parseULong();\n    switch (post.version) {\n        case 1:\n            post.names = standardNames.slice();\n            break;\n        case 2:\n            post.numberOfGlyphs = p.parseUShort();\n            post.glyphNameIndex = new Array(post.numberOfGlyphs);\n            for (let i = 0; i < post.numberOfGlyphs; i++) {\n                post.glyphNameIndex[i] = p.parseUShort();\n            }\n\n            post.names = [];\n            for (let i = 0; i < post.numberOfGlyphs; i++) {\n                if (post.glyphNameIndex[i] >= standardNames.length) {\n                    const nameLength = p.parseChar();\n                    post.names.push(p.parseString(nameLength));\n                }\n            }\n\n            break;\n        case 2.5:\n            post.numberOfGlyphs = p.parseUShort();\n            post.offset = new Array(post.numberOfGlyphs);\n            for (let i = 0; i < post.numberOfGlyphs; i++) {\n                post.offset[i] = p.parseChar();\n            }\n\n            break;\n    }\n    return post;\n}\n\nfunction makePostTable() {\n    return new table.Table('post', [\n        {name: 'version', type: 'FIXED', value: 0x00030000},\n        {name: 'italicAngle', type: 'FIXED', value: 0},\n        {name: 'underlinePosition', type: 'FWORD', value: 0},\n        {name: 'underlineThickness', type: 'FWORD', value: 0},\n        {name: 'isFixedPitch', type: 'ULONG', value: 0},\n        {name: 'minMemType42', type: 'ULONG', value: 0},\n        {name: 'maxMemType42', type: 'ULONG', value: 0},\n        {name: 'minMemType1', type: 'ULONG', value: 0},\n        {name: 'maxMemType1', type: 'ULONG', value: 0}\n    ]);\n}\n\nexport default { parse: parsePostTable, make: makePostTable };\n", "// The `GSUB` table contains ligatures, among other things.\n// https://www.microsoft.com/typography/OTSPEC/gsub.htm\n\nimport check from '../check';\nimport { Parser } from '../parse';\nimport table from '../table';\n\nconst subtableParsers = new Array(9);         // subtableParsers[0] is unused\n\n// https://www.microsoft.com/typography/OTSPEC/GSUB.htm#SS\nsubtableParsers[1] = function parseLookup1() {\n    const start = this.offset + this.relativeOffset;\n    const substFormat = this.parseUShort();\n    if (substFormat === 1) {\n        return {\n            substFormat: 1,\n            coverage: this.parsePointer(Parser.coverage),\n            deltaGlyphId: this.parseUShort()\n        };\n    } else if (substFormat === 2) {\n        return {\n            substFormat: 2,\n            coverage: this.parsePointer(Parser.coverage),\n            substitute: this.parseOffset16List()\n        };\n    }\n    check.assert(false, '0x' + start.toString(16) + ': lookup type 1 format must be 1 or 2.');\n};\n\n// https://www.microsoft.com/typography/OTSPEC/GSUB.htm#MS\nsubtableParsers[2] = function parseLookup2() {\n    const substFormat = this.parseUShort();\n    check.argument(substFormat === 1, 'GSUB Multiple Substitution Subtable identifier-format must be 1');\n    return {\n        substFormat: substFormat,\n        coverage: this.parsePointer(Parser.coverage),\n        sequences: this.parseListOfLists()\n    };\n};\n\n// https://www.microsoft.com/typography/OTSPEC/GSUB.htm#AS\nsubtableParsers[3] = function parseLookup3() {\n    const substFormat = this.parseUShort();\n    check.argument(substFormat === 1, 'GSUB Alternate Substitution Subtable identifier-format must be 1');\n    return {\n        substFormat: substFormat,\n        coverage: this.parsePointer(Parser.coverage),\n        alternateSets: this.parseListOfLists()\n    };\n};\n\n// https://www.microsoft.com/typography/OTSPEC/GSUB.htm#LS\nsubtableParsers[4] = function parseLookup4() {\n    const substFormat = this.parseUShort();\n    check.argument(substFormat === 1, 'GSUB ligature table identifier-format must be 1');\n    return {\n        substFormat: substFormat,\n        coverage: this.parsePointer(Parser.coverage),\n        ligatureSets: this.parseListOfLists(function() {\n            return {\n                ligGlyph: this.parseUShort(),\n                components: this.parseUShortList(this.parseUShort() - 1)\n            };\n        })\n    };\n};\n\nconst lookupRecordDesc = {\n    sequenceIndex: Parser.uShort,\n    lookupListIndex: Parser.uShort\n};\n\n// https://www.microsoft.com/typography/OTSPEC/GSUB.htm#CSF\nsubtableParsers[5] = function parseLookup5() {\n    const start = this.offset + this.relativeOffset;\n    const substFormat = this.parseUShort();\n\n    if (substFormat === 1) {\n        return {\n            substFormat: substFormat,\n            coverage: this.parsePointer(Parser.coverage),\n            ruleSets: this.parseListOfLists(function() {\n                const glyphCount = this.parseUShort();\n                const substCount = this.parseUShort();\n                return {\n                    input: this.parseUShortList(glyphCount - 1),\n                    lookupRecords: this.parseRecordList(substCount, lookupRecordDesc)\n                };\n            })\n        };\n    } else if (substFormat === 2) {\n        return {\n            substFormat: substFormat,\n            coverage: this.parsePointer(Parser.coverage),\n            classDef: this.parsePointer(Parser.classDef),\n            classSets: this.parseListOfLists(function() {\n                const glyphCount = this.parseUShort();\n                const substCount = this.parseUShort();\n                return {\n                    classes: this.parseUShortList(glyphCount - 1),\n                    lookupRecords: this.parseRecordList(substCount, lookupRecordDesc)\n                };\n            })\n        };\n    } else if (substFormat === 3) {\n        const glyphCount = this.parseUShort();\n        const substCount = this.parseUShort();\n        return {\n            substFormat: substFormat,\n            coverages: this.parseList(glyphCount, Parser.pointer(Parser.coverage)),\n            lookupRecords: this.parseRecordList(substCount, lookupRecordDesc)\n        };\n    }\n    check.assert(false, '0x' + start.toString(16) + ': lookup type 5 format must be 1, 2 or 3.');\n};\n\n// https://www.microsoft.com/typography/OTSPEC/GSUB.htm#CC\nsubtableParsers[6] = function parseLookup6() {\n    const start = this.offset + this.relativeOffset;\n    const substFormat = this.parseUShort();\n    if (substFormat === 1) {\n        return {\n            substFormat: 1,\n            coverage: this.parsePointer(Parser.coverage),\n            chainRuleSets: this.parseListOfLists(function() {\n                return {\n                    backtrack: this.parseUShortList(),\n                    input: this.parseUShortList(this.parseShort() - 1),\n                    lookahead: this.parseUShortList(),\n                    lookupRecords: this.parseRecordList(lookupRecordDesc)\n                };\n            })\n        };\n    } else if (substFormat === 2) {\n        return {\n            substFormat: 2,\n            coverage: this.parsePointer(Parser.coverage),\n            backtrackClassDef: this.parsePointer(Parser.classDef),\n            inputClassDef: this.parsePointer(Parser.classDef),\n            lookaheadClassDef: this.parsePointer(Parser.classDef),\n            chainClassSet: this.parseListOfLists(function() {\n                return {\n                    backtrack: this.parseUShortList(),\n                    input: this.parseUShortList(this.parseShort() - 1),\n                    lookahead: this.parseUShortList(),\n                    lookupRecords: this.parseRecordList(lookupRecordDesc)\n                };\n            })\n        };\n    } else if (substFormat === 3) {\n        return {\n            substFormat: 3,\n            backtrackCoverage: this.parseList(Parser.pointer(Parser.coverage)),\n            inputCoverage: this.parseList(Parser.pointer(Parser.coverage)),\n            lookaheadCoverage: this.parseList(Parser.pointer(Parser.coverage)),\n            lookupRecords: this.parseRecordList(lookupRecordDesc)\n        };\n    }\n    check.assert(false, '0x' + start.toString(16) + ': lookup type 6 format must be 1, 2 or 3.');\n};\n\n// https://www.microsoft.com/typography/OTSPEC/GSUB.htm#ES\nsubtableParsers[7] = function parseLookup7() {\n    // Extension Substitution subtable\n    const substFormat = this.parseUShort();\n    check.argument(substFormat === 1, 'GSUB Extension Substitution subtable identifier-format must be 1');\n    const extensionLookupType = this.parseUShort();\n    const extensionParser = new Parser(this.data, this.offset + this.parseULong());\n    return {\n        substFormat: 1,\n        lookupType: extensionLookupType,\n        extension: subtableParsers[extensionLookupType].call(extensionParser)\n    };\n};\n\n// https://www.microsoft.com/typography/OTSPEC/GSUB.htm#RCCS\nsubtableParsers[8] = function parseLookup8() {\n    const substFormat = this.parseUShort();\n    check.argument(substFormat === 1, 'GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1');\n    return {\n        substFormat: substFormat,\n        coverage: this.parsePointer(Parser.coverage),\n        backtrackCoverage: this.parseList(Parser.pointer(Parser.coverage)),\n        lookaheadCoverage: this.parseList(Parser.pointer(Parser.coverage)),\n        substitutes: this.parseUShortList()\n    };\n};\n\n// https://www.microsoft.com/typography/OTSPEC/gsub.htm\nfunction parseGsubTable(data, start) {\n    start = start || 0;\n    const p = new Parser(data, start);\n    const tableVersion = p.parseVersion(1);\n    check.argument(tableVersion === 1 || tableVersion === 1.1, 'Unsupported GSUB table version.');\n    if (tableVersion === 1) {\n        return {\n            version: tableVersion,\n            scripts: p.parseScriptList(),\n            features: p.parseFeatureList(),\n            lookups: p.parseLookupList(subtableParsers)\n        };\n    } else {\n        return {\n            version: tableVersion,\n            scripts: p.parseScriptList(),\n            features: p.parseFeatureList(),\n            lookups: p.parseLookupList(subtableParsers),\n            variations: p.parseFeatureVariationsList()\n        };\n    }\n\n}\n\n// GSUB Writing //////////////////////////////////////////////\nconst subtableMakers = new Array(9);\n\nsubtableMakers[1] = function makeLookup1(subtable) {\n    if (subtable.substFormat === 1) {\n        return new table.Table('substitutionTable', [\n            {name: 'substFormat', type: 'USHORT', value: 1},\n            {name: 'coverage', type: 'TABLE', value: new table.Coverage(subtable.coverage)},\n            {name: 'deltaGlyphID', type: 'USHORT', value: subtable.deltaGlyphId}\n        ]);\n    } else {\n        return new table.Table('substitutionTable', [\n            {name: 'substFormat', type: 'USHORT', value: 2},\n            {name: 'coverage', type: 'TABLE', value: new table.Coverage(subtable.coverage)}\n        ].concat(table.ushortList('substitute', subtable.substitute)));\n    }\n    check.fail('Lookup type 1 substFormat must be 1 or 2.');\n};\n\nsubtableMakers[2] = function makeLookup2(subtable) {\n    check.assert(subtable.substFormat === 1, 'Lookup type 2 substFormat must be 1.');\n    return new table.Table('substitutionTable', [\n        {name: 'substFormat', type: 'USHORT', value: 1},\n        {name: 'coverage', type: 'TABLE', value: new table.Coverage(subtable.coverage)}\n    ].concat(table.tableList('seqSet', subtable.sequences, function(sequenceSet) {\n        return new table.Table('sequenceSetTable', table.ushortList('sequence', sequenceSet));\n    })));\n};\n\nsubtableMakers[3] = function makeLookup3(subtable) {\n    check.assert(subtable.substFormat === 1, 'Lookup type 3 substFormat must be 1.');\n    return new table.Table('substitutionTable', [\n        {name: 'substFormat', type: 'USHORT', value: 1},\n        {name: 'coverage', type: 'TABLE', value: new table.Coverage(subtable.coverage)}\n    ].concat(table.tableList('altSet', subtable.alternateSets, function(alternateSet) {\n        return new table.Table('alternateSetTable', table.ushortList('alternate', alternateSet));\n    })));\n};\n\nsubtableMakers[4] = function makeLookup4(subtable) {\n    check.assert(subtable.substFormat === 1, 'Lookup type 4 substFormat must be 1.');\n    return new table.Table('substitutionTable', [\n        {name: 'substFormat', type: 'USHORT', value: 1},\n        {name: 'coverage', type: 'TABLE', value: new table.Coverage(subtable.coverage)}\n    ].concat(table.tableList('ligSet', subtable.ligatureSets, function(ligatureSet) {\n        return new table.Table('ligatureSetTable', table.tableList('ligature', ligatureSet, function(ligature) {\n            return new table.Table('ligatureTable',\n                [{name: 'ligGlyph', type: 'USHORT', value: ligature.ligGlyph}]\n                .concat(table.ushortList('component', ligature.components, ligature.components.length + 1))\n            );\n        }));\n    })));\n};\n\nsubtableMakers[6] = function makeLookup6(subtable) {\n    if (subtable.substFormat === 1) {\n        let returnTable = new table.Table('chainContextTable', [\n            {name: 'substFormat', type: 'USHORT', value: subtable.substFormat},\n            {name: 'coverage', type: 'TABLE', value: new table.Coverage(subtable.coverage)}\n        ].concat(table.tableList('chainRuleSet', subtable.chainRuleSets, function(chainRuleSet) {\n            return new table.Table('chainRuleSetTable', table.tableList('chainRule', chainRuleSet, function(chainRule) {\n                let tableData = table.ushortList('backtrackGlyph', chainRule.backtrack, chainRule.backtrack.length)\n                    .concat(table.ushortList('inputGlyph', chainRule.input, chainRule.input.length + 1))\n                    .concat(table.ushortList('lookaheadGlyph', chainRule.lookahead, chainRule.lookahead.length))\n                    .concat(table.ushortList('substitution', [], chainRule.lookupRecords.length));\n\n                chainRule.lookupRecords.forEach((record, i) => {\n                    tableData = tableData\n                        .concat({name: 'sequenceIndex' + i, type: 'USHORT', value: record.sequenceIndex})\n                        .concat({name: 'lookupListIndex' + i, type: 'USHORT', value: record.lookupListIndex});\n                });\n                return new table.Table('chainRuleTable', tableData);\n            }));\n        })));\n        return returnTable;\n    } else if (subtable.substFormat === 2) {\n        check.assert(false, 'lookup type 6 format 2 is not yet supported.');\n    } else if (subtable.substFormat === 3) {\n        let tableData = [\n            {name: 'substFormat', type: 'USHORT', value: subtable.substFormat},\n        ];\n\n        tableData.push({name: 'backtrackGlyphCount', type: 'USHORT', value: subtable.backtrackCoverage.length});\n        subtable.backtrackCoverage.forEach((coverage, i) => {\n            tableData.push({name: 'backtrackCoverage' + i, type: 'TABLE', value: new table.Coverage(coverage)});\n        });\n        tableData.push({name: 'inputGlyphCount', type: 'USHORT', value: subtable.inputCoverage.length});\n        subtable.inputCoverage.forEach((coverage, i) => {\n            tableData.push({name: 'inputCoverage' + i, type: 'TABLE', value: new table.Coverage(coverage)});\n        });\n        tableData.push({name: 'lookaheadGlyphCount', type: 'USHORT', value: subtable.lookaheadCoverage.length});\n        subtable.lookaheadCoverage.forEach((coverage, i) => {\n            tableData.push({name: 'lookaheadCoverage' + i, type: 'TABLE', value: new table.Coverage(coverage)});\n        });\n\n        tableData.push({name: 'substitutionCount', type: 'USHORT', value: subtable.lookupRecords.length});\n        subtable.lookupRecords.forEach((record, i) => {\n            tableData = tableData\n                .concat({name: 'sequenceIndex' + i, type: 'USHORT', value: record.sequenceIndex})\n                .concat({name: 'lookupListIndex' + i, type: 'USHORT', value: record.lookupListIndex});\n        });\n\n        let returnTable = new table.Table('chainContextTable', tableData);\n\n        return returnTable;\n    }\n\n    check.assert(false, 'lookup type 6 format must be 1, 2 or 3.');\n};\n\nfunction makeGsubTable(gsub) {\n    return new table.Table('GSUB', [\n        {name: 'version', type: 'ULONG', value: 0x10000},\n        {name: 'scripts', type: 'TABLE', value: new table.ScriptList(gsub.scripts)},\n        {name: 'features', type: 'TABLE', value: new table.FeatureList(gsub.features)},\n        {name: 'lookups', type: 'TABLE', value: new table.LookupList(gsub.lookups, subtableMakers)}\n    ]);\n}\n\nexport default { parse: parseGsubTable, make: makeGsubTable };\n", "// The `GPOS` table contains kerning pairs, among other things.\n// https://www.microsoft.com/typography/OTSPEC/gpos.htm\n\nimport check from '../check';\nimport { decode } from '../types';\nimport parse from '../parse';\nimport table from '../table';\n\n// Parse the metadata `meta` table.\n// https://developer.apple.com/fonts/TrueType-Reference-Manual/RM06/Chap6meta.html\nfunction parseMetaTable(data, start) {\n    const p = new parse.Parser(data, start);\n    const tableVersion = p.parseULong();\n    check.argument(tableVersion === 1, 'Unsupported META table version.');\n    p.parseULong(); // flags - currently unused and set to 0\n    p.parseULong(); // tableOffset\n    const numDataMaps = p.parseULong();\n\n    const tags = {};\n    for (let i = 0; i < numDataMaps; i++) {\n        const tag = p.parseTag();\n        const dataOffset = p.parseULong();\n        const dataLength = p.parseULong();\n        const text = decode.UTF8(data, start + dataOffset, dataLength);\n\n        tags[tag] = text;\n    }\n    return tags;\n}\n\nfunction makeMetaTable(tags) {\n    const numTags = Object.keys(tags).length;\n    let stringPool = '';\n    const stringPoolOffset = 16 + numTags * 12;\n\n    const result = new table.Table('meta', [\n        {name: 'version', type: 'ULONG', value: 1},\n        {name: 'flags', type: 'ULONG', value: 0},\n        {name: 'offset', type: 'ULONG', value: stringPoolOffset},\n        {name: 'numTags', type: 'ULONG', value: numTags}\n    ]);\n\n    for (let tag in tags) {\n        const pos = stringPool.length;\n        stringPool += tags[tag];\n\n        result.fields.push({name: 'tag ' + tag, type: 'TAG', value: tag});\n        result.fields.push({name: 'offset ' + tag, type: 'ULONG', value: stringPoolOffset + pos});\n        result.fields.push({name: 'length ' + tag, type: 'ULONG', value: tags[tag].length});\n    }\n\n    result.fields.push({name: 'stringPool', type: 'CHARARRAY', value: stringPool});\n\n    return result;\n}\n\nexport default { parse: parseMetaTable, make: makeMetaTable };\n", "// The `sfnt` wrapper provides organization for the tables in the font.\n// It is the top-level data structure in a font.\n// https://www.microsoft.com/typography/OTSPEC/otff.htm\n// Recommendations for creating OpenType Fonts:\n// http://www.microsoft.com/typography/otspec140/recom.htm\n\nimport check from '../check';\nimport table from '../table';\n\nimport cmap from './cmap';\nimport cff from './cff';\nimport head from './head';\nimport hhea from './hhea';\nimport hmtx from './hmtx';\nimport ltag from './ltag';\nimport maxp from './maxp';\nimport _name from './name';\nimport os2 from './os2';\nimport post from './post';\nimport gsub from './gsub';\nimport meta from './meta';\n\nfunction log2(v) {\n    return Math.log(v) / Math.log(2) | 0;\n}\n\nfunction computeCheckSum(bytes) {\n    while (bytes.length % 4 !== 0) {\n        bytes.push(0);\n    }\n\n    let sum = 0;\n    for (let i = 0; i < bytes.length; i += 4) {\n        sum += (bytes[i] << 24) +\n            (bytes[i + 1] << 16) +\n            (bytes[i + 2] << 8) +\n            (bytes[i + 3]);\n    }\n\n    sum %= Math.pow(2, 32);\n    return sum;\n}\n\nfunction makeTableRecord(tag, checkSum, offset, length) {\n    return new table.Record('Table Record', [\n        {name: 'tag', type: 'TAG', value: tag !== undefined ? tag : ''},\n        {name: 'checkSum', type: 'ULONG', value: checkSum !== undefined ? checkSum : 0},\n        {name: 'offset', type: 'ULONG', value: offset !== undefined ? offset : 0},\n        {name: 'length', type: 'ULONG', value: length !== undefined ? length : 0}\n    ]);\n}\n\nfunction makeSfntTable(tables) {\n    const sfnt = new table.Table('sfnt', [\n        {name: 'version', type: 'TAG', value: 'OTTO'},\n        {name: 'numTables', type: 'USHORT', value: 0},\n        {name: 'searchRange', type: 'USHORT', value: 0},\n        {name: 'entrySelector', type: 'USHORT', value: 0},\n        {name: 'rangeShift', type: 'USHORT', value: 0}\n    ]);\n    sfnt.tables = tables;\n    sfnt.numTables = tables.length;\n    const highestPowerOf2 = Math.pow(2, log2(sfnt.numTables));\n    sfnt.searchRange = 16 * highestPowerOf2;\n    sfnt.entrySelector = log2(highestPowerOf2);\n    sfnt.rangeShift = sfnt.numTables * 16 - sfnt.searchRange;\n\n    const recordFields = [];\n    const tableFields = [];\n\n    let offset = sfnt.sizeOf() + (makeTableRecord().sizeOf() * sfnt.numTables);\n    while (offset % 4 !== 0) {\n        offset += 1;\n        tableFields.push({name: 'padding', type: 'BYTE', value: 0});\n    }\n\n    for (let i = 0; i < tables.length; i += 1) {\n        const t = tables[i];\n        check.argument(t.tableName.length === 4, 'Table name' + t.tableName + ' is invalid.');\n        const tableLength = t.sizeOf();\n        const tableRecord = makeTableRecord(t.tableName, computeCheckSum(t.encode()), offset, tableLength);\n        recordFields.push({name: tableRecord.tag + ' Table Record', type: 'RECORD', value: tableRecord});\n        tableFields.push({name: t.tableName + ' table', type: 'RECORD', value: t});\n        offset += tableLength;\n        check.argument(!isNaN(offset), 'Something went wrong calculating the offset.');\n        while (offset % 4 !== 0) {\n            offset += 1;\n            tableFields.push({name: 'padding', type: 'BYTE', value: 0});\n        }\n    }\n\n    // Table records need to be sorted alphabetically.\n    recordFields.sort(function(r1, r2) {\n        if (r1.value.tag > r2.value.tag) {\n            return 1;\n        } else {\n            return -1;\n        }\n    });\n\n    sfnt.fields = sfnt.fields.concat(recordFields);\n    sfnt.fields = sfnt.fields.concat(tableFields);\n    return sfnt;\n}\n\n// Get the metrics for a character. If the string has more than one character\n// this function returns metrics for the first available character.\n// You can provide optional fallback metrics if no characters are available.\nfunction metricsForChar(font, chars, notFoundMetrics) {\n    for (let i = 0; i < chars.length; i += 1) {\n        const glyphIndex = font.charToGlyphIndex(chars[i]);\n        if (glyphIndex > 0) {\n            const glyph = font.glyphs.get(glyphIndex);\n            return glyph.getMetrics();\n        }\n    }\n\n    return notFoundMetrics;\n}\n\nfunction average(vs) {\n    let sum = 0;\n    for (let i = 0; i < vs.length; i += 1) {\n        sum += vs[i];\n    }\n\n    return sum / vs.length;\n}\n\n// Convert the font object to a SFNT data structure.\n// This structure contains all the necessary tables and metadata to create a binary OTF file.\nfunction fontToSfntTable(font) {\n    const xMins = [];\n    const yMins = [];\n    const xMaxs = [];\n    const yMaxs = [];\n    const advanceWidths = [];\n    const leftSideBearings = [];\n    const rightSideBearings = [];\n    let firstCharIndex;\n    let lastCharIndex = 0;\n    let ulUnicodeRange1 = 0;\n    let ulUnicodeRange2 = 0;\n    let ulUnicodeRange3 = 0;\n    let ulUnicodeRange4 = 0;\n\n    for (let i = 0; i < font.glyphs.length; i += 1) {\n        const glyph = font.glyphs.get(i);\n        const unicode = glyph.unicode | 0;\n\n        if (isNaN(glyph.advanceWidth)) {\n            throw new Error('Glyph ' + glyph.name + ' (' + i + '): advanceWidth is not a number.');\n        }\n\n        if (firstCharIndex > unicode || firstCharIndex === undefined) {\n            // ignore .notdef char\n            if (unicode > 0) {\n                firstCharIndex = unicode;\n            }\n        }\n\n        if (lastCharIndex < unicode) {\n            lastCharIndex = unicode;\n        }\n\n        const position = os2.getUnicodeRange(unicode);\n        if (position < 32) {\n            ulUnicodeRange1 |= 1 << position;\n        } else if (position < 64) {\n            ulUnicodeRange2 |= 1 << position - 32;\n        } else if (position < 96) {\n            ulUnicodeRange3 |= 1 << position - 64;\n        } else if (position < 123) {\n            ulUnicodeRange4 |= 1 << position - 96;\n        } else {\n            throw new Error('Unicode ranges bits > 123 are reserved for internal usage');\n        }\n        // Skip non-important characters.\n        if (glyph.name === '.notdef') continue;\n        const metrics = glyph.getMetrics();\n        xMins.push(metrics.xMin);\n        yMins.push(metrics.yMin);\n        xMaxs.push(metrics.xMax);\n        yMaxs.push(metrics.yMax);\n        leftSideBearings.push(metrics.leftSideBearing);\n        rightSideBearings.push(metrics.rightSideBearing);\n        advanceWidths.push(glyph.advanceWidth);\n    }\n\n    const globals = {\n        xMin: Math.min.apply(null, xMins),\n        yMin: Math.min.apply(null, yMins),\n        xMax: Math.max.apply(null, xMaxs),\n        yMax: Math.max.apply(null, yMaxs),\n        advanceWidthMax: Math.max.apply(null, advanceWidths),\n        advanceWidthAvg: average(advanceWidths),\n        minLeftSideBearing: Math.min.apply(null, leftSideBearings),\n        maxLeftSideBearing: Math.max.apply(null, leftSideBearings),\n        minRightSideBearing: Math.min.apply(null, rightSideBearings)\n    };\n    globals.ascender = font.ascender;\n    globals.descender = font.descender;\n\n    const headTable = head.make({\n        flags: 3, // 00000011 (baseline for font at y=0; left sidebearing point at x=0)\n        unitsPerEm: font.unitsPerEm,\n        xMin: globals.xMin,\n        yMin: globals.yMin,\n        xMax: globals.xMax,\n        yMax: globals.yMax,\n        lowestRecPPEM: 3,\n        createdTimestamp: font.createdTimestamp\n    });\n\n    const hheaTable = hhea.make({\n        ascender: globals.ascender,\n        descender: globals.descender,\n        advanceWidthMax: globals.advanceWidthMax,\n        minLeftSideBearing: globals.minLeftSideBearing,\n        minRightSideBearing: globals.minRightSideBearing,\n        xMaxExtent: globals.maxLeftSideBearing + (globals.xMax - globals.xMin),\n        numberOfHMetrics: font.glyphs.length\n    });\n\n    const maxpTable = maxp.make(font.glyphs.length);\n\n    const os2Table = os2.make(Object.assign({\n        xAvgCharWidth: Math.round(globals.advanceWidthAvg),\n        usFirstCharIndex: firstCharIndex,\n        usLastCharIndex: lastCharIndex,\n        ulUnicodeRange1: ulUnicodeRange1,\n        ulUnicodeRange2: ulUnicodeRange2,\n        ulUnicodeRange3: ulUnicodeRange3,\n        ulUnicodeRange4: ulUnicodeRange4,\n        // See http://typophile.com/node/13081 for more info on vertical metrics.\n        // We get metrics for typical characters (such as \"x\" for xHeight).\n        // We provide some fallback characters if characters are unavailable: their\n        // ordering was chosen experimentally.\n        sTypoAscender: globals.ascender,\n        sTypoDescender: globals.descender,\n        sTypoLineGap: 0,\n        usWinAscent: globals.yMax,\n        usWinDescent: Math.abs(globals.yMin),\n        ulCodePageRange1: 1, // FIXME: hard-code Latin 1 support for now\n        sxHeight: metricsForChar(font, 'xyvw', {yMax: Math.round(globals.ascender / 2)}).yMax,\n        sCapHeight: metricsForChar(font, 'HIKLEFJMNTZBDPRAGOQSUVWXY', globals).yMax,\n        usDefaultChar: font.hasChar(' ') ? 32 : 0, // Use space as the default character, if available.\n        usBreakChar: font.hasChar(' ') ? 32 : 0, // Use space as the break character, if available.\n    }, font.tables.os2));\n\n    const hmtxTable = hmtx.make(font.glyphs);\n    const cmapTable = cmap.make(font.glyphs);\n\n    const englishFamilyName = font.getEnglishName('fontFamily');\n    const englishStyleName = font.getEnglishName('fontSubfamily');\n    const englishFullName = englishFamilyName + ' ' + englishStyleName;\n    let postScriptName = font.getEnglishName('postScriptName');\n    if (!postScriptName) {\n        postScriptName = englishFamilyName.replace(/\\s/g, '') + '-' + englishStyleName;\n    }\n\n    const names = {};\n    for (let n in font.names) {\n        names[n] = font.names[n];\n    }\n\n    if (!names.uniqueID) {\n        names.uniqueID = {en: font.getEnglishName('manufacturer') + ':' + englishFullName};\n    }\n\n    if (!names.postScriptName) {\n        names.postScriptName = {en: postScriptName};\n    }\n\n    if (!names.preferredFamily) {\n        names.preferredFamily = font.names.fontFamily;\n    }\n\n    if (!names.preferredSubfamily) {\n        names.preferredSubfamily = font.names.fontSubfamily;\n    }\n\n    const languageTags = [];\n    const nameTable = _name.make(names, languageTags);\n    const ltagTable = (languageTags.length > 0 ? ltag.make(languageTags) : undefined);\n\n    const postTable = post.make();\n    const cffTable = cff.make(font.glyphs, {\n        version: font.getEnglishName('version'),\n        fullName: englishFullName,\n        familyName: englishFamilyName,\n        weightName: englishStyleName,\n        postScriptName: postScriptName,\n        unitsPerEm: font.unitsPerEm,\n        fontBBox: [0, globals.yMin, globals.ascender, globals.advanceWidthMax]\n    });\n\n    const metaTable = (font.metas && Object.keys(font.metas).length > 0) ? meta.make(font.metas) : undefined;\n\n    // The order does not matter because makeSfntTable() will sort them.\n    const tables = [headTable, hheaTable, maxpTable, os2Table, nameTable, cmapTable, postTable, cffTable, hmtxTable];\n    if (ltagTable) {\n        tables.push(ltagTable);\n    }\n    // Optional tables\n    if (font.tables.gsub) {\n        tables.push(gsub.make(font.tables.gsub));\n    }\n    if (metaTable) {\n        tables.push(metaTable);\n    }\n\n    const sfntTable = makeSfntTable(tables);\n\n    // Compute the font's checkSum and store it in head.checkSumAdjustment.\n    const bytes = sfntTable.encode();\n    const checkSum = computeCheckSum(bytes);\n    const tableFields = sfntTable.fields;\n    let checkSumAdjusted = false;\n    for (let i = 0; i < tableFields.length; i += 1) {\n        if (tableFields[i].name === 'head table') {\n            tableFields[i].value.checkSumAdjustment = 0xB1B0AFBA - checkSum;\n            checkSumAdjusted = true;\n            break;\n        }\n    }\n\n    if (!checkSumAdjusted) {\n        throw new Error('Could not find head table with checkSum to adjust.');\n    }\n\n    return sfntTable;\n}\n\nexport default { make: makeSfntTable, fontToTable: fontToSfntTable, computeCheckSum };\n", "// The Layout object is the prototype of Substitution objects, and provides\n// utility methods to manipulate common layout tables (GPOS, GSUB, GDEF...)\n\nimport check from './check';\n\nfunction searchTag(arr, tag) {\n    /* jshint bitwise: false */\n    let imin = 0;\n    let imax = arr.length - 1;\n    while (imin <= imax) {\n        const imid = (imin + imax) >>> 1;\n        const val = arr[imid].tag;\n        if (val === tag) {\n            return imid;\n        } else if (val < tag) {\n            imin = imid + 1;\n        } else { imax = imid - 1; }\n    }\n    // Not found: return -1-insertion point\n    return -imin - 1;\n}\n\nfunction binSearch(arr, value) {\n    /* jshint bitwise: false */\n    let imin = 0;\n    let imax = arr.length - 1;\n    while (imin <= imax) {\n        const imid = (imin + imax) >>> 1;\n        const val = arr[imid];\n        if (val === value) {\n            return imid;\n        } else if (val < value) {\n            imin = imid + 1;\n        } else { imax = imid - 1; }\n    }\n    // Not found: return -1-insertion point\n    return -imin - 1;\n}\n\n// binary search in a list of ranges (coverage, class definition)\nfunction searchRange(ranges, value) {\n    // jshint bitwise: false\n    let range;\n    let imin = 0;\n    let imax = ranges.length - 1;\n    while (imin <= imax) {\n        const imid = (imin + imax) >>> 1;\n        range = ranges[imid];\n        const start = range.start;\n        if (start === value) {\n            return range;\n        } else if (start < value) {\n            imin = imid + 1;\n        } else { imax = imid - 1; }\n    }\n    if (imin > 0) {\n        range = ranges[imin - 1];\n        if (value > range.end) return 0;\n        return range;\n    }\n}\n\n/**\n * @exports opentype.Layout\n * @class\n */\nfunction Layout(font, tableName) {\n    this.font = font;\n    this.tableName = tableName;\n}\n\nLayout.prototype = {\n\n    /**\n     * Binary search an object by \"tag\" property\n     * @instance\n     * @function searchTag\n     * @memberof opentype.Layout\n     * @param  {Array} arr\n     * @param  {string} tag\n     * @return {number}\n     */\n    searchTag: searchTag,\n\n    /**\n     * Binary search in a list of numbers\n     * @instance\n     * @function binSearch\n     * @memberof opentype.Layout\n     * @param  {Array} arr\n     * @param  {number} value\n     * @return {number}\n     */\n    binSearch: binSearch,\n\n    /**\n     * Get or create the Layout table (GSUB, GPOS etc).\n     * @param  {boolean} create - Whether to create a new one.\n     * @return {Object} The GSUB or GPOS table.\n     */\n    getTable: function(create) {\n        let layout = this.font.tables[this.tableName];\n        if (!layout && create) {\n            layout = this.font.tables[this.tableName] = this.createDefaultTable();\n        }\n        return layout;\n    },\n\n    /**\n     * Returns all scripts in the substitution table.\n     * @instance\n     * @return {Array}\n     */\n    getScriptNames: function() {\n        let layout = this.getTable();\n        if (!layout) { return []; }\n        return layout.scripts.map(function(script) {\n            return script.tag;\n        });\n    },\n\n    /**\n     * Returns the best bet for a script name.\n     * Returns 'DFLT' if it exists.\n     * If not, returns 'latn' if it exists.\n     * If neither exist, returns undefined.\n     */\n    getDefaultScriptName: function() {\n        let layout = this.getTable();\n        if (!layout) { return; }\n        let hasLatn = false;\n        for (let i = 0; i < layout.scripts.length; i++) {\n            const name = layout.scripts[i].tag;\n            if (name === 'DFLT') return name;\n            if (name === 'latn') hasLatn = true;\n        }\n        if (hasLatn) return 'latn';\n    },\n\n    /**\n     * Returns all LangSysRecords in the given script.\n     * @instance\n     * @param {string} [script='DFLT']\n     * @param {boolean} create - forces the creation of this script table if it doesn't exist.\n     * @return {Object} An object with tag and script properties.\n     */\n    getScriptTable: function(script, create) {\n        const layout = this.getTable(create);\n        if (layout) {\n            script = script || 'DFLT';\n            const scripts = layout.scripts;\n            const pos = searchTag(layout.scripts, script);\n            if (pos >= 0) {\n                return scripts[pos].script;\n            } else if (create) {\n                const scr = {\n                    tag: script,\n                    script: {\n                        defaultLangSys: {reserved: 0, reqFeatureIndex: 0xffff, featureIndexes: []},\n                        langSysRecords: []\n                    }\n                };\n                scripts.splice(-1 - pos, 0, scr);\n                return scr.script;\n            }\n        }\n    },\n\n    /**\n     * Returns a language system table\n     * @instance\n     * @param {string} [script='DFLT']\n     * @param {string} [language='dlft']\n     * @param {boolean} create - forces the creation of this langSysTable if it doesn't exist.\n     * @return {Object}\n     */\n    getLangSysTable: function(script, language, create) {\n        const scriptTable = this.getScriptTable(script, create);\n        if (scriptTable) {\n            if (!language || language === 'dflt' || language === 'DFLT') {\n                return scriptTable.defaultLangSys;\n            }\n            const pos = searchTag(scriptTable.langSysRecords, language);\n            if (pos >= 0) {\n                return scriptTable.langSysRecords[pos].langSys;\n            } else if (create) {\n                const langSysRecord = {\n                    tag: language,\n                    langSys: {reserved: 0, reqFeatureIndex: 0xffff, featureIndexes: []}\n                };\n                scriptTable.langSysRecords.splice(-1 - pos, 0, langSysRecord);\n                return langSysRecord.langSys;\n            }\n        }\n    },\n\n    /**\n     * Get a specific feature table.\n     * @instance\n     * @param {string} [script='DFLT']\n     * @param {string} [language='dlft']\n     * @param {string} feature - One of the codes listed at https://www.microsoft.com/typography/OTSPEC/featurelist.htm\n     * @param {boolean} create - forces the creation of the feature table if it doesn't exist.\n     * @return {Object}\n     */\n    getFeatureTable: function(script, language, feature, create) {\n        const langSysTable = this.getLangSysTable(script, language, create);\n        if (langSysTable) {\n            let featureRecord;\n            const featIndexes = langSysTable.featureIndexes;\n            const allFeatures = this.font.tables[this.tableName].features;\n            // The FeatureIndex array of indices is in arbitrary order,\n            // even if allFeatures is sorted alphabetically by feature tag.\n            for (let i = 0; i < featIndexes.length; i++) {\n                featureRecord = allFeatures[featIndexes[i]];\n                if (featureRecord.tag === feature) {\n                    return featureRecord.feature;\n                }\n            }\n            if (create) {\n                const index = allFeatures.length;\n                // Automatic ordering of features would require to shift feature indexes in the script list.\n                check.assert(index === 0 || feature >= allFeatures[index - 1].tag, 'Features must be added in alphabetical order.');\n                featureRecord = {\n                    tag: feature,\n                    feature: { params: 0, lookupListIndexes: [] }\n                };\n                allFeatures.push(featureRecord);\n                featIndexes.push(index);\n                return featureRecord.feature;\n            }\n        }\n    },\n\n    /**\n     * Get the lookup tables of a given type for a script/language/feature.\n     * @instance\n     * @param {string} [script='DFLT']\n     * @param {string} [language='dlft']\n     * @param {string} feature - 4-letter feature code\n     * @param {number} lookupType - 1 to 9\n     * @param {boolean} create - forces the creation of the lookup table if it doesn't exist, with no subtables.\n     * @return {Object[]}\n     */\n    getLookupTables: function(script, language, feature, lookupType, create) {\n        const featureTable = this.getFeatureTable(script, language, feature, create);\n        const tables = [];\n        if (featureTable) {\n            let lookupTable;\n            const lookupListIndexes = featureTable.lookupListIndexes;\n            const allLookups = this.font.tables[this.tableName].lookups;\n            // lookupListIndexes are in no particular order, so use naive search.\n            for (let i = 0; i < lookupListIndexes.length; i++) {\n                lookupTable = allLookups[lookupListIndexes[i]];\n                if (lookupTable.lookupType === lookupType) {\n                    tables.push(lookupTable);\n                }\n            }\n            if (tables.length === 0 && create) {\n                lookupTable = {\n                    lookupType: lookupType,\n                    lookupFlag: 0,\n                    subtables: [],\n                    markFilteringSet: undefined\n                };\n                const index = allLookups.length;\n                allLookups.push(lookupTable);\n                lookupListIndexes.push(index);\n                return [lookupTable];\n            }\n        }\n        return tables;\n    },\n\n    /**\n     * Find a glyph in a class definition table\n     * https://docs.microsoft.com/en-us/typography/opentype/spec/chapter2#class-definition-table\n     * @param {object} classDefTable - an OpenType Layout class definition table\n     * @param {number} glyphIndex - the index of the glyph to find\n     * @returns {number} -1 if not found\n     */\n    getGlyphClass: function(classDefTable, glyphIndex) {\n        switch (classDefTable.format) {\n            case 1:\n                if (classDefTable.startGlyph <= glyphIndex && glyphIndex < classDefTable.startGlyph + classDefTable.classes.length) {\n                    return classDefTable.classes[glyphIndex - classDefTable.startGlyph];\n                }\n                return 0;\n            case 2:\n                const range = searchRange(classDefTable.ranges, glyphIndex);\n                return range ? range.classId : 0;\n        }\n    },\n\n    /**\n     * Find a glyph in a coverage table\n     * https://docs.microsoft.com/en-us/typography/opentype/spec/chapter2#coverage-table\n     * @param {object} coverageTable - an OpenType Layout coverage table\n     * @param {number} glyphIndex - the index of the glyph to find\n     * @returns {number} -1 if not found\n     */\n    getCoverageIndex: function(coverageTable, glyphIndex) {\n        switch (coverageTable.format) {\n            case 1:\n                const index = binSearch(coverageTable.glyphs, glyphIndex);\n                return index >= 0 ? index : -1;\n            case 2:\n                const range = searchRange(coverageTable.ranges, glyphIndex);\n                return range ? range.index + glyphIndex - range.start : -1;\n        }\n    },\n\n    /**\n     * Returns the list of glyph indexes of a coverage table.\n     * Format 1: the list is stored raw\n     * Format 2: compact list as range records.\n     * @instance\n     * @param  {Object} coverageTable\n     * @return {Array}\n     */\n    expandCoverage: function(coverageTable) {\n        if (coverageTable.format === 1) {\n            return coverageTable.glyphs;\n        } else {\n            const glyphs = [];\n            const ranges = coverageTable.ranges;\n            for (let i = 0; i < ranges.length; i++) {\n                const range = ranges[i];\n                const start = range.start;\n                const end = range.end;\n                for (let j = start; j <= end; j++) {\n                    glyphs.push(j);\n                }\n            }\n            return glyphs;\n        }\n    }\n\n};\n\nexport default Layout;\n", "// The Position object provides utility methods to manipulate\n// the GPOS position table.\n\nimport Layout from './layout';\n\n/**\n * @exports opentype.Position\n * @class\n * @extends opentype.Layout\n * @param {opentype.Font}\n * @constructor\n */\nfunction Position(font) {\n    Layout.call(this, font, 'gpos');\n}\n\nPosition.prototype = Layout.prototype;\n\n/**\n * Init some data for faster and easier access later.\n */\nPosition.prototype.init = function() {\n    const script = this.getDefaultScriptName();\n    this.defaultKerningTables = this.getKerningTables(script);\n};\n\n/**\n * Find a glyph pair in a list of lookup tables of type 2 and retrieve the xAdvance kerning value.\n *\n * @param {integer} leftIndex - left glyph index\n * @param {integer} rightIndex - right glyph index\n * @returns {integer}\n */\nPosition.prototype.getKerningValue = function(kerningLookups, leftIndex, rightIndex) {\n    for (let i = 0; i < kerningLookups.length; i++) {\n        const subtables = kerningLookups[i].subtables;\n        for (let j = 0; j < subtables.length; j++) {\n            const subtable = subtables[j];\n            const covIndex = this.getCoverageIndex(subtable.coverage, leftIndex);\n            if (covIndex < 0) continue;\n            switch (subtable.posFormat) {\n                case 1:\n                    // Search Pair Adjustment Positioning Format 1\n                    let pairSet = subtable.pairSets[covIndex];\n                    for (let k = 0; k < pairSet.length; k++) {\n                        let pair = pairSet[k];\n                        if (pair.secondGlyph === rightIndex) {\n                            return pair.value1 && pair.value1.xAdvance || 0;\n                        }\n                    }\n                    break;      // left glyph found, not right glyph - try next subtable\n                case 2:\n                    // Search Pair Adjustment Positioning Format 2\n                    const class1 = this.getGlyphClass(subtable.classDef1, leftIndex);\n                    const class2 = this.getGlyphClass(subtable.classDef2, rightIndex);\n                    const pair = subtable.classRecords[class1][class2];\n                    return pair.value1 && pair.value1.xAdvance || 0;\n            }\n        }\n    }\n    return 0;\n};\n\n/**\n * List all kerning lookup tables.\n *\n * @param {string} [script='DFLT'] - use font.position.getDefaultScriptName() for a better default value\n * @param {string} [language='dflt']\n * @return {object[]} The list of kerning lookup tables (may be empty), or undefined if there is no GPOS table (and we should use the kern table)\n */\nPosition.prototype.getKerningTables = function(script, language) {\n    if (this.font.tables.gpos) {\n        return this.getLookupTables(script, language, 'kern', 2);\n    }\n};\n\nexport default Position;\n", "// The Substitution object provides utility methods to manipulate\n// the GSUB substitution table.\n\nimport check from './check';\nimport Layout from './layout';\n\n/**\n * @exports opentype.Substitution\n * @class\n * @extends opentype.Layout\n * @param {opentype.Font}\n * @constructor\n */\nfunction Substitution(font) {\n    Layout.call(this, font, 'gsub');\n}\n\n// Check if 2 arrays of primitives are equal.\nfunction arraysEqual(ar1, ar2) {\n    const n = ar1.length;\n    if (n !== ar2.length) { return false; }\n    for (let i = 0; i < n; i++) {\n        if (ar1[i] !== ar2[i]) { return false; }\n    }\n    return true;\n}\n\n// Find the first subtable of a lookup table in a particular format.\nfunction getSubstFormat(lookupTable, format, defaultSubtable) {\n    const subtables = lookupTable.subtables;\n    for (let i = 0; i < subtables.length; i++) {\n        const subtable = subtables[i];\n        if (subtable.substFormat === format) {\n            return subtable;\n        }\n    }\n    if (defaultSubtable) {\n        subtables.push(defaultSubtable);\n        return defaultSubtable;\n    }\n    return undefined;\n}\n\nSubstitution.prototype = Layout.prototype;\n\n/**\n * Create a default GSUB table.\n * @return {Object} gsub - The GSUB table.\n */\nSubstitution.prototype.createDefaultTable = function() {\n    // Generate a default empty GSUB table with just a DFLT script and dflt lang sys.\n    return {\n        version: 1,\n        scripts: [{\n            tag: 'DFLT',\n            script: {\n                defaultLangSys: { reserved: 0, reqFeatureIndex: 0xffff, featureIndexes: [] },\n                langSysRecords: []\n            }\n        }],\n        features: [],\n        lookups: []\n    };\n};\n\n/**\n * List all single substitutions (lookup type 1) for a given script, language, and feature.\n * @param {string} [script='DFLT']\n * @param {string} [language='dflt']\n * @param {string} feature - 4-character feature name ('aalt', 'salt', 'ss01'...)\n * @return {Array} substitutions - The list of substitutions.\n */\nSubstitution.prototype.getSingle = function(feature, script, language) {\n    const substitutions = [];\n    const lookupTables = this.getLookupTables(script, language, feature, 1);\n    for (let idx = 0; idx < lookupTables.length; idx++) {\n        const subtables = lookupTables[idx].subtables;\n        for (let i = 0; i < subtables.length; i++) {\n            const subtable = subtables[i];\n            const glyphs = this.expandCoverage(subtable.coverage);\n            let j;\n            if (subtable.substFormat === 1) {\n                const delta = subtable.deltaGlyphId;\n                for (j = 0; j < glyphs.length; j++) {\n                    const glyph = glyphs[j];\n                    substitutions.push({ sub: glyph, by: glyph + delta });\n                }\n            } else {\n                const substitute = subtable.substitute;\n                for (j = 0; j < glyphs.length; j++) {\n                    substitutions.push({ sub: glyphs[j], by: substitute[j] });\n                }\n            }\n        }\n    }\n    return substitutions;\n};\n\n/**\n * List all multiple substitutions (lookup type 2) for a given script, language, and feature.\n * @param {string} [script='DFLT']\n * @param {string} [language='dflt']\n * @param {string} feature - 4-character feature name ('ccmp', 'stch')\n * @return {Array} substitutions - The list of substitutions.\n */\nSubstitution.prototype.getMultiple = function(feature, script, language) {\n    const substitutions = [];\n    const lookupTables = this.getLookupTables(script, language, feature, 2);\n    for (let idx = 0; idx < lookupTables.length; idx++) {\n        const subtables = lookupTables[idx].subtables;\n        for (let i = 0; i < subtables.length; i++) {\n            const subtable = subtables[i];\n            const glyphs = this.expandCoverage(subtable.coverage);\n            let j;\n\n            for (j = 0; j < glyphs.length; j++) {\n                const glyph = glyphs[j];\n                const replacements = subtable.sequences[j];\n                substitutions.push({ sub: glyph, by: replacements });\n            }\n        }\n    }\n    return substitutions;\n};\n\n/**\n * List all alternates (lookup type 3) for a given script, language, and feature.\n * @param {string} [script='DFLT']\n * @param {string} [language='dflt']\n * @param {string} feature - 4-character feature name ('aalt', 'salt'...)\n * @return {Array} alternates - The list of alternates\n */\nSubstitution.prototype.getAlternates = function(feature, script, language) {\n    const alternates = [];\n    const lookupTables = this.getLookupTables(script, language, feature, 3);\n    for (let idx = 0; idx < lookupTables.length; idx++) {\n        const subtables = lookupTables[idx].subtables;\n        for (let i = 0; i < subtables.length; i++) {\n            const subtable = subtables[i];\n            const glyphs = this.expandCoverage(subtable.coverage);\n            const alternateSets = subtable.alternateSets;\n            for (let j = 0; j < glyphs.length; j++) {\n                alternates.push({ sub: glyphs[j], by: alternateSets[j] });\n            }\n        }\n    }\n    return alternates;\n};\n\n/**\n * List all ligatures (lookup type 4) for a given script, language, and feature.\n * The result is an array of ligature objects like { sub: [ids], by: id }\n * @param {string} feature - 4-letter feature name ('liga', 'rlig', 'dlig'...)\n * @param {string} [script='DFLT']\n * @param {string} [language='dflt']\n * @return {Array} ligatures - The list of ligatures.\n */\nSubstitution.prototype.getLigatures = function(feature, script, language) {\n    const ligatures = [];\n    const lookupTables = this.getLookupTables(script, language, feature, 4);\n    for (let idx = 0; idx < lookupTables.length; idx++) {\n        const subtables = lookupTables[idx].subtables;\n        for (let i = 0; i < subtables.length; i++) {\n            const subtable = subtables[i];\n            const glyphs = this.expandCoverage(subtable.coverage);\n            const ligatureSets = subtable.ligatureSets;\n            for (let j = 0; j < glyphs.length; j++) {\n                const startGlyph = glyphs[j];\n                const ligSet = ligatureSets[j];\n                for (let k = 0; k < ligSet.length; k++) {\n                    const lig = ligSet[k];\n                    ligatures.push({\n                        sub: [startGlyph].concat(lig.components),\n                        by: lig.ligGlyph\n                    });\n                }\n            }\n        }\n    }\n    return ligatures;\n};\n\n/**\n * Add or modify a single substitution (lookup type 1)\n * Format 2, more flexible, is always used.\n * @param {string} feature - 4-letter feature name ('liga', 'rlig', 'dlig'...)\n * @param {Object} substitution - { sub: id, by: id } (format 1 is not supported)\n * @param {string} [script='DFLT']\n * @param {string} [language='dflt']\n */\nSubstitution.prototype.addSingle = function(feature, substitution, script, language) {\n    const lookupTable = this.getLookupTables(script, language, feature, 1, true)[0];\n    const subtable = getSubstFormat(lookupTable, 2, {                // lookup type 1 subtable, format 2, coverage format 1\n        substFormat: 2,\n        coverage: {format: 1, glyphs: []},\n        substitute: []\n    });\n    check.assert(subtable.coverage.format === 1, 'Single: unable to modify coverage table format ' + subtable.coverage.format);\n    const coverageGlyph = substitution.sub;\n    let pos = this.binSearch(subtable.coverage.glyphs, coverageGlyph);\n    if (pos < 0) {\n        pos = -1 - pos;\n        subtable.coverage.glyphs.splice(pos, 0, coverageGlyph);\n        subtable.substitute.splice(pos, 0, 0);\n    }\n    subtable.substitute[pos] = substitution.by;\n};\n\n/**\n * Add or modify a multiple substitution (lookup type 2)\n * @param {string} feature - 4-letter feature name ('ccmp', 'stch')\n * @param {Object} substitution - { sub: id, by: [id] } for format 2.\n * @param {string} [script='DFLT']\n * @param {string} [language='dflt']\n */\nSubstitution.prototype.addMultiple = function(feature, substitution, script, language) {\n    check.assert(substitution.by instanceof Array && substitution.by.length > 1, 'Multiple: \"by\" must be an array of two or more ids');\n    const lookupTable = this.getLookupTables(script, language, feature, 2, true)[0];\n    const subtable = getSubstFormat(lookupTable, 1, {                // lookup type 2 subtable, format 1, coverage format 1\n        substFormat: 1,\n        coverage: {format: 1, glyphs: []},\n        sequences: []\n    });\n    check.assert(subtable.coverage.format === 1, 'Multiple: unable to modify coverage table format ' + subtable.coverage.format);\n    const coverageGlyph = substitution.sub;\n    let pos = this.binSearch(subtable.coverage.glyphs, coverageGlyph);\n    if (pos < 0) {\n        pos = -1 - pos;\n        subtable.coverage.glyphs.splice(pos, 0, coverageGlyph);\n        subtable.sequences.splice(pos, 0, 0);\n    }\n    subtable.sequences[pos] = substitution.by;\n};\n\n/**\n * Add or modify an alternate substitution (lookup type 3)\n * @param {string} feature - 4-letter feature name ('liga', 'rlig', 'dlig'...)\n * @param {Object} substitution - { sub: id, by: [ids] }\n * @param {string} [script='DFLT']\n * @param {string} [language='dflt']\n */\nSubstitution.prototype.addAlternate = function(feature, substitution, script, language) {\n    const lookupTable = this.getLookupTables(script, language, feature, 3, true)[0];\n    const subtable = getSubstFormat(lookupTable, 1, {                // lookup type 3 subtable, format 1, coverage format 1\n        substFormat: 1,\n        coverage: {format: 1, glyphs: []},\n        alternateSets: []\n    });\n    check.assert(subtable.coverage.format === 1, 'Alternate: unable to modify coverage table format ' + subtable.coverage.format);\n    const coverageGlyph = substitution.sub;\n    let pos = this.binSearch(subtable.coverage.glyphs, coverageGlyph);\n    if (pos < 0) {\n        pos = -1 - pos;\n        subtable.coverage.glyphs.splice(pos, 0, coverageGlyph);\n        subtable.alternateSets.splice(pos, 0, 0);\n    }\n    subtable.alternateSets[pos] = substitution.by;\n};\n\n/**\n * Add a ligature (lookup type 4)\n * Ligatures with more components must be stored ahead of those with fewer components in order to be found\n * @param {string} feature - 4-letter feature name ('liga', 'rlig', 'dlig'...)\n * @param {Object} ligature - { sub: [ids], by: id }\n * @param {string} [script='DFLT']\n * @param {string} [language='dflt']\n */\nSubstitution.prototype.addLigature = function(feature, ligature, script, language) {\n    const lookupTable = this.getLookupTables(script, language, feature, 4, true)[0];\n    let subtable = lookupTable.subtables[0];\n    if (!subtable) {\n        subtable = {                // lookup type 4 subtable, format 1, coverage format 1\n            substFormat: 1,\n            coverage: { format: 1, glyphs: [] },\n            ligatureSets: []\n        };\n        lookupTable.subtables[0] = subtable;\n    }\n    check.assert(subtable.coverage.format === 1, 'Ligature: unable to modify coverage table format ' + subtable.coverage.format);\n    const coverageGlyph = ligature.sub[0];\n    const ligComponents = ligature.sub.slice(1);\n    const ligatureTable = {\n        ligGlyph: ligature.by,\n        components: ligComponents\n    };\n    let pos = this.binSearch(subtable.coverage.glyphs, coverageGlyph);\n    if (pos >= 0) {\n        // ligatureSet already exists\n        const ligatureSet = subtable.ligatureSets[pos];\n        for (let i = 0; i < ligatureSet.length; i++) {\n            // If ligature already exists, return.\n            if (arraysEqual(ligatureSet[i].components, ligComponents)) {\n                return;\n            }\n        }\n        // ligature does not exist: add it.\n        ligatureSet.push(ligatureTable);\n    } else {\n        // Create a new ligatureSet and add coverage for the first glyph.\n        pos = -1 - pos;\n        subtable.coverage.glyphs.splice(pos, 0, coverageGlyph);\n        subtable.ligatureSets.splice(pos, 0, [ligatureTable]);\n    }\n};\n\n/**\n * List all feature data for a given script and language.\n * @param {string} feature - 4-letter feature name\n * @param {string} [script='DFLT']\n * @param {string} [language='dflt']\n * @return {Array} substitutions - The list of substitutions.\n */\nSubstitution.prototype.getFeature = function(feature, script, language) {\n    if (/ss\\d\\d/.test(feature)) {\n        // ss01 - ss20\n        return this.getSingle(feature, script, language);\n    }\n    switch (feature) {\n        case 'aalt':\n        case 'salt':\n            return this.getSingle(feature, script, language)\n                    .concat(this.getAlternates(feature, script, language));\n        case 'dlig':\n        case 'liga':\n        case 'rlig':\n            return this.getLigatures(feature, script, language);\n        case 'ccmp':\n            return this.getMultiple(feature, script, language)\n                .concat(this.getLigatures(feature, script, language));\n        case 'stch':\n            return this.getMultiple(feature, script, language);\n    }\n    return undefined;\n};\n\n/**\n * Add a substitution to a feature for a given script and language.\n * @param {string} feature - 4-letter feature name\n * @param {Object} sub - the substitution to add (an object like { sub: id or [ids], by: id or [ids] })\n * @param {string} [script='DFLT']\n * @param {string} [language='dflt']\n */\nSubstitution.prototype.add = function(feature, sub, script, language) {\n    if (/ss\\d\\d/.test(feature)) {\n        // ss01 - ss20\n        return this.addSingle(feature, sub, script, language);\n    }\n    switch (feature) {\n        case 'aalt':\n        case 'salt':\n            if (typeof sub.by === 'number') {\n                return this.addSingle(feature, sub, script, language);\n            }\n            return this.addAlternate(feature, sub, script, language);\n        case 'dlig':\n        case 'liga':\n        case 'rlig':\n            return this.addLigature(feature, sub, script, language);\n        case 'ccmp':\n            if (sub.by instanceof Array) {\n                return this.addMultiple(feature, sub, script, language);\n            }\n            return this.addLigature(feature, sub, script, language);\n    }\n    return undefined;\n};\n\nexport default Substitution;\n", "function isBrowser() {\n    return typeof window !== 'undefined';\n}\n\nfunction isNode() {\n    return typeof window === 'undefined';\n}\n\nfunction nodeBufferToArrayBuffer(buffer) {\n    const ab = new ArrayBuffer(buffer.length);\n    const view = new Uint8Array(ab);\n    for (let i = 0; i < buffer.length; ++i) {\n        view[i] = buffer[i];\n    }\n\n    return ab;\n}\n\nfunction arrayBufferToNodeBuffer(ab) {\n    const buffer = new Buffer(ab.byteLength);\n    const view = new Uint8Array(ab);\n    for (let i = 0; i < buffer.length; ++i) {\n        buffer[i] = view[i];\n    }\n\n    return buffer;\n}\n\nfunction checkArgument(expression, message) {\n    if (!expression) {\n        throw message;\n    }\n}\n\nexport { isBrowser, isNode, nodeBufferToArrayBuffer, arrayBufferToNodeBuffer, checkArgument };\n", "// The `glyf` table describes the glyphs in TrueType outline format.\n// http://www.microsoft.com/typography/otspec/glyf.htm\n\nimport check from '../check';\nimport glyphset from '../glyphset';\nimport parse from '../parse';\nimport Path from '../path';\n\n// Parse the coordinate data for a glyph.\nfunction parseGlyphCoordinate(p, flag, previousValue, shortVectorBitMask, sameBitMask) {\n    let v;\n    if ((flag & shortVectorBitMask) > 0) {\n        // The coordinate is 1 byte long.\n        v = p.parseByte();\n        // The `same` bit is re-used for short values to signify the sign of the value.\n        if ((flag & sameBitMask) === 0) {\n            v = -v;\n        }\n\n        v = previousValue + v;\n    } else {\n        //  The coordinate is 2 bytes long.\n        // If the `same` bit is set, the coordinate is the same as the previous coordinate.\n        if ((flag & sameBitMask) > 0) {\n            v = previousValue;\n        } else {\n            // Parse the coordinate as a signed 16-bit delta value.\n            v = previousValue + p.parseShort();\n        }\n    }\n\n    return v;\n}\n\n// Parse a TrueType glyph.\nfunction parseGlyph(glyph, data, start) {\n    const p = new parse.Parser(data, start);\n    glyph.numberOfContours = p.parseShort();\n    glyph._xMin = p.parseShort();\n    glyph._yMin = p.parseShort();\n    glyph._xMax = p.parseShort();\n    glyph._yMax = p.parseShort();\n    let flags;\n    let flag;\n\n    if (glyph.numberOfContours > 0) {\n        // This glyph is not a composite.\n        const endPointIndices = glyph.endPointIndices = [];\n        for (let i = 0; i < glyph.numberOfContours; i += 1) {\n            endPointIndices.push(p.parseUShort());\n        }\n\n        glyph.instructionLength = p.parseUShort();\n        glyph.instructions = [];\n        for (let i = 0; i < glyph.instructionLength; i += 1) {\n            glyph.instructions.push(p.parseByte());\n        }\n\n        const numberOfCoordinates = endPointIndices[endPointIndices.length - 1] + 1;\n        flags = [];\n        for (let i = 0; i < numberOfCoordinates; i += 1) {\n            flag = p.parseByte();\n            flags.push(flag);\n            // If bit 3 is set, we repeat this flag n times, where n is the next byte.\n            if ((flag & 8) > 0) {\n                const repeatCount = p.parseByte();\n                for (let j = 0; j < repeatCount; j += 1) {\n                    flags.push(flag);\n                    i += 1;\n                }\n            }\n        }\n\n        check.argument(flags.length === numberOfCoordinates, 'Bad flags.');\n\n        if (endPointIndices.length > 0) {\n            const points = [];\n            let point;\n            // X/Y coordinates are relative to the previous point, except for the first point which is relative to 0,0.\n            if (numberOfCoordinates > 0) {\n                for (let i = 0; i < numberOfCoordinates; i += 1) {\n                    flag = flags[i];\n                    point = {};\n                    point.onCurve = !!(flag & 1);\n                    point.lastPointOfContour = endPointIndices.indexOf(i) >= 0;\n                    points.push(point);\n                }\n\n                let px = 0;\n                for (let i = 0; i < numberOfCoordinates; i += 1) {\n                    flag = flags[i];\n                    point = points[i];\n                    point.x = parseGlyphCoordinate(p, flag, px, 2, 16);\n                    px = point.x;\n                }\n\n                let py = 0;\n                for (let i = 0; i < numberOfCoordinates; i += 1) {\n                    flag = flags[i];\n                    point = points[i];\n                    point.y = parseGlyphCoordinate(p, flag, py, 4, 32);\n                    py = point.y;\n                }\n            }\n\n            glyph.points = points;\n        } else {\n            glyph.points = [];\n        }\n    } else if (glyph.numberOfContours === 0) {\n        glyph.points = [];\n    } else {\n        glyph.isComposite = true;\n        glyph.points = [];\n        glyph.components = [];\n        let moreComponents = true;\n        while (moreComponents) {\n            flags = p.parseUShort();\n            const component = {\n                glyphIndex: p.parseUShort(),\n                xScale: 1,\n                scale01: 0,\n                scale10: 0,\n                yScale: 1,\n                dx: 0,\n                dy: 0\n            };\n            if ((flags & 1) > 0) {\n                // The arguments are words\n                if ((flags & 2) > 0) {\n                    // values are offset\n                    component.dx = p.parseShort();\n                    component.dy = p.parseShort();\n                } else {\n                    // values are matched points\n                    component.matchedPoints = [p.parseUShort(), p.parseUShort()];\n                }\n\n            } else {\n                // The arguments are bytes\n                if ((flags & 2) > 0) {\n                    // values are offset\n                    component.dx = p.parseChar();\n                    component.dy = p.parseChar();\n                } else {\n                    // values are matched points\n                    component.matchedPoints = [p.parseByte(), p.parseByte()];\n                }\n            }\n\n            if ((flags & 8) > 0) {\n                // We have a scale\n                component.xScale = component.yScale = p.parseF2Dot14();\n            } else if ((flags & 64) > 0) {\n                // We have an X / Y scale\n                component.xScale = p.parseF2Dot14();\n                component.yScale = p.parseF2Dot14();\n            } else if ((flags & 128) > 0) {\n                // We have a 2x2 transformation\n                component.xScale = p.parseF2Dot14();\n                component.scale01 = p.parseF2Dot14();\n                component.scale10 = p.parseF2Dot14();\n                component.yScale = p.parseF2Dot14();\n            }\n\n            glyph.components.push(component);\n            moreComponents = !!(flags & 32);\n        }\n        if (flags & 0x100) {\n            // We have instructions\n            glyph.instructionLength = p.parseUShort();\n            glyph.instructions = [];\n            for (let i = 0; i < glyph.instructionLength; i += 1) {\n                glyph.instructions.push(p.parseByte());\n            }\n        }\n    }\n}\n\n// Transform an array of points and return a new array.\nfunction transformPoints(points, transform) {\n    const newPoints = [];\n    for (let i = 0; i < points.length; i += 1) {\n        const pt = points[i];\n        const newPt = {\n            x: transform.xScale * pt.x + transform.scale01 * pt.y + transform.dx,\n            y: transform.scale10 * pt.x + transform.yScale * pt.y + transform.dy,\n            onCurve: pt.onCurve,\n            lastPointOfContour: pt.lastPointOfContour\n        };\n        newPoints.push(newPt);\n    }\n\n    return newPoints;\n}\n\nfunction getContours(points) {\n    const contours = [];\n    let currentContour = [];\n    for (let i = 0; i < points.length; i += 1) {\n        const pt = points[i];\n        currentContour.push(pt);\n        if (pt.lastPointOfContour) {\n            contours.push(currentContour);\n            currentContour = [];\n        }\n    }\n\n    check.argument(currentContour.length === 0, 'There are still points left in the current contour.');\n    return contours;\n}\n\n// Convert the TrueType glyph outline to a Path.\nfunction getPath(points) {\n    const p = new Path();\n    if (!points) {\n        return p;\n    }\n\n    const contours = getContours(points);\n\n    for (let contourIndex = 0; contourIndex < contours.length; ++contourIndex) {\n        const contour = contours[contourIndex];\n\n        let prev = null;\n        let curr = contour[contour.length - 1];\n        let next = contour[0];\n\n        if (curr.onCurve) {\n            p.moveTo(curr.x, curr.y);\n        } else {\n            if (next.onCurve) {\n                p.moveTo(next.x, next.y);\n            } else {\n                // If both first and last points are off-curve, start at their middle.\n                const start = {x: (curr.x + next.x) * 0.5, y: (curr.y + next.y) * 0.5};\n                p.moveTo(start.x, start.y);\n            }\n        }\n\n        for (let i = 0; i < contour.length; ++i) {\n            prev = curr;\n            curr = next;\n            next = contour[(i + 1) % contour.length];\n\n            if (curr.onCurve) {\n                // This is a straight line.\n                p.lineTo(curr.x, curr.y);\n            } else {\n                let prev2 = prev;\n                let next2 = next;\n\n                if (!prev.onCurve) {\n                    prev2 = { x: (curr.x + prev.x) * 0.5, y: (curr.y + prev.y) * 0.5 };\n                }\n\n                if (!next.onCurve) {\n                    next2 = { x: (curr.x + next.x) * 0.5, y: (curr.y + next.y) * 0.5 };\n                }\n\n                p.quadraticCurveTo(curr.x, curr.y, next2.x, next2.y);\n            }\n        }\n\n        p.closePath();\n    }\n    return p;\n}\n\nfunction buildPath(glyphs, glyph) {\n    if (glyph.isComposite) {\n        for (let j = 0; j < glyph.components.length; j += 1) {\n            const component = glyph.components[j];\n            const componentGlyph = glyphs.get(component.glyphIndex);\n            // Force the ttfGlyphLoader to parse the glyph.\n            componentGlyph.getPath();\n            if (componentGlyph.points) {\n                let transformedPoints;\n                if (component.matchedPoints === undefined) {\n                    // component positioned by offset\n                    transformedPoints = transformPoints(componentGlyph.points, component);\n                } else {\n                    // component positioned by matched points\n                    if ((component.matchedPoints[0] > glyph.points.length - 1) ||\n                        (component.matchedPoints[1] > componentGlyph.points.length - 1)) {\n                        throw Error('Matched points out of range in ' + glyph.name);\n                    }\n                    const firstPt = glyph.points[component.matchedPoints[0]];\n                    let secondPt = componentGlyph.points[component.matchedPoints[1]];\n                    const transform = {\n                        xScale: component.xScale, scale01: component.scale01,\n                        scale10: component.scale10, yScale: component.yScale,\n                        dx: 0, dy: 0\n                    };\n                    secondPt = transformPoints([secondPt], transform)[0];\n                    transform.dx = firstPt.x - secondPt.x;\n                    transform.dy = firstPt.y - secondPt.y;\n                    transformedPoints = transformPoints(componentGlyph.points, transform);\n                }\n                glyph.points = glyph.points.concat(transformedPoints);\n            }\n        }\n    }\n\n    return getPath(glyph.points);\n}\n\nfunction parseGlyfTableAll(data, start, loca, font) {\n    const glyphs = new glyphset.GlyphSet(font);\n\n    // The last element of the loca table is invalid.\n    for (let i = 0; i < loca.length - 1; i += 1) {\n        const offset = loca[i];\n        const nextOffset = loca[i + 1];\n        if (offset !== nextOffset) {\n            glyphs.push(i, glyphset.ttfGlyphLoader(font, i, parseGlyph, data, start + offset, buildPath));\n        } else {\n            glyphs.push(i, glyphset.glyphLoader(font, i));\n        }\n    }\n\n    return glyphs;\n}\n\nfunction parseGlyfTableOnLowMemory(data, start, loca, font) {\n    const glyphs = new glyphset.GlyphSet(font);\n\n    font._push = function(i) {\n        const offset = loca[i];\n        const nextOffset = loca[i + 1];\n        if (offset !== nextOffset) {\n            glyphs.push(i, glyphset.ttfGlyphLoader(font, i, parseGlyph, data, start + offset, buildPath));\n        } else {\n            glyphs.push(i, glyphset.glyphLoader(font, i));\n        }\n    };\n\n    return glyphs;\n}\n\n// Parse all the glyphs according to the offsets from the `loca` table.\nfunction parseGlyfTable(data, start, loca, font, opt) {\n    if (opt.lowMemory)\n        return parseGlyfTableOnLowMemory(data, start, loca, font);\n    else\n        return parseGlyfTableAll(data, start, loca, font);\n}\n\nexport default { getPath, parse: parseGlyfTable};\n", "/* A TrueType font hinting interpreter.\n*\n* (c) 2017 Axel Kittenberger\n*\n* This interpreter has been implemented according to this documentation:\n* https://developer.apple.com/fonts/TrueType-Reference-Manual/RM05/Chap5.html\n*\n* According to the documentation F24DOT6 values are used for pixels.\n* That means calculation is 1/64 pixel accurate and uses integer operations.\n* However, Javascript has floating point operations by default and only\n* those are available. One could make a case to simulate the 1/64 accuracy\n* exactly by truncating after every division operation\n* (for example with << 0) to get pixel exactly results as other TrueType\n* implementations. It may make sense since some fonts are pixel optimized\n* by hand using DELTAP instructions. The current implementation doesn't\n* and rather uses full floating point precision.\n*\n* xScale, yScale and rotation is currently ignored.\n*\n* A few non-trivial instructions are missing as I didn't encounter yet\n* a font that used them to test a possible implementation.\n*\n* Some fonts seem to use undocumented features regarding the twilight zone.\n* Only some of them are implemented as they were encountered.\n*\n* The exports.DEBUG statements are removed on the minified distribution file.\n*/\n'use strict';\n\nimport glyf from './tables/glyf';\n\nlet instructionTable;\nlet exec;\nlet execGlyph;\nlet execComponent;\n\n/*\n* Creates a hinting object.\n*\n* There ought to be exactly one\n* for each truetype font that is used for hinting.\n*/\nfunction Hinting(font) {\n    // the font this hinting object is for\n    this.font = font;\n\n    this.getCommands = function (hPoints) {\n        return glyf.getPath(hPoints).commands;\n    };\n\n    // cached states\n    this._fpgmState  =\n    this._prepState  =\n        undefined;\n\n    // errorState\n    // 0 ... all okay\n    // 1 ... had an error in a glyf,\n    //       continue working but stop spamming\n    //       the console\n    // 2 ... error at prep, stop hinting at this ppem\n    // 3 ... error at fpeg, stop hinting for this font at all\n    this._errorState = 0;\n}\n\n/*\n* Not rounding.\n*/\nfunction roundOff(v) {\n    return v;\n}\n\n/*\n* Rounding to grid.\n*/\nfunction roundToGrid(v) {\n    //Rounding in TT is supposed to \"symmetrical around zero\"\n    return Math.sign(v) * Math.round(Math.abs(v));\n}\n\n/*\n* Rounding to double grid.\n*/\nfunction roundToDoubleGrid(v) {\n    return Math.sign(v) * Math.round(Math.abs(v * 2)) / 2;\n}\n\n/*\n* Rounding to half grid.\n*/\nfunction roundToHalfGrid(v) {\n    return Math.sign(v) * (Math.round(Math.abs(v) + 0.5) - 0.5);\n}\n\n/*\n* Rounding to up to grid.\n*/\nfunction roundUpToGrid(v) {\n    return Math.sign(v) * Math.ceil(Math.abs(v));\n}\n\n/*\n* Rounding to down to grid.\n*/\nfunction roundDownToGrid(v) {\n    return Math.sign(v) * Math.floor(Math.abs(v));\n}\n\n/*\n* Super rounding.\n*/\nconst roundSuper = function (v) {\n    const period = this.srPeriod;\n    let phase = this.srPhase;\n    const threshold = this.srThreshold;\n    let sign = 1;\n\n    if (v < 0) {\n        v = -v;\n        sign = -1;\n    }\n\n    v += threshold - phase;\n\n    v = Math.trunc(v / period) * period;\n\n    v += phase;\n\n    // according to http://xgridfit.sourceforge.net/round.html\n    if (v < 0) return phase * sign;\n\n    return v * sign;\n};\n\n/*\n* Unit vector of x-axis.\n*/\nconst xUnitVector = {\n    x: 1,\n\n    y: 0,\n\n    axis: 'x',\n\n    // Gets the projected distance between two points.\n    // o1/o2 ... if true, respective original position is used.\n    distance: function (p1, p2, o1, o2) {\n        return (o1 ? p1.xo : p1.x) - (o2 ? p2.xo : p2.x);\n    },\n\n    // Moves point p so the moved position has the same relative\n    // position to the moved positions of rp1 and rp2 than the\n    // original positions had.\n    //\n    // See APPENDIX on INTERPOLATE at the bottom of this file.\n    interpolate: function (p, rp1, rp2, pv) {\n        let do1;\n        let do2;\n        let doa1;\n        let doa2;\n        let dm1;\n        let dm2;\n        let dt;\n\n        if (!pv || pv === this) {\n            do1 = p.xo - rp1.xo;\n            do2 = p.xo - rp2.xo;\n            dm1 = rp1.x - rp1.xo;\n            dm2 = rp2.x - rp2.xo;\n            doa1 = Math.abs(do1);\n            doa2 = Math.abs(do2);\n            dt = doa1 + doa2;\n\n            if (dt === 0) {\n                p.x = p.xo + (dm1 + dm2) / 2;\n                return;\n            }\n\n            p.x = p.xo + (dm1 * doa2 + dm2 * doa1) / dt;\n            return;\n        }\n\n        do1 = pv.distance(p, rp1, true, true);\n        do2 = pv.distance(p, rp2, true, true);\n        dm1 = pv.distance(rp1, rp1, false, true);\n        dm2 = pv.distance(rp2, rp2, false, true);\n        doa1 = Math.abs(do1);\n        doa2 = Math.abs(do2);\n        dt = doa1 + doa2;\n\n        if (dt === 0) {\n            xUnitVector.setRelative(p, p, (dm1 + dm2) / 2, pv, true);\n            return;\n        }\n\n        xUnitVector.setRelative(p, p, (dm1 * doa2 + dm2 * doa1) / dt, pv, true);\n    },\n\n    // Slope of line normal to this\n    normalSlope: Number.NEGATIVE_INFINITY,\n\n    // Sets the point 'p' relative to point 'rp'\n    // by the distance 'd'.\n    //\n    // See APPENDIX on SETRELATIVE at the bottom of this file.\n    //\n    // p   ... point to set\n    // rp  ... reference point\n    // d   ... distance on projection vector\n    // pv  ... projection vector (undefined = this)\n    // org ... if true, uses the original position of rp as reference.\n    setRelative: function (p, rp, d, pv, org) {\n        if (!pv || pv === this) {\n            p.x = (org ? rp.xo : rp.x) + d;\n            return;\n        }\n\n        const rpx = org ? rp.xo : rp.x;\n        const rpy = org ? rp.yo : rp.y;\n        const rpdx = rpx + d * pv.x;\n        const rpdy = rpy + d * pv.y;\n\n        p.x = rpdx + (p.y - rpdy) / pv.normalSlope;\n    },\n\n    // Slope of vector line.\n    slope: 0,\n\n    // Touches the point p.\n    touch: function (p) {\n        p.xTouched = true;\n    },\n\n    // Tests if a point p is touched.\n    touched: function (p) {\n        return p.xTouched;\n    },\n\n    // Untouches the point p.\n    untouch: function (p) {\n        p.xTouched = false;\n    }\n};\n\n/*\n* Unit vector of y-axis.\n*/\nconst yUnitVector = {\n    x: 0,\n\n    y: 1,\n\n    axis: 'y',\n\n    // Gets the projected distance between two points.\n    // o1/o2 ... if true, respective original position is used.\n    distance: function (p1, p2, o1, o2) {\n        return (o1 ? p1.yo : p1.y) - (o2 ? p2.yo : p2.y);\n    },\n\n    // Moves point p so the moved position has the same relative\n    // position to the moved positions of rp1 and rp2 than the\n    // original positions had.\n    //\n    // See APPENDIX on INTERPOLATE at the bottom of this file.\n    interpolate: function (p, rp1, rp2, pv) {\n        let do1;\n        let do2;\n        let doa1;\n        let doa2;\n        let dm1;\n        let dm2;\n        let dt;\n\n        if (!pv || pv === this) {\n            do1 = p.yo - rp1.yo;\n            do2 = p.yo - rp2.yo;\n            dm1 = rp1.y - rp1.yo;\n            dm2 = rp2.y - rp2.yo;\n            doa1 = Math.abs(do1);\n            doa2 = Math.abs(do2);\n            dt = doa1 + doa2;\n\n            if (dt === 0) {\n                p.y = p.yo + (dm1 + dm2) / 2;\n                return;\n            }\n\n            p.y = p.yo + (dm1 * doa2 + dm2 * doa1) / dt;\n            return;\n        }\n\n        do1 = pv.distance(p, rp1, true, true);\n        do2 = pv.distance(p, rp2, true, true);\n        dm1 = pv.distance(rp1, rp1, false, true);\n        dm2 = pv.distance(rp2, rp2, false, true);\n        doa1 = Math.abs(do1);\n        doa2 = Math.abs(do2);\n        dt = doa1 + doa2;\n\n        if (dt === 0) {\n            yUnitVector.setRelative(p, p, (dm1 + dm2) / 2, pv, true);\n            return;\n        }\n\n        yUnitVector.setRelative(p, p, (dm1 * doa2 + dm2 * doa1) / dt, pv, true);\n    },\n\n    // Slope of line normal to this.\n    normalSlope: 0,\n\n    // Sets the point 'p' relative to point 'rp'\n    // by the distance 'd'\n    //\n    // See APPENDIX on SETRELATIVE at the bottom of this file.\n    //\n    // p   ... point to set\n    // rp  ... reference point\n    // d   ... distance on projection vector\n    // pv  ... projection vector (undefined = this)\n    // org ... if true, uses the original position of rp as reference.\n    setRelative: function (p, rp, d, pv, org) {\n        if (!pv || pv === this) {\n            p.y = (org ? rp.yo : rp.y) + d;\n            return;\n        }\n\n        const rpx = org ? rp.xo : rp.x;\n        const rpy = org ? rp.yo : rp.y;\n        const rpdx = rpx + d * pv.x;\n        const rpdy = rpy + d * pv.y;\n\n        p.y = rpdy + pv.normalSlope * (p.x - rpdx);\n    },\n\n    // Slope of vector line.\n    slope: Number.POSITIVE_INFINITY,\n\n    // Touches the point p.\n    touch: function (p) {\n        p.yTouched = true;\n    },\n\n    // Tests if a point p is touched.\n    touched: function (p) {\n        return p.yTouched;\n    },\n\n    // Untouches the point p.\n    untouch: function (p) {\n        p.yTouched = false;\n    }\n};\n\nObject.freeze(xUnitVector);\nObject.freeze(yUnitVector);\n\n/*\n* Creates a unit vector that is not x- or y-axis.\n*/\nfunction UnitVector(x, y) {\n    this.x = x;\n    this.y = y;\n    this.axis = undefined;\n    this.slope = y / x;\n    this.normalSlope = -x / y;\n    Object.freeze(this);\n}\n\n/*\n* Gets the projected distance between two points.\n* o1/o2 ... if true, respective original position is used.\n*/\nUnitVector.prototype.distance = function(p1, p2, o1, o2) {\n    return (\n        this.x * xUnitVector.distance(p1, p2, o1, o2) +\n        this.y * yUnitVector.distance(p1, p2, o1, o2)\n    );\n};\n\n/*\n* Moves point p so the moved position has the same relative\n* position to the moved positions of rp1 and rp2 than the\n* original positions had.\n*\n* See APPENDIX on INTERPOLATE at the bottom of this file.\n*/\nUnitVector.prototype.interpolate = function(p, rp1, rp2, pv) {\n    let dm1;\n    let dm2;\n    let do1;\n    let do2;\n    let doa1;\n    let doa2;\n    let dt;\n\n    do1 = pv.distance(p, rp1, true, true);\n    do2 = pv.distance(p, rp2, true, true);\n    dm1 = pv.distance(rp1, rp1, false, true);\n    dm2 = pv.distance(rp2, rp2, false, true);\n    doa1 = Math.abs(do1);\n    doa2 = Math.abs(do2);\n    dt = doa1 + doa2;\n\n    if (dt === 0) {\n        this.setRelative(p, p, (dm1 + dm2) / 2, pv, true);\n        return;\n    }\n\n    this.setRelative(p, p, (dm1 * doa2 + dm2 * doa1) / dt, pv, true);\n};\n\n/*\n* Sets the point 'p' relative to point 'rp'\n* by the distance 'd'\n*\n* See APPENDIX on SETRELATIVE at the bottom of this file.\n*\n* p   ...  point to set\n* rp  ... reference point\n* d   ... distance on projection vector\n* pv  ... projection vector (undefined = this)\n* org ... if true, uses the original position of rp as reference.\n*/\nUnitVector.prototype.setRelative = function(p, rp, d, pv, org) {\n    pv = pv || this;\n\n    const rpx = org ? rp.xo : rp.x;\n    const rpy = org ? rp.yo : rp.y;\n    const rpdx = rpx + d * pv.x;\n    const rpdy = rpy + d * pv.y;\n\n    const pvns = pv.normalSlope;\n    const fvs = this.slope;\n\n    const px = p.x;\n    const py = p.y;\n\n    p.x = (fvs * px - pvns * rpdx + rpdy - py) / (fvs - pvns);\n    p.y = fvs * (p.x - px) + py;\n};\n\n/*\n* Touches the point p.\n*/\nUnitVector.prototype.touch = function(p) {\n    p.xTouched = true;\n    p.yTouched = true;\n};\n\n/*\n* Returns a unit vector with x/y coordinates.\n*/\nfunction getUnitVector(x, y) {\n    const d = Math.sqrt(x * x + y * y);\n\n    x /= d;\n    y /= d;\n\n    if (x === 1 && y === 0) return xUnitVector;\n    else if (x === 0 && y === 1) return yUnitVector;\n    else return new UnitVector(x, y);\n}\n\n/*\n* Creates a point in the hinting engine.\n*/\nfunction HPoint(\n    x,\n    y,\n    lastPointOfContour,\n    onCurve\n) {\n    this.x = this.xo = Math.round(x * 64) / 64; // hinted x value and original x-value\n    this.y = this.yo = Math.round(y * 64) / 64; // hinted y value and original y-value\n\n    this.lastPointOfContour = lastPointOfContour;\n    this.onCurve = onCurve;\n    this.prevPointOnContour = undefined;\n    this.nextPointOnContour = undefined;\n    this.xTouched = false;\n    this.yTouched = false;\n\n    Object.preventExtensions(this);\n}\n\n/*\n* Returns the next touched point on the contour.\n*\n* v  ... unit vector to test touch axis.\n*/\nHPoint.prototype.nextTouched = function(v) {\n    let p = this.nextPointOnContour;\n\n    while (!v.touched(p) && p !== this) p = p.nextPointOnContour;\n\n    return p;\n};\n\n/*\n* Returns the previous touched point on the contour\n*\n* v  ... unit vector to test touch axis.\n*/\nHPoint.prototype.prevTouched = function(v) {\n    let p = this.prevPointOnContour;\n\n    while (!v.touched(p) && p !== this) p = p.prevPointOnContour;\n\n    return p;\n};\n\n/*\n* The zero point.\n*/\nconst HPZero = Object.freeze(new HPoint(0, 0));\n\n/*\n* The default state of the interpreter.\n*\n* Note: Freezing the defaultState and then deriving from it\n* makes the V8 Javascript engine going awkward,\n* so this is avoided, albeit the defaultState shouldn't\n* ever change.\n*/\nconst defaultState = {\n    cvCutIn: 17 / 16,    // control value cut in\n    deltaBase: 9,\n    deltaShift: 0.125,\n    loop: 1,             // loops some instructions\n    minDis: 1,           // minimum distance\n    autoFlip: true\n};\n\n/*\n* The current state of the interpreter.\n*\n* env  ... 'fpgm' or 'prep' or 'glyf'\n* prog ... the program\n*/\nfunction State(env, prog) {\n    this.env = env;\n    this.stack = [];\n    this.prog = prog;\n\n    switch (env) {\n        case 'glyf' :\n            this.zp0 = this.zp1 = this.zp2 = 1;\n            this.rp0 = this.rp1 = this.rp2 = 0;\n            /* fall through */\n        case 'prep' :\n            this.fv = this.pv = this.dpv = xUnitVector;\n            this.round = roundToGrid;\n    }\n}\n\n/*\n* Executes a glyph program.\n*\n* This does the hinting for each glyph.\n*\n* Returns an array of moved points.\n*\n* glyph: the glyph to hint\n* ppem: the size the glyph is rendered for\n*/\nHinting.prototype.exec = function(glyph, ppem) {\n    if (typeof ppem !== 'number') {\n        throw new Error('Point size is not a number!');\n    }\n\n    // Received a fatal error, don't do any hinting anymore.\n    if (this._errorState > 2) return;\n\n    const font = this.font;\n    let prepState = this._prepState;\n\n    if (!prepState || prepState.ppem !== ppem) {\n        let fpgmState = this._fpgmState;\n\n        if (!fpgmState) {\n            // Executes the fpgm state.\n            // This is used by fonts to define functions.\n            State.prototype = defaultState;\n\n            fpgmState =\n            this._fpgmState =\n                new State('fpgm', font.tables.fpgm);\n\n            fpgmState.funcs = [ ];\n            fpgmState.font = font;\n\n            if (exports.DEBUG) {\n                console.log('---EXEC FPGM---');\n                fpgmState.step = -1;\n            }\n\n            try {\n                exec(fpgmState);\n            } catch (e) {\n                console.log('Hinting error in FPGM:' + e);\n                this._errorState = 3;\n                return;\n            }\n        }\n\n        // Executes the prep program for this ppem setting.\n        // This is used by fonts to set cvt values\n        // depending on to be rendered font size.\n\n        State.prototype = fpgmState;\n        prepState =\n        this._prepState =\n            new State('prep', font.tables.prep);\n\n        prepState.ppem = ppem;\n\n        // Creates a copy of the cvt table\n        // and scales it to the current ppem setting.\n        const oCvt = font.tables.cvt;\n        if (oCvt) {\n            const cvt = prepState.cvt = new Array(oCvt.length);\n            const scale = ppem / font.unitsPerEm;\n            for (let c = 0; c < oCvt.length; c++) {\n                cvt[c] = oCvt[c] * scale;\n            }\n        } else {\n            prepState.cvt = [];\n        }\n\n        if (exports.DEBUG) {\n            console.log('---EXEC PREP---');\n            prepState.step = -1;\n        }\n\n        try {\n            exec(prepState);\n        } catch (e) {\n            if (this._errorState < 2) {\n                console.log('Hinting error in PREP:' + e);\n            }\n            this._errorState = 2;\n        }\n    }\n\n    if (this._errorState > 1) return;\n\n    try {\n        return execGlyph(glyph, prepState);\n    } catch (e) {\n        if (this._errorState < 1) {\n            console.log('Hinting error:' + e);\n            console.log('Note: further hinting errors are silenced');\n        }\n        this._errorState = 1;\n        return undefined;\n    }\n};\n\n/*\n* Executes the hinting program for a glyph.\n*/\nexecGlyph = function(glyph, prepState) {\n    // original point positions\n    const xScale = prepState.ppem / prepState.font.unitsPerEm;\n    const yScale = xScale;\n    let components = glyph.components;\n    let contours;\n    let gZone;\n    let state;\n\n    State.prototype = prepState;\n    if (!components) {\n        state = new State('glyf', glyph.instructions);\n        if (exports.DEBUG) {\n            console.log('---EXEC GLYPH---');\n            state.step = -1;\n        }\n        execComponent(glyph, state, xScale, yScale);\n        gZone = state.gZone;\n    } else {\n        const font = prepState.font;\n        gZone = [];\n        contours = [];\n        for (let i = 0; i < components.length; i++) {\n            const c = components[i];\n            const cg = font.glyphs.get(c.glyphIndex);\n\n            state = new State('glyf', cg.instructions);\n\n            if (exports.DEBUG) {\n                console.log('---EXEC COMP ' + i + '---');\n                state.step = -1;\n            }\n\n            execComponent(cg, state, xScale, yScale);\n            // appends the computed points to the result array\n            // post processes the component points\n            const dx = Math.round(c.dx * xScale);\n            const dy = Math.round(c.dy * yScale);\n            const gz = state.gZone;\n            const cc = state.contours;\n            for (let pi = 0; pi < gz.length; pi++) {\n                const p = gz[pi];\n                p.xTouched = p.yTouched = false;\n                p.xo = p.x = p.x + dx;\n                p.yo = p.y = p.y + dy;\n            }\n\n            const gLen = gZone.length;\n            gZone.push.apply(gZone, gz);\n            for (let j = 0; j < cc.length; j++) {\n                contours.push(cc[j] + gLen);\n            }\n        }\n\n        if (glyph.instructions && !state.inhibitGridFit) {\n            // the composite has instructions on its own\n            state = new State('glyf', glyph.instructions);\n\n            state.gZone = state.z0 = state.z1 = state.z2 = gZone;\n\n            state.contours = contours;\n\n            // note: HPZero cannot be used here, since\n            //       the point might be modified\n            gZone.push(\n                new HPoint(0, 0),\n                new HPoint(Math.round(glyph.advanceWidth * xScale), 0)\n            );\n\n            if (exports.DEBUG) {\n                console.log('---EXEC COMPOSITE---');\n                state.step = -1;\n            }\n\n            exec(state);\n\n            gZone.length -= 2;\n        }\n    }\n\n    return gZone;\n};\n\n/*\n* Executes the hinting program for a component of a multi-component glyph\n* or of the glyph itself for a non-component glyph.\n*/\nexecComponent = function(glyph, state, xScale, yScale)\n{\n    const points = glyph.points || [];\n    const pLen = points.length;\n    const gZone = state.gZone = state.z0 = state.z1 = state.z2 = [];\n    const contours = state.contours = [];\n\n    // Scales the original points and\n    // makes copies for the hinted points.\n    let cp; // current point\n    for (let i = 0; i < pLen; i++) {\n        cp = points[i];\n\n        gZone[i] = new HPoint(\n            cp.x * xScale,\n            cp.y * yScale,\n            cp.lastPointOfContour,\n            cp.onCurve\n        );\n    }\n\n    // Chain links the contours.\n    let sp; // start point\n    let np; // next point\n\n    for (let i = 0; i < pLen; i++) {\n        cp = gZone[i];\n\n        if (!sp) {\n            sp = cp;\n            contours.push(i);\n        }\n\n        if (cp.lastPointOfContour) {\n            cp.nextPointOnContour = sp;\n            sp.prevPointOnContour = cp;\n            sp = undefined;\n        } else {\n            np = gZone[i + 1];\n            cp.nextPointOnContour = np;\n            np.prevPointOnContour = cp;\n        }\n    }\n\n    if (state.inhibitGridFit) return;\n\n    if (exports.DEBUG) {\n        console.log('PROCESSING GLYPH', state.stack);\n        for (let i = 0; i < pLen; i++) {\n            console.log(i, gZone[i].x, gZone[i].y);\n        }\n    }\n\n    gZone.push(\n        new HPoint(0, 0),\n        new HPoint(Math.round(glyph.advanceWidth * xScale), 0)\n    );\n\n    exec(state);\n\n    // Removes the extra points.\n    gZone.length -= 2;\n\n    if (exports.DEBUG) {\n        console.log('FINISHED GLYPH', state.stack);\n        for (let i = 0; i < pLen; i++) {\n            console.log(i, gZone[i].x, gZone[i].y);\n        }\n    }\n};\n\n/*\n* Executes the program loaded in state.\n*/\nexec = function(state) {\n    let prog = state.prog;\n\n    if (!prog) return;\n\n    const pLen = prog.length;\n    let ins;\n\n    for (state.ip = 0; state.ip < pLen; state.ip++) {\n        if (exports.DEBUG) state.step++;\n        ins = instructionTable[prog[state.ip]];\n\n        if (!ins) {\n            throw new Error(\n                'unknown instruction: 0x' +\n                Number(prog[state.ip]).toString(16)\n            );\n        }\n\n        ins(state);\n\n        // very extensive debugging for each step\n        /*\n        if (exports.DEBUG) {\n            var da;\n            if (state.gZone) {\n                da = [];\n                for (let i = 0; i < state.gZone.length; i++)\n                {\n                    da.push(i + ' ' +\n                        state.gZone[i].x * 64 + ' ' +\n                        state.gZone[i].y * 64 + ' ' +\n                        (state.gZone[i].xTouched ? 'x' : '') +\n                        (state.gZone[i].yTouched ? 'y' : '')\n                    );\n                }\n                console.log('GZ', da);\n            }\n\n            if (state.tZone) {\n                da = [];\n                for (let i = 0; i < state.tZone.length; i++) {\n                    da.push(i + ' ' +\n                        state.tZone[i].x * 64 + ' ' +\n                        state.tZone[i].y * 64 + ' ' +\n                        (state.tZone[i].xTouched ? 'x' : '') +\n                        (state.tZone[i].yTouched ? 'y' : '')\n                    );\n                }\n                console.log('TZ', da);\n            }\n\n            if (state.stack.length > 10) {\n                console.log(\n                    state.stack.length,\n                    '...', state.stack.slice(state.stack.length - 10)\n                );\n            } else {\n                console.log(state.stack.length, state.stack);\n            }\n        }\n        */\n    }\n};\n\n/*\n* Initializes the twilight zone.\n*\n* This is only done if a SZPx instruction\n* refers to the twilight zone.\n*/\nfunction initTZone(state)\n{\n    const tZone = state.tZone = new Array(state.gZone.length);\n\n    // no idea if this is actually correct...\n    for (let i = 0; i < tZone.length; i++)\n    {\n        tZone[i] = new HPoint(0, 0);\n    }\n}\n\n/*\n* Skips the instruction pointer ahead over an IF/ELSE block.\n* handleElse .. if true breaks on matching ELSE\n*/\nfunction skip(state, handleElse)\n{\n    const prog = state.prog;\n    let ip = state.ip;\n    let nesting = 1;\n    let ins;\n\n    do {\n        ins = prog[++ip];\n        if (ins === 0x58) // IF\n            nesting++;\n        else if (ins === 0x59) // EIF\n            nesting--;\n        else if (ins === 0x40) // NPUSHB\n            ip += prog[ip + 1] + 1;\n        else if (ins === 0x41) // NPUSHW\n            ip += 2 * prog[ip + 1] + 1;\n        else if (ins >= 0xB0 && ins <= 0xB7) // PUSHB\n            ip += ins - 0xB0 + 1;\n        else if (ins >= 0xB8 && ins <= 0xBF) // PUSHW\n            ip += (ins - 0xB8 + 1) * 2;\n        else if (handleElse && nesting === 1 && ins === 0x1B) // ELSE\n            break;\n    } while (nesting > 0);\n\n    state.ip = ip;\n}\n\n/*----------------------------------------------------------*\n*          And then a lot of instructions...                *\n*----------------------------------------------------------*/\n\n// SVTCA[a] Set freedom and projection Vectors To Coordinate Axis\n// 0x00-0x01\nfunction SVTCA(v, state) {\n    if (exports.DEBUG) console.log(state.step, 'SVTCA[' + v.axis + ']');\n\n    state.fv = state.pv = state.dpv = v;\n}\n\n// SPVTCA[a] Set Projection Vector to Coordinate Axis\n// 0x02-0x03\nfunction SPVTCA(v, state) {\n    if (exports.DEBUG) console.log(state.step, 'SPVTCA[' + v.axis + ']');\n\n    state.pv = state.dpv = v;\n}\n\n// SFVTCA[a] Set Freedom Vector to Coordinate Axis\n// 0x04-0x05\nfunction SFVTCA(v, state) {\n    if (exports.DEBUG) console.log(state.step, 'SFVTCA[' + v.axis + ']');\n\n    state.fv = v;\n}\n\n// SPVTL[a] Set Projection Vector To Line\n// 0x06-0x07\nfunction SPVTL(a, state) {\n    const stack = state.stack;\n    const p2i = stack.pop();\n    const p1i = stack.pop();\n    const p2 = state.z2[p2i];\n    const p1 = state.z1[p1i];\n\n    if (exports.DEBUG) console.log('SPVTL[' + a + ']', p2i, p1i);\n\n    let dx;\n    let dy;\n\n    if (!a) {\n        dx = p1.x - p2.x;\n        dy = p1.y - p2.y;\n    } else {\n        dx = p2.y - p1.y;\n        dy = p1.x - p2.x;\n    }\n\n    state.pv = state.dpv = getUnitVector(dx, dy);\n}\n\n// SFVTL[a] Set Freedom Vector To Line\n// 0x08-0x09\nfunction SFVTL(a, state) {\n    const stack = state.stack;\n    const p2i = stack.pop();\n    const p1i = stack.pop();\n    const p2 = state.z2[p2i];\n    const p1 = state.z1[p1i];\n\n    if (exports.DEBUG) console.log('SFVTL[' + a + ']', p2i, p1i);\n\n    let dx;\n    let dy;\n\n    if (!a) {\n        dx = p1.x - p2.x;\n        dy = p1.y - p2.y;\n    } else {\n        dx = p2.y - p1.y;\n        dy = p1.x - p2.x;\n    }\n\n    state.fv = getUnitVector(dx, dy);\n}\n\n// SPVFS[] Set Projection Vector From Stack\n// 0x0A\nfunction SPVFS(state) {\n    const stack = state.stack;\n    const y = stack.pop();\n    const x = stack.pop();\n\n    if (exports.DEBUG) console.log(state.step, 'SPVFS[]', y, x);\n\n    state.pv = state.dpv = getUnitVector(x, y);\n}\n\n// SFVFS[] Set Freedom Vector From Stack\n// 0x0B\nfunction SFVFS(state) {\n    const stack = state.stack;\n    const y = stack.pop();\n    const x = stack.pop();\n\n    if (exports.DEBUG) console.log(state.step, 'SPVFS[]', y, x);\n\n    state.fv = getUnitVector(x, y);\n}\n\n// GPV[] Get Projection Vector\n// 0x0C\nfunction GPV(state) {\n    const stack = state.stack;\n    const pv = state.pv;\n\n    if (exports.DEBUG) console.log(state.step, 'GPV[]');\n\n    stack.push(pv.x * 0x4000);\n    stack.push(pv.y * 0x4000);\n}\n\n// GFV[] Get Freedom Vector\n// 0x0C\nfunction GFV(state) {\n    const stack = state.stack;\n    const fv = state.fv;\n\n    if (exports.DEBUG) console.log(state.step, 'GFV[]');\n\n    stack.push(fv.x * 0x4000);\n    stack.push(fv.y * 0x4000);\n}\n\n// SFVTPV[] Set Freedom Vector To Projection Vector\n// 0x0E\nfunction SFVTPV(state) {\n    state.fv = state.pv;\n\n    if (exports.DEBUG) console.log(state.step, 'SFVTPV[]');\n}\n\n// ISECT[] moves point p to the InterSECTion of two lines\n// 0x0F\nfunction ISECT(state)\n{\n    const stack = state.stack;\n    const pa0i = stack.pop();\n    const pa1i = stack.pop();\n    const pb0i = stack.pop();\n    const pb1i = stack.pop();\n    const pi = stack.pop();\n    const z0 = state.z0;\n    const z1 = state.z1;\n    const pa0 = z0[pa0i];\n    const pa1 = z0[pa1i];\n    const pb0 = z1[pb0i];\n    const pb1 = z1[pb1i];\n    const p = state.z2[pi];\n\n    if (exports.DEBUG) console.log('ISECT[], ', pa0i, pa1i, pb0i, pb1i, pi);\n\n    // math from\n    // en.wikipedia.org/wiki/Line%E2%80%93line_intersection#Given_two_points_on_each_line\n\n    const x1 = pa0.x;\n    const y1 = pa0.y;\n    const x2 = pa1.x;\n    const y2 = pa1.y;\n    const x3 = pb0.x;\n    const y3 = pb0.y;\n    const x4 = pb1.x;\n    const y4 = pb1.y;\n\n    const div = (x1 - x2) * (y3 - y4) - (y1 - y2) * (x3 - x4);\n    const f1 = x1 * y2 - y1 * x2;\n    const f2 = x3 * y4 - y3 * x4;\n\n    p.x = (f1 * (x3 - x4) - f2 * (x1 - x2)) / div;\n    p.y = (f1 * (y3 - y4) - f2 * (y1 - y2)) / div;\n}\n\n// SRP0[] Set Reference Point 0\n// 0x10\nfunction SRP0(state) {\n    state.rp0 = state.stack.pop();\n\n    if (exports.DEBUG) console.log(state.step, 'SRP0[]', state.rp0);\n}\n\n// SRP1[] Set Reference Point 1\n// 0x11\nfunction SRP1(state) {\n    state.rp1 = state.stack.pop();\n\n    if (exports.DEBUG) console.log(state.step, 'SRP1[]', state.rp1);\n}\n\n// SRP1[] Set Reference Point 2\n// 0x12\nfunction SRP2(state) {\n    state.rp2 = state.stack.pop();\n\n    if (exports.DEBUG) console.log(state.step, 'SRP2[]', state.rp2);\n}\n\n// SZP0[] Set Zone Pointer 0\n// 0x13\nfunction SZP0(state) {\n    const n = state.stack.pop();\n\n    if (exports.DEBUG) console.log(state.step, 'SZP0[]', n);\n\n    state.zp0 = n;\n\n    switch (n) {\n        case 0:\n            if (!state.tZone) initTZone(state);\n            state.z0 = state.tZone;\n            break;\n        case 1 :\n            state.z0 = state.gZone;\n            break;\n        default :\n            throw new Error('Invalid zone pointer');\n    }\n}\n\n// SZP1[] Set Zone Pointer 1\n// 0x14\nfunction SZP1(state) {\n    const n = state.stack.pop();\n\n    if (exports.DEBUG) console.log(state.step, 'SZP1[]', n);\n\n    state.zp1 = n;\n\n    switch (n) {\n        case 0:\n            if (!state.tZone) initTZone(state);\n            state.z1 = state.tZone;\n            break;\n        case 1 :\n            state.z1 = state.gZone;\n            break;\n        default :\n            throw new Error('Invalid zone pointer');\n    }\n}\n\n// SZP2[] Set Zone Pointer 2\n// 0x15\nfunction SZP2(state) {\n    const n = state.stack.pop();\n\n    if (exports.DEBUG) console.log(state.step, 'SZP2[]', n);\n\n    state.zp2 = n;\n\n    switch (n) {\n        case 0:\n            if (!state.tZone) initTZone(state);\n            state.z2 = state.tZone;\n            break;\n        case 1 :\n            state.z2 = state.gZone;\n            break;\n        default :\n            throw new Error('Invalid zone pointer');\n    }\n}\n\n// SZPS[] Set Zone PointerS\n// 0x16\nfunction SZPS(state) {\n    const n = state.stack.pop();\n\n    if (exports.DEBUG) console.log(state.step, 'SZPS[]', n);\n\n    state.zp0 = state.zp1 = state.zp2 = n;\n\n    switch (n) {\n        case 0:\n            if (!state.tZone) initTZone(state);\n            state.z0 = state.z1 = state.z2 = state.tZone;\n            break;\n        case 1 :\n            state.z0 = state.z1 = state.z2 = state.gZone;\n            break;\n        default :\n            throw new Error('Invalid zone pointer');\n    }\n}\n\n// SLOOP[] Set LOOP variable\n// 0x17\nfunction SLOOP(state) {\n    state.loop = state.stack.pop();\n\n    if (exports.DEBUG) console.log(state.step, 'SLOOP[]', state.loop);\n}\n\n// RTG[] Round To Grid\n// 0x18\nfunction RTG(state) {\n    if (exports.DEBUG) console.log(state.step, 'RTG[]');\n\n    state.round = roundToGrid;\n}\n\n// RTHG[] Round To Half Grid\n// 0x19\nfunction RTHG(state) {\n    if (exports.DEBUG) console.log(state.step, 'RTHG[]');\n\n    state.round = roundToHalfGrid;\n}\n\n// SMD[] Set Minimum Distance\n// 0x1A\nfunction SMD(state) {\n    const d = state.stack.pop();\n\n    if (exports.DEBUG) console.log(state.step, 'SMD[]', d);\n\n    state.minDis = d / 0x40;\n}\n\n// ELSE[] ELSE clause\n// 0x1B\nfunction ELSE(state) {\n    // This instruction has been reached by executing a then branch\n    // so it just skips ahead until matching EIF.\n    //\n    // In case the IF was negative the IF[] instruction already\n    // skipped forward over the ELSE[]\n\n    if (exports.DEBUG) console.log(state.step, 'ELSE[]');\n\n    skip(state, false);\n}\n\n// JMPR[] JuMP Relative\n// 0x1C\nfunction JMPR(state) {\n    const o = state.stack.pop();\n\n    if (exports.DEBUG) console.log(state.step, 'JMPR[]', o);\n\n    // A jump by 1 would do nothing.\n    state.ip += o - 1;\n}\n\n// SCVTCI[] Set Control Value Table Cut-In\n// 0x1D\nfunction SCVTCI(state) {\n    const n = state.stack.pop();\n\n    if (exports.DEBUG) console.log(state.step, 'SCVTCI[]', n);\n\n    state.cvCutIn = n / 0x40;\n}\n\n// DUP[] DUPlicate top stack element\n// 0x20\nfunction DUP(state) {\n    const stack = state.stack;\n\n    if (exports.DEBUG) console.log(state.step, 'DUP[]');\n\n    stack.push(stack[stack.length - 1]);\n}\n\n// POP[] POP top stack element\n// 0x21\nfunction POP(state) {\n    if (exports.DEBUG) console.log(state.step, 'POP[]');\n\n    state.stack.pop();\n}\n\n// CLEAR[] CLEAR the stack\n// 0x22\nfunction CLEAR(state) {\n    if (exports.DEBUG) console.log(state.step, 'CLEAR[]');\n\n    state.stack.length = 0;\n}\n\n// SWAP[] SWAP the top two elements on the stack\n// 0x23\nfunction SWAP(state) {\n    const stack = state.stack;\n\n    const a = stack.pop();\n    const b = stack.pop();\n\n    if (exports.DEBUG) console.log(state.step, 'SWAP[]');\n\n    stack.push(a);\n    stack.push(b);\n}\n\n// DEPTH[] DEPTH of the stack\n// 0x24\nfunction DEPTH(state) {\n    const stack = state.stack;\n\n    if (exports.DEBUG) console.log(state.step, 'DEPTH[]');\n\n    stack.push(stack.length);\n}\n\n// LOOPCALL[] LOOPCALL function\n// 0x2A\nfunction LOOPCALL(state) {\n    const stack = state.stack;\n    const fn = stack.pop();\n    const c = stack.pop();\n\n    if (exports.DEBUG) console.log(state.step, 'LOOPCALL[]', fn, c);\n\n    // saves callers program\n    const cip = state.ip;\n    const cprog = state.prog;\n\n    state.prog = state.funcs[fn];\n\n    // executes the function\n    for (let i = 0; i < c; i++) {\n        exec(state);\n\n        if (exports.DEBUG) console.log(\n            ++state.step,\n            i + 1 < c ? 'next loopcall' : 'done loopcall',\n            i\n        );\n    }\n\n    // restores the callers program\n    state.ip = cip;\n    state.prog = cprog;\n}\n\n// CALL[] CALL function\n// 0x2B\nfunction CALL(state) {\n    const fn = state.stack.pop();\n\n    if (exports.DEBUG) console.log(state.step, 'CALL[]', fn);\n\n    // saves callers program\n    const cip = state.ip;\n    const cprog = state.prog;\n\n    state.prog = state.funcs[fn];\n\n    // executes the function\n    exec(state);\n\n    // restores the callers program\n    state.ip = cip;\n    state.prog = cprog;\n\n    if (exports.DEBUG) console.log(++state.step, 'returning from', fn);\n}\n\n// CINDEX[] Copy the INDEXed element to the top of the stack\n// 0x25\nfunction CINDEX(state) {\n    const stack = state.stack;\n    const k = stack.pop();\n\n    if (exports.DEBUG) console.log(state.step, 'CINDEX[]', k);\n\n    // In case of k == 1, it copies the last element after popping\n    // thus stack.length - k.\n    stack.push(stack[stack.length - k]);\n}\n\n// MINDEX[] Move the INDEXed element to the top of the stack\n// 0x26\nfunction MINDEX(state) {\n    const stack = state.stack;\n    const k = stack.pop();\n\n    if (exports.DEBUG) console.log(state.step, 'MINDEX[]', k);\n\n    stack.push(stack.splice(stack.length - k, 1)[0]);\n}\n\n// FDEF[] Function DEFinition\n// 0x2C\nfunction FDEF(state) {\n    if (state.env !== 'fpgm') throw new Error('FDEF not allowed here');\n    const stack = state.stack;\n    const prog = state.prog;\n    let ip = state.ip;\n\n    const fn = stack.pop();\n    const ipBegin = ip;\n\n    if (exports.DEBUG) console.log(state.step, 'FDEF[]', fn);\n\n    while (prog[++ip] !== 0x2D);\n\n    state.ip = ip;\n    state.funcs[fn] = prog.slice(ipBegin + 1, ip);\n}\n\n// MDAP[a] Move Direct Absolute Point\n// 0x2E-0x2F\nfunction MDAP(round, state) {\n    const pi = state.stack.pop();\n    const p = state.z0[pi];\n    const fv = state.fv;\n    const pv = state.pv;\n\n    if (exports.DEBUG) console.log(state.step, 'MDAP[' + round + ']', pi);\n\n    let d = pv.distance(p, HPZero);\n\n    if (round) d = state.round(d);\n\n    fv.setRelative(p, HPZero, d, pv);\n    fv.touch(p);\n\n    state.rp0 = state.rp1 = pi;\n}\n\n// IUP[a] Interpolate Untouched Points through the outline\n// 0x30\nfunction IUP(v, state) {\n    const z2 = state.z2;\n    const pLen = z2.length - 2;\n    let cp;\n    let pp;\n    let np;\n\n    if (exports.DEBUG) console.log(state.step, 'IUP[' + v.axis + ']');\n\n    for (let i = 0; i < pLen; i++) {\n        cp = z2[i]; // current point\n\n        // if this point has been touched go on\n        if (v.touched(cp)) continue;\n\n        pp = cp.prevTouched(v);\n\n        // no point on the contour has been touched?\n        if (pp === cp) continue;\n\n        np = cp.nextTouched(v);\n\n        if (pp === np) {\n            // only one point on the contour has been touched\n            // so simply moves the point like that\n\n            v.setRelative(cp, cp, v.distance(pp, pp, false, true), v, true);\n        }\n\n        v.interpolate(cp, pp, np, v);\n    }\n}\n\n// SHP[] SHift Point using reference point\n// 0x32-0x33\nfunction SHP(a, state) {\n    const stack = state.stack;\n    const rpi = a ? state.rp1 : state.rp2;\n    const rp = (a ? state.z0 : state.z1)[rpi];\n    const fv = state.fv;\n    const pv = state.pv;\n    let loop = state.loop;\n    const z2 = state.z2;\n\n    while (loop--)\n    {\n        const pi = stack.pop();\n        const p = z2[pi];\n\n        const d = pv.distance(rp, rp, false, true);\n        fv.setRelative(p, p, d, pv);\n        fv.touch(p);\n\n        if (exports.DEBUG) {\n            console.log(\n                state.step,\n                (state.loop > 1 ?\n                   'loop ' + (state.loop - loop) + ': ' :\n                   ''\n                ) +\n                'SHP[' + (a ? 'rp1' : 'rp2') + ']', pi\n            );\n        }\n    }\n\n    state.loop = 1;\n}\n\n// SHC[] SHift Contour using reference point\n// 0x36-0x37\nfunction SHC(a, state) {\n    const stack = state.stack;\n    const rpi = a ? state.rp1 : state.rp2;\n    const rp = (a ? state.z0 : state.z1)[rpi];\n    const fv = state.fv;\n    const pv = state.pv;\n    const ci = stack.pop();\n    const sp = state.z2[state.contours[ci]];\n    let p = sp;\n\n    if (exports.DEBUG) console.log(state.step, 'SHC[' + a + ']', ci);\n\n    const d = pv.distance(rp, rp, false, true);\n\n    do {\n        if (p !== rp) fv.setRelative(p, p, d, pv);\n        p = p.nextPointOnContour;\n    } while (p !== sp);\n}\n\n// SHZ[] SHift Zone using reference point\n// 0x36-0x37\nfunction SHZ(a, state) {\n    const stack = state.stack;\n    const rpi = a ? state.rp1 : state.rp2;\n    const rp = (a ? state.z0 : state.z1)[rpi];\n    const fv = state.fv;\n    const pv = state.pv;\n\n    const e = stack.pop();\n\n    if (exports.DEBUG) console.log(state.step, 'SHZ[' + a + ']', e);\n\n    let z;\n    switch (e) {\n        case 0 : z = state.tZone; break;\n        case 1 : z = state.gZone; break;\n        default : throw new Error('Invalid zone');\n    }\n\n    let p;\n    const d = pv.distance(rp, rp, false, true);\n    const pLen = z.length - 2;\n    for (let i = 0; i < pLen; i++)\n    {\n        p = z[i];\n        fv.setRelative(p, p, d, pv);\n        //if (p !== rp) fv.setRelative(p, p, d, pv);\n    }\n}\n\n// SHPIX[] SHift point by a PIXel amount\n// 0x38\nfunction SHPIX(state) {\n    const stack = state.stack;\n    let loop = state.loop;\n    const fv = state.fv;\n    const d = stack.pop() / 0x40;\n    const z2 = state.z2;\n\n    while (loop--) {\n        const pi = stack.pop();\n        const p = z2[pi];\n\n        if (exports.DEBUG) {\n            console.log(\n                state.step,\n                (state.loop > 1 ? 'loop ' + (state.loop - loop) + ': ' : '') +\n                'SHPIX[]', pi, d\n            );\n        }\n\n        fv.setRelative(p, p, d);\n        fv.touch(p);\n    }\n\n    state.loop = 1;\n}\n\n// IP[] Interpolate Point\n// 0x39\nfunction IP(state) {\n    const stack = state.stack;\n    const rp1i = state.rp1;\n    const rp2i = state.rp2;\n    let loop = state.loop;\n    const rp1 = state.z0[rp1i];\n    const rp2 = state.z1[rp2i];\n    const fv = state.fv;\n    const pv = state.dpv;\n    const z2 = state.z2;\n\n    while (loop--) {\n        const pi = stack.pop();\n        const p = z2[pi];\n\n        if (exports.DEBUG) {\n            console.log(\n                state.step,\n                (state.loop > 1 ? 'loop ' + (state.loop - loop) + ': ' : '') +\n                'IP[]', pi, rp1i, '<->', rp2i\n            );\n        }\n\n        fv.interpolate(p, rp1, rp2, pv);\n\n        fv.touch(p);\n    }\n\n    state.loop = 1;\n}\n\n// MSIRP[a] Move Stack Indirect Relative Point\n// 0x3A-0x3B\nfunction MSIRP(a, state) {\n    const stack = state.stack;\n    const d = stack.pop() / 64;\n    const pi = stack.pop();\n    const p = state.z1[pi];\n    const rp0 = state.z0[state.rp0];\n    const fv = state.fv;\n    const pv = state.pv;\n\n    fv.setRelative(p, rp0, d, pv);\n    fv.touch(p);\n\n    if (exports.DEBUG) console.log(state.step, 'MSIRP[' + a + ']', d, pi);\n\n    state.rp1 = state.rp0;\n    state.rp2 = pi;\n    if (a) state.rp0 = pi;\n}\n\n// ALIGNRP[] Align to reference point.\n// 0x3C\nfunction ALIGNRP(state) {\n    const stack = state.stack;\n    const rp0i = state.rp0;\n    const rp0 = state.z0[rp0i];\n    let loop = state.loop;\n    const fv = state.fv;\n    const pv = state.pv;\n    const z1 = state.z1;\n\n    while (loop--) {\n        const pi = stack.pop();\n        const p = z1[pi];\n\n        if (exports.DEBUG) {\n            console.log(\n                state.step,\n                (state.loop > 1 ? 'loop ' + (state.loop - loop) + ': ' : '') +\n                'ALIGNRP[]', pi\n            );\n        }\n\n        fv.setRelative(p, rp0, 0, pv);\n        fv.touch(p);\n    }\n\n    state.loop = 1;\n}\n\n// RTG[] Round To Double Grid\n// 0x3D\nfunction RTDG(state) {\n    if (exports.DEBUG) console.log(state.step, 'RTDG[]');\n\n    state.round = roundToDoubleGrid;\n}\n\n// MIAP[a] Move Indirect Absolute Point\n// 0x3E-0x3F\nfunction MIAP(round, state) {\n    const stack = state.stack;\n    const n = stack.pop();\n    const pi = stack.pop();\n    const p = state.z0[pi];\n    const fv = state.fv;\n    const pv = state.pv;\n    let cv = state.cvt[n];\n\n    if (exports.DEBUG) {\n        console.log(\n            state.step,\n            'MIAP[' + round + ']',\n            n, '(', cv, ')', pi\n        );\n    }\n\n    let d = pv.distance(p, HPZero);\n\n    if (round) {\n        if (Math.abs(d - cv) < state.cvCutIn) d = cv;\n\n        d = state.round(d);\n    }\n\n    fv.setRelative(p, HPZero, d, pv);\n\n    if (state.zp0 === 0) {\n        p.xo = p.x;\n        p.yo = p.y;\n    }\n\n    fv.touch(p);\n\n    state.rp0 = state.rp1 = pi;\n}\n\n// NPUSB[] PUSH N Bytes\n// 0x40\nfunction NPUSHB(state) {\n    const prog = state.prog;\n    let ip = state.ip;\n    const stack = state.stack;\n\n    const n = prog[++ip];\n\n    if (exports.DEBUG) console.log(state.step, 'NPUSHB[]', n);\n\n    for (let i = 0; i < n; i++) stack.push(prog[++ip]);\n\n    state.ip = ip;\n}\n\n// NPUSHW[] PUSH N Words\n// 0x41\nfunction NPUSHW(state) {\n    let ip = state.ip;\n    const prog = state.prog;\n    const stack = state.stack;\n    const n = prog[++ip];\n\n    if (exports.DEBUG) console.log(state.step, 'NPUSHW[]', n);\n\n    for (let i = 0; i < n; i++) {\n        let w = (prog[++ip] << 8) | prog[++ip];\n        if (w & 0x8000) w = -((w ^ 0xffff) + 1);\n        stack.push(w);\n    }\n\n    state.ip = ip;\n}\n\n// WS[] Write Store\n// 0x42\nfunction WS(state) {\n    const stack = state.stack;\n    let store = state.store;\n\n    if (!store) store = state.store = [];\n\n    const v = stack.pop();\n    const l = stack.pop();\n\n    if (exports.DEBUG) console.log(state.step, 'WS', v, l);\n\n    store[l] = v;\n}\n\n// RS[] Read Store\n// 0x43\nfunction RS(state) {\n    const stack = state.stack;\n    const store = state.store;\n\n    const l = stack.pop();\n\n    if (exports.DEBUG) console.log(state.step, 'RS', l);\n\n    const v = (store && store[l]) || 0;\n\n    stack.push(v);\n}\n\n// WCVTP[] Write Control Value Table in Pixel units\n// 0x44\nfunction WCVTP(state) {\n    const stack = state.stack;\n\n    const v = stack.pop();\n    const l = stack.pop();\n\n    if (exports.DEBUG) console.log(state.step, 'WCVTP', v, l);\n\n    state.cvt[l] = v / 0x40;\n}\n\n// RCVT[] Read Control Value Table entry\n// 0x45\nfunction RCVT(state) {\n    const stack = state.stack;\n    const cvte = stack.pop();\n\n    if (exports.DEBUG) console.log(state.step, 'RCVT', cvte);\n\n    stack.push(state.cvt[cvte] * 0x40);\n}\n\n// GC[] Get Coordinate projected onto the projection vector\n// 0x46-0x47\nfunction GC(a, state) {\n    const stack = state.stack;\n    const pi = stack.pop();\n    const p = state.z2[pi];\n\n    if (exports.DEBUG) console.log(state.step, 'GC[' + a + ']', pi);\n\n    stack.push(state.dpv.distance(p, HPZero, a, false) * 0x40);\n}\n\n// MD[a] Measure Distance\n// 0x49-0x4A\nfunction MD(a, state) {\n    const stack = state.stack;\n    const pi2 = stack.pop();\n    const pi1 = stack.pop();\n    const p2 = state.z1[pi2];\n    const p1 = state.z0[pi1];\n    const d = state.dpv.distance(p1, p2, a, a);\n\n    if (exports.DEBUG) console.log(state.step, 'MD[' + a + ']', pi2, pi1, '->', d);\n\n    state.stack.push(Math.round(d * 64));\n}\n\n// MPPEM[] Measure Pixels Per EM\n// 0x4B\nfunction MPPEM(state) {\n    if (exports.DEBUG) console.log(state.step, 'MPPEM[]');\n    state.stack.push(state.ppem);\n}\n\n// FLIPON[] set the auto FLIP Boolean to ON\n// 0x4D\nfunction FLIPON(state) {\n    if (exports.DEBUG) console.log(state.step, 'FLIPON[]');\n    state.autoFlip = true;\n}\n\n// LT[] Less Than\n// 0x50\nfunction LT(state) {\n    const stack = state.stack;\n    const e2 = stack.pop();\n    const e1 = stack.pop();\n\n    if (exports.DEBUG) console.log(state.step, 'LT[]', e2, e1);\n\n    stack.push(e1 < e2 ? 1 : 0);\n}\n\n// LTEQ[] Less Than or EQual\n// 0x53\nfunction LTEQ(state) {\n    const stack = state.stack;\n    const e2 = stack.pop();\n    const e1 = stack.pop();\n\n    if (exports.DEBUG) console.log(state.step, 'LTEQ[]', e2, e1);\n\n    stack.push(e1 <= e2 ? 1 : 0);\n}\n\n// GTEQ[] Greater Than\n// 0x52\nfunction GT(state) {\n    const stack = state.stack;\n    const e2 = stack.pop();\n    const e1 = stack.pop();\n\n    if (exports.DEBUG) console.log(state.step, 'GT[]', e2, e1);\n\n    stack.push(e1 > e2 ? 1 : 0);\n}\n\n// GTEQ[] Greater Than or EQual\n// 0x53\nfunction GTEQ(state) {\n    const stack = state.stack;\n    const e2 = stack.pop();\n    const e1 = stack.pop();\n\n    if (exports.DEBUG) console.log(state.step, 'GTEQ[]', e2, e1);\n\n    stack.push(e1 >= e2 ? 1 : 0);\n}\n\n// EQ[] EQual\n// 0x54\nfunction EQ(state) {\n    const stack = state.stack;\n    const e2 = stack.pop();\n    const e1 = stack.pop();\n\n    if (exports.DEBUG) console.log(state.step, 'EQ[]', e2, e1);\n\n    stack.push(e2 === e1 ? 1 : 0);\n}\n\n// NEQ[] Not EQual\n// 0x55\nfunction NEQ(state) {\n    const stack = state.stack;\n    const e2 = stack.pop();\n    const e1 = stack.pop();\n\n    if (exports.DEBUG) console.log(state.step, 'NEQ[]', e2, e1);\n\n    stack.push(e2 !== e1 ? 1 : 0);\n}\n\n// ODD[] ODD\n// 0x56\nfunction ODD(state) {\n    const stack = state.stack;\n    const n = stack.pop();\n\n    if (exports.DEBUG) console.log(state.step, 'ODD[]', n);\n\n    stack.push(Math.trunc(n) % 2 ? 1 : 0);\n}\n\n// EVEN[] EVEN\n// 0x57\nfunction EVEN(state) {\n    const stack = state.stack;\n    const n = stack.pop();\n\n    if (exports.DEBUG) console.log(state.step, 'EVEN[]', n);\n\n    stack.push(Math.trunc(n) % 2 ? 0 : 1);\n}\n\n// IF[] IF test\n// 0x58\nfunction IF(state) {\n    let test = state.stack.pop();\n    let ins;\n\n    if (exports.DEBUG) console.log(state.step, 'IF[]', test);\n\n    // if test is true it just continues\n    // if not the ip is skipped until matching ELSE or EIF\n    if (!test) {\n        skip(state, true);\n\n        if (exports.DEBUG) console.log(state.step, ins === 0x1B ? 'ELSE[]' : 'EIF[]');\n    }\n}\n\n// EIF[] End IF\n// 0x59\nfunction EIF(state) {\n    // this can be reached normally when\n    // executing an else branch.\n    // -> just ignore it\n\n    if (exports.DEBUG) console.log(state.step, 'EIF[]');\n}\n\n// AND[] logical AND\n// 0x5A\nfunction AND(state) {\n    const stack = state.stack;\n    const e2 = stack.pop();\n    const e1 = stack.pop();\n\n    if (exports.DEBUG) console.log(state.step, 'AND[]', e2, e1);\n\n    stack.push(e2 && e1 ? 1 : 0);\n}\n\n// OR[] logical OR\n// 0x5B\nfunction OR(state) {\n    const stack = state.stack;\n    const e2 = stack.pop();\n    const e1 = stack.pop();\n\n    if (exports.DEBUG) console.log(state.step, 'OR[]', e2, e1);\n\n    stack.push(e2 || e1 ? 1 : 0);\n}\n\n// NOT[] logical NOT\n// 0x5C\nfunction NOT(state) {\n    const stack = state.stack;\n    const e = stack.pop();\n\n    if (exports.DEBUG) console.log(state.step, 'NOT[]', e);\n\n    stack.push(e ? 0 : 1);\n}\n\n// DELTAP1[] DELTA exception P1\n// DELTAP2[] DELTA exception P2\n// DELTAP3[] DELTA exception P3\n// 0x5D, 0x71, 0x72\nfunction DELTAP123(b, state) {\n    const stack = state.stack;\n    const n = stack.pop();\n    const fv = state.fv;\n    const pv = state.pv;\n    const ppem = state.ppem;\n    const base = state.deltaBase + (b - 1) * 16;\n    const ds = state.deltaShift;\n    const z0 = state.z0;\n\n    if (exports.DEBUG) console.log(state.step, 'DELTAP[' + b + ']', n, stack);\n\n    for (let i = 0; i < n; i++) {\n        const pi = stack.pop();\n        const arg = stack.pop();\n        const appem = base + ((arg & 0xF0) >> 4);\n        if (appem !== ppem) continue;\n\n        let mag = (arg & 0x0F) - 8;\n        if (mag >= 0) mag++;\n        if (exports.DEBUG) console.log(state.step, 'DELTAPFIX', pi, 'by', mag * ds);\n\n        const p = z0[pi];\n        fv.setRelative(p, p, mag * ds, pv);\n    }\n}\n\n// SDB[] Set Delta Base in the graphics state\n// 0x5E\nfunction SDB(state) {\n    const stack = state.stack;\n    const n = stack.pop();\n\n    if (exports.DEBUG) console.log(state.step, 'SDB[]', n);\n\n    state.deltaBase = n;\n}\n\n// SDS[] Set Delta Shift in the graphics state\n// 0x5F\nfunction SDS(state) {\n    const stack = state.stack;\n    const n = stack.pop();\n\n    if (exports.DEBUG) console.log(state.step, 'SDS[]', n);\n\n    state.deltaShift = Math.pow(0.5, n);\n}\n\n// ADD[] ADD\n// 0x60\nfunction ADD(state) {\n    const stack = state.stack;\n    const n2 = stack.pop();\n    const n1 = stack.pop();\n\n    if (exports.DEBUG) console.log(state.step, 'ADD[]', n2, n1);\n\n    stack.push(n1 + n2);\n}\n\n// SUB[] SUB\n// 0x61\nfunction SUB(state) {\n    const stack = state.stack;\n    const n2 = stack.pop();\n    const n1 = stack.pop();\n\n    if (exports.DEBUG) console.log(state.step, 'SUB[]', n2, n1);\n\n    stack.push(n1 - n2);\n}\n\n// DIV[] DIV\n// 0x62\nfunction DIV(state) {\n    const stack = state.stack;\n    const n2 = stack.pop();\n    const n1 = stack.pop();\n\n    if (exports.DEBUG) console.log(state.step, 'DIV[]', n2, n1);\n\n    stack.push(n1 * 64 / n2);\n}\n\n// MUL[] MUL\n// 0x63\nfunction MUL(state) {\n    const stack = state.stack;\n    const n2 = stack.pop();\n    const n1 = stack.pop();\n\n    if (exports.DEBUG) console.log(state.step, 'MUL[]', n2, n1);\n\n    stack.push(n1 * n2 / 64);\n}\n\n// ABS[] ABSolute value\n// 0x64\nfunction ABS(state) {\n    const stack = state.stack;\n    const n = stack.pop();\n\n    if (exports.DEBUG) console.log(state.step, 'ABS[]', n);\n\n    stack.push(Math.abs(n));\n}\n\n// NEG[] NEGate\n// 0x65\nfunction NEG(state) {\n    const stack = state.stack;\n    let n = stack.pop();\n\n    if (exports.DEBUG) console.log(state.step, 'NEG[]', n);\n\n    stack.push(-n);\n}\n\n// FLOOR[] FLOOR\n// 0x66\nfunction FLOOR(state) {\n    const stack = state.stack;\n    const n = stack.pop();\n\n    if (exports.DEBUG) console.log(state.step, 'FLOOR[]', n);\n\n    stack.push(Math.floor(n / 0x40) * 0x40);\n}\n\n// CEILING[] CEILING\n// 0x67\nfunction CEILING(state) {\n    const stack = state.stack;\n    const n = stack.pop();\n\n    if (exports.DEBUG) console.log(state.step, 'CEILING[]', n);\n\n    stack.push(Math.ceil(n / 0x40) * 0x40);\n}\n\n// ROUND[ab] ROUND value\n// 0x68-0x6B\nfunction ROUND(dt, state) {\n    const stack = state.stack;\n    const n = stack.pop();\n\n    if (exports.DEBUG) console.log(state.step, 'ROUND[]');\n\n    stack.push(state.round(n / 0x40) * 0x40);\n}\n\n// WCVTF[] Write Control Value Table in Funits\n// 0x70\nfunction WCVTF(state) {\n    const stack = state.stack;\n    const v = stack.pop();\n    const l = stack.pop();\n\n    if (exports.DEBUG) console.log(state.step, 'WCVTF[]', v, l);\n\n    state.cvt[l] = v * state.ppem / state.font.unitsPerEm;\n}\n\n// DELTAC1[] DELTA exception C1\n// DELTAC2[] DELTA exception C2\n// DELTAC3[] DELTA exception C3\n// 0x73, 0x74, 0x75\nfunction DELTAC123(b, state) {\n    const stack = state.stack;\n    const n = stack.pop();\n    const ppem = state.ppem;\n    const base = state.deltaBase + (b - 1) * 16;\n    const ds = state.deltaShift;\n\n    if (exports.DEBUG) console.log(state.step, 'DELTAC[' + b + ']', n, stack);\n\n    for (let i = 0; i < n; i++) {\n        const c = stack.pop();\n        const arg = stack.pop();\n        const appem = base + ((arg & 0xF0) >> 4);\n        if (appem !== ppem) continue;\n\n        let mag = (arg & 0x0F) - 8;\n        if (mag >= 0) mag++;\n\n        const delta = mag * ds;\n\n        if (exports.DEBUG) console.log(state.step, 'DELTACFIX', c, 'by', delta);\n\n        state.cvt[c] += delta;\n    }\n}\n\n// SROUND[] Super ROUND\n// 0x76\nfunction SROUND(state) {\n    let n = state.stack.pop();\n\n    if (exports.DEBUG) console.log(state.step, 'SROUND[]', n);\n\n    state.round = roundSuper;\n\n    let period;\n\n    switch (n & 0xC0) {\n        case 0x00:\n            period = 0.5;\n            break;\n        case 0x40:\n            period = 1;\n            break;\n        case 0x80:\n            period = 2;\n            break;\n        default:\n            throw new Error('invalid SROUND value');\n    }\n\n    state.srPeriod = period;\n\n    switch (n & 0x30) {\n        case 0x00:\n            state.srPhase = 0;\n            break;\n        case 0x10:\n            state.srPhase = 0.25 * period;\n            break;\n        case 0x20:\n            state.srPhase = 0.5  * period;\n            break;\n        case 0x30:\n            state.srPhase = 0.75 * period;\n            break;\n        default: throw new Error('invalid SROUND value');\n    }\n\n    n &= 0x0F;\n\n    if (n === 0) state.srThreshold = 0;\n    else state.srThreshold = (n / 8 - 0.5) * period;\n}\n\n// S45ROUND[] Super ROUND 45 degrees\n// 0x77\nfunction S45ROUND(state) {\n    let n = state.stack.pop();\n\n    if (exports.DEBUG) console.log(state.step, 'S45ROUND[]', n);\n\n    state.round = roundSuper;\n\n    let period;\n\n    switch (n & 0xC0) {\n        case 0x00:\n            period = Math.sqrt(2) / 2;\n            break;\n        case 0x40:\n            period = Math.sqrt(2);\n            break;\n        case 0x80:\n            period = 2 * Math.sqrt(2);\n            break;\n        default:\n            throw new Error('invalid S45ROUND value');\n    }\n\n    state.srPeriod = period;\n\n    switch (n & 0x30) {\n        case 0x00:\n            state.srPhase = 0;\n            break;\n        case 0x10:\n            state.srPhase = 0.25 * period;\n            break;\n        case 0x20:\n            state.srPhase = 0.5  * period;\n            break;\n        case 0x30:\n            state.srPhase = 0.75 * period;\n            break;\n        default:\n            throw new Error('invalid S45ROUND value');\n    }\n\n    n &= 0x0F;\n\n    if (n === 0) state.srThreshold = 0;\n    else state.srThreshold = (n / 8 - 0.5) * period;\n}\n\n// ROFF[] Round Off\n// 0x7A\nfunction ROFF(state) {\n    if (exports.DEBUG) console.log(state.step, 'ROFF[]');\n\n    state.round = roundOff;\n}\n\n// RUTG[] Round Up To Grid\n// 0x7C\nfunction RUTG(state) {\n    if (exports.DEBUG) console.log(state.step, 'RUTG[]');\n\n    state.round = roundUpToGrid;\n}\n\n// RDTG[] Round Down To Grid\n// 0x7D\nfunction RDTG(state) {\n    if (exports.DEBUG) console.log(state.step, 'RDTG[]');\n\n    state.round = roundDownToGrid;\n}\n\n// SCANCTRL[] SCAN conversion ConTRoL\n// 0x85\nfunction SCANCTRL(state) {\n    const n = state.stack.pop();\n\n    // ignored by opentype.js\n\n    if (exports.DEBUG) console.log(state.step, 'SCANCTRL[]', n);\n}\n\n// SDPVTL[a] Set Dual Projection Vector To Line\n// 0x86-0x87\nfunction SDPVTL(a, state) {\n    const stack = state.stack;\n    const p2i = stack.pop();\n    const p1i = stack.pop();\n    const p2 = state.z2[p2i];\n    const p1 = state.z1[p1i];\n\n    if (exports.DEBUG) console.log(state.step, 'SDPVTL[' + a + ']', p2i, p1i);\n\n    let dx;\n    let dy;\n\n    if (!a) {\n        dx = p1.x - p2.x;\n        dy = p1.y - p2.y;\n    } else {\n        dx = p2.y - p1.y;\n        dy = p1.x - p2.x;\n    }\n\n    state.dpv = getUnitVector(dx, dy);\n}\n\n// GETINFO[] GET INFOrmation\n// 0x88\nfunction GETINFO(state) {\n    const stack = state.stack;\n    const sel = stack.pop();\n    let r = 0;\n\n    if (exports.DEBUG) console.log(state.step, 'GETINFO[]', sel);\n\n    // v35 as in no subpixel hinting\n    if (sel & 0x01) r = 35;\n\n    // TODO rotation and stretch currently not supported\n    // and thus those GETINFO are always 0.\n\n    // opentype.js is always gray scaling\n    if (sel & 0x20) r |= 0x1000;\n\n    stack.push(r);\n}\n\n// ROLL[] ROLL the top three stack elements\n// 0x8A\nfunction ROLL(state) {\n    const stack = state.stack;\n    const a = stack.pop();\n    const b = stack.pop();\n    const c = stack.pop();\n\n    if (exports.DEBUG) console.log(state.step, 'ROLL[]');\n\n    stack.push(b);\n    stack.push(a);\n    stack.push(c);\n}\n\n// MAX[] MAXimum of top two stack elements\n// 0x8B\nfunction MAX(state) {\n    const stack = state.stack;\n    const e2 = stack.pop();\n    const e1 = stack.pop();\n\n    if (exports.DEBUG) console.log(state.step, 'MAX[]', e2, e1);\n\n    stack.push(Math.max(e1, e2));\n}\n\n// MIN[] MINimum of top two stack elements\n// 0x8C\nfunction MIN(state) {\n    const stack = state.stack;\n    const e2 = stack.pop();\n    const e1 = stack.pop();\n\n    if (exports.DEBUG) console.log(state.step, 'MIN[]', e2, e1);\n\n    stack.push(Math.min(e1, e2));\n}\n\n// SCANTYPE[] SCANTYPE\n// 0x8D\nfunction SCANTYPE(state) {\n    const n = state.stack.pop();\n    // ignored by opentype.js\n    if (exports.DEBUG) console.log(state.step, 'SCANTYPE[]', n);\n}\n\n// INSTCTRL[] INSTCTRL\n// 0x8D\nfunction INSTCTRL(state) {\n    const s = state.stack.pop();\n    let v = state.stack.pop();\n\n    if (exports.DEBUG) console.log(state.step, 'INSTCTRL[]', s, v);\n\n    switch (s) {\n        case 1 : state.inhibitGridFit = !!v; return;\n        case 2 : state.ignoreCvt = !!v; return;\n        default: throw new Error('invalid INSTCTRL[] selector');\n    }\n}\n\n// PUSHB[abc] PUSH Bytes\n// 0xB0-0xB7\nfunction PUSHB(n, state) {\n    const stack = state.stack;\n    const prog = state.prog;\n    let ip = state.ip;\n\n    if (exports.DEBUG) console.log(state.step, 'PUSHB[' + n + ']');\n\n    for (let i = 0; i < n; i++) stack.push(prog[++ip]);\n\n    state.ip = ip;\n}\n\n// PUSHW[abc] PUSH Words\n// 0xB8-0xBF\nfunction PUSHW(n, state) {\n    let ip = state.ip;\n    const prog = state.prog;\n    const stack = state.stack;\n\n    if (exports.DEBUG) console.log(state.ip, 'PUSHW[' + n + ']');\n\n    for (let i = 0; i < n; i++) {\n        let w = (prog[++ip] << 8) | prog[++ip];\n        if (w & 0x8000) w = -((w ^ 0xffff) + 1);\n        stack.push(w);\n    }\n\n    state.ip = ip;\n}\n\n// MDRP[abcde] Move Direct Relative Point\n// 0xD0-0xEF\n// (if indirect is 0)\n//\n// and\n//\n// MIRP[abcde] Move Indirect Relative Point\n// 0xE0-0xFF\n// (if indirect is 1)\n\nfunction MDRP_MIRP(indirect, setRp0, keepD, ro, dt, state) {\n    const stack = state.stack;\n    const cvte = indirect && stack.pop();\n    const pi = stack.pop();\n    const rp0i = state.rp0;\n    const rp = state.z0[rp0i];\n    const p = state.z1[pi];\n\n    const md = state.minDis;\n    const fv = state.fv;\n    const pv = state.dpv;\n    let od; // original distance\n    let d; // moving distance\n    let sign; // sign of distance\n    let cv;\n\n    d = od = pv.distance(p, rp, true, true);\n    sign = d >= 0 ? 1 : -1; // Math.sign would be 0 in case of 0\n\n    // TODO consider autoFlip\n    d = Math.abs(d);\n\n    if (indirect) {\n        cv = state.cvt[cvte];\n\n        if (ro && Math.abs(d - cv) < state.cvCutIn) d = cv;\n    }\n\n    if (keepD && d < md) d = md;\n\n    if (ro) d = state.round(d);\n\n    fv.setRelative(p, rp, sign * d, pv);\n    fv.touch(p);\n\n    if (exports.DEBUG) {\n        console.log(\n            state.step,\n            (indirect ? 'MIRP[' : 'MDRP[') +\n            (setRp0 ? 'M' : 'm') +\n            (keepD ? '>' : '_') +\n            (ro ? 'R' : '_') +\n            (dt === 0 ? 'Gr' : (dt === 1 ? 'Bl' : (dt === 2 ? 'Wh' : ''))) +\n            ']',\n            indirect ?\n                cvte + '(' + state.cvt[cvte] + ',' +  cv + ')' :\n                '',\n            pi,\n            '(d =', od, '->', sign * d, ')'\n        );\n    }\n\n    state.rp1 = state.rp0;\n    state.rp2 = pi;\n    if (setRp0) state.rp0 = pi;\n}\n\n/*\n* The instruction table.\n*/\ninstructionTable = [\n    /* 0x00 */ SVTCA.bind(undefined, yUnitVector),\n    /* 0x01 */ SVTCA.bind(undefined, xUnitVector),\n    /* 0x02 */ SPVTCA.bind(undefined, yUnitVector),\n    /* 0x03 */ SPVTCA.bind(undefined, xUnitVector),\n    /* 0x04 */ SFVTCA.bind(undefined, yUnitVector),\n    /* 0x05 */ SFVTCA.bind(undefined, xUnitVector),\n    /* 0x06 */ SPVTL.bind(undefined, 0),\n    /* 0x07 */ SPVTL.bind(undefined, 1),\n    /* 0x08 */ SFVTL.bind(undefined, 0),\n    /* 0x09 */ SFVTL.bind(undefined, 1),\n    /* 0x0A */ SPVFS,\n    /* 0x0B */ SFVFS,\n    /* 0x0C */ GPV,\n    /* 0x0D */ GFV,\n    /* 0x0E */ SFVTPV,\n    /* 0x0F */ ISECT,\n    /* 0x10 */ SRP0,\n    /* 0x11 */ SRP1,\n    /* 0x12 */ SRP2,\n    /* 0x13 */ SZP0,\n    /* 0x14 */ SZP1,\n    /* 0x15 */ SZP2,\n    /* 0x16 */ SZPS,\n    /* 0x17 */ SLOOP,\n    /* 0x18 */ RTG,\n    /* 0x19 */ RTHG,\n    /* 0x1A */ SMD,\n    /* 0x1B */ ELSE,\n    /* 0x1C */ JMPR,\n    /* 0x1D */ SCVTCI,\n    /* 0x1E */ undefined,   // TODO SSWCI\n    /* 0x1F */ undefined,   // TODO SSW\n    /* 0x20 */ DUP,\n    /* 0x21 */ POP,\n    /* 0x22 */ CLEAR,\n    /* 0x23 */ SWAP,\n    /* 0x24 */ DEPTH,\n    /* 0x25 */ CINDEX,\n    /* 0x26 */ MINDEX,\n    /* 0x27 */ undefined,   // TODO ALIGNPTS\n    /* 0x28 */ undefined,\n    /* 0x29 */ undefined,   // TODO UTP\n    /* 0x2A */ LOOPCALL,\n    /* 0x2B */ CALL,\n    /* 0x2C */ FDEF,\n    /* 0x2D */ undefined,   // ENDF (eaten by FDEF)\n    /* 0x2E */ MDAP.bind(undefined, 0),\n    /* 0x2F */ MDAP.bind(undefined, 1),\n    /* 0x30 */ IUP.bind(undefined, yUnitVector),\n    /* 0x31 */ IUP.bind(undefined, xUnitVector),\n    /* 0x32 */ SHP.bind(undefined, 0),\n    /* 0x33 */ SHP.bind(undefined, 1),\n    /* 0x34 */ SHC.bind(undefined, 0),\n    /* 0x35 */ SHC.bind(undefined, 1),\n    /* 0x36 */ SHZ.bind(undefined, 0),\n    /* 0x37 */ SHZ.bind(undefined, 1),\n    /* 0x38 */ SHPIX,\n    /* 0x39 */ IP,\n    /* 0x3A */ MSIRP.bind(undefined, 0),\n    /* 0x3B */ MSIRP.bind(undefined, 1),\n    /* 0x3C */ ALIGNRP,\n    /* 0x3D */ RTDG,\n    /* 0x3E */ MIAP.bind(undefined, 0),\n    /* 0x3F */ MIAP.bind(undefined, 1),\n    /* 0x40 */ NPUSHB,\n    /* 0x41 */ NPUSHW,\n    /* 0x42 */ WS,\n    /* 0x43 */ RS,\n    /* 0x44 */ WCVTP,\n    /* 0x45 */ RCVT,\n    /* 0x46 */ GC.bind(undefined, 0),\n    /* 0x47 */ GC.bind(undefined, 1),\n    /* 0x48 */ undefined,   // TODO SCFS\n    /* 0x49 */ MD.bind(undefined, 0),\n    /* 0x4A */ MD.bind(undefined, 1),\n    /* 0x4B */ MPPEM,\n    /* 0x4C */ undefined,   // TODO MPS\n    /* 0x4D */ FLIPON,\n    /* 0x4E */ undefined,   // TODO FLIPOFF\n    /* 0x4F */ undefined,   // TODO DEBUG\n    /* 0x50 */ LT,\n    /* 0x51 */ LTEQ,\n    /* 0x52 */ GT,\n    /* 0x53 */ GTEQ,\n    /* 0x54 */ EQ,\n    /* 0x55 */ NEQ,\n    /* 0x56 */ ODD,\n    /* 0x57 */ EVEN,\n    /* 0x58 */ IF,\n    /* 0x59 */ EIF,\n    /* 0x5A */ AND,\n    /* 0x5B */ OR,\n    /* 0x5C */ NOT,\n    /* 0x5D */ DELTAP123.bind(undefined, 1),\n    /* 0x5E */ SDB,\n    /* 0x5F */ SDS,\n    /* 0x60 */ ADD,\n    /* 0x61 */ SUB,\n    /* 0x62 */ DIV,\n    /* 0x63 */ MUL,\n    /* 0x64 */ ABS,\n    /* 0x65 */ NEG,\n    /* 0x66 */ FLOOR,\n    /* 0x67 */ CEILING,\n    /* 0x68 */ ROUND.bind(undefined, 0),\n    /* 0x69 */ ROUND.bind(undefined, 1),\n    /* 0x6A */ ROUND.bind(undefined, 2),\n    /* 0x6B */ ROUND.bind(undefined, 3),\n    /* 0x6C */ undefined,   // TODO NROUND[ab]\n    /* 0x6D */ undefined,   // TODO NROUND[ab]\n    /* 0x6E */ undefined,   // TODO NROUND[ab]\n    /* 0x6F */ undefined,   // TODO NROUND[ab]\n    /* 0x70 */ WCVTF,\n    /* 0x71 */ DELTAP123.bind(undefined, 2),\n    /* 0x72 */ DELTAP123.bind(undefined, 3),\n    /* 0x73 */ DELTAC123.bind(undefined, 1),\n    /* 0x74 */ DELTAC123.bind(undefined, 2),\n    /* 0x75 */ DELTAC123.bind(undefined, 3),\n    /* 0x76 */ SROUND,\n    /* 0x77 */ S45ROUND,\n    /* 0x78 */ undefined,   // TODO JROT[]\n    /* 0x79 */ undefined,   // TODO JROF[]\n    /* 0x7A */ ROFF,\n    /* 0x7B */ undefined,\n    /* 0x7C */ RUTG,\n    /* 0x7D */ RDTG,\n    /* 0x7E */ POP, // actually SANGW, supposed to do only a pop though\n    /* 0x7F */ POP, // actually AA, supposed to do only a pop though\n    /* 0x80 */ undefined,   // TODO FLIPPT\n    /* 0x81 */ undefined,   // TODO FLIPRGON\n    /* 0x82 */ undefined,   // TODO FLIPRGOFF\n    /* 0x83 */ undefined,\n    /* 0x84 */ undefined,\n    /* 0x85 */ SCANCTRL,\n    /* 0x86 */ SDPVTL.bind(undefined, 0),\n    /* 0x87 */ SDPVTL.bind(undefined, 1),\n    /* 0x88 */ GETINFO,\n    /* 0x89 */ undefined,   // TODO IDEF\n    /* 0x8A */ ROLL,\n    /* 0x8B */ MAX,\n    /* 0x8C */ MIN,\n    /* 0x8D */ SCANTYPE,\n    /* 0x8E */ INSTCTRL,\n    /* 0x8F */ undefined,\n    /* 0x90 */ undefined,\n    /* 0x91 */ undefined,\n    /* 0x92 */ undefined,\n    /* 0x93 */ undefined,\n    /* 0x94 */ undefined,\n    /* 0x95 */ undefined,\n    /* 0x96 */ undefined,\n    /* 0x97 */ undefined,\n    /* 0x98 */ undefined,\n    /* 0x99 */ undefined,\n    /* 0x9A */ undefined,\n    /* 0x9B */ undefined,\n    /* 0x9C */ undefined,\n    /* 0x9D */ undefined,\n    /* 0x9E */ undefined,\n    /* 0x9F */ undefined,\n    /* 0xA0 */ undefined,\n    /* 0xA1 */ undefined,\n    /* 0xA2 */ undefined,\n    /* 0xA3 */ undefined,\n    /* 0xA4 */ undefined,\n    /* 0xA5 */ undefined,\n    /* 0xA6 */ undefined,\n    /* 0xA7 */ undefined,\n    /* 0xA8 */ undefined,\n    /* 0xA9 */ undefined,\n    /* 0xAA */ undefined,\n    /* 0xAB */ undefined,\n    /* 0xAC */ undefined,\n    /* 0xAD */ undefined,\n    /* 0xAE */ undefined,\n    /* 0xAF */ undefined,\n    /* 0xB0 */ PUSHB.bind(undefined, 1),\n    /* 0xB1 */ PUSHB.bind(undefined, 2),\n    /* 0xB2 */ PUSHB.bind(undefined, 3),\n    /* 0xB3 */ PUSHB.bind(undefined, 4),\n    /* 0xB4 */ PUSHB.bind(undefined, 5),\n    /* 0xB5 */ PUSHB.bind(undefined, 6),\n    /* 0xB6 */ PUSHB.bind(undefined, 7),\n    /* 0xB7 */ PUSHB.bind(undefined, 8),\n    /* 0xB8 */ PUSHW.bind(undefined, 1),\n    /* 0xB9 */ PUSHW.bind(undefined, 2),\n    /* 0xBA */ PUSHW.bind(undefined, 3),\n    /* 0xBB */ PUSHW.bind(undefined, 4),\n    /* 0xBC */ PUSHW.bind(undefined, 5),\n    /* 0xBD */ PUSHW.bind(undefined, 6),\n    /* 0xBE */ PUSHW.bind(undefined, 7),\n    /* 0xBF */ PUSHW.bind(undefined, 8),\n    /* 0xC0 */ MDRP_MIRP.bind(undefined, 0, 0, 0, 0, 0),\n    /* 0xC1 */ MDRP_MIRP.bind(undefined, 0, 0, 0, 0, 1),\n    /* 0xC2 */ MDRP_MIRP.bind(undefined, 0, 0, 0, 0, 2),\n    /* 0xC3 */ MDRP_MIRP.bind(undefined, 0, 0, 0, 0, 3),\n    /* 0xC4 */ MDRP_MIRP.bind(undefined, 0, 0, 0, 1, 0),\n    /* 0xC5 */ MDRP_MIRP.bind(undefined, 0, 0, 0, 1, 1),\n    /* 0xC6 */ MDRP_MIRP.bind(undefined, 0, 0, 0, 1, 2),\n    /* 0xC7 */ MDRP_MIRP.bind(undefined, 0, 0, 0, 1, 3),\n    /* 0xC8 */ MDRP_MIRP.bind(undefined, 0, 0, 1, 0, 0),\n    /* 0xC9 */ MDRP_MIRP.bind(undefined, 0, 0, 1, 0, 1),\n    /* 0xCA */ MDRP_MIRP.bind(undefined, 0, 0, 1, 0, 2),\n    /* 0xCB */ MDRP_MIRP.bind(undefined, 0, 0, 1, 0, 3),\n    /* 0xCC */ MDRP_MIRP.bind(undefined, 0, 0, 1, 1, 0),\n    /* 0xCD */ MDRP_MIRP.bind(undefined, 0, 0, 1, 1, 1),\n    /* 0xCE */ MDRP_MIRP.bind(undefined, 0, 0, 1, 1, 2),\n    /* 0xCF */ MDRP_MIRP.bind(undefined, 0, 0, 1, 1, 3),\n    /* 0xD0 */ MDRP_MIRP.bind(undefined, 0, 1, 0, 0, 0),\n    /* 0xD1 */ MDRP_MIRP.bind(undefined, 0, 1, 0, 0, 1),\n    /* 0xD2 */ MDRP_MIRP.bind(undefined, 0, 1, 0, 0, 2),\n    /* 0xD3 */ MDRP_MIRP.bind(undefined, 0, 1, 0, 0, 3),\n    /* 0xD4 */ MDRP_MIRP.bind(undefined, 0, 1, 0, 1, 0),\n    /* 0xD5 */ MDRP_MIRP.bind(undefined, 0, 1, 0, 1, 1),\n    /* 0xD6 */ MDRP_MIRP.bind(undefined, 0, 1, 0, 1, 2),\n    /* 0xD7 */ MDRP_MIRP.bind(undefined, 0, 1, 0, 1, 3),\n    /* 0xD8 */ MDRP_MIRP.bind(undefined, 0, 1, 1, 0, 0),\n    /* 0xD9 */ MDRP_MIRP.bind(undefined, 0, 1, 1, 0, 1),\n    /* 0xDA */ MDRP_MIRP.bind(undefined, 0, 1, 1, 0, 2),\n    /* 0xDB */ MDRP_MIRP.bind(undefined, 0, 1, 1, 0, 3),\n    /* 0xDC */ MDRP_MIRP.bind(undefined, 0, 1, 1, 1, 0),\n    /* 0xDD */ MDRP_MIRP.bind(undefined, 0, 1, 1, 1, 1),\n    /* 0xDE */ MDRP_MIRP.bind(undefined, 0, 1, 1, 1, 2),\n    /* 0xDF */ MDRP_MIRP.bind(undefined, 0, 1, 1, 1, 3),\n    /* 0xE0 */ MDRP_MIRP.bind(undefined, 1, 0, 0, 0, 0),\n    /* 0xE1 */ MDRP_MIRP.bind(undefined, 1, 0, 0, 0, 1),\n    /* 0xE2 */ MDRP_MIRP.bind(undefined, 1, 0, 0, 0, 2),\n    /* 0xE3 */ MDRP_MIRP.bind(undefined, 1, 0, 0, 0, 3),\n    /* 0xE4 */ MDRP_MIRP.bind(undefined, 1, 0, 0, 1, 0),\n    /* 0xE5 */ MDRP_MIRP.bind(undefined, 1, 0, 0, 1, 1),\n    /* 0xE6 */ MDRP_MIRP.bind(undefined, 1, 0, 0, 1, 2),\n    /* 0xE7 */ MDRP_MIRP.bind(undefined, 1, 0, 0, 1, 3),\n    /* 0xE8 */ MDRP_MIRP.bind(undefined, 1, 0, 1, 0, 0),\n    /* 0xE9 */ MDRP_MIRP.bind(undefined, 1, 0, 1, 0, 1),\n    /* 0xEA */ MDRP_MIRP.bind(undefined, 1, 0, 1, 0, 2),\n    /* 0xEB */ MDRP_MIRP.bind(undefined, 1, 0, 1, 0, 3),\n    /* 0xEC */ MDRP_MIRP.bind(undefined, 1, 0, 1, 1, 0),\n    /* 0xED */ MDRP_MIRP.bind(undefined, 1, 0, 1, 1, 1),\n    /* 0xEE */ MDRP_MIRP.bind(undefined, 1, 0, 1, 1, 2),\n    /* 0xEF */ MDRP_MIRP.bind(undefined, 1, 0, 1, 1, 3),\n    /* 0xF0 */ MDRP_MIRP.bind(undefined, 1, 1, 0, 0, 0),\n    /* 0xF1 */ MDRP_MIRP.bind(undefined, 1, 1, 0, 0, 1),\n    /* 0xF2 */ MDRP_MIRP.bind(undefined, 1, 1, 0, 0, 2),\n    /* 0xF3 */ MDRP_MIRP.bind(undefined, 1, 1, 0, 0, 3),\n    /* 0xF4 */ MDRP_MIRP.bind(undefined, 1, 1, 0, 1, 0),\n    /* 0xF5 */ MDRP_MIRP.bind(undefined, 1, 1, 0, 1, 1),\n    /* 0xF6 */ MDRP_MIRP.bind(undefined, 1, 1, 0, 1, 2),\n    /* 0xF7 */ MDRP_MIRP.bind(undefined, 1, 1, 0, 1, 3),\n    /* 0xF8 */ MDRP_MIRP.bind(undefined, 1, 1, 1, 0, 0),\n    /* 0xF9 */ MDRP_MIRP.bind(undefined, 1, 1, 1, 0, 1),\n    /* 0xFA */ MDRP_MIRP.bind(undefined, 1, 1, 1, 0, 2),\n    /* 0xFB */ MDRP_MIRP.bind(undefined, 1, 1, 1, 0, 3),\n    /* 0xFC */ MDRP_MIRP.bind(undefined, 1, 1, 1, 1, 0),\n    /* 0xFD */ MDRP_MIRP.bind(undefined, 1, 1, 1, 1, 1),\n    /* 0xFE */ MDRP_MIRP.bind(undefined, 1, 1, 1, 1, 2),\n    /* 0xFF */ MDRP_MIRP.bind(undefined, 1, 1, 1, 1, 3)\n];\n\nexport default Hinting;\n\n/*****************************\n  Mathematical Considerations\n******************************\n\nfv ... refers to freedom vector\npv ... refers to projection vector\nrp ... refers to reference point\np  ... refers to to point being operated on\nd  ... refers to distance\n\nSETRELATIVE:\n============\n\ncase freedom vector == x-axis:\n------------------------------\n\n                        (pv)\n                     .-'\n              rpd .-'\n               .-*\n          d .-'90°'\n         .-'       '\n      .-'           '\n   *-'               ' b\n  rp                  '\n                       '\n                        '\n            p *----------*-------------- (fv)\n                          pm\n\n  rpdx = rpx + d * pv.x\n  rpdy = rpy + d * pv.y\n\n  equation of line b\n\n   y - rpdy = pvns * (x- rpdx)\n\n   y = p.y\n\n   x = rpdx + ( p.y - rpdy ) / pvns\n\n\ncase freedom vector == y-axis:\n------------------------------\n\n    * pm\n    |\\\n    | \\\n    |  \\\n    |   \\\n    |    \\\n    |     \\\n    |      \\\n    |       \\\n    |        \\\n    |         \\ b\n    |          \\\n    |           \\\n    |            \\    .-' (pv)\n    |         90° \\.-'\n    |           .-'* rpd\n    |        .-'\n    *     *-'  d\n    p     rp\n\n  rpdx = rpx + d * pv.x\n  rpdy = rpy + d * pv.y\n\n  equation of line b:\n           pvns ... normal slope to pv\n\n   y - rpdy = pvns * (x - rpdx)\n\n   x = p.x\n\n   y = rpdy +  pvns * (p.x - rpdx)\n\n\n\ngeneric case:\n-------------\n\n\n                              .'(fv)\n                            .'\n                          .* pm\n                        .' !\n                      .'    .\n                    .'      !\n                  .'         . b\n                .'           !\n               *              .\n              p               !\n                         90°   .    ... (pv)\n                           ...-*-'''\n                  ...---'''    rpd\n         ...---'''   d\n   *--'''\n  rp\n\n    rpdx = rpx + d * pv.x\n    rpdy = rpy + d * pv.y\n\n equation of line b:\n    pvns... normal slope to pv\n\n    y - rpdy = pvns * (x - rpdx)\n\n equation of freedom vector line:\n    fvs ... slope of freedom vector (=fy/fx)\n\n    y - py = fvs * (x - px)\n\n\n  on pm both equations are true for same x/y\n\n    y - rpdy = pvns * (x - rpdx)\n\n    y - py = fvs * (x - px)\n\n  form to y and set equal:\n\n    pvns * (x - rpdx) + rpdy = fvs * (x - px) + py\n\n  expand:\n\n    pvns * x - pvns * rpdx + rpdy = fvs * x - fvs * px + py\n\n  switch:\n\n    fvs * x - fvs * px + py = pvns * x - pvns * rpdx + rpdy\n\n  solve for x:\n\n    fvs * x - pvns * x = fvs * px - pvns * rpdx - py + rpdy\n\n\n\n          fvs * px - pvns * rpdx + rpdy - py\n    x =  -----------------------------------\n                 fvs - pvns\n\n  and:\n\n    y = fvs * (x - px) + py\n\n\n\nINTERPOLATE:\n============\n\nExamples of point interpolation.\n\nThe weight of the movement of the reference point gets bigger\nthe further the other reference point is away, thus the safest\noption (that is avoiding 0/0 divisions) is to weight the\noriginal distance of the other point by the sum of both distances.\n\nIf the sum of both distances is 0, then move the point by the\narithmetic average of the movement of both reference points.\n\n\n\n\n           (+6)\n    rp1o *---->*rp1\n         .     .                          (+12)\n         .     .                  rp2o *---------->* rp2\n         .     .                       .           .\n         .     .                       .           .\n         .    10          20           .           .\n         |.........|...................|           .\n               .   .                               .\n               .   . (+8)                          .\n                po *------>*p                      .\n               .           .                       .\n               .    12     .          24           .\n               |...........|.......................|\n                                  36\n\n\n-------\n\n\n\n           (+10)\n    rp1o *-------->*rp1\n         .         .                      (-10)\n         .         .              rp2 *<---------* rpo2\n         .         .                   .         .\n         .         .                   .         .\n         .    10   .          30       .         .\n         |.........|.............................|\n                   .                   .\n                   . (+5)              .\n                po *--->* p            .\n                   .    .              .\n                   .    .   20         .\n                   |....|..............|\n                     5        15\n\n\n-------\n\n\n           (+10)\n    rp1o *-------->*rp1\n         .         .\n         .         .\n    rp2o *-------->*rp2\n\n\n                               (+10)\n                          po *-------->* p\n\n-------\n\n\n           (+10)\n    rp1o *-------->*rp1\n         .         .\n         .         .(+30)\n    rp2o *---------------------------->*rp2\n\n\n                                        (+25)\n                          po *----------------------->* p\n\n\n\nvim: set ts=4 sw=4 expandtab:\n*****/\n", "/**\n * Converts a string into a list of tokens.\n */\n\n/**\n * Create a new token\n * @param {string} char a single char\n */\nfunction Token(char) {\n    this.char = char;\n    this.state = {};\n    this.activeState = null;\n}\n\n/**\n * Create a new context range\n * @param {number} startIndex range start index\n * @param {number} endOffset range end index offset\n * @param {string} contextName owner context name\n */\nfunction ContextRange(startIndex, endOffset, contextName) {\n    this.contextName = contextName;\n    this.startIndex = startIndex;\n    this.endOffset = endOffset;\n}\n\n/**\n * Check context start and end\n * @param {string} contextName a unique context name\n * @param {function} checkStart a predicate function the indicates a context's start\n * @param {function} checkEnd a predicate function the indicates a context's end\n */\nfunction ContextChecker(contextName, checkStart, checkEnd) {\n    this.contextName = contextName;\n    this.openRange = null;\n    this.ranges = [];\n    this.checkStart = checkStart;\n    this.checkEnd = checkEnd;\n}\n\n/**\n * @typedef ContextParams\n * @type Object\n * @property {array} context context items\n * @property {number} currentIndex current item index\n */\n\n/**\n * Create a context params\n * @param {array} context a list of items\n * @param {number} currentIndex current item index\n */\nfunction ContextParams(context, currentIndex) {\n    this.context = context;\n    this.index = currentIndex;\n    this.length = context.length;\n    this.current = context[currentIndex];\n    this.backtrack = context.slice(0, currentIndex);\n    this.lookahead = context.slice(currentIndex + 1);\n}\n\n/**\n * Create an event instance\n * @param {string} eventId event unique id\n */\nfunction Event(eventId) {\n    this.eventId = eventId;\n    this.subscribers = [];\n}\n\n/**\n * Initialize a core events and auto subscribe required event handlers\n * @param {any} events an object that enlists core events handlers\n */\nfunction initializeCoreEvents(events) {\n    const coreEvents = [\n        'start', 'end', 'next', 'newToken', 'contextStart',\n        'contextEnd', 'insertToken', 'removeToken', 'removeRange',\n        'replaceToken', 'replaceRange', 'composeRUD', 'updateContextsRanges'\n    ];\n\n    coreEvents.forEach(eventId => {\n        Object.defineProperty(this.events, eventId, {\n            value: new Event(eventId)\n        });\n    });\n\n    if (!!events) {\n        coreEvents.forEach(eventId => {\n            const event = events[eventId];\n            if (typeof event === 'function') {\n                this.events[eventId].subscribe(event);\n            }\n        });\n    }\n    const requiresContextUpdate = [\n        'insertToken', 'removeToken', 'removeRange',\n        'replaceToken', 'replaceRange', 'composeRUD'\n    ];\n    requiresContextUpdate.forEach(eventId => {\n        this.events[eventId].subscribe(\n            this.updateContextsRanges\n        );\n    });\n}\n\n/**\n * Converts a string into a list of tokens\n * @param {any} events tokenizer core events\n */\nfunction Tokenizer(events) {\n    this.tokens = [];\n    this.registeredContexts = {};\n    this.contextCheckers = [];\n    this.events = {};\n    this.registeredModifiers = [];\n\n    initializeCoreEvents.call(this, events);\n}\n\n/**\n * Sets the state of a token, usually called by a state modifier.\n * @param {string} key state item key\n * @param {any} value state item value\n */\nToken.prototype.setState = function(key, value) {\n    this.state[key] = value;\n    this.activeState = { key, value: this.state[key] };\n    return this.activeState;\n};\n\nToken.prototype.getState = function (stateId) {\n    return this.state[stateId] || null;\n};\n\n/**\n * Checks if an index exists in the tokens list.\n * @param {number} index token index\n */\nTokenizer.prototype.inboundIndex = function(index) {\n    return index >= 0 && index < this.tokens.length;\n};\n\n/**\n * Compose and apply a list of operations (replace, update, delete)\n * @param {array} RUDs replace, update and delete operations\n * TODO: Perf. Optimization (lengthBefore === lengthAfter ? dispatch once)\n */\nTokenizer.prototype.composeRUD = function (RUDs) {\n    const silent = true;\n    const state = RUDs.map(RUD => (\n        this[RUD[0]].apply(this, RUD.slice(1).concat(silent))\n    ));\n    const hasFAILObject = obj => (\n        typeof obj === 'object' &&\n        obj.hasOwnProperty('FAIL')\n    );\n    if (state.every(hasFAILObject)) {\n        return {\n            FAIL: `composeRUD: one or more operations hasn't completed successfully`,\n            report: state.filter(hasFAILObject)\n        };\n    }\n    this.dispatch('composeRUD', [state.filter(op => !hasFAILObject(op))]);\n};\n\n/**\n * Replace a range of tokens with a list of tokens\n * @param {number} startIndex range start index\n * @param {number} offset range offset\n * @param {token} tokens a list of tokens to replace\n * @param {boolean} silent dispatch events and update context ranges\n */\nTokenizer.prototype.replaceRange = function (startIndex, offset, tokens, silent) {\n    offset = offset !== null ? offset : this.tokens.length;\n    const isTokenType = tokens.every(token => token instanceof Token);\n    if (!isNaN(startIndex) && this.inboundIndex(startIndex) && isTokenType) {\n        const replaced = this.tokens.splice.apply(\n            this.tokens, [startIndex, offset].concat(tokens)\n        );\n        if (!silent) this.dispatch('replaceToken', [startIndex, offset, tokens]);\n        return [replaced, tokens];\n    } else {\n        return { FAIL: 'replaceRange: invalid tokens or startIndex.' };\n    }\n};\n\n/**\n * Replace a token with another token\n * @param {number} index token index\n * @param {token} token a token to replace\n * @param {boolean} silent dispatch events and update context ranges\n */\nTokenizer.prototype.replaceToken = function (index, token, silent) {\n    if (!isNaN(index) && this.inboundIndex(index) && token instanceof Token) {\n        const replaced = this.tokens.splice(index, 1, token);\n        if (!silent) this.dispatch('replaceToken', [index, token]);\n        return [replaced[0], token];\n    } else {\n        return { FAIL: 'replaceToken: invalid token or index.' };\n    }\n};\n\n/**\n * Removes a range of tokens\n * @param {number} startIndex range start index\n * @param {number} offset range offset\n * @param {boolean} silent dispatch events and update context ranges\n */\nTokenizer.prototype.removeRange = function(startIndex, offset, silent) {\n    offset = !isNaN(offset) ? offset : this.tokens.length;\n    const tokens = this.tokens.splice(startIndex, offset);\n    if (!silent) this.dispatch('removeRange', [tokens, startIndex, offset]);\n    return tokens;\n};\n\n/**\n * Remove a token at a certain index\n * @param {number} index token index\n * @param {boolean} silent dispatch events and update context ranges\n */\nTokenizer.prototype.removeToken = function(index, silent) {\n    if (!isNaN(index) && this.inboundIndex(index)) {\n        const token = this.tokens.splice(index, 1);\n        if (!silent) this.dispatch('removeToken', [token, index]);\n        return token;\n    } else {\n        return { FAIL: 'removeToken: invalid token index.' };\n    }\n};\n\n/**\n * Insert a list of tokens at a certain index\n * @param {array} tokens a list of tokens to insert\n * @param {number} index insert the list of tokens at index\n * @param {boolean} silent dispatch events and update context ranges\n */\nTokenizer.prototype.insertToken = function (tokens, index, silent) {\n    const tokenType = tokens.every(\n        token => token instanceof Token\n    );\n    if (tokenType) {\n        this.tokens.splice.apply(\n            this.tokens, [index, 0].concat(tokens)\n        );\n        if (!silent) this.dispatch('insertToken', [tokens, index]);\n        return tokens;\n    } else {\n        return { FAIL: 'insertToken: invalid token(s).' };\n    }\n};\n\n/**\n * A state modifier that is called on 'newToken' event\n * @param {string} modifierId state modifier id\n * @param {function} condition a predicate function that returns true or false\n * @param {function} modifier a function to update token state\n */\nTokenizer.prototype.registerModifier = function(modifierId, condition, modifier) {\n    this.events.newToken.subscribe(function(token, contextParams) {\n        const conditionParams = [token, contextParams];\n        const canApplyModifier = (\n            condition === null ||\n            condition.apply(this, conditionParams) === true\n        );\n        const modifierParams = [token, contextParams];\n        if (canApplyModifier) {\n            let newStateValue = modifier.apply(this, modifierParams);\n            token.setState(modifierId, newStateValue);\n        }\n    });\n    this.registeredModifiers.push(modifierId);\n};\n\n/**\n * Subscribe a handler to an event\n * @param {function} eventHandler an event handler function\n */\nEvent.prototype.subscribe = function (eventHandler) {\n    if (typeof eventHandler === 'function') {\n        return ((this.subscribers.push(eventHandler)) - 1);\n    } else {\n        return { FAIL: `invalid '${this.eventId}' event handler`};\n    }\n};\n\n/**\n * Unsubscribe an event handler\n * @param {string} subsId subscription id\n */\nEvent.prototype.unsubscribe = function (subsId) {\n    this.subscribers.splice(subsId, 1);\n};\n\n/**\n * Sets context params current value index\n * @param {number} index context params current value index\n */\nContextParams.prototype.setCurrentIndex = function(index) {\n    this.index = index;\n    this.current = this.context[index];\n    this.backtrack = this.context.slice(0, index);\n    this.lookahead = this.context.slice(index + 1);\n};\n\n/**\n * Get an item at an offset from the current value\n * example (current value is 3):\n *  1    2   [3]   4    5   |   items values\n * -2   -1    0    1    2   |   offset values\n * @param {number} offset an offset from current value index\n */\nContextParams.prototype.get = function (offset) {\n    switch (true) {\n        case (offset === 0):\n            return this.current;\n        case (offset < 0 && Math.abs(offset) <= this.backtrack.length):\n            return this.backtrack.slice(offset)[0];\n        case (offset > 0 && offset <= this.lookahead.length):\n            return this.lookahead[offset - 1];\n        default:\n            return null;\n    }\n};\n\n/**\n * Converts a context range into a string value\n * @param {contextRange} range a context range\n */\nTokenizer.prototype.rangeToText = function (range) {\n    if (range instanceof ContextRange) {\n        return (\n            this.getRangeTokens(range)\n                .map(token => token.char).join('')\n        );\n    }\n};\n\n/**\n * Converts all tokens into a string\n */\nTokenizer.prototype.getText = function () {\n    return this.tokens.map(token => token.char).join('');\n};\n\n/**\n * Get a context by name\n * @param {string} contextName context name to get\n */\nTokenizer.prototype.getContext = function (contextName) {\n    let context = this.registeredContexts[contextName];\n    return !!context ? context : null;\n};\n\n/**\n * Subscribes a new event handler to an event\n * @param {string} eventName event name to subscribe to\n * @param {function} eventHandler a function to be invoked on event\n */\nTokenizer.prototype.on = function(eventName, eventHandler) {\n    const event = this.events[eventName];\n    if (!!event) {\n        return event.subscribe(eventHandler);\n    } else {\n        return null;\n    }\n};\n\n/**\n * Dispatches an event\n * @param {string} eventName event name\n * @param {any} args event handler arguments\n */\nTokenizer.prototype.dispatch = function(eventName, args) {\n    const event = this.events[eventName];\n    if (event instanceof Event) {\n        event.subscribers.forEach(subscriber => {\n            subscriber.apply(this, args || []);\n        });\n    }\n};\n\n/**\n * Register a new context checker\n * @param {string} contextName a unique context name\n * @param {function} contextStartCheck a predicate function that returns true on context start\n * @param {function} contextEndCheck  a predicate function that returns true on context end\n * TODO: call tokenize on registration to update context ranges with the new context.\n */\nTokenizer.prototype.registerContextChecker = function(contextName, contextStartCheck, contextEndCheck) {\n    if (!!this.getContext(contextName)) return {\n        FAIL:\n        `context name '${contextName}' is already registered.`\n    };\n    if (typeof contextStartCheck !== 'function') return {\n        FAIL:\n        `missing context start check.`\n    };\n    if (typeof contextEndCheck !== 'function') return {\n        FAIL:\n        `missing context end check.`\n    };\n    const contextCheckers = new ContextChecker(\n        contextName, contextStartCheck, contextEndCheck\n    );\n    this.registeredContexts[contextName] = contextCheckers;\n    this.contextCheckers.push(contextCheckers);\n    return contextCheckers;\n};\n\n/**\n * Gets a context range tokens\n * @param {contextRange} range a context range\n */\nTokenizer.prototype.getRangeTokens = function(range) {\n    const endIndex = range.startIndex + range.endOffset;\n    return [].concat(\n        this.tokens\n            .slice(range.startIndex, endIndex)\n    );\n};\n\n/**\n * Gets the ranges of a context\n * @param {string} contextName context name\n */\nTokenizer.prototype.getContextRanges = function(contextName) {\n    const context = this.getContext(contextName);\n    if (!!context) {\n        return context.ranges;\n    } else {\n        return { FAIL: `context checker '${contextName}' is not registered.` };\n    }\n};\n\n/**\n * Resets context ranges to run context update\n */\nTokenizer.prototype.resetContextsRanges = function () {\n    const registeredContexts = this.registeredContexts;\n    for (const contextName in registeredContexts) {\n        if (registeredContexts.hasOwnProperty(contextName)) {\n            const context = registeredContexts[contextName];\n            context.ranges = [];\n        }\n    }\n};\n\n/**\n * Updates context ranges\n */\nTokenizer.prototype.updateContextsRanges = function () {\n    this.resetContextsRanges();\n    const chars = this.tokens.map(token => token.char);\n    for (let i = 0; i < chars.length; i++) {\n        const contextParams = new ContextParams(chars, i);\n        this.runContextCheck(contextParams);\n    }\n    this.dispatch('updateContextsRanges', [this.registeredContexts]);\n};\n\n/**\n * Sets the end offset of an open range\n * @param {number} offset range end offset\n * @param {string} contextName context name\n */\nTokenizer.prototype.setEndOffset = function (offset, contextName) {\n    const startIndex = this.getContext(contextName).openRange.startIndex;\n    let range = new ContextRange(startIndex, offset, contextName);\n    const ranges = this.getContext(contextName).ranges;\n    range.rangeId = `${contextName}.${ranges.length}`;\n    ranges.push(range);\n    this.getContext(contextName).openRange = null;\n    return range;\n};\n\n/**\n * Runs a context check on the current context\n * @param {contextParams} contextParams current context params\n */\nTokenizer.prototype.runContextCheck = function(contextParams) {\n    const index = contextParams.index;\n    this.contextCheckers.forEach(contextChecker => {\n        let contextName = contextChecker.contextName;\n        let openRange = this.getContext(contextName).openRange;\n        if (!openRange && contextChecker.checkStart(contextParams)) {\n            openRange = new ContextRange(index, null, contextName);\n            this.getContext(contextName).openRange = openRange;\n            this.dispatch('contextStart', [contextName, index]);\n        }\n        if (!!openRange && contextChecker.checkEnd(contextParams)) {\n            const offset = (index - openRange.startIndex) + 1;\n            const range = this.setEndOffset(offset, contextName);\n            this.dispatch('contextEnd', [contextName, range]);\n        }\n    });\n};\n\n/**\n * Converts a text into a list of tokens\n * @param {string} text a text to tokenize\n */\nTokenizer.prototype.tokenize = function (text) {\n    this.tokens = [];\n    this.resetContextsRanges();\n    let chars = Array.from(text);\n    this.dispatch('start');\n    for (let i = 0; i < chars.length; i++) {\n        const char = chars[i];\n        const contextParams = new ContextParams(chars, i);\n        this.dispatch('next', [contextParams]);\n        this.runContextCheck(contextParams);\n        let token = new Token(char);\n        this.tokens.push(token);\n        this.dispatch('newToken', [token, contextParams]);\n    }\n    this.dispatch('end', [this.tokens]);\n    return this.tokens;\n};\n\nexport default Tokenizer;\nexport { Token, Event, ContextRange, ContextParams };\n", "// ╭─┄┄┄────────────────────────┄─────────────────────────────────────────────╮\n// ┊ Character Class Assertions ┊ Checks if a char belongs to a certain class ┊\n// ╰─╾──────────────────────────┄─────────────────────────────────────────────╯\n// jscs:disable maximumLineLength\n/**\n * Check if a char is Arabic\n * @param {string} c a single char\n */\nexport function isArabicChar(c) {\n    return /[\\u0600-\\u065F\\u066A-\\u06D2\\u06FA-\\u06FF]/.test(c);\n}\n\n/**\n * Check if a char is an isolated arabic char\n * @param {string} c a single char\n */\nexport function isIsolatedArabicChar(char) {\n    return /[\\u0630\\u0690\\u0621\\u0631\\u0661\\u0671\\u0622\\u0632\\u0672\\u0692\\u06C2\\u0623\\u0673\\u0693\\u06C3\\u0624\\u0694\\u06C4\\u0625\\u0675\\u0695\\u06C5\\u06E5\\u0676\\u0696\\u06C6\\u0627\\u0677\\u0697\\u06C7\\u0648\\u0688\\u0698\\u06C8\\u0689\\u0699\\u06C9\\u068A\\u06CA\\u066B\\u068B\\u06CB\\u068C\\u068D\\u06CD\\u06FD\\u068E\\u06EE\\u06FE\\u062F\\u068F\\u06CF\\u06EF]/.test(char);\n}\n\n/**\n * Check if a char is an Arabic Tashkeel char\n * @param {string} c a single char\n */\nexport function isTashkeelArabicChar(char) {\n    return /[\\u0600-\\u0605\\u060C-\\u060E\\u0610-\\u061B\\u061E\\u064B-\\u065F\\u0670\\u06D6-\\u06DC\\u06DF-\\u06E4\\u06E7\\u06E8\\u06EA-\\u06ED]/.test(char);\n}\n\n/**\n * Check if a char is Latin\n * @param {string} c a single char\n */\nexport function isLatinChar(c) {\n    return /[A-z]/.test(c);\n}\n\n/**\n * Check if a char is whitespace char\n * @param {string} c a single char\n */\nexport function isWhiteSpace(c) {\n    return /\\s/.test(c);\n}\n", "/**\n * Query a feature by some of it's properties to lookup a glyph substitution.\n */\n\nimport { ContextParams } from '../tokenizer';\nimport { isTashkeelArabicChar } from '../char';\n\n/**\n * Create feature query instance\n * @param {Font} font opentype font instance\n */\nfunction FeatureQuery(font) {\n    this.font = font;\n    this.features = {};\n}\n\n/**\n * @typedef SubstitutionAction\n * @type Object\n * @property {number} id substitution type\n * @property {string} tag feature tag\n * @property {any} substitution substitution value(s)\n */\n\n/**\n * Create a substitution action instance\n * @param {SubstitutionAction} action\n */\nfunction SubstitutionAction(action) {\n    this.id = action.id;\n    this.tag = action.tag;\n    this.substitution = action.substitution;\n}\n\n/**\n * Lookup a coverage table\n * @param {number} glyphIndex glyph index\n * @param {CoverageTable} coverage coverage table\n */\nfunction lookupCoverage(glyphIndex, coverage) {\n    if (!glyphIndex) return -1;\n    switch (coverage.format) {\n        case 1:\n            return coverage.glyphs.indexOf(glyphIndex);\n\n        case 2:\n            let ranges = coverage.ranges;\n            for (let i = 0; i < ranges.length; i++) {\n                const range = ranges[i];\n                if (glyphIndex >= range.start && glyphIndex <= range.end) {\n                    let offset = glyphIndex - range.start;\n                    return range.index + offset;\n                }\n            }\n            break;\n        default:\n            return -1; // not found\n    }\n    return -1;\n}\n\n/**\n * Handle a single substitution - format 1\n * @param {ContextParams} contextParams context params to lookup\n */\nfunction singleSubstitutionFormat1(glyphIndex, subtable) {\n    let substituteIndex = lookupCoverage(glyphIndex, subtable.coverage);\n    if (substituteIndex === -1) return null;\n    return glyphIndex + subtable.deltaGlyphId;\n}\n\n/**\n * Handle a single substitution - format 2\n * @param {ContextParams} contextParams context params to lookup\n */\nfunction singleSubstitutionFormat2(glyphIndex, subtable) {\n    let substituteIndex = lookupCoverage(glyphIndex, subtable.coverage);\n    if (substituteIndex === -1) return null;\n    return subtable.substitute[substituteIndex];\n}\n\n/**\n * Lookup a list of coverage tables\n * @param {any} coverageList a list of coverage tables\n * @param {ContextParams} contextParams context params to lookup\n */\nfunction lookupCoverageList(coverageList, contextParams) {\n    let lookupList = [];\n    for (let i = 0; i < coverageList.length; i++) {\n        const coverage = coverageList[i];\n        let glyphIndex = contextParams.current;\n        glyphIndex = Array.isArray(glyphIndex) ? glyphIndex[0] : glyphIndex;\n        const lookupIndex = lookupCoverage(glyphIndex, coverage);\n        if (lookupIndex !== -1) {\n            lookupList.push(lookupIndex);\n        }\n    }\n    if (lookupList.length !== coverageList.length) return -1;\n    return lookupList;\n}\n\n/**\n * Handle chaining context substitution - format 3\n * @param {ContextParams} contextParams context params to lookup\n */\nfunction chainingSubstitutionFormat3(contextParams, subtable) {\n    const lookupsCount = (\n        subtable.inputCoverage.length +\n        subtable.lookaheadCoverage.length +\n        subtable.backtrackCoverage.length\n    );\n    if (contextParams.context.length < lookupsCount) return [];\n    // INPUT LOOKUP //\n    let inputLookups = lookupCoverageList(\n        subtable.inputCoverage, contextParams\n    );\n    if (inputLookups === -1) return [];\n    // LOOKAHEAD LOOKUP //\n    const lookaheadOffset = subtable.inputCoverage.length - 1;\n    if (contextParams.lookahead.length < subtable.lookaheadCoverage.length) return [];\n    let lookaheadContext = contextParams.lookahead.slice(lookaheadOffset);\n    while (lookaheadContext.length && isTashkeelArabicChar(lookaheadContext[0].char)) {\n        lookaheadContext.shift();\n    }\n    const lookaheadParams = new ContextParams(lookaheadContext, 0);\n    let lookaheadLookups = lookupCoverageList(\n        subtable.lookaheadCoverage, lookaheadParams\n    );\n    // BACKTRACK LOOKUP //\n    let backtrackContext = [].concat(contextParams.backtrack);\n    backtrackContext.reverse();\n    while (backtrackContext.length && isTashkeelArabicChar(backtrackContext[0].char)) {\n        backtrackContext.shift();\n    }\n    if (backtrackContext.length < subtable.backtrackCoverage.length) return [];\n    const backtrackParams = new ContextParams(backtrackContext, 0);\n    let backtrackLookups = lookupCoverageList(\n        subtable.backtrackCoverage, backtrackParams\n    );\n    const contextRulesMatch = (\n        inputLookups.length === subtable.inputCoverage.length &&\n        lookaheadLookups.length === subtable.lookaheadCoverage.length &&\n        backtrackLookups.length === subtable.backtrackCoverage.length\n    );\n    let substitutions = [];\n    if (contextRulesMatch) {\n        for (let i = 0; i < subtable.lookupRecords.length; i++) {\n            const lookupRecord = subtable.lookupRecords[i];\n            const lookupListIndex = lookupRecord.lookupListIndex;\n            const lookupTable = this.getLookupByIndex(lookupListIndex);\n            for (let s = 0; s < lookupTable.subtables.length; s++) {\n                const subtable = lookupTable.subtables[s];\n                const lookup = this.getLookupMethod(lookupTable, subtable);\n                const substitutionType = this.getSubstitutionType(lookupTable, subtable);\n                if (substitutionType === '12') {\n                    for (let n = 0; n < inputLookups.length; n++) {\n                        const glyphIndex = contextParams.get(n);\n                        const substitution = lookup(glyphIndex);\n                        if (substitution) substitutions.push(substitution);\n                    }\n                }\n            }\n        }\n    }\n    return substitutions;\n}\n\n/**\n * Handle ligature substitution - format 1\n * @param {ContextParams} contextParams context params to lookup\n */\nfunction ligatureSubstitutionFormat1(contextParams, subtable) {\n    // COVERAGE LOOKUP //\n    let glyphIndex = contextParams.current;\n    let ligSetIndex = lookupCoverage(glyphIndex, subtable.coverage);\n    if (ligSetIndex === -1) return null;\n    // COMPONENTS LOOKUP\n    // (!) note, components are ordered in the written direction.\n    let ligature;\n    let ligatureSet = subtable.ligatureSets[ligSetIndex];\n    for (let s = 0; s < ligatureSet.length; s++) {\n        ligature = ligatureSet[s];\n        for (let l = 0; l < ligature.components.length; l++) {\n            const lookaheadItem = contextParams.lookahead[l];\n            const component = ligature.components[l];\n            if (lookaheadItem !== component) break;\n            if (l === ligature.components.length - 1) return ligature;\n        }\n    }\n    return null;\n}\n\n/**\n * Handle decomposition substitution - format 1\n * @param {number} glyphIndex glyph index\n * @param {any} subtable subtable\n */\nfunction decompositionSubstitutionFormat1(glyphIndex, subtable) {\n    let substituteIndex = lookupCoverage(glyphIndex, subtable.coverage);\n    if (substituteIndex === -1) return null;\n    return subtable.sequences[substituteIndex];\n}\n\n/**\n * Get default script features indexes\n */\nFeatureQuery.prototype.getDefaultScriptFeaturesIndexes = function () {\n    const scripts = this.font.tables.gsub.scripts;\n    for (let s = 0; s < scripts.length; s++) {\n        const script = scripts[s];\n        if (script.tag === 'DFLT') return (\n            script.script.defaultLangSys.featureIndexes\n        );\n    }\n    return [];\n};\n\n/**\n * Get feature indexes of a specific script\n * @param {string} scriptTag script tag\n */\nFeatureQuery.prototype.getScriptFeaturesIndexes = function(scriptTag) {\n    const tables = this.font.tables;\n    if (!tables.gsub) return [];\n    if (!scriptTag) return this.getDefaultScriptFeaturesIndexes();\n    const scripts = this.font.tables.gsub.scripts;\n    for (let i = 0; i < scripts.length; i++) {\n        const script = scripts[i];\n        if (script.tag === scriptTag && script.script.defaultLangSys) {\n            return script.script.defaultLangSys.featureIndexes;\n        } else {\n            let langSysRecords = script.langSysRecords;\n            if (!!langSysRecords) {\n                for (let j = 0; j < langSysRecords.length; j++) {\n                    const langSysRecord = langSysRecords[j];\n                    if (langSysRecord.tag === scriptTag) {\n                        let langSys = langSysRecord.langSys;\n                        return langSys.featureIndexes;\n                    }\n                }\n            }\n        }\n    }\n    return this.getDefaultScriptFeaturesIndexes();\n};\n\n/**\n * Map a feature tag to a gsub feature\n * @param {any} features gsub features\n * @param {string} scriptTag script tag\n */\nFeatureQuery.prototype.mapTagsToFeatures = function (features, scriptTag) {\n    let tags = {};\n    for (let i = 0; i < features.length; i++) {\n        const tag = features[i].tag;\n        const feature = features[i].feature;\n        tags[tag] = feature;\n    }\n    this.features[scriptTag].tags = tags;\n};\n\n/**\n * Get features of a specific script\n * @param {string} scriptTag script tag\n */\nFeatureQuery.prototype.getScriptFeatures = function (scriptTag) {\n    let features = this.features[scriptTag];\n    if (this.features.hasOwnProperty(scriptTag)) return features;\n    const featuresIndexes = this.getScriptFeaturesIndexes(scriptTag);\n    if (!featuresIndexes) return null;\n    const gsub = this.font.tables.gsub;\n    features = featuresIndexes.map(index => gsub.features[index]);\n    this.features[scriptTag] = features;\n    this.mapTagsToFeatures(features, scriptTag);\n    return features;\n};\n\n/**\n * Get substitution type\n * @param {any} lookupTable lookup table\n * @param {any} subtable subtable\n */\nFeatureQuery.prototype.getSubstitutionType = function(lookupTable, subtable) {\n    const lookupType = lookupTable.lookupType.toString();\n    const substFormat = subtable.substFormat.toString();\n    return lookupType + substFormat;\n};\n\n/**\n * Get lookup method\n * @param {any} lookupTable lookup table\n * @param {any} subtable subtable\n */\nFeatureQuery.prototype.getLookupMethod = function(lookupTable, subtable) {\n    let substitutionType = this.getSubstitutionType(lookupTable, subtable);\n    switch (substitutionType) {\n        case '11':\n            return glyphIndex => singleSubstitutionFormat1.apply(\n                this, [glyphIndex, subtable]\n            );\n        case '12':\n            return glyphIndex => singleSubstitutionFormat2.apply(\n                this, [glyphIndex, subtable]\n            );\n        case '63':\n            return contextParams => chainingSubstitutionFormat3.apply(\n                this, [contextParams, subtable]\n            );\n        case '41':\n            return contextParams => ligatureSubstitutionFormat1.apply(\n                this, [contextParams, subtable]\n            );\n        case '21':\n            return glyphIndex => decompositionSubstitutionFormat1.apply(\n                this, [glyphIndex, subtable]\n            );\n        default:\n            throw new Error(\n                `lookupType: ${lookupTable.lookupType} - ` +\n                `substFormat: ${subtable.substFormat} ` +\n                `is not yet supported`\n            );\n    }\n};\n\n/**\n * [ LOOKUP TYPES ]\n * -------------------------------\n * Single                        1;\n * Multiple                      2;\n * Alternate                     3;\n * Ligature                      4;\n * Context                       5;\n * ChainingContext               6;\n * ExtensionSubstitution         7;\n * ReverseChainingContext        8;\n * -------------------------------\n *\n */\n\n/**\n * @typedef FQuery\n * @type Object\n * @param {string} tag feature tag\n * @param {string} script feature script\n * @param {ContextParams} contextParams context params\n */\n\n/**\n * Lookup a feature using a query parameters\n * @param {FQuery} query feature query\n */\nFeatureQuery.prototype.lookupFeature = function (query) {\n    let contextParams = query.contextParams;\n    let currentIndex = contextParams.index;\n    const feature = this.getFeature({\n        tag: query.tag, script: query.script\n    });\n    if (!feature) return new Error(\n        `font '${this.font.names.fullName.en}' ` +\n        `doesn't support feature '${query.tag}' ` +\n        `for script '${query.script}'.`\n    );\n    const lookups = this.getFeatureLookups(feature);\n    const substitutions = [].concat(contextParams.context);\n    for (let l = 0; l < lookups.length; l++) {\n        const lookupTable = lookups[l];\n        const subtables = this.getLookupSubtables(lookupTable);\n        for (let s = 0; s < subtables.length; s++) {\n            const subtable = subtables[s];\n            const substType = this.getSubstitutionType(lookupTable, subtable);\n            const lookup = this.getLookupMethod(lookupTable, subtable);\n            let substitution;\n            switch (substType) {\n                case '11':\n                    substitution = lookup(contextParams.current);\n                    if (substitution) {\n                        substitutions.splice(currentIndex, 1, new SubstitutionAction({\n                            id: 11, tag: query.tag, substitution\n                        }));\n                    }\n                    break;\n                case '12':\n                    substitution = lookup(contextParams.current);\n                    if (substitution) {\n                        substitutions.splice(currentIndex, 1, new SubstitutionAction({\n                            id: 12, tag: query.tag, substitution\n                        }));\n                    }\n                    break;\n                case '63':\n                    substitution = lookup(contextParams);\n                    if (Array.isArray(substitution) && substitution.length) {\n                        substitutions.splice(currentIndex, 1, new SubstitutionAction({\n                            id: 63, tag: query.tag, substitution\n                        }));\n                    }\n                    break;\n                case '41':\n                    substitution = lookup(contextParams);\n                    if (substitution) {\n                        substitutions.splice(currentIndex, 1, new SubstitutionAction({\n                            id: 41, tag: query.tag, substitution\n                        }));\n                    }\n                    break;\n                case '21':\n                    substitution = lookup(contextParams.current);\n                    if (substitution) {\n                        substitutions.splice(currentIndex, 1, new SubstitutionAction({\n                            id: 21, tag: query.tag, substitution\n                        }));\n                    }\n                    break;\n            }\n            contextParams = new ContextParams(substitutions, currentIndex);\n            if (Array.isArray(substitution) && !substitution.length) continue;\n            substitution = null;\n        }\n    }\n    return substitutions.length ? substitutions : null;\n};\n\n/**\n * Checks if a font supports a specific features\n * @param {FQuery} query feature query object\n */\nFeatureQuery.prototype.supports = function (query) {\n    if (!query.script) return false;\n    this.getScriptFeatures(query.script);\n    const supportedScript = this.features.hasOwnProperty(query.script);\n    if (!query.tag) return supportedScript;\n    const supportedFeature = (\n        this.features[query.script].some(feature => feature.tag === query.tag)\n    );\n    return supportedScript && supportedFeature;\n};\n\n/**\n * Get lookup table subtables\n * @param {any} lookupTable lookup table\n */\nFeatureQuery.prototype.getLookupSubtables = function (lookupTable) {\n    return lookupTable.subtables || null;\n};\n\n/**\n * Get lookup table by index\n * @param {number} index lookup table index\n */\nFeatureQuery.prototype.getLookupByIndex = function (index) {\n    const lookups = this.font.tables.gsub.lookups;\n    return lookups[index] || null;\n};\n\n/**\n * Get lookup tables for a feature\n * @param {string} feature\n */\nFeatureQuery.prototype.getFeatureLookups = function (feature) {\n    // TODO: memoize\n    return feature.lookupListIndexes.map(this.getLookupByIndex.bind(this));\n};\n\n/**\n * Query a feature by it's properties\n * @param {any} query an object that describes the properties of a query\n */\nFeatureQuery.prototype.getFeature = function getFeature(query) {\n    if (!this.font) return { FAIL: `No font was found`};\n    if (!this.features.hasOwnProperty(query.script)) {\n        this.getScriptFeatures(query.script);\n    }\n    const scriptFeatures = this.features[query.script];\n    if (!scriptFeatures) return (\n        { FAIL: `No feature for script ${query.script}`}\n    );\n    if (!scriptFeatures.tags[query.tag]) return null;\n    return this.features[query.script].tags[query.tag];\n};\n\nexport default FeatureQuery;\nexport { FeatureQuery, SubstitutionAction };\n", "/**\n * Arabic word context checkers\n */\n\nimport { isArabicChar } from '../../../char';\n\nfunction arabicWordStartCheck(contextParams) {\n    const char = contextParams.current;\n    const prevChar = contextParams.get(-1);\n    return (\n        // ? arabic first char\n        (prevChar === null && isArabicChar(char)) ||\n        // ? arabic char preceded with a non arabic char\n        (!isArabicChar(prevChar) && isArabicChar(char))\n    );\n}\n\nfunction arabicWordEndCheck(contextParams) {\n    const nextChar = contextParams.get(1);\n    return (\n        // ? last arabic char\n        (nextChar === null) ||\n        // ? next char is not arabic\n        (!isArabicChar(nextChar))\n    );\n}\n\nexport default {\n    startCheck: arabicWordStartCheck,\n    endCheck: arabicWordEndCheck\n};\n", "/**\n * Arabic sentence context checkers\n */\n\nimport { isArabicChar, isWhiteSpace, isTashkeelArabicChar } from '../../../char';\n\nfunction arabicSentenceStartCheck(contextParams) {\n    const char = contextParams.current;\n    const prevChar = contextParams.get(-1);\n    return (\n        // ? an arabic char preceded with a non arabic char\n        (isArabicChar(char) || isTashkeelArabicChar(char)) &&\n        !isArabicChar(prevChar)\n    );\n}\n\nfunction arabicSentenceEndCheck(contextParams) {\n    const nextChar = contextParams.get(1);\n    switch (true) {\n        case nextChar === null:\n            return true;\n        case (!isArabicChar(nextChar) && !isTashkeelArabicChar(nextChar)):\n            const nextIsWhitespace = isWhiteSpace(nextChar);\n            if (!nextIsWhitespace) return true;\n            if (nextIsWhitespace) {\n                let arabicCharAhead = false;\n                arabicCharAhead = (\n                    contextParams.lookahead.some(\n                        c => isArabicChar(c) || isTashkeelArabicChar(c)\n                    )\n                );\n                if (!arabicCharAhead) return true;\n            }\n            break;\n        default:\n            return false;\n    }\n}\n\nexport default {\n    startCheck: arabicSentenceStartCheck,\n    endCheck: arabicSentenceEndCheck\n};\n", "import { SubstitutionAction } from './featureQuery';\n\n/**\n * Apply single substitution format 1\n * @param {Array} substitutions substitutions\n * @param {any} tokens a list of tokens\n * @param {number} index token index\n */\nfunction singleSubstitutionFormat1(action, tokens, index) {\n    tokens[index].setState(action.tag, action.substitution);\n}\n\n/**\n * Apply single substitution format 2\n * @param {Array} substitutions substitutions\n * @param {any} tokens a list of tokens\n * @param {number} index token index\n */\nfunction singleSubstitutionFormat2(action, tokens, index) {\n    tokens[index].setState(action.tag, action.substitution);\n}\n\n/**\n * Apply chaining context substitution format 3\n * @param {Array} substitutions substitutions\n * @param {any} tokens a list of tokens\n * @param {number} index token index\n */\nfunction chainingSubstitutionFormat3(action, tokens, index) {\n    action.substitution.forEach((subst, offset) => {\n        const token = tokens[index + offset];\n        token.setState(action.tag, subst);\n    });\n}\n\n/**\n * Apply ligature substitution format 1\n * @param {Array} substitutions substitutions\n * @param {any} tokens a list of tokens\n * @param {number} index token index\n */\nfunction ligatureSubstitutionFormat1(action, tokens, index) {\n    let token = tokens[index];\n    token.setState(action.tag, action.substitution.ligGlyph);\n    const compsCount = action.substitution.components.length;\n    for (let i = 0; i < compsCount; i++) {\n        token = tokens[index + i + 1];\n        token.setState('deleted', true);\n    }\n}\n\n/**\n * Supported substitutions\n */\nconst SUBSTITUTIONS = {\n    11: singleSubstitutionFormat1,\n    12: singleSubstitutionFormat2,\n    63: chainingSubstitutionFormat3,\n    41: ligatureSubstitutionFormat1\n};\n\n/**\n * Apply substitutions to a list of tokens\n * @param {Array} substitutions substitutions\n * @param {any} tokens a list of tokens\n * @param {number} index token index\n */\nfunction applySubstitution(action, tokens, index) {\n    if (action instanceof SubstitutionAction && SUBSTITUTIONS[action.id]) {\n        SUBSTITUTIONS[action.id](action, tokens, index);\n    }\n}\n\nexport default applySubstitution;\n", "/**\n * Apply Arabic presentation forms to a range of tokens\n */\n\nimport { ContextParams } from '../../tokenizer';\nimport { isIsolatedArabicChar, isTashkeelArabicChar } from '../../char';\nimport { SubstitutionAction } from '../featureQuery';\nimport applySubstitution from '../applySubstitution';\n\n/**\n * Check if a char can be connected to it's preceding char\n * @param {ContextParams} charContextParams context params of a char\n */\nfunction willConnectPrev(charContextParams) {\n    let backtrack = [].concat(charContextParams.backtrack);\n    for (let i = backtrack.length - 1; i >= 0; i--) {\n        const prevChar = backtrack[i];\n        const isolated = isIsolatedArabicChar(prevChar);\n        const tashkeel = isTashkeelArabicChar(prevChar);\n        if (!isolated && !tashkeel) return true;\n        if (isolated) return false;\n    }\n    return false;\n}\n\n/**\n * Check if a char can be connected to it's proceeding char\n * @param {ContextParams} charContextParams context params of a char\n */\nfunction willConnectNext(charContextParams) {\n    if (isIsolatedArabicChar(charContextParams.current)) return false;\n    for (let i = 0; i < charContextParams.lookahead.length; i++) {\n        const nextChar = charContextParams.lookahead[i];\n        const tashkeel = isTashkeelArabicChar(nextChar);\n        if (!tashkeel) return true;\n    }\n    return false;\n}\n\n/**\n * Apply arabic presentation forms to a list of tokens\n * @param {ContextRange} range a range of tokens\n */\nfunction arabicPresentationForms(range) {\n    const script = 'arab';\n    const tags = this.featuresTags[script];\n    const tokens = this.tokenizer.getRangeTokens(range);\n    if (tokens.length === 1) return;\n    let contextParams = new ContextParams(\n        tokens.map(token => token.getState('glyphIndex')\n    ), 0);\n    const charContextParams = new ContextParams(\n        tokens.map(token => token.char\n    ), 0);\n    tokens.forEach((token, index) => {\n        if (isTashkeelArabicChar(token.char)) return;\n        contextParams.setCurrentIndex(index);\n        charContextParams.setCurrentIndex(index);\n        let CONNECT = 0; // 2 bits 00 (10: can connect next) (01: can connect prev)\n        if (willConnectPrev(charContextParams)) CONNECT |= 1;\n        if (willConnectNext(charContextParams)) CONNECT |= 2;\n        let tag;\n        switch (CONNECT) {\n            case 1: (tag = 'fina'); break;\n            case 2: (tag = 'init'); break;\n            case 3: (tag = 'medi'); break;\n        }\n        if (tags.indexOf(tag) === -1) return;\n        let substitutions = this.query.lookupFeature({\n            tag, script, contextParams\n        });\n        if (substitutions instanceof Error) return console.info(substitutions.message);\n        substitutions.forEach((action, index) => {\n            if (action instanceof SubstitutionAction) {\n                applySubstitution(action, tokens, index);\n                contextParams.context[index] = action.substitution;\n            }\n        });\n    });\n}\n\nexport default arabicPresentationForms;\nexport { arabicPresentationForms };\n", "/**\n * Apply Arabic required ligatures feature to a range of tokens\n */\n\nimport { ContextParams } from '../../tokenizer';\nimport applySubstitution from '../applySubstitution';\n\n/**\n * Update context params\n * @param {any} tokens a list of tokens\n * @param {number} index current item index\n */\nfunction getContextParams(tokens, index) {\n    const context = tokens.map(token => token.activeState.value);\n    return new ContextParams(context, index || 0);\n}\n\n/**\n * Apply Arabic required ligatures to a context range\n * @param {ContextRange} range a range of tokens\n */\nfunction arabicRequiredLigatures(range) {\n    const script = 'arab';\n    let tokens = this.tokenizer.getRangeTokens(range);\n    let contextParams = getContextParams(tokens);\n    contextParams.context.forEach((glyphIndex, index) => {\n        contextParams.setCurrentIndex(index);\n        let substitutions = this.query.lookupFeature({\n            tag: 'rlig', script, contextParams\n        });\n        if (substitutions.length) {\n            substitutions.forEach(\n                action => applySubstitution(action, tokens, index)\n            );\n            contextParams = getContextParams(tokens);\n        }\n    });\n}\n\nexport default arabicRequiredLigatures;\nexport { arabicRequiredLigatures };\n", "/**\n * Latin word context checkers\n */\n\nimport { isLatinChar } from '../../../char';\n\nfunction latinWordStartCheck(contextParams) {\n    const char = contextParams.current;\n    const prevChar = contextParams.get(-1);\n    return (\n        // ? latin first char\n        (prevChar === null && isLatinChar(char)) ||\n        // ? latin char preceded with a non latin char\n        (!isLatinChar(prevChar) && isLatinChar(char))\n    );\n}\n\nfunction latinWordEndCheck(contextParams) {\n    const nextChar = contextParams.get(1);\n    return (\n        // ? last latin char\n        (nextChar === null) ||\n        // ? next char is not latin\n        (!isLatinChar(nextChar))\n    );\n}\n\nexport default {\n    startCheck: latinWordStartCheck,\n    endCheck: latinWordEndCheck\n};\n", "/**\n * Apply Latin ligature feature to a range of tokens\n */\n\nimport { ContextParams } from '../../tokenizer';\nimport applySubstitution from '../applySubstitution';\n\n/**\n * Update context params\n * @param {any} tokens a list of tokens\n * @param {number} index current item index\n */\nfunction getContextParams(tokens, index) {\n    const context = tokens.map(token => token.activeState.value);\n    return new ContextParams(context, index || 0);\n}\n\n/**\n * Apply Arabic required ligatures to a context range\n * @param {ContextRange} range a range of tokens\n */\nfunction latinLigature(range) {\n    const script = 'latn';\n    let tokens = this.tokenizer.getRangeTokens(range);\n    let contextParams = getContextParams(tokens);\n    contextParams.context.forEach((glyphIndex, index) => {\n        contextParams.setCurrentIndex(index);\n        let substitutions = this.query.lookupFeature({\n            tag: 'liga', script, contextParams\n        });\n        if (substitutions.length) {\n            substitutions.forEach(\n                action => applySubstitution(action, tokens, index)\n            );\n            contextParams = getContextParams(tokens);\n        }\n    });\n}\n\nexport default latinLigature;\n", "/**\n * Infer bidirectional properties for a given text and apply\n * the corresponding layout rules.\n */\n\nimport Tokenizer from './tokenizer';\nimport FeatureQuery from './features/featureQuery';\nimport arabicWordCheck from './features/arab/contextCheck/arabicWord';\nimport arabicSentenceCheck from './features/arab/contextCheck/arabicSentence';\nimport arabicPresentationForms from './features/arab/arabicPresentationForms';\nimport arabicRequiredLigatures from './features/arab/arabicRequiredLigatures';\nimport latinWordCheck from './features/latn/contextCheck/latinWord';\nimport latinLigature from './features/latn/latinLigatures';\n\n/**\n * Create Bidi. features\n * @param {string} baseDir text base direction. value either 'ltr' or 'rtl'\n */\nfunction Bidi(baseDir) {\n    this.baseDir = baseDir || 'ltr';\n    this.tokenizer = new Tokenizer();\n    this.featuresTags = {};\n}\n\n/**\n * Sets Bidi text\n * @param {string} text a text input\n */\nBidi.prototype.setText = function (text) {\n    this.text = text;\n};\n\n/**\n * Store essential context checks:\n * arabic word check for applying gsub features\n * arabic sentence check for adjusting arabic layout\n */\nBidi.prototype.contextChecks = ({\n    latinWordCheck,\n    arabicWordCheck,\n    arabicSentenceCheck\n});\n\n/**\n * Register arabic word check\n */\nfunction registerContextChecker(checkId) {\n    const check = this.contextChecks[`${checkId}Check`];\n    return this.tokenizer.registerContextChecker(\n        checkId, check.startCheck, check.endCheck\n    );\n}\n\n/**\n * Perform pre tokenization procedure then\n * tokenize text input\n */\nfunction tokenizeText() {\n    registerContextChecker.call(this, 'latinWord');\n    registerContextChecker.call(this, 'arabicWord');\n    registerContextChecker.call(this, 'arabicSentence');\n    return this.tokenizer.tokenize(this.text);\n}\n\n/**\n * Reverse arabic sentence layout\n * TODO: check base dir before applying adjustments - priority low\n */\nfunction reverseArabicSentences() {\n    const ranges = this.tokenizer.getContextRanges('arabicSentence');\n    ranges.forEach(range => {\n        let rangeTokens = this.tokenizer.getRangeTokens(range);\n        this.tokenizer.replaceRange(\n            range.startIndex,\n            range.endOffset,\n            rangeTokens.reverse()\n        );\n    });\n}\n\n/**\n * Register supported features tags\n * @param {script} script script tag\n * @param {Array} tags features tags list\n */\nBidi.prototype.registerFeatures = function (script, tags) {\n    const supportedTags = tags.filter(\n        tag => this.query.supports({script, tag})\n    );\n    if (!this.featuresTags.hasOwnProperty(script)) {\n        this.featuresTags[script] = supportedTags;\n    } else {\n        this.featuresTags[script] =\n        this.featuresTags[script].concat(supportedTags);\n    }\n};\n\n/**\n * Apply GSUB features\n * @param {Array} tagsList a list of features tags\n * @param {string} script a script tag\n * @param {Font} font opentype font instance\n */\nBidi.prototype.applyFeatures = function (font, features) {\n    if (!font) throw new Error(\n        'No valid font was provided to apply features'\n    );\n    if (!this.query) this.query = new FeatureQuery(font);\n    for (let f = 0; f < features.length; f++) {\n        const feature = features[f];\n        if (!this.query.supports({script: feature.script})) continue;\n        this.registerFeatures(feature.script, feature.tags);\n    }\n};\n\n/**\n * Register a state modifier\n * @param {string} modifierId state modifier id\n * @param {function} condition a predicate function that returns true or false\n * @param {function} modifier a modifier function to set token state\n */\nBidi.prototype.registerModifier = function (modifierId, condition, modifier) {\n    this.tokenizer.registerModifier(modifierId, condition, modifier);\n};\n\n/**\n * Check if 'glyphIndex' is registered\n */\nfunction checkGlyphIndexStatus() {\n    if (this.tokenizer.registeredModifiers.indexOf('glyphIndex') === -1) {\n        throw new Error(\n            'glyphIndex modifier is required to apply ' +\n            'arabic presentation features.'\n        );\n    }\n}\n\n/**\n * Apply arabic presentation forms features\n */\nfunction applyArabicPresentationForms() {\n    const script = 'arab';\n    if (!this.featuresTags.hasOwnProperty(script)) return;\n    checkGlyphIndexStatus.call(this);\n    const ranges = this.tokenizer.getContextRanges('arabicWord');\n    ranges.forEach(range => {\n        arabicPresentationForms.call(this, range);\n    });\n}\n\n/**\n * Apply required arabic ligatures\n */\nfunction applyArabicRequireLigatures() {\n    const script = 'arab';\n    if (!this.featuresTags.hasOwnProperty(script)) return;\n    const tags = this.featuresTags[script];\n    if (tags.indexOf('rlig') === -1) return;\n    checkGlyphIndexStatus.call(this);\n    const ranges = this.tokenizer.getContextRanges('arabicWord');\n    ranges.forEach(range => {\n        arabicRequiredLigatures.call(this, range);\n    });\n}\n\n/**\n * Apply required arabic ligatures\n */\nfunction applyLatinLigatures() {\n    const script = 'latn';\n    if (!this.featuresTags.hasOwnProperty(script)) return;\n    const tags = this.featuresTags[script];\n    if (tags.indexOf('liga') === -1) return;\n    checkGlyphIndexStatus.call(this);\n    const ranges = this.tokenizer.getContextRanges('latinWord');\n    ranges.forEach(range => {\n        latinLigature.call(this, range);\n    });\n}\n\n/**\n * Check if a context is registered\n * @param {string} contextId context id\n */\nBidi.prototype.checkContextReady = function (contextId) {\n    return !!this.tokenizer.getContext(contextId);\n};\n\n/**\n * Apply features to registered contexts\n */\nBidi.prototype.applyFeaturesToContexts = function () {\n    if (this.checkContextReady('arabicWord')) {\n        applyArabicPresentationForms.call(this);\n        applyArabicRequireLigatures.call(this);\n    }\n    if (this.checkContextReady('latinWord')) {\n        applyLatinLigatures.call(this);\n    }\n    if (this.checkContextReady('arabicSentence')) {\n        reverseArabicSentences.call(this);\n    }\n};\n\n/**\n * process text input\n * @param {string} text an input text\n */\nBidi.prototype.processText = function(text) {\n    if (!this.text || this.text !== text) {\n        this.setText(text);\n        tokenizeText.call(this);\n        this.applyFeaturesToContexts();\n    }\n};\n\n/**\n * Process a string of text to identify and adjust\n * bidirectional text entities.\n * @param {string} text input text\n */\nBidi.prototype.getBidiText = function (text) {\n    this.processText(text);\n    return this.tokenizer.getText();\n};\n\n/**\n * Get the current state index of each token\n * @param {text} text an input text\n */\nBidi.prototype.getTextGlyphs = function (text) {\n    this.processText(text);\n    let indexes = [];\n    for (let i = 0; i < this.tokenizer.tokens.length; i++) {\n        const token = this.tokenizer.tokens[i];\n        if (token.state.deleted) continue;\n        const index = token.activeState.value;\n        indexes.push(Array.isArray(index) ? index[0] : index);\n    }\n    return indexes;\n};\n\nexport default Bidi;\n", "// The Font object\n\nimport Path from './path';\nimport sfnt from './tables/sfnt';\nimport { DefaultEncoding } from './encoding';\nimport glyphset from './glyphset';\nimport Position from './position';\nimport Substitution from './substitution';\nimport { isBrowser, checkArgument, arrayBufferToNodeBuffer } from './util';\nimport HintingTrueType from './hintingtt';\nimport Bidi from './bidi';\n\n/**\n * @typedef FontOptions\n * @type Object\n * @property {Boolean} empty - whether to create a new empty font\n * @property {string} familyName\n * @property {string} styleName\n * @property {string=} fullName\n * @property {string=} postScriptName\n * @property {string=} designer\n * @property {string=} designerURL\n * @property {string=} manufacturer\n * @property {string=} manufacturerURL\n * @property {string=} license\n * @property {string=} licenseURL\n * @property {string=} version\n * @property {string=} description\n * @property {string=} copyright\n * @property {string=} trademark\n * @property {Number} unitsPerEm\n * @property {Number} ascender\n * @property {Number} descender\n * @property {Number} createdTimestamp\n * @property {string=} weightClass\n * @property {string=} widthClass\n * @property {string=} fsSelection\n */\n\n/**\n * A Font represents a loaded OpenType font file.\n * It contains a set of glyphs and methods to draw text on a drawing context,\n * or to get a path representing the text.\n * @exports opentype.Font\n * @class\n * @param {FontOptions}\n * @constructor\n */\nfunction Font(options) {\n    options = options || {};\n    options.tables = options.tables || {};\n\n    if (!options.empty) {\n        // Check that we've provided the minimum set of names.\n        checkArgument(options.familyName, 'When creating a new Font object, familyName is required.');\n        checkArgument(options.styleName, 'When creating a new Font object, styleName is required.');\n        checkArgument(options.unitsPerEm, 'When creating a new Font object, unitsPerEm is required.');\n        checkArgument(options.ascender, 'When creating a new Font object, ascender is required.');\n        checkArgument(options.descender <= 0, 'When creating a new Font object, negative descender value is required.');\n\n        // OS X will complain if the names are empty, so we put a single space everywhere by default.\n        this.names = {\n            fontFamily: {en: options.familyName || ' '},\n            fontSubfamily: {en: options.styleName || ' '},\n            fullName: {en: options.fullName || options.familyName + ' ' + options.styleName},\n            // postScriptName may not contain any whitespace\n            postScriptName: {en: options.postScriptName || (options.familyName + options.styleName).replace(/\\s/g, '')},\n            designer: {en: options.designer || ' '},\n            designerURL: {en: options.designerURL || ' '},\n            manufacturer: {en: options.manufacturer || ' '},\n            manufacturerURL: {en: options.manufacturerURL || ' '},\n            license: {en: options.license || ' '},\n            licenseURL: {en: options.licenseURL || ' '},\n            version: {en: options.version || 'Version 0.1'},\n            description: {en: options.description || ' '},\n            copyright: {en: options.copyright || ' '},\n            trademark: {en: options.trademark || ' '}\n        };\n        this.unitsPerEm = options.unitsPerEm || 1000;\n        this.ascender = options.ascender;\n        this.descender = options.descender;\n        this.createdTimestamp = options.createdTimestamp;\n        this.tables = Object.assign(options.tables, {\n            os2: Object.assign({\n                usWeightClass: options.weightClass || this.usWeightClasses.MEDIUM,\n                usWidthClass: options.widthClass || this.usWidthClasses.MEDIUM,\n                fsSelection: options.fsSelection || this.fsSelectionValues.REGULAR,\n            }, options.tables.os2)\n        });\n    }\n\n    this.supported = true; // Deprecated: parseBuffer will throw an error if font is not supported.\n    this.glyphs = new glyphset.GlyphSet(this, options.glyphs || []);\n    this.encoding = new DefaultEncoding(this);\n    this.position = new Position(this);\n    this.substitution = new Substitution(this);\n    this.tables = this.tables || {};\n\n    // needed for low memory mode only.\n    this._push = null;\n    this._hmtxTableData = {};\n\n    Object.defineProperty(this, 'hinting', {\n        get: function() {\n            if (this._hinting) return this._hinting;\n            if (this.outlinesFormat === 'truetype') {\n                return (this._hinting = new HintingTrueType(this));\n            }\n        }\n    });\n}\n\n/**\n * Check if the font has a glyph for the given character.\n * @param  {string}\n * @return {Boolean}\n */\nFont.prototype.hasChar = function(c) {\n    return this.encoding.charToGlyphIndex(c) !== null;\n};\n\n/**\n * Convert the given character to a single glyph index.\n * Note that this function assumes that there is a one-to-one mapping between\n * the given character and a glyph; for complex scripts this might not be the case.\n * @param  {string}\n * @return {Number}\n */\nFont.prototype.charToGlyphIndex = function(s) {\n    return this.encoding.charToGlyphIndex(s);\n};\n\n/**\n * Convert the given character to a single Glyph object.\n * Note that this function assumes that there is a one-to-one mapping between\n * the given character and a glyph; for complex scripts this might not be the case.\n * @param  {string}\n * @return {opentype.Glyph}\n */\nFont.prototype.charToGlyph = function(c) {\n    const glyphIndex = this.charToGlyphIndex(c);\n    let glyph = this.glyphs.get(glyphIndex);\n    if (!glyph) {\n        // .notdef\n        glyph = this.glyphs.get(0);\n    }\n\n    return glyph;\n};\n\n/**\n * Update features\n * @param {any} options features options\n */\nFont.prototype.updateFeatures = function (options) {\n    // TODO: update all features options not only 'latn'.\n    return this.defaultRenderOptions.features.map(feature => {\n        if (feature.script === 'latn') {\n            return {\n                script: 'latn',\n                tags: feature.tags.filter(tag => options[tag])\n            };\n        } else {\n            return feature;\n        }\n    });\n};\n\n/**\n * Convert the given text to a list of Glyph objects.\n * Note that there is no strict one-to-one mapping between characters and\n * glyphs, so the list of returned glyphs can be larger or smaller than the\n * length of the given string.\n * @param  {string}\n * @param  {GlyphRenderOptions} [options]\n * @return {opentype.Glyph[]}\n */\nFont.prototype.stringToGlyphs = function(s, options) {\n\n    const bidi = new Bidi();\n\n    // Create and register 'glyphIndex' state modifier\n    const charToGlyphIndexMod = token => this.charToGlyphIndex(token.char);\n    bidi.registerModifier('glyphIndex', null, charToGlyphIndexMod);\n\n    // roll-back to default features\n    let features = options ?\n    this.updateFeatures(options.features) :\n    this.defaultRenderOptions.features;\n\n    bidi.applyFeatures(this, features);\n\n    const indexes = bidi.getTextGlyphs(s);\n\n    let length = indexes.length;\n\n    // convert glyph indexes to glyph objects\n    const glyphs = new Array(length);\n    const notdef = this.glyphs.get(0);\n    for (let i = 0; i < length; i += 1) {\n        glyphs[i] = this.glyphs.get(indexes[i]) || notdef;\n    }\n    return glyphs;\n};\n\n/**\n * @param  {string}\n * @return {Number}\n */\nFont.prototype.nameToGlyphIndex = function(name) {\n    return this.glyphNames.nameToGlyphIndex(name);\n};\n\n/**\n * @param  {string}\n * @return {opentype.Glyph}\n */\nFont.prototype.nameToGlyph = function(name) {\n    const glyphIndex = this.nameToGlyphIndex(name);\n    let glyph = this.glyphs.get(glyphIndex);\n    if (!glyph) {\n        // .notdef\n        glyph = this.glyphs.get(0);\n    }\n\n    return glyph;\n};\n\n/**\n * @param  {Number}\n * @return {String}\n */\nFont.prototype.glyphIndexToName = function(gid) {\n    if (!this.glyphNames.glyphIndexToName) {\n        return '';\n    }\n\n    return this.glyphNames.glyphIndexToName(gid);\n};\n\n/**\n * Retrieve the value of the kerning pair between the left glyph (or its index)\n * and the right glyph (or its index). If no kerning pair is found, return 0.\n * The kerning value gets added to the advance width when calculating the spacing\n * between glyphs.\n * For GPOS kerning, this method uses the default script and language, which covers\n * most use cases. To have greater control, use font.position.getKerningValue .\n * @param  {opentype.Glyph} leftGlyph\n * @param  {opentype.Glyph} rightGlyph\n * @return {Number}\n */\nFont.prototype.getKerningValue = function(leftGlyph, rightGlyph) {\n    leftGlyph = leftGlyph.index || leftGlyph;\n    rightGlyph = rightGlyph.index || rightGlyph;\n    const gposKerning = this.position.defaultKerningTables;\n    if (gposKerning) {\n        return this.position.getKerningValue(gposKerning, leftGlyph, rightGlyph);\n    }\n    // \"kern\" table\n    return this.kerningPairs[leftGlyph + ',' + rightGlyph] || 0;\n};\n\n/**\n * @typedef GlyphRenderOptions\n * @type Object\n * @property {string} [script] - script used to determine which features to apply. By default, 'DFLT' or 'latn' is used.\n *                               See https://www.microsoft.com/typography/otspec/scripttags.htm\n * @property {string} [language='dflt'] - language system used to determine which features to apply.\n *                                        See https://www.microsoft.com/typography/developers/opentype/languagetags.aspx\n * @property {boolean} [kerning=true] - whether to include kerning values\n * @property {object} [features] - OpenType Layout feature tags. Used to enable or disable the features of the given script/language system.\n *                                 See https://www.microsoft.com/typography/otspec/featuretags.htm\n */\nFont.prototype.defaultRenderOptions = {\n    kerning: true,\n    features: [\n        /**\n         * these 4 features are required to render Arabic text properly\n         * and shouldn't be turned off when rendering arabic text.\n         */\n        { script: 'arab', tags: ['init', 'medi', 'fina', 'rlig'] },\n        { script: 'latn', tags: ['liga', 'rlig'] }\n    ]\n};\n\n/**\n * Helper function that invokes the given callback for each glyph in the given text.\n * The callback gets `(glyph, x, y, fontSize, options)`.* @param  {string} text\n * @param {string} text - The text to apply.\n * @param  {number} [x=0] - Horizontal position of the beginning of the text.\n * @param  {number} [y=0] - Vertical position of the *baseline* of the text.\n * @param  {number} [fontSize=72] - Font size in pixels. We scale the glyph units by `1 / unitsPerEm * fontSize`.\n * @param  {GlyphRenderOptions=} options\n * @param  {Function} callback\n */\nFont.prototype.forEachGlyph = function(text, x, y, fontSize, options, callback) {\n    x = x !== undefined ? x : 0;\n    y = y !== undefined ? y : 0;\n    fontSize = fontSize !== undefined ? fontSize : 72;\n    options = Object.assign({}, this.defaultRenderOptions, options);\n    const fontScale = 1 / this.unitsPerEm * fontSize;\n    const glyphs = this.stringToGlyphs(text, options);\n    let kerningLookups;\n    if (options.kerning) {\n        const script = options.script || this.position.getDefaultScriptName();\n        kerningLookups = this.position.getKerningTables(script, options.language);\n    }\n    for (let i = 0; i < glyphs.length; i += 1) {\n        const glyph = glyphs[i];\n        callback.call(this, glyph, x, y, fontSize, options);\n        if (glyph.advanceWidth) {\n            x += glyph.advanceWidth * fontScale;\n        }\n\n        if (options.kerning && i < glyphs.length - 1) {\n            // We should apply position adjustment lookups in a more generic way.\n            // Here we only use the xAdvance value.\n            const kerningValue = kerningLookups ?\n                  this.position.getKerningValue(kerningLookups, glyph.index, glyphs[i + 1].index) :\n                  this.getKerningValue(glyph, glyphs[i + 1]);\n            x += kerningValue * fontScale;\n        }\n\n        if (options.letterSpacing) {\n            x += options.letterSpacing * fontSize;\n        } else if (options.tracking) {\n            x += (options.tracking / 1000) * fontSize;\n        }\n    }\n    return x;\n};\n\n/**\n * Create a Path object that represents the given text.\n * @param  {string} text - The text to create.\n * @param  {number} [x=0] - Horizontal position of the beginning of the text.\n * @param  {number} [y=0] - Vertical position of the *baseline* of the text.\n * @param  {number} [fontSize=72] - Font size in pixels. We scale the glyph units by `1 / unitsPerEm * fontSize`.\n * @param  {GlyphRenderOptions=} options\n * @return {opentype.Path}\n */\nFont.prototype.getPath = function(text, x, y, fontSize, options) {\n    const fullPath = new Path();\n    this.forEachGlyph(text, x, y, fontSize, options, function(glyph, gX, gY, gFontSize) {\n        const glyphPath = glyph.getPath(gX, gY, gFontSize, options, this);\n        fullPath.extend(glyphPath);\n    });\n    return fullPath;\n};\n\n/**\n * Create an array of Path objects that represent the glyphs of a given text.\n * @param  {string} text - The text to create.\n * @param  {number} [x=0] - Horizontal position of the beginning of the text.\n * @param  {number} [y=0] - Vertical position of the *baseline* of the text.\n * @param  {number} [fontSize=72] - Font size in pixels. We scale the glyph units by `1 / unitsPerEm * fontSize`.\n * @param  {GlyphRenderOptions=} options\n * @return {opentype.Path[]}\n */\nFont.prototype.getPaths = function(text, x, y, fontSize, options) {\n    const glyphPaths = [];\n    this.forEachGlyph(text, x, y, fontSize, options, function(glyph, gX, gY, gFontSize) {\n        const glyphPath = glyph.getPath(gX, gY, gFontSize, options, this);\n        glyphPaths.push(glyphPath);\n    });\n\n    return glyphPaths;\n};\n\n/**\n * Returns the advance width of a text.\n *\n * This is something different than Path.getBoundingBox() as for example a\n * suffixed whitespace increases the advanceWidth but not the bounding box\n * or an overhanging letter like a calligraphic 'f' might have a quite larger\n * bounding box than its advance width.\n *\n * This corresponds to canvas2dContext.measureText(text).width\n *\n * @param  {string} text - The text to create.\n * @param  {number} [fontSize=72] - Font size in pixels. We scale the glyph units by `1 / unitsPerEm * fontSize`.\n * @param  {GlyphRenderOptions=} options\n * @return advance width\n */\nFont.prototype.getAdvanceWidth = function(text, fontSize, options) {\n    return this.forEachGlyph(text, 0, 0, fontSize, options, function() {});\n};\n\n/**\n * Draw the text on the given drawing context.\n * @param  {CanvasRenderingContext2D} ctx - A 2D drawing context, like Canvas.\n * @param  {string} text - The text to create.\n * @param  {number} [x=0] - Horizontal position of the beginning of the text.\n * @param  {number} [y=0] - Vertical position of the *baseline* of the text.\n * @param  {number} [fontSize=72] - Font size in pixels. We scale the glyph units by `1 / unitsPerEm * fontSize`.\n * @param  {GlyphRenderOptions=} options\n */\nFont.prototype.draw = function(ctx, text, x, y, fontSize, options) {\n    this.getPath(text, x, y, fontSize, options).draw(ctx);\n};\n\n/**\n * Draw the points of all glyphs in the text.\n * On-curve points will be drawn in blue, off-curve points will be drawn in red.\n * @param {CanvasRenderingContext2D} ctx - A 2D drawing context, like Canvas.\n * @param {string} text - The text to create.\n * @param {number} [x=0] - Horizontal position of the beginning of the text.\n * @param {number} [y=0] - Vertical position of the *baseline* of the text.\n * @param {number} [fontSize=72] - Font size in pixels. We scale the glyph units by `1 / unitsPerEm * fontSize`.\n * @param {GlyphRenderOptions=} options\n */\nFont.prototype.drawPoints = function(ctx, text, x, y, fontSize, options) {\n    this.forEachGlyph(text, x, y, fontSize, options, function(glyph, gX, gY, gFontSize) {\n        glyph.drawPoints(ctx, gX, gY, gFontSize);\n    });\n};\n\n/**\n * Draw lines indicating important font measurements for all glyphs in the text.\n * Black lines indicate the origin of the coordinate system (point 0,0).\n * Blue lines indicate the glyph bounding box.\n * Green line indicates the advance width of the glyph.\n * @param {CanvasRenderingContext2D} ctx - A 2D drawing context, like Canvas.\n * @param {string} text - The text to create.\n * @param {number} [x=0] - Horizontal position of the beginning of the text.\n * @param {number} [y=0] - Vertical position of the *baseline* of the text.\n * @param {number} [fontSize=72] - Font size in pixels. We scale the glyph units by `1 / unitsPerEm * fontSize`.\n * @param {GlyphRenderOptions=} options\n */\nFont.prototype.drawMetrics = function(ctx, text, x, y, fontSize, options) {\n    this.forEachGlyph(text, x, y, fontSize, options, function(glyph, gX, gY, gFontSize) {\n        glyph.drawMetrics(ctx, gX, gY, gFontSize);\n    });\n};\n\n/**\n * @param  {string}\n * @return {string}\n */\nFont.prototype.getEnglishName = function(name) {\n    const translations = this.names[name];\n    if (translations) {\n        return translations.en;\n    }\n};\n\n/**\n * Validate\n */\nFont.prototype.validate = function() {\n    const warnings = [];\n    const _this = this;\n\n    function assert(predicate, message) {\n        if (!predicate) {\n            warnings.push(message);\n        }\n    }\n\n    function assertNamePresent(name) {\n        const englishName = _this.getEnglishName(name);\n        assert(englishName && englishName.trim().length > 0,\n               'No English ' + name + ' specified.');\n    }\n\n    // Identification information\n    assertNamePresent('fontFamily');\n    assertNamePresent('weightName');\n    assertNamePresent('manufacturer');\n    assertNamePresent('copyright');\n    assertNamePresent('version');\n\n    // Dimension information\n    assert(this.unitsPerEm > 0, 'No unitsPerEm specified.');\n};\n\n/**\n * Convert the font object to a SFNT data structure.\n * This structure contains all the necessary tables and metadata to create a binary OTF file.\n * @return {opentype.Table}\n */\nFont.prototype.toTables = function() {\n    return sfnt.fontToTable(this);\n};\n/**\n * @deprecated Font.toBuffer is deprecated. Use Font.toArrayBuffer instead.\n */\nFont.prototype.toBuffer = function() {\n    console.warn('Font.toBuffer is deprecated. Use Font.toArrayBuffer instead.');\n    return this.toArrayBuffer();\n};\n/**\n * Converts a `opentype.Font` into an `ArrayBuffer`\n * @return {ArrayBuffer}\n */\nFont.prototype.toArrayBuffer = function() {\n    const sfntTable = this.toTables();\n    const bytes = sfntTable.encode();\n    const buffer = new ArrayBuffer(bytes.length);\n    const intArray = new Uint8Array(buffer);\n    for (let i = 0; i < bytes.length; i++) {\n        intArray[i] = bytes[i];\n    }\n\n    return buffer;\n};\n\n/**\n * Initiate a download of the OpenType font.\n */\nFont.prototype.download = function(fileName) {\n    const familyName = this.getEnglishName('fontFamily');\n    const styleName = this.getEnglishName('fontSubfamily');\n    fileName = fileName || familyName.replace(/\\s/g, '') + '-' + styleName + '.otf';\n    const arrayBuffer = this.toArrayBuffer();\n\n    if (isBrowser()) {\n        window.URL = window.URL || window.webkitURL;\n\n        if (window.URL) {\n            const dataView = new DataView(arrayBuffer);\n            const blob = new Blob([dataView], {type: 'font/opentype'});\n\n            let link = document.createElement('a');\n            link.href = window.URL.createObjectURL(blob);\n            link.download = fileName;\n\n            let event = document.createEvent('MouseEvents');\n            event.initEvent('click', true, false);\n            link.dispatchEvent(event);\n        } else {\n            console.warn('Font file could not be downloaded. Try using a different browser.');\n        }\n    } else {\n        const fs = require('fs');\n        const buffer = arrayBufferToNodeBuffer(arrayBuffer);\n        fs.writeFileSync(fileName, buffer);\n    }\n};\n/**\n * @private\n */\nFont.prototype.fsSelectionValues = {\n    ITALIC:              0x001, //1\n    UNDERSCORE:          0x002, //2\n    NEGATIVE:            0x004, //4\n    OUTLINED:            0x008, //8\n    STRIKEOUT:           0x010, //16\n    BOLD:                0x020, //32\n    REGULAR:             0x040, //64\n    USER_TYPO_METRICS:   0x080, //128\n    WWS:                 0x100, //256\n    OBLIQUE:             0x200  //512\n};\n\n/**\n * @private\n */\nFont.prototype.usWidthClasses = {\n    ULTRA_CONDENSED: 1,\n    EXTRA_CONDENSED: 2,\n    CONDENSED: 3,\n    SEMI_CONDENSED: 4,\n    MEDIUM: 5,\n    SEMI_EXPANDED: 6,\n    EXPANDED: 7,\n    EXTRA_EXPANDED: 8,\n    ULTRA_EXPANDED: 9\n};\n\n/**\n * @private\n */\nFont.prototype.usWeightClasses = {\n    THIN: 100,\n    EXTRA_LIGHT: 200,\n    LIGHT: 300,\n    NORMAL: 400,\n    MEDIUM: 500,\n    SEMI_BOLD: 600,\n    BOLD: 700,\n    EXTRA_BOLD: 800,\n    BLACK:    900\n};\n\nexport default Font;\n", "// The `fvar` table stores font variation axes and instances.\n// https://developer.apple.com/fonts/TrueType-Reference-Manual/RM06/Chap6fvar.html\n\nimport check from '../check';\nimport parse from '../parse';\nimport table from '../table';\n\nfunction addName(name, names) {\n    const nameString = JSON.stringify(name);\n    let nameID = 256;\n    for (let nameKey in names) {\n        let n = parseInt(nameKey);\n        if (!n || n < 256) {\n            continue;\n        }\n\n        if (JSON.stringify(names[nameKey]) === nameString) {\n            return n;\n        }\n\n        if (nameID <= n) {\n            nameID = n + 1;\n        }\n    }\n\n    names[nameID] = name;\n    return nameID;\n}\n\nfunction makeFvarAxis(n, axis, names) {\n    const nameID = addName(axis.name, names);\n    return [\n        {name: 'tag_' + n, type: 'TAG', value: axis.tag},\n        {name: 'minValue_' + n, type: 'FIXED', value: axis.minValue << 16},\n        {name: 'defaultValue_' + n, type: 'FIXED', value: axis.defaultValue << 16},\n        {name: 'maxValue_' + n, type: 'FIXED', value: axis.maxValue << 16},\n        {name: 'flags_' + n, type: 'USHORT', value: 0},\n        {name: 'nameID_' + n, type: 'USHORT', value: nameID}\n    ];\n}\n\nfunction parseFvarAxis(data, start, names) {\n    const axis = {};\n    const p = new parse.Parser(data, start);\n    axis.tag = p.parseTag();\n    axis.minValue = p.parseFixed();\n    axis.defaultValue = p.parseFixed();\n    axis.maxValue = p.parseFixed();\n    p.skip('uShort', 1);  // reserved for flags; no values defined\n    axis.name = names[p.parseUShort()] || {};\n    return axis;\n}\n\nfunction makeFvarInstance(n, inst, axes, names) {\n    const nameID = addName(inst.name, names);\n    const fields = [\n        {name: 'nameID_' + n, type: 'USHORT', value: nameID},\n        {name: 'flags_' + n, type: 'USHORT', value: 0}\n    ];\n\n    for (let i = 0; i < axes.length; ++i) {\n        const axisTag = axes[i].tag;\n        fields.push({\n            name: 'axis_' + n + ' ' + axisTag,\n            type: 'FIXED',\n            value: inst.coordinates[axisTag] << 16\n        });\n    }\n\n    return fields;\n}\n\nfunction parseFvarInstance(data, start, axes, names) {\n    const inst = {};\n    const p = new parse.Parser(data, start);\n    inst.name = names[p.parseUShort()] || {};\n    p.skip('uShort', 1);  // reserved for flags; no values defined\n\n    inst.coordinates = {};\n    for (let i = 0; i < axes.length; ++i) {\n        inst.coordinates[axes[i].tag] = p.parseFixed();\n    }\n\n    return inst;\n}\n\nfunction makeFvarTable(fvar, names) {\n    const result = new table.Table('fvar', [\n        {name: 'version', type: 'ULONG', value: 0x10000},\n        {name: 'offsetToData', type: 'USHORT', value: 0},\n        {name: 'countSizePairs', type: 'USHORT', value: 2},\n        {name: 'axisCount', type: 'USHORT', value: fvar.axes.length},\n        {name: 'axisSize', type: 'USHORT', value: 20},\n        {name: 'instanceCount', type: 'USHORT', value: fvar.instances.length},\n        {name: 'instanceSize', type: 'USHORT', value: 4 + fvar.axes.length * 4}\n    ]);\n    result.offsetToData = result.sizeOf();\n\n    for (let i = 0; i < fvar.axes.length; i++) {\n        result.fields = result.fields.concat(makeFvarAxis(i, fvar.axes[i], names));\n    }\n\n    for (let j = 0; j < fvar.instances.length; j++) {\n        result.fields = result.fields.concat(makeFvarInstance(j, fvar.instances[j], fvar.axes, names));\n    }\n\n    return result;\n}\n\nfunction parseFvarTable(data, start, names) {\n    const p = new parse.Parser(data, start);\n    const tableVersion = p.parseULong();\n    check.argument(tableVersion === 0x00010000, 'Unsupported fvar table version.');\n    const offsetToData = p.parseOffset16();\n    // Skip countSizePairs.\n    p.skip('uShort', 1);\n    const axisCount = p.parseUShort();\n    const axisSize = p.parseUShort();\n    const instanceCount = p.parseUShort();\n    const instanceSize = p.parseUShort();\n\n    const axes = [];\n    for (let i = 0; i < axisCount; i++) {\n        axes.push(parseFvarAxis(data, start + offsetToData + i * axisSize, names));\n    }\n\n    const instances = [];\n    const instanceStart = start + offsetToData + axisCount * axisSize;\n    for (let j = 0; j < instanceCount; j++) {\n        instances.push(parseFvarInstance(data, instanceStart + j * instanceSize, axes, names));\n    }\n\n    return {axes: axes, instances: instances};\n}\n\nexport default { make: makeFvarTable, parse: parseFvarTable };\n", "// The `GDEF` table contains various glyph properties\n// https://docs.microsoft.com/en-us/typography/opentype/spec/gdef\n\nimport check from '../check';\nimport { Parser } from '../parse';\n\nvar attachList = function() {\n    return {\n        coverage: this.parsePointer(Parser.coverage),\n        attachPoints: this.parseList(Parser.pointer(Parser.uShortList))\n    };\n};\n\nvar caretValue = function() {\n    var format = this.parseUShort();\n    check.argument(format === 1 || format === 2 || format === 3,\n        'Unsupported CaretValue table version.');\n    if (format === 1) {\n        return { coordinate: this.parseShort() };\n    } else if (format === 2) {\n        return { pointindex: this.parseShort() };\n    } else if (format === 3) {\n        // Device / Variation Index tables unsupported\n        return { coordinate: this.parseShort() };\n    }\n};\n\nvar ligGlyph = function() {\n    return this.parseList(Parser.pointer(caretValue));\n};\n\nvar ligCaretList = function() {\n    return {\n        coverage: this.parsePointer(Parser.coverage),\n        ligGlyphs: this.parseList(Parser.pointer(ligGlyph))\n    };\n};\n\nvar markGlyphSets = function() {\n    this.parseUShort(); // Version\n    return this.parseList(Parser.pointer(Parser.coverage));\n};\n\nfunction parseGDEFTable(data, start) {\n    start = start || 0;\n    const p = new Parser(data, start);\n    const tableVersion = p.parseVersion(1);\n    check.argument(tableVersion === 1 || tableVersion === 1.2 || tableVersion === 1.3,\n        'Unsupported GDEF table version.');\n    var gdef = {\n        version: tableVersion,\n        classDef: p.parsePointer(Parser.classDef),\n        attachList: p.parsePointer(attachList),\n        ligCaretList: p.parsePointer(ligCaretList),\n        markAttachClassDef: p.parsePointer(Parser.classDef)\n    };\n    if (tableVersion >= 1.2) {\n        gdef.markGlyphSets = p.parsePointer(markGlyphSets);\n    }\n    return gdef;\n}\nexport default { parse: parseGDEFTable };\n", "// The `GPOS` table contains kerning pairs, among other things.\n// https://docs.microsoft.com/en-us/typography/opentype/spec/gpos\n\nimport check from '../check';\nimport { Parser } from '../parse';\nimport table from '../table';\n\nconst subtableParsers = new Array(10);         // subtableParsers[0] is unused\n\n// https://docs.microsoft.com/en-us/typography/opentype/spec/gpos#lookup-type-1-single-adjustment-positioning-subtable\n// this = Parser instance\nsubtableParsers[1] = function parseLookup1() {\n    const start = this.offset + this.relativeOffset;\n    const posformat = this.parseUShort();\n    if (posformat === 1) {\n        return {\n            posFormat: 1,\n            coverage: this.parsePointer(Parser.coverage),\n            value: this.parseValueRecord()\n        };\n    } else if (posformat === 2) {\n        return {\n            posFormat: 2,\n            coverage: this.parsePointer(Parser.coverage),\n            values: this.parseValueRecordList()\n        };\n    }\n    check.assert(false, '0x' + start.toString(16) + ': GPOS lookup type 1 format must be 1 or 2.');\n};\n\n// https://docs.microsoft.com/en-us/typography/opentype/spec/gpos#lookup-type-2-pair-adjustment-positioning-subtable\nsubtableParsers[2] = function parseLookup2() {\n    const start = this.offset + this.relativeOffset;\n    const posFormat = this.parseUShort();\n    check.assert(posFormat === 1 || posFormat === 2, '0x' + start.toString(16) + ': GPOS lookup type 2 format must be 1 or 2.');\n    const coverage = this.parsePointer(Parser.coverage);\n    const valueFormat1 = this.parseUShort();\n    const valueFormat2 = this.parseUShort();\n    if (posFormat === 1) {\n        // Adjustments for Glyph Pairs\n        return {\n            posFormat: posFormat,\n            coverage: coverage,\n            valueFormat1: valueFormat1,\n            valueFormat2: valueFormat2,\n            pairSets: this.parseList(Parser.pointer(Parser.list(function() {\n                return {        // pairValueRecord\n                    secondGlyph: this.parseUShort(),\n                    value1: this.parseValueRecord(valueFormat1),\n                    value2: this.parseValueRecord(valueFormat2)\n                };\n            })))\n        };\n    } else if (posFormat === 2) {\n        const classDef1 = this.parsePointer(Parser.classDef);\n        const classDef2 = this.parsePointer(Parser.classDef);\n        const class1Count = this.parseUShort();\n        const class2Count = this.parseUShort();\n        return {\n            // Class Pair Adjustment\n            posFormat: posFormat,\n            coverage: coverage,\n            valueFormat1: valueFormat1,\n            valueFormat2: valueFormat2,\n            classDef1: classDef1,\n            classDef2: classDef2,\n            class1Count: class1Count,\n            class2Count: class2Count,\n            classRecords: this.parseList(class1Count, Parser.list(class2Count, function() {\n                return {\n                    value1: this.parseValueRecord(valueFormat1),\n                    value2: this.parseValueRecord(valueFormat2)\n                };\n            }))\n        };\n    }\n};\n\nsubtableParsers[3] = function parseLookup3() { return { error: 'GPOS Lookup 3 not supported' }; };\nsubtableParsers[4] = function parseLookup4() { return { error: 'GPOS Lookup 4 not supported' }; };\nsubtableParsers[5] = function parseLookup5() { return { error: 'GPOS Lookup 5 not supported' }; };\nsubtableParsers[6] = function parseLookup6() { return { error: 'GPOS Lookup 6 not supported' }; };\nsubtableParsers[7] = function parseLookup7() { return { error: 'GPOS Lookup 7 not supported' }; };\nsubtableParsers[8] = function parseLookup8() { return { error: 'GPOS Lookup 8 not supported' }; };\nsubtableParsers[9] = function parseLookup9() { return { error: 'GPOS Lookup 9 not supported' }; };\n\n// https://docs.microsoft.com/en-us/typography/opentype/spec/gpos\nfunction parseGposTable(data, start) {\n    start = start || 0;\n    const p = new Parser(data, start);\n    const tableVersion = p.parseVersion(1);\n    check.argument(tableVersion === 1 || tableVersion === 1.1, 'Unsupported GPOS table version ' + tableVersion);\n\n    if (tableVersion === 1) {\n        return {\n            version: tableVersion,\n            scripts: p.parseScriptList(),\n            features: p.parseFeatureList(),\n            lookups: p.parseLookupList(subtableParsers)\n        };\n    } else {\n        return {\n            version: tableVersion,\n            scripts: p.parseScriptList(),\n            features: p.parseFeatureList(),\n            lookups: p.parseLookupList(subtableParsers),\n            variations: p.parseFeatureVariationsList()\n        };\n    }\n\n}\n\n// GPOS Writing //////////////////////////////////////////////\n// NOT SUPPORTED\nconst subtableMakers = new Array(10);\n\nfunction makeGposTable(gpos) {\n    return new table.Table('GPOS', [\n        {name: 'version', type: 'ULONG', value: 0x10000},\n        {name: 'scripts', type: 'TABLE', value: new table.ScriptList(gpos.scripts)},\n        {name: 'features', type: 'TABLE', value: new table.FeatureList(gpos.features)},\n        {name: 'lookups', type: 'TABLE', value: new table.LookupList(gpos.lookups, subtableMakers)}\n    ]);\n}\n\nexport default { parse: parseGposTable, make: makeGposTable };\n", "// The `kern` table contains kerning pairs.\n// Note that some fonts use the GPOS OpenType layout table to specify kerning.\n// https://www.microsoft.com/typography/OTSPEC/kern.htm\n\nimport check from '../check';\nimport parse from '../parse';\n\nfunction parseWindowsKernTable(p) {\n    const pairs = {};\n    // Skip nTables.\n    p.skip('uShort');\n    const subtableVersion = p.parseUShort();\n    check.argument(subtableVersion === 0, 'Unsupported kern sub-table version.');\n    // Skip subtableLength, subtableCoverage\n    p.skip('uShort', 2);\n    const nPairs = p.parseUShort();\n    // Skip searchRange, entrySelector, rangeShift.\n    p.skip('uShort', 3);\n    for (let i = 0; i < nPairs; i += 1) {\n        const leftIndex = p.parseUShort();\n        const rightIndex = p.parseUShort();\n        const value = p.parseShort();\n        pairs[leftIndex + ',' + rightIndex] = value;\n    }\n    return pairs;\n}\n\nfunction parseMacKernTable(p) {\n    const pairs = {};\n    // The Mac kern table stores the version as a fixed (32 bits) but we only loaded the first 16 bits.\n    // Skip the rest.\n    p.skip('uShort');\n    const nTables = p.parseULong();\n    //check.argument(nTables === 1, 'Only 1 subtable is supported (got ' + nTables + ').');\n    if (nTables > 1) {\n        console.warn('Only the first kern subtable is supported.');\n    }\n    p.skip('uLong');\n    const coverage = p.parseUShort();\n    const subtableVersion = coverage & 0xFF;\n    p.skip('uShort');\n    if (subtableVersion === 0) {\n        const nPairs = p.parseUShort();\n        // Skip searchRange, entrySelector, rangeShift.\n        p.skip('uShort', 3);\n        for (let i = 0; i < nPairs; i += 1) {\n            const leftIndex = p.parseUShort();\n            const rightIndex = p.parseUShort();\n            const value = p.parseShort();\n            pairs[leftIndex + ',' + rightIndex] = value;\n        }\n    }\n    return pairs;\n}\n\n// Parse the `kern` table which contains kerning pairs.\nfunction parseKernTable(data, start) {\n    const p = new parse.Parser(data, start);\n    const tableVersion = p.parseUShort();\n    if (tableVersion === 0) {\n        return parseWindowsKernTable(p);\n    } else if (tableVersion === 1) {\n        return parseMacKernTable(p);\n    } else {\n        throw new Error('Unsupported kern table version (' + tableVersion + ').');\n    }\n}\n\nexport default { parse: parseKernTable };\n", "// The `loca` table stores the offsets to the locations of the glyphs in the font.\n// https://www.microsoft.com/typography/OTSPEC/loca.htm\n\nimport parse from '../parse';\n\n// Parse the `loca` table. This table stores the offsets to the locations of the glyphs in the font,\n// relative to the beginning of the glyphData table.\n// The number of glyphs stored in the `loca` table is specified in the `maxp` table (under numGlyphs)\n// The loca table has two versions: a short version where offsets are stored as uShorts, and a long\n// version where offsets are stored as uLongs. The `head` table specifies which version to use\n// (under indexToLocFormat).\nfunction parseLocaTable(data, start, numGlyphs, shortVersion) {\n    const p = new parse.Parser(data, start);\n    const parseFn = shortVersion ? p.parseUShort : p.parseULong;\n    // There is an extra entry after the last index element to compute the length of the last glyph.\n    // That's why we use numGlyphs + 1.\n    const glyphOffsets = [];\n    for (let i = 0; i < numGlyphs + 1; i += 1) {\n        let glyphOffset = parseFn.call(p);\n        if (shortVersion) {\n            // The short table version stores the actual offset divided by 2.\n            glyphOffset *= 2;\n        }\n\n        glyphOffsets.push(glyphOffset);\n    }\n\n    return glyphOffsets;\n}\n\nexport default { parse: parseLocaTable };\n", "// opentype.js\n// https://github.com/opentypejs/opentype.js\n// (c) 2015 Frederik De Bleser\n// opentype.js may be freely distributed under the MIT license.\n\n/* global DataView, Uint8Array, XMLHttpRequest  */\n\nimport 'string.prototype.codepointat';\nimport inflate from 'tiny-inflate';\nimport Font from './font';\nimport Glyph from './glyph';\nimport { CmapEncoding, GlyphNames, addGlyphNames } from './encoding';\nimport parse from './parse';\nimport BoundingBox from './bbox';\nimport Path from './path';\nimport { nodeBufferToArrayBuffer } from './util';\nimport cmap from './tables/cmap';\nimport cff from './tables/cff';\nimport fvar from './tables/fvar';\nimport glyf from './tables/glyf';\nimport gdef from './tables/gdef';\nimport gpos from './tables/gpos';\nimport gsub from './tables/gsub';\nimport head from './tables/head';\nimport hhea from './tables/hhea';\nimport hmtx from './tables/hmtx';\nimport kern from './tables/kern';\nimport ltag from './tables/ltag';\nimport loca from './tables/loca';\nimport maxp from './tables/maxp';\nimport _name from './tables/name';\nimport os2 from './tables/os2';\nimport post from './tables/post';\nimport meta from './tables/meta';\n\n/**\n * The opentype library.\n * @namespace opentype\n */\n\n// File loaders /////////////////////////////////////////////////////////\n/**\n * Loads a font from a file. The callback throws an error message as the first parameter if it fails\n * and the font as an ArrayBuffer in the second parameter if it succeeds.\n * @param  {string} path - The path of the file\n * @param  {Function} callback - The function to call when the font load completes\n */\nfunction loadFromFile(path, callback) {\n    const fs = require('fs');\n    fs.readFile(path, function(err, buffer) {\n        if (err) {\n            return callback(err.message);\n        }\n\n        callback(null, nodeBufferToArrayBuffer(buffer));\n    });\n}\n/**\n * Loads a font from a URL. The callback throws an error message as the first parameter if it fails\n * and the font as an ArrayBuffer in the second parameter if it succeeds.\n * @param  {string} url - The URL of the font file.\n * @param  {Function} callback - The function to call when the font load completes\n */\nfunction loadFromUrl(url, callback) {\n    const request = new XMLHttpRequest();\n    request.open('get', url, true);\n    request.responseType = 'arraybuffer';\n    request.onload = function() {\n        if (request.response) {\n            return callback(null, request.response);\n        } else {\n            return callback('Font could not be loaded: ' + request.statusText);\n        }\n    };\n\n    request.onerror = function () {\n        callback('Font could not be loaded');\n    };\n\n    request.send();\n}\n\n// Table Directory Entries //////////////////////////////////////////////\n/**\n * Parses OpenType table entries.\n * @param  {DataView}\n * @param  {Number}\n * @return {Object[]}\n */\nfunction parseOpenTypeTableEntries(data, numTables) {\n    const tableEntries = [];\n    let p = 12;\n    for (let i = 0; i < numTables; i += 1) {\n        const tag = parse.getTag(data, p);\n        const checksum = parse.getULong(data, p + 4);\n        const offset = parse.getULong(data, p + 8);\n        const length = parse.getULong(data, p + 12);\n        tableEntries.push({tag: tag, checksum: checksum, offset: offset, length: length, compression: false});\n        p += 16;\n    }\n\n    return tableEntries;\n}\n\n/**\n * Parses WOFF table entries.\n * @param  {DataView}\n * @param  {Number}\n * @return {Object[]}\n */\nfunction parseWOFFTableEntries(data, numTables) {\n    const tableEntries = [];\n    let p = 44; // offset to the first table directory entry.\n    for (let i = 0; i < numTables; i += 1) {\n        const tag = parse.getTag(data, p);\n        const offset = parse.getULong(data, p + 4);\n        const compLength = parse.getULong(data, p + 8);\n        const origLength = parse.getULong(data, p + 12);\n        let compression;\n        if (compLength < origLength) {\n            compression = 'WOFF';\n        } else {\n            compression = false;\n        }\n\n        tableEntries.push({tag: tag, offset: offset, compression: compression,\n            compressedLength: compLength, length: origLength});\n        p += 20;\n    }\n\n    return tableEntries;\n}\n\n/**\n * @typedef TableData\n * @type Object\n * @property {DataView} data - The DataView\n * @property {number} offset - The data offset.\n */\n\n/**\n * @param  {DataView}\n * @param  {Object}\n * @return {TableData}\n */\nfunction uncompressTable(data, tableEntry) {\n    if (tableEntry.compression === 'WOFF') {\n        const inBuffer = new Uint8Array(data.buffer, tableEntry.offset + 2, tableEntry.compressedLength - 2);\n        const outBuffer = new Uint8Array(tableEntry.length);\n        inflate(inBuffer, outBuffer);\n        if (outBuffer.byteLength !== tableEntry.length) {\n            throw new Error('Decompression error: ' + tableEntry.tag + ' decompressed length doesn\\'t match recorded length');\n        }\n\n        const view = new DataView(outBuffer.buffer, 0);\n        return {data: view, offset: 0};\n    } else {\n        return {data: data, offset: tableEntry.offset};\n    }\n}\n\n// Public API ///////////////////////////////////////////////////////////\n\n/**\n * Parse the OpenType file data (as an ArrayBuffer) and return a Font object.\n * Throws an error if the font could not be parsed.\n * @param  {ArrayBuffer}\n * @param  {Object} opt - options for parsing\n * @return {opentype.Font}\n */\nfunction parseBuffer(buffer, opt) {\n    opt = (opt === undefined || opt === null) ?  {} : opt;\n\n    let indexToLocFormat;\n    let ltagTable;\n\n    // Since the constructor can also be called to create new fonts from scratch, we indicate this\n    // should be an empty font that we'll fill with our own data.\n    const font = new Font({empty: true});\n\n    // OpenType fonts use big endian byte ordering.\n    // We can't rely on typed array view types, because they operate with the endianness of the host computer.\n    // Instead we use DataViews where we can specify endianness.\n    const data = new DataView(buffer, 0);\n    let numTables;\n    let tableEntries = [];\n    const signature = parse.getTag(data, 0);\n    if (signature === String.fromCharCode(0, 1, 0, 0) || signature === 'true' || signature === 'typ1') {\n        font.outlinesFormat = 'truetype';\n        numTables = parse.getUShort(data, 4);\n        tableEntries = parseOpenTypeTableEntries(data, numTables);\n    } else if (signature === 'OTTO') {\n        font.outlinesFormat = 'cff';\n        numTables = parse.getUShort(data, 4);\n        tableEntries = parseOpenTypeTableEntries(data, numTables);\n    } else if (signature === 'wOFF') {\n        const flavor = parse.getTag(data, 4);\n        if (flavor === String.fromCharCode(0, 1, 0, 0)) {\n            font.outlinesFormat = 'truetype';\n        } else if (flavor === 'OTTO') {\n            font.outlinesFormat = 'cff';\n        } else {\n            throw new Error('Unsupported OpenType flavor ' + signature);\n        }\n\n        numTables = parse.getUShort(data, 12);\n        tableEntries = parseWOFFTableEntries(data, numTables);\n    } else {\n        throw new Error('Unsupported OpenType signature ' + signature);\n    }\n\n    let cffTableEntry;\n    let fvarTableEntry;\n    let glyfTableEntry;\n    let gdefTableEntry;\n    let gposTableEntry;\n    let gsubTableEntry;\n    let hmtxTableEntry;\n    let kernTableEntry;\n    let locaTableEntry;\n    let nameTableEntry;\n    let metaTableEntry;\n    let p;\n\n    for (let i = 0; i < numTables; i += 1) {\n        const tableEntry = tableEntries[i];\n        let table;\n        switch (tableEntry.tag) {\n            case 'cmap':\n                table = uncompressTable(data, tableEntry);\n                font.tables.cmap = cmap.parse(table.data, table.offset);\n                font.encoding = new CmapEncoding(font.tables.cmap);\n                break;\n            case 'cvt ' :\n                table = uncompressTable(data, tableEntry);\n                p = new parse.Parser(table.data, table.offset);\n                font.tables.cvt = p.parseShortList(tableEntry.length / 2);\n                break;\n            case 'fvar':\n                fvarTableEntry = tableEntry;\n                break;\n            case 'fpgm' :\n                table = uncompressTable(data, tableEntry);\n                p = new parse.Parser(table.data, table.offset);\n                font.tables.fpgm = p.parseByteList(tableEntry.length);\n                break;\n            case 'head':\n                table = uncompressTable(data, tableEntry);\n                font.tables.head = head.parse(table.data, table.offset);\n                font.unitsPerEm = font.tables.head.unitsPerEm;\n                indexToLocFormat = font.tables.head.indexToLocFormat;\n                break;\n            case 'hhea':\n                table = uncompressTable(data, tableEntry);\n                font.tables.hhea = hhea.parse(table.data, table.offset);\n                font.ascender = font.tables.hhea.ascender;\n                font.descender = font.tables.hhea.descender;\n                font.numberOfHMetrics = font.tables.hhea.numberOfHMetrics;\n                break;\n            case 'hmtx':\n                hmtxTableEntry = tableEntry;\n                break;\n            case 'ltag':\n                table = uncompressTable(data, tableEntry);\n                ltagTable = ltag.parse(table.data, table.offset);\n                break;\n            case 'maxp':\n                table = uncompressTable(data, tableEntry);\n                font.tables.maxp = maxp.parse(table.data, table.offset);\n                font.numGlyphs = font.tables.maxp.numGlyphs;\n                break;\n            case 'name':\n                nameTableEntry = tableEntry;\n                break;\n            case 'OS/2':\n                table = uncompressTable(data, tableEntry);\n                font.tables.os2 = os2.parse(table.data, table.offset);\n                break;\n            case 'post':\n                table = uncompressTable(data, tableEntry);\n                font.tables.post = post.parse(table.data, table.offset);\n                font.glyphNames = new GlyphNames(font.tables.post);\n                break;\n            case 'prep' :\n                table = uncompressTable(data, tableEntry);\n                p = new parse.Parser(table.data, table.offset);\n                font.tables.prep = p.parseByteList(tableEntry.length);\n                break;\n            case 'glyf':\n                glyfTableEntry = tableEntry;\n                break;\n            case 'loca':\n                locaTableEntry = tableEntry;\n                break;\n            case 'CFF ':\n                cffTableEntry = tableEntry;\n                break;\n            case 'kern':\n                kernTableEntry = tableEntry;\n                break;\n            case 'GDEF':\n                gdefTableEntry = tableEntry;\n                break;\n            case 'GPOS':\n                gposTableEntry = tableEntry;\n                break;\n            case 'GSUB':\n                gsubTableEntry = tableEntry;\n                break;\n            case 'meta':\n                metaTableEntry = tableEntry;\n                break;\n        }\n    }\n\n    const nameTable = uncompressTable(data, nameTableEntry);\n    font.tables.name = _name.parse(nameTable.data, nameTable.offset, ltagTable);\n    font.names = font.tables.name;\n\n    if (glyfTableEntry && locaTableEntry) {\n        const shortVersion = indexToLocFormat === 0;\n        const locaTable = uncompressTable(data, locaTableEntry);\n        const locaOffsets = loca.parse(locaTable.data, locaTable.offset, font.numGlyphs, shortVersion);\n        const glyfTable = uncompressTable(data, glyfTableEntry);\n        font.glyphs = glyf.parse(glyfTable.data, glyfTable.offset, locaOffsets, font, opt);\n    } else if (cffTableEntry) {\n        const cffTable = uncompressTable(data, cffTableEntry);\n        cff.parse(cffTable.data, cffTable.offset, font, opt);\n    } else {\n        throw new Error('Font doesn\\'t contain TrueType or CFF outlines.');\n    }\n\n    const hmtxTable = uncompressTable(data, hmtxTableEntry);\n    hmtx.parse(font, hmtxTable.data, hmtxTable.offset, font.numberOfHMetrics, font.numGlyphs, font.glyphs, opt);\n    addGlyphNames(font, opt);\n\n    if (kernTableEntry) {\n        const kernTable = uncompressTable(data, kernTableEntry);\n        font.kerningPairs = kern.parse(kernTable.data, kernTable.offset);\n    } else {\n        font.kerningPairs = {};\n    }\n\n    if (gdefTableEntry) {\n        const gdefTable = uncompressTable(data, gdefTableEntry);\n        font.tables.gdef = gdef.parse(gdefTable.data, gdefTable.offset);\n    }\n\n    if (gposTableEntry) {\n        const gposTable = uncompressTable(data, gposTableEntry);\n        font.tables.gpos = gpos.parse(gposTable.data, gposTable.offset);\n        font.position.init();\n    }\n\n    if (gsubTableEntry) {\n        const gsubTable = uncompressTable(data, gsubTableEntry);\n        font.tables.gsub = gsub.parse(gsubTable.data, gsubTable.offset);\n    }\n\n    if (fvarTableEntry) {\n        const fvarTable = uncompressTable(data, fvarTableEntry);\n        font.tables.fvar = fvar.parse(fvarTable.data, fvarTable.offset, font.names);\n    }\n\n    if (metaTableEntry) {\n        const metaTable = uncompressTable(data, metaTableEntry);\n        font.tables.meta = meta.parse(metaTable.data, metaTable.offset);\n        font.metas = font.tables.meta;\n    }\n\n    return font;\n}\n\n/**\n * Asynchronously load the font from a URL or a filesystem. When done, call the callback\n * with two arguments `(err, font)`. The `err` will be null on success,\n * the `font` is a Font object.\n * We use the node.js callback convention so that\n * opentype.js can integrate with frameworks like async.js.\n * @alias opentype.load\n * @param  {string} url - The URL of the font to load.\n * @param  {Function} callback - The callback.\n */\nfunction load(url, callback, opt) {\n    opt = (opt === undefined || opt === null) ?  {} : opt;\n    const isNode = typeof window === 'undefined';\n    const loadFn = isNode && !opt.isUrl ? loadFromFile : loadFromUrl;\n\n    return new Promise((resolve, reject) => {\n        loadFn(url, function(err, arrayBuffer) {\n            if (err) {\n                if (callback) {\n                    return callback(err);\n                } else {\n                    reject(err);\n                }\n            }\n            let font;\n            try {\n                font = parseBuffer(arrayBuffer, opt);\n            } catch (e) {\n                if (callback) {\n                    return callback(e, null);\n                } else {\n                    reject(e);\n                }\n            }\n            if (callback) {\n                return callback(null, font);\n            } else {\n                resolve(font);\n            }\n        });\n    });\n}\n\n/**\n * Synchronously load the font from a URL or file.\n * When done, returns the font object or throws an error.\n * @alias opentype.loadSync\n * @param  {string} url - The URL of the font to load.\n * @param  {Object} opt - opt.lowMemory\n * @return {opentype.Font}\n */\nfunction loadSync(url, opt) {\n    const fs = require('fs');\n    const buffer = fs.readFileSync(url);\n    return parseBuffer(nodeBufferToArrayBuffer(buffer), opt);\n}\n\nexport {\n    Font,\n    Glyph,\n    Path,\n    BoundingBox,\n    parse as _parse,\n    parseBuffer as parse,\n    load,\n    loadSync\n};\n", "import { Texture, DataTextureLoader, HalfFloatType, DataUtils, FloatType, RGBAFormat, RedFormat, LinearFilter } from \"three\";\r\nimport { unzlibSync } from \"fflate\";\r\nconst hasColorSpace = \"colorSpace\" in /* @__PURE__ */ new Texture();\r\nclass EXRLoader extends DataTextureLoader {\r\n  constructor(manager) {\r\n    super(manager);\r\n    this.type = HalfFloatType;\r\n  }\r\n  parse(buffer) {\r\n    const USHORT_RANGE = 1 << 16;\r\n    const BITMAP_SIZE = USHORT_RANGE >> 3;\r\n    const HUF_ENCBITS = 16;\r\n    const HUF_DECBITS = 14;\r\n    const HUF_ENCSIZE = (1 << HUF_ENCBITS) + 1;\r\n    const HUF_DECSIZE = 1 << HUF_DECBITS;\r\n    const HUF_DECMASK = HUF_DECSIZE - 1;\r\n    const NBITS = 16;\r\n    const A_OFFSET = 1 << NBITS - 1;\r\n    const MOD_MASK = (1 << NBITS) - 1;\r\n    const SHORT_ZEROCODE_RUN = 59;\r\n    const LONG_ZEROCODE_RUN = 63;\r\n    const SHORTEST_LONG_RUN = 2 + LONG_ZEROCODE_RUN - SHORT_ZEROCODE_RUN;\r\n    const ULONG_SIZE = 8;\r\n    const FLOAT32_SIZE = 4;\r\n    const INT32_SIZE = 4;\r\n    const INT16_SIZE = 2;\r\n    const INT8_SIZE = 1;\r\n    const STATIC_HUFFMAN = 0;\r\n    const DEFLATE = 1;\r\n    const UNKNOWN = 0;\r\n    const LOSSY_DCT = 1;\r\n    const RLE = 2;\r\n    const logBase = Math.pow(2.7182818, 2.2);\r\n    function reverseLutFromBitmap(bitmap, lut) {\r\n      var k = 0;\r\n      for (var i = 0; i < USHORT_RANGE; ++i) {\r\n        if (i == 0 || bitmap[i >> 3] & 1 << (i & 7)) {\r\n          lut[k++] = i;\r\n        }\r\n      }\r\n      var n = k - 1;\r\n      while (k < USHORT_RANGE)\r\n        lut[k++] = 0;\r\n      return n;\r\n    }\r\n    function hufClearDecTable(hdec) {\r\n      for (var i = 0; i < HUF_DECSIZE; i++) {\r\n        hdec[i] = {};\r\n        hdec[i].len = 0;\r\n        hdec[i].lit = 0;\r\n        hdec[i].p = null;\r\n      }\r\n    }\r\n    const getBitsReturn = { l: 0, c: 0, lc: 0 };\r\n    function getBits(nBits, c, lc, uInt8Array2, inOffset) {\r\n      while (lc < nBits) {\r\n        c = c << 8 | parseUint8Array(uInt8Array2, inOffset);\r\n        lc += 8;\r\n      }\r\n      lc -= nBits;\r\n      getBitsReturn.l = c >> lc & (1 << nBits) - 1;\r\n      getBitsReturn.c = c;\r\n      getBitsReturn.lc = lc;\r\n    }\r\n    const hufTableBuffer = new Array(59);\r\n    function hufCanonicalCodeTable(hcode) {\r\n      for (var i = 0; i <= 58; ++i)\r\n        hufTableBuffer[i] = 0;\r\n      for (var i = 0; i < HUF_ENCSIZE; ++i)\r\n        hufTableBuffer[hcode[i]] += 1;\r\n      var c = 0;\r\n      for (var i = 58; i > 0; --i) {\r\n        var nc = c + hufTableBuffer[i] >> 1;\r\n        hufTableBuffer[i] = c;\r\n        c = nc;\r\n      }\r\n      for (var i = 0; i < HUF_ENCSIZE; ++i) {\r\n        var l = hcode[i];\r\n        if (l > 0)\r\n          hcode[i] = l | hufTableBuffer[l]++ << 6;\r\n      }\r\n    }\r\n    function hufUnpackEncTable(uInt8Array2, inDataView, inOffset, ni, im, iM, hcode) {\r\n      var p = inOffset;\r\n      var c = 0;\r\n      var lc = 0;\r\n      for (; im <= iM; im++) {\r\n        if (p.value - inOffset.value > ni)\r\n          return false;\r\n        getBits(6, c, lc, uInt8Array2, p);\r\n        var l = getBitsReturn.l;\r\n        c = getBitsReturn.c;\r\n        lc = getBitsReturn.lc;\r\n        hcode[im] = l;\r\n        if (l == LONG_ZEROCODE_RUN) {\r\n          if (p.value - inOffset.value > ni) {\r\n            throw \"Something wrong with hufUnpackEncTable\";\r\n          }\r\n          getBits(8, c, lc, uInt8Array2, p);\r\n          var zerun = getBitsReturn.l + SHORTEST_LONG_RUN;\r\n          c = getBitsReturn.c;\r\n          lc = getBitsReturn.lc;\r\n          if (im + zerun > iM + 1) {\r\n            throw \"Something wrong with hufUnpackEncTable\";\r\n          }\r\n          while (zerun--)\r\n            hcode[im++] = 0;\r\n          im--;\r\n        } else if (l >= SHORT_ZEROCODE_RUN) {\r\n          var zerun = l - SHORT_ZEROCODE_RUN + 2;\r\n          if (im + zerun > iM + 1) {\r\n            throw \"Something wrong with hufUnpackEncTable\";\r\n          }\r\n          while (zerun--)\r\n            hcode[im++] = 0;\r\n          im--;\r\n        }\r\n      }\r\n      hufCanonicalCodeTable(hcode);\r\n    }\r\n    function hufLength(code) {\r\n      return code & 63;\r\n    }\r\n    function hufCode(code) {\r\n      return code >> 6;\r\n    }\r\n    function hufBuildDecTable(hcode, im, iM, hdecod) {\r\n      for (; im <= iM; im++) {\r\n        var c = hufCode(hcode[im]);\r\n        var l = hufLength(hcode[im]);\r\n        if (c >> l) {\r\n          throw \"Invalid table entry\";\r\n        }\r\n        if (l > HUF_DECBITS) {\r\n          var pl = hdecod[c >> l - HUF_DECBITS];\r\n          if (pl.len) {\r\n            throw \"Invalid table entry\";\r\n          }\r\n          pl.lit++;\r\n          if (pl.p) {\r\n            var p = pl.p;\r\n            pl.p = new Array(pl.lit);\r\n            for (var i = 0; i < pl.lit - 1; ++i) {\r\n              pl.p[i] = p[i];\r\n            }\r\n          } else {\r\n            pl.p = new Array(1);\r\n          }\r\n          pl.p[pl.lit - 1] = im;\r\n        } else if (l) {\r\n          var plOffset = 0;\r\n          for (var i = 1 << HUF_DECBITS - l; i > 0; i--) {\r\n            var pl = hdecod[(c << HUF_DECBITS - l) + plOffset];\r\n            if (pl.len || pl.p) {\r\n              throw \"Invalid table entry\";\r\n            }\r\n            pl.len = l;\r\n            pl.lit = im;\r\n            plOffset++;\r\n          }\r\n        }\r\n      }\r\n      return true;\r\n    }\r\n    const getCharReturn = { c: 0, lc: 0 };\r\n    function getChar(c, lc, uInt8Array2, inOffset) {\r\n      c = c << 8 | parseUint8Array(uInt8Array2, inOffset);\r\n      lc += 8;\r\n      getCharReturn.c = c;\r\n      getCharReturn.lc = lc;\r\n    }\r\n    const getCodeReturn = { c: 0, lc: 0 };\r\n    function getCode(po, rlc, c, lc, uInt8Array2, inDataView, inOffset, outBuffer, outBufferOffset, outBufferEndOffset) {\r\n      if (po == rlc) {\r\n        if (lc < 8) {\r\n          getChar(c, lc, uInt8Array2, inOffset);\r\n          c = getCharReturn.c;\r\n          lc = getCharReturn.lc;\r\n        }\r\n        lc -= 8;\r\n        var cs = c >> lc;\r\n        var cs = new Uint8Array([cs])[0];\r\n        if (outBufferOffset.value + cs > outBufferEndOffset) {\r\n          return false;\r\n        }\r\n        var s = outBuffer[outBufferOffset.value - 1];\r\n        while (cs-- > 0) {\r\n          outBuffer[outBufferOffset.value++] = s;\r\n        }\r\n      } else if (outBufferOffset.value < outBufferEndOffset) {\r\n        outBuffer[outBufferOffset.value++] = po;\r\n      } else {\r\n        return false;\r\n      }\r\n      getCodeReturn.c = c;\r\n      getCodeReturn.lc = lc;\r\n    }\r\n    function UInt16(value) {\r\n      return value & 65535;\r\n    }\r\n    function Int16(value) {\r\n      var ref = UInt16(value);\r\n      return ref > 32767 ? ref - 65536 : ref;\r\n    }\r\n    const wdec14Return = { a: 0, b: 0 };\r\n    function wdec14(l, h) {\r\n      var ls = Int16(l);\r\n      var hs = Int16(h);\r\n      var hi = hs;\r\n      var ai = ls + (hi & 1) + (hi >> 1);\r\n      var as = ai;\r\n      var bs = ai - hi;\r\n      wdec14Return.a = as;\r\n      wdec14Return.b = bs;\r\n    }\r\n    function wdec16(l, h) {\r\n      var m = UInt16(l);\r\n      var d = UInt16(h);\r\n      var bb = m - (d >> 1) & MOD_MASK;\r\n      var aa = d + bb - A_OFFSET & MOD_MASK;\r\n      wdec14Return.a = aa;\r\n      wdec14Return.b = bb;\r\n    }\r\n    function wav2Decode(buffer2, j, nx, ox, ny, oy, mx) {\r\n      var w14 = mx < 1 << 14;\r\n      var n = nx > ny ? ny : nx;\r\n      var p = 1;\r\n      var p2;\r\n      while (p <= n)\r\n        p <<= 1;\r\n      p >>= 1;\r\n      p2 = p;\r\n      p >>= 1;\r\n      while (p >= 1) {\r\n        var py = 0;\r\n        var ey = py + oy * (ny - p2);\r\n        var oy1 = oy * p;\r\n        var oy2 = oy * p2;\r\n        var ox1 = ox * p;\r\n        var ox2 = ox * p2;\r\n        var i00, i01, i10, i11;\r\n        for (; py <= ey; py += oy2) {\r\n          var px = py;\r\n          var ex = py + ox * (nx - p2);\r\n          for (; px <= ex; px += ox2) {\r\n            var p01 = px + ox1;\r\n            var p10 = px + oy1;\r\n            var p11 = p10 + ox1;\r\n            if (w14) {\r\n              wdec14(buffer2[px + j], buffer2[p10 + j]);\r\n              i00 = wdec14Return.a;\r\n              i10 = wdec14Return.b;\r\n              wdec14(buffer2[p01 + j], buffer2[p11 + j]);\r\n              i01 = wdec14Return.a;\r\n              i11 = wdec14Return.b;\r\n              wdec14(i00, i01);\r\n              buffer2[px + j] = wdec14Return.a;\r\n              buffer2[p01 + j] = wdec14Return.b;\r\n              wdec14(i10, i11);\r\n              buffer2[p10 + j] = wdec14Return.a;\r\n              buffer2[p11 + j] = wdec14Return.b;\r\n            } else {\r\n              wdec16(buffer2[px + j], buffer2[p10 + j]);\r\n              i00 = wdec14Return.a;\r\n              i10 = wdec14Return.b;\r\n              wdec16(buffer2[p01 + j], buffer2[p11 + j]);\r\n              i01 = wdec14Return.a;\r\n              i11 = wdec14Return.b;\r\n              wdec16(i00, i01);\r\n              buffer2[px + j] = wdec14Return.a;\r\n              buffer2[p01 + j] = wdec14Return.b;\r\n              wdec16(i10, i11);\r\n              buffer2[p10 + j] = wdec14Return.a;\r\n              buffer2[p11 + j] = wdec14Return.b;\r\n            }\r\n          }\r\n          if (nx & p) {\r\n            var p10 = px + oy1;\r\n            if (w14)\r\n              wdec14(buffer2[px + j], buffer2[p10 + j]);\r\n            else\r\n              wdec16(buffer2[px + j], buffer2[p10 + j]);\r\n            i00 = wdec14Return.a;\r\n            buffer2[p10 + j] = wdec14Return.b;\r\n            buffer2[px + j] = i00;\r\n          }\r\n        }\r\n        if (ny & p) {\r\n          var px = py;\r\n          var ex = py + ox * (nx - p2);\r\n          for (; px <= ex; px += ox2) {\r\n            var p01 = px + ox1;\r\n            if (w14)\r\n              wdec14(buffer2[px + j], buffer2[p01 + j]);\r\n            else\r\n              wdec16(buffer2[px + j], buffer2[p01 + j]);\r\n            i00 = wdec14Return.a;\r\n            buffer2[p01 + j] = wdec14Return.b;\r\n            buffer2[px + j] = i00;\r\n          }\r\n        }\r\n        p2 = p;\r\n        p >>= 1;\r\n      }\r\n      return py;\r\n    }\r\n    function hufDecode(encodingTable, decodingTable, uInt8Array2, inDataView, inOffset, ni, rlc, no, outBuffer, outOffset) {\r\n      var c = 0;\r\n      var lc = 0;\r\n      var outBufferEndOffset = no;\r\n      var inOffsetEnd = Math.trunc(inOffset.value + (ni + 7) / 8);\r\n      while (inOffset.value < inOffsetEnd) {\r\n        getChar(c, lc, uInt8Array2, inOffset);\r\n        c = getCharReturn.c;\r\n        lc = getCharReturn.lc;\r\n        while (lc >= HUF_DECBITS) {\r\n          var index = c >> lc - HUF_DECBITS & HUF_DECMASK;\r\n          var pl = decodingTable[index];\r\n          if (pl.len) {\r\n            lc -= pl.len;\r\n            getCode(pl.lit, rlc, c, lc, uInt8Array2, inDataView, inOffset, outBuffer, outOffset, outBufferEndOffset);\r\n            c = getCodeReturn.c;\r\n            lc = getCodeReturn.lc;\r\n          } else {\r\n            if (!pl.p) {\r\n              throw \"hufDecode issues\";\r\n            }\r\n            var j;\r\n            for (j = 0; j < pl.lit; j++) {\r\n              var l = hufLength(encodingTable[pl.p[j]]);\r\n              while (lc < l && inOffset.value < inOffsetEnd) {\r\n                getChar(c, lc, uInt8Array2, inOffset);\r\n                c = getCharReturn.c;\r\n                lc = getCharReturn.lc;\r\n              }\r\n              if (lc >= l) {\r\n                if (hufCode(encodingTable[pl.p[j]]) == (c >> lc - l & (1 << l) - 1)) {\r\n                  lc -= l;\r\n                  getCode(\r\n                    pl.p[j],\r\n                    rlc,\r\n                    c,\r\n                    lc,\r\n                    uInt8Array2,\r\n                    inDataView,\r\n                    inOffset,\r\n                    outBuffer,\r\n                    outOffset,\r\n                    outBufferEndOffset\r\n                  );\r\n                  c = getCodeReturn.c;\r\n                  lc = getCodeReturn.lc;\r\n                  break;\r\n                }\r\n              }\r\n            }\r\n            if (j == pl.lit) {\r\n              throw \"hufDecode issues\";\r\n            }\r\n          }\r\n        }\r\n      }\r\n      var i = 8 - ni & 7;\r\n      c >>= i;\r\n      lc -= i;\r\n      while (lc > 0) {\r\n        var pl = decodingTable[c << HUF_DECBITS - lc & HUF_DECMASK];\r\n        if (pl.len) {\r\n          lc -= pl.len;\r\n          getCode(pl.lit, rlc, c, lc, uInt8Array2, inDataView, inOffset, outBuffer, outOffset, outBufferEndOffset);\r\n          c = getCodeReturn.c;\r\n          lc = getCodeReturn.lc;\r\n        } else {\r\n          throw \"hufDecode issues\";\r\n        }\r\n      }\r\n      return true;\r\n    }\r\n    function hufUncompress(uInt8Array2, inDataView, inOffset, nCompressed, outBuffer, nRaw) {\r\n      var outOffset = { value: 0 };\r\n      var initialInOffset = inOffset.value;\r\n      var im = parseUint32(inDataView, inOffset);\r\n      var iM = parseUint32(inDataView, inOffset);\r\n      inOffset.value += 4;\r\n      var nBits = parseUint32(inDataView, inOffset);\r\n      inOffset.value += 4;\r\n      if (im < 0 || im >= HUF_ENCSIZE || iM < 0 || iM >= HUF_ENCSIZE) {\r\n        throw \"Something wrong with HUF_ENCSIZE\";\r\n      }\r\n      var freq = new Array(HUF_ENCSIZE);\r\n      var hdec = new Array(HUF_DECSIZE);\r\n      hufClearDecTable(hdec);\r\n      var ni = nCompressed - (inOffset.value - initialInOffset);\r\n      hufUnpackEncTable(uInt8Array2, inDataView, inOffset, ni, im, iM, freq);\r\n      if (nBits > 8 * (nCompressed - (inOffset.value - initialInOffset))) {\r\n        throw \"Something wrong with hufUncompress\";\r\n      }\r\n      hufBuildDecTable(freq, im, iM, hdec);\r\n      hufDecode(freq, hdec, uInt8Array2, inDataView, inOffset, nBits, iM, nRaw, outBuffer, outOffset);\r\n    }\r\n    function applyLut(lut, data, nData) {\r\n      for (var i = 0; i < nData; ++i) {\r\n        data[i] = lut[data[i]];\r\n      }\r\n    }\r\n    function predictor(source) {\r\n      for (var t = 1; t < source.length; t++) {\r\n        var d = source[t - 1] + source[t] - 128;\r\n        source[t] = d;\r\n      }\r\n    }\r\n    function interleaveScalar(source, out) {\r\n      var t1 = 0;\r\n      var t2 = Math.floor((source.length + 1) / 2);\r\n      var s = 0;\r\n      var stop = source.length - 1;\r\n      while (true) {\r\n        if (s > stop)\r\n          break;\r\n        out[s++] = source[t1++];\r\n        if (s > stop)\r\n          break;\r\n        out[s++] = source[t2++];\r\n      }\r\n    }\r\n    function decodeRunLength(source) {\r\n      var size = source.byteLength;\r\n      var out = new Array();\r\n      var p = 0;\r\n      var reader = new DataView(source);\r\n      while (size > 0) {\r\n        var l = reader.getInt8(p++);\r\n        if (l < 0) {\r\n          var count = -l;\r\n          size -= count + 1;\r\n          for (var i = 0; i < count; i++) {\r\n            out.push(reader.getUint8(p++));\r\n          }\r\n        } else {\r\n          var count = l;\r\n          size -= 2;\r\n          var value = reader.getUint8(p++);\r\n          for (var i = 0; i < count + 1; i++) {\r\n            out.push(value);\r\n          }\r\n        }\r\n      }\r\n      return out;\r\n    }\r\n    function lossyDctDecode(cscSet, rowPtrs, channelData, acBuffer, dcBuffer, outBuffer) {\r\n      var dataView = new DataView(outBuffer.buffer);\r\n      var width = channelData[cscSet.idx[0]].width;\r\n      var height = channelData[cscSet.idx[0]].height;\r\n      var numComp = 3;\r\n      var numFullBlocksX = Math.floor(width / 8);\r\n      var numBlocksX = Math.ceil(width / 8);\r\n      var numBlocksY = Math.ceil(height / 8);\r\n      var leftoverX = width - (numBlocksX - 1) * 8;\r\n      var leftoverY = height - (numBlocksY - 1) * 8;\r\n      var currAcComp = { value: 0 };\r\n      var currDcComp = new Array(numComp);\r\n      var dctData = new Array(numComp);\r\n      var halfZigBlock = new Array(numComp);\r\n      var rowBlock = new Array(numComp);\r\n      var rowOffsets = new Array(numComp);\r\n      for (let comp2 = 0; comp2 < numComp; ++comp2) {\r\n        rowOffsets[comp2] = rowPtrs[cscSet.idx[comp2]];\r\n        currDcComp[comp2] = comp2 < 1 ? 0 : currDcComp[comp2 - 1] + numBlocksX * numBlocksY;\r\n        dctData[comp2] = new Float32Array(64);\r\n        halfZigBlock[comp2] = new Uint16Array(64);\r\n        rowBlock[comp2] = new Uint16Array(numBlocksX * 64);\r\n      }\r\n      for (let blocky = 0; blocky < numBlocksY; ++blocky) {\r\n        var maxY = 8;\r\n        if (blocky == numBlocksY - 1)\r\n          maxY = leftoverY;\r\n        var maxX = 8;\r\n        for (let blockx = 0; blockx < numBlocksX; ++blockx) {\r\n          if (blockx == numBlocksX - 1)\r\n            maxX = leftoverX;\r\n          for (let comp2 = 0; comp2 < numComp; ++comp2) {\r\n            halfZigBlock[comp2].fill(0);\r\n            halfZigBlock[comp2][0] = dcBuffer[currDcComp[comp2]++];\r\n            unRleAC(currAcComp, acBuffer, halfZigBlock[comp2]);\r\n            unZigZag(halfZigBlock[comp2], dctData[comp2]);\r\n            dctInverse(dctData[comp2]);\r\n          }\r\n          if (numComp == 3) {\r\n            csc709Inverse(dctData);\r\n          }\r\n          for (let comp2 = 0; comp2 < numComp; ++comp2) {\r\n            convertToHalf(dctData[comp2], rowBlock[comp2], blockx * 64);\r\n          }\r\n        }\r\n        let offset2 = 0;\r\n        for (let comp2 = 0; comp2 < numComp; ++comp2) {\r\n          const type2 = channelData[cscSet.idx[comp2]].type;\r\n          for (let y2 = 8 * blocky; y2 < 8 * blocky + maxY; ++y2) {\r\n            offset2 = rowOffsets[comp2][y2];\r\n            for (let blockx = 0; blockx < numFullBlocksX; ++blockx) {\r\n              const src = blockx * 64 + (y2 & 7) * 8;\r\n              dataView.setUint16(offset2 + 0 * INT16_SIZE * type2, rowBlock[comp2][src + 0], true);\r\n              dataView.setUint16(offset2 + 1 * INT16_SIZE * type2, rowBlock[comp2][src + 1], true);\r\n              dataView.setUint16(offset2 + 2 * INT16_SIZE * type2, rowBlock[comp2][src + 2], true);\r\n              dataView.setUint16(offset2 + 3 * INT16_SIZE * type2, rowBlock[comp2][src + 3], true);\r\n              dataView.setUint16(offset2 + 4 * INT16_SIZE * type2, rowBlock[comp2][src + 4], true);\r\n              dataView.setUint16(offset2 + 5 * INT16_SIZE * type2, rowBlock[comp2][src + 5], true);\r\n              dataView.setUint16(offset2 + 6 * INT16_SIZE * type2, rowBlock[comp2][src + 6], true);\r\n              dataView.setUint16(offset2 + 7 * INT16_SIZE * type2, rowBlock[comp2][src + 7], true);\r\n              offset2 += 8 * INT16_SIZE * type2;\r\n            }\r\n          }\r\n          if (numFullBlocksX != numBlocksX) {\r\n            for (let y2 = 8 * blocky; y2 < 8 * blocky + maxY; ++y2) {\r\n              const offset3 = rowOffsets[comp2][y2] + 8 * numFullBlocksX * INT16_SIZE * type2;\r\n              const src = numFullBlocksX * 64 + (y2 & 7) * 8;\r\n              for (let x2 = 0; x2 < maxX; ++x2) {\r\n                dataView.setUint16(offset3 + x2 * INT16_SIZE * type2, rowBlock[comp2][src + x2], true);\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n      var halfRow = new Uint16Array(width);\r\n      var dataView = new DataView(outBuffer.buffer);\r\n      for (var comp = 0; comp < numComp; ++comp) {\r\n        channelData[cscSet.idx[comp]].decoded = true;\r\n        var type = channelData[cscSet.idx[comp]].type;\r\n        if (channelData[comp].type != 2)\r\n          continue;\r\n        for (var y = 0; y < height; ++y) {\r\n          const offset2 = rowOffsets[comp][y];\r\n          for (var x = 0; x < width; ++x) {\r\n            halfRow[x] = dataView.getUint16(offset2 + x * INT16_SIZE * type, true);\r\n          }\r\n          for (var x = 0; x < width; ++x) {\r\n            dataView.setFloat32(offset2 + x * INT16_SIZE * type, decodeFloat16(halfRow[x]), true);\r\n          }\r\n        }\r\n      }\r\n    }\r\n    function unRleAC(currAcComp, acBuffer, halfZigBlock) {\r\n      var acValue;\r\n      var dctComp = 1;\r\n      while (dctComp < 64) {\r\n        acValue = acBuffer[currAcComp.value];\r\n        if (acValue == 65280) {\r\n          dctComp = 64;\r\n        } else if (acValue >> 8 == 255) {\r\n          dctComp += acValue & 255;\r\n        } else {\r\n          halfZigBlock[dctComp] = acValue;\r\n          dctComp++;\r\n        }\r\n        currAcComp.value++;\r\n      }\r\n    }\r\n    function unZigZag(src, dst) {\r\n      dst[0] = decodeFloat16(src[0]);\r\n      dst[1] = decodeFloat16(src[1]);\r\n      dst[2] = decodeFloat16(src[5]);\r\n      dst[3] = decodeFloat16(src[6]);\r\n      dst[4] = decodeFloat16(src[14]);\r\n      dst[5] = decodeFloat16(src[15]);\r\n      dst[6] = decodeFloat16(src[27]);\r\n      dst[7] = decodeFloat16(src[28]);\r\n      dst[8] = decodeFloat16(src[2]);\r\n      dst[9] = decodeFloat16(src[4]);\r\n      dst[10] = decodeFloat16(src[7]);\r\n      dst[11] = decodeFloat16(src[13]);\r\n      dst[12] = decodeFloat16(src[16]);\r\n      dst[13] = decodeFloat16(src[26]);\r\n      dst[14] = decodeFloat16(src[29]);\r\n      dst[15] = decodeFloat16(src[42]);\r\n      dst[16] = decodeFloat16(src[3]);\r\n      dst[17] = decodeFloat16(src[8]);\r\n      dst[18] = decodeFloat16(src[12]);\r\n      dst[19] = decodeFloat16(src[17]);\r\n      dst[20] = decodeFloat16(src[25]);\r\n      dst[21] = decodeFloat16(src[30]);\r\n      dst[22] = decodeFloat16(src[41]);\r\n      dst[23] = decodeFloat16(src[43]);\r\n      dst[24] = decodeFloat16(src[9]);\r\n      dst[25] = decodeFloat16(src[11]);\r\n      dst[26] = decodeFloat16(src[18]);\r\n      dst[27] = decodeFloat16(src[24]);\r\n      dst[28] = decodeFloat16(src[31]);\r\n      dst[29] = decodeFloat16(src[40]);\r\n      dst[30] = decodeFloat16(src[44]);\r\n      dst[31] = decodeFloat16(src[53]);\r\n      dst[32] = decodeFloat16(src[10]);\r\n      dst[33] = decodeFloat16(src[19]);\r\n      dst[34] = decodeFloat16(src[23]);\r\n      dst[35] = decodeFloat16(src[32]);\r\n      dst[36] = decodeFloat16(src[39]);\r\n      dst[37] = decodeFloat16(src[45]);\r\n      dst[38] = decodeFloat16(src[52]);\r\n      dst[39] = decodeFloat16(src[54]);\r\n      dst[40] = decodeFloat16(src[20]);\r\n      dst[41] = decodeFloat16(src[22]);\r\n      dst[42] = decodeFloat16(src[33]);\r\n      dst[43] = decodeFloat16(src[38]);\r\n      dst[44] = decodeFloat16(src[46]);\r\n      dst[45] = decodeFloat16(src[51]);\r\n      dst[46] = decodeFloat16(src[55]);\r\n      dst[47] = decodeFloat16(src[60]);\r\n      dst[48] = decodeFloat16(src[21]);\r\n      dst[49] = decodeFloat16(src[34]);\r\n      dst[50] = decodeFloat16(src[37]);\r\n      dst[51] = decodeFloat16(src[47]);\r\n      dst[52] = decodeFloat16(src[50]);\r\n      dst[53] = decodeFloat16(src[56]);\r\n      dst[54] = decodeFloat16(src[59]);\r\n      dst[55] = decodeFloat16(src[61]);\r\n      dst[56] = decodeFloat16(src[35]);\r\n      dst[57] = decodeFloat16(src[36]);\r\n      dst[58] = decodeFloat16(src[48]);\r\n      dst[59] = decodeFloat16(src[49]);\r\n      dst[60] = decodeFloat16(src[57]);\r\n      dst[61] = decodeFloat16(src[58]);\r\n      dst[62] = decodeFloat16(src[62]);\r\n      dst[63] = decodeFloat16(src[63]);\r\n    }\r\n    function dctInverse(data) {\r\n      const a = 0.5 * Math.cos(3.14159 / 4);\r\n      const b = 0.5 * Math.cos(3.14159 / 16);\r\n      const c = 0.5 * Math.cos(3.14159 / 8);\r\n      const d = 0.5 * Math.cos(3 * 3.14159 / 16);\r\n      const e = 0.5 * Math.cos(5 * 3.14159 / 16);\r\n      const f = 0.5 * Math.cos(3 * 3.14159 / 8);\r\n      const g = 0.5 * Math.cos(7 * 3.14159 / 16);\r\n      var alpha = new Array(4);\r\n      var beta = new Array(4);\r\n      var theta = new Array(4);\r\n      var gamma = new Array(4);\r\n      for (var row = 0; row < 8; ++row) {\r\n        var rowPtr = row * 8;\r\n        alpha[0] = c * data[rowPtr + 2];\r\n        alpha[1] = f * data[rowPtr + 2];\r\n        alpha[2] = c * data[rowPtr + 6];\r\n        alpha[3] = f * data[rowPtr + 6];\r\n        beta[0] = b * data[rowPtr + 1] + d * data[rowPtr + 3] + e * data[rowPtr + 5] + g * data[rowPtr + 7];\r\n        beta[1] = d * data[rowPtr + 1] - g * data[rowPtr + 3] - b * data[rowPtr + 5] - e * data[rowPtr + 7];\r\n        beta[2] = e * data[rowPtr + 1] - b * data[rowPtr + 3] + g * data[rowPtr + 5] + d * data[rowPtr + 7];\r\n        beta[3] = g * data[rowPtr + 1] - e * data[rowPtr + 3] + d * data[rowPtr + 5] - b * data[rowPtr + 7];\r\n        theta[0] = a * (data[rowPtr + 0] + data[rowPtr + 4]);\r\n        theta[3] = a * (data[rowPtr + 0] - data[rowPtr + 4]);\r\n        theta[1] = alpha[0] + alpha[3];\r\n        theta[2] = alpha[1] - alpha[2];\r\n        gamma[0] = theta[0] + theta[1];\r\n        gamma[1] = theta[3] + theta[2];\r\n        gamma[2] = theta[3] - theta[2];\r\n        gamma[3] = theta[0] - theta[1];\r\n        data[rowPtr + 0] = gamma[0] + beta[0];\r\n        data[rowPtr + 1] = gamma[1] + beta[1];\r\n        data[rowPtr + 2] = gamma[2] + beta[2];\r\n        data[rowPtr + 3] = gamma[3] + beta[3];\r\n        data[rowPtr + 4] = gamma[3] - beta[3];\r\n        data[rowPtr + 5] = gamma[2] - beta[2];\r\n        data[rowPtr + 6] = gamma[1] - beta[1];\r\n        data[rowPtr + 7] = gamma[0] - beta[0];\r\n      }\r\n      for (var column = 0; column < 8; ++column) {\r\n        alpha[0] = c * data[16 + column];\r\n        alpha[1] = f * data[16 + column];\r\n        alpha[2] = c * data[48 + column];\r\n        alpha[3] = f * data[48 + column];\r\n        beta[0] = b * data[8 + column] + d * data[24 + column] + e * data[40 + column] + g * data[56 + column];\r\n        beta[1] = d * data[8 + column] - g * data[24 + column] - b * data[40 + column] - e * data[56 + column];\r\n        beta[2] = e * data[8 + column] - b * data[24 + column] + g * data[40 + column] + d * data[56 + column];\r\n        beta[3] = g * data[8 + column] - e * data[24 + column] + d * data[40 + column] - b * data[56 + column];\r\n        theta[0] = a * (data[column] + data[32 + column]);\r\n        theta[3] = a * (data[column] - data[32 + column]);\r\n        theta[1] = alpha[0] + alpha[3];\r\n        theta[2] = alpha[1] - alpha[2];\r\n        gamma[0] = theta[0] + theta[1];\r\n        gamma[1] = theta[3] + theta[2];\r\n        gamma[2] = theta[3] - theta[2];\r\n        gamma[3] = theta[0] - theta[1];\r\n        data[0 + column] = gamma[0] + beta[0];\r\n        data[8 + column] = gamma[1] + beta[1];\r\n        data[16 + column] = gamma[2] + beta[2];\r\n        data[24 + column] = gamma[3] + beta[3];\r\n        data[32 + column] = gamma[3] - beta[3];\r\n        data[40 + column] = gamma[2] - beta[2];\r\n        data[48 + column] = gamma[1] - beta[1];\r\n        data[56 + column] = gamma[0] - beta[0];\r\n      }\r\n    }\r\n    function csc709Inverse(data) {\r\n      for (var i = 0; i < 64; ++i) {\r\n        var y = data[0][i];\r\n        var cb = data[1][i];\r\n        var cr = data[2][i];\r\n        data[0][i] = y + 1.5747 * cr;\r\n        data[1][i] = y - 0.1873 * cb - 0.4682 * cr;\r\n        data[2][i] = y + 1.8556 * cb;\r\n      }\r\n    }\r\n    function convertToHalf(src, dst, idx) {\r\n      for (var i = 0; i < 64; ++i) {\r\n        dst[idx + i] = DataUtils.toHalfFloat(toLinear(src[i]));\r\n      }\r\n    }\r\n    function toLinear(float) {\r\n      if (float <= 1) {\r\n        return Math.sign(float) * Math.pow(Math.abs(float), 2.2);\r\n      } else {\r\n        return Math.sign(float) * Math.pow(logBase, Math.abs(float) - 1);\r\n      }\r\n    }\r\n    function uncompressRAW(info) {\r\n      return new DataView(info.array.buffer, info.offset.value, info.size);\r\n    }\r\n    function uncompressRLE(info) {\r\n      var compressed = info.viewer.buffer.slice(info.offset.value, info.offset.value + info.size);\r\n      var rawBuffer = new Uint8Array(decodeRunLength(compressed));\r\n      var tmpBuffer = new Uint8Array(rawBuffer.length);\r\n      predictor(rawBuffer);\r\n      interleaveScalar(rawBuffer, tmpBuffer);\r\n      return new DataView(tmpBuffer.buffer);\r\n    }\r\n    function uncompressZIP(info) {\r\n      var compressed = info.array.slice(info.offset.value, info.offset.value + info.size);\r\n      var rawBuffer = unzlibSync(compressed);\r\n      var tmpBuffer = new Uint8Array(rawBuffer.length);\r\n      predictor(rawBuffer);\r\n      interleaveScalar(rawBuffer, tmpBuffer);\r\n      return new DataView(tmpBuffer.buffer);\r\n    }\r\n    function uncompressPIZ(info) {\r\n      var inDataView = info.viewer;\r\n      var inOffset = { value: info.offset.value };\r\n      var outBuffer = new Uint16Array(info.width * info.scanlineBlockSize * (info.channels * info.type));\r\n      var bitmap = new Uint8Array(BITMAP_SIZE);\r\n      var outBufferEnd = 0;\r\n      var pizChannelData = new Array(info.channels);\r\n      for (var i = 0; i < info.channels; i++) {\r\n        pizChannelData[i] = {};\r\n        pizChannelData[i][\"start\"] = outBufferEnd;\r\n        pizChannelData[i][\"end\"] = pizChannelData[i][\"start\"];\r\n        pizChannelData[i][\"nx\"] = info.width;\r\n        pizChannelData[i][\"ny\"] = info.lines;\r\n        pizChannelData[i][\"size\"] = info.type;\r\n        outBufferEnd += pizChannelData[i].nx * pizChannelData[i].ny * pizChannelData[i].size;\r\n      }\r\n      var minNonZero = parseUint16(inDataView, inOffset);\r\n      var maxNonZero = parseUint16(inDataView, inOffset);\r\n      if (maxNonZero >= BITMAP_SIZE) {\r\n        throw \"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE\";\r\n      }\r\n      if (minNonZero <= maxNonZero) {\r\n        for (var i = 0; i < maxNonZero - minNonZero + 1; i++) {\r\n          bitmap[i + minNonZero] = parseUint8(inDataView, inOffset);\r\n        }\r\n      }\r\n      var lut = new Uint16Array(USHORT_RANGE);\r\n      var maxValue = reverseLutFromBitmap(bitmap, lut);\r\n      var length = parseUint32(inDataView, inOffset);\r\n      hufUncompress(info.array, inDataView, inOffset, length, outBuffer, outBufferEnd);\r\n      for (var i = 0; i < info.channels; ++i) {\r\n        var cd = pizChannelData[i];\r\n        for (var j = 0; j < pizChannelData[i].size; ++j) {\r\n          wav2Decode(outBuffer, cd.start + j, cd.nx, cd.size, cd.ny, cd.nx * cd.size, maxValue);\r\n        }\r\n      }\r\n      applyLut(lut, outBuffer, outBufferEnd);\r\n      var tmpOffset2 = 0;\r\n      var tmpBuffer = new Uint8Array(outBuffer.buffer.byteLength);\r\n      for (var y = 0; y < info.lines; y++) {\r\n        for (var c = 0; c < info.channels; c++) {\r\n          var cd = pizChannelData[c];\r\n          var n = cd.nx * cd.size;\r\n          var cp = new Uint8Array(outBuffer.buffer, cd.end * INT16_SIZE, n * INT16_SIZE);\r\n          tmpBuffer.set(cp, tmpOffset2);\r\n          tmpOffset2 += n * INT16_SIZE;\r\n          cd.end += n;\r\n        }\r\n      }\r\n      return new DataView(tmpBuffer.buffer);\r\n    }\r\n    function uncompressPXR(info) {\r\n      var compressed = info.array.slice(info.offset.value, info.offset.value + info.size);\r\n      var rawBuffer = unzlibSync(compressed);\r\n      const sz = info.lines * info.channels * info.width;\r\n      const tmpBuffer = info.type == 1 ? new Uint16Array(sz) : new Uint32Array(sz);\r\n      let tmpBufferEnd = 0;\r\n      let writePtr = 0;\r\n      const ptr = new Array(4);\r\n      for (let y = 0; y < info.lines; y++) {\r\n        for (let c = 0; c < info.channels; c++) {\r\n          let pixel = 0;\r\n          switch (info.type) {\r\n            case 1:\r\n              ptr[0] = tmpBufferEnd;\r\n              ptr[1] = ptr[0] + info.width;\r\n              tmpBufferEnd = ptr[1] + info.width;\r\n              for (let j = 0; j < info.width; ++j) {\r\n                const diff = rawBuffer[ptr[0]++] << 8 | rawBuffer[ptr[1]++];\r\n                pixel += diff;\r\n                tmpBuffer[writePtr] = pixel;\r\n                writePtr++;\r\n              }\r\n              break;\r\n            case 2:\r\n              ptr[0] = tmpBufferEnd;\r\n              ptr[1] = ptr[0] + info.width;\r\n              ptr[2] = ptr[1] + info.width;\r\n              tmpBufferEnd = ptr[2] + info.width;\r\n              for (let j = 0; j < info.width; ++j) {\r\n                const diff = rawBuffer[ptr[0]++] << 24 | rawBuffer[ptr[1]++] << 16 | rawBuffer[ptr[2]++] << 8;\r\n                pixel += diff;\r\n                tmpBuffer[writePtr] = pixel;\r\n                writePtr++;\r\n              }\r\n              break;\r\n          }\r\n        }\r\n      }\r\n      return new DataView(tmpBuffer.buffer);\r\n    }\r\n    function uncompressDWA(info) {\r\n      var inDataView = info.viewer;\r\n      var inOffset = { value: info.offset.value };\r\n      var outBuffer = new Uint8Array(info.width * info.lines * (info.channels * info.type * INT16_SIZE));\r\n      var dwaHeader = {\r\n        version: parseInt64(inDataView, inOffset),\r\n        unknownUncompressedSize: parseInt64(inDataView, inOffset),\r\n        unknownCompressedSize: parseInt64(inDataView, inOffset),\r\n        acCompressedSize: parseInt64(inDataView, inOffset),\r\n        dcCompressedSize: parseInt64(inDataView, inOffset),\r\n        rleCompressedSize: parseInt64(inDataView, inOffset),\r\n        rleUncompressedSize: parseInt64(inDataView, inOffset),\r\n        rleRawSize: parseInt64(inDataView, inOffset),\r\n        totalAcUncompressedCount: parseInt64(inDataView, inOffset),\r\n        totalDcUncompressedCount: parseInt64(inDataView, inOffset),\r\n        acCompression: parseInt64(inDataView, inOffset)\r\n      };\r\n      if (dwaHeader.version < 2) {\r\n        throw \"EXRLoader.parse: \" + EXRHeader.compression + \" version \" + dwaHeader.version + \" is unsupported\";\r\n      }\r\n      var channelRules = new Array();\r\n      var ruleSize = parseUint16(inDataView, inOffset) - INT16_SIZE;\r\n      while (ruleSize > 0) {\r\n        var name = parseNullTerminatedString(inDataView.buffer, inOffset);\r\n        var value = parseUint8(inDataView, inOffset);\r\n        var compression = value >> 2 & 3;\r\n        var csc = (value >> 4) - 1;\r\n        var index = new Int8Array([csc])[0];\r\n        var type = parseUint8(inDataView, inOffset);\r\n        channelRules.push({\r\n          name,\r\n          index,\r\n          type,\r\n          compression\r\n        });\r\n        ruleSize -= name.length + 3;\r\n      }\r\n      var channels = EXRHeader.channels;\r\n      var channelData = new Array(info.channels);\r\n      for (var i = 0; i < info.channels; ++i) {\r\n        var cd = channelData[i] = {};\r\n        var channel = channels[i];\r\n        cd.name = channel.name;\r\n        cd.compression = UNKNOWN;\r\n        cd.decoded = false;\r\n        cd.type = channel.pixelType;\r\n        cd.pLinear = channel.pLinear;\r\n        cd.width = info.width;\r\n        cd.height = info.lines;\r\n      }\r\n      var cscSet = {\r\n        idx: new Array(3)\r\n      };\r\n      for (var offset2 = 0; offset2 < info.channels; ++offset2) {\r\n        var cd = channelData[offset2];\r\n        for (var i = 0; i < channelRules.length; ++i) {\r\n          var rule = channelRules[i];\r\n          if (cd.name == rule.name) {\r\n            cd.compression = rule.compression;\r\n            if (rule.index >= 0) {\r\n              cscSet.idx[rule.index] = offset2;\r\n            }\r\n            cd.offset = offset2;\r\n          }\r\n        }\r\n      }\r\n      if (dwaHeader.acCompressedSize > 0) {\r\n        switch (dwaHeader.acCompression) {\r\n          case STATIC_HUFFMAN:\r\n            var acBuffer = new Uint16Array(dwaHeader.totalAcUncompressedCount);\r\n            hufUncompress(\r\n              info.array,\r\n              inDataView,\r\n              inOffset,\r\n              dwaHeader.acCompressedSize,\r\n              acBuffer,\r\n              dwaHeader.totalAcUncompressedCount\r\n            );\r\n            break;\r\n          case DEFLATE:\r\n            var compressed = info.array.slice(inOffset.value, inOffset.value + dwaHeader.totalAcUncompressedCount);\r\n            var data = unzlibSync(compressed);\r\n            var acBuffer = new Uint16Array(data.buffer);\r\n            inOffset.value += dwaHeader.totalAcUncompressedCount;\r\n            break;\r\n        }\r\n      }\r\n      if (dwaHeader.dcCompressedSize > 0) {\r\n        var zlibInfo = {\r\n          array: info.array,\r\n          offset: inOffset,\r\n          size: dwaHeader.dcCompressedSize\r\n        };\r\n        var dcBuffer = new Uint16Array(uncompressZIP(zlibInfo).buffer);\r\n        inOffset.value += dwaHeader.dcCompressedSize;\r\n      }\r\n      if (dwaHeader.rleRawSize > 0) {\r\n        var compressed = info.array.slice(inOffset.value, inOffset.value + dwaHeader.rleCompressedSize);\r\n        var data = unzlibSync(compressed);\r\n        var rleBuffer = decodeRunLength(data.buffer);\r\n        inOffset.value += dwaHeader.rleCompressedSize;\r\n      }\r\n      var outBufferEnd = 0;\r\n      var rowOffsets = new Array(channelData.length);\r\n      for (var i = 0; i < rowOffsets.length; ++i) {\r\n        rowOffsets[i] = new Array();\r\n      }\r\n      for (var y = 0; y < info.lines; ++y) {\r\n        for (var chan = 0; chan < channelData.length; ++chan) {\r\n          rowOffsets[chan].push(outBufferEnd);\r\n          outBufferEnd += channelData[chan].width * info.type * INT16_SIZE;\r\n        }\r\n      }\r\n      lossyDctDecode(cscSet, rowOffsets, channelData, acBuffer, dcBuffer, outBuffer);\r\n      for (var i = 0; i < channelData.length; ++i) {\r\n        var cd = channelData[i];\r\n        if (cd.decoded)\r\n          continue;\r\n        switch (cd.compression) {\r\n          case RLE:\r\n            var row = 0;\r\n            var rleOffset = 0;\r\n            for (var y = 0; y < info.lines; ++y) {\r\n              var rowOffsetBytes = rowOffsets[i][row];\r\n              for (var x = 0; x < cd.width; ++x) {\r\n                for (var byte = 0; byte < INT16_SIZE * cd.type; ++byte) {\r\n                  outBuffer[rowOffsetBytes++] = rleBuffer[rleOffset + byte * cd.width * cd.height];\r\n                }\r\n                rleOffset++;\r\n              }\r\n              row++;\r\n            }\r\n            break;\r\n          case LOSSY_DCT:\r\n          default:\r\n            throw \"EXRLoader.parse: unsupported channel compression\";\r\n        }\r\n      }\r\n      return new DataView(outBuffer.buffer);\r\n    }\r\n    function parseNullTerminatedString(buffer2, offset2) {\r\n      var uintBuffer = new Uint8Array(buffer2);\r\n      var endOffset = 0;\r\n      while (uintBuffer[offset2.value + endOffset] != 0) {\r\n        endOffset += 1;\r\n      }\r\n      var stringValue = new TextDecoder().decode(uintBuffer.slice(offset2.value, offset2.value + endOffset));\r\n      offset2.value = offset2.value + endOffset + 1;\r\n      return stringValue;\r\n    }\r\n    function parseFixedLengthString(buffer2, offset2, size) {\r\n      var stringValue = new TextDecoder().decode(new Uint8Array(buffer2).slice(offset2.value, offset2.value + size));\r\n      offset2.value = offset2.value + size;\r\n      return stringValue;\r\n    }\r\n    function parseRational(dataView, offset2) {\r\n      var x = parseInt32(dataView, offset2);\r\n      var y = parseUint32(dataView, offset2);\r\n      return [x, y];\r\n    }\r\n    function parseTimecode(dataView, offset2) {\r\n      var x = parseUint32(dataView, offset2);\r\n      var y = parseUint32(dataView, offset2);\r\n      return [x, y];\r\n    }\r\n    function parseInt32(dataView, offset2) {\r\n      var Int32 = dataView.getInt32(offset2.value, true);\r\n      offset2.value = offset2.value + INT32_SIZE;\r\n      return Int32;\r\n    }\r\n    function parseUint32(dataView, offset2) {\r\n      var Uint32 = dataView.getUint32(offset2.value, true);\r\n      offset2.value = offset2.value + INT32_SIZE;\r\n      return Uint32;\r\n    }\r\n    function parseUint8Array(uInt8Array2, offset2) {\r\n      var Uint8 = uInt8Array2[offset2.value];\r\n      offset2.value = offset2.value + INT8_SIZE;\r\n      return Uint8;\r\n    }\r\n    function parseUint8(dataView, offset2) {\r\n      var Uint8 = dataView.getUint8(offset2.value);\r\n      offset2.value = offset2.value + INT8_SIZE;\r\n      return Uint8;\r\n    }\r\n    const parseInt64 = function(dataView, offset2) {\r\n      let int;\r\n      if (\"getBigInt64\" in DataView.prototype) {\r\n        int = Number(dataView.getBigInt64(offset2.value, true));\r\n      } else {\r\n        int = dataView.getUint32(offset2.value + 4, true) + Number(dataView.getUint32(offset2.value, true) << 32);\r\n      }\r\n      offset2.value += ULONG_SIZE;\r\n      return int;\r\n    };\r\n    function parseFloat32(dataView, offset2) {\r\n      var float = dataView.getFloat32(offset2.value, true);\r\n      offset2.value += FLOAT32_SIZE;\r\n      return float;\r\n    }\r\n    function decodeFloat32(dataView, offset2) {\r\n      return DataUtils.toHalfFloat(parseFloat32(dataView, offset2));\r\n    }\r\n    function decodeFloat16(binary) {\r\n      var exponent = (binary & 31744) >> 10, fraction = binary & 1023;\r\n      return (binary >> 15 ? -1 : 1) * (exponent ? exponent === 31 ? fraction ? NaN : Infinity : Math.pow(2, exponent - 15) * (1 + fraction / 1024) : 6103515625e-14 * (fraction / 1024));\r\n    }\r\n    function parseUint16(dataView, offset2) {\r\n      var Uint16 = dataView.getUint16(offset2.value, true);\r\n      offset2.value += INT16_SIZE;\r\n      return Uint16;\r\n    }\r\n    function parseFloat16(buffer2, offset2) {\r\n      return decodeFloat16(parseUint16(buffer2, offset2));\r\n    }\r\n    function parseChlist(dataView, buffer2, offset2, size) {\r\n      var startOffset = offset2.value;\r\n      var channels = [];\r\n      while (offset2.value < startOffset + size - 1) {\r\n        var name = parseNullTerminatedString(buffer2, offset2);\r\n        var pixelType = parseInt32(dataView, offset2);\r\n        var pLinear = parseUint8(dataView, offset2);\r\n        offset2.value += 3;\r\n        var xSampling = parseInt32(dataView, offset2);\r\n        var ySampling = parseInt32(dataView, offset2);\r\n        channels.push({\r\n          name,\r\n          pixelType,\r\n          pLinear,\r\n          xSampling,\r\n          ySampling\r\n        });\r\n      }\r\n      offset2.value += 1;\r\n      return channels;\r\n    }\r\n    function parseChromaticities(dataView, offset2) {\r\n      var redX = parseFloat32(dataView, offset2);\r\n      var redY = parseFloat32(dataView, offset2);\r\n      var greenX = parseFloat32(dataView, offset2);\r\n      var greenY = parseFloat32(dataView, offset2);\r\n      var blueX = parseFloat32(dataView, offset2);\r\n      var blueY = parseFloat32(dataView, offset2);\r\n      var whiteX = parseFloat32(dataView, offset2);\r\n      var whiteY = parseFloat32(dataView, offset2);\r\n      return {\r\n        redX,\r\n        redY,\r\n        greenX,\r\n        greenY,\r\n        blueX,\r\n        blueY,\r\n        whiteX,\r\n        whiteY\r\n      };\r\n    }\r\n    function parseCompression(dataView, offset2) {\r\n      var compressionCodes = [\r\n        \"NO_COMPRESSION\",\r\n        \"RLE_COMPRESSION\",\r\n        \"ZIPS_COMPRESSION\",\r\n        \"ZIP_COMPRESSION\",\r\n        \"PIZ_COMPRESSION\",\r\n        \"PXR24_COMPRESSION\",\r\n        \"B44_COMPRESSION\",\r\n        \"B44A_COMPRESSION\",\r\n        \"DWAA_COMPRESSION\",\r\n        \"DWAB_COMPRESSION\"\r\n      ];\r\n      var compression = parseUint8(dataView, offset2);\r\n      return compressionCodes[compression];\r\n    }\r\n    function parseBox2i(dataView, offset2) {\r\n      var xMin = parseUint32(dataView, offset2);\r\n      var yMin = parseUint32(dataView, offset2);\r\n      var xMax = parseUint32(dataView, offset2);\r\n      var yMax = parseUint32(dataView, offset2);\r\n      return { xMin, yMin, xMax, yMax };\r\n    }\r\n    function parseLineOrder(dataView, offset2) {\r\n      var lineOrders = [\"INCREASING_Y\"];\r\n      var lineOrder = parseUint8(dataView, offset2);\r\n      return lineOrders[lineOrder];\r\n    }\r\n    function parseV2f(dataView, offset2) {\r\n      var x = parseFloat32(dataView, offset2);\r\n      var y = parseFloat32(dataView, offset2);\r\n      return [x, y];\r\n    }\r\n    function parseV3f(dataView, offset2) {\r\n      var x = parseFloat32(dataView, offset2);\r\n      var y = parseFloat32(dataView, offset2);\r\n      var z = parseFloat32(dataView, offset2);\r\n      return [x, y, z];\r\n    }\r\n    function parseValue(dataView, buffer2, offset2, type, size) {\r\n      if (type === \"string\" || type === \"stringvector\" || type === \"iccProfile\") {\r\n        return parseFixedLengthString(buffer2, offset2, size);\r\n      } else if (type === \"chlist\") {\r\n        return parseChlist(dataView, buffer2, offset2, size);\r\n      } else if (type === \"chromaticities\") {\r\n        return parseChromaticities(dataView, offset2);\r\n      } else if (type === \"compression\") {\r\n        return parseCompression(dataView, offset2);\r\n      } else if (type === \"box2i\") {\r\n        return parseBox2i(dataView, offset2);\r\n      } else if (type === \"lineOrder\") {\r\n        return parseLineOrder(dataView, offset2);\r\n      } else if (type === \"float\") {\r\n        return parseFloat32(dataView, offset2);\r\n      } else if (type === \"v2f\") {\r\n        return parseV2f(dataView, offset2);\r\n      } else if (type === \"v3f\") {\r\n        return parseV3f(dataView, offset2);\r\n      } else if (type === \"int\") {\r\n        return parseInt32(dataView, offset2);\r\n      } else if (type === \"rational\") {\r\n        return parseRational(dataView, offset2);\r\n      } else if (type === \"timecode\") {\r\n        return parseTimecode(dataView, offset2);\r\n      } else if (type === \"preview\") {\r\n        offset2.value += size;\r\n        return \"skipped\";\r\n      } else {\r\n        offset2.value += size;\r\n        return void 0;\r\n      }\r\n    }\r\n    function parseHeader(dataView, buffer2, offset2) {\r\n      const EXRHeader2 = {};\r\n      if (dataView.getUint32(0, true) != 20000630) {\r\n        throw \"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.\";\r\n      }\r\n      EXRHeader2.version = dataView.getUint8(4);\r\n      const spec = dataView.getUint8(5);\r\n      EXRHeader2.spec = {\r\n        singleTile: !!(spec & 2),\r\n        longName: !!(spec & 4),\r\n        deepFormat: !!(spec & 8),\r\n        multiPart: !!(spec & 16)\r\n      };\r\n      offset2.value = 8;\r\n      var keepReading = true;\r\n      while (keepReading) {\r\n        var attributeName = parseNullTerminatedString(buffer2, offset2);\r\n        if (attributeName == 0) {\r\n          keepReading = false;\r\n        } else {\r\n          var attributeType = parseNullTerminatedString(buffer2, offset2);\r\n          var attributeSize = parseUint32(dataView, offset2);\r\n          var attributeValue = parseValue(dataView, buffer2, offset2, attributeType, attributeSize);\r\n          if (attributeValue === void 0) {\r\n            console.warn(`EXRLoader.parse: skipped unknown header attribute type '${attributeType}'.`);\r\n          } else {\r\n            EXRHeader2[attributeName] = attributeValue;\r\n          }\r\n        }\r\n      }\r\n      if (spec != 0) {\r\n        console.error(\"EXRHeader:\", EXRHeader2);\r\n        throw \"THREE.EXRLoader: provided file is currently unsupported.\";\r\n      }\r\n      return EXRHeader2;\r\n    }\r\n    function setupDecoder(EXRHeader2, dataView, uInt8Array2, offset2, outputType) {\r\n      const EXRDecoder2 = {\r\n        size: 0,\r\n        viewer: dataView,\r\n        array: uInt8Array2,\r\n        offset: offset2,\r\n        width: EXRHeader2.dataWindow.xMax - EXRHeader2.dataWindow.xMin + 1,\r\n        height: EXRHeader2.dataWindow.yMax - EXRHeader2.dataWindow.yMin + 1,\r\n        channels: EXRHeader2.channels.length,\r\n        bytesPerLine: null,\r\n        lines: null,\r\n        inputSize: null,\r\n        type: EXRHeader2.channels[0].pixelType,\r\n        uncompress: null,\r\n        getter: null,\r\n        format: null,\r\n        [hasColorSpace ? \"colorSpace\" : \"encoding\"]: null\r\n      };\r\n      switch (EXRHeader2.compression) {\r\n        case \"NO_COMPRESSION\":\r\n          EXRDecoder2.lines = 1;\r\n          EXRDecoder2.uncompress = uncompressRAW;\r\n          break;\r\n        case \"RLE_COMPRESSION\":\r\n          EXRDecoder2.lines = 1;\r\n          EXRDecoder2.uncompress = uncompressRLE;\r\n          break;\r\n        case \"ZIPS_COMPRESSION\":\r\n          EXRDecoder2.lines = 1;\r\n          EXRDecoder2.uncompress = uncompressZIP;\r\n          break;\r\n        case \"ZIP_COMPRESSION\":\r\n          EXRDecoder2.lines = 16;\r\n          EXRDecoder2.uncompress = uncompressZIP;\r\n          break;\r\n        case \"PIZ_COMPRESSION\":\r\n          EXRDecoder2.lines = 32;\r\n          EXRDecoder2.uncompress = uncompressPIZ;\r\n          break;\r\n        case \"PXR24_COMPRESSION\":\r\n          EXRDecoder2.lines = 16;\r\n          EXRDecoder2.uncompress = uncompressPXR;\r\n          break;\r\n        case \"DWAA_COMPRESSION\":\r\n          EXRDecoder2.lines = 32;\r\n          EXRDecoder2.uncompress = uncompressDWA;\r\n          break;\r\n        case \"DWAB_COMPRESSION\":\r\n          EXRDecoder2.lines = 256;\r\n          EXRDecoder2.uncompress = uncompressDWA;\r\n          break;\r\n        default:\r\n          throw \"EXRLoader.parse: \" + EXRHeader2.compression + \" is unsupported\";\r\n      }\r\n      EXRDecoder2.scanlineBlockSize = EXRDecoder2.lines;\r\n      if (EXRDecoder2.type == 1) {\r\n        switch (outputType) {\r\n          case FloatType:\r\n            EXRDecoder2.getter = parseFloat16;\r\n            EXRDecoder2.inputSize = INT16_SIZE;\r\n            break;\r\n          case HalfFloatType:\r\n            EXRDecoder2.getter = parseUint16;\r\n            EXRDecoder2.inputSize = INT16_SIZE;\r\n            break;\r\n        }\r\n      } else if (EXRDecoder2.type == 2) {\r\n        switch (outputType) {\r\n          case FloatType:\r\n            EXRDecoder2.getter = parseFloat32;\r\n            EXRDecoder2.inputSize = FLOAT32_SIZE;\r\n            break;\r\n          case HalfFloatType:\r\n            EXRDecoder2.getter = decodeFloat32;\r\n            EXRDecoder2.inputSize = FLOAT32_SIZE;\r\n        }\r\n      } else {\r\n        throw \"EXRLoader.parse: unsupported pixelType \" + EXRDecoder2.type + \" for \" + EXRHeader2.compression + \".\";\r\n      }\r\n      EXRDecoder2.blockCount = (EXRHeader2.dataWindow.yMax + 1) / EXRDecoder2.scanlineBlockSize;\r\n      for (var i = 0; i < EXRDecoder2.blockCount; i++)\r\n        parseInt64(dataView, offset2);\r\n      EXRDecoder2.outputChannels = EXRDecoder2.channels == 3 ? 4 : EXRDecoder2.channels;\r\n      const size = EXRDecoder2.width * EXRDecoder2.height * EXRDecoder2.outputChannels;\r\n      switch (outputType) {\r\n        case FloatType:\r\n          EXRDecoder2.byteArray = new Float32Array(size);\r\n          if (EXRDecoder2.channels < EXRDecoder2.outputChannels)\r\n            EXRDecoder2.byteArray.fill(1, 0, size);\r\n          break;\r\n        case HalfFloatType:\r\n          EXRDecoder2.byteArray = new Uint16Array(size);\r\n          if (EXRDecoder2.channels < EXRDecoder2.outputChannels)\r\n            EXRDecoder2.byteArray.fill(15360, 0, size);\r\n          break;\r\n        default:\r\n          console.error(\"THREE.EXRLoader: unsupported type: \", outputType);\r\n          break;\r\n      }\r\n      EXRDecoder2.bytesPerLine = EXRDecoder2.width * EXRDecoder2.inputSize * EXRDecoder2.channels;\r\n      if (EXRDecoder2.outputChannels == 4)\r\n        EXRDecoder2.format = RGBAFormat;\r\n      else\r\n        EXRDecoder2.format = RedFormat;\r\n      if (hasColorSpace)\r\n        EXRDecoder2.colorSpace = \"srgb-linear\";\r\n      else\r\n        EXRDecoder2.encoding = 3e3;\r\n      return EXRDecoder2;\r\n    }\r\n    const bufferDataView = new DataView(buffer);\r\n    const uInt8Array = new Uint8Array(buffer);\r\n    const offset = { value: 0 };\r\n    const EXRHeader = parseHeader(bufferDataView, buffer, offset);\r\n    const EXRDecoder = setupDecoder(EXRHeader, bufferDataView, uInt8Array, offset, this.type);\r\n    const tmpOffset = { value: 0 };\r\n    const channelOffsets = { R: 0, G: 1, B: 2, A: 3, Y: 0 };\r\n    for (let scanlineBlockIdx = 0; scanlineBlockIdx < EXRDecoder.height / EXRDecoder.scanlineBlockSize; scanlineBlockIdx++) {\r\n      const line = parseUint32(bufferDataView, offset);\r\n      EXRDecoder.size = parseUint32(bufferDataView, offset);\r\n      EXRDecoder.lines = line + EXRDecoder.scanlineBlockSize > EXRDecoder.height ? EXRDecoder.height - line : EXRDecoder.scanlineBlockSize;\r\n      const isCompressed = EXRDecoder.size < EXRDecoder.lines * EXRDecoder.bytesPerLine;\r\n      const viewer = isCompressed ? EXRDecoder.uncompress(EXRDecoder) : uncompressRAW(EXRDecoder);\r\n      offset.value += EXRDecoder.size;\r\n      for (let line_y = 0; line_y < EXRDecoder.scanlineBlockSize; line_y++) {\r\n        const true_y = line_y + scanlineBlockIdx * EXRDecoder.scanlineBlockSize;\r\n        if (true_y >= EXRDecoder.height)\r\n          break;\r\n        for (let channelID = 0; channelID < EXRDecoder.channels; channelID++) {\r\n          const cOff = channelOffsets[EXRHeader.channels[channelID].name];\r\n          for (let x = 0; x < EXRDecoder.width; x++) {\r\n            tmpOffset.value = (line_y * (EXRDecoder.channels * EXRDecoder.width) + channelID * EXRDecoder.width + x) * EXRDecoder.inputSize;\r\n            const outIndex = (EXRDecoder.height - 1 - true_y) * (EXRDecoder.width * EXRDecoder.outputChannels) + x * EXRDecoder.outputChannels + cOff;\r\n            EXRDecoder.byteArray[outIndex] = EXRDecoder.getter(viewer, tmpOffset);\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return {\r\n      header: EXRHeader,\r\n      width: EXRDecoder.width,\r\n      height: EXRDecoder.height,\r\n      data: EXRDecoder.byteArray,\r\n      format: EXRDecoder.format,\r\n      [hasColorSpace ? \"colorSpace\" : \"encoding\"]: EXRDecoder[hasColorSpace ? \"colorSpace\" : \"encoding\"],\r\n      type: this.type\r\n    };\r\n  }\r\n  setDataType(value) {\r\n    this.type = value;\r\n    return this;\r\n  }\r\n  load(url, onLoad, onProgress, onError) {\r\n    function onLoadCallback(texture, texData) {\r\n      if (hasColorSpace)\r\n        texture.colorSpace = texData.colorSpace;\r\n      else\r\n        texture.encoding = texData.encoding;\r\n      texture.minFilter = LinearFilter;\r\n      texture.magFilter = LinearFilter;\r\n      texture.generateMipmaps = false;\r\n      texture.flipY = false;\r\n      if (onLoad)\r\n        onLoad(texture, texData);\r\n    }\r\n    return super.load(url, onLoadCallback, onProgress, onError);\r\n  }\r\n}\r\nexport {\r\n  EXRLoader\r\n};\r\n", "var __defProp = Object.defineProperty;\r\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\r\nvar __publicField = (obj, key, value) => {\r\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\r\n  return value;\r\n};\r\nimport { Loader, RGBAFormat, RGBA_ASTC_4x4_Format, RGBA_BPTC_Format, RGBA_ETC2_EAC_Format, RGBA_PVRTC_4BPPV1_Format, RGBA_S3TC_DXT5_Format, RGB_ETC1_Format, RGB_ETC2_Format, RGB_PVRTC_4BPPV1_Format, RGB_S3TC_DXT1_Format, FileLoader, CompressedTexture, UnsignedByteType, LinearFilter, LinearMipmapLinearFilter } from \"three\";\r\nconst _taskCache = /* @__PURE__ */ new WeakMap();\r\nconst _BasisTextureLoader = class extends Loader {\r\n  constructor(manager) {\r\n    super(manager);\r\n    this.transcoderPath = \"\";\r\n    this.transcoderBinary = null;\r\n    this.transcoderPending = null;\r\n    this.workerLimit = 4;\r\n    this.workerPool = [];\r\n    this.workerNextTaskID = 1;\r\n    this.workerSourceURL = \"\";\r\n    this.workerConfig = null;\r\n  }\r\n  setTranscoderPath(path) {\r\n    this.transcoderPath = path;\r\n    return this;\r\n  }\r\n  setWorkerLimit(workerLimit) {\r\n    this.workerLimit = workerLimit;\r\n    return this;\r\n  }\r\n  detectSupport(renderer) {\r\n    this.workerConfig = {\r\n      astcSupported: renderer.extensions.has(\"WEBGL_compressed_texture_astc\"),\r\n      etc1Supported: renderer.extensions.has(\"WEBGL_compressed_texture_etc1\"),\r\n      etc2Supported: renderer.extensions.has(\"WEBGL_compressed_texture_etc\"),\r\n      dxtSupported: renderer.extensions.has(\"WEBGL_compressed_texture_s3tc\"),\r\n      bptcSupported: renderer.extensions.has(\"EXT_texture_compression_bptc\"),\r\n      pvrtcSupported: renderer.extensions.has(\"WEBGL_compressed_texture_pvrtc\") || renderer.extensions.has(\"WEBKIT_WEBGL_compressed_texture_pvrtc\")\r\n    };\r\n    return this;\r\n  }\r\n  load(url, onLoad, onProgress, onError) {\r\n    const loader = new FileLoader(this.manager);\r\n    loader.setResponseType(\"arraybuffer\");\r\n    loader.setWithCredentials(this.withCredentials);\r\n    const texture = new CompressedTexture();\r\n    loader.load(\r\n      url,\r\n      (buffer) => {\r\n        if (_taskCache.has(buffer)) {\r\n          const cachedTask = _taskCache.get(buffer);\r\n          return cachedTask.promise.then(onLoad).catch(onError);\r\n        }\r\n        this._createTexture([buffer]).then(function(_texture) {\r\n          texture.copy(_texture);\r\n          texture.needsUpdate = true;\r\n          if (onLoad)\r\n            onLoad(texture);\r\n        }).catch(onError);\r\n      },\r\n      onProgress,\r\n      onError\r\n    );\r\n    return texture;\r\n  }\r\n  /** Low-level transcoding API, exposed for use by KTX2Loader. */\r\n  parseInternalAsync(options) {\r\n    const { levels } = options;\r\n    const buffers = /* @__PURE__ */ new Set();\r\n    for (let i = 0; i < levels.length; i++) {\r\n      buffers.add(levels[i].data.buffer);\r\n    }\r\n    return this._createTexture(Array.from(buffers), { ...options, lowLevel: true });\r\n  }\r\n  /**\r\n   * @param {ArrayBuffer[]} buffers\r\n   * @param {object?} config\r\n   * @return {Promise<CompressedTexture>}\r\n   */\r\n  _createTexture(buffers, config = {}) {\r\n    let worker;\r\n    let taskID;\r\n    const taskConfig = config;\r\n    let taskCost = 0;\r\n    for (let i = 0; i < buffers.length; i++) {\r\n      taskCost += buffers[i].byteLength;\r\n    }\r\n    const texturePending = this._allocateWorker(taskCost).then((_worker) => {\r\n      worker = _worker;\r\n      taskID = this.workerNextTaskID++;\r\n      return new Promise((resolve, reject) => {\r\n        worker._callbacks[taskID] = { resolve, reject };\r\n        worker.postMessage({ type: \"transcode\", id: taskID, buffers, taskConfig }, buffers);\r\n      });\r\n    }).then((message) => {\r\n      const { mipmaps, width, height, format } = message;\r\n      const texture = new CompressedTexture(mipmaps, width, height, format, UnsignedByteType);\r\n      texture.minFilter = mipmaps.length === 1 ? LinearFilter : LinearMipmapLinearFilter;\r\n      texture.magFilter = LinearFilter;\r\n      texture.generateMipmaps = false;\r\n      texture.needsUpdate = true;\r\n      return texture;\r\n    });\r\n    texturePending.catch(() => true).then(() => {\r\n      if (worker && taskID) {\r\n        worker._taskLoad -= taskCost;\r\n        delete worker._callbacks[taskID];\r\n      }\r\n    });\r\n    _taskCache.set(buffers[0], { promise: texturePending });\r\n    return texturePending;\r\n  }\r\n  _initTranscoder() {\r\n    if (!this.transcoderPending) {\r\n      const jsLoader = new FileLoader(this.manager);\r\n      jsLoader.setPath(this.transcoderPath);\r\n      jsLoader.setWithCredentials(this.withCredentials);\r\n      const jsContent = new Promise((resolve, reject) => {\r\n        jsLoader.load(\"basis_transcoder.js\", resolve, void 0, reject);\r\n      });\r\n      const binaryLoader = new FileLoader(this.manager);\r\n      binaryLoader.setPath(this.transcoderPath);\r\n      binaryLoader.setResponseType(\"arraybuffer\");\r\n      binaryLoader.setWithCredentials(this.withCredentials);\r\n      const binaryContent = new Promise((resolve, reject) => {\r\n        binaryLoader.load(\"basis_transcoder.wasm\", resolve, void 0, reject);\r\n      });\r\n      this.transcoderPending = Promise.all([jsContent, binaryContent]).then(([jsContent2, binaryContent2]) => {\r\n        const fn = _BasisTextureLoader.BasisWorker.toString();\r\n        const body = [\r\n          \"/* constants */\",\r\n          \"let _EngineFormat = \" + JSON.stringify(_BasisTextureLoader.EngineFormat),\r\n          \"let _TranscoderFormat = \" + JSON.stringify(_BasisTextureLoader.TranscoderFormat),\r\n          \"let _BasisFormat = \" + JSON.stringify(_BasisTextureLoader.BasisFormat),\r\n          \"/* basis_transcoder.js */\",\r\n          jsContent2,\r\n          \"/* worker */\",\r\n          fn.substring(fn.indexOf(\"{\") + 1, fn.lastIndexOf(\"}\"))\r\n        ].join(\"\\n\");\r\n        this.workerSourceURL = URL.createObjectURL(new Blob([body]));\r\n        this.transcoderBinary = binaryContent2;\r\n      });\r\n    }\r\n    return this.transcoderPending;\r\n  }\r\n  _allocateWorker(taskCost) {\r\n    return this._initTranscoder().then(() => {\r\n      if (this.workerPool.length < this.workerLimit) {\r\n        const worker2 = new Worker(this.workerSourceURL);\r\n        worker2._callbacks = {};\r\n        worker2._taskLoad = 0;\r\n        worker2.postMessage({\r\n          type: \"init\",\r\n          config: this.workerConfig,\r\n          transcoderBinary: this.transcoderBinary\r\n        });\r\n        worker2.onmessage = function(e) {\r\n          const message = e.data;\r\n          switch (message.type) {\r\n            case \"transcode\":\r\n              worker2._callbacks[message.id].resolve(message);\r\n              break;\r\n            case \"error\":\r\n              worker2._callbacks[message.id].reject(message);\r\n              break;\r\n            default:\r\n              console.error('THREE.BasisTextureLoader: Unexpected message, \"' + message.type + '\"');\r\n          }\r\n        };\r\n        this.workerPool.push(worker2);\r\n      } else {\r\n        this.workerPool.sort(function(a, b) {\r\n          return a._taskLoad > b._taskLoad ? -1 : 1;\r\n        });\r\n      }\r\n      const worker = this.workerPool[this.workerPool.length - 1];\r\n      worker._taskLoad += taskCost;\r\n      return worker;\r\n    });\r\n  }\r\n  dispose() {\r\n    for (let i = 0; i < this.workerPool.length; i++) {\r\n      this.workerPool[i].terminate();\r\n    }\r\n    this.workerPool.length = 0;\r\n    return this;\r\n  }\r\n};\r\nlet BasisTextureLoader = _BasisTextureLoader;\r\n/* CONSTANTS */\r\n__publicField(BasisTextureLoader, \"BasisFormat\", {\r\n  ETC1S: 0,\r\n  UASTC_4x4: 1\r\n});\r\n__publicField(BasisTextureLoader, \"TranscoderFormat\", {\r\n  ETC1: 0,\r\n  ETC2: 1,\r\n  BC1: 2,\r\n  BC3: 3,\r\n  BC4: 4,\r\n  BC5: 5,\r\n  BC7_M6_OPAQUE_ONLY: 6,\r\n  BC7_M5: 7,\r\n  PVRTC1_4_RGB: 8,\r\n  PVRTC1_4_RGBA: 9,\r\n  ASTC_4x4: 10,\r\n  ATC_RGB: 11,\r\n  ATC_RGBA_INTERPOLATED_ALPHA: 12,\r\n  RGBA32: 13,\r\n  RGB565: 14,\r\n  BGR565: 15,\r\n  RGBA4444: 16\r\n});\r\n__publicField(BasisTextureLoader, \"EngineFormat\", {\r\n  RGBAFormat,\r\n  RGBA_ASTC_4x4_Format,\r\n  RGBA_BPTC_Format,\r\n  RGBA_ETC2_EAC_Format,\r\n  RGBA_PVRTC_4BPPV1_Format,\r\n  RGBA_S3TC_DXT5_Format,\r\n  RGB_ETC1_Format,\r\n  RGB_ETC2_Format,\r\n  RGB_PVRTC_4BPPV1_Format,\r\n  RGB_S3TC_DXT1_Format\r\n});\r\n/* WEB WORKER */\r\n__publicField(BasisTextureLoader, \"BasisWorker\", function() {\r\n  let config;\r\n  let transcoderPending;\r\n  let BasisModule;\r\n  const EngineFormat = _EngineFormat;\r\n  const TranscoderFormat = _TranscoderFormat;\r\n  const BasisFormat = _BasisFormat;\r\n  onmessage = function(e) {\r\n    const message = e.data;\r\n    switch (message.type) {\r\n      case \"init\":\r\n        config = message.config;\r\n        init(message.transcoderBinary);\r\n        break;\r\n      case \"transcode\":\r\n        transcoderPending.then(() => {\r\n          try {\r\n            const { width, height, hasAlpha, mipmaps, format } = message.taskConfig.lowLevel ? transcodeLowLevel(message.taskConfig) : transcode(message.buffers[0]);\r\n            const buffers = [];\r\n            for (let i = 0; i < mipmaps.length; ++i) {\r\n              buffers.push(mipmaps[i].data.buffer);\r\n            }\r\n            self.postMessage({ type: \"transcode\", id: message.id, width, height, hasAlpha, mipmaps, format }, buffers);\r\n          } catch (error) {\r\n            console.error(error);\r\n            self.postMessage({ type: \"error\", id: message.id, error: error.message });\r\n          }\r\n        });\r\n        break;\r\n    }\r\n  };\r\n  function init(wasmBinary) {\r\n    transcoderPending = new Promise((resolve) => {\r\n      BasisModule = { wasmBinary, onRuntimeInitialized: resolve };\r\n      BASIS(BasisModule);\r\n    }).then(() => {\r\n      BasisModule.initializeBasis();\r\n    });\r\n  }\r\n  function transcodeLowLevel(taskConfig) {\r\n    const { basisFormat, width, height, hasAlpha } = taskConfig;\r\n    const { transcoderFormat, engineFormat } = getTranscoderFormat(basisFormat, width, height, hasAlpha);\r\n    const blockByteLength = BasisModule.getBytesPerBlockOrPixel(transcoderFormat);\r\n    assert(BasisModule.isFormatSupported(transcoderFormat), \"THREE.BasisTextureLoader: Unsupported format.\");\r\n    const mipmaps = [];\r\n    if (basisFormat === BasisFormat.ETC1S) {\r\n      const transcoder = new BasisModule.LowLevelETC1SImageTranscoder();\r\n      const { endpointCount, endpointsData, selectorCount, selectorsData, tablesData } = taskConfig.globalData;\r\n      try {\r\n        let ok;\r\n        ok = transcoder.decodePalettes(endpointCount, endpointsData, selectorCount, selectorsData);\r\n        assert(ok, \"THREE.BasisTextureLoader: decodePalettes() failed.\");\r\n        ok = transcoder.decodeTables(tablesData);\r\n        assert(ok, \"THREE.BasisTextureLoader: decodeTables() failed.\");\r\n        for (let i = 0; i < taskConfig.levels.length; i++) {\r\n          const level = taskConfig.levels[i];\r\n          const imageDesc = taskConfig.globalData.imageDescs[i];\r\n          const dstByteLength = getTranscodedImageByteLength(transcoderFormat, level.width, level.height);\r\n          const dst = new Uint8Array(dstByteLength);\r\n          ok = transcoder.transcodeImage(\r\n            transcoderFormat,\r\n            dst,\r\n            dstByteLength / blockByteLength,\r\n            level.data,\r\n            getWidthInBlocks(transcoderFormat, level.width),\r\n            getHeightInBlocks(transcoderFormat, level.height),\r\n            level.width,\r\n            level.height,\r\n            level.index,\r\n            imageDesc.rgbSliceByteOffset,\r\n            imageDesc.rgbSliceByteLength,\r\n            imageDesc.alphaSliceByteOffset,\r\n            imageDesc.alphaSliceByteLength,\r\n            imageDesc.imageFlags,\r\n            hasAlpha,\r\n            false,\r\n            0,\r\n            0\r\n          );\r\n          assert(ok, \"THREE.BasisTextureLoader: transcodeImage() failed for level \" + level.index + \".\");\r\n          mipmaps.push({ data: dst, width: level.width, height: level.height });\r\n        }\r\n      } finally {\r\n        transcoder.delete();\r\n      }\r\n    } else {\r\n      for (let i = 0; i < taskConfig.levels.length; i++) {\r\n        const level = taskConfig.levels[i];\r\n        const dstByteLength = getTranscodedImageByteLength(transcoderFormat, level.width, level.height);\r\n        const dst = new Uint8Array(dstByteLength);\r\n        const ok = BasisModule.transcodeUASTCImage(\r\n          transcoderFormat,\r\n          dst,\r\n          dstByteLength / blockByteLength,\r\n          level.data,\r\n          getWidthInBlocks(transcoderFormat, level.width),\r\n          getHeightInBlocks(transcoderFormat, level.height),\r\n          level.width,\r\n          level.height,\r\n          level.index,\r\n          0,\r\n          level.data.byteLength,\r\n          0,\r\n          hasAlpha,\r\n          false,\r\n          0,\r\n          0,\r\n          -1,\r\n          -1\r\n        );\r\n        assert(ok, \"THREE.BasisTextureLoader: transcodeUASTCImage() failed for level \" + level.index + \".\");\r\n        mipmaps.push({ data: dst, width: level.width, height: level.height });\r\n      }\r\n    }\r\n    return { width, height, hasAlpha, mipmaps, format: engineFormat };\r\n  }\r\n  function transcode(buffer) {\r\n    const basisFile = new BasisModule.BasisFile(new Uint8Array(buffer));\r\n    const basisFormat = basisFile.isUASTC() ? BasisFormat.UASTC_4x4 : BasisFormat.ETC1S;\r\n    const width = basisFile.getImageWidth(0, 0);\r\n    const height = basisFile.getImageHeight(0, 0);\r\n    const levels = basisFile.getNumLevels(0);\r\n    const hasAlpha = basisFile.getHasAlpha();\r\n    function cleanup() {\r\n      basisFile.close();\r\n      basisFile.delete();\r\n    }\r\n    const { transcoderFormat, engineFormat } = getTranscoderFormat(basisFormat, width, height, hasAlpha);\r\n    if (!width || !height || !levels) {\r\n      cleanup();\r\n      throw new Error(\"THREE.BasisTextureLoader:\tInvalid texture\");\r\n    }\r\n    if (!basisFile.startTranscoding()) {\r\n      cleanup();\r\n      throw new Error(\"THREE.BasisTextureLoader: .startTranscoding failed\");\r\n    }\r\n    const mipmaps = [];\r\n    for (let mip = 0; mip < levels; mip++) {\r\n      const mipWidth = basisFile.getImageWidth(0, mip);\r\n      const mipHeight = basisFile.getImageHeight(0, mip);\r\n      const dst = new Uint8Array(basisFile.getImageTranscodedSizeInBytes(0, mip, transcoderFormat));\r\n      const status = basisFile.transcodeImage(dst, 0, mip, transcoderFormat, 0, hasAlpha);\r\n      if (!status) {\r\n        cleanup();\r\n        throw new Error(\"THREE.BasisTextureLoader: .transcodeImage failed.\");\r\n      }\r\n      mipmaps.push({ data: dst, width: mipWidth, height: mipHeight });\r\n    }\r\n    cleanup();\r\n    return { width, height, hasAlpha, mipmaps, format: engineFormat };\r\n  }\r\n  const FORMAT_OPTIONS = [\r\n    {\r\n      if: \"astcSupported\",\r\n      basisFormat: [BasisFormat.UASTC_4x4],\r\n      transcoderFormat: [TranscoderFormat.ASTC_4x4, TranscoderFormat.ASTC_4x4],\r\n      engineFormat: [EngineFormat.RGBA_ASTC_4x4_Format, EngineFormat.RGBA_ASTC_4x4_Format],\r\n      priorityETC1S: Infinity,\r\n      priorityUASTC: 1,\r\n      needsPowerOfTwo: false\r\n    },\r\n    {\r\n      if: \"bptcSupported\",\r\n      basisFormat: [BasisFormat.ETC1S, BasisFormat.UASTC_4x4],\r\n      transcoderFormat: [TranscoderFormat.BC7_M5, TranscoderFormat.BC7_M5],\r\n      engineFormat: [EngineFormat.RGBA_BPTC_Format, EngineFormat.RGBA_BPTC_Format],\r\n      priorityETC1S: 3,\r\n      priorityUASTC: 2,\r\n      needsPowerOfTwo: false\r\n    },\r\n    {\r\n      if: \"dxtSupported\",\r\n      basisFormat: [BasisFormat.ETC1S, BasisFormat.UASTC_4x4],\r\n      transcoderFormat: [TranscoderFormat.BC1, TranscoderFormat.BC3],\r\n      engineFormat: [EngineFormat.RGB_S3TC_DXT1_Format, EngineFormat.RGBA_S3TC_DXT5_Format],\r\n      priorityETC1S: 4,\r\n      priorityUASTC: 5,\r\n      needsPowerOfTwo: false\r\n    },\r\n    {\r\n      if: \"etc2Supported\",\r\n      basisFormat: [BasisFormat.ETC1S, BasisFormat.UASTC_4x4],\r\n      transcoderFormat: [TranscoderFormat.ETC1, TranscoderFormat.ETC2],\r\n      engineFormat: [EngineFormat.RGB_ETC2_Format, EngineFormat.RGBA_ETC2_EAC_Format],\r\n      priorityETC1S: 1,\r\n      priorityUASTC: 3,\r\n      needsPowerOfTwo: false\r\n    },\r\n    {\r\n      if: \"etc1Supported\",\r\n      basisFormat: [BasisFormat.ETC1S, BasisFormat.UASTC_4x4],\r\n      transcoderFormat: [TranscoderFormat.ETC1, TranscoderFormat.ETC1],\r\n      engineFormat: [EngineFormat.RGB_ETC1_Format, EngineFormat.RGB_ETC1_Format],\r\n      priorityETC1S: 2,\r\n      priorityUASTC: 4,\r\n      needsPowerOfTwo: false\r\n    },\r\n    {\r\n      if: \"pvrtcSupported\",\r\n      basisFormat: [BasisFormat.ETC1S, BasisFormat.UASTC_4x4],\r\n      transcoderFormat: [TranscoderFormat.PVRTC1_4_RGB, TranscoderFormat.PVRTC1_4_RGBA],\r\n      engineFormat: [EngineFormat.RGB_PVRTC_4BPPV1_Format, EngineFormat.RGBA_PVRTC_4BPPV1_Format],\r\n      priorityETC1S: 5,\r\n      priorityUASTC: 6,\r\n      needsPowerOfTwo: true\r\n    }\r\n  ];\r\n  const ETC1S_OPTIONS = FORMAT_OPTIONS.sort(function(a, b) {\r\n    return a.priorityETC1S - b.priorityETC1S;\r\n  });\r\n  const UASTC_OPTIONS = FORMAT_OPTIONS.sort(function(a, b) {\r\n    return a.priorityUASTC - b.priorityUASTC;\r\n  });\r\n  function getTranscoderFormat(basisFormat, width, height, hasAlpha) {\r\n    let transcoderFormat;\r\n    let engineFormat;\r\n    const options = basisFormat === BasisFormat.ETC1S ? ETC1S_OPTIONS : UASTC_OPTIONS;\r\n    for (let i = 0; i < options.length; i++) {\r\n      const opt = options[i];\r\n      if (!config[opt.if])\r\n        continue;\r\n      if (!opt.basisFormat.includes(basisFormat))\r\n        continue;\r\n      if (opt.needsPowerOfTwo && !(isPowerOfTwo(width) && isPowerOfTwo(height)))\r\n        continue;\r\n      transcoderFormat = opt.transcoderFormat[hasAlpha ? 1 : 0];\r\n      engineFormat = opt.engineFormat[hasAlpha ? 1 : 0];\r\n      return { transcoderFormat, engineFormat };\r\n    }\r\n    console.warn(\"THREE.BasisTextureLoader: No suitable compressed texture format found. Decoding to RGBA32.\");\r\n    transcoderFormat = TranscoderFormat.RGBA32;\r\n    engineFormat = EngineFormat.RGBAFormat;\r\n    return { transcoderFormat, engineFormat };\r\n  }\r\n  function assert(ok, message) {\r\n    if (!ok)\r\n      throw new Error(message);\r\n  }\r\n  function getWidthInBlocks(transcoderFormat, width) {\r\n    return Math.ceil(width / BasisModule.getFormatBlockWidth(transcoderFormat));\r\n  }\r\n  function getHeightInBlocks(transcoderFormat, height) {\r\n    return Math.ceil(height / BasisModule.getFormatBlockHeight(transcoderFormat));\r\n  }\r\n  function getTranscodedImageByteLength(transcoderFormat, width, height) {\r\n    const blockByteLength = BasisModule.getBytesPerBlockOrPixel(transcoderFormat);\r\n    if (BasisModule.formatIsUncompressed(transcoderFormat)) {\r\n      return width * height * blockByteLength;\r\n    }\r\n    if (transcoderFormat === TranscoderFormat.PVRTC1_4_RGB || transcoderFormat === TranscoderFormat.PVRTC1_4_RGBA) {\r\n      const paddedWidth = width + 3 & ~3;\r\n      const paddedHeight = height + 3 & ~3;\r\n      return (Math.max(8, paddedWidth) * Math.max(8, paddedHeight) * 4 + 7) / 8;\r\n    }\r\n    return getWidthInBlocks(transcoderFormat, width) * getHeightInBlocks(transcoderFormat, height) * blockByteLength;\r\n  }\r\n  function isPowerOfTwo(value) {\r\n    if (value <= 2)\r\n      return true;\r\n    return (value & value - 1) === 0 && value !== 0;\r\n  }\r\n});\r\nexport {\r\n  BasisTextureLoader\r\n};\r\n", "import { Vector3, ShaderMaterial, UniformsUtils, UniformsLib, Color, LineSegments, Ray, FileLoader, Matrix4, Group, BufferGeometry, BufferAttribute, Mesh, Loader, MeshStandardMaterial, LineBasicMaterial } from \"three\";\r\nconst FINISH_TYPE_DEFAULT = 0;\r\nconst FINISH_TYPE_CHROME = 1;\r\nconst FINISH_TYPE_PEARLESCENT = 2;\r\nconst FINISH_TYPE_RUBBER = 3;\r\nconst FINISH_TYPE_MATTE_METALLIC = 4;\r\nconst FINISH_TYPE_METAL = 5;\r\nconst FILE_LOCATION_AS_IS = 0;\r\nconst FILE_LOCATION_TRY_PARTS = 1;\r\nconst FILE_LOCATION_TRY_P = 2;\r\nconst FILE_LOCATION_TRY_MODELS = 3;\r\nconst FILE_LOCATION_TRY_RELATIVE = 4;\r\nconst FILE_LOCATION_TRY_ABSOLUTE = 5;\r\nconst FILE_LOCATION_NOT_FOUND = 6;\r\nconst MAIN_COLOUR_CODE = \"16\";\r\nconst MAIN_EDGE_COLOUR_CODE = \"24\";\r\nconst _tempVec0 = /* @__PURE__ */ new Vector3();\r\nconst _tempVec1 = /* @__PURE__ */ new Vector3();\r\nclass LDrawConditionalLineMaterial extends ShaderMaterial {\r\n  constructor(parameters) {\r\n    super({\r\n      uniforms: UniformsUtils.merge([\r\n        UniformsLib.fog,\r\n        {\r\n          diffuse: {\r\n            value: new Color()\r\n          },\r\n          opacity: {\r\n            value: 1\r\n          }\r\n        }\r\n      ]),\r\n      vertexShader: (\r\n        /* glsl */\r\n        `\r\n        attribute vec3 control0;\r\n        attribute vec3 control1;\r\n        attribute vec3 direction;\r\n        varying float discardFlag;\r\n\r\n        #include <common>\r\n        #include <color_pars_vertex>\r\n        #include <fog_pars_vertex>\r\n        #include <logdepthbuf_pars_vertex>\r\n        #include <clipping_planes_pars_vertex>\r\n\r\n        void main() {\r\n          #include <color_vertex>\r\n\r\n          vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);\r\n          gl_Position = projectionMatrix * mvPosition;\r\n\r\n          // Transform the line segment ends and control points into camera clip space\r\n          vec4 c0 = projectionMatrix * modelViewMatrix * vec4(control0, 1.0);\r\n          vec4 c1 = projectionMatrix * modelViewMatrix * vec4(control1, 1.0);\r\n          vec4 p0 = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\r\n          vec4 p1 = projectionMatrix * modelViewMatrix * vec4(position + direction, 1.0);\r\n\r\n          c0.xy /= c0.w;\r\n          c1.xy /= c1.w;\r\n          p0.xy /= p0.w;\r\n          p1.xy /= p1.w;\r\n\r\n          // Get the direction of the segment and an orthogonal vector\r\n          vec2 dir = p1.xy - p0.xy;\r\n          vec2 norm = vec2(-dir.y, dir.x);\r\n\r\n          // Get control point directions from the line\r\n          vec2 c0dir = c0.xy - p1.xy;\r\n          vec2 c1dir = c1.xy - p1.xy;\r\n\r\n          // If the vectors to the controls points are pointed in different directions away\r\n          // from the line segment then the line should not be drawn.\r\n          float d0 = dot(normalize(norm), normalize(c0dir));\r\n          float d1 = dot(normalize(norm), normalize(c1dir));\r\n          discardFlag = float(sign(d0) != sign(d1));\r\n\r\n          #include <logdepthbuf_vertex>\r\n          #include <clipping_planes_vertex>\r\n          #include <fog_vertex>\r\n        }\r\n      `\r\n      ),\r\n      fragmentShader: (\r\n        /* glsl */\r\n        `\r\n        uniform vec3 diffuse;\r\n        uniform float opacity;\r\n        varying float discardFlag;\r\n\r\n        #include <common>\r\n        #include <color_pars_fragment>\r\n        #include <fog_pars_fragment>\r\n        #include <logdepthbuf_pars_fragment>\r\n        #include <clipping_planes_pars_fragment>\r\n\r\n        void main() {\r\n          if (discardFlag > 0.5) discard;\r\n\r\n          #include <clipping_planes_fragment>\r\n          vec3 outgoingLight = vec3(0.0);\r\n          vec4 diffuseColor = vec4(diffuse, opacity);\r\n          #include <logdepthbuf_fragment>\r\n          #include <color_fragment>\r\n          outgoingLight = diffuseColor.rgb; // simple shader\r\n          gl_FragColor = vec4(outgoingLight, diffuseColor.a);\r\n          #include <tonemapping_fragment>\r\n          #include <encodings_fragment>\r\n          #include <fog_fragment>\r\n          #include <premultiplied_alpha_fragment>\r\n        }\r\n      `\r\n      )\r\n    });\r\n    Object.defineProperties(this, {\r\n      opacity: {\r\n        get: function() {\r\n          return this.uniforms.opacity.value;\r\n        },\r\n        set: function(value) {\r\n          this.uniforms.opacity.value = value;\r\n        }\r\n      },\r\n      color: {\r\n        get: function() {\r\n          return this.uniforms.diffuse.value;\r\n        }\r\n      }\r\n    });\r\n    this.setValues(parameters);\r\n    this.isLDrawConditionalLineMaterial = true;\r\n  }\r\n}\r\nclass ConditionalLineSegments extends LineSegments {\r\n  constructor(geometry, material) {\r\n    super(geometry, material);\r\n    this.isConditionalLine = true;\r\n  }\r\n}\r\nfunction generateFaceNormals(faces) {\r\n  for (let i = 0, l = faces.length; i < l; i++) {\r\n    const face = faces[i];\r\n    const vertices = face.vertices;\r\n    const v0 = vertices[0];\r\n    const v1 = vertices[1];\r\n    const v2 = vertices[2];\r\n    _tempVec0.subVectors(v1, v0);\r\n    _tempVec1.subVectors(v2, v1);\r\n    face.faceNormal = new Vector3().crossVectors(_tempVec0, _tempVec1).normalize();\r\n  }\r\n}\r\nconst _ray = /* @__PURE__ */ new Ray();\r\nfunction smoothNormals(faces, lineSegments, checkSubSegments = false) {\r\n  const hashMultiplier = (1 + 1e-10) * 100;\r\n  function hashVertex(v) {\r\n    const x = ~~(v.x * hashMultiplier);\r\n    const y = ~~(v.y * hashMultiplier);\r\n    const z = ~~(v.z * hashMultiplier);\r\n    return `${x},${y},${z}`;\r\n  }\r\n  function hashEdge(v0, v1) {\r\n    return `${hashVertex(v0)}_${hashVertex(v1)}`;\r\n  }\r\n  function toNormalizedRay(v0, v1, targetRay) {\r\n    targetRay.direction.subVectors(v1, v0).normalize();\r\n    const scalar = v0.dot(targetRay.direction);\r\n    targetRay.origin.copy(v0).addScaledVector(targetRay.direction, -scalar);\r\n    return targetRay;\r\n  }\r\n  function hashRay(ray) {\r\n    return hashEdge(ray.origin, ray.direction);\r\n  }\r\n  const hardEdges = /* @__PURE__ */ new Set();\r\n  const hardEdgeRays = /* @__PURE__ */ new Map();\r\n  const halfEdgeList = {};\r\n  const normals = [];\r\n  for (let i = 0, l = lineSegments.length; i < l; i++) {\r\n    const ls = lineSegments[i];\r\n    const vertices = ls.vertices;\r\n    const v0 = vertices[0];\r\n    const v1 = vertices[1];\r\n    hardEdges.add(hashEdge(v0, v1));\r\n    hardEdges.add(hashEdge(v1, v0));\r\n    if (checkSubSegments) {\r\n      const ray = toNormalizedRay(v0, v1, new Ray());\r\n      const rh1 = hashRay(ray);\r\n      if (!hardEdgeRays.has(rh1)) {\r\n        toNormalizedRay(v1, v0, ray);\r\n        const rh2 = hashRay(ray);\r\n        const info2 = {\r\n          ray,\r\n          distances: []\r\n        };\r\n        hardEdgeRays.set(rh1, info2);\r\n        hardEdgeRays.set(rh2, info2);\r\n      }\r\n      const info = hardEdgeRays.get(rh1);\r\n      let d0 = info.ray.direction.dot(v0);\r\n      let d1 = info.ray.direction.dot(v1);\r\n      if (d0 > d1) {\r\n        ;\r\n        [d0, d1] = [d1, d0];\r\n      }\r\n      info.distances.push(d0, d1);\r\n    }\r\n  }\r\n  for (let i = 0, l = faces.length; i < l; i++) {\r\n    const tri = faces[i];\r\n    const vertices = tri.vertices;\r\n    const vertCount = vertices.length;\r\n    for (let i2 = 0; i2 < vertCount; i2++) {\r\n      const index = i2;\r\n      const next = (i2 + 1) % vertCount;\r\n      const v0 = vertices[index];\r\n      const v1 = vertices[next];\r\n      const hash = hashEdge(v0, v1);\r\n      if (hardEdges.has(hash)) {\r\n        continue;\r\n      }\r\n      if (checkSubSegments) {\r\n        toNormalizedRay(v0, v1, _ray);\r\n        const rayHash = hashRay(_ray);\r\n        if (hardEdgeRays.has(rayHash)) {\r\n          const info2 = hardEdgeRays.get(rayHash);\r\n          const { ray, distances } = info2;\r\n          let d0 = ray.direction.dot(v0);\r\n          let d1 = ray.direction.dot(v1);\r\n          if (d0 > d1) {\r\n            ;\r\n            [d0, d1] = [d1, d0];\r\n          }\r\n          let found = false;\r\n          for (let i3 = 0, l2 = distances.length; i3 < l2; i3 += 2) {\r\n            if (d0 >= distances[i3] && d1 <= distances[i3 + 1]) {\r\n              found = true;\r\n              break;\r\n            }\r\n          }\r\n          if (found) {\r\n            continue;\r\n          }\r\n        }\r\n      }\r\n      const info = {\r\n        index,\r\n        tri\r\n      };\r\n      halfEdgeList[hash] = info;\r\n    }\r\n  }\r\n  while (true) {\r\n    let halfEdge = null;\r\n    for (const key in halfEdgeList) {\r\n      halfEdge = halfEdgeList[key];\r\n      break;\r\n    }\r\n    if (halfEdge === null) {\r\n      break;\r\n    }\r\n    const queue = [halfEdge];\r\n    while (queue.length > 0) {\r\n      const tri = queue.pop().tri;\r\n      const vertices = tri.vertices;\r\n      const vertNormals = tri.normals;\r\n      const faceNormal = tri.faceNormal;\r\n      const vertCount = vertices.length;\r\n      for (let i2 = 0; i2 < vertCount; i2++) {\r\n        const index = i2;\r\n        const next = (i2 + 1) % vertCount;\r\n        const v0 = vertices[index];\r\n        const v1 = vertices[next];\r\n        const hash = hashEdge(v0, v1);\r\n        delete halfEdgeList[hash];\r\n        const reverseHash = hashEdge(v1, v0);\r\n        const otherInfo = halfEdgeList[reverseHash];\r\n        if (otherInfo) {\r\n          const otherTri = otherInfo.tri;\r\n          const otherIndex = otherInfo.index;\r\n          const otherNormals = otherTri.normals;\r\n          const otherVertCount = otherNormals.length;\r\n          const otherFaceNormal = otherTri.faceNormal;\r\n          if (Math.abs(otherTri.faceNormal.dot(tri.faceNormal)) < 0.25) {\r\n            continue;\r\n          }\r\n          if (reverseHash in halfEdgeList) {\r\n            queue.push(otherInfo);\r\n            delete halfEdgeList[reverseHash];\r\n          }\r\n          const otherNext = (otherIndex + 1) % otherVertCount;\r\n          if (vertNormals[index] && otherNormals[otherNext] && vertNormals[index] !== otherNormals[otherNext]) {\r\n            otherNormals[otherNext].norm.add(vertNormals[index].norm);\r\n            vertNormals[index].norm = otherNormals[otherNext].norm;\r\n          }\r\n          let sharedNormal1 = vertNormals[index] || otherNormals[otherNext];\r\n          if (sharedNormal1 === null) {\r\n            sharedNormal1 = { norm: new Vector3() };\r\n            normals.push(sharedNormal1.norm);\r\n          }\r\n          if (vertNormals[index] === null) {\r\n            vertNormals[index] = sharedNormal1;\r\n            sharedNormal1.norm.add(faceNormal);\r\n          }\r\n          if (otherNormals[otherNext] === null) {\r\n            otherNormals[otherNext] = sharedNormal1;\r\n            sharedNormal1.norm.add(otherFaceNormal);\r\n          }\r\n          if (vertNormals[next] && otherNormals[otherIndex] && vertNormals[next] !== otherNormals[otherIndex]) {\r\n            otherNormals[otherIndex].norm.add(vertNormals[next].norm);\r\n            vertNormals[next].norm = otherNormals[otherIndex].norm;\r\n          }\r\n          let sharedNormal2 = vertNormals[next] || otherNormals[otherIndex];\r\n          if (sharedNormal2 === null) {\r\n            sharedNormal2 = { norm: new Vector3() };\r\n            normals.push(sharedNormal2.norm);\r\n          }\r\n          if (vertNormals[next] === null) {\r\n            vertNormals[next] = sharedNormal2;\r\n            sharedNormal2.norm.add(faceNormal);\r\n          }\r\n          if (otherNormals[otherIndex] === null) {\r\n            otherNormals[otherIndex] = sharedNormal2;\r\n            sharedNormal2.norm.add(otherFaceNormal);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  for (let i = 0, l = normals.length; i < l; i++) {\r\n    normals[i].normalize();\r\n  }\r\n}\r\nfunction isPartType(type) {\r\n  return type === \"Part\" || type === \"Unofficial_Part\";\r\n}\r\nfunction isPrimitiveType(type) {\r\n  return /primitive/i.test(type) || type === \"Subpart\";\r\n}\r\nclass LineParser {\r\n  constructor(line, lineNumber) {\r\n    this.line = line;\r\n    this.lineLength = line.length;\r\n    this.currentCharIndex = 0;\r\n    this.currentChar = \" \";\r\n    this.lineNumber = lineNumber;\r\n  }\r\n  seekNonSpace() {\r\n    while (this.currentCharIndex < this.lineLength) {\r\n      this.currentChar = this.line.charAt(this.currentCharIndex);\r\n      if (this.currentChar !== \" \" && this.currentChar !== \"\t\") {\r\n        return;\r\n      }\r\n      this.currentCharIndex++;\r\n    }\r\n  }\r\n  getToken() {\r\n    const pos0 = this.currentCharIndex++;\r\n    while (this.currentCharIndex < this.lineLength) {\r\n      this.currentChar = this.line.charAt(this.currentCharIndex);\r\n      if (this.currentChar === \" \" || this.currentChar === \"\t\") {\r\n        break;\r\n      }\r\n      this.currentCharIndex++;\r\n    }\r\n    const pos1 = this.currentCharIndex;\r\n    this.seekNonSpace();\r\n    return this.line.substring(pos0, pos1);\r\n  }\r\n  getVector() {\r\n    return new Vector3(parseFloat(this.getToken()), parseFloat(this.getToken()), parseFloat(this.getToken()));\r\n  }\r\n  getRemainingString() {\r\n    return this.line.substring(this.currentCharIndex, this.lineLength);\r\n  }\r\n  isAtTheEnd() {\r\n    return this.currentCharIndex >= this.lineLength;\r\n  }\r\n  setToEnd() {\r\n    this.currentCharIndex = this.lineLength;\r\n  }\r\n  getLineNumberString() {\r\n    return this.lineNumber >= 0 ? \" at line \" + this.lineNumber : \"\";\r\n  }\r\n}\r\nclass LDrawParsedCache {\r\n  constructor(loader) {\r\n    this.loader = loader;\r\n    this._cache = {};\r\n  }\r\n  cloneResult(original) {\r\n    const result = {};\r\n    result.faces = original.faces.map((face) => {\r\n      return {\r\n        colorCode: face.colorCode,\r\n        material: face.material,\r\n        vertices: face.vertices.map((v) => v.clone()),\r\n        normals: face.normals.map(() => null),\r\n        faceNormal: null\r\n      };\r\n    });\r\n    result.conditionalSegments = original.conditionalSegments.map((face) => {\r\n      return {\r\n        colorCode: face.colorCode,\r\n        material: face.material,\r\n        vertices: face.vertices.map((v) => v.clone()),\r\n        controlPoints: face.controlPoints.map((v) => v.clone())\r\n      };\r\n    });\r\n    result.lineSegments = original.lineSegments.map((face) => {\r\n      return {\r\n        colorCode: face.colorCode,\r\n        material: face.material,\r\n        vertices: face.vertices.map((v) => v.clone())\r\n      };\r\n    });\r\n    result.type = original.type;\r\n    result.category = original.category;\r\n    result.keywords = original.keywords;\r\n    result.subobjects = original.subobjects;\r\n    result.totalFaces = original.totalFaces;\r\n    result.startingConstructionStep = original.startingConstructionStep;\r\n    result.materials = original.materials;\r\n    result.group = null;\r\n    return result;\r\n  }\r\n  async fetchData(fileName) {\r\n    let triedLowerCase = false;\r\n    let locationState = FILE_LOCATION_AS_IS;\r\n    while (locationState !== FILE_LOCATION_NOT_FOUND) {\r\n      let subobjectURL = fileName;\r\n      switch (locationState) {\r\n        case FILE_LOCATION_AS_IS:\r\n          locationState = locationState + 1;\r\n          break;\r\n        case FILE_LOCATION_TRY_PARTS:\r\n          subobjectURL = \"parts/\" + subobjectURL;\r\n          locationState = locationState + 1;\r\n          break;\r\n        case FILE_LOCATION_TRY_P:\r\n          subobjectURL = \"p/\" + subobjectURL;\r\n          locationState = locationState + 1;\r\n          break;\r\n        case FILE_LOCATION_TRY_MODELS:\r\n          subobjectURL = \"models/\" + subobjectURL;\r\n          locationState = locationState + 1;\r\n          break;\r\n        case FILE_LOCATION_TRY_RELATIVE:\r\n          subobjectURL = fileName.substring(0, fileName.lastIndexOf(\"/\") + 1) + subobjectURL;\r\n          locationState = locationState + 1;\r\n          break;\r\n        case FILE_LOCATION_TRY_ABSOLUTE:\r\n          if (triedLowerCase) {\r\n            locationState = FILE_LOCATION_NOT_FOUND;\r\n          } else {\r\n            fileName = fileName.toLowerCase();\r\n            subobjectURL = fileName;\r\n            triedLowerCase = true;\r\n            locationState = FILE_LOCATION_AS_IS;\r\n          }\r\n          break;\r\n      }\r\n      const loader = this.loader;\r\n      const fileLoader = new FileLoader(loader.manager);\r\n      fileLoader.setPath(loader.partsLibraryPath);\r\n      fileLoader.setRequestHeader(loader.requestHeader);\r\n      fileLoader.setWithCredentials(loader.withCredentials);\r\n      try {\r\n        const text = await fileLoader.loadAsync(subobjectURL);\r\n        return text;\r\n      } catch (e) {\r\n        continue;\r\n      }\r\n    }\r\n    throw new Error('LDrawLoader: Subobject \"' + fileName + '\" could not be loaded.');\r\n  }\r\n  parse(text, fileName = null) {\r\n    const loader = this.loader;\r\n    const faces = [];\r\n    const lineSegments = [];\r\n    const conditionalSegments = [];\r\n    const subobjects = [];\r\n    const materials = {};\r\n    const getLocalMaterial = (colorCode) => {\r\n      return materials[colorCode] || null;\r\n    };\r\n    let type = \"Model\";\r\n    let category = null;\r\n    let keywords = null;\r\n    let totalFaces = 0;\r\n    if (text.indexOf(\"\\r\\n\") !== -1) {\r\n      text = text.replace(/\\r\\n/g, \"\\n\");\r\n    }\r\n    const lines = text.split(\"\\n\");\r\n    const numLines = lines.length;\r\n    let parsingEmbeddedFiles = false;\r\n    let currentEmbeddedFileName = null;\r\n    let currentEmbeddedText = null;\r\n    let bfcCertified = false;\r\n    let bfcCCW = true;\r\n    let bfcInverted = false;\r\n    let bfcCull = true;\r\n    let startingConstructionStep = false;\r\n    for (let lineIndex = 0; lineIndex < numLines; lineIndex++) {\r\n      const line = lines[lineIndex];\r\n      if (line.length === 0)\r\n        continue;\r\n      if (parsingEmbeddedFiles) {\r\n        if (line.startsWith(\"0 FILE \")) {\r\n          this.setData(currentEmbeddedFileName, currentEmbeddedText);\r\n          currentEmbeddedFileName = line.substring(7);\r\n          currentEmbeddedText = \"\";\r\n        } else {\r\n          currentEmbeddedText += line + \"\\n\";\r\n        }\r\n        continue;\r\n      }\r\n      const lp = new LineParser(line, lineIndex + 1);\r\n      lp.seekNonSpace();\r\n      if (lp.isAtTheEnd()) {\r\n        continue;\r\n      }\r\n      const lineType = lp.getToken();\r\n      let material;\r\n      let colorCode;\r\n      let segment;\r\n      let ccw;\r\n      let doubleSided;\r\n      let v0, v1, v2, v3, c0, c1;\r\n      switch (lineType) {\r\n        case \"0\":\r\n          const meta = lp.getToken();\r\n          if (meta) {\r\n            switch (meta) {\r\n              case \"!LDRAW_ORG\":\r\n                type = lp.getToken();\r\n                break;\r\n              case \"!COLOUR\":\r\n                material = loader.parseColorMetaDirective(lp);\r\n                if (material) {\r\n                  materials[material.userData.code] = material;\r\n                } else {\r\n                  console.warn(\"LDrawLoader: Error parsing material\" + lp.getLineNumberString());\r\n                }\r\n                break;\r\n              case \"!CATEGORY\":\r\n                category = lp.getToken();\r\n                break;\r\n              case \"!KEYWORDS\":\r\n                const newKeywords = lp.getRemainingString().split(\",\");\r\n                if (newKeywords.length > 0) {\r\n                  if (!keywords) {\r\n                    keywords = [];\r\n                  }\r\n                  newKeywords.forEach(function(keyword) {\r\n                    keywords.push(keyword.trim());\r\n                  });\r\n                }\r\n                break;\r\n              case \"FILE\":\r\n                if (lineIndex > 0) {\r\n                  parsingEmbeddedFiles = true;\r\n                  currentEmbeddedFileName = lp.getRemainingString();\r\n                  currentEmbeddedText = \"\";\r\n                  bfcCertified = false;\r\n                  bfcCCW = true;\r\n                }\r\n                break;\r\n              case \"BFC\":\r\n                while (!lp.isAtTheEnd()) {\r\n                  const token = lp.getToken();\r\n                  switch (token) {\r\n                    case \"CERTIFY\":\r\n                    case \"NOCERTIFY\":\r\n                      bfcCertified = token === \"CERTIFY\";\r\n                      bfcCCW = true;\r\n                      break;\r\n                    case \"CW\":\r\n                    case \"CCW\":\r\n                      bfcCCW = token === \"CCW\";\r\n                      break;\r\n                    case \"INVERTNEXT\":\r\n                      bfcInverted = true;\r\n                      break;\r\n                    case \"CLIP\":\r\n                    case \"NOCLIP\":\r\n                      bfcCull = token === \"CLIP\";\r\n                      break;\r\n                    default:\r\n                      console.warn('THREE.LDrawLoader: BFC directive \"' + token + '\" is unknown.');\r\n                      break;\r\n                  }\r\n                }\r\n                break;\r\n              case \"STEP\":\r\n                startingConstructionStep = true;\r\n                break;\r\n              default:\r\n                break;\r\n            }\r\n          }\r\n          break;\r\n        case \"1\":\r\n          colorCode = lp.getToken();\r\n          material = getLocalMaterial(colorCode);\r\n          const posX = parseFloat(lp.getToken());\r\n          const posY = parseFloat(lp.getToken());\r\n          const posZ = parseFloat(lp.getToken());\r\n          const m0 = parseFloat(lp.getToken());\r\n          const m1 = parseFloat(lp.getToken());\r\n          const m2 = parseFloat(lp.getToken());\r\n          const m3 = parseFloat(lp.getToken());\r\n          const m4 = parseFloat(lp.getToken());\r\n          const m5 = parseFloat(lp.getToken());\r\n          const m6 = parseFloat(lp.getToken());\r\n          const m7 = parseFloat(lp.getToken());\r\n          const m8 = parseFloat(lp.getToken());\r\n          const matrix = new Matrix4().set(m0, m1, m2, posX, m3, m4, m5, posY, m6, m7, m8, posZ, 0, 0, 0, 1);\r\n          let fileName2 = lp.getRemainingString().trim().replace(/\\\\/g, \"/\");\r\n          if (loader.fileMap[fileName2]) {\r\n            fileName2 = loader.fileMap[fileName2];\r\n          } else {\r\n            if (fileName2.startsWith(\"s/\")) {\r\n              fileName2 = \"parts/\" + fileName2;\r\n            } else if (fileName2.startsWith(\"48/\")) {\r\n              fileName2 = \"p/\" + fileName2;\r\n            }\r\n          }\r\n          subobjects.push({\r\n            material,\r\n            colorCode,\r\n            matrix,\r\n            fileName: fileName2,\r\n            inverted: bfcInverted,\r\n            startingConstructionStep\r\n          });\r\n          bfcInverted = false;\r\n          break;\r\n        case \"2\":\r\n          colorCode = lp.getToken();\r\n          material = getLocalMaterial(colorCode);\r\n          v0 = lp.getVector();\r\n          v1 = lp.getVector();\r\n          segment = {\r\n            material,\r\n            colorCode,\r\n            vertices: [v0, v1]\r\n          };\r\n          lineSegments.push(segment);\r\n          break;\r\n        case \"5\":\r\n          colorCode = lp.getToken();\r\n          material = getLocalMaterial(colorCode);\r\n          v0 = lp.getVector();\r\n          v1 = lp.getVector();\r\n          c0 = lp.getVector();\r\n          c1 = lp.getVector();\r\n          segment = {\r\n            material,\r\n            colorCode,\r\n            vertices: [v0, v1],\r\n            controlPoints: [c0, c1]\r\n          };\r\n          conditionalSegments.push(segment);\r\n          break;\r\n        case \"3\":\r\n          colorCode = lp.getToken();\r\n          material = getLocalMaterial(colorCode);\r\n          ccw = bfcCCW;\r\n          doubleSided = !bfcCertified || !bfcCull;\r\n          if (ccw === true) {\r\n            v0 = lp.getVector();\r\n            v1 = lp.getVector();\r\n            v2 = lp.getVector();\r\n          } else {\r\n            v2 = lp.getVector();\r\n            v1 = lp.getVector();\r\n            v0 = lp.getVector();\r\n          }\r\n          faces.push({\r\n            material,\r\n            colorCode,\r\n            faceNormal: null,\r\n            vertices: [v0, v1, v2],\r\n            normals: [null, null, null]\r\n          });\r\n          totalFaces++;\r\n          if (doubleSided === true) {\r\n            faces.push({\r\n              material,\r\n              colorCode,\r\n              faceNormal: null,\r\n              vertices: [v2, v1, v0],\r\n              normals: [null, null, null]\r\n            });\r\n            totalFaces++;\r\n          }\r\n          break;\r\n        case \"4\":\r\n          colorCode = lp.getToken();\r\n          material = getLocalMaterial(colorCode);\r\n          ccw = bfcCCW;\r\n          doubleSided = !bfcCertified || !bfcCull;\r\n          if (ccw === true) {\r\n            v0 = lp.getVector();\r\n            v1 = lp.getVector();\r\n            v2 = lp.getVector();\r\n            v3 = lp.getVector();\r\n          } else {\r\n            v3 = lp.getVector();\r\n            v2 = lp.getVector();\r\n            v1 = lp.getVector();\r\n            v0 = lp.getVector();\r\n          }\r\n          faces.push({\r\n            material,\r\n            colorCode,\r\n            faceNormal: null,\r\n            vertices: [v0, v1, v2, v3],\r\n            normals: [null, null, null, null]\r\n          });\r\n          totalFaces += 2;\r\n          if (doubleSided === true) {\r\n            faces.push({\r\n              material,\r\n              colorCode,\r\n              faceNormal: null,\r\n              vertices: [v3, v2, v1, v0],\r\n              normals: [null, null, null, null]\r\n            });\r\n            totalFaces += 2;\r\n          }\r\n          break;\r\n        default:\r\n          throw new Error('LDrawLoader: Unknown line type \"' + lineType + '\"' + lp.getLineNumberString() + \".\");\r\n      }\r\n    }\r\n    if (parsingEmbeddedFiles) {\r\n      this.setData(currentEmbeddedFileName, currentEmbeddedText);\r\n    }\r\n    return {\r\n      faces,\r\n      conditionalSegments,\r\n      lineSegments,\r\n      type,\r\n      category,\r\n      keywords,\r\n      subobjects,\r\n      totalFaces,\r\n      startingConstructionStep,\r\n      materials,\r\n      fileName,\r\n      group: null\r\n    };\r\n  }\r\n  // returns an (optionally cloned) instance of the data\r\n  getData(fileName, clone = true) {\r\n    const key = fileName.toLowerCase();\r\n    const result = this._cache[key];\r\n    if (result === null || result instanceof Promise) {\r\n      return null;\r\n    }\r\n    if (clone) {\r\n      return this.cloneResult(result);\r\n    } else {\r\n      return result;\r\n    }\r\n  }\r\n  // kicks off a fetch and parse of the requested data if it hasn't already been loaded. Returns when\r\n  // the data is ready to use and can be retrieved synchronously with \"getData\".\r\n  async ensureDataLoaded(fileName) {\r\n    const key = fileName.toLowerCase();\r\n    if (!(key in this._cache)) {\r\n      this._cache[key] = this.fetchData(fileName).then((text) => {\r\n        const info = this.parse(text, fileName);\r\n        this._cache[key] = info;\r\n        return info;\r\n      });\r\n    }\r\n    await this._cache[key];\r\n  }\r\n  // sets the data in the cache from parsed data\r\n  setData(fileName, text) {\r\n    const key = fileName.toLowerCase();\r\n    this._cache[key] = this.parse(text, fileName);\r\n  }\r\n}\r\nfunction getMaterialFromCode(colorCode, parentColorCode, materialHierarchy, forEdge) {\r\n  const isPassthrough = !forEdge && colorCode === MAIN_COLOUR_CODE || forEdge && colorCode === MAIN_EDGE_COLOUR_CODE;\r\n  if (isPassthrough) {\r\n    colorCode = parentColorCode;\r\n  }\r\n  return materialHierarchy[colorCode] || null;\r\n}\r\nclass LDrawPartsGeometryCache {\r\n  constructor(loader) {\r\n    this.loader = loader;\r\n    this.parseCache = new LDrawParsedCache(loader);\r\n    this._cache = {};\r\n  }\r\n  // Convert the given file information into a mesh by processing subobjects.\r\n  async processIntoMesh(info) {\r\n    const loader = this.loader;\r\n    const parseCache = this.parseCache;\r\n    const faceMaterials = /* @__PURE__ */ new Set();\r\n    const processInfoSubobjects = async (info2, subobject = null) => {\r\n      const subobjects = info2.subobjects;\r\n      const promises = [];\r\n      for (let i = 0, l = subobjects.length; i < l; i++) {\r\n        const subobject2 = subobjects[i];\r\n        const promise = parseCache.ensureDataLoaded(subobject2.fileName).then(() => {\r\n          const subobjectInfo = parseCache.getData(subobject2.fileName, false);\r\n          if (!isPrimitiveType(subobjectInfo.type)) {\r\n            return this.loadModel(subobject2.fileName).catch((error) => {\r\n              console.warn(error);\r\n              return null;\r\n            });\r\n          }\r\n          return processInfoSubobjects(parseCache.getData(subobject2.fileName), subobject2);\r\n        });\r\n        promises.push(promise);\r\n      }\r\n      const group2 = new Group();\r\n      group2.userData.category = info2.category;\r\n      group2.userData.keywords = info2.keywords;\r\n      info2.group = group2;\r\n      const subobjectInfos = await Promise.all(promises);\r\n      for (let i = 0, l = subobjectInfos.length; i < l; i++) {\r\n        const subobject2 = info2.subobjects[i];\r\n        const subobjectInfo = subobjectInfos[i];\r\n        if (subobjectInfo === null) {\r\n          continue;\r\n        }\r\n        if (subobjectInfo.isGroup) {\r\n          const subobjectGroup = subobjectInfo;\r\n          subobject2.matrix.decompose(subobjectGroup.position, subobjectGroup.quaternion, subobjectGroup.scale);\r\n          subobjectGroup.userData.startingConstructionStep = subobject2.startingConstructionStep;\r\n          subobjectGroup.name = subobject2.fileName;\r\n          loader.applyMaterialsToMesh(subobjectGroup, subobject2.colorCode, info2.materials);\r\n          group2.add(subobjectGroup);\r\n          continue;\r\n        }\r\n        if (subobjectInfo.group.children.length) {\r\n          group2.add(subobjectInfo.group);\r\n        }\r\n        const parentLineSegments = info2.lineSegments;\r\n        const parentConditionalSegments = info2.conditionalSegments;\r\n        const parentFaces = info2.faces;\r\n        const lineSegments = subobjectInfo.lineSegments;\r\n        const conditionalSegments = subobjectInfo.conditionalSegments;\r\n        const faces = subobjectInfo.faces;\r\n        const matrix = subobject2.matrix;\r\n        const inverted = subobject2.inverted;\r\n        const matrixScaleInverted = matrix.determinant() < 0;\r\n        const colorCode = subobject2.colorCode;\r\n        const lineColorCode = colorCode === MAIN_COLOUR_CODE ? MAIN_EDGE_COLOUR_CODE : colorCode;\r\n        for (let i2 = 0, l2 = lineSegments.length; i2 < l2; i2++) {\r\n          const ls = lineSegments[i2];\r\n          const vertices = ls.vertices;\r\n          vertices[0].applyMatrix4(matrix);\r\n          vertices[1].applyMatrix4(matrix);\r\n          ls.colorCode = ls.colorCode === MAIN_EDGE_COLOUR_CODE ? lineColorCode : ls.colorCode;\r\n          ls.material = ls.material || getMaterialFromCode(ls.colorCode, ls.colorCode, info2.materials, true);\r\n          parentLineSegments.push(ls);\r\n        }\r\n        for (let i2 = 0, l2 = conditionalSegments.length; i2 < l2; i2++) {\r\n          const os = conditionalSegments[i2];\r\n          const vertices = os.vertices;\r\n          const controlPoints = os.controlPoints;\r\n          vertices[0].applyMatrix4(matrix);\r\n          vertices[1].applyMatrix4(matrix);\r\n          controlPoints[0].applyMatrix4(matrix);\r\n          controlPoints[1].applyMatrix4(matrix);\r\n          os.colorCode = os.colorCode === MAIN_EDGE_COLOUR_CODE ? lineColorCode : os.colorCode;\r\n          os.material = os.material || getMaterialFromCode(os.colorCode, os.colorCode, info2.materials, true);\r\n          parentConditionalSegments.push(os);\r\n        }\r\n        for (let i2 = 0, l2 = faces.length; i2 < l2; i2++) {\r\n          const tri = faces[i2];\r\n          const vertices = tri.vertices;\r\n          for (let i3 = 0, l3 = vertices.length; i3 < l3; i3++) {\r\n            vertices[i3].applyMatrix4(matrix);\r\n          }\r\n          tri.colorCode = tri.colorCode === MAIN_COLOUR_CODE ? colorCode : tri.colorCode;\r\n          tri.material = tri.material || getMaterialFromCode(tri.colorCode, colorCode, info2.materials, false);\r\n          faceMaterials.add(tri.colorCode);\r\n          if (matrixScaleInverted !== inverted) {\r\n            vertices.reverse();\r\n          }\r\n          parentFaces.push(tri);\r\n        }\r\n        info2.totalFaces += subobjectInfo.totalFaces;\r\n      }\r\n      if (subobject) {\r\n        loader.applyMaterialsToMesh(group2, subobject.colorCode, info2.materials);\r\n      }\r\n      return info2;\r\n    };\r\n    for (let i = 0, l = info.faces; i < l; i++) {\r\n      faceMaterials.add(info.faces[i].colorCode);\r\n    }\r\n    await processInfoSubobjects(info);\r\n    if (loader.smoothNormals) {\r\n      const checkSubSegments = faceMaterials.size > 1;\r\n      generateFaceNormals(info.faces);\r\n      smoothNormals(info.faces, info.lineSegments, checkSubSegments);\r\n    }\r\n    const group = info.group;\r\n    if (info.faces.length > 0) {\r\n      group.add(createObject(info.faces, 3, false, info.totalFaces));\r\n    }\r\n    if (info.lineSegments.length > 0) {\r\n      group.add(createObject(info.lineSegments, 2));\r\n    }\r\n    if (info.conditionalSegments.length > 0) {\r\n      group.add(createObject(info.conditionalSegments, 2, true));\r\n    }\r\n    return group;\r\n  }\r\n  hasCachedModel(fileName) {\r\n    return fileName !== null && fileName.toLowerCase() in this._cache;\r\n  }\r\n  async getCachedModel(fileName) {\r\n    if (fileName !== null && this.hasCachedModel(fileName)) {\r\n      const key = fileName.toLowerCase();\r\n      const group = await this._cache[key];\r\n      return group.clone();\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n  // Loads and parses the model with the given file name. Returns a cached copy if available.\r\n  async loadModel(fileName) {\r\n    const parseCache = this.parseCache;\r\n    const key = fileName.toLowerCase();\r\n    if (this.hasCachedModel(fileName)) {\r\n      return this.getCachedModel(fileName);\r\n    } else {\r\n      await parseCache.ensureDataLoaded(fileName);\r\n      const info = parseCache.getData(fileName);\r\n      const promise = this.processIntoMesh(info);\r\n      if (this.hasCachedModel(fileName)) {\r\n        return this.getCachedModel(fileName);\r\n      }\r\n      if (isPartType(info.type)) {\r\n        this._cache[key] = promise;\r\n      }\r\n      const group = await promise;\r\n      return group.clone();\r\n    }\r\n  }\r\n  // parses the given model text into a renderable object. Returns cached copy if available.\r\n  async parseModel(text) {\r\n    const parseCache = this.parseCache;\r\n    const info = parseCache.parse(text);\r\n    if (isPartType(info.type) && this.hasCachedModel(info.fileName)) {\r\n      return this.getCachedModel(info.fileName);\r\n    }\r\n    return this.processIntoMesh(info);\r\n  }\r\n}\r\nfunction sortByMaterial(a, b) {\r\n  if (a.colorCode === b.colorCode) {\r\n    return 0;\r\n  }\r\n  if (a.colorCode < b.colorCode) {\r\n    return -1;\r\n  }\r\n  return 1;\r\n}\r\nfunction createObject(elements, elementSize, isConditionalSegments = false, totalElements = null) {\r\n  elements.sort(sortByMaterial);\r\n  if (totalElements === null) {\r\n    totalElements = elements.length;\r\n  }\r\n  const positions = new Float32Array(elementSize * totalElements * 3);\r\n  const normals = elementSize === 3 ? new Float32Array(elementSize * totalElements * 3) : null;\r\n  const materials = [];\r\n  const quadArray = new Array(6);\r\n  const bufferGeometry = new BufferGeometry();\r\n  let prevMaterial = null;\r\n  let index0 = 0;\r\n  let numGroupVerts = 0;\r\n  let offset = 0;\r\n  for (let iElem = 0, nElem = elements.length; iElem < nElem; iElem++) {\r\n    const elem = elements[iElem];\r\n    let vertices = elem.vertices;\r\n    if (vertices.length === 4) {\r\n      quadArray[0] = vertices[0];\r\n      quadArray[1] = vertices[1];\r\n      quadArray[2] = vertices[2];\r\n      quadArray[3] = vertices[0];\r\n      quadArray[4] = vertices[2];\r\n      quadArray[5] = vertices[3];\r\n      vertices = quadArray;\r\n    }\r\n    for (let j = 0, l = vertices.length; j < l; j++) {\r\n      const v = vertices[j];\r\n      const index = offset + j * 3;\r\n      positions[index + 0] = v.x;\r\n      positions[index + 1] = v.y;\r\n      positions[index + 2] = v.z;\r\n    }\r\n    if (elementSize === 3) {\r\n      if (!elem.faceNormal) {\r\n        const v0 = vertices[0];\r\n        const v1 = vertices[1];\r\n        const v2 = vertices[2];\r\n        _tempVec0.subVectors(v1, v0);\r\n        _tempVec1.subVectors(v2, v1);\r\n        elem.faceNormal = new Vector3().crossVectors(_tempVec0, _tempVec1).normalize();\r\n      }\r\n      let elemNormals = elem.normals;\r\n      if (elemNormals.length === 4) {\r\n        quadArray[0] = elemNormals[0];\r\n        quadArray[1] = elemNormals[1];\r\n        quadArray[2] = elemNormals[2];\r\n        quadArray[3] = elemNormals[0];\r\n        quadArray[4] = elemNormals[2];\r\n        quadArray[5] = elemNormals[3];\r\n        elemNormals = quadArray;\r\n      }\r\n      for (let j = 0, l = elemNormals.length; j < l; j++) {\r\n        let n = elem.faceNormal;\r\n        if (elemNormals[j]) {\r\n          n = elemNormals[j].norm;\r\n        }\r\n        const index = offset + j * 3;\r\n        normals[index + 0] = n.x;\r\n        normals[index + 1] = n.y;\r\n        normals[index + 2] = n.z;\r\n      }\r\n    }\r\n    if (prevMaterial !== elem.colorCode) {\r\n      if (prevMaterial !== null) {\r\n        bufferGeometry.addGroup(index0, numGroupVerts, materials.length - 1);\r\n      }\r\n      const material = elem.material;\r\n      if (material !== null) {\r\n        if (elementSize === 3) {\r\n          materials.push(material);\r\n        } else if (elementSize === 2) {\r\n          if (material !== null) {\r\n            if (isConditionalSegments) {\r\n              materials.push(material.userData.edgeMaterial.userData.conditionalEdgeMaterial);\r\n            } else {\r\n              materials.push(material.userData.edgeMaterial);\r\n            }\r\n          } else {\r\n            materials.push(null);\r\n          }\r\n        }\r\n      } else {\r\n        materials.push(elem.colorCode);\r\n      }\r\n      prevMaterial = elem.colorCode;\r\n      index0 = offset / 3;\r\n      numGroupVerts = vertices.length;\r\n    } else {\r\n      numGroupVerts += vertices.length;\r\n    }\r\n    offset += 3 * vertices.length;\r\n  }\r\n  if (numGroupVerts > 0) {\r\n    bufferGeometry.addGroup(index0, Infinity, materials.length - 1);\r\n  }\r\n  bufferGeometry.setAttribute(\"position\", new BufferAttribute(positions, 3));\r\n  if (normals !== null) {\r\n    bufferGeometry.setAttribute(\"normal\", new BufferAttribute(normals, 3));\r\n  }\r\n  let object3d = null;\r\n  if (elementSize === 2) {\r\n    if (isConditionalSegments) {\r\n      object3d = new ConditionalLineSegments(bufferGeometry, materials.length === 1 ? materials[0] : materials);\r\n    } else {\r\n      object3d = new LineSegments(bufferGeometry, materials.length === 1 ? materials[0] : materials);\r\n    }\r\n  } else if (elementSize === 3) {\r\n    object3d = new Mesh(bufferGeometry, materials.length === 1 ? materials[0] : materials);\r\n  }\r\n  if (isConditionalSegments) {\r\n    object3d.isConditionalLine = true;\r\n    const controlArray0 = new Float32Array(elements.length * 3 * 2);\r\n    const controlArray1 = new Float32Array(elements.length * 3 * 2);\r\n    const directionArray = new Float32Array(elements.length * 3 * 2);\r\n    for (let i = 0, l = elements.length; i < l; i++) {\r\n      const os = elements[i];\r\n      const vertices = os.vertices;\r\n      const controlPoints = os.controlPoints;\r\n      const c0 = controlPoints[0];\r\n      const c1 = controlPoints[1];\r\n      const v0 = vertices[0];\r\n      const v1 = vertices[1];\r\n      const index = i * 3 * 2;\r\n      controlArray0[index + 0] = c0.x;\r\n      controlArray0[index + 1] = c0.y;\r\n      controlArray0[index + 2] = c0.z;\r\n      controlArray0[index + 3] = c0.x;\r\n      controlArray0[index + 4] = c0.y;\r\n      controlArray0[index + 5] = c0.z;\r\n      controlArray1[index + 0] = c1.x;\r\n      controlArray1[index + 1] = c1.y;\r\n      controlArray1[index + 2] = c1.z;\r\n      controlArray1[index + 3] = c1.x;\r\n      controlArray1[index + 4] = c1.y;\r\n      controlArray1[index + 5] = c1.z;\r\n      directionArray[index + 0] = v1.x - v0.x;\r\n      directionArray[index + 1] = v1.y - v0.y;\r\n      directionArray[index + 2] = v1.z - v0.z;\r\n      directionArray[index + 3] = v1.x - v0.x;\r\n      directionArray[index + 4] = v1.y - v0.y;\r\n      directionArray[index + 5] = v1.z - v0.z;\r\n    }\r\n    bufferGeometry.setAttribute(\"control0\", new BufferAttribute(controlArray0, 3, false));\r\n    bufferGeometry.setAttribute(\"control1\", new BufferAttribute(controlArray1, 3, false));\r\n    bufferGeometry.setAttribute(\"direction\", new BufferAttribute(directionArray, 3, false));\r\n  }\r\n  return object3d;\r\n}\r\nclass LDrawLoader extends Loader {\r\n  constructor(manager) {\r\n    super(manager);\r\n    this.materials = [];\r\n    this.materialLibrary = {};\r\n    this.partsCache = new LDrawPartsGeometryCache(this);\r\n    this.fileMap = {};\r\n    this.setMaterials([]);\r\n    this.smoothNormals = true;\r\n    this.partsLibraryPath = \"\";\r\n  }\r\n  setPartsLibraryPath(path) {\r\n    this.partsLibraryPath = path;\r\n    return this;\r\n  }\r\n  async preloadMaterials(url) {\r\n    const fileLoader = new FileLoader(this.manager);\r\n    fileLoader.setPath(this.path);\r\n    fileLoader.setRequestHeader(this.requestHeader);\r\n    fileLoader.setWithCredentials(this.withCredentials);\r\n    const text = await fileLoader.loadAsync(url);\r\n    const colorLineRegex = /^0 !COLOUR/;\r\n    const lines = text.split(/[\\n\\r]/g);\r\n    const materials = [];\r\n    for (let i = 0, l = lines.length; i < l; i++) {\r\n      const line = lines[i];\r\n      if (colorLineRegex.test(line)) {\r\n        const directive = line.replace(colorLineRegex, \"\");\r\n        const material = this.parseColorMetaDirective(new LineParser(directive));\r\n        materials.push(material);\r\n      }\r\n    }\r\n    this.setMaterials(materials);\r\n  }\r\n  load(url, onLoad, onProgress, onError) {\r\n    const fileLoader = new FileLoader(this.manager);\r\n    fileLoader.setPath(this.path);\r\n    fileLoader.setRequestHeader(this.requestHeader);\r\n    fileLoader.setWithCredentials(this.withCredentials);\r\n    fileLoader.load(\r\n      url,\r\n      (text) => {\r\n        this.partsCache.parseModel(text, this.materialLibrary).then((group) => {\r\n          this.applyMaterialsToMesh(group, MAIN_COLOUR_CODE, this.materialLibrary, true);\r\n          this.computeConstructionSteps(group);\r\n          onLoad(group);\r\n        }).catch(onError);\r\n      },\r\n      onProgress,\r\n      onError\r\n    );\r\n  }\r\n  parse(text, onLoad) {\r\n    this.partsCache.parseModel(text, this.materialLibrary).then((group) => {\r\n      this.computeConstructionSteps(group);\r\n      onLoad(group);\r\n    });\r\n  }\r\n  setMaterials(materials) {\r\n    this.materialLibrary = {};\r\n    this.materials = [];\r\n    for (let i = 0, l = materials.length; i < l; i++) {\r\n      this.addMaterial(materials[i]);\r\n    }\r\n    this.addMaterial(this.parseColorMetaDirective(new LineParser(\"Main_Colour CODE 16 VALUE #FF8080 EDGE #333333\")));\r\n    this.addMaterial(this.parseColorMetaDirective(new LineParser(\"Edge_Colour CODE 24 VALUE #A0A0A0 EDGE #333333\")));\r\n    return this;\r\n  }\r\n  setFileMap(fileMap) {\r\n    this.fileMap = fileMap;\r\n    return this;\r\n  }\r\n  addMaterial(material) {\r\n    const matLib = this.materialLibrary;\r\n    if (!matLib[material.userData.code]) {\r\n      this.materials.push(material);\r\n      matLib[material.userData.code] = material;\r\n    }\r\n    return this;\r\n  }\r\n  getMaterial(colorCode) {\r\n    if (colorCode.startsWith(\"0x2\")) {\r\n      const color = colorCode.substring(3);\r\n      return this.parseColorMetaDirective(\r\n        new LineParser(\"Direct_Color_\" + color + \" CODE -1 VALUE #\" + color + \" EDGE #\" + color)\r\n      );\r\n    }\r\n    return this.materialLibrary[colorCode] || null;\r\n  }\r\n  // Applies the appropriate materials to a prebuilt hierarchy of geometry. Assumes that color codes are present\r\n  // in the material array if they need to be filled in.\r\n  applyMaterialsToMesh(group, parentColorCode, materialHierarchy, finalMaterialPass = false) {\r\n    const loader = this;\r\n    const parentIsPassthrough = parentColorCode === MAIN_COLOUR_CODE;\r\n    group.traverse((c) => {\r\n      if (c.isMesh || c.isLineSegments) {\r\n        if (Array.isArray(c.material)) {\r\n          for (let i = 0, l = c.material.length; i < l; i++) {\r\n            if (!c.material[i].isMaterial) {\r\n              c.material[i] = getMaterial(c, c.material[i]);\r\n            }\r\n          }\r\n        } else if (!c.material.isMaterial) {\r\n          c.material = getMaterial(c, c.material);\r\n        }\r\n      }\r\n    });\r\n    function getMaterial(c, colorCode) {\r\n      if (parentIsPassthrough && !(colorCode in materialHierarchy) && !finalMaterialPass) {\r\n        return colorCode;\r\n      }\r\n      const forEdge = c.isLineSegments || c.isConditionalLine;\r\n      const isPassthrough = !forEdge && colorCode === MAIN_COLOUR_CODE || forEdge && colorCode === MAIN_EDGE_COLOUR_CODE;\r\n      if (isPassthrough) {\r\n        colorCode = parentColorCode;\r\n      }\r\n      let material = null;\r\n      if (colorCode in materialHierarchy) {\r\n        material = materialHierarchy[colorCode];\r\n      } else if (finalMaterialPass) {\r\n        material = loader.getMaterial(colorCode);\r\n        if (material === null) {\r\n          throw new Error(`LDrawLoader: Material properties for code ${colorCode} not available.`);\r\n        }\r\n      } else {\r\n        return colorCode;\r\n      }\r\n      if (c.isLineSegments) {\r\n        material = material.userData.edgeMaterial;\r\n        if (c.isConditionalLine) {\r\n          material = material.userData.conditionalEdgeMaterial;\r\n        }\r\n      }\r\n      return material;\r\n    }\r\n  }\r\n  getMainMaterial() {\r\n    return this.getMaterial(MAIN_COLOUR_CODE);\r\n  }\r\n  getMainEdgeMaterial() {\r\n    return this.getMaterial(MAIN_EDGE_COLOUR_CODE);\r\n  }\r\n  parseColorMetaDirective(lineParser) {\r\n    let code = null;\r\n    let color = 16711935;\r\n    let edgeColor = 16711935;\r\n    let alpha = 1;\r\n    let isTransparent = false;\r\n    let luminance = 0;\r\n    let finishType = FINISH_TYPE_DEFAULT;\r\n    let edgeMaterial = null;\r\n    const name = lineParser.getToken();\r\n    if (!name) {\r\n      throw new Error(\r\n        'LDrawLoader: Material name was expected after \"!COLOUR tag' + lineParser.getLineNumberString() + \".\"\r\n      );\r\n    }\r\n    let token = null;\r\n    while (true) {\r\n      token = lineParser.getToken();\r\n      if (!token) {\r\n        break;\r\n      }\r\n      switch (token.toUpperCase()) {\r\n        case \"CODE\":\r\n          code = lineParser.getToken();\r\n          break;\r\n        case \"VALUE\":\r\n          color = lineParser.getToken();\r\n          if (color.startsWith(\"0x\")) {\r\n            color = \"#\" + color.substring(2);\r\n          } else if (!color.startsWith(\"#\")) {\r\n            throw new Error(\r\n              \"LDrawLoader: Invalid color while parsing material\" + lineParser.getLineNumberString() + \".\"\r\n            );\r\n          }\r\n          break;\r\n        case \"EDGE\":\r\n          edgeColor = lineParser.getToken();\r\n          if (edgeColor.startsWith(\"0x\")) {\r\n            edgeColor = \"#\" + edgeColor.substring(2);\r\n          } else if (!edgeColor.startsWith(\"#\")) {\r\n            edgeMaterial = this.getMaterial(edgeColor);\r\n            if (!edgeMaterial) {\r\n              throw new Error(\r\n                \"LDrawLoader: Invalid edge color while parsing material\" + lineParser.getLineNumberString() + \".\"\r\n              );\r\n            }\r\n            edgeMaterial = edgeMaterial.userData.edgeMaterial;\r\n          }\r\n          break;\r\n        case \"ALPHA\":\r\n          alpha = parseInt(lineParser.getToken());\r\n          if (isNaN(alpha)) {\r\n            throw new Error(\r\n              \"LDrawLoader: Invalid alpha value in material definition\" + lineParser.getLineNumberString() + \".\"\r\n            );\r\n          }\r\n          alpha = Math.max(0, Math.min(1, alpha / 255));\r\n          if (alpha < 1) {\r\n            isTransparent = true;\r\n          }\r\n          break;\r\n        case \"LUMINANCE\":\r\n          luminance = parseInt(lineParser.getToken());\r\n          if (isNaN(luminance)) {\r\n            throw new Error(\r\n              \"LDrawLoader: Invalid luminance value in material definition\" + LineParser.getLineNumberString() + \".\"\r\n            );\r\n          }\r\n          luminance = Math.max(0, Math.min(1, luminance / 255));\r\n          break;\r\n        case \"CHROME\":\r\n          finishType = FINISH_TYPE_CHROME;\r\n          break;\r\n        case \"PEARLESCENT\":\r\n          finishType = FINISH_TYPE_PEARLESCENT;\r\n          break;\r\n        case \"RUBBER\":\r\n          finishType = FINISH_TYPE_RUBBER;\r\n          break;\r\n        case \"MATTE_METALLIC\":\r\n          finishType = FINISH_TYPE_MATTE_METALLIC;\r\n          break;\r\n        case \"METAL\":\r\n          finishType = FINISH_TYPE_METAL;\r\n          break;\r\n        case \"MATERIAL\":\r\n          lineParser.setToEnd();\r\n          break;\r\n        default:\r\n          throw new Error(\r\n            'LDrawLoader: Unknown token \"' + token + '\" while parsing material' + lineParser.getLineNumberString() + \".\"\r\n          );\r\n      }\r\n    }\r\n    let material = null;\r\n    switch (finishType) {\r\n      case FINISH_TYPE_DEFAULT:\r\n        material = new MeshStandardMaterial({ color, roughness: 0.3, metalness: 0 });\r\n        break;\r\n      case FINISH_TYPE_PEARLESCENT:\r\n        material = new MeshStandardMaterial({ color, roughness: 0.3, metalness: 0.25 });\r\n        break;\r\n      case FINISH_TYPE_CHROME:\r\n        material = new MeshStandardMaterial({ color, roughness: 0, metalness: 1 });\r\n        break;\r\n      case FINISH_TYPE_RUBBER:\r\n        material = new MeshStandardMaterial({ color, roughness: 0.9, metalness: 0 });\r\n        break;\r\n      case FINISH_TYPE_MATTE_METALLIC:\r\n        material = new MeshStandardMaterial({ color, roughness: 0.8, metalness: 0.4 });\r\n        break;\r\n      case FINISH_TYPE_METAL:\r\n        material = new MeshStandardMaterial({ color, roughness: 0.2, metalness: 0.85 });\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    material.transparent = isTransparent;\r\n    material.premultipliedAlpha = true;\r\n    material.opacity = alpha;\r\n    material.depthWrite = !isTransparent;\r\n    material.polygonOffset = true;\r\n    material.polygonOffsetFactor = 1;\r\n    if (luminance !== 0) {\r\n      material.emissive.set(material.color).multiplyScalar(luminance);\r\n    }\r\n    if (!edgeMaterial) {\r\n      edgeMaterial = new LineBasicMaterial({\r\n        color: edgeColor,\r\n        transparent: isTransparent,\r\n        opacity: alpha,\r\n        depthWrite: !isTransparent\r\n      });\r\n      edgeMaterial.userData.code = code;\r\n      edgeMaterial.name = name + \" - Edge\";\r\n      edgeMaterial.userData.conditionalEdgeMaterial = new LDrawConditionalLineMaterial({\r\n        fog: true,\r\n        transparent: isTransparent,\r\n        depthWrite: !isTransparent,\r\n        color: edgeColor,\r\n        opacity: alpha\r\n      });\r\n    }\r\n    material.userData.code = code;\r\n    material.name = name;\r\n    material.userData.edgeMaterial = edgeMaterial;\r\n    this.addMaterial(material);\r\n    return material;\r\n  }\r\n  computeConstructionSteps(model) {\r\n    let stepNumber = 0;\r\n    model.traverse((c) => {\r\n      if (c.isGroup) {\r\n        if (c.userData.startingConstructionStep) {\r\n          stepNumber++;\r\n        }\r\n        c.userData.constructionStep = stepNumber;\r\n      }\r\n    });\r\n    model.userData.numConstructionSteps = stepNumber + 1;\r\n  }\r\n}\r\nexport {\r\n  LDrawLoader\r\n};\r\n", "import { Vector3, Loader, FileLoader, Group, BufferGeometry, Float32BufferAttribute, LineBasicMaterial, Material, PointsMaterial, MeshPhongMaterial, LineSegments, Points, Mesh } from \"three\";\r\nconst _object_pattern = /^[og]\\s*(.+)?/;\r\nconst _material_library_pattern = /^mtllib /;\r\nconst _material_use_pattern = /^usemtl /;\r\nconst _map_use_pattern = /^usemap /;\r\nconst _vA = /* @__PURE__ */ new Vector3();\r\nconst _vB = /* @__PURE__ */ new Vector3();\r\nconst _vC = /* @__PURE__ */ new Vector3();\r\nconst _ab = /* @__PURE__ */ new Vector3();\r\nconst _cb = /* @__PURE__ */ new Vector3();\r\nfunction ParserState() {\r\n  const state = {\r\n    objects: [],\r\n    object: {},\r\n    vertices: [],\r\n    normals: [],\r\n    colors: [],\r\n    uvs: [],\r\n    materials: {},\r\n    materialLibraries: [],\r\n    startObject: function(name, fromDeclaration) {\r\n      if (this.object && this.object.fromDeclaration === false) {\r\n        this.object.name = name;\r\n        this.object.fromDeclaration = fromDeclaration !== false;\r\n        return;\r\n      }\r\n      const previousMaterial = this.object && typeof this.object.currentMaterial === \"function\" ? this.object.currentMaterial() : void 0;\r\n      if (this.object && typeof this.object._finalize === \"function\") {\r\n        this.object._finalize(true);\r\n      }\r\n      this.object = {\r\n        name: name || \"\",\r\n        fromDeclaration: fromDeclaration !== false,\r\n        geometry: {\r\n          vertices: [],\r\n          normals: [],\r\n          colors: [],\r\n          uvs: [],\r\n          hasUVIndices: false\r\n        },\r\n        materials: [],\r\n        smooth: true,\r\n        startMaterial: function(name2, libraries) {\r\n          const previous = this._finalize(false);\r\n          if (previous && (previous.inherited || previous.groupCount <= 0)) {\r\n            this.materials.splice(previous.index, 1);\r\n          }\r\n          const material = {\r\n            index: this.materials.length,\r\n            name: name2 || \"\",\r\n            mtllib: Array.isArray(libraries) && libraries.length > 0 ? libraries[libraries.length - 1] : \"\",\r\n            smooth: previous !== void 0 ? previous.smooth : this.smooth,\r\n            groupStart: previous !== void 0 ? previous.groupEnd : 0,\r\n            groupEnd: -1,\r\n            groupCount: -1,\r\n            inherited: false,\r\n            clone: function(index) {\r\n              const cloned = {\r\n                index: typeof index === \"number\" ? index : this.index,\r\n                name: this.name,\r\n                mtllib: this.mtllib,\r\n                smooth: this.smooth,\r\n                groupStart: 0,\r\n                groupEnd: -1,\r\n                groupCount: -1,\r\n                inherited: false\r\n              };\r\n              cloned.clone = this.clone.bind(cloned);\r\n              return cloned;\r\n            }\r\n          };\r\n          this.materials.push(material);\r\n          return material;\r\n        },\r\n        currentMaterial: function() {\r\n          if (this.materials.length > 0) {\r\n            return this.materials[this.materials.length - 1];\r\n          }\r\n          return void 0;\r\n        },\r\n        _finalize: function(end) {\r\n          const lastMultiMaterial = this.currentMaterial();\r\n          if (lastMultiMaterial && lastMultiMaterial.groupEnd === -1) {\r\n            lastMultiMaterial.groupEnd = this.geometry.vertices.length / 3;\r\n            lastMultiMaterial.groupCount = lastMultiMaterial.groupEnd - lastMultiMaterial.groupStart;\r\n            lastMultiMaterial.inherited = false;\r\n          }\r\n          if (end && this.materials.length > 1) {\r\n            for (let mi = this.materials.length - 1; mi >= 0; mi--) {\r\n              if (this.materials[mi].groupCount <= 0) {\r\n                this.materials.splice(mi, 1);\r\n              }\r\n            }\r\n          }\r\n          if (end && this.materials.length === 0) {\r\n            this.materials.push({\r\n              name: \"\",\r\n              smooth: this.smooth\r\n            });\r\n          }\r\n          return lastMultiMaterial;\r\n        }\r\n      };\r\n      if (previousMaterial && previousMaterial.name && typeof previousMaterial.clone === \"function\") {\r\n        const declared = previousMaterial.clone(0);\r\n        declared.inherited = true;\r\n        this.object.materials.push(declared);\r\n      }\r\n      this.objects.push(this.object);\r\n    },\r\n    finalize: function() {\r\n      if (this.object && typeof this.object._finalize === \"function\") {\r\n        this.object._finalize(true);\r\n      }\r\n    },\r\n    parseVertexIndex: function(value, len) {\r\n      const index = parseInt(value, 10);\r\n      return (index >= 0 ? index - 1 : index + len / 3) * 3;\r\n    },\r\n    parseNormalIndex: function(value, len) {\r\n      const index = parseInt(value, 10);\r\n      return (index >= 0 ? index - 1 : index + len / 3) * 3;\r\n    },\r\n    parseUVIndex: function(value, len) {\r\n      const index = parseInt(value, 10);\r\n      return (index >= 0 ? index - 1 : index + len / 2) * 2;\r\n    },\r\n    addVertex: function(a, b, c) {\r\n      const src = this.vertices;\r\n      const dst = this.object.geometry.vertices;\r\n      dst.push(src[a + 0], src[a + 1], src[a + 2]);\r\n      dst.push(src[b + 0], src[b + 1], src[b + 2]);\r\n      dst.push(src[c + 0], src[c + 1], src[c + 2]);\r\n    },\r\n    addVertexPoint: function(a) {\r\n      const src = this.vertices;\r\n      const dst = this.object.geometry.vertices;\r\n      dst.push(src[a + 0], src[a + 1], src[a + 2]);\r\n    },\r\n    addVertexLine: function(a) {\r\n      const src = this.vertices;\r\n      const dst = this.object.geometry.vertices;\r\n      dst.push(src[a + 0], src[a + 1], src[a + 2]);\r\n    },\r\n    addNormal: function(a, b, c) {\r\n      const src = this.normals;\r\n      const dst = this.object.geometry.normals;\r\n      dst.push(src[a + 0], src[a + 1], src[a + 2]);\r\n      dst.push(src[b + 0], src[b + 1], src[b + 2]);\r\n      dst.push(src[c + 0], src[c + 1], src[c + 2]);\r\n    },\r\n    addFaceNormal: function(a, b, c) {\r\n      const src = this.vertices;\r\n      const dst = this.object.geometry.normals;\r\n      _vA.fromArray(src, a);\r\n      _vB.fromArray(src, b);\r\n      _vC.fromArray(src, c);\r\n      _cb.subVectors(_vC, _vB);\r\n      _ab.subVectors(_vA, _vB);\r\n      _cb.cross(_ab);\r\n      _cb.normalize();\r\n      dst.push(_cb.x, _cb.y, _cb.z);\r\n      dst.push(_cb.x, _cb.y, _cb.z);\r\n      dst.push(_cb.x, _cb.y, _cb.z);\r\n    },\r\n    addColor: function(a, b, c) {\r\n      const src = this.colors;\r\n      const dst = this.object.geometry.colors;\r\n      if (src[a] !== void 0)\r\n        dst.push(src[a + 0], src[a + 1], src[a + 2]);\r\n      if (src[b] !== void 0)\r\n        dst.push(src[b + 0], src[b + 1], src[b + 2]);\r\n      if (src[c] !== void 0)\r\n        dst.push(src[c + 0], src[c + 1], src[c + 2]);\r\n    },\r\n    addUV: function(a, b, c) {\r\n      const src = this.uvs;\r\n      const dst = this.object.geometry.uvs;\r\n      dst.push(src[a + 0], src[a + 1]);\r\n      dst.push(src[b + 0], src[b + 1]);\r\n      dst.push(src[c + 0], src[c + 1]);\r\n    },\r\n    addDefaultUV: function() {\r\n      const dst = this.object.geometry.uvs;\r\n      dst.push(0, 0);\r\n      dst.push(0, 0);\r\n      dst.push(0, 0);\r\n    },\r\n    addUVLine: function(a) {\r\n      const src = this.uvs;\r\n      const dst = this.object.geometry.uvs;\r\n      dst.push(src[a + 0], src[a + 1]);\r\n    },\r\n    addFace: function(a, b, c, ua, ub, uc, na, nb, nc) {\r\n      const vLen = this.vertices.length;\r\n      let ia = this.parseVertexIndex(a, vLen);\r\n      let ib = this.parseVertexIndex(b, vLen);\r\n      let ic = this.parseVertexIndex(c, vLen);\r\n      this.addVertex(ia, ib, ic);\r\n      this.addColor(ia, ib, ic);\r\n      if (na !== void 0 && na !== \"\") {\r\n        const nLen = this.normals.length;\r\n        ia = this.parseNormalIndex(na, nLen);\r\n        ib = this.parseNormalIndex(nb, nLen);\r\n        ic = this.parseNormalIndex(nc, nLen);\r\n        this.addNormal(ia, ib, ic);\r\n      } else {\r\n        this.addFaceNormal(ia, ib, ic);\r\n      }\r\n      if (ua !== void 0 && ua !== \"\") {\r\n        const uvLen = this.uvs.length;\r\n        ia = this.parseUVIndex(ua, uvLen);\r\n        ib = this.parseUVIndex(ub, uvLen);\r\n        ic = this.parseUVIndex(uc, uvLen);\r\n        this.addUV(ia, ib, ic);\r\n        this.object.geometry.hasUVIndices = true;\r\n      } else {\r\n        this.addDefaultUV();\r\n      }\r\n    },\r\n    addPointGeometry: function(vertices) {\r\n      this.object.geometry.type = \"Points\";\r\n      const vLen = this.vertices.length;\r\n      for (let vi = 0, l = vertices.length; vi < l; vi++) {\r\n        const index = this.parseVertexIndex(vertices[vi], vLen);\r\n        this.addVertexPoint(index);\r\n        this.addColor(index);\r\n      }\r\n    },\r\n    addLineGeometry: function(vertices, uvs) {\r\n      this.object.geometry.type = \"Line\";\r\n      const vLen = this.vertices.length;\r\n      const uvLen = this.uvs.length;\r\n      for (let vi = 0, l = vertices.length; vi < l; vi++) {\r\n        this.addVertexLine(this.parseVertexIndex(vertices[vi], vLen));\r\n      }\r\n      for (let uvi = 0, l = uvs.length; uvi < l; uvi++) {\r\n        this.addUVLine(this.parseUVIndex(uvs[uvi], uvLen));\r\n      }\r\n    }\r\n  };\r\n  state.startObject(\"\", false);\r\n  return state;\r\n}\r\nclass OBJLoader extends Loader {\r\n  constructor(manager) {\r\n    super(manager);\r\n    this.materials = null;\r\n  }\r\n  load(url, onLoad, onProgress, onError) {\r\n    const scope = this;\r\n    const loader = new FileLoader(this.manager);\r\n    loader.setPath(this.path);\r\n    loader.setRequestHeader(this.requestHeader);\r\n    loader.setWithCredentials(this.withCredentials);\r\n    loader.load(\r\n      url,\r\n      function(text) {\r\n        try {\r\n          onLoad(scope.parse(text));\r\n        } catch (e) {\r\n          if (onError) {\r\n            onError(e);\r\n          } else {\r\n            console.error(e);\r\n          }\r\n          scope.manager.itemError(url);\r\n        }\r\n      },\r\n      onProgress,\r\n      onError\r\n    );\r\n  }\r\n  setMaterials(materials) {\r\n    this.materials = materials;\r\n    return this;\r\n  }\r\n  parse(text) {\r\n    const state = new ParserState();\r\n    if (text.indexOf(\"\\r\\n\") !== -1) {\r\n      text = text.replace(/\\r\\n/g, \"\\n\");\r\n    }\r\n    if (text.indexOf(\"\\\\\\n\") !== -1) {\r\n      text = text.replace(/\\\\\\n/g, \"\");\r\n    }\r\n    const lines = text.split(\"\\n\");\r\n    let line = \"\", lineFirstChar = \"\";\r\n    let lineLength = 0;\r\n    let result = [];\r\n    const trimLeft = typeof \"\".trimLeft === \"function\";\r\n    for (let i = 0, l = lines.length; i < l; i++) {\r\n      line = lines[i];\r\n      line = trimLeft ? line.trimLeft() : line.trim();\r\n      lineLength = line.length;\r\n      if (lineLength === 0)\r\n        continue;\r\n      lineFirstChar = line.charAt(0);\r\n      if (lineFirstChar === \"#\")\r\n        continue;\r\n      if (lineFirstChar === \"v\") {\r\n        const data = line.split(/\\s+/);\r\n        switch (data[0]) {\r\n          case \"v\":\r\n            state.vertices.push(parseFloat(data[1]), parseFloat(data[2]), parseFloat(data[3]));\r\n            if (data.length >= 7) {\r\n              state.colors.push(parseFloat(data[4]), parseFloat(data[5]), parseFloat(data[6]));\r\n            } else {\r\n              state.colors.push(void 0, void 0, void 0);\r\n            }\r\n            break;\r\n          case \"vn\":\r\n            state.normals.push(parseFloat(data[1]), parseFloat(data[2]), parseFloat(data[3]));\r\n            break;\r\n          case \"vt\":\r\n            state.uvs.push(parseFloat(data[1]), parseFloat(data[2]));\r\n            break;\r\n        }\r\n      } else if (lineFirstChar === \"f\") {\r\n        const lineData = line.substr(1).trim();\r\n        const vertexData = lineData.split(/\\s+/);\r\n        const faceVertices = [];\r\n        for (let j = 0, jl = vertexData.length; j < jl; j++) {\r\n          const vertex = vertexData[j];\r\n          if (vertex.length > 0) {\r\n            const vertexParts = vertex.split(\"/\");\r\n            faceVertices.push(vertexParts);\r\n          }\r\n        }\r\n        const v1 = faceVertices[0];\r\n        for (let j = 1, jl = faceVertices.length - 1; j < jl; j++) {\r\n          const v2 = faceVertices[j];\r\n          const v3 = faceVertices[j + 1];\r\n          state.addFace(v1[0], v2[0], v3[0], v1[1], v2[1], v3[1], v1[2], v2[2], v3[2]);\r\n        }\r\n      } else if (lineFirstChar === \"l\") {\r\n        const lineParts = line.substring(1).trim().split(\" \");\r\n        let lineVertices = [];\r\n        const lineUVs = [];\r\n        if (line.indexOf(\"/\") === -1) {\r\n          lineVertices = lineParts;\r\n        } else {\r\n          for (let li = 0, llen = lineParts.length; li < llen; li++) {\r\n            const parts = lineParts[li].split(\"/\");\r\n            if (parts[0] !== \"\")\r\n              lineVertices.push(parts[0]);\r\n            if (parts[1] !== \"\")\r\n              lineUVs.push(parts[1]);\r\n          }\r\n        }\r\n        state.addLineGeometry(lineVertices, lineUVs);\r\n      } else if (lineFirstChar === \"p\") {\r\n        const lineData = line.substr(1).trim();\r\n        const pointData = lineData.split(\" \");\r\n        state.addPointGeometry(pointData);\r\n      } else if ((result = _object_pattern.exec(line)) !== null) {\r\n        const name = (\" \" + result[0].substr(1).trim()).substr(1);\r\n        state.startObject(name);\r\n      } else if (_material_use_pattern.test(line)) {\r\n        state.object.startMaterial(line.substring(7).trim(), state.materialLibraries);\r\n      } else if (_material_library_pattern.test(line)) {\r\n        state.materialLibraries.push(line.substring(7).trim());\r\n      } else if (_map_use_pattern.test(line)) {\r\n        console.warn(\r\n          'THREE.OBJLoader: Rendering identifier \"usemap\" not supported. Textures must be defined in MTL files.'\r\n        );\r\n      } else if (lineFirstChar === \"s\") {\r\n        result = line.split(\" \");\r\n        if (result.length > 1) {\r\n          const value = result[1].trim().toLowerCase();\r\n          state.object.smooth = value !== \"0\" && value !== \"off\";\r\n        } else {\r\n          state.object.smooth = true;\r\n        }\r\n        const material = state.object.currentMaterial();\r\n        if (material)\r\n          material.smooth = state.object.smooth;\r\n      } else {\r\n        if (line === \"\\0\")\r\n          continue;\r\n        console.warn('THREE.OBJLoader: Unexpected line: \"' + line + '\"');\r\n      }\r\n    }\r\n    state.finalize();\r\n    const container = new Group();\r\n    container.materialLibraries = [].concat(state.materialLibraries);\r\n    const hasPrimitives = !(state.objects.length === 1 && state.objects[0].geometry.vertices.length === 0);\r\n    if (hasPrimitives === true) {\r\n      for (let i = 0, l = state.objects.length; i < l; i++) {\r\n        const object = state.objects[i];\r\n        const geometry = object.geometry;\r\n        const materials = object.materials;\r\n        const isLine = geometry.type === \"Line\";\r\n        const isPoints = geometry.type === \"Points\";\r\n        let hasVertexColors = false;\r\n        if (geometry.vertices.length === 0)\r\n          continue;\r\n        const buffergeometry = new BufferGeometry();\r\n        buffergeometry.setAttribute(\"position\", new Float32BufferAttribute(geometry.vertices, 3));\r\n        if (geometry.normals.length > 0) {\r\n          buffergeometry.setAttribute(\"normal\", new Float32BufferAttribute(geometry.normals, 3));\r\n        }\r\n        if (geometry.colors.length > 0) {\r\n          hasVertexColors = true;\r\n          buffergeometry.setAttribute(\"color\", new Float32BufferAttribute(geometry.colors, 3));\r\n        }\r\n        if (geometry.hasUVIndices === true) {\r\n          buffergeometry.setAttribute(\"uv\", new Float32BufferAttribute(geometry.uvs, 2));\r\n        }\r\n        const createdMaterials = [];\r\n        for (let mi = 0, miLen = materials.length; mi < miLen; mi++) {\r\n          const sourceMaterial = materials[mi];\r\n          const materialHash = sourceMaterial.name + \"_\" + sourceMaterial.smooth + \"_\" + hasVertexColors;\r\n          let material = state.materials[materialHash];\r\n          if (this.materials !== null) {\r\n            material = this.materials.create(sourceMaterial.name);\r\n            if (isLine && material && !(material instanceof LineBasicMaterial)) {\r\n              const materialLine = new LineBasicMaterial();\r\n              Material.prototype.copy.call(materialLine, material);\r\n              materialLine.color.copy(material.color);\r\n              material = materialLine;\r\n            } else if (isPoints && material && !(material instanceof PointsMaterial)) {\r\n              const materialPoints = new PointsMaterial({ size: 10, sizeAttenuation: false });\r\n              Material.prototype.copy.call(materialPoints, material);\r\n              materialPoints.color.copy(material.color);\r\n              materialPoints.map = material.map;\r\n              material = materialPoints;\r\n            }\r\n          }\r\n          if (material === void 0) {\r\n            if (isLine) {\r\n              material = new LineBasicMaterial();\r\n            } else if (isPoints) {\r\n              material = new PointsMaterial({ size: 1, sizeAttenuation: false });\r\n            } else {\r\n              material = new MeshPhongMaterial();\r\n            }\r\n            material.name = sourceMaterial.name;\r\n            material.flatShading = sourceMaterial.smooth ? false : true;\r\n            material.vertexColors = hasVertexColors;\r\n            state.materials[materialHash] = material;\r\n          }\r\n          createdMaterials.push(material);\r\n        }\r\n        let mesh;\r\n        if (createdMaterials.length > 1) {\r\n          for (let mi = 0, miLen = materials.length; mi < miLen; mi++) {\r\n            const sourceMaterial = materials[mi];\r\n            buffergeometry.addGroup(sourceMaterial.groupStart, sourceMaterial.groupCount, mi);\r\n          }\r\n          if (isLine) {\r\n            mesh = new LineSegments(buffergeometry, createdMaterials);\r\n          } else if (isPoints) {\r\n            mesh = new Points(buffergeometry, createdMaterials);\r\n          } else {\r\n            mesh = new Mesh(buffergeometry, createdMaterials);\r\n          }\r\n        } else {\r\n          if (isLine) {\r\n            mesh = new LineSegments(buffergeometry, createdMaterials[0]);\r\n          } else if (isPoints) {\r\n            mesh = new Points(buffergeometry, createdMaterials[0]);\r\n          } else {\r\n            mesh = new Mesh(buffergeometry, createdMaterials[0]);\r\n          }\r\n        }\r\n        mesh.name = object.name;\r\n        container.add(mesh);\r\n      }\r\n    } else {\r\n      if (state.vertices.length > 0) {\r\n        const material = new PointsMaterial({ size: 1, sizeAttenuation: false });\r\n        const buffergeometry = new BufferGeometry();\r\n        buffergeometry.setAttribute(\"position\", new Float32BufferAttribute(state.vertices, 3));\r\n        if (state.colors.length > 0 && state.colors[0] !== void 0) {\r\n          buffergeometry.setAttribute(\"color\", new Float32BufferAttribute(state.colors, 3));\r\n          material.vertexColors = true;\r\n        }\r\n        const points = new Points(buffergeometry, material);\r\n        container.add(points);\r\n      }\r\n    }\r\n    return container;\r\n  }\r\n}\r\nexport {\r\n  OBJLoader\r\n};\r\n", "import { CompressedTextureLoader } from \"three\";\r\nclass KTXLoader extends CompressedTextureLoader {\r\n  constructor(manager) {\r\n    super(manager);\r\n  }\r\n  parse(buffer, loadMipmaps) {\r\n    const ktx = new KhronosTextureContainer(buffer, 1);\r\n    return {\r\n      mipmaps: ktx.mipmaps(loadMipmaps),\r\n      width: ktx.pixelWidth,\r\n      height: ktx.pixelHeight,\r\n      format: ktx.glInternalFormat,\r\n      isCubemap: ktx.numberOfFaces === 6,\r\n      mipmapCount: ktx.numberOfMipmapLevels\r\n    };\r\n  }\r\n}\r\nconst HEADER_LEN = 12 + 13 * 4;\r\nconst COMPRESSED_2D = 0;\r\nclass KhronosTextureContainer {\r\n  /**\r\n   * @param {ArrayBuffer} arrayBuffer- contents of the KTX container file\r\n   * @param {number} facesExpected- should be either 1 or 6, based whether a cube texture or or\r\n   * @param {boolean} threeDExpected- provision for indicating that data should be a 3D texture, not implemented\r\n   * @param {boolean} textureArrayExpected- provision for indicating that data should be a texture array, not implemented\r\n   */\r\n  constructor(arrayBuffer, facesExpected) {\r\n    this.arrayBuffer = arrayBuffer;\r\n    const identifier = new Uint8Array(this.arrayBuffer, 0, 12);\r\n    if (identifier[0] !== 171 || identifier[1] !== 75 || identifier[2] !== 84 || identifier[3] !== 88 || identifier[4] !== 32 || identifier[5] !== 49 || identifier[6] !== 49 || identifier[7] !== 187 || identifier[8] !== 13 || identifier[9] !== 10 || identifier[10] !== 26 || identifier[11] !== 10) {\r\n      console.error(\"texture missing KTX identifier\");\r\n      return;\r\n    }\r\n    const dataSize = Uint32Array.BYTES_PER_ELEMENT;\r\n    const headerDataView = new DataView(this.arrayBuffer, 12, 13 * dataSize);\r\n    const endianness = headerDataView.getUint32(0, true);\r\n    const littleEndian = endianness === 67305985;\r\n    this.glType = headerDataView.getUint32(1 * dataSize, littleEndian);\r\n    this.glTypeSize = headerDataView.getUint32(2 * dataSize, littleEndian);\r\n    this.glFormat = headerDataView.getUint32(3 * dataSize, littleEndian);\r\n    this.glInternalFormat = headerDataView.getUint32(4 * dataSize, littleEndian);\r\n    this.glBaseInternalFormat = headerDataView.getUint32(5 * dataSize, littleEndian);\r\n    this.pixelWidth = headerDataView.getUint32(6 * dataSize, littleEndian);\r\n    this.pixelHeight = headerDataView.getUint32(7 * dataSize, littleEndian);\r\n    this.pixelDepth = headerDataView.getUint32(8 * dataSize, littleEndian);\r\n    this.numberOfArrayElements = headerDataView.getUint32(9 * dataSize, littleEndian);\r\n    this.numberOfFaces = headerDataView.getUint32(10 * dataSize, littleEndian);\r\n    this.numberOfMipmapLevels = headerDataView.getUint32(11 * dataSize, littleEndian);\r\n    this.bytesOfKeyValueData = headerDataView.getUint32(12 * dataSize, littleEndian);\r\n    if (this.glType !== 0) {\r\n      console.warn(\"only compressed formats currently supported\");\r\n      return;\r\n    } else {\r\n      this.numberOfMipmapLevels = Math.max(1, this.numberOfMipmapLevels);\r\n    }\r\n    if (this.pixelHeight === 0 || this.pixelDepth !== 0) {\r\n      console.warn(\"only 2D textures currently supported\");\r\n      return;\r\n    }\r\n    if (this.numberOfArrayElements !== 0) {\r\n      console.warn(\"texture arrays not currently supported\");\r\n      return;\r\n    }\r\n    if (this.numberOfFaces !== facesExpected) {\r\n      console.warn(\"number of faces expected\" + facesExpected + \", but found \" + this.numberOfFaces);\r\n      return;\r\n    }\r\n    this.loadType = COMPRESSED_2D;\r\n  }\r\n  mipmaps(loadMipmaps) {\r\n    const mipmaps = [];\r\n    let dataOffset = HEADER_LEN + this.bytesOfKeyValueData;\r\n    let width = this.pixelWidth;\r\n    let height = this.pixelHeight;\r\n    const mipmapCount = loadMipmaps ? this.numberOfMipmapLevels : 1;\r\n    for (let level = 0; level < mipmapCount; level++) {\r\n      const imageSize = new Int32Array(this.arrayBuffer, dataOffset, 1)[0];\r\n      dataOffset += 4;\r\n      for (let face = 0; face < this.numberOfFaces; face++) {\r\n        const byteArray = new Uint8Array(this.arrayBuffer, dataOffset, imageSize);\r\n        mipmaps.push({ data: byteArray, width, height });\r\n        dataOffset += imageSize;\r\n        dataOffset += 3 - (imageSize + 3) % 4;\r\n      }\r\n      width = Math.max(1, width * 0.5);\r\n      height = Math.max(1, height * 0.5);\r\n    }\r\n    return mipmaps;\r\n  }\r\n}\r\nexport {\r\n  KTXLoader\r\n};\r\n", "import { Box3, Vector3, InstancedBufferGeometry, Float32BufferAttribute, InstancedInterleavedBuffer, InterleavedBufferAttribute, WireframeGeometry, Sphere } from \"three\";\r\nconst _box = /* @__PURE__ */ new Box3();\r\nconst _vector = /* @__PURE__ */ new Vector3();\r\nclass LineSegmentsGeometry extends InstancedBufferGeometry {\r\n  constructor() {\r\n    super();\r\n    this.isLineSegmentsGeometry = true;\r\n    this.type = \"LineSegmentsGeometry\";\r\n    const positions = [-1, 2, 0, 1, 2, 0, -1, 1, 0, 1, 1, 0, -1, 0, 0, 1, 0, 0, -1, -1, 0, 1, -1, 0];\r\n    const uvs = [-1, 2, 1, 2, -1, 1, 1, 1, -1, -1, 1, -1, -1, -2, 1, -2];\r\n    const index = [0, 2, 1, 2, 3, 1, 2, 4, 3, 4, 5, 3, 4, 6, 5, 6, 7, 5];\r\n    this.setIndex(index);\r\n    this.setAttribute(\"position\", new Float32BufferAttribute(positions, 3));\r\n    this.setAttribute(\"uv\", new Float32BufferAttribute(uvs, 2));\r\n  }\r\n  applyMatrix4(matrix) {\r\n    const start = this.attributes.instanceStart;\r\n    const end = this.attributes.instanceEnd;\r\n    if (start !== void 0) {\r\n      start.applyMatrix4(matrix);\r\n      end.applyMatrix4(matrix);\r\n      start.needsUpdate = true;\r\n    }\r\n    if (this.boundingBox !== null) {\r\n      this.computeBoundingBox();\r\n    }\r\n    if (this.boundingSphere !== null) {\r\n      this.computeBoundingSphere();\r\n    }\r\n    return this;\r\n  }\r\n  setPositions(array) {\r\n    let lineSegments;\r\n    if (array instanceof Float32Array) {\r\n      lineSegments = array;\r\n    } else if (Array.isArray(array)) {\r\n      lineSegments = new Float32Array(array);\r\n    }\r\n    const instanceBuffer = new InstancedInterleavedBuffer(lineSegments, 6, 1);\r\n    this.setAttribute(\"instanceStart\", new InterleavedBufferAttribute(instanceBuffer, 3, 0));\r\n    this.setAttribute(\"instanceEnd\", new InterleavedBufferAttribute(instanceBuffer, 3, 3));\r\n    this.computeBoundingBox();\r\n    this.computeBoundingSphere();\r\n    return this;\r\n  }\r\n  setColors(array) {\r\n    let colors;\r\n    if (array instanceof Float32Array) {\r\n      colors = array;\r\n    } else if (Array.isArray(array)) {\r\n      colors = new Float32Array(array);\r\n    }\r\n    const instanceColorBuffer = new InstancedInterleavedBuffer(colors, 6, 1);\r\n    this.setAttribute(\"instanceColorStart\", new InterleavedBufferAttribute(instanceColorBuffer, 3, 0));\r\n    this.setAttribute(\"instanceColorEnd\", new InterleavedBufferAttribute(instanceColorBuffer, 3, 3));\r\n    return this;\r\n  }\r\n  fromWireframeGeometry(geometry) {\r\n    this.setPositions(geometry.attributes.position.array);\r\n    return this;\r\n  }\r\n  fromEdgesGeometry(geometry) {\r\n    this.setPositions(geometry.attributes.position.array);\r\n    return this;\r\n  }\r\n  fromMesh(mesh) {\r\n    this.fromWireframeGeometry(new WireframeGeometry(mesh.geometry));\r\n    return this;\r\n  }\r\n  fromLineSegments(lineSegments) {\r\n    const geometry = lineSegments.geometry;\r\n    this.setPositions(geometry.attributes.position.array);\r\n    return this;\r\n  }\r\n  computeBoundingBox() {\r\n    if (this.boundingBox === null) {\r\n      this.boundingBox = new Box3();\r\n    }\r\n    const start = this.attributes.instanceStart;\r\n    const end = this.attributes.instanceEnd;\r\n    if (start !== void 0 && end !== void 0) {\r\n      this.boundingBox.setFromBufferAttribute(start);\r\n      _box.setFromBufferAttribute(end);\r\n      this.boundingBox.union(_box);\r\n    }\r\n  }\r\n  computeBoundingSphere() {\r\n    if (this.boundingSphere === null) {\r\n      this.boundingSphere = new Sphere();\r\n    }\r\n    if (this.boundingBox === null) {\r\n      this.computeBoundingBox();\r\n    }\r\n    const start = this.attributes.instanceStart;\r\n    const end = this.attributes.instanceEnd;\r\n    if (start !== void 0 && end !== void 0) {\r\n      const center = this.boundingSphere.center;\r\n      this.boundingBox.getCenter(center);\r\n      let maxRadiusSq = 0;\r\n      for (let i = 0, il = start.count; i < il; i++) {\r\n        _vector.fromBufferAttribute(start, i);\r\n        maxRadiusSq = Math.max(maxRadiusSq, center.distanceToSquared(_vector));\r\n        _vector.fromBufferAttribute(end, i);\r\n        maxRadiusSq = Math.max(maxRadiusSq, center.distanceToSquared(_vector));\r\n      }\r\n      this.boundingSphere.radius = Math.sqrt(maxRadiusSq);\r\n      if (isNaN(this.boundingSphere.radius)) {\r\n        console.error(\r\n          \"THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.\",\r\n          this\r\n        );\r\n      }\r\n    }\r\n  }\r\n  toJSON() {\r\n  }\r\n  applyMatrix(matrix) {\r\n    console.warn(\"THREE.LineSegmentsGeometry: applyMatrix() has been renamed to applyMatrix4().\");\r\n    return this.applyMatrix4(matrix);\r\n  }\r\n}\r\nexport {\r\n  LineSegmentsGeometry\r\n};\r\n", "import { Vector3, Mesh, InstancedInterleavedBuffer, InterleavedBufferAttribute } from \"three\";\r\nimport { LineSegmentsGeometry } from \"./LineSegmentsGeometry.js\";\r\nimport { LineMaterial } from \"./LineMaterial.js\";\r\nconst _start = /* @__PURE__ */ new Vector3();\r\nconst _end = /* @__PURE__ */ new Vector3();\r\nclass Wireframe extends Mesh {\r\n  constructor(geometry = new LineSegmentsGeometry(), material = new LineMaterial({ color: Math.random() * 16777215 })) {\r\n    super(geometry, material);\r\n    this.isWireframe = true;\r\n    this.type = \"Wireframe\";\r\n  }\r\n  // for backwards-compatibility, but could be a method of LineSegmentsGeometry...\r\n  computeLineDistances() {\r\n    const geometry = this.geometry;\r\n    const instanceStart = geometry.attributes.instanceStart;\r\n    const instanceEnd = geometry.attributes.instanceEnd;\r\n    const lineDistances = new Float32Array(2 * instanceStart.count);\r\n    for (let i = 0, j = 0, l = instanceStart.count; i < l; i++, j += 2) {\r\n      _start.fromBufferAttribute(instanceStart, i);\r\n      _end.fromBufferAttribute(instanceEnd, i);\r\n      lineDistances[j] = j === 0 ? 0 : lineDistances[j - 1];\r\n      lineDistances[j + 1] = lineDistances[j] + _start.distanceTo(_end);\r\n    }\r\n    const instanceDistanceBuffer = new InstancedInterleavedBuffer(lineDistances, 2, 1);\r\n    geometry.setAttribute(\"instanceDistanceStart\", new InterleavedBufferAttribute(instanceDistanceBuffer, 1, 0));\r\n    geometry.setAttribute(\"instanceDistanceEnd\", new InterleavedBufferAttribute(instanceDistanceBuffer, 1, 1));\r\n    return this;\r\n  }\r\n}\r\nexport {\r\n  Wireframe\r\n};\r\n", "import { Vector3, Vector4, Matrix4, Line3, Box3, Sphere, MathUtils, Mesh, InstancedInterleavedBuffer, InterleavedBufferAttribute } from \"three\";\r\nimport { LineSegmentsGeometry } from \"./LineSegmentsGeometry.js\";\r\nimport { LineMaterial } from \"./LineMaterial.js\";\r\nconst _start = /* @__PURE__ */ new Vector3();\r\nconst _end = /* @__PURE__ */ new Vector3();\r\nconst _start4 = /* @__PURE__ */ new Vector4();\r\nconst _end4 = /* @__PURE__ */ new Vector4();\r\nconst _ssOrigin = /* @__PURE__ */ new Vector4();\r\nconst _ssOrigin3 = /* @__PURE__ */ new Vector3();\r\nconst _mvMatrix = /* @__PURE__ */ new Matrix4();\r\nconst _line = /* @__PURE__ */ new Line3();\r\nconst _closestPoint = /* @__PURE__ */ new Vector3();\r\nconst _box = /* @__PURE__ */ new Box3();\r\nconst _sphere = /* @__PURE__ */ new Sphere();\r\nconst _clipToWorldVector = /* @__PURE__ */ new Vector4();\r\nlet _ray, _instanceStart, _instanceEnd, _lineWidth;\r\nfunction getWorldSpaceHalfWidth(camera, distance, resolution) {\r\n  _clipToWorldVector.set(0, 0, -distance, 1).applyMatrix4(camera.projectionMatrix);\r\n  _clipToWorldVector.multiplyScalar(1 / _clipToWorldVector.w);\r\n  _clipToWorldVector.x = _lineWidth / resolution.width;\r\n  _clipToWorldVector.y = _lineWidth / resolution.height;\r\n  _clipToWorldVector.applyMatrix4(camera.projectionMatrixInverse);\r\n  _clipToWorldVector.multiplyScalar(1 / _clipToWorldVector.w);\r\n  return Math.abs(Math.max(_clipToWorldVector.x, _clipToWorldVector.y));\r\n}\r\nfunction raycastWorldUnits(lineSegments, intersects) {\r\n  for (let i = 0, l = _instanceStart.count; i < l; i++) {\r\n    _line.start.fromBufferAttribute(_instanceStart, i);\r\n    _line.end.fromBufferAttribute(_instanceEnd, i);\r\n    const pointOnLine = new Vector3();\r\n    const point = new Vector3();\r\n    _ray.distanceSqToSegment(_line.start, _line.end, point, pointOnLine);\r\n    const isInside = point.distanceTo(pointOnLine) < _lineWidth * 0.5;\r\n    if (isInside) {\r\n      intersects.push({\r\n        point,\r\n        pointOnLine,\r\n        distance: _ray.origin.distanceTo(point),\r\n        object: lineSegments,\r\n        face: null,\r\n        faceIndex: i,\r\n        uv: null,\r\n        uv2: null\r\n      });\r\n    }\r\n  }\r\n}\r\nfunction raycastScreenSpace(lineSegments, camera, intersects) {\r\n  const projectionMatrix = camera.projectionMatrix;\r\n  const material = lineSegments.material;\r\n  const resolution = material.resolution;\r\n  const matrixWorld = lineSegments.matrixWorld;\r\n  const geometry = lineSegments.geometry;\r\n  const instanceStart = geometry.attributes.instanceStart;\r\n  const instanceEnd = geometry.attributes.instanceEnd;\r\n  const near = -camera.near;\r\n  _ray.at(1, _ssOrigin);\r\n  _ssOrigin.w = 1;\r\n  _ssOrigin.applyMatrix4(camera.matrixWorldInverse);\r\n  _ssOrigin.applyMatrix4(projectionMatrix);\r\n  _ssOrigin.multiplyScalar(1 / _ssOrigin.w);\r\n  _ssOrigin.x *= resolution.x / 2;\r\n  _ssOrigin.y *= resolution.y / 2;\r\n  _ssOrigin.z = 0;\r\n  _ssOrigin3.copy(_ssOrigin);\r\n  _mvMatrix.multiplyMatrices(camera.matrixWorldInverse, matrixWorld);\r\n  for (let i = 0, l = instanceStart.count; i < l; i++) {\r\n    _start4.fromBufferAttribute(instanceStart, i);\r\n    _end4.fromBufferAttribute(instanceEnd, i);\r\n    _start4.w = 1;\r\n    _end4.w = 1;\r\n    _start4.applyMatrix4(_mvMatrix);\r\n    _end4.applyMatrix4(_mvMatrix);\r\n    const isBehindCameraNear = _start4.z > near && _end4.z > near;\r\n    if (isBehindCameraNear) {\r\n      continue;\r\n    }\r\n    if (_start4.z > near) {\r\n      const deltaDist = _start4.z - _end4.z;\r\n      const t = (_start4.z - near) / deltaDist;\r\n      _start4.lerp(_end4, t);\r\n    } else if (_end4.z > near) {\r\n      const deltaDist = _end4.z - _start4.z;\r\n      const t = (_end4.z - near) / deltaDist;\r\n      _end4.lerp(_start4, t);\r\n    }\r\n    _start4.applyMatrix4(projectionMatrix);\r\n    _end4.applyMatrix4(projectionMatrix);\r\n    _start4.multiplyScalar(1 / _start4.w);\r\n    _end4.multiplyScalar(1 / _end4.w);\r\n    _start4.x *= resolution.x / 2;\r\n    _start4.y *= resolution.y / 2;\r\n    _end4.x *= resolution.x / 2;\r\n    _end4.y *= resolution.y / 2;\r\n    _line.start.copy(_start4);\r\n    _line.start.z = 0;\r\n    _line.end.copy(_end4);\r\n    _line.end.z = 0;\r\n    const param = _line.closestPointToPointParameter(_ssOrigin3, true);\r\n    _line.at(param, _closestPoint);\r\n    const zPos = MathUtils.lerp(_start4.z, _end4.z, param);\r\n    const isInClipSpace = zPos >= -1 && zPos <= 1;\r\n    const isInside = _ssOrigin3.distanceTo(_closestPoint) < _lineWidth * 0.5;\r\n    if (isInClipSpace && isInside) {\r\n      _line.start.fromBufferAttribute(instanceStart, i);\r\n      _line.end.fromBufferAttribute(instanceEnd, i);\r\n      _line.start.applyMatrix4(matrixWorld);\r\n      _line.end.applyMatrix4(matrixWorld);\r\n      const pointOnLine = new Vector3();\r\n      const point = new Vector3();\r\n      _ray.distanceSqToSegment(_line.start, _line.end, point, pointOnLine);\r\n      intersects.push({\r\n        point,\r\n        pointOnLine,\r\n        distance: _ray.origin.distanceTo(point),\r\n        object: lineSegments,\r\n        face: null,\r\n        faceIndex: i,\r\n        uv: null,\r\n        uv2: null\r\n      });\r\n    }\r\n  }\r\n}\r\nclass LineSegments2 extends Mesh {\r\n  constructor(geometry = new LineSegmentsGeometry(), material = new LineMaterial({ color: Math.random() * 16777215 })) {\r\n    super(geometry, material);\r\n    this.isLineSegments2 = true;\r\n    this.type = \"LineSegments2\";\r\n  }\r\n  // for backwards-compatibility, but could be a method of LineSegmentsGeometry...\r\n  computeLineDistances() {\r\n    const geometry = this.geometry;\r\n    const instanceStart = geometry.attributes.instanceStart;\r\n    const instanceEnd = geometry.attributes.instanceEnd;\r\n    const lineDistances = new Float32Array(2 * instanceStart.count);\r\n    for (let i = 0, j = 0, l = instanceStart.count; i < l; i++, j += 2) {\r\n      _start.fromBufferAttribute(instanceStart, i);\r\n      _end.fromBufferAttribute(instanceEnd, i);\r\n      lineDistances[j] = j === 0 ? 0 : lineDistances[j - 1];\r\n      lineDistances[j + 1] = lineDistances[j] + _start.distanceTo(_end);\r\n    }\r\n    const instanceDistanceBuffer = new InstancedInterleavedBuffer(lineDistances, 2, 1);\r\n    geometry.setAttribute(\"instanceDistanceStart\", new InterleavedBufferAttribute(instanceDistanceBuffer, 1, 0));\r\n    geometry.setAttribute(\"instanceDistanceEnd\", new InterleavedBufferAttribute(instanceDistanceBuffer, 1, 1));\r\n    return this;\r\n  }\r\n  raycast(raycaster, intersects) {\r\n    const worldUnits = this.material.worldUnits;\r\n    const camera = raycaster.camera;\r\n    if (camera === null && !worldUnits) {\r\n      console.error(\r\n        'LineSegments2: \"Raycaster.camera\" needs to be set in order to raycast against LineSegments2 while worldUnits is set to false.'\r\n      );\r\n    }\r\n    const threshold = raycaster.params.Line2 !== void 0 ? raycaster.params.Line2.threshold || 0 : 0;\r\n    _ray = raycaster.ray;\r\n    const matrixWorld = this.matrixWorld;\r\n    const geometry = this.geometry;\r\n    const material = this.material;\r\n    _lineWidth = material.linewidth + threshold;\r\n    _instanceStart = geometry.attributes.instanceStart;\r\n    _instanceEnd = geometry.attributes.instanceEnd;\r\n    if (geometry.boundingSphere === null) {\r\n      geometry.computeBoundingSphere();\r\n    }\r\n    _sphere.copy(geometry.boundingSphere).applyMatrix4(matrixWorld);\r\n    let sphereMargin;\r\n    if (worldUnits) {\r\n      sphereMargin = _lineWidth * 0.5;\r\n    } else {\r\n      const distanceToSphere = Math.max(camera.near, _sphere.distanceToPoint(_ray.origin));\r\n      sphereMargin = getWorldSpaceHalfWidth(camera, distanceToSphere, material.resolution);\r\n    }\r\n    _sphere.radius += sphereMargin;\r\n    if (_ray.intersectsSphere(_sphere) === false) {\r\n      return;\r\n    }\r\n    if (geometry.boundingBox === null) {\r\n      geometry.computeBoundingBox();\r\n    }\r\n    _box.copy(geometry.boundingBox).applyMatrix4(matrixWorld);\r\n    let boxMargin;\r\n    if (worldUnits) {\r\n      boxMargin = _lineWidth * 0.5;\r\n    } else {\r\n      const distanceToBox = Math.max(camera.near, _box.distanceToPoint(_ray.origin));\r\n      boxMargin = getWorldSpaceHalfWidth(camera, distanceToBox, material.resolution);\r\n    }\r\n    _box.expandByScalar(boxMargin);\r\n    if (_ray.intersectsBox(_box) === false) {\r\n      return;\r\n    }\r\n    if (worldUnits) {\r\n      raycastWorldUnits(this, intersects);\r\n    } else {\r\n      raycastScreenSpace(this, camera, intersects);\r\n    }\r\n  }\r\n}\r\nexport {\r\n  LineSegments2\r\n};\r\n", "import { Vector3, LineSegments, BufferGeometry, Float32BufferAttribute, LineBasicMaterial } from \"three\";\r\nconst _v1 = /* @__PURE__ */ new Vector3();\r\nconst _v2 = /* @__PURE__ */ new Vector3();\r\nclass VertexTangentsHelper extends LineSegments {\r\n  constructor(object, size = 1, color = 65535) {\r\n    const geometry = new BufferGeometry();\r\n    const nTangents = object.geometry.attributes.tangent.count;\r\n    const positions = new Float32BufferAttribute(nTangents * 2 * 3, 3);\r\n    geometry.setAttribute(\"position\", positions);\r\n    super(geometry, new LineBasicMaterial({ color, toneMapped: false }));\r\n    this.object = object;\r\n    this.size = size;\r\n    this.type = \"VertexTangentsHelper\";\r\n    this.matrixAutoUpdate = false;\r\n    this.update();\r\n  }\r\n  update() {\r\n    this.object.updateMatrixWorld(true);\r\n    const matrixWorld = this.object.matrixWorld;\r\n    const position = this.geometry.attributes.position;\r\n    const objGeometry = this.object.geometry;\r\n    const objPos = objGeometry.attributes.position;\r\n    const objTan = objGeometry.attributes.tangent;\r\n    let idx = 0;\r\n    for (let j = 0, jl = objPos.count; j < jl; j++) {\r\n      _v1.fromBufferAttribute(objPos, j).applyMatrix4(matrixWorld);\r\n      _v2.fromBufferAttribute(objTan, j);\r\n      _v2.transformDirection(matrixWorld).multiplyScalar(this.size).add(_v1);\r\n      position.setXYZ(idx, _v1.x, _v1.y, _v1.z);\r\n      idx = idx + 1;\r\n      position.setXYZ(idx, _v2.x, _v2.y, _v2.z);\r\n      idx = idx + 1;\r\n    }\r\n    position.needsUpdate = true;\r\n  }\r\n  dispose() {\r\n    this.geometry.dispose();\r\n    this.material.dispose();\r\n  }\r\n}\r\nexport {\r\n  VertexTangentsHelper\r\n};\r\n", "import { Vector3, Matrix3, LineSegments, BufferGeometry, Float32BufferAttribute, LineBasicMaterial } from \"three\";\r\nconst _v1 = /* @__PURE__ */ new Vector3();\r\nconst _v2 = /* @__PURE__ */ new Vector3();\r\nconst _normalMatrix = /* @__PURE__ */ new Matrix3();\r\nclass VertexNormalsHelper extends LineSegments {\r\n  constructor(object, size = 1, color = 16711680) {\r\n    const geometry = new BufferGeometry();\r\n    const nNormals = object.geometry.attributes.normal.count;\r\n    const positions = new Float32BufferAttribute(nNormals * 2 * 3, 3);\r\n    geometry.setAttribute(\"position\", positions);\r\n    super(geometry, new LineBasicMaterial({ color, toneMapped: false }));\r\n    this.object = object;\r\n    this.size = size;\r\n    this.type = \"VertexNormalsHelper\";\r\n    this.matrixAutoUpdate = false;\r\n    this.update();\r\n  }\r\n  update() {\r\n    this.object.updateMatrixWorld(true);\r\n    _normalMatrix.getNormalMatrix(this.object.matrixWorld);\r\n    const matrixWorld = this.object.matrixWorld;\r\n    const position = this.geometry.attributes.position;\r\n    const objGeometry = this.object.geometry;\r\n    if (objGeometry) {\r\n      const objPos = objGeometry.attributes.position;\r\n      const objNorm = objGeometry.attributes.normal;\r\n      let idx = 0;\r\n      for (let j = 0, jl = objPos.count; j < jl; j++) {\r\n        _v1.fromBufferAttribute(objPos, j).applyMatrix4(matrixWorld);\r\n        _v2.fromBufferAttribute(objNorm, j);\r\n        _v2.applyMatrix3(_normalMatrix).normalize().multiplyScalar(this.size).add(_v1);\r\n        position.setXYZ(idx, _v1.x, _v1.y, _v1.z);\r\n        idx = idx + 1;\r\n        position.setXYZ(idx, _v2.x, _v2.y, _v2.z);\r\n        idx = idx + 1;\r\n      }\r\n    }\r\n    position.needsUpdate = true;\r\n  }\r\n  dispose() {\r\n    this.geometry.dispose();\r\n    this.material.dispose();\r\n  }\r\n}\r\nexport {\r\n  VertexNormalsHelper\r\n};\r\n", "import { Matrix4, Object3D, Vector3, EventDispatcher, BufferGeometry, Float32BufferAttribute, MathUtils, Matrix3, Color, Vector2, Box3, Sphere, BufferAttribute } from \"three\";\r\nconst _m1 = /* @__PURE__ */ new Matrix4();\r\nconst _obj = /* @__PURE__ */ new Object3D();\r\nconst _offset = /* @__PURE__ */ new Vector3();\r\nclass Geometry extends EventDispatcher {\r\n  static createBufferGeometryFromObject(object) {\r\n    let buffergeometry = new BufferGeometry();\r\n    const geometry = object.geometry;\r\n    if (object.isPoints || object.isLine) {\r\n      const positions = new Float32BufferAttribute(geometry.vertices.length * 3, 3);\r\n      const colors = new Float32BufferAttribute(geometry.colors.length * 3, 3);\r\n      buffergeometry.setAttribute(\"position\", positions.copyVector3sArray(geometry.vertices));\r\n      buffergeometry.setAttribute(\"color\", colors.copyColorsArray(geometry.colors));\r\n      if (geometry.lineDistances && geometry.lineDistances.length === geometry.vertices.length) {\r\n        const lineDistances = new Float32BufferAttribute(geometry.lineDistances.length, 1);\r\n        buffergeometry.setAttribute(\"lineDistance\", lineDistances.copyArray(geometry.lineDistances));\r\n      }\r\n      if (geometry.boundingSphere !== null) {\r\n        buffergeometry.boundingSphere = geometry.boundingSphere.clone();\r\n      }\r\n      if (geometry.boundingBox !== null) {\r\n        buffergeometry.boundingBox = geometry.boundingBox.clone();\r\n      }\r\n    } else if (object.isMesh) {\r\n      buffergeometry = geometry.toBufferGeometry();\r\n    }\r\n    return buffergeometry;\r\n  }\r\n  constructor() {\r\n    super();\r\n    this.isGeometry = true;\r\n    this.uuid = MathUtils.generateUUID();\r\n    this.name = \"\";\r\n    this.type = \"Geometry\";\r\n    this.vertices = [];\r\n    this.colors = [];\r\n    this.faces = [];\r\n    this.faceVertexUvs = [[]];\r\n    this.morphTargets = [];\r\n    this.morphNormals = [];\r\n    this.skinWeights = [];\r\n    this.skinIndices = [];\r\n    this.lineDistances = [];\r\n    this.boundingBox = null;\r\n    this.boundingSphere = null;\r\n    this.elementsNeedUpdate = false;\r\n    this.verticesNeedUpdate = false;\r\n    this.uvsNeedUpdate = false;\r\n    this.normalsNeedUpdate = false;\r\n    this.colorsNeedUpdate = false;\r\n    this.lineDistancesNeedUpdate = false;\r\n    this.groupsNeedUpdate = false;\r\n  }\r\n  applyMatrix4(matrix) {\r\n    const normalMatrix = new Matrix3().getNormalMatrix(matrix);\r\n    for (let i = 0, il = this.vertices.length; i < il; i++) {\r\n      const vertex = this.vertices[i];\r\n      vertex.applyMatrix4(matrix);\r\n    }\r\n    for (let i = 0, il = this.faces.length; i < il; i++) {\r\n      const face = this.faces[i];\r\n      face.normal.applyMatrix3(normalMatrix).normalize();\r\n      for (let j = 0, jl = face.vertexNormals.length; j < jl; j++) {\r\n        face.vertexNormals[j].applyMatrix3(normalMatrix).normalize();\r\n      }\r\n    }\r\n    if (this.boundingBox !== null) {\r\n      this.computeBoundingBox();\r\n    }\r\n    if (this.boundingSphere !== null) {\r\n      this.computeBoundingSphere();\r\n    }\r\n    this.verticesNeedUpdate = true;\r\n    this.normalsNeedUpdate = true;\r\n    return this;\r\n  }\r\n  rotateX(angle) {\r\n    _m1.makeRotationX(angle);\r\n    this.applyMatrix4(_m1);\r\n    return this;\r\n  }\r\n  rotateY(angle) {\r\n    _m1.makeRotationY(angle);\r\n    this.applyMatrix4(_m1);\r\n    return this;\r\n  }\r\n  rotateZ(angle) {\r\n    _m1.makeRotationZ(angle);\r\n    this.applyMatrix4(_m1);\r\n    return this;\r\n  }\r\n  translate(x, y, z) {\r\n    _m1.makeTranslation(x, y, z);\r\n    this.applyMatrix4(_m1);\r\n    return this;\r\n  }\r\n  scale(x, y, z) {\r\n    _m1.makeScale(x, y, z);\r\n    this.applyMatrix4(_m1);\r\n    return this;\r\n  }\r\n  lookAt(vector) {\r\n    _obj.lookAt(vector);\r\n    _obj.updateMatrix();\r\n    this.applyMatrix4(_obj.matrix);\r\n    return this;\r\n  }\r\n  fromBufferGeometry(geometry) {\r\n    const scope = this;\r\n    const index = geometry.index !== null ? geometry.index : void 0;\r\n    const attributes = geometry.attributes;\r\n    if (attributes.position === void 0) {\r\n      console.error(\"THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion.\");\r\n      return this;\r\n    }\r\n    const position = attributes.position;\r\n    const normal = attributes.normal;\r\n    const color = attributes.color;\r\n    const uv = attributes.uv;\r\n    const uv2 = attributes.uv2;\r\n    if (uv2 !== void 0)\r\n      this.faceVertexUvs[1] = [];\r\n    for (let i = 0; i < position.count; i++) {\r\n      scope.vertices.push(new Vector3().fromBufferAttribute(position, i));\r\n      if (color !== void 0) {\r\n        scope.colors.push(new Color().fromBufferAttribute(color, i));\r\n      }\r\n    }\r\n    function addFace(a, b, c, materialIndex) {\r\n      const vertexColors = color === void 0 ? [] : [scope.colors[a].clone(), scope.colors[b].clone(), scope.colors[c].clone()];\r\n      const vertexNormals = normal === void 0 ? [] : [\r\n        new Vector3().fromBufferAttribute(normal, a),\r\n        new Vector3().fromBufferAttribute(normal, b),\r\n        new Vector3().fromBufferAttribute(normal, c)\r\n      ];\r\n      const face = new Face3(a, b, c, vertexNormals, vertexColors, materialIndex);\r\n      scope.faces.push(face);\r\n      if (uv !== void 0) {\r\n        scope.faceVertexUvs[0].push([\r\n          new Vector2().fromBufferAttribute(uv, a),\r\n          new Vector2().fromBufferAttribute(uv, b),\r\n          new Vector2().fromBufferAttribute(uv, c)\r\n        ]);\r\n      }\r\n      if (uv2 !== void 0) {\r\n        scope.faceVertexUvs[1].push([\r\n          new Vector2().fromBufferAttribute(uv2, a),\r\n          new Vector2().fromBufferAttribute(uv2, b),\r\n          new Vector2().fromBufferAttribute(uv2, c)\r\n        ]);\r\n      }\r\n    }\r\n    const groups = geometry.groups;\r\n    if (groups.length > 0) {\r\n      for (let i = 0; i < groups.length; i++) {\r\n        const group = groups[i];\r\n        const start = group.start;\r\n        const count = group.count;\r\n        for (let j = start, jl = start + count; j < jl; j += 3) {\r\n          if (index !== void 0) {\r\n            addFace(index.getX(j), index.getX(j + 1), index.getX(j + 2), group.materialIndex);\r\n          } else {\r\n            addFace(j, j + 1, j + 2, group.materialIndex);\r\n          }\r\n        }\r\n      }\r\n    } else {\r\n      if (index !== void 0) {\r\n        for (let i = 0; i < index.count; i += 3) {\r\n          addFace(index.getX(i), index.getX(i + 1), index.getX(i + 2));\r\n        }\r\n      } else {\r\n        for (let i = 0; i < position.count; i += 3) {\r\n          addFace(i, i + 1, i + 2);\r\n        }\r\n      }\r\n    }\r\n    this.computeFaceNormals();\r\n    if (geometry.boundingBox !== null) {\r\n      this.boundingBox = geometry.boundingBox.clone();\r\n    }\r\n    if (geometry.boundingSphere !== null) {\r\n      this.boundingSphere = geometry.boundingSphere.clone();\r\n    }\r\n    return this;\r\n  }\r\n  center() {\r\n    this.computeBoundingBox();\r\n    this.boundingBox.getCenter(_offset).negate();\r\n    this.translate(_offset.x, _offset.y, _offset.z);\r\n    return this;\r\n  }\r\n  normalize() {\r\n    this.computeBoundingSphere();\r\n    const center = this.boundingSphere.center;\r\n    const radius = this.boundingSphere.radius;\r\n    const s = radius === 0 ? 1 : 1 / radius;\r\n    const matrix = new Matrix4();\r\n    matrix.set(s, 0, 0, -s * center.x, 0, s, 0, -s * center.y, 0, 0, s, -s * center.z, 0, 0, 0, 1);\r\n    this.applyMatrix4(matrix);\r\n    return this;\r\n  }\r\n  computeFaceNormals() {\r\n    const cb = new Vector3(), ab = new Vector3();\r\n    for (let f = 0, fl = this.faces.length; f < fl; f++) {\r\n      const face = this.faces[f];\r\n      const vA = this.vertices[face.a];\r\n      const vB = this.vertices[face.b];\r\n      const vC = this.vertices[face.c];\r\n      cb.subVectors(vC, vB);\r\n      ab.subVectors(vA, vB);\r\n      cb.cross(ab);\r\n      cb.normalize();\r\n      face.normal.copy(cb);\r\n    }\r\n  }\r\n  computeVertexNormals(areaWeighted = true) {\r\n    const vertices = new Array(this.vertices.length);\r\n    for (let v = 0, vl = this.vertices.length; v < vl; v++) {\r\n      vertices[v] = new Vector3();\r\n    }\r\n    if (areaWeighted) {\r\n      const cb = new Vector3(), ab = new Vector3();\r\n      for (let f = 0, fl = this.faces.length; f < fl; f++) {\r\n        const face = this.faces[f];\r\n        const vA = this.vertices[face.a];\r\n        const vB = this.vertices[face.b];\r\n        const vC = this.vertices[face.c];\r\n        cb.subVectors(vC, vB);\r\n        ab.subVectors(vA, vB);\r\n        cb.cross(ab);\r\n        vertices[face.a].add(cb);\r\n        vertices[face.b].add(cb);\r\n        vertices[face.c].add(cb);\r\n      }\r\n    } else {\r\n      this.computeFaceNormals();\r\n      for (let f = 0, fl = this.faces.length; f < fl; f++) {\r\n        const face = this.faces[f];\r\n        vertices[face.a].add(face.normal);\r\n        vertices[face.b].add(face.normal);\r\n        vertices[face.c].add(face.normal);\r\n      }\r\n    }\r\n    for (let v = 0, vl = this.vertices.length; v < vl; v++) {\r\n      vertices[v].normalize();\r\n    }\r\n    for (let f = 0, fl = this.faces.length; f < fl; f++) {\r\n      const face = this.faces[f];\r\n      const vertexNormals = face.vertexNormals;\r\n      if (vertexNormals.length === 3) {\r\n        vertexNormals[0].copy(vertices[face.a]);\r\n        vertexNormals[1].copy(vertices[face.b]);\r\n        vertexNormals[2].copy(vertices[face.c]);\r\n      } else {\r\n        vertexNormals[0] = vertices[face.a].clone();\r\n        vertexNormals[1] = vertices[face.b].clone();\r\n        vertexNormals[2] = vertices[face.c].clone();\r\n      }\r\n    }\r\n    if (this.faces.length > 0) {\r\n      this.normalsNeedUpdate = true;\r\n    }\r\n  }\r\n  computeFlatVertexNormals() {\r\n    this.computeFaceNormals();\r\n    for (let f = 0, fl = this.faces.length; f < fl; f++) {\r\n      const face = this.faces[f];\r\n      const vertexNormals = face.vertexNormals;\r\n      if (vertexNormals.length === 3) {\r\n        vertexNormals[0].copy(face.normal);\r\n        vertexNormals[1].copy(face.normal);\r\n        vertexNormals[2].copy(face.normal);\r\n      } else {\r\n        vertexNormals[0] = face.normal.clone();\r\n        vertexNormals[1] = face.normal.clone();\r\n        vertexNormals[2] = face.normal.clone();\r\n      }\r\n    }\r\n    if (this.faces.length > 0) {\r\n      this.normalsNeedUpdate = true;\r\n    }\r\n  }\r\n  computeMorphNormals() {\r\n    for (let f = 0, fl = this.faces.length; f < fl; f++) {\r\n      const face = this.faces[f];\r\n      if (!face.__originalFaceNormal) {\r\n        face.__originalFaceNormal = face.normal.clone();\r\n      } else {\r\n        face.__originalFaceNormal.copy(face.normal);\r\n      }\r\n      if (!face.__originalVertexNormals)\r\n        face.__originalVertexNormals = [];\r\n      for (let i = 0, il = face.vertexNormals.length; i < il; i++) {\r\n        if (!face.__originalVertexNormals[i]) {\r\n          face.__originalVertexNormals[i] = face.vertexNormals[i].clone();\r\n        } else {\r\n          face.__originalVertexNormals[i].copy(face.vertexNormals[i]);\r\n        }\r\n      }\r\n    }\r\n    const tmpGeo = new Geometry();\r\n    tmpGeo.faces = this.faces;\r\n    for (let i = 0, il = this.morphTargets.length; i < il; i++) {\r\n      if (!this.morphNormals[i]) {\r\n        this.morphNormals[i] = {};\r\n        this.morphNormals[i].faceNormals = [];\r\n        this.morphNormals[i].vertexNormals = [];\r\n        const dstNormalsFace = this.morphNormals[i].faceNormals;\r\n        const dstNormalsVertex = this.morphNormals[i].vertexNormals;\r\n        for (let f = 0, fl = this.faces.length; f < fl; f++) {\r\n          const faceNormal = new Vector3();\r\n          const vertexNormals = {\r\n            a: new Vector3(),\r\n            b: new Vector3(),\r\n            c: new Vector3()\r\n          };\r\n          dstNormalsFace.push(faceNormal);\r\n          dstNormalsVertex.push(vertexNormals);\r\n        }\r\n      }\r\n      const morphNormals = this.morphNormals[i];\r\n      tmpGeo.vertices = this.morphTargets[i].vertices;\r\n      tmpGeo.computeFaceNormals();\r\n      tmpGeo.computeVertexNormals();\r\n      for (let f = 0, fl = this.faces.length; f < fl; f++) {\r\n        const face = this.faces[f];\r\n        const faceNormal = morphNormals.faceNormals[f];\r\n        const vertexNormals = morphNormals.vertexNormals[f];\r\n        faceNormal.copy(face.normal);\r\n        vertexNormals.a.copy(face.vertexNormals[0]);\r\n        vertexNormals.b.copy(face.vertexNormals[1]);\r\n        vertexNormals.c.copy(face.vertexNormals[2]);\r\n      }\r\n    }\r\n    for (let f = 0, fl = this.faces.length; f < fl; f++) {\r\n      const face = this.faces[f];\r\n      face.normal = face.__originalFaceNormal;\r\n      face.vertexNormals = face.__originalVertexNormals;\r\n    }\r\n  }\r\n  computeBoundingBox() {\r\n    if (this.boundingBox === null) {\r\n      this.boundingBox = new Box3();\r\n    }\r\n    this.boundingBox.setFromPoints(this.vertices);\r\n  }\r\n  computeBoundingSphere() {\r\n    if (this.boundingSphere === null) {\r\n      this.boundingSphere = new Sphere();\r\n    }\r\n    this.boundingSphere.setFromPoints(this.vertices);\r\n  }\r\n  merge(geometry, matrix, materialIndexOffset = 0) {\r\n    if (!(geometry && geometry.isGeometry)) {\r\n      console.error(\"THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.\", geometry);\r\n      return;\r\n    }\r\n    let normalMatrix;\r\n    const vertexOffset = this.vertices.length, vertices1 = this.vertices, vertices2 = geometry.vertices, faces1 = this.faces, faces2 = geometry.faces, colors1 = this.colors, colors2 = geometry.colors;\r\n    if (matrix !== void 0) {\r\n      normalMatrix = new Matrix3().getNormalMatrix(matrix);\r\n    }\r\n    for (let i = 0, il = vertices2.length; i < il; i++) {\r\n      const vertex = vertices2[i];\r\n      const vertexCopy = vertex.clone();\r\n      if (matrix !== void 0)\r\n        vertexCopy.applyMatrix4(matrix);\r\n      vertices1.push(vertexCopy);\r\n    }\r\n    for (let i = 0, il = colors2.length; i < il; i++) {\r\n      colors1.push(colors2[i].clone());\r\n    }\r\n    for (let i = 0, il = faces2.length; i < il; i++) {\r\n      const face = faces2[i];\r\n      let normal, color;\r\n      const faceVertexNormals = face.vertexNormals, faceVertexColors = face.vertexColors;\r\n      const faceCopy = new Face3(face.a + vertexOffset, face.b + vertexOffset, face.c + vertexOffset);\r\n      faceCopy.normal.copy(face.normal);\r\n      if (normalMatrix !== void 0) {\r\n        faceCopy.normal.applyMatrix3(normalMatrix).normalize();\r\n      }\r\n      for (let j = 0, jl = faceVertexNormals.length; j < jl; j++) {\r\n        normal = faceVertexNormals[j].clone();\r\n        if (normalMatrix !== void 0) {\r\n          normal.applyMatrix3(normalMatrix).normalize();\r\n        }\r\n        faceCopy.vertexNormals.push(normal);\r\n      }\r\n      faceCopy.color.copy(face.color);\r\n      for (let j = 0, jl = faceVertexColors.length; j < jl; j++) {\r\n        color = faceVertexColors[j];\r\n        faceCopy.vertexColors.push(color.clone());\r\n      }\r\n      faceCopy.materialIndex = face.materialIndex + materialIndexOffset;\r\n      faces1.push(faceCopy);\r\n    }\r\n    for (let i = 0, il = geometry.faceVertexUvs.length; i < il; i++) {\r\n      const faceVertexUvs2 = geometry.faceVertexUvs[i];\r\n      if (this.faceVertexUvs[i] === void 0)\r\n        this.faceVertexUvs[i] = [];\r\n      for (let j = 0, jl = faceVertexUvs2.length; j < jl; j++) {\r\n        const uvs2 = faceVertexUvs2[j], uvsCopy = [];\r\n        for (let k = 0, kl = uvs2.length; k < kl; k++) {\r\n          uvsCopy.push(uvs2[k].clone());\r\n        }\r\n        this.faceVertexUvs[i].push(uvsCopy);\r\n      }\r\n    }\r\n  }\r\n  mergeMesh(mesh) {\r\n    if (!(mesh && mesh.isMesh)) {\r\n      console.error(\"THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.\", mesh);\r\n      return;\r\n    }\r\n    if (mesh.matrixAutoUpdate)\r\n      mesh.updateMatrix();\r\n    this.merge(mesh.geometry, mesh.matrix);\r\n  }\r\n  /*\r\n   * Checks for duplicate vertices with hashmap.\r\n   * Duplicated vertices are removed\r\n   * and faces' vertices are updated.\r\n   */\r\n  mergeVertices(precisionPoints = 4) {\r\n    const verticesMap = {};\r\n    const unique = [], changes = [];\r\n    const precision = Math.pow(10, precisionPoints);\r\n    for (let i = 0, il = this.vertices.length; i < il; i++) {\r\n      const v = this.vertices[i];\r\n      const key = `${Math.round(v.x * precision)}_${Math.round(v.y * precision)}_${Math.round(v.z * precision)}`;\r\n      if (verticesMap[key] === void 0) {\r\n        verticesMap[key] = i;\r\n        unique.push(this.vertices[i]);\r\n        changes[i] = unique.length - 1;\r\n      } else {\r\n        changes[i] = changes[verticesMap[key]];\r\n      }\r\n    }\r\n    const faceIndicesToRemove = [];\r\n    for (let i = 0, il = this.faces.length; i < il; i++) {\r\n      const face = this.faces[i];\r\n      face.a = changes[face.a];\r\n      face.b = changes[face.b];\r\n      face.c = changes[face.c];\r\n      const indices = [face.a, face.b, face.c];\r\n      for (let n = 0; n < 3; n++) {\r\n        if (indices[n] === indices[(n + 1) % 3]) {\r\n          faceIndicesToRemove.push(i);\r\n          break;\r\n        }\r\n      }\r\n    }\r\n    for (let i = faceIndicesToRemove.length - 1; i >= 0; i--) {\r\n      const idx = faceIndicesToRemove[i];\r\n      this.faces.splice(idx, 1);\r\n      for (let j = 0, jl = this.faceVertexUvs.length; j < jl; j++) {\r\n        this.faceVertexUvs[j].splice(idx, 1);\r\n      }\r\n    }\r\n    const diff = this.vertices.length - unique.length;\r\n    this.vertices = unique;\r\n    return diff;\r\n  }\r\n  setFromPoints(points) {\r\n    this.vertices = [];\r\n    for (let i = 0, l = points.length; i < l; i++) {\r\n      const point = points[i];\r\n      this.vertices.push(new Vector3(point.x, point.y, point.z || 0));\r\n    }\r\n    return this;\r\n  }\r\n  sortFacesByMaterialIndex() {\r\n    const faces = this.faces;\r\n    const length = faces.length;\r\n    for (let i = 0; i < length; i++) {\r\n      faces[i]._id = i;\r\n    }\r\n    function materialIndexSort(a, b) {\r\n      return a.materialIndex - b.materialIndex;\r\n    }\r\n    faces.sort(materialIndexSort);\r\n    const uvs1 = this.faceVertexUvs[0];\r\n    const uvs2 = this.faceVertexUvs[1];\r\n    let newUvs1, newUvs2;\r\n    if (uvs1 && uvs1.length === length)\r\n      newUvs1 = [];\r\n    if (uvs2 && uvs2.length === length)\r\n      newUvs2 = [];\r\n    for (let i = 0; i < length; i++) {\r\n      const id = faces[i]._id;\r\n      if (newUvs1)\r\n        newUvs1.push(uvs1[id]);\r\n      if (newUvs2)\r\n        newUvs2.push(uvs2[id]);\r\n    }\r\n    if (newUvs1)\r\n      this.faceVertexUvs[0] = newUvs1;\r\n    if (newUvs2)\r\n      this.faceVertexUvs[1] = newUvs2;\r\n  }\r\n  toJSON() {\r\n    const data = {\r\n      metadata: {\r\n        version: 4.5,\r\n        type: \"Geometry\",\r\n        generator: \"Geometry.toJSON\"\r\n      }\r\n    };\r\n    data.uuid = this.uuid;\r\n    data.type = this.type;\r\n    if (this.name !== \"\")\r\n      data.name = this.name;\r\n    if (this.parameters !== void 0) {\r\n      const parameters = this.parameters;\r\n      for (let key in parameters) {\r\n        if (parameters[key] !== void 0)\r\n          data[key] = parameters[key];\r\n      }\r\n      return data;\r\n    }\r\n    const vertices = [];\r\n    for (let i = 0; i < this.vertices.length; i++) {\r\n      const vertex = this.vertices[i];\r\n      vertices.push(vertex.x, vertex.y, vertex.z);\r\n    }\r\n    const faces = [];\r\n    const normals = [];\r\n    const normalsHash = {};\r\n    const colors = [];\r\n    const colorsHash = {};\r\n    const uvs = [];\r\n    const uvsHash = {};\r\n    for (let i = 0; i < this.faces.length; i++) {\r\n      const face = this.faces[i];\r\n      const hasMaterial = true;\r\n      const hasFaceUv = false;\r\n      const hasFaceVertexUv = this.faceVertexUvs[0][i] !== void 0;\r\n      const hasFaceNormal = face.normal.length() > 0;\r\n      const hasFaceVertexNormal = face.vertexNormals.length > 0;\r\n      const hasFaceColor = face.color.r !== 1 || face.color.g !== 1 || face.color.b !== 1;\r\n      const hasFaceVertexColor = face.vertexColors.length > 0;\r\n      let faceType = 0;\r\n      faceType = setBit(faceType, 0, 0);\r\n      faceType = setBit(faceType, 1, hasMaterial);\r\n      faceType = setBit(faceType, 2, hasFaceUv);\r\n      faceType = setBit(faceType, 3, hasFaceVertexUv);\r\n      faceType = setBit(faceType, 4, hasFaceNormal);\r\n      faceType = setBit(faceType, 5, hasFaceVertexNormal);\r\n      faceType = setBit(faceType, 6, hasFaceColor);\r\n      faceType = setBit(faceType, 7, hasFaceVertexColor);\r\n      faces.push(faceType);\r\n      faces.push(face.a, face.b, face.c);\r\n      faces.push(face.materialIndex);\r\n      if (hasFaceVertexUv) {\r\n        const faceVertexUvs = this.faceVertexUvs[0][i];\r\n        faces.push(getUvIndex(faceVertexUvs[0]), getUvIndex(faceVertexUvs[1]), getUvIndex(faceVertexUvs[2]));\r\n      }\r\n      if (hasFaceNormal) {\r\n        faces.push(getNormalIndex(face.normal));\r\n      }\r\n      if (hasFaceVertexNormal) {\r\n        const vertexNormals = face.vertexNormals;\r\n        faces.push(getNormalIndex(vertexNormals[0]), getNormalIndex(vertexNormals[1]), getNormalIndex(vertexNormals[2]));\r\n      }\r\n      if (hasFaceColor) {\r\n        faces.push(getColorIndex(face.color));\r\n      }\r\n      if (hasFaceVertexColor) {\r\n        const vertexColors = face.vertexColors;\r\n        faces.push(getColorIndex(vertexColors[0]), getColorIndex(vertexColors[1]), getColorIndex(vertexColors[2]));\r\n      }\r\n    }\r\n    function setBit(value, position, enabled) {\r\n      return enabled ? value | 1 << position : value & ~(1 << position);\r\n    }\r\n    function getNormalIndex(normal) {\r\n      const hash = normal.x.toString() + normal.y.toString() + normal.z.toString();\r\n      if (normalsHash[hash] !== void 0) {\r\n        return normalsHash[hash];\r\n      }\r\n      normalsHash[hash] = normals.length / 3;\r\n      normals.push(normal.x, normal.y, normal.z);\r\n      return normalsHash[hash];\r\n    }\r\n    function getColorIndex(color) {\r\n      const hash = color.r.toString() + color.g.toString() + color.b.toString();\r\n      if (colorsHash[hash] !== void 0) {\r\n        return colorsHash[hash];\r\n      }\r\n      colorsHash[hash] = colors.length;\r\n      colors.push(color.getHex());\r\n      return colorsHash[hash];\r\n    }\r\n    function getUvIndex(uv) {\r\n      const hash = uv.x.toString() + uv.y.toString();\r\n      if (uvsHash[hash] !== void 0) {\r\n        return uvsHash[hash];\r\n      }\r\n      uvsHash[hash] = uvs.length / 2;\r\n      uvs.push(uv.x, uv.y);\r\n      return uvsHash[hash];\r\n    }\r\n    data.data = {};\r\n    data.data.vertices = vertices;\r\n    data.data.normals = normals;\r\n    if (colors.length > 0)\r\n      data.data.colors = colors;\r\n    if (uvs.length > 0)\r\n      data.data.uvs = [uvs];\r\n    data.data.faces = faces;\r\n    return data;\r\n  }\r\n  clone() {\r\n    return new Geometry().copy(this);\r\n  }\r\n  copy(source) {\r\n    this.vertices = [];\r\n    this.colors = [];\r\n    this.faces = [];\r\n    this.faceVertexUvs = [[]];\r\n    this.morphTargets = [];\r\n    this.morphNormals = [];\r\n    this.skinWeights = [];\r\n    this.skinIndices = [];\r\n    this.lineDistances = [];\r\n    this.boundingBox = null;\r\n    this.boundingSphere = null;\r\n    this.name = source.name;\r\n    const vertices = source.vertices;\r\n    for (let i = 0, il = vertices.length; i < il; i++) {\r\n      this.vertices.push(vertices[i].clone());\r\n    }\r\n    const colors = source.colors;\r\n    for (let i = 0, il = colors.length; i < il; i++) {\r\n      this.colors.push(colors[i].clone());\r\n    }\r\n    const faces = source.faces;\r\n    for (let i = 0, il = faces.length; i < il; i++) {\r\n      this.faces.push(faces[i].clone());\r\n    }\r\n    for (let i = 0, il = source.faceVertexUvs.length; i < il; i++) {\r\n      const faceVertexUvs = source.faceVertexUvs[i];\r\n      if (this.faceVertexUvs[i] === void 0) {\r\n        this.faceVertexUvs[i] = [];\r\n      }\r\n      for (let j = 0, jl = faceVertexUvs.length; j < jl; j++) {\r\n        const uvs = faceVertexUvs[j], uvsCopy = [];\r\n        for (let k = 0, kl = uvs.length; k < kl; k++) {\r\n          const uv = uvs[k];\r\n          uvsCopy.push(uv.clone());\r\n        }\r\n        this.faceVertexUvs[i].push(uvsCopy);\r\n      }\r\n    }\r\n    const morphTargets = source.morphTargets;\r\n    for (let i = 0, il = morphTargets.length; i < il; i++) {\r\n      const morphTarget = {};\r\n      morphTarget.name = morphTargets[i].name;\r\n      if (morphTargets[i].vertices !== void 0) {\r\n        morphTarget.vertices = [];\r\n        for (let j = 0, jl = morphTargets[i].vertices.length; j < jl; j++) {\r\n          morphTarget.vertices.push(morphTargets[i].vertices[j].clone());\r\n        }\r\n      }\r\n      if (morphTargets[i].normals !== void 0) {\r\n        morphTarget.normals = [];\r\n        for (let j = 0, jl = morphTargets[i].normals.length; j < jl; j++) {\r\n          morphTarget.normals.push(morphTargets[i].normals[j].clone());\r\n        }\r\n      }\r\n      this.morphTargets.push(morphTarget);\r\n    }\r\n    const morphNormals = source.morphNormals;\r\n    for (let i = 0, il = morphNormals.length; i < il; i++) {\r\n      const morphNormal = {};\r\n      if (morphNormals[i].vertexNormals !== void 0) {\r\n        morphNormal.vertexNormals = [];\r\n        for (let j = 0, jl = morphNormals[i].vertexNormals.length; j < jl; j++) {\r\n          const srcVertexNormal = morphNormals[i].vertexNormals[j];\r\n          const destVertexNormal = {};\r\n          destVertexNormal.a = srcVertexNormal.a.clone();\r\n          destVertexNormal.b = srcVertexNormal.b.clone();\r\n          destVertexNormal.c = srcVertexNormal.c.clone();\r\n          morphNormal.vertexNormals.push(destVertexNormal);\r\n        }\r\n      }\r\n      if (morphNormals[i].faceNormals !== void 0) {\r\n        morphNormal.faceNormals = [];\r\n        for (let j = 0, jl = morphNormals[i].faceNormals.length; j < jl; j++) {\r\n          morphNormal.faceNormals.push(morphNormals[i].faceNormals[j].clone());\r\n        }\r\n      }\r\n      this.morphNormals.push(morphNormal);\r\n    }\r\n    const skinWeights = source.skinWeights;\r\n    for (let i = 0, il = skinWeights.length; i < il; i++) {\r\n      this.skinWeights.push(skinWeights[i].clone());\r\n    }\r\n    const skinIndices = source.skinIndices;\r\n    for (let i = 0, il = skinIndices.length; i < il; i++) {\r\n      this.skinIndices.push(skinIndices[i].clone());\r\n    }\r\n    const lineDistances = source.lineDistances;\r\n    for (let i = 0, il = lineDistances.length; i < il; i++) {\r\n      this.lineDistances.push(lineDistances[i]);\r\n    }\r\n    const boundingBox = source.boundingBox;\r\n    if (boundingBox !== null) {\r\n      this.boundingBox = boundingBox.clone();\r\n    }\r\n    const boundingSphere = source.boundingSphere;\r\n    if (boundingSphere !== null) {\r\n      this.boundingSphere = boundingSphere.clone();\r\n    }\r\n    this.elementsNeedUpdate = source.elementsNeedUpdate;\r\n    this.verticesNeedUpdate = source.verticesNeedUpdate;\r\n    this.uvsNeedUpdate = source.uvsNeedUpdate;\r\n    this.normalsNeedUpdate = source.normalsNeedUpdate;\r\n    this.colorsNeedUpdate = source.colorsNeedUpdate;\r\n    this.lineDistancesNeedUpdate = source.lineDistancesNeedUpdate;\r\n    this.groupsNeedUpdate = source.groupsNeedUpdate;\r\n    return this;\r\n  }\r\n  toBufferGeometry() {\r\n    const geometry = new DirectGeometry().fromGeometry(this);\r\n    const buffergeometry = new BufferGeometry();\r\n    const positions = new Float32Array(geometry.vertices.length * 3);\r\n    buffergeometry.setAttribute(\"position\", new BufferAttribute(positions, 3).copyVector3sArray(geometry.vertices));\r\n    if (geometry.normals.length > 0) {\r\n      const normals = new Float32Array(geometry.normals.length * 3);\r\n      buffergeometry.setAttribute(\"normal\", new BufferAttribute(normals, 3).copyVector3sArray(geometry.normals));\r\n    }\r\n    if (geometry.colors.length > 0) {\r\n      const colors = new Float32Array(geometry.colors.length * 3);\r\n      buffergeometry.setAttribute(\"color\", new BufferAttribute(colors, 3).copyColorsArray(geometry.colors));\r\n    }\r\n    if (geometry.uvs.length > 0) {\r\n      const uvs = new Float32Array(geometry.uvs.length * 2);\r\n      buffergeometry.setAttribute(\"uv\", new BufferAttribute(uvs, 2).copyVector2sArray(geometry.uvs));\r\n    }\r\n    if (geometry.uvs2.length > 0) {\r\n      const uvs2 = new Float32Array(geometry.uvs2.length * 2);\r\n      buffergeometry.setAttribute(\"uv2\", new BufferAttribute(uvs2, 2).copyVector2sArray(geometry.uvs2));\r\n    }\r\n    buffergeometry.groups = geometry.groups;\r\n    for (let name in geometry.morphTargets) {\r\n      const array = [];\r\n      const morphTargets = geometry.morphTargets[name];\r\n      for (let i = 0, l = morphTargets.length; i < l; i++) {\r\n        const morphTarget = morphTargets[i];\r\n        const attribute = new Float32BufferAttribute(morphTarget.data.length * 3, 3);\r\n        attribute.name = morphTarget.name;\r\n        array.push(attribute.copyVector3sArray(morphTarget.data));\r\n      }\r\n      buffergeometry.morphAttributes[name] = array;\r\n    }\r\n    if (geometry.skinIndices.length > 0) {\r\n      const skinIndices = new Float32BufferAttribute(geometry.skinIndices.length * 4, 4);\r\n      buffergeometry.setAttribute(\"skinIndex\", skinIndices.copyVector4sArray(geometry.skinIndices));\r\n    }\r\n    if (geometry.skinWeights.length > 0) {\r\n      const skinWeights = new Float32BufferAttribute(geometry.skinWeights.length * 4, 4);\r\n      buffergeometry.setAttribute(\"skinWeight\", skinWeights.copyVector4sArray(geometry.skinWeights));\r\n    }\r\n    if (geometry.boundingSphere !== null) {\r\n      buffergeometry.boundingSphere = geometry.boundingSphere.clone();\r\n    }\r\n    if (geometry.boundingBox !== null) {\r\n      buffergeometry.boundingBox = geometry.boundingBox.clone();\r\n    }\r\n    return buffergeometry;\r\n  }\r\n  computeTangents() {\r\n    console.error(\"THREE.Geometry: .computeTangents() has been removed.\");\r\n  }\r\n  computeLineDistances() {\r\n    console.error(\r\n      \"THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.\"\r\n    );\r\n  }\r\n  applyMatrix(matrix) {\r\n    console.warn(\"THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4().\");\r\n    return this.applyMatrix4(matrix);\r\n  }\r\n  dispose() {\r\n    this.dispatchEvent({ type: \"dispose\" });\r\n  }\r\n}\r\nclass DirectGeometry {\r\n  constructor() {\r\n    this.vertices = [];\r\n    this.normals = [];\r\n    this.colors = [];\r\n    this.uvs = [];\r\n    this.uvs2 = [];\r\n    this.groups = [];\r\n    this.morphTargets = {};\r\n    this.skinWeights = [];\r\n    this.skinIndices = [];\r\n    this.boundingBox = null;\r\n    this.boundingSphere = null;\r\n    this.verticesNeedUpdate = false;\r\n    this.normalsNeedUpdate = false;\r\n    this.colorsNeedUpdate = false;\r\n    this.uvsNeedUpdate = false;\r\n    this.groupsNeedUpdate = false;\r\n  }\r\n  computeGroups(geometry) {\r\n    const groups = [];\r\n    let group, i;\r\n    let materialIndex = void 0;\r\n    const faces = geometry.faces;\r\n    for (i = 0; i < faces.length; i++) {\r\n      const face = faces[i];\r\n      if (face.materialIndex !== materialIndex) {\r\n        materialIndex = face.materialIndex;\r\n        if (group !== void 0) {\r\n          group.count = i * 3 - group.start;\r\n          groups.push(group);\r\n        }\r\n        group = {\r\n          start: i * 3,\r\n          materialIndex\r\n        };\r\n      }\r\n    }\r\n    if (group !== void 0) {\r\n      group.count = i * 3 - group.start;\r\n      groups.push(group);\r\n    }\r\n    this.groups = groups;\r\n  }\r\n  fromGeometry(geometry) {\r\n    const faces = geometry.faces;\r\n    const vertices = geometry.vertices;\r\n    const faceVertexUvs = geometry.faceVertexUvs;\r\n    const hasFaceVertexUv = faceVertexUvs[0] && faceVertexUvs[0].length > 0;\r\n    const hasFaceVertexUv2 = faceVertexUvs[1] && faceVertexUvs[1].length > 0;\r\n    const morphTargets = geometry.morphTargets;\r\n    const morphTargetsLength = morphTargets.length;\r\n    let morphTargetsPosition;\r\n    if (morphTargetsLength > 0) {\r\n      morphTargetsPosition = [];\r\n      for (let i = 0; i < morphTargetsLength; i++) {\r\n        morphTargetsPosition[i] = {\r\n          name: morphTargets[i].name,\r\n          data: []\r\n        };\r\n      }\r\n      this.morphTargets.position = morphTargetsPosition;\r\n    }\r\n    const morphNormals = geometry.morphNormals;\r\n    const morphNormalsLength = morphNormals.length;\r\n    let morphTargetsNormal;\r\n    if (morphNormalsLength > 0) {\r\n      morphTargetsNormal = [];\r\n      for (let i = 0; i < morphNormalsLength; i++) {\r\n        morphTargetsNormal[i] = {\r\n          name: morphNormals[i].name,\r\n          data: []\r\n        };\r\n      }\r\n      this.morphTargets.normal = morphTargetsNormal;\r\n    }\r\n    const skinIndices = geometry.skinIndices;\r\n    const skinWeights = geometry.skinWeights;\r\n    const hasSkinIndices = skinIndices.length === vertices.length;\r\n    const hasSkinWeights = skinWeights.length === vertices.length;\r\n    if (vertices.length > 0 && faces.length === 0) {\r\n      console.error(\"THREE.DirectGeometry: Faceless geometries are not supported.\");\r\n    }\r\n    for (let i = 0; i < faces.length; i++) {\r\n      const face = faces[i];\r\n      this.vertices.push(vertices[face.a], vertices[face.b], vertices[face.c]);\r\n      const vertexNormals = face.vertexNormals;\r\n      if (vertexNormals.length === 3) {\r\n        this.normals.push(vertexNormals[0], vertexNormals[1], vertexNormals[2]);\r\n      } else {\r\n        const normal = face.normal;\r\n        this.normals.push(normal, normal, normal);\r\n      }\r\n      const vertexColors = face.vertexColors;\r\n      if (vertexColors.length === 3) {\r\n        this.colors.push(vertexColors[0], vertexColors[1], vertexColors[2]);\r\n      } else {\r\n        const color = face.color;\r\n        this.colors.push(color, color, color);\r\n      }\r\n      if (hasFaceVertexUv === true) {\r\n        const vertexUvs = faceVertexUvs[0][i];\r\n        if (vertexUvs !== void 0) {\r\n          this.uvs.push(vertexUvs[0], vertexUvs[1], vertexUvs[2]);\r\n        } else {\r\n          console.warn(\"THREE.DirectGeometry.fromGeometry(): Undefined vertexUv \", i);\r\n          this.uvs.push(new Vector2(), new Vector2(), new Vector2());\r\n        }\r\n      }\r\n      if (hasFaceVertexUv2 === true) {\r\n        const vertexUvs = faceVertexUvs[1][i];\r\n        if (vertexUvs !== void 0) {\r\n          this.uvs2.push(vertexUvs[0], vertexUvs[1], vertexUvs[2]);\r\n        } else {\r\n          console.warn(\"THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 \", i);\r\n          this.uvs2.push(new Vector2(), new Vector2(), new Vector2());\r\n        }\r\n      }\r\n      for (let j = 0; j < morphTargetsLength; j++) {\r\n        const morphTarget = morphTargets[j].vertices;\r\n        morphTargetsPosition[j].data.push(morphTarget[face.a], morphTarget[face.b], morphTarget[face.c]);\r\n      }\r\n      for (let j = 0; j < morphNormalsLength; j++) {\r\n        const morphNormal = morphNormals[j].vertexNormals[i];\r\n        morphTargetsNormal[j].data.push(morphNormal.a, morphNormal.b, morphNormal.c);\r\n      }\r\n      if (hasSkinIndices) {\r\n        this.skinIndices.push(skinIndices[face.a], skinIndices[face.b], skinIndices[face.c]);\r\n      }\r\n      if (hasSkinWeights) {\r\n        this.skinWeights.push(skinWeights[face.a], skinWeights[face.b], skinWeights[face.c]);\r\n      }\r\n    }\r\n    this.computeGroups(geometry);\r\n    this.verticesNeedUpdate = geometry.verticesNeedUpdate;\r\n    this.normalsNeedUpdate = geometry.normalsNeedUpdate;\r\n    this.colorsNeedUpdate = geometry.colorsNeedUpdate;\r\n    this.uvsNeedUpdate = geometry.uvsNeedUpdate;\r\n    this.groupsNeedUpdate = geometry.groupsNeedUpdate;\r\n    if (geometry.boundingSphere !== null) {\r\n      this.boundingSphere = geometry.boundingSphere.clone();\r\n    }\r\n    if (geometry.boundingBox !== null) {\r\n      this.boundingBox = geometry.boundingBox.clone();\r\n    }\r\n    return this;\r\n  }\r\n}\r\nclass Face3 {\r\n  constructor(a, b, c, normal, color, materialIndex = 0) {\r\n    this.a = a;\r\n    this.b = b;\r\n    this.c = c;\r\n    this.normal = normal && normal.isVector3 ? normal : new Vector3();\r\n    this.vertexNormals = Array.isArray(normal) ? normal : [];\r\n    this.color = color && color.isColor ? color : new Color();\r\n    this.vertexColors = Array.isArray(color) ? color : [];\r\n    this.materialIndex = materialIndex;\r\n  }\r\n  clone() {\r\n    return new this.constructor().copy(this);\r\n  }\r\n  copy(source) {\r\n    this.a = source.a;\r\n    this.b = source.b;\r\n    this.c = source.c;\r\n    this.normal.copy(source.normal);\r\n    this.color.copy(source.color);\r\n    this.materialIndex = source.materialIndex;\r\n    for (let i = 0, il = source.vertexNormals.length; i < il; i++) {\r\n      this.vertexNormals[i] = source.vertexNormals[i].clone();\r\n    }\r\n    for (let i = 0, il = source.vertexColors.length; i < il; i++) {\r\n      this.vertexColors[i] = source.vertexColors[i].clone();\r\n    }\r\n    return this;\r\n  }\r\n}\r\nexport {\r\n  Face3,\r\n  Geometry\r\n};\r\n"],
  "mappings": "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ACH,IAAG;AAAA,EACH,IAAG;AAAA,EACH,IAAG;AAAA,EACH,IAAG;AAAA,EACH,IAAG;AAAA,EACH,IAAG;AAAA,EACH,IAAG;AAAA,EACH,IAAG;AAAA,EACH,IAAG;AAAA,EACH,IAAG;AAAA,EACH,IAAG;AAAA,EACH,IAAG;AAAA,EACH,IAAG;AAAA,EACH,IAAG;AAAA,EACH,IAAG;AAAA,EACH,IAAG;AAAA,EACH,IAAG;AAAA,EACH,IAAG;AAAA,EACH,IAAG;AAAA,EACH,IAAG;AAAA,EACH,IAAG;AAAA,EACH,IAAG;AAAA,EACH,IAAG;AAAA,EACH,IAAG;AAAA,EACH,IAAG;AAAA,EACH,IAAG;AAAA,EACH,IAAG;AAAA,EACH,IAAG;AAAA,EACH,IAAG;AAAA,EACH,IAAG;AAAA,EACH,IAAG;AAAA,EACH,IAAG;AAAA,EACH,IAAG;AAAA,EACH,IAAG;AAAA,EACH,IAAG;AAAA,EACH,IAAG;AAAA,EACH,IAAG;AAAA,EACH,IAAG;AAAA,EACH,IAAG;AAAA,EACH,IAAG;AAAA,EACH,IAAG;AAAA,EACH,IAAG;AAAA,EACH,IAAG;AAAA,EACH,IAAG;AAAA,EACH,IAAG;AAAA,EACH,IAAG;AAAA,EACH,IAAG;AAAA,EACH,IAAG;AAAA,EACH,IAAG;AAAA,EACH,IAAG;AAAA,EACH,IAAG;AAAA,EACH,IAAG;AAAA,EACH,IAAG;AAAA,EACH,KAAI;AAAA,EACJ,KAAI;AAAA,EACJ,KAAI;AAAA,EACJ,KAAI;AAAA,EACJ,KAAI;AAAA,EACJ,KAAI;AAAA,EACJ,KAAI;AAAA,EACJ,KAAI;AAAA,EACJ,KAAI;AAAA,EACJ,KAAI;AAAA,EACJ,KAAI;AAAA,EACJ,KAAI;AAAA,EACJ,KAAI;AAAA,EACJ,KAAI;AAAA,EACJ,KAAI;AAAA,EACJ,KAAI;AAAA,EACJ,KAAI;AAAA,EACJ,KAAI;AAAA,EACJ,KAAI;AAAA,EACJ,KAAI;AAAA,EACJ,KAAI;AAAA,EACJ,KAAI;AAAA,EACJ,KAAI;AAAA,EACJ,KAAI;AAAA,EACJ,KAAI;AAAA,EACJ,KAAI;AAAA,EACJ,KAAI;AAAA,EACJ,KAAI;AAAA,EACJ,KAAI;AAAA,EACJ,KAAI;AAAA,EACJ,KAAI;AAAA,EACJ,KAAI;AAAA,EACJ,KAAI;AAAA,EACJ,KAAI;AAAA,EACJ,KAAI;AAAA,EACJ,KAAI;AAAA,EACJ,KAAI;AAAA,EACJ,KAAI;AAAA,EACJ,KAAI;AAAA,EACJ,KAAI;AAAA,EACJ,KAAI;AAAA,EACJ,KAAI;AAAA,EACJ,KAAI;AAAA,EACJ,KAAI;AAAA,EACJ,KAAI;AAAA,EACJ,KAAI;AAAA,EACJ,KAAI;AAAA,EACJ,KAAI;AAAA,EACJ,KAAI;AAAA,EACJ,KAAI;AAAA,EACJ,KAAI;AAAA,EACJ,KAAI;AAAA,EACJ,KAAI;AAAA,EACJ,KAAI;AAAA,EACJ,KAAI;AAAA,EACJ,KAAI;AAAA,EACJ,KAAI;AAAA,EACJ,KAAI;AAAA,EACJ,KAAI;AAAA,EACJ,KAAI;AAAA,EACJ,KAAI;AAAA,EACJ,KAAI;AAAA,EACJ,KAAI;AAAA,EACJ,KAAI;AAAA,EACJ,KAAI;AAAA,EACJ,KAAI;AAAA,EACJ,KAAI;AAAA,EACJ,KAAI;AAAA,EACJ,KAAI;AAAA,EACJ,KAAI;AAAA,EACJ,KAAI;AAAA,EACJ,KAAI;AAAA,EACJ,KAAI;AAAA,EACJ,KAAI;AAAA,EACJ,KAAI;AAAA,EACJ,KAAI;AAAA,EACJ,KAAI;AAAA,EACJ,KAAI;AAAA,EACJ,KAAI;AAAA,EACJ,KAAI;AAAA,EACJ,KAAI;AAAA,EACJ,KAAI;AAAA,EACJ,KAAI;AAAA,EACJ,KAAI;AAAA,EACJ,KAAI;AAAA,EACJ,KAAI;AAAA,EACJ,KAAI;AAAA,EACJ,KAAI;AAAA,EACJ,KAAI;AAAA,EACJ,KAAI;AAAA,EACJ,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,MAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,MAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,MAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,MAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,MAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,KAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,MAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,MAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,KAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,MAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,EACN,OAAM;AAAA,E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A;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACF,CAAC;AACD,IAAM,WAAW,IAAI,WAAW;AAAA,EAC9B;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AA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;AAAA,MACX,CAAC,GAAG,GAAG,GAAG,CAAC;AAAA,MACX,CAAC,GAAG,GAAG,GAAG,CAAC;AAAA,MACX,CAAC,GAAG,GAAG,GAAG,CAAC;AAAA,MACX,CAAC,GAAG,GAAG,GAAG,CAAC;AAAA,MACX,CAAC,GAAG,GAAG,GAAG,CAAC;AAAA,MACX,CAAC,GAAG,GAAG,GAAG,CAAC;AAAA,MACX,CAAC,GAAG,GAAG,GAAG,CAAC;AAAA,MACX,CAAC,GAAG,GAAG,GAAG,CAAC;AAAA,MACX,CAAC,GAAG,GAAG,GAAG,CAAC;AAAA,MACX,CAAC,GAAG,GAAG,GAAG,CAAC;AAAA,MACX,CAAC,GAAG,GAAG,GAAG,CAAC;AAAA,MACX,CAAC,GAAG,GAAG,GAAG,CAAC;AAAA,MACX,CAAC,GAAG,GAAG,GAAG,CAAC;AAAA,MACX,CAAC,GAAG,GAAG,GAAG,CAAC;AAAA,MACX,CAAC,GAAG,GAAG,GAAG,CAAC;AAAA,MACX,CAAC,GAAG,GAAG,GAAG,CAAC;AAAA,MACX,CAAC,GAAG,GAAG,GAAG,CAAC;AAAA,MACX,CAAC,GAAG,GAAG,GAAG,CAAC;AAAA,MACX,CAAC,GAAG,GAAG,GAAG,CAAC;AAAA,MACX,CAAC,GAAG,GAAG,GAAG,CAAC;AAAA,MACX,CAAC,GAAG,GAAG,GAAG,CAAC;AAAA,MACX,CAAC,GAAG,GAAG,GAAG,CAAC;AAAA,MACX,CAAC,GAAG,GAAG,GAAG,CAAC;AAAA,MACX,CAAC,GAAG,GAAG,GAAG,CAAC;AAAA,MACX,CAAC,GAAG,GAAG,GAAG,CAAC;AAAA,MACX,CAAC,GAAG,GAAG,GAAG,CAAC;AAAA,MACX,CAAC,GAAG,GAAG,GAAG,CAAC;AAAA,MACX,CAAC,GAAG,GAAG,GAAG,CAAC;AAAA,MACX,CAAC,GAAG,GAAG,GAAG,CAAC;AAAA,MACX,CAAC,GAAG,GAAG,GAAG,CAAC;AAAA,MACX,CAAC,GAAG,GAAG,GAAG,CAAC;AAAA,MACX,CAAC,GAAG,GAAG,GAAG,CAAC;AAAA,MACX,CAAC,GAAG,GAAG,GAAG,CAAC;AAAA,MACX,CAAC,GAAG,GAAG,GAAG,CAAC;AAAA,MACX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AAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;A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CA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IA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AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA;AAAA,IAEA;AAAA,IACA;AAAA,IACA;AAAA;AAAA,IAEA;AAAA,IACA;AAAA,IACA;AAAA;AAAA,IAEA;AAAA,IACA;AAAA,IACA;AAAA;AAAA,IAEA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA;AAAA,IAEA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA;AAAA,IAEA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA;AAAA,IAEA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA;AAAA,IAEA;AAAA;AAAA,IAEA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA;AAAA,IAEA;AAAA,IACA;AAAA,IACA;AAAA;AAAA,IAEA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA;AAAA,IAEA;AAAA,IACA;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AAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;A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;EACR,MAAQ;EACR,MAAQ;EACR,MAAQ;EACR,MAAQ;EACR,MAAQ;EACR,MAAQ;EACR,MAAQ;EACR,MAAQ;EACR,MAAQ;EACR,MAAQ;EACR,MAAQ;EACR,MAAQ;EACR,MAAQ;EACR,MAAQ;EACR,MAAQ;EACR,MAAQ;EACR,MAAQ;EACR,MAAQ;EACR,MAAQ;EACR,MAAQ;EACR,MAAQ;EACR,MAAQ;EACR,MAAQ;EACR,MAAQ;EACR,MAAQ;EACR,MAAQ;EACR,MAAQ;EACR,MAAQ;EACR,MAAQ;EACR,MAAQ;EACR,MAAQ;EACR,MAAQ;EACR,MAAQ;EACR,MAAQ;EACR,MAAQ;EACR,MAAQ;EACR,MAAQ;EACR,MAAQ;EACR,MAAQ;EACR,MAAQ;EACR,MAAQ;EACR,MAAQ;EACR,MAAQ;EACR,MAAQ;EACR,MAAQ;EACR,MAAQ;EACR,MAAQ;EACR,MAAQ;EACR,MAAQ;EACR,MAAQ;EACR,MAAQ;EACR,MAAQ;EACR,MAAQ;EACR,MAAQ;EACR,MAAQ;EACR,MAAQ;EACR,MAAQ;EACR,MAAQ;EACR,MAAQ;EACR,MAAQ;EACR,MAAQ;EACR,MAAQ;EACR,MAAQ;EACR,MAAQ;EACR,MAAQ;EACR,MAAQ;EACR,MAAQ;EACR,MAAQ;EACR,MAAQ;EACR,MAAQ;EACR,MAAQ;EACR,MAAQ;EACR,MAAQ;EACR,MAAQ;EACR,MAAQ;EACR,MAAQ;EACR,MAAQ;EACR,MAAQ;EACR,MAAQ;EACR,MAAQ;EACR,MAAQ;EACR,MAAQ;EACR,MAAQ;EACR,MAAQ;EACR,MAAQ;EACR,OAAQ;EACR,OAAQ;EACR,OAAQ;EACR,MAAQ;EACR,MAAQ;EACR,MAAQ;EACR,OAAQ;EACR,OAAQ;EACR,MAAQ;EACR,OAAQ;EACR,MAAQ;EACR,OAAQ;EACR,MAAQ;EACR,OAAQ;EACR,OAAQ;EACR,OAAQ;;;;;;;;EASR,MAAQ;EACR,MAAQ;EAER,OAAQ;EACR,OAAQ;EACR,MAAQ;EACR,MAAQ;EACR,MAAQ;EACR,MAAQ;EACR,MAAQ;EACR,MAAQ;EACR,MAAQ;EACR,MAAQ;EACR,MAAQ;EACR,MAAQ;EACR,MAAQ;EACR,MAAQ;EACR,MAAQ;EACR,MAAQ;EA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EACvB,MAAM,KAAK,QAAW,CAAC;;EACvB,UAAU,KAAK,QAAW,GAAG,GAAG,GAAG,GAAG,CAAC;;EACvC,UAAU,KAAK,QAAW,GAAG,GAAG,GAAG,GAAG,CAAC;;EACvC,UAAU,KAAK,QAAW,GAAG,GAAG,GAAG,GAAG,CAAC;;EACvC,UAAU,KAAK,QAAW,GAAG,GAAG,GAAG,GAAG,CAAC;;EACvC,UAAU,KAAK,QAAW,GAAG,GAAG,GAAG,GAAG,CAAC;;EACvC,UAAU,KAAK,QAAW,GAAG,GAAG,GAAG,GAAG,CAAC;;EACvC,UAAU,KAAK,QAAW,GAAG,GAAG,GAAG,GAAG,CAAC;;EACvC,UAAU,KAAK,QAAW,GAAG,GAAG,GAAG,GAAG,CAAC;;EACvC,UAAU,KAAK,QAAW,GAAG,GAAG,GAAG,GAAG,CAAC;;EACvC,UAAU,KAAK,QAAW,GAAG,GAAG,GAAG,GAAG,CAAC;;EACvC,UAAU,KAAK,QAAW,GAAG,GAAG,GAAG,GAAG,CAAC;;EACvC,UAAU,KAAK,QAAW,GAAG,GAAG,GAAG,GAAG,CAAC;;EACvC,UAAU,KAAK,QAAW,GAAG,GAAG,GAAG,GAAG,CAAC;;EACvC,UAAU,KAAK,QAAW,GAAG,GAAG,GAAG,GAAG,CAAC;;EACvC,UAAU,KAAK,QAAW,GAAG,GAAG,GAAG,GAAG,CAAC;;EACvC,UAAU,KAAK,QAAW,GAAG,GAAG,GAAG,GAAG,CAAC;;EACvC,UAAU,KAAK,QAAW,GAAG,GAAG,GAAG,GAAG,CAAC;;EACvC,UAAU,KAAK,QAAW,GAAG,GAAG,GAAG,GAAG,CAAC;;EACvC,UAAU,KAAK,QAAW,GAAG,GAAG,GAAG,GAAG,CAAC;;EACvC,UAAU,KAAK,QAAW,GAAG,GAAG,GAAG,GAAG,CAAC;;EACvC,UAAU,KAAK,QAAW,GAAG,GAAG,GAAG,GAAG,CAAC;;EACvC,UAAU,KAAK,QAAW,GAAG,GAAG,GAAG,GAAG,CAAC;;EACvC,UAAU,KAAK,QAAW,GAAG,GAAG,GAAG,GAAG,CAAC;;EACvC,UAAU,KAAK,QAAW,GAAG,GAAG,GAAG,GAAG,CAAC;;EACvC,UAAU,KAAK,QAAW,GAAG,GAAG,GAAG,GAAG,CAAC;;EACvC,UAAU,KAAK,QAAW,GAAG,GAAG,GAAG,GAAG,CAAC;;EACvC,UAAU,KAAK,QAAW,GAAG,GAAG,GAAG,GAAG,CAAC;;EACvC,UAAU,KAAK,QAAW,GAAG,GAAG,GAAG,GAAG,CAAC;;EACvC,UAAU,KAAK,QAAW,GAAG,GAAG,GAAG,GAAG,CAAC;;EACvC,UAAU,KAAK,QAAW,GAAG,GAAG,GAAG,GAAG,CAAC;;EACvC,UAAU,KAAK,QAAW,GAAG,GAAG,GAAG,GAAG,CAAC;;EACvC,UAAU,KAAK,QAAW,GAAG,GAAG,GAAG,GAAG,CAAC;;EACvC,UAAU,KAAK,QAAW,GAAG,GAAG,GAAG,GAAG,CAAC;;EACvC,UAAU,KAAK,QAAW,GAAG,GAAG,GAAG,GAAG,CAAC;;EACvC,UAAU,KAAK,QAAW,GAAG,GAAG,GAAG,GAAG,CAAC;;EACvC,UAAU,KAAK,QAAW,GAAG,GAAG,GAAG,GAAG,CAAC;;EACvC,UAAU,KAAK,QAAW,GAAG,GAAG,GAAG,GAAG,CAAC;;EACvC,UAAU,KAAK,QAAW,GAAG,GAAG,GAAG,GAAG,CAAC;;EACvC,UAAU,KAAK,QAAW,GAAG,GAAG,GAAG,GAAG,CAAC;;EACvC,UAAU,KAAK,QAAW,GAAG,GAAG,GAAG,GAAG,CAAC;;EACvC,UAAU,KAAK,QAAW,GAAG,GAAG,GAAG,GAAG,CAAC;;EACvC,UAAU,KAAK,QAAW,GAAG,GAAG,GAAG,GAAG,CAAC;;EACvC,UAAU,KAAK,QAAW,GAAG,GAAG,GAAG,GAAG,CAAC;;EACvC,UAAU,KAAK,QAAW,GAAG,GAAG,GAAG,GAAG,CAAC;;EACvC,UAAU,KAAK,QAAW,GAAG,GAAG,GAAG,GAAG,CAAC;;EACvC,UAAU,KAAK,QAAW,GAAG,GAAG,GAAG,GAAG,CAAC;;EACvC,UAAU,KAAK,QAAW,GAAG,GAAG,GAAG,GAAG,CAAC;;EACvC,UAAU,KAAK,QAAW,GAAG,GAAG,GAAG,GAAG,CAAC;;EACvC,UAAU,KAAK,QAAW,GAAG,GAAG,GAAG,GAAG,CAAC;;EACvC,UAAU,KAAK,QAAW,GAAG,GAAG,GAAG,GAAG,CAAC;;EACvC,UAAU,KAAK,QAAW,GA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",
  "names": ["exports", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "Symbol", "exports", "module", "Symbol", "exports", "module", "exports", "module", "Symbol", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "DataView", "exports", "module", "Map", "exports", "module", "Promise", "exports", "module", "Set", "exports", "module", "WeakMap", "exports", "module", "DataView", "Map", "Promise", "Set", "WeakMap", "getTag", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "Buffer", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "getTag", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "Map", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "size", "exports", "module", "exports", "module", "Map", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "bitmask", "othValue", "exports", "module", "Uint8Array", "exports", "module", "exports", "module", "exports", "module", "Symbol", "Uint8Array", "bitmask", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "bitmask", "exports", "module", "getTag", "bitmask", "exports", "module", "bitmask", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "Symbol", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "collection", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "Buffer", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "Uint8Array", "exports", "module", "exports", "module", "exports", "module", "Symbol", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "getTag", "exports", "module", "exports", "module", "getTag", "exports", "module", "exports", "module", "getTag", "bitmask", "key", "exports", "module", "exports", "exports", "exports", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "constant", "exports", "module", "constant", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "tokenLabel", "AbstractProduction", "exports", "NonTerminal", "Rule", "Alternative", "Option", "RepetitionMandatory", "RepetitionMandatoryWithSeparator", "Repetition", "RepetitionWithSeparator", "Alternation", "Terminal", "serializeGrammar", "serializeProduction", "GAstVisitor", "exports", "exports", "module", "collection", "exports", "module", "exports", "module", "exports", "module", "collection", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "exports", "RestWalker", "exports", "exports", "module", "Symbol", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "Set", "exports", "module", "exports", "module", "exports", "exports", "ResyncFollowsWalker", "exports", "exports", "module", "exports", "module", "i", "exports", "module", "head", "require_first", "exports", "module", "exports", "module", "exports", "module", "collection", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "collection", "exports", "module", "exports", "exports", "i", "CharCodeFinder", "exports", "charCode", "EndAnchorFinder", "StartAnchorFinder", "_a", "i", "exports", "module", "exports", "exports", "line", "LexerDefinitionErrorType", "exports", "Lexer", "_a", "i", "line", "tokenLabel", "exports", "tokenName", "createToken", "createTokenInstance", "tokenMatcher", "exports", "_a", "exports", "GastRefResolverVisitor", "exports", "module", "exports", "module", "collection", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "AbstractNextPossibleTokensWalker", "exports", "NextAfterTokenWalker", "AbstractNextTerminalAfterProductionWalker", "NextTerminalAfterManyWalker", "NextTerminalAfterManySepWalker", "NextTerminalAfterAtLeastOneWalker", "NextTerminalAfterAtLeastOneSepWalker", "i", "PROD_TYPE", "exports", "getLookaheadPaths", "tokenMatcher", "currAlt", "t", "i", "RestDefinitionFinderWalker", "InsideDefinitionFinderVisitor", "size", "altIdx", "prefixKeys", "exports", "OccurrenceValidationCollector", "OrCollector", "RepetitionCollector", "exports", "isRecognitionException", "exports", "RecognitionException", "MismatchedTokenException", "NoViableAltException", "NotAllInputParsedException", "EarlyExitException", "exports", "InRuleRecoveryException", "Recoverable", "exports", "LLkLookaheadStrategy", "_a", "exports", "LooksAhead", "_a", "exports", "DslMethodsCollectorVisitor", "exports", "exports", "i", "exports", "CstVisitorDefinitionError", "TreeBuilder", "exports", "LexerAdapter", "exports", "RecognizerApi", "exports", "RecognizerEngine", "invokeRuleWithTry", "exports", "ErrorHandler", "i", "exports", "ContentAssist", "exports", "GastRecorder", "i", "exports", "PerformanceTracer", "_a", "exports", "exports", "exports", "ParserDefinitionErrorType", "EMPTY_ALT", "Parser", "_b", "_a", "CstParser", "EmbeddedActionsParser", "exports", "CstNodeDefinitionGenerator", "g", "definition", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "module", "exports", "t", "generateCstDts", "exports", "createSyntaxDiagramsCode", "_a", "_b", "exports", "exports", "clearCache", "Parser", "exports", "module", "_v1", "geometry", "i", "i", "matrix", "a", "geometry", "material", "cb", "b", "i", "_a", "_b", "a", "l", "t", "t2", "i2", "post", "head", "post", "a", "b", "td", "i", "t", "init", "cb", "_a", "init", "t", "b", "i", "fl", "cb", "Deflate", "AsyncDeflate", "cb", "Inflate", "cb", "AsyncInflate", "cb", "Gzip", "cb", "Gunzip", "cb", "AsyncGunzip", "cb", "Zlib", "cb", "Unzlib", "cb", "AsyncUnzlib", "cb", "Decompress", "cb", "AsyncDecompress", "cb", "i", "DecodeUTF8", "cb", "_a", "ch", "EncodeUTF8", "cb", "i", "_a", "b", "fl", "ZipPassThrough", "ZipDeflate", "AsyncZipDeflate", "Zip", "cb", "fl", "_a", "_b", "UnzipPassThrough", "UnzipInflate", "AsyncUnzipInflate", "Unzip", "cb", "i", "_a", "dat", "final", "geometry", "i", "t", "size", "a", "i", "v1", "line", "_vector", "_matrix", "_position", "_quaternion", "_scale", "_q", "__defProp", "__defNormalProp", "__publicField", "geometry", "rotationMatrix", "material", "__defProp", "__defNormalProp", "__publicField", "geometry", "rotationMatrix", "__defProp", "__defNormalProp", "__publicField", "size", "i", "__defProp", "__defNormalProp", "__publicField", "g", "i", "t", "t2", "i2", "__defProp", "__defNormalProp", "__publicField", "i", "__defProp", "__defNormalProp", "__publicField", "geometry", "yAxis", "rotationMatrix", "material", "__defProp", "__defNormalProp", "__publicField", "__defProp", "__defNormalProp", "__publicField", "geometry", "matrix", "center", "i", "matrix2", "_v1", "a", "b", "i", "_v1", "_v2", "_plane", "STATE2", "_vector", "STATE", "__defProp", "__defNormalProp", "__publicField", "material", "__defProp", "__defNormalProp", "__publicField", "i", "size", "__defProp", "__defNormalProp", "__publicField", "i", "i", "__defProp", "__defNormalProp", "__publicField", "__defProp", "__defNormalProp", "__publicField", "i", "_q", "__defProp", "__defNormalProp", "__publicField", "_a", "_matrix", "_vector", "i", "__defProp", "__defNormalProp", "__publicField", "__publicField", "size", "i", "_start", "load", "line", "_end", "_obj", "b", "mod", "Parser", "i", "KHR_SUPERCOMPRESSION_NONE", "KHR_SUPERCOMPRESSION_ZSTD", "KHR_DF_KHR_DESCRIPTORTYPE_BASICFORMAT", "KHR_DF_VENDORID_KHRONOS", "KHR_DF_VERSION", "KHR_DF_MODEL_UNSPECIFIED", "KHR_DF_FLAG_ALPHA_STRAIGHT", "KHR_DF_FLAG_ALPHA_PREMULTIPLIED", "KHR_DF_TRANSFER_SRGB", "KHR_DF_PRIMARIES_BT709", "KHR_DF_SAMPLE_DATATYPE_SIGNED", "VK_FORMAT_UNDEFINED", "VK_FORMAT_R8_UNORM", "VK_FORMAT_R8_SRGB", "VK_FORMAT_R8G8_UNORM", "VK_FORMAT_R8G8_SRGB", "VK_FORMAT_R8G8B8A8_UNORM", "VK_FORMAT_R8G8B8A8_SRGB", "VK_FORMAT_R16_SFLOAT", "VK_FORMAT_R16G16_SFLOAT", "VK_FORMAT_R16G16B16A16_SFLOAT", "VK_FORMAT_R32_SFLOAT", "VK_FORMAT_R32G32_SFLOAT", "VK_FORMAT_R32G32B32A32_SFLOAT", "KTX2Container", "vkFormat", "VK_FORMAT_UNDEFINED", "typeSize", "pixelWidth", "pixelHeight", "pixelDepth", "layerCount", "faceCount", "supercompressionScheme", "KHR_SUPERCOMPRESSION_NONE", "levels", "dataFormatDescriptor", "vendorId", "KHR_DF_VENDORID_KHRONOS", "descriptorType", "KHR_DF_KHR_DESCRIPTORTYPE_BASICFORMAT", "descriptorBlockSize", "versionNumber", "KHR_DF_VERSION", "colorModel", "KHR_DF_MODEL_UNSPECIFIED", "colorPrimaries", "KHR_DF_PRIMARIES_BT709", "transferFunction", "KHR_DF_TRANSFER_SRGB", "flags", "KHR_DF_FLAG_ALPHA_STRAIGHT", "texelBlockDimension", "bytesPlane", "samples", "keyValue", "globalData", "BufferReader", "constructor", "data", "byteOffset", "byteLength", "littleEndian", "_dataView", "_littleEndian", "_offset", "DataView", "buffer", "_nextUint8", "value", "getUint8", "_nextUint16", "getUint16", "_nextUint32", "getUint32", "_nextUint64", "left", "right", "_nextInt32", "getInt32", "_skip", "bytes", "_scan", "maxByteLength", "term", "Uint8Array", "NUL", "Uint8Array", "KTX2_ID", "decodeText", "buffer", "TextDecoder", "decode", "Buffer", "from", "toString", "read", "data", "id", "Uint8Array", "buffer", "byteOffset", "KTX2_ID", "length", "Error", "container", "KTX2Container", "headerByteLength", "Uint32Array", "BYTES_PER_ELEMENT", "headerReader", "BufferReader", "vkFormat", "_nextUint32", "typeSize", "pixelWidth", "pixelHeight", "pixelDepth", "layerCount", "faceCount", "levelCount", "supercompressionScheme", "dfdByteOffset", "dfdByteLength", "kvdByteOffset", "kvdByteLength", "sgdByteOffset", "_nextUint64", "sgdByteLength", "levelByteLength", "levelReader", "i", "levels", "push", "levelData", "uncompressedByteLength", "dfdReader", "dfd", "vendorId", "_skip", "_nextUint16", "descriptorType", "versionNumber", "descriptorBlockSize", "colorModel", "_nextUint8", "colorPrimaries", "transferFunction", "flags", "texelBlockDimension", "bytesPlane", "samples", "sampleStart", "sampleWords", "numSamples", "sample", "bitOffset", "bitLength", "channelType", "samplePosition", "sampleLower", "sampleUpper", "Infinity", "KHR_DF_SAMPLE_DATATYPE_SIGNED", "_nextInt32", "dataFormatDescriptor", "kvdReader", "_offset", "keyValueByteLength", "keyData", "_scan", "key", "decodeText", "valueData", "byteLength", "keyValue", "match", "sgdReader", "endpointCount", "selectorCount", "endpointsByteLength", "selectorsByteLength", "tablesByteLength", "extendedByteLength", "imageDescs", "imageFlags", "rgbSliceByteOffset", "rgbSliceByteLength", "alphaSliceByteOffset", "alphaSliceByteLength", "endpointsByteOffset", "selectorsByteOffset", "tablesByteOffset", "extendedByteOffset", "endpointsData", "selectorsData", "tablesData", "extendedData", "globalData", "init", "instance", "heap", "IMPORT_OBJECT", "env", "emscripten_notify_memory_growth", "index", "Uint8Array", "exports", "memory", "buffer", "ZSTDDecoder", "fetch", "wasm", "then", "response", "arrayBuffer", "WebAssembly", "instantiate", "this", "_init", "Buffer", "from", "result", "decode", "array", "uncompressedSize", "Error", "compressedSize", "byteLength", "compressedPtr", "malloc", "set", "Number", "ZSTD_findDecompressedSize", "uncompressedPtr", "actualSize", "ZSTD_decompress", "dec", "slice", "free", "__defProp", "__defNormalProp", "__publicField", "init", "i", "a", "b", "size", "bits", "i", "t", "lengths", "clen", "offs", "v1", "const", "b", "a", "t2", "Path", "let", "arguments", "ii", "table", "subtableMakers", "Parser", "cmap", "g", "post", "x", "y", "scale", "parseGlyph", "buildPath", "parseCFFCharstring", "b2", "b4", "meta", "parse", "code", "charString", "head", "hhea", "maxp", "ltag", "os2", "glyphCount", "substCount", "tableData", "returnTable", "gsub", "sfnt", "langSysTable", "pair", "ab", "loca", "this", "subtable", "singleSubstitutionFormat1", "singleSubstitutionFormat2", "chainingSubstitutionFormat3", "ligatureSubstitutionFormat1", "index", "getContextParams", "check", "Font", "HintingTrueType", "fvar", "gdef", "subtableParsers", "parseLookup1", "parseLookup2", "parseLookup3", "parseLookup4", "parseLookup5", "parseLookup6", "parseLookup7", "parseLookup8", "gpos", "inflate", "__defProp", "__defNormalProp", "__publicField", "_taskCache", "i", "a", "b", "init", "_vector", "_start", "_end", "_closestPoint", "_box", "_sphere", "_v1", "_v2", "_v1", "_v2", "i", "_quaternion", "_vector3", "_matrix4", "_position", "_scale", "cb", "React", "world", "a", "geometry", "size", "g", "t", "matrix", "index"]
}
